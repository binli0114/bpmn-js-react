import t_, { useState as oo, useRef as Ko, useEffect as Wi, useLayoutEffect as Uw, createContext as n_, useContext as dd, useMemo as Yw, useCallback as Ny, useId as Kw, forwardRef as ur, createElement as By, useImperativeHandle as qw } from "react";
import Xw from "react-dom";
const wB = () => {
  oo("");
  const [e, t] = oo(null), n = () => e == null ? void 0 : e.get("canvas"), i = (P) => e == null ? void 0 : e.importXML(P), r = async (P = { format: !1 }) => e == null ? void 0 : e.saveXML(P), o = () => e == null ? void 0 : e.get("elementRegistry").getAll(), a = (P) => e == null ? void 0 : e.get("elementRegistry").get(P), c = (P = 0.1) => {
    var N;
    (N = e == null ? void 0 : e.get("zoomScroll")) == null || N.zoom(P);
  }, l = (P = 0.1) => {
    var N;
    (N = e == null ? void 0 : e.get("zoomScroll")) == null || N.zoom(-P);
  }, u = () => {
    var P;
    (P = e == null ? void 0 : e.get("zoomScroll")) == null || P.zoom("fit-viewport");
  }, d = () => {
    const P = e == null ? void 0 : e.get("canvas");
    P == null || P.zoom("fit-viewport");
  }, f = (P, N) => {
    e.get("canvas").addMarker(P, N);
  }, y = (P, N) => {
    e == null || e.get("canvas").removeMarker(P, N);
  }, g = (P, N) => {
    e.get("modeling").setColor(P, N);
  }, _ = () => e == null ? void 0 : e.get("elementRegistry"), x = (P) => {
    var N;
    return (N = _()) == null ? void 0 : N.get(P).businessObject;
  };
  return {
    bpmnModeler: e,
    setBpmnModeler: t,
    importXml: i,
    saveXml: r,
    // saveXmlAsync,
    getCanvas: n,
    getElements: o,
    getElementById: a,
    getBusinessObject: x,
    zoomIn: c,
    zoomOut: l,
    zoomFit: u,
    setStyle: d,
    setColor: g,
    addMarker: f,
    removeMarker: y,
    getAttribute: (P, N) => x(P).$attrs[N],
    setAttribute: (P, N, j) => {
      e.get("modeling").updateProperties(a(P), { [N]: j });
    },
    getIncoming: (P) => x(P).incoming,
    getOutgoing: (P) => x(P).outgoing
  };
};
var Zw = typeof globalThis < "u" ? globalThis : typeof window < "u" ? window : typeof global < "u" ? global : typeof self < "u" ? self : {};
function Jw(e) {
  return e && e.__esModule && Object.prototype.hasOwnProperty.call(e, "default") ? e.default : e;
}
var Rf = { exports: {} }, ys = {};
/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
var Ly;
function Qw() {
  if (Ly)
    return ys;
  Ly = 1;
  var e = t_, t = Symbol.for("react.element"), n = Symbol.for("react.fragment"), i = Object.prototype.hasOwnProperty, r = e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner, o = { key: !0, ref: !0, __self: !0, __source: !0 };
  function a(c, l, u) {
    var d, f = {}, y = null, g = null;
    u !== void 0 && (y = "" + u), l.key !== void 0 && (y = "" + l.key), l.ref !== void 0 && (g = l.ref);
    for (d in l)
      i.call(l, d) && !o.hasOwnProperty(d) && (f[d] = l[d]);
    if (c && c.defaultProps)
      for (d in l = c.defaultProps, l)
        f[d] === void 0 && (f[d] = l[d]);
    return { $$typeof: t, type: c, key: y, ref: g, props: f, _owner: r.current };
  }
  return ys.Fragment = n, ys.jsx = a, ys.jsxs = a, ys;
}
var gs = {};
/**
 * @license React
 * react-jsx-runtime.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
var Iy;
function eS() {
  return Iy || (Iy = 1, process.env.NODE_ENV !== "production" && function() {
    var e = t_, t = Symbol.for("react.element"), n = Symbol.for("react.portal"), i = Symbol.for("react.fragment"), r = Symbol.for("react.strict_mode"), o = Symbol.for("react.profiler"), a = Symbol.for("react.provider"), c = Symbol.for("react.context"), l = Symbol.for("react.forward_ref"), u = Symbol.for("react.suspense"), d = Symbol.for("react.suspense_list"), f = Symbol.for("react.memo"), y = Symbol.for("react.lazy"), g = Symbol.for("react.offscreen"), _ = Symbol.iterator, x = "@@iterator";
    function w(H) {
      if (H === null || typeof H != "object")
        return null;
      var ue = _ && H[_] || H[x];
      return typeof ue == "function" ? ue : null;
    }
    var D = e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;
    function O(H) {
      {
        for (var ue = arguments.length, Se = new Array(ue > 1 ? ue - 1 : 0), Ue = 1; Ue < ue; Ue++)
          Se[Ue - 1] = arguments[Ue];
        k("error", H, Se);
      }
    }
    function k(H, ue, Se) {
      {
        var Ue = D.ReactDebugCurrentFrame, wt = Ue.getStackAddendum();
        wt !== "" && (ue += "%s", Se = Se.concat([wt]));
        var Ct = Se.map(function(_t) {
          return String(_t);
        });
        Ct.unshift("Warning: " + ue), Function.prototype.apply.call(console[H], console, Ct);
      }
    }
    var P = !1, N = !1, j = !1, W = !1, $ = !1, Z;
    Z = Symbol.for("react.module.reference");
    function X(H) {
      return !!(typeof H == "string" || typeof H == "function" || H === i || H === o || $ || H === r || H === u || H === d || W || H === g || P || N || j || typeof H == "object" && H !== null && (H.$$typeof === y || H.$$typeof === f || H.$$typeof === a || H.$$typeof === c || H.$$typeof === l || // This needs to include all possible module reference object
      // types supported by any Flight configuration anywhere since
      // we don't know which Flight build this will end up being used
      // with.
      H.$$typeof === Z || H.getModuleId !== void 0));
    }
    function V(H, ue, Se) {
      var Ue = H.displayName;
      if (Ue)
        return Ue;
      var wt = ue.displayName || ue.name || "";
      return wt !== "" ? Se + "(" + wt + ")" : Se;
    }
    function ae(H) {
      return H.displayName || "Context";
    }
    function ie(H) {
      if (H == null)
        return null;
      if (typeof H.tag == "number" && O("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."), typeof H == "function")
        return H.displayName || H.name || null;
      if (typeof H == "string")
        return H;
      switch (H) {
        case i:
          return "Fragment";
        case n:
          return "Portal";
        case o:
          return "Profiler";
        case r:
          return "StrictMode";
        case u:
          return "Suspense";
        case d:
          return "SuspenseList";
      }
      if (typeof H == "object")
        switch (H.$$typeof) {
          case c:
            var ue = H;
            return ae(ue) + ".Consumer";
          case a:
            var Se = H;
            return ae(Se._context) + ".Provider";
          case l:
            return V(H, H.render, "ForwardRef");
          case f:
            var Ue = H.displayName || null;
            return Ue !== null ? Ue : ie(H.type) || "Memo";
          case y: {
            var wt = H, Ct = wt._payload, _t = wt._init;
            try {
              return ie(_t(Ct));
            } catch {
              return null;
            }
          }
        }
      return null;
    }
    var Ae = Object.assign, Rt = 0, it, Ve, Zt, an, Pt, Kt, oe;
    function se() {
    }
    se.__reactDisabledLog = !0;
    function fe() {
      {
        if (Rt === 0) {
          it = console.log, Ve = console.info, Zt = console.warn, an = console.error, Pt = console.group, Kt = console.groupCollapsed, oe = console.groupEnd;
          var H = {
            configurable: !0,
            enumerable: !0,
            value: se,
            writable: !0
          };
          Object.defineProperties(console, {
            info: H,
            log: H,
            warn: H,
            error: H,
            group: H,
            groupCollapsed: H,
            groupEnd: H
          });
        }
        Rt++;
      }
    }
    function ct() {
      {
        if (Rt--, Rt === 0) {
          var H = {
            configurable: !0,
            enumerable: !0,
            writable: !0
          };
          Object.defineProperties(console, {
            log: Ae({}, H, {
              value: it
            }),
            info: Ae({}, H, {
              value: Ve
            }),
            warn: Ae({}, H, {
              value: Zt
            }),
            error: Ae({}, H, {
              value: an
            }),
            group: Ae({}, H, {
              value: Pt
            }),
            groupCollapsed: Ae({}, H, {
              value: Kt
            }),
            groupEnd: Ae({}, H, {
              value: oe
            })
          });
        }
        Rt < 0 && O("disabledDepth fell below zero. This is a bug in React. Please file an issue.");
      }
    }
    var Lt = D.ReactCurrentDispatcher, Et;
    function Ne(H, ue, Se) {
      {
        if (Et === void 0)
          try {
            throw Error();
          } catch (wt) {
            var Ue = wt.stack.trim().match(/\n( *(at )?)/);
            Et = Ue && Ue[1] || "";
          }
        return `
` + Et + H;
      }
    }
    var I = !1, E;
    {
      var C = typeof WeakMap == "function" ? WeakMap : Map;
      E = new C();
    }
    function F(H, ue) {
      if (!H || I)
        return "";
      {
        var Se = E.get(H);
        if (Se !== void 0)
          return Se;
      }
      var Ue;
      I = !0;
      var wt = Error.prepareStackTrace;
      Error.prepareStackTrace = void 0;
      var Ct;
      Ct = Lt.current, Lt.current = null, fe();
      try {
        if (ue) {
          var _t = function() {
            throw Error();
          };
          if (Object.defineProperty(_t.prototype, "props", {
            set: function() {
              throw Error();
            }
          }), typeof Reflect == "object" && Reflect.construct) {
            try {
              Reflect.construct(_t, []);
            } catch ($t) {
              Ue = $t;
            }
            Reflect.construct(H, [], _t);
          } else {
            try {
              _t.call();
            } catch ($t) {
              Ue = $t;
            }
            H.call(_t.prototype);
          }
        } else {
          try {
            throw Error();
          } catch ($t) {
            Ue = $t;
          }
          H();
        }
      } catch ($t) {
        if ($t && Ue && typeof $t.stack == "string") {
          for (var Ke = $t.stack.split(`
`), bn = Ue.stack.split(`
`), It = Ke.length - 1, Gt = bn.length - 1; It >= 1 && Gt >= 0 && Ke[It] !== bn[Gt]; )
            Gt--;
          for (; It >= 1 && Gt >= 0; It--, Gt--)
            if (Ke[It] !== bn[Gt]) {
              if (It !== 1 || Gt !== 1)
                do
                  if (It--, Gt--, Gt < 0 || Ke[It] !== bn[Gt]) {
                    var ni = `
` + Ke[It].replace(" at new ", " at ");
                    return H.displayName && ni.includes("<anonymous>") && (ni = ni.replace("<anonymous>", H.displayName)), typeof H == "function" && E.set(H, ni), ni;
                  }
                while (It >= 1 && Gt >= 0);
              break;
            }
        }
      } finally {
        I = !1, Lt.current = Ct, ct(), Error.prepareStackTrace = wt;
      }
      var vr = H ? H.displayName || H.name : "", Dt = vr ? Ne(vr) : "";
      return typeof H == "function" && E.set(H, Dt), Dt;
    }
    function K(H, ue, Se) {
      return F(H, !1);
    }
    function ne(H) {
      var ue = H.prototype;
      return !!(ue && ue.isReactComponent);
    }
    function ke(H, ue, Se) {
      if (H == null)
        return "";
      if (typeof H == "function")
        return F(H, ne(H));
      if (typeof H == "string")
        return Ne(H);
      switch (H) {
        case u:
          return Ne("Suspense");
        case d:
          return Ne("SuspenseList");
      }
      if (typeof H == "object")
        switch (H.$$typeof) {
          case l:
            return K(H.render);
          case f:
            return ke(H.type, ue, Se);
          case y: {
            var Ue = H, wt = Ue._payload, Ct = Ue._init;
            try {
              return ke(Ct(wt), ue, Se);
            } catch {
            }
          }
        }
      return "";
    }
    var Je = Object.prototype.hasOwnProperty, Ee = {}, at = D.ReactDebugCurrentFrame;
    function Mt(H) {
      if (H) {
        var ue = H._owner, Se = ke(H.type, H._source, ue ? ue.type : null);
        at.setExtraStackFrame(Se);
      } else
        at.setExtraStackFrame(null);
    }
    function ht(H, ue, Se, Ue, wt) {
      {
        var Ct = Function.call.bind(Je);
        for (var _t in H)
          if (Ct(H, _t)) {
            var Ke = void 0;
            try {
              if (typeof H[_t] != "function") {
                var bn = Error((Ue || "React class") + ": " + Se + " type `" + _t + "` is invalid; it must be a function, usually from the `prop-types` package, but received `" + typeof H[_t] + "`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");
                throw bn.name = "Invariant Violation", bn;
              }
              Ke = H[_t](ue, _t, Ue, Se, null, "SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED");
            } catch (It) {
              Ke = It;
            }
            Ke && !(Ke instanceof Error) && (Mt(wt), O("%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).", Ue || "React class", Se, _t, typeof Ke), Mt(null)), Ke instanceof Error && !(Ke.message in Ee) && (Ee[Ke.message] = !0, Mt(wt), O("Failed %s type: %s", Se, Ke.message), Mt(null));
          }
      }
    }
    var In = Array.isArray;
    function Ii(H) {
      return In(H);
    }
    function _n(H) {
      {
        var ue = typeof Symbol == "function" && Symbol.toStringTag, Se = ue && H[Symbol.toStringTag] || H.constructor.name || "Object";
        return Se;
      }
    }
    function Be(H) {
      try {
        return ft(H), !1;
      } catch {
        return !0;
      }
    }
    function ft(H) {
      return "" + H;
    }
    function Po(H) {
      if (Be(H))
        return O("The provided key is an unsupported type %s. This value must be coerced to a string before before using it here.", _n(H)), ft(H);
    }
    var Xi = D.ReactCurrentOwner, vp = {
      key: !0,
      ref: !0,
      __self: !0,
      __source: !0
    }, zr, Zi, To;
    To = {};
    function _p(H) {
      if (Je.call(H, "ref")) {
        var ue = Object.getOwnPropertyDescriptor(H, "ref").get;
        if (ue && ue.isReactWarning)
          return !1;
      }
      return H.ref !== void 0;
    }
    function fa(H) {
      if (Je.call(H, "key")) {
        var ue = Object.getOwnPropertyDescriptor(H, "key").get;
        if (ue && ue.isReactWarning)
          return !1;
      }
      return H.key !== void 0;
    }
    function rs(H, ue) {
      if (typeof H.ref == "string" && Xi.current && ue && Xi.current.stateNode !== ue) {
        var Se = ie(Xi.current.type);
        To[Se] || (O('Component "%s" contains the string ref "%s". Support for string refs will be removed in a future major release. This case cannot be automatically converted to an arrow function. We ask you to manually fix this case by using useRef() or createRef() instead. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-string-ref', ie(Xi.current.type), H.ref), To[Se] = !0);
      }
    }
    function os(H, ue) {
      {
        var Se = function() {
          zr || (zr = !0, O("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)", ue));
        };
        Se.isReactWarning = !0, Object.defineProperty(H, "key", {
          get: Se,
          configurable: !0
        });
      }
    }
    function Mc(H, ue) {
      {
        var Se = function() {
          Zi || (Zi = !0, O("%s: `ref` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)", ue));
        };
        Se.isReactWarning = !0, Object.defineProperty(H, "ref", {
          get: Se,
          configurable: !0
        });
      }
    }
    var as = function(H, ue, Se, Ue, wt, Ct, _t) {
      var Ke = {
        // This tag allows us to uniquely identify this as a React Element
        $$typeof: t,
        // Built-in properties that belong on the element
        type: H,
        key: ue,
        ref: Se,
        props: _t,
        // Record the component responsible for creating this element.
        _owner: Ct
      };
      return Ke._store = {}, Object.defineProperty(Ke._store, "validated", {
        configurable: !1,
        enumerable: !1,
        writable: !0,
        value: !1
      }), Object.defineProperty(Ke, "_self", {
        configurable: !1,
        enumerable: !1,
        writable: !1,
        value: Ue
      }), Object.defineProperty(Ke, "_source", {
        configurable: !1,
        enumerable: !1,
        writable: !1,
        value: wt
      }), Object.freeze && (Object.freeze(Ke.props), Object.freeze(Ke)), Ke;
    };
    function bp(H, ue, Se, Ue, wt) {
      {
        var Ct, _t = {}, Ke = null, bn = null;
        Se !== void 0 && (Po(Se), Ke = "" + Se), fa(ue) && (Po(ue.key), Ke = "" + ue.key), _p(ue) && (bn = ue.ref, rs(ue, wt));
        for (Ct in ue)
          Je.call(ue, Ct) && !vp.hasOwnProperty(Ct) && (_t[Ct] = ue[Ct]);
        if (H && H.defaultProps) {
          var It = H.defaultProps;
          for (Ct in It)
            _t[Ct] === void 0 && (_t[Ct] = It[Ct]);
        }
        if (Ke || bn) {
          var Gt = typeof H == "function" ? H.displayName || H.name || "Unknown" : H;
          Ke && os(_t, Gt), bn && Mc(_t, Gt);
        }
        return as(H, Ke, bn, wt, Ue, Xi.current, _t);
      }
    }
    var ti = D.ReactCurrentOwner, Qe = D.ReactDebugCurrentFrame;
    function _e(H) {
      if (H) {
        var ue = H._owner, Se = ke(H.type, H._source, ue ? ue.type : null);
        Qe.setExtraStackFrame(Se);
      } else
        Qe.setExtraStackFrame(null);
    }
    var yr;
    yr = !1;
    function gr(H) {
      return typeof H == "object" && H !== null && H.$$typeof === t;
    }
    function Gn() {
      {
        if (ti.current) {
          var H = ie(ti.current.type);
          if (H)
            return `

Check the render method of \`` + H + "`.";
        }
        return "";
      }
    }
    function $n(H) {
      return "";
    }
    var Dc = {};
    function xp(H) {
      {
        var ue = Gn();
        if (!ue) {
          var Se = typeof H == "string" ? H : H.displayName || H.name;
          Se && (ue = `

Check the top-level render call using <` + Se + ">.");
        }
        return ue;
      }
    }
    function Oc(H, ue) {
      {
        if (!H._store || H._store.validated || H.key != null)
          return;
        H._store.validated = !0;
        var Se = xp(ue);
        if (Dc[Se])
          return;
        Dc[Se] = !0;
        var Ue = "";
        H && H._owner && H._owner !== ti.current && (Ue = " It was passed a child from " + ie(H._owner.type) + "."), _e(H), O('Each child in a list should have a unique "key" prop.%s%s See https://reactjs.org/link/warning-keys for more information.', Se, Ue), _e(null);
      }
    }
    function Nc(H, ue) {
      {
        if (typeof H != "object")
          return;
        if (Ii(H))
          for (var Se = 0; Se < H.length; Se++) {
            var Ue = H[Se];
            gr(Ue) && Oc(Ue, ue);
          }
        else if (gr(H))
          H._store && (H._store.validated = !0);
        else if (H) {
          var wt = w(H);
          if (typeof wt == "function" && wt !== H.entries)
            for (var Ct = wt.call(H), _t; !(_t = Ct.next()).done; )
              gr(_t.value) && Oc(_t.value, ue);
        }
      }
    }
    function Bc(H) {
      {
        var ue = H.type;
        if (ue == null || typeof ue == "string")
          return;
        var Se;
        if (typeof ue == "function")
          Se = ue.propTypes;
        else if (typeof ue == "object" && (ue.$$typeof === l || // Note: Memo only checks outer props here.
        // Inner props are checked in the reconciler.
        ue.$$typeof === f))
          Se = ue.propTypes;
        else
          return;
        if (Se) {
          var Ue = ie(ue);
          ht(Se, H.props, "prop", Ue, H);
        } else if (ue.PropTypes !== void 0 && !yr) {
          yr = !0;
          var wt = ie(ue);
          O("Component %s declared `PropTypes` instead of `propTypes`. Did you misspell the property assignment?", wt || "Unknown");
        }
        typeof ue.getDefaultProps == "function" && !ue.getDefaultProps.isReactClassApproved && O("getDefaultProps is only used on classic React.createClass definitions. Use a static property named `defaultProps` instead.");
      }
    }
    function Ep(H) {
      {
        for (var ue = Object.keys(H.props), Se = 0; Se < ue.length; Se++) {
          var Ue = ue[Se];
          if (Ue !== "children" && Ue !== "key") {
            _e(H), O("Invalid prop `%s` supplied to `React.Fragment`. React.Fragment can only have `key` and `children` props.", Ue), _e(null);
            break;
          }
        }
        H.ref !== null && (_e(H), O("Invalid attribute `ref` supplied to `React.Fragment`."), _e(null));
      }
    }
    var Lc = {};
    function kn(H, ue, Se, Ue, wt, Ct) {
      {
        var _t = X(H);
        if (!_t) {
          var Ke = "";
          (H === void 0 || typeof H == "object" && H !== null && Object.keys(H).length === 0) && (Ke += " You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.");
          var bn = $n();
          bn ? Ke += bn : Ke += Gn();
          var It;
          H === null ? It = "null" : Ii(H) ? It = "array" : H !== void 0 && H.$$typeof === t ? (It = "<" + (ie(H.type) || "Unknown") + " />", Ke = " Did you accidentally export a JSX literal instead of a component?") : It = typeof H, O("React.jsx: type is invalid -- expected a string (for built-in components) or a class/function (for composite components) but got: %s.%s", It, Ke);
        }
        var Gt = bp(H, ue, Se, wt, Ct);
        if (Gt == null)
          return Gt;
        if (_t) {
          var ni = ue.children;
          if (ni !== void 0)
            if (Ue)
              if (Ii(ni)) {
                for (var vr = 0; vr < ni.length; vr++)
                  Nc(ni[vr], H);
                Object.freeze && Object.freeze(ni);
              } else
                O("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");
            else
              Nc(ni, H);
        }
        if (Je.call(ue, "key")) {
          var Dt = ie(H), $t = Object.keys(ue).filter(function(ss) {
            return ss !== "key";
          }), Un = $t.length > 0 ? "{key: someKey, " + $t.join(": ..., ") + ": ...}" : "{key: someKey}";
          if (!Lc[Dt + Un]) {
            var da = $t.length > 0 ? "{" + $t.join(": ..., ") + ": ...}" : "{}";
            O(`A props object containing a "key" prop is being spread into JSX:
  let props = %s;
  <%s {...props} />
React keys must be passed directly to JSX without using spread:
  let props = %s;
  <%s key={someKey} {...props} />`, Un, Dt, da, Dt), Lc[Dt + Un] = !0;
          }
        }
        return H === i ? Ep(Gt) : Bc(Gt), Gt;
      }
    }
    function wp(H, ue, Se) {
      return kn(H, ue, Se, !0);
    }
    function ko(H, ue, Se) {
      return kn(H, ue, Se, !1);
    }
    var Ji = ko, Ic = wp;
    gs.Fragment = i, gs.jsx = Ji, gs.jsxs = Ic;
  }()), gs;
}
process.env.NODE_ENV === "production" ? Rf.exports = Qw() : Rf.exports = eS();
var Oe = Rf.exports;
function Pe(e, t) {
  t && (e.super_ = t, e.prototype = Object.create(t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }));
}
function tS(e, t) {
  return t = { exports: {} }, e(t, t.exports), t.exports;
}
var nS = tS(function(e) {
  var t = e.exports = function(n, i) {
    if (i || (i = 16), n === void 0 && (n = 128), n <= 0)
      return "0";
    for (var r = Math.log(Math.pow(2, n)) / Math.log(i), o = 2; r === 1 / 0; o *= 2)
      r = Math.log(Math.pow(2, n / o)) / Math.log(i) * o;
    for (var a = r - Math.floor(r), c = "", o = 0; o < Math.floor(r); o++) {
      var l = Math.floor(Math.random() * i).toString(i);
      c = l + c;
    }
    if (a) {
      var u = Math.pow(i, a), l = Math.floor(Math.random() * u).toString(i);
      c = l + c;
    }
    var d = parseInt(c, i);
    return d !== 1 / 0 && d >= Math.pow(2, n) ? t(n, i) : c;
  };
  t.rack = function(n, i, r) {
    var o = function(c) {
      var l = 0;
      do {
        if (l++ > 10)
          if (r)
            n += r;
          else
            throw new Error("too many ID collisions, use more bits");
        var u = t(n, i);
      } while (Object.hasOwnProperty.call(a, u));
      return a[u] = c, u;
    }, a = o.hats = {};
    return o.get = function(c) {
      return o.hats[c];
    }, o.set = function(c, l) {
      return o.hats[c] = l, o;
    }, o.bits = n || 128, o.base = i || 16, o;
  };
});
function cr(e) {
  if (!(this instanceof cr))
    return new cr(e);
  e = e || [128, 36, 1], this._seed = e.length ? nS.rack(e[0], e[1], e[2]) : e;
}
cr.prototype.next = function(e) {
  return this._seed(e || !0);
};
cr.prototype.nextPrefixed = function(e, t) {
  var n;
  do
    n = e + this.next(!0);
  while (this.assigned(n));
  return this.claim(n, t), n;
};
cr.prototype.claim = function(e, t) {
  this._seed.set(e, t || !0);
};
cr.prototype.assigned = function(e) {
  return this._seed.get(e) || !1;
};
cr.prototype.unclaim = function(e) {
  delete this._seed.hats[e];
};
cr.prototype.clear = function() {
  var e = this._seed.hats, t;
  for (t in e)
    this.unclaim(t);
};
function ql(e) {
  return Array.prototype.concat.apply([], e);
}
const Qs = Object.prototype.toString, iS = Object.prototype.hasOwnProperty;
function qo(e) {
  return e === void 0;
}
function dn(e) {
  return e !== void 0;
}
function Xl(e) {
  return e == null;
}
function nt(e) {
  return Qs.call(e) === "[object Array]";
}
function yn(e) {
  return Qs.call(e) === "[object Object]";
}
function je(e) {
  return Qs.call(e) === "[object Number]";
}
function un(e) {
  const t = Qs.call(e);
  return t === "[object Function]" || t === "[object AsyncFunction]" || t === "[object GeneratorFunction]" || t === "[object AsyncGeneratorFunction]" || t === "[object Proxy]";
}
function ci(e) {
  return Qs.call(e) === "[object String]";
}
function rS(e) {
  if (!nt(e))
    throw new Error("must supply array");
}
function Zn(e, t) {
  return iS.call(e, t);
}
function gt(e, t) {
  const n = hu(t);
  let i;
  return z(e, function(r, o) {
    if (n(r, o))
      return i = r, !1;
  }), i;
}
function i_(e, t) {
  const n = hu(t);
  let i = nt(e) ? -1 : void 0;
  return z(e, function(r, o) {
    if (n(r, o))
      return i = o, !1;
  }), i;
}
function et(e, t) {
  const n = hu(t);
  let i = [];
  return z(e, function(r, o) {
    n(r, o) && i.push(r);
  }), i;
}
function z(e, t) {
  let n, i;
  if (qo(e))
    return;
  const r = nt(e) ? lS : cS;
  for (let o in e)
    if (Zn(e, o) && (n = e[o], i = t(n, r(o)), i === !1))
      return n;
}
function oS(e, t) {
  if (qo(e))
    return [];
  rS(e);
  const n = hu(t);
  return e.filter(function(i, r) {
    return !n(i, r);
  });
}
function li(e, t, n) {
  return z(e, function(i, r) {
    n = t(n, i, r);
  }), n;
}
function Wa(e, t) {
  return !!li(e, function(n, i, r) {
    return n && t(i, r);
  }, !0);
}
function Dr(e, t) {
  return !!gt(e, t);
}
function mn(e, t) {
  let n = [];
  return z(e, function(i, r) {
    n.push(t(i, r));
  }), n;
}
function Zl(e) {
  return e && Object.keys(e) || [];
}
function aS(e) {
  return Zl(e).length;
}
function hd(e) {
  return mn(e, (t) => t);
}
function Ga(e, t, n = {}) {
  return t = md(t), z(e, function(i) {
    let r = t(i) || "_", o = n[r];
    o || (o = n[r] = []), o.push(i);
  }), n;
}
function r_(e, ...t) {
  e = md(e);
  let n = {};
  return z(t, (r) => Ga(r, e, n)), mn(n, function(r, o) {
    return r[0];
  });
}
const sS = r_;
function Gi(e, t) {
  t = md(t);
  let n = [];
  return z(e, function(i, r) {
    let o = t(i, r), a = {
      d: o,
      v: i
    };
    for (var c = 0; c < n.length; c++) {
      let { d: l } = n[c];
      if (o < l) {
        n.splice(c, 0, a);
        return;
      }
    }
    n.push(a);
  }), mn(n, (i) => i.v);
}
function zi(e) {
  return function(t) {
    return Wa(e, function(n, i) {
      return t[i] === n;
    });
  };
}
function md(e) {
  return un(e) ? e : (t) => t[e];
}
function hu(e) {
  return un(e) ? e : (t) => t === e;
}
function cS(e) {
  return e;
}
function lS(e) {
  return Number(e);
}
function o_(e, t) {
  let n, i, r, o;
  function a(f) {
    let y = Date.now(), g = f ? 0 : o + t - y;
    if (g > 0)
      return c(g);
    e.apply(r, i), l();
  }
  function c(f) {
    n = setTimeout(a, f);
  }
  function l() {
    n && clearTimeout(n), n = o = i = r = void 0;
  }
  function u() {
    n && a(!0), l();
  }
  function d(...f) {
    o = Date.now(), i = f, r = this, n || c(t);
  }
  return d.flush = u, d.cancel = l, d;
}
function Jn(e, t) {
  return e.bind(t);
}
function G(e, ...t) {
  return Object.assign(e, ...t);
}
function uS(e, t, n) {
  let i = e;
  return z(t, function(r, o) {
    if (typeof r != "number" && typeof r != "string")
      throw new Error("illegal key type: " + typeof r + ". Key should be of type number or string.");
    if (r === "constructor")
      throw new Error("illegal key: constructor");
    if (r === "__proto__")
      throw new Error("illegal key: __proto__");
    let a = t[o + 1], c = i[r];
    dn(a) && Xl(c) && (c = i[r] = isNaN(+a) ? {} : []), qo(a) ? qo(n) ? delete i[r] : i[r] = n : i = c;
  }), e;
}
function Ui(e, t) {
  let n = {}, i = Object(e);
  return z(t, function(r) {
    r in i && (n[r] = e[r]);
  }), n;
}
function pr(e, t) {
  let n = {}, i = Object(e);
  return z(i, function(r, o) {
    t.indexOf(o) === -1 && (n[o] = r);
  }), n;
}
function pS(e, t) {
  return t.forEach(function(n) {
    n && typeof n != "string" && !Array.isArray(n) && Object.keys(n).forEach(function(i) {
      if (i !== "default" && !(i in e)) {
        var r = Object.getOwnPropertyDescriptor(n, i);
        Object.defineProperty(e, i, r.get ? r : {
          enumerable: !0,
          get: function() {
            return n[i];
          }
        });
      }
    });
  }), Object.freeze(e);
}
const fS = Object.prototype.toString, dS = Object.prototype.hasOwnProperty;
function hS(e) {
  return e === void 0;
}
function mS(e) {
  return fS.call(e) === "[object Array]";
}
function yS(e, t) {
  return dS.call(e, t);
}
function $y(e, t) {
  let n, i;
  if (hS(e))
    return;
  const r = mS(e) ? vS : gS;
  for (let o in e)
    if (yS(e, o) && (n = e[o], i = t(n, r(o)), i === !1))
      return n;
}
function gS(e) {
  return e;
}
function vS(e) {
  return Number(e);
}
function Rn(e, ...t) {
  const n = e.style;
  return $y(t, function(i) {
    i && $y(i, function(r, o) {
      n[o] = r;
    });
  }), e;
}
function zn(e, t, n) {
  return arguments.length == 2 ? e.getAttribute(t) : n === null ? e.removeAttribute(t) : (e.setAttribute(t, n), e);
}
const _S = Object.prototype.toString;
function gn(e) {
  return new ao(e);
}
function ao(e) {
  if (!e || !e.nodeType)
    throw new Error("A DOM element reference is required");
  this.el = e, this.list = e.classList;
}
ao.prototype.add = function(e) {
  return this.list.add(e), this;
};
ao.prototype.remove = function(e) {
  return _S.call(e) == "[object RegExp]" ? this.removeMatching(e) : (this.list.remove(e), this);
};
ao.prototype.removeMatching = function(e) {
  const t = this.array();
  for (let n = 0; n < t.length; n++)
    e.test(t[n]) && this.remove(t[n]);
  return this;
};
ao.prototype.toggle = function(e, t) {
  return typeof t < "u" ? t !== this.list.toggle(e, t) && this.list.toggle(e) : this.list.toggle(e), this;
};
ao.prototype.array = function() {
  return Array.from(this.list);
};
ao.prototype.has = ao.prototype.contains = function(e) {
  return this.list.contains(e);
};
function mu(e) {
  for (var t; e.childNodes.length; )
    t = e.childNodes[0], e.removeChild(t);
  return e;
}
function Ba(e, t) {
  return e && typeof e.matches == "function" && e.matches(t);
}
function lo(e, t, n) {
  for (var i = n ? e : e.parentNode; i && i.nodeType !== document.DOCUMENT_NODE && i.nodeType !== document.DOCUMENT_FRAGMENT_NODE; ) {
    if (Ba(i, t))
      return i;
    i = i.parentNode;
  }
  return Ba(i, t) ? i : null;
}
var Jl = {}, Ql, Cf, yd;
function a_() {
  Ql = window.addEventListener ? "addEventListener" : "attachEvent", Cf = window.removeEventListener ? "removeEventListener" : "detachEvent", yd = Ql !== "addEventListener" ? "on" : "";
}
var bS = Jl.bind = function(e, t, n, i) {
  return Ql || a_(), e[Ql](yd + t, n, i || !1), n;
}, xS = Jl.unbind = function(e, t, n, i) {
  return Cf || a_(), e[Cf](yd + t, n, i || !1), n;
}, Ye = /* @__PURE__ */ pS({
  __proto__: null,
  bind: bS,
  unbind: xS,
  default: Jl
}, [Jl]), s_ = ["focus", "blur"];
function ES(e, t, n, i, r) {
  return s_.indexOf(n) !== -1 && (r = !0), Ye.bind(e, n, function(o) {
    var a = o.target || o.srcElement;
    o.delegateTarget = lo(a, t, !0), o.delegateTarget && i.call(e, o);
  }, r);
}
function wS(e, t, n, i) {
  return s_.indexOf(t) !== -1 && (i = !0), Ye.unbind(e, t, n, i);
}
var si = {
  bind: ES,
  unbind: wS
}, SS = RS, c_ = !1, il;
typeof document < "u" && (il = document.createElement("div"), il.innerHTML = '  <link/><table></table><a href="/a">a</a><input type="checkbox"/>', c_ = !il.getElementsByTagName("link").length, il = void 0);
var cn = {
  legend: [1, "<fieldset>", "</fieldset>"],
  tr: [2, "<table><tbody>", "</tbody></table>"],
  col: [2, "<table><tbody></tbody><colgroup>", "</colgroup></table>"],
  // for script/link/style tags to work in IE6-8, you have to wrap
  // in a div with a non-whitespace character in front, ha!
  _default: c_ ? [1, "X<div>", "</div>"] : [0, "", ""]
};
cn.td = cn.th = [3, "<table><tbody><tr>", "</tr></tbody></table>"];
cn.option = cn.optgroup = [1, '<select multiple="multiple">', "</select>"];
cn.thead = cn.tbody = cn.colgroup = cn.caption = cn.tfoot = [1, "<table>", "</table>"];
cn.polyline = cn.ellipse = cn.polygon = cn.circle = cn.text = cn.line = cn.path = cn.rect = cn.g = [1, '<svg xmlns="http://www.w3.org/2000/svg" version="1.1">', "</svg>"];
function RS(e, t) {
  if (typeof e != "string")
    throw new TypeError("String expected");
  t || (t = document);
  var n = /<([\w:]+)/.exec(e);
  if (!n)
    return t.createTextNode(e);
  e = e.replace(/^\s+|\s+$/g, "");
  var i = n[1];
  if (i == "body") {
    var l = t.createElement("html");
    return l.innerHTML = e, l.removeChild(l.lastChild);
  }
  var r = Object.prototype.hasOwnProperty.call(cn, i) ? cn[i] : cn._default, o = r[0], a = r[1], c = r[2], l = t.createElement("div");
  for (l.innerHTML = a + e + c; o--; )
    l = l.lastChild;
  if (l.firstChild == l.lastChild)
    return l.removeChild(l.firstChild);
  for (var u = t.createDocumentFragment(); l.firstChild; )
    u.appendChild(l.removeChild(l.firstChild));
  return u;
}
var Bt = SS;
function Tt(e, t) {
  return t = t || document, t.querySelector(e);
}
function Af(e, t) {
  return t = t || document, t.querySelectorAll(e);
}
function lr(e) {
  e.parentNode && e.parentNode.removeChild(e);
}
function CS(e, t) {
  if (e.ownerDocument !== t.ownerDocument)
    try {
      return t.ownerDocument.importNode(e, !0);
    } catch {
    }
  return e;
}
function AS(e, t) {
  return t.appendChild(CS(e, t));
}
function ze(e, t) {
  return AS(t, e), e;
}
var Pf = 2, l_ = {
  "alignment-baseline": 1,
  "baseline-shift": 1,
  clip: 1,
  "clip-path": 1,
  "clip-rule": 1,
  color: 1,
  "color-interpolation": 1,
  "color-interpolation-filters": 1,
  "color-profile": 1,
  "color-rendering": 1,
  cursor: 1,
  direction: 1,
  display: 1,
  "dominant-baseline": 1,
  "enable-background": 1,
  fill: 1,
  "fill-opacity": 1,
  "fill-rule": 1,
  filter: 1,
  "flood-color": 1,
  "flood-opacity": 1,
  font: 1,
  "font-family": 1,
  "font-size": Pf,
  "font-size-adjust": 1,
  "font-stretch": 1,
  "font-style": 1,
  "font-variant": 1,
  "font-weight": 1,
  "glyph-orientation-horizontal": 1,
  "glyph-orientation-vertical": 1,
  "image-rendering": 1,
  kerning: 1,
  "letter-spacing": 1,
  "lighting-color": 1,
  marker: 1,
  "marker-end": 1,
  "marker-mid": 1,
  "marker-start": 1,
  mask: 1,
  opacity: 1,
  overflow: 1,
  "pointer-events": 1,
  "shape-rendering": 1,
  "stop-color": 1,
  "stop-opacity": 1,
  stroke: 1,
  "stroke-dasharray": 1,
  "stroke-dashoffset": 1,
  "stroke-linecap": 1,
  "stroke-linejoin": 1,
  "stroke-miterlimit": 1,
  "stroke-opacity": 1,
  "stroke-width": Pf,
  "text-anchor": 1,
  "text-decoration": 1,
  "text-rendering": 1,
  "unicode-bidi": 1,
  visibility: 1,
  "word-spacing": 1,
  "writing-mode": 1
};
function PS(e, t) {
  return l_[t] ? e.style[t] : e.getAttributeNS(null, t);
}
function u_(e, t, n) {
  var i = t.replace(/([a-z])([A-Z])/g, "$1-$2").toLowerCase(), r = l_[i];
  r ? (r === Pf && typeof n == "number" && (n = String(n) + "px"), e.style[i] = n) : e.setAttributeNS(null, t, n);
}
function TS(e, t) {
  var n = Object.keys(t), i, r;
  for (i = 0, r; r = n[i]; i++)
    u_(e, r, t[r]);
}
function we(e, t, n) {
  if (typeof t == "string")
    if (n !== void 0)
      u_(e, t, n);
    else
      return PS(e, t);
  else
    TS(e, t);
  return e;
}
const kS = Object.prototype.toString;
function dt(e) {
  return new so(e);
}
function so(e) {
  if (!e || !e.nodeType)
    throw new Error("A DOM element reference is required");
  this.el = e, this.list = e.classList;
}
so.prototype.add = function(e) {
  return this.list.add(e), this;
};
so.prototype.remove = function(e) {
  return kS.call(e) == "[object RegExp]" ? this.removeMatching(e) : (this.list.remove(e), this);
};
so.prototype.removeMatching = function(e) {
  const t = this.array();
  for (let n = 0; n < t.length; n++)
    e.test(t[n]) && this.remove(t[n]);
  return this;
};
so.prototype.toggle = function(e, t) {
  return typeof t < "u" ? t !== this.list.toggle(e, t) && this.list.toggle(e) : this.list.toggle(e), this;
};
so.prototype.array = function() {
  return Array.from(this.list);
};
so.prototype.has = so.prototype.contains = function(e) {
  return this.list.contains(e);
};
function qt(e) {
  var t = e.parentNode;
  return t && t.removeChild(e), e;
}
function yu(e) {
  for (var t; t = e.firstChild; )
    qt(t);
  return e;
}
function p_(e) {
  return e.cloneNode(!0);
}
var gd = {
  svg: "http://www.w3.org/2000/svg"
}, jy = '<svg xmlns="' + gd.svg + '"';
function MS(e) {
  var t = !1;
  e.substring(0, 4) === "<svg" ? e.indexOf(gd.svg) === -1 && (e = jy + e.substring(4)) : (e = jy + ">" + e + "</svg>", t = !0);
  var n = DS(e);
  if (!t)
    return n;
  for (var i = document.createDocumentFragment(), r = n.firstChild; r.firstChild; )
    i.appendChild(r.firstChild);
  return i;
}
function DS(e) {
  var t;
  return t = new DOMParser(), t.async = !1, t.parseFromString(e, "text/xml");
}
function Me(e, t) {
  var n;
  return e.charAt(0) === "<" ? (n = MS(e).firstChild, n = document.importNode(n, !0)) : n = document.createElementNS(gd.svg, e), t && we(n, t), n;
}
var Yp = null;
function f_() {
  return Yp === null && (Yp = Me("svg")), Yp;
}
function Fy(e, t) {
  var n, i, r = Object.keys(t);
  for (n = 0; i = r[n]; n++)
    e[i] = t[i];
  return e;
}
function OS(e, t, n, i, r, o) {
  var a = f_().createSVGMatrix();
  switch (arguments.length) {
    case 0:
      return a;
    case 1:
      return Fy(a, e);
    case 6:
      return Fy(a, {
        a: e,
        b: t,
        c: n,
        d: i,
        e: r,
        f: o
      });
  }
}
function Os(e) {
  return f_().createSVGTransform();
}
var Hy = /([&<>]{1})/g, NS = /([\n\r"]{1})/g, BS = {
  "&": "&amp;",
  "<": "&lt;",
  ">": "&gt;",
  '"': "'"
};
function Kp(e, t) {
  function n(i, r) {
    return BS[r] || r;
  }
  return e.replace(t, n);
}
function d_(e, t) {
  var n, i, r, o, a;
  switch (e.nodeType) {
    case 3:
      t.push(Kp(e.textContent, Hy));
      break;
    case 1:
      if (t.push("<", e.tagName), e.hasAttributes())
        for (r = e.attributes, n = 0, i = r.length; n < i; ++n)
          o = r.item(n), t.push(" ", o.name, '="', Kp(o.value, NS), '"');
      if (e.hasChildNodes()) {
        for (t.push(">"), a = e.childNodes, n = 0, i = a.length; n < i; ++n)
          d_(a.item(n), t);
        t.push("</", e.tagName, ">");
      } else
        t.push("/>");
      break;
    case 8:
      t.push("<!--", Kp(e.nodeValue, Hy), "-->");
      break;
    case 4:
      t.push("<![CDATA[", e.nodeValue, "]]>");
      break;
    default:
      throw new Error("unable to handle node " + e.nodeType);
  }
  return t;
}
function LS(e) {
  for (var t = e.firstChild, n = []; t; )
    d_(t, n), t = t.nextSibling;
  return n.join("");
}
function zy(e, t) {
  return LS(e);
}
function IS(e, t) {
  return t instanceof SVGMatrix ? e.createSVGTransformFromMatrix(t) : t;
}
function $S(e, t) {
  var n, i;
  for (e.clear(), n = 0; i = t[n]; n++)
    e.appendItem(IS(e, i));
}
function js(e, t) {
  var n = e.transform.baseVal;
  return t && (Array.isArray(t) || (t = [t]), $S(n, t)), n.consolidate();
}
const jS = /^class[ {]/;
function FS(e) {
  return jS.test(e.toString());
}
function vd(e) {
  return Array.isArray(e);
}
function qp(e, t) {
  return Object.prototype.hasOwnProperty.call(e, t);
}
function Ol(...e) {
  e.length === 1 && vd(e[0]) && (e = e[0]), e = [...e];
  const t = e.pop();
  return t.$inject = e, t;
}
const HS = /constructor\s*[^(]*\(\s*([^)]*)\)/m, zS = /^(?:async\s+)?(?:function\s*[^(]*)?(?:\(\s*([^)]*)\)|(\w+))/m, VS = /\/\*([^*]*)\*\//m;
function WS(e) {
  if (typeof e != "function")
    throw new Error(`Cannot annotate "${e}". Expected a function!`);
  const t = e.toString().match(FS(e) ? HS : zS);
  if (!t)
    return [];
  const n = t[1] || t[2];
  return n && n.split(",").map((i) => {
    const r = i.match(VS);
    return (r && r[1] || i).trim();
  }) || [];
}
function h_(e, t) {
  const n = t || /** @type InjectorContext */
  {
    get: function(k, P) {
      if (i.push(k), P === !1)
        return null;
      throw c(`No provider for "${k}"!`);
    }
  }, i = [], r = this._providers = Object.create(n._providers || null), o = this._instances = /* @__PURE__ */ Object.create(null), a = o.injector = this, c = function(k) {
    const P = i.join(" -> ");
    return i.length = 0, new Error(P ? `${k} (Resolving: ${P})` : k);
  };
  function l(k, P) {
    if (!r[k] && k.includes(".")) {
      const N = k.split(".");
      let j = l(
        /** @type { string } */
        N.shift()
      );
      for (; N.length; )
        j = j[
          /** @type { string } */
          N.shift()
        ];
      return j;
    }
    if (qp(o, k))
      return o[k];
    if (qp(r, k)) {
      if (i.indexOf(k) !== -1)
        throw i.push(k), c("Cannot resolve circular dependency!");
      return i.push(k), o[k] = r[k][0](r[k][1]), i.pop(), o[k];
    }
    return n.get(k, P);
  }
  function u(k, P) {
    if (typeof P > "u" && (P = {}), typeof k != "function")
      if (vd(k))
        k = Ol(k.slice());
      else
        throw c(`Cannot invoke "${k}". Expected a function!`);
    const j = (k.$inject || WS(k)).map((W) => qp(P, W) ? P[W] : l(W));
    return {
      fn: k,
      dependencies: j
    };
  }
  function d(k) {
    const {
      fn: P,
      dependencies: N
    } = u(k), j = Function.prototype.bind.call(P, null, ...N);
    return new j();
  }
  function f(k, P, N) {
    const {
      fn: j,
      dependencies: W
    } = u(k, N);
    return j.apply(P, W);
  }
  function y(k) {
    return Ol((P) => k.get(P));
  }
  function g(k, P) {
    if (P && P.length) {
      const N = /* @__PURE__ */ Object.create(null), j = /* @__PURE__ */ Object.create(null), W = [], $ = [], Z = [];
      let X, V, ae, ie;
      for (let Ae in r)
        X = r[Ae], P.indexOf(Ae) !== -1 && (X[2] === "private" ? (V = W.indexOf(X[3]), V === -1 ? (ae = X[3].createChild([], P), ie = y(ae), W.push(X[3]), $.push(ae), Z.push(ie), N[Ae] = [ie, Ae, "private", ae]) : N[Ae] = [Z[V], Ae, "private", $[V]]) : N[Ae] = [X[2], X[1]], j[Ae] = !0), (X[2] === "factory" || X[2] === "type") && X[1].$scope && P.forEach((Rt) => {
          X[1].$scope.indexOf(Rt) !== -1 && (N[Ae] = [X[2], X[1]], j[Rt] = !0);
        });
      P.forEach((Ae) => {
        if (!j[Ae])
          throw new Error('No provider for "' + Ae + '". Cannot use provider from the parent!');
      }), k.unshift(N);
    }
    return new h_(k, a);
  }
  const _ = {
    factory: f,
    type: d,
    value: function(k) {
      return k;
    }
  };
  function x(k, P) {
    const N = k.__init__ || [];
    return function() {
      N.forEach((j) => {
        typeof j == "string" ? P.get(j) : P.invoke(j);
      });
    };
  }
  function w(k) {
    const P = k.__exports__;
    if (P) {
      const N = k.__modules__, j = Object.keys(k).reduce((V, ae) => (ae !== "__exports__" && ae !== "__modules__" && ae !== "__init__" && ae !== "__depends__" && (V[ae] = k[ae]), V), /* @__PURE__ */ Object.create(null)), W = (N || []).concat(j), $ = g(W), Z = Ol(function(V) {
        return $.get(V);
      });
      P.forEach(function(V) {
        r[V] = [Z, V, "private", $];
      });
      const X = (k.__init__ || []).slice();
      return X.unshift(function() {
        $.init();
      }), k = Object.assign({}, k, {
        __init__: X
      }), x(k, $);
    }
    return Object.keys(k).forEach(function(N) {
      if (N === "__init__" || N === "__depends__")
        return;
      const j = (
        /** @type { TypedDeclaration } */
        k[N]
      );
      if (j[2] === "private") {
        r[N] = j;
        return;
      }
      const W = j[0], $ = j[1];
      r[N] = [_[W], GS(W, $), W];
    }), x(k, a);
  }
  function D(k, P) {
    return k.indexOf(P) !== -1 || (k = (P.__depends__ || []).reduce(D, k), k.indexOf(P) !== -1) ? k : k.concat(P);
  }
  function O(k) {
    const P = k.reduce(D, []).map(w);
    let N = !1;
    return function() {
      N || (N = !0, P.forEach((j) => j()));
    };
  }
  this.get = l, this.invoke = f, this.instantiate = d, this.createChild = g, this.init = O(e);
}
function GS(e, t) {
  return e !== "value" && vd(t) && (t = Ol(t.slice())), t;
}
var US = 1e3;
function Or(e, t) {
  var n = this;
  t = t || US, e.on(["render.shape", "render.connection"], t, function(i, r) {
    var o = i.type, a = r.element, c = r.gfx, l = r.attrs;
    if (n.canRender(a))
      return o === "render.shape" ? n.drawShape(c, a, l) : n.drawConnection(c, a, l);
  }), e.on(["render.getShapePath", "render.getConnectionPath"], t, function(i, r) {
    if (n.canRender(r))
      return i.type === "render.getShapePath" ? n.getShapePath(r) : n.getConnectionPath(r);
  });
}
Or.prototype.canRender = function(e) {
};
Or.prototype.drawShape = function(e, t) {
};
Or.prototype.drawConnection = function(e, t) {
};
Or.prototype.getShapePath = function(e) {
};
Or.prototype.getConnectionPath = function(e) {
};
function ea(e) {
  return e.flat().join(",").replace(/,?([A-z]),?/g, "$1");
}
function YS(e) {
  return ["M", e.x, e.y];
}
function Xp(e) {
  return ["L", e.x, e.y];
}
function KS(e, t, n) {
  return ["C", e.x, e.y, t.x, t.y, n.x, n.y];
}
function qS(e, t) {
  const n = e.length, i = [YS(e[0])];
  for (let r = 1; r < n; r++) {
    const o = e[r - 1], a = e[r], c = e[r + 1];
    if (!c || !t) {
      i.push(Xp(a));
      continue;
    }
    const l = Math.min(
      t,
      Tf(a.x - o.x, a.y - o.y),
      Tf(c.x - a.x, c.y - a.y)
    );
    if (!l) {
      i.push(Xp(a));
      continue;
    }
    const u = rl(a, o, l), d = rl(a, o, l * 0.5), f = rl(a, c, l), y = rl(a, c, l * 0.5);
    i.push(Xp(u)), i.push(KS(d, y, f));
  }
  return i;
}
function rl(e, t, n) {
  const i = t.x - e.x, r = t.y - e.y, o = Tf(i, r), a = n / o;
  return {
    x: e.x + i * a,
    y: e.y + r * a
  };
}
function Tf(e, t) {
  return Math.sqrt(Math.pow(e, 2) + Math.pow(t, 2));
}
function gu(e, t, n) {
  je(t) && (n = t, t = null), t || (t = {});
  const i = Me("path", t);
  return je(n) && (i.dataset.cornerRadius = String(n)), m_(i, e);
}
function m_(e, t) {
  const n = parseInt(e.dataset.cornerRadius, 10) || 0;
  return we(e, {
    d: ea(qS(t, n))
  }), e;
}
function vu(e) {
  return et(e, function(t) {
    return !gt(e, function(n) {
      return n !== t && y_(t, n);
    });
  });
}
function y_(e, t) {
  if (t) {
    if (e === t)
      return t;
    if (e.parent)
      return y_(e.parent, t);
  }
}
function Vy(e, t, n) {
  var i = !n || e.indexOf(t) === -1;
  return i && e.push(t), i;
}
function ta(e, t, n) {
  n = n || 0, nt(e) || (e = [e]), z(e, function(i, r) {
    var o = t(i, r, n);
    nt(o) && o.length && ta(o, t, n + 1);
  });
}
function XS(e, t, n) {
  var i = [], r = [];
  return ta(e, function(o, a, c) {
    Vy(i, o, t);
    var l = o.children;
    if (l && Vy(r, l, t))
      return l;
  }), i;
}
function ec(e, t) {
  return XS(e, !t);
}
function ZS(e, t, n) {
  qo(t) && (t = !0), yn(t) && (n = t, t = !0), n = n || {};
  var i = vs(n.allShapes), r = vs(n.allConnections), o = vs(n.enclosedElements), a = vs(n.enclosedConnections), c = vs(
    n.topLevel,
    t && Ga(e, function(d) {
      return d.id;
    })
  );
  function l(d) {
    c[d.source.id] && c[d.target.id] && (c[d.id] = [d]), i[d.source.id] && i[d.target.id] && (a[d.id] = o[d.id] = d), r[d.id] = d;
  }
  function u(d) {
    if (o[d.id] = d, d.waypoints)
      a[d.id] = r[d.id] = d;
    else
      return i[d.id] = d, z(d.incoming, l), z(d.outgoing, l), d.children;
  }
  return ta(e, u), {
    allShapes: i,
    allConnections: r,
    topLevel: c,
    enclosedConnections: a,
    enclosedElements: o
  };
}
function nn(e, t) {
  t = !!t, nt(e) || (e = [e]);
  var n, i, r, o;
  return z(e, function(a) {
    var c = a;
    a.waypoints && !t && (c = nn(a.waypoints, !0));
    var l = c.x, u = c.y, d = c.height || 0, f = c.width || 0;
    (l < n || n === void 0) && (n = l), (u < i || i === void 0) && (i = u), (l + f > r || r === void 0) && (r = l + f), (u + d > o || o === void 0) && (o = u + d);
  }), {
    x: n,
    y: i,
    height: o - i,
    width: r - n
  };
}
function JS(e, t) {
  var n = {};
  return z(e, function(i) {
    var r = i;
    r.waypoints && (r = nn(r)), !je(t.y) && r.x > t.x && (n[i.id] = i), !je(t.x) && r.y > t.y && (n[i.id] = i), r.x > t.x && r.y > t.y && (je(t.width) && je(t.height) && r.width + r.x < t.width + t.x && r.height + r.y < t.height + t.y || !je(t.width) || !je(t.height)) && (n[i.id] = i);
  }), n;
}
function g_(e) {
  return "waypoints" in e ? "connection" : "x" in e ? "shape" : "root";
}
function v_(e) {
  return !!(e && e.isFrame);
}
function vs(e, t) {
  return G({}, e || {}, t || {});
}
var QS = 1;
function uo(e, t) {
  Or.call(this, e, QS), this.CONNECTION_STYLE = t.style(["no-fill"], { strokeWidth: 5, stroke: "fuchsia" }), this.SHAPE_STYLE = t.style({ fill: "white", stroke: "fuchsia", strokeWidth: 2 }), this.FRAME_STYLE = t.style(["no-fill"], { stroke: "fuchsia", strokeDasharray: 4, strokeWidth: 2 });
}
Pe(uo, Or);
uo.prototype.canRender = function() {
  return !0;
};
uo.prototype.drawShape = function(t, n, i) {
  var r = Me("rect");
  return we(r, {
    x: 0,
    y: 0,
    width: n.width || 0,
    height: n.height || 0
  }), v_(n) ? we(r, G({}, this.FRAME_STYLE, i || {})) : we(r, G({}, this.SHAPE_STYLE, i || {})), ze(t, r), r;
};
uo.prototype.drawConnection = function(t, n, i) {
  var r = gu(n.waypoints, G({}, this.CONNECTION_STYLE, i || {}));
  return ze(t, r), r;
};
uo.prototype.getShapePath = function(t) {
  var n = t.x, i = t.y, r = t.width, o = t.height, a = [
    ["M", n, i],
    ["l", r, 0],
    ["l", 0, o],
    ["l", -r, 0],
    ["z"]
  ];
  return ea(a);
};
uo.prototype.getConnectionPath = function(t) {
  var n = t.waypoints, i, r, o = [];
  for (i = 0; r = n[i]; i++)
    r = r.original || r, o.push([i === 0 ? "M" : "L", r.x, r.y]);
  return ea(o);
};
uo.$inject = ["eventBus", "styles"];
function eR() {
  var e = {
    "no-fill": {
      fill: "none"
    },
    "no-border": {
      strokeOpacity: 0
    },
    "no-events": {
      pointerEvents: "none"
    }
  }, t = this;
  this.cls = function(n, i, r) {
    var o = this.style(i, r);
    return G(o, { class: n });
  }, this.style = function(n, i) {
    !nt(n) && !i && (i = n, n = []);
    var r = li(n, function(o, a) {
      return G(o, e[a] || {});
    }, {});
    return i ? G(r, i) : r;
  }, this.computeStyle = function(n, i, r) {
    return nt(i) || (r = i, i = []), t.style(i || [], G({}, r, n || {}));
  };
}
const tR = {
  __init__: ["defaultRenderer"],
  defaultRenderer: ["type", uo],
  styles: ["type", eR]
};
function rn(e, t) {
  if (!e || !t)
    return -1;
  var n = e.indexOf(t);
  return n !== -1 && e.splice(n, 1), n;
}
function pn(e, t, n) {
  if (!(!e || !t)) {
    typeof n != "number" && (n = -1);
    var i = e.indexOf(t);
    if (i !== -1) {
      if (i === n)
        return;
      if (n !== -1)
        e.splice(i, 1);
      else
        return;
    }
    n !== -1 ? e.splice(n, 0, t) : e.push(t);
  }
}
function _d(e, t) {
  return !e || !t ? -1 : e.indexOf(t);
}
function tc(e, t) {
  return !e || !t ? -1 : Math.sqrt(
    Math.pow(e.x - t.x, 2) + Math.pow(e.y - t.y, 2)
  );
}
function bd(e, t, n, i) {
  if (typeof i > "u" && (i = 5), !e || !t || !n)
    return !1;
  var r = (t.x - e.x) * (n.y - e.y) - (t.y - e.y) * (n.x - e.x), o = tc(e, t);
  return Math.abs(r / o) <= i;
}
var nR = 2;
function Pr(e, t) {
  var n = Array.from(arguments).flat();
  const i = {
    x: "v",
    y: "h"
  };
  for (const [r, o] of Object.entries(i))
    if (iR(r, n))
      return o;
  return !1;
}
function iR(e, t) {
  const n = t[0];
  return Wa(t, function(i) {
    return Math.abs(n[e] - i[e]) <= nR;
  });
}
function Wy(e, t, n) {
  return n = n || 0, e.x > t.x - n && e.y > t.y - n && e.x < t.x + t.width + n && e.y < t.y + t.height + n;
}
function kf(e, t) {
  return {
    x: Math.round(e.x + (t.x - e.x) / 2),
    y: Math.round(e.y + (t.y - e.y) / 2)
  };
}
var rR = /,?([a-z]),?/gi, Gy = parseFloat, Qt = Math, qr = Qt.PI, nr = Qt.min, ir = Qt.max, Uy = Qt.pow, no = Qt.abs, oR = /([a-z])[\s,]*((-?\d*\.?\d*(?:e[-+]?\d+)?[\s]*,?[\s]*)+)/ig, aR = /(-?\d*\.?\d*(?:e[-+]?\d+)?)[\s]*,?[\s]*/ig, eu = Array.isArray || function(e) {
  return e instanceof Array;
};
function xd(e, t) {
  return Object.prototype.hasOwnProperty.call(e, t);
}
function Ns(e) {
  if (typeof e == "function" || Object(e) !== e)
    return e;
  var t = new e.constructor();
  for (var n in e)
    xd(e, n) && (t[n] = Ns(e[n]));
  return t;
}
function sR(e, t) {
  for (var n = 0, i = e.length; n < i; n++)
    if (e[n] === t)
      return e.push(e.splice(n, 1)[0]);
}
function cR(e) {
  function t() {
    var n = Array.prototype.slice.call(arguments, 0), i = n.join(""), r = t.cache = t.cache || {}, o = t.count = t.count || [];
    return xd(r, i) ? (sR(o, i), r[i]) : (o.length >= 1e3 && delete r[o.shift()], o.push(i), r[i] = e(...arguments), r[i]);
  }
  return t;
}
function lR(e) {
  if (!e)
    return null;
  var t = La(e);
  if (t.arr)
    return Ns(t.arr);
  var n = { a: 7, c: 6, h: 1, l: 2, m: 2, q: 4, s: 4, t: 2, v: 1, z: 0 }, i = [];
  return eu(e) && eu(e[0]) && (i = Ns(e)), i.length || String(e).replace(oR, function(r, o, a) {
    var c = [], l = o.toLowerCase();
    for (a.replace(aR, function(u, d) {
      d && c.push(+d);
    }), l == "m" && c.length > 2 && (i.push([o, ...c.splice(0, 2)]), l = "l", o = o == "m" ? "l" : "L"); c.length >= n[l] && (i.push([o, ...c.splice(0, n[l])]), !!n[l]); )
      ;
  }), i.toString = La.toString, t.arr = Ns(i), i;
}
function La(e) {
  var t = La.ps = La.ps || {};
  return t[e] ? t[e].sleep = 100 : t[e] = {
    sleep: 100
  }, setTimeout(function() {
    for (var n in t)
      xd(t, n) && n != e && (t[n].sleep--, !t[n].sleep && delete t[n]);
  }), t[e];
}
function Mf(e, t, n, i) {
  return arguments.length === 1 && (t = e.y, n = e.width, i = e.height, e = e.x), {
    x: e,
    y: t,
    width: n,
    height: i,
    x2: e + n,
    y2: t + i
  };
}
function __() {
  return this.join(",").replace(rR, "$1");
}
function tu(e) {
  var t = Ns(e);
  return t.toString = __, t;
}
function Yy(e, t, n, i, r, o, a, c, l) {
  var u = 1 - l, d = Uy(u, 3), f = Uy(u, 2), y = l * l, g = y * l, _ = d * e + f * 3 * l * n + u * 3 * l * l * r + g * a, x = d * t + f * 3 * l * i + u * 3 * l * l * o + g * c;
  return {
    x: nu(_),
    y: nu(x)
  };
}
function Ky(e) {
  var t = hR(...e);
  return Mf(
    t.x0,
    t.y0,
    t.x1 - t.x0,
    t.y1 - t.y0
  );
}
function Xr(e, t, n) {
  return t >= e.x && t <= e.x + e.width && n >= e.y && n <= e.y + e.height;
}
function uR(e, t) {
  return e = Mf(e), t = Mf(t), Xr(t, e.x, e.y) || Xr(t, e.x2, e.y) || Xr(t, e.x, e.y2) || Xr(t, e.x2, e.y2) || Xr(e, t.x, t.y) || Xr(e, t.x2, t.y) || Xr(e, t.x, t.y2) || Xr(e, t.x2, t.y2) || (e.x < t.x2 && e.x > t.x || t.x < e.x2 && t.x > e.x) && (e.y < t.y2 && e.y > t.y || t.y < e.y2 && t.y > e.y);
}
function qy(e, t, n, i, r) {
  var o = -3 * t + 9 * n - 9 * i + 3 * r, a = e * o + 6 * t - 12 * n + 6 * i;
  return e * a - 3 * t + 3 * n;
}
function Xy(e, t, n, i, r, o, a, c, l) {
  l == null && (l = 1), l = l > 1 ? 1 : l < 0 ? 0 : l;
  for (var u = l / 2, d = 12, f = [-0.1252, 0.1252, -0.3678, 0.3678, -0.5873, 0.5873, -0.7699, 0.7699, -0.9041, 0.9041, -0.9816, 0.9816], y = [0.2491, 0.2491, 0.2335, 0.2335, 0.2032, 0.2032, 0.1601, 0.1601, 0.1069, 0.1069, 0.0472, 0.0472], g = 0, _ = 0; _ < d; _++) {
    var x = u * f[_] + u, w = qy(x, e, n, r, a), D = qy(x, t, i, o, c), O = w * w + D * D;
    g += y[_] * Qt.sqrt(O);
  }
  return u * g;
}
function pR(e, t, n, i, r, o, a, c) {
  if (!(ir(e, n) < nr(r, a) || nr(e, n) > ir(r, a) || ir(t, i) < nr(o, c) || nr(t, i) > ir(o, c))) {
    var l = (e * i - t * n) * (r - a) - (e - n) * (r * c - o * a), u = (e * i - t * n) * (o - c) - (t - i) * (r * c - o * a), d = (e - n) * (o - c) - (t - i) * (r - a);
    if (d) {
      var f = nu(l / d), y = nu(u / d), g = +f.toFixed(2), _ = +y.toFixed(2);
      if (!(g < +nr(e, n).toFixed(2) || g > +ir(e, n).toFixed(2) || g < +nr(r, a).toFixed(2) || g > +ir(r, a).toFixed(2) || _ < +nr(t, i).toFixed(2) || _ > +ir(t, i).toFixed(2) || _ < +nr(o, c).toFixed(2) || _ > +ir(o, c).toFixed(2)))
        return { x: f, y };
    }
  }
}
function nu(e) {
  return Math.round(e * 1e11) / 1e11;
}
function fR(e, t, n) {
  var i = Ky(e), r = Ky(t);
  if (!uR(i, r))
    return n ? 0 : [];
  for (var o = Xy(...e), a = Xy(...t), c = Zy(e) ? 1 : ~~(o / 5) || 1, l = Zy(t) ? 1 : ~~(a / 5) || 1, u = [], d = [], f = {}, y = n ? 0 : [], g = 0; g < c + 1; g++) {
    var _ = Yy(...e, g / c);
    u.push({ x: _.x, y: _.y, t: g / c });
  }
  for (g = 0; g < l + 1; g++)
    _ = Yy(...t, g / l), d.push({ x: _.x, y: _.y, t: g / l });
  for (g = 0; g < c; g++)
    for (var x = 0; x < l; x++) {
      var w = u[g], D = u[g + 1], O = d[x], k = d[x + 1], P = no(D.x - w.x) < 0.01 ? "y" : "x", N = no(k.x - O.x) < 0.01 ? "y" : "x", j = pR(w.x, w.y, D.x, D.y, O.x, O.y, k.x, k.y), W;
      if (j) {
        if (W = j.x.toFixed(9) + "#" + j.y.toFixed(9), f[W])
          continue;
        f[W] = !0;
        var $ = w.t + no((j[P] - w[P]) / (D[P] - w[P])) * (D.t - w.t), Z = O.t + no((j[N] - O[N]) / (k[N] - O[N])) * (k.t - O.t);
        $ >= 0 && $ <= 1 && Z >= 0 && Z <= 1 && (n ? y++ : y.push({
          x: j.x,
          y: j.y,
          t1: $,
          t2: Z
        }));
      }
    }
  return y;
}
function b_(e, t, n) {
  e = Qy(e), t = Qy(t);
  for (var i, r, o, a, c, l, u, d, f, y, g = n ? 0 : [], _ = 0, x = e.length; _ < x; _++) {
    var w = e[_];
    if (w[0] == "M")
      i = c = w[1], r = l = w[2];
    else {
      w[0] == "C" ? (f = [i, r, ...w.slice(1)], i = f[6], r = f[7]) : (f = [i, r, i, r, c, l, c, l], i = c, r = l);
      for (var D = 0, O = t.length; D < O; D++) {
        var k = t[D];
        if (k[0] == "M")
          o = u = k[1], a = d = k[2];
        else {
          k[0] == "C" ? (y = [o, a, ...k.slice(1)], o = y[6], a = y[7]) : (y = [o, a, o, a, u, d, u, d], o = u, a = d);
          var P = fR(f, y, n);
          if (n)
            g += P;
          else {
            for (var N = 0, j = P.length; N < j; N++)
              P[N].segment1 = _, P[N].segment2 = D, P[N].bez1 = f, P[N].bez2 = y;
            g = g.concat(P);
          }
        }
      }
    }
  }
  return g;
}
function dR(e) {
  var t = La(e);
  if (t.abs)
    return tu(t.abs);
  if ((!eu(e) || !eu(e && e[0])) && (e = lR(e)), !e || !e.length)
    return [["M", 0, 0]];
  var n = [], i = 0, r = 0, o = 0, a = 0, c = 0, l;
  e[0][0] == "M" && (i = +e[0][1], r = +e[0][2], o = i, a = r, c++, n[0] = ["M", i, r]);
  for (var u, d, f = c, y = e.length; f < y; f++) {
    if (n.push(u = []), d = e[f], l = d[0], l != l.toUpperCase())
      switch (u[0] = l.toUpperCase(), u[0]) {
        case "A":
          u[1] = d[1], u[2] = d[2], u[3] = d[3], u[4] = d[4], u[5] = d[5], u[6] = +d[6] + i, u[7] = +d[7] + r;
          break;
        case "V":
          u[1] = +d[1] + r;
          break;
        case "H":
          u[1] = +d[1] + i;
          break;
        case "M":
          o = +d[1] + i, a = +d[2] + r;
        default:
          for (var g = 1, _ = d.length; g < _; g++)
            u[g] = +d[g] + (g % 2 ? i : r);
      }
    else
      for (var x = 0, w = d.length; x < w; x++)
        u[x] = d[x];
    switch (l = l.toUpperCase(), u[0]) {
      case "Z":
        i = +o, r = +a;
        break;
      case "H":
        i = u[1];
        break;
      case "V":
        r = u[1];
        break;
      case "M":
        o = u[u.length - 2], a = u[u.length - 1];
      default:
        i = u[u.length - 2], r = u[u.length - 1];
    }
  }
  return n.toString = __, t.abs = tu(n), n;
}
function Zy(e) {
  return e[0] === e[2] && e[1] === e[3] && e[4] === e[6] && e[5] === e[7];
}
function ol(e, t, n, i) {
  return [
    e,
    t,
    n,
    i,
    n,
    i
  ];
}
function Jy(e, t, n, i, r, o) {
  var a = 0.3333333333333333, c = 2 / 3;
  return [
    a * e + c * n,
    a * t + c * i,
    a * r + c * n,
    a * o + c * i,
    r,
    o
  ];
}
function x_(e, t, n, i, r, o, a, c, l, u) {
  var d = qr * 120 / 180, f = qr / 180 * (+r || 0), y = [], g, _ = cR(function(Et, Ne, I) {
    var E = Et * Qt.cos(I) - Ne * Qt.sin(I), C = Et * Qt.sin(I) + Ne * Qt.cos(I);
    return { x: E, y: C };
  });
  if (u)
    W = u[0], $ = u[1], N = u[2], j = u[3];
  else {
    g = _(e, t, -f), e = g.x, t = g.y, g = _(c, l, -f), c = g.x, l = g.y;
    var x = (e - c) / 2, w = (t - l) / 2, D = x * x / (n * n) + w * w / (i * i);
    D > 1 && (D = Qt.sqrt(D), n = D * n, i = D * i);
    var O = n * n, k = i * i, P = (o == a ? -1 : 1) * Qt.sqrt(no((O * k - O * w * w - k * x * x) / (O * w * w + k * x * x))), N = P * n * w / i + (e + c) / 2, j = P * -i * x / n + (t + l) / 2, W = Qt.asin(((t - j) / i).toFixed(9)), $ = Qt.asin(((l - j) / i).toFixed(9));
    W = e < N ? qr - W : W, $ = c < N ? qr - $ : $, W < 0 && (W = qr * 2 + W), $ < 0 && ($ = qr * 2 + $), a && W > $ && (W = W - qr * 2), !a && $ > W && ($ = $ - qr * 2);
  }
  var Z = $ - W;
  if (no(Z) > d) {
    var X = $, V = c, ae = l;
    $ = W + d * (a && $ > W ? 1 : -1), c = N + n * Qt.cos($), l = j + i * Qt.sin($), y = x_(c, l, n, i, r, 0, a, V, ae, [$, X, N, j]);
  }
  Z = $ - W;
  var ie = Qt.cos(W), Ae = Qt.sin(W), Rt = Qt.cos($), it = Qt.sin($), Ve = Qt.tan(Z / 4), Zt = 4 / 3 * n * Ve, an = 4 / 3 * i * Ve, Pt = [e, t], Kt = [e + Zt * Ae, t - an * ie], oe = [c + Zt * it, l - an * Rt], se = [c, l];
  if (Kt[0] = 2 * Pt[0] - Kt[0], Kt[1] = 2 * Pt[1] - Kt[1], u)
    return [Kt, oe, se].concat(y);
  y = [Kt, oe, se].concat(y).join().split(",");
  for (var fe = [], ct = 0, Lt = y.length; ct < Lt; ct++)
    fe[ct] = ct % 2 ? _(y[ct - 1], y[ct], f).y : _(y[ct], y[ct + 1], f).x;
  return fe;
}
function hR(e, t, n, i, r, o, a, c) {
  for (var l = [], u = [[], []], d, f, y, g, _, x, w, D, O = 0; O < 2; ++O) {
    if (O == 0 ? (f = 6 * e - 12 * n + 6 * r, d = -3 * e + 9 * n - 9 * r + 3 * a, y = 3 * n - 3 * e) : (f = 6 * t - 12 * i + 6 * o, d = -3 * t + 9 * i - 9 * o + 3 * c, y = 3 * i - 3 * t), no(d) < 1e-12) {
      if (no(f) < 1e-12)
        continue;
      g = -y / f, 0 < g && g < 1 && l.push(g);
      continue;
    }
    w = f * f - 4 * y * d, D = Qt.sqrt(w), !(w < 0) && (_ = (-f + D) / (2 * d), 0 < _ && _ < 1 && l.push(_), x = (-f - D) / (2 * d), 0 < x && x < 1 && l.push(x));
  }
  for (var k = l.length, P = k, N; k--; )
    g = l[k], N = 1 - g, u[0][k] = N * N * N * e + 3 * N * N * g * n + 3 * N * g * g * r + g * g * g * a, u[1][k] = N * N * N * t + 3 * N * N * g * i + 3 * N * g * g * o + g * g * g * c;
  return u[0][P] = e, u[1][P] = t, u[0][P + 1] = a, u[1][P + 1] = c, u[0].length = u[1].length = P + 2, {
    x0: nr(...u[0]),
    y0: nr(...u[1]),
    x1: ir(...u[0]),
    y1: ir(...u[1])
  };
}
function Qy(e) {
  var t = La(e);
  if (t.curve)
    return tu(t.curve);
  for (var n = dR(e), i = { x: 0, y: 0, bx: 0, by: 0, X: 0, Y: 0, qx: null, qy: null }, r = function(g, _, x) {
    var w, D;
    if (!g)
      return ["C", _.x, _.y, _.x, _.y, _.x, _.y];
    switch (!(g[0] in { T: 1, Q: 1 }) && (_.qx = _.qy = null), g[0]) {
      case "M":
        _.X = g[1], _.Y = g[2];
        break;
      case "A":
        g = ["C", ...x_(_.x, _.y, ...g.slice(1))];
        break;
      case "S":
        x == "C" || x == "S" ? (w = _.x * 2 - _.bx, D = _.y * 2 - _.by) : (w = _.x, D = _.y), g = ["C", w, D, ...g.slice(1)];
        break;
      case "T":
        x == "Q" || x == "T" ? (_.qx = _.x * 2 - _.qx, _.qy = _.y * 2 - _.qy) : (_.qx = _.x, _.qy = _.y), g = ["C", ...Jy(_.x, _.y, _.qx, _.qy, g[1], g[2])];
        break;
      case "Q":
        _.qx = g[1], _.qy = g[2], g = ["C", ...Jy(_.x, _.y, g[1], g[2], g[3], g[4])];
        break;
      case "L":
        g = ["C", ...ol(_.x, _.y, g[1], g[2])];
        break;
      case "H":
        g = ["C", ...ol(_.x, _.y, g[1], _.y)];
        break;
      case "V":
        g = ["C", ...ol(_.x, _.y, _.x, g[1])];
        break;
      case "Z":
        g = ["C", ...ol(_.x, _.y, _.X, _.Y)];
        break;
    }
    return g;
  }, o = function(g, _) {
    if (g[_].length > 7) {
      g[_].shift();
      for (var x = g[_]; x.length; )
        a[_] = "A", g.splice(_++, 0, ["C", ...x.splice(0, 6)]);
      g.splice(_, 1), d = n.length;
    }
  }, a = [], c = "", l = "", u = 0, d = n.length; u < d; u++) {
    n[u] && (c = n[u][0]), c != "C" && (a[u] = c, u && (l = a[u - 1])), n[u] = r(n[u], i, l), a[u] != "A" && c == "C" && (a[u] = "C"), o(n, u);
    var f = n[u], y = f.length;
    i.x = f[y - 2], i.y = f[y - 1], i.bx = Gy(f[y - 4]) || i.x, i.by = Gy(f[y - 3]) || i.y;
  }
  return t.curve = tu(n), n;
}
function kt(e) {
  return yn(e) && Zn(e, "waypoints");
}
function vt(e) {
  return yn(e) && Zn(e, "labelTarget");
}
function E_(e) {
  return {
    x: Math.round(e.x),
    y: Math.round(e.y),
    width: Math.round(e.width),
    height: Math.round(e.height)
  };
}
function Tr(e) {
  return {
    x: Math.round(e.x),
    y: Math.round(e.y)
  };
}
function Le(e) {
  return {
    top: e.y,
    right: e.x + (e.width || 0),
    bottom: e.y + (e.height || 0),
    left: e.x
  };
}
function _u(e) {
  return {
    x: e.left,
    y: e.top,
    width: e.right - e.left,
    height: e.bottom - e.top
  };
}
function mR(e) {
  return Tr({
    x: e.x + (e.width || 0) / 2,
    y: e.y + (e.height || 0) / 2
  });
}
function yR(e) {
  for (var t = e.waypoints, n = t.reduce(function(u, d, f) {
    var y = t[f - 1];
    if (y) {
      var g = u[u.length - 1], _ = g && g.endLength || 0, x = _R(y, d);
      u.push({
        start: y,
        end: d,
        startLength: _,
        endLength: _ + x,
        length: x
      });
    }
    return u;
  }, []), i = n.reduce(function(u, d) {
    return u + d.length;
  }, 0), r = i / 2, o = 0, a = n[o]; a.endLength < r; )
    a = n[++o];
  var c = (r - a.startLength) / a.length, l = {
    x: a.start.x + (a.end.x - a.start.x) * c,
    y: a.start.y + (a.end.y - a.start.y) * c
  };
  return l;
}
function Fe(e) {
  return kt(e) ? yR(e) : mR(e);
}
function Bn(e, t, n) {
  n = n || 0, yn(n) || (n = { x: n, y: n });
  var i = Le(e), r = Le(t), o = i.bottom + n.y <= r.top, a = i.left - n.x >= r.right, c = i.top - n.y >= r.bottom, l = i.right + n.x <= r.left, u = o ? "top" : c ? "bottom" : null, d = l ? "left" : a ? "right" : null;
  return d && u ? u + "-" + d : d || u || "intersect";
}
function Df(e, t, n) {
  var i = gR(e, t);
  return i.length === 1 || i.length === 2 && tc(i[0], i[1]) < 1 ? Tr(i[0]) : i.length > 1 ? (i = Gi(i, function(r) {
    var o = Math.floor(r.t2 * 100) || 1;
    return o = 100 - o, o = (o < 10 ? "0" : "") + o, r.segment2 + "#" + o;
  }), Tr(i[n ? 0 : i.length - 1])) : null;
}
function gR(e, t) {
  return b_(e, t);
}
function vR(e) {
  e = e.slice();
  for (var t = 0, n, i, r; e[t]; )
    n = e[t], i = e[t - 1], r = e[t + 1], tc(n, r) === 0 || bd(i, r, n) ? e.splice(t, 1) : t++;
  return e;
}
function _R(e, t) {
  return Math.sqrt(Math.pow(e.x - t.x, 2) + Math.pow(e.y - t.y, 2));
}
function Nl(e, t) {
  return Math.round(e * t) / t;
}
function eg(e) {
  return je(e) ? e + "px" : e;
}
function bR(e) {
  for (; e.parent; )
    e = e.parent;
  return e;
}
function xR(e) {
  e = G({}, { width: "100%", height: "100%" }, e);
  const t = e.container || document.body, n = document.createElement("div");
  return n.setAttribute("class", "djs-container djs-parent"), Rn(n, {
    position: "relative",
    overflow: "hidden",
    width: eg(e.width),
    height: eg(e.height)
  }), t.appendChild(n), n;
}
function w_(e, t, n) {
  const i = Me("g");
  dt(i).add(t);
  const r = n !== void 0 ? n : e.childNodes.length - 1;
  return e.insertBefore(i, e.childNodes[r] || null), i;
}
const ER = "base", S_ = 0, wR = 1, SR = {
  shape: ["x", "y", "width", "height"],
  connection: ["waypoints"]
};
function Xe(e, t, n, i) {
  this._eventBus = t, this._elementRegistry = i, this._graphicsFactory = n, this._rootsIdx = 0, this._layers = {}, this._planes = [], this._rootElement = null, this._init(e || {});
}
Xe.$inject = [
  "config.canvas",
  "eventBus",
  "graphicsFactory",
  "elementRegistry"
];
Xe.prototype._init = function(e) {
  const t = this._eventBus, n = this._container = xR(e), i = this._svg = Me("svg");
  we(i, { width: "100%", height: "100%" }), ze(n, i);
  const r = this._viewport = w_(i, "viewport");
  e.deferUpdate && (this._viewboxChanged = o_(Jn(this._viewboxChanged, this), 300)), t.on("diagram.init", () => {
    t.fire("canvas.init", {
      svg: i,
      viewport: r
    });
  }), t.on([
    "shape.added",
    "connection.added",
    "shape.removed",
    "connection.removed",
    "elements.changed",
    "root.set"
  ], () => {
    delete this._cachedViewbox;
  }), t.on("diagram.destroy", 500, this._destroy, this), t.on("diagram.clear", 500, this._clear, this);
};
Xe.prototype._destroy = function() {
  this._eventBus.fire("canvas.destroy", {
    svg: this._svg,
    viewport: this._viewport
  });
  const e = this._container.parentNode;
  e && e.removeChild(this._container), delete this._svg, delete this._container, delete this._layers, delete this._planes, delete this._rootElement, delete this._viewport;
};
Xe.prototype._clear = function() {
  this._elementRegistry.getAll().forEach((t) => {
    const n = g_(t);
    n === "root" ? this.removeRootElement(t) : this._removeElement(t, n);
  }), this._planes = [], this._rootElement = null, delete this._cachedViewbox;
};
Xe.prototype.getDefaultLayer = function() {
  return this.getLayer(ER, S_);
};
Xe.prototype.getLayer = function(e, t) {
  if (!e)
    throw new Error("must specify a name");
  let n = this._layers[e];
  if (n || (n = this._layers[e] = this._createLayer(e, t)), typeof t < "u" && n.index !== t)
    throw new Error("layer <" + e + "> already created at index <" + t + ">");
  return n.group;
};
Xe.prototype._getChildIndex = function(e) {
  return li(this._layers, function(t, n) {
    return n.visible && e >= n.index && t++, t;
  }, 0);
};
Xe.prototype._createLayer = function(e, t) {
  typeof t > "u" && (t = wR);
  const n = this._getChildIndex(t);
  return {
    group: w_(this._viewport, "layer-" + e, n),
    index: t,
    visible: !0
  };
};
Xe.prototype.showLayer = function(e) {
  if (!e)
    throw new Error("must specify a name");
  const t = this._layers[e];
  if (!t)
    throw new Error("layer <" + e + "> does not exist");
  const n = this._viewport, i = t.group, r = t.index;
  if (t.visible)
    return i;
  const o = this._getChildIndex(r);
  return n.insertBefore(i, n.childNodes[o] || null), t.visible = !0, i;
};
Xe.prototype.hideLayer = function(e) {
  if (!e)
    throw new Error("must specify a name");
  const t = this._layers[e];
  if (!t)
    throw new Error("layer <" + e + "> does not exist");
  const n = t.group;
  return t.visible && (qt(n), t.visible = !1), n;
};
Xe.prototype._removeLayer = function(e) {
  const t = this._layers[e];
  t && (delete this._layers[e], qt(t.group));
};
Xe.prototype.getActiveLayer = function() {
  const e = this._findPlaneForRoot(this.getRootElement());
  return e ? e.layer : null;
};
Xe.prototype.findRoot = function(e) {
  return typeof e == "string" && (e = this._elementRegistry.get(e)), e ? (this._findPlaneForRoot(
    bR(e)
  ) || {}).rootElement : void 0;
};
Xe.prototype.getRootElements = function() {
  return this._planes.map(function(e) {
    return e.rootElement;
  });
};
Xe.prototype._findPlaneForRoot = function(e) {
  return gt(this._planes, function(t) {
    return t.rootElement === e;
  });
};
Xe.prototype.getContainer = function() {
  return this._container;
};
Xe.prototype._updateMarker = function(e, t, n) {
  let i;
  e.id || (e = this._elementRegistry.get(e)), i = this._elementRegistry._elements[e.id], i && (z([i.gfx, i.secondaryGfx], function(r) {
    r && (n ? dt(r).add(t) : dt(r).remove(t));
  }), this._eventBus.fire("element.marker.update", { element: e, gfx: i.gfx, marker: t, add: !!n }));
};
Xe.prototype.addMarker = function(e, t) {
  this._updateMarker(e, t, !0);
};
Xe.prototype.removeMarker = function(e, t) {
  this._updateMarker(e, t, !1);
};
Xe.prototype.hasMarker = function(e, t) {
  e.id || (e = this._elementRegistry.get(e));
  const n = this.getGraphics(e);
  return dt(n).has(t);
};
Xe.prototype.toggleMarker = function(e, t) {
  this.hasMarker(e, t) ? this.removeMarker(e, t) : this.addMarker(e, t);
};
Xe.prototype.getRootElement = function() {
  const e = this._rootElement;
  return e || this._planes.length ? e : this.setRootElement(this.addRootElement(null));
};
Xe.prototype.addRootElement = function(e) {
  const t = this._rootsIdx++;
  e || (e = {
    id: "__implicitroot_" + t,
    children: [],
    isImplicit: !0
  });
  const n = e.layer = "root-" + t;
  this._ensureValid("root", e);
  const i = this.getLayer(n, S_);
  return this.hideLayer(n), this._addRoot(e, i), this._planes.push({
    rootElement: e,
    layer: i
  }), e;
};
Xe.prototype.removeRootElement = function(e) {
  if (typeof e == "string" && (e = this._elementRegistry.get(e)), !!this._findPlaneForRoot(e))
    return this._removeRoot(e), this._removeLayer(e.layer), this._planes = this._planes.filter(function(n) {
      return n.rootElement !== e;
    }), this._rootElement === e && (this._rootElement = null), e;
};
Xe.prototype.setRootElement = function(e) {
  if (e === this._rootElement)
    return e;
  let t;
  if (!e)
    throw new Error("rootElement required");
  return t = this._findPlaneForRoot(e), t || (e = this.addRootElement(e)), this._setRoot(e), e;
};
Xe.prototype._removeRoot = function(e) {
  const t = this._elementRegistry, n = this._eventBus;
  n.fire("root.remove", { element: e }), n.fire("root.removed", { element: e }), t.remove(e);
};
Xe.prototype._addRoot = function(e, t) {
  const n = this._elementRegistry, i = this._eventBus;
  i.fire("root.add", { element: e }), n.add(e, t), i.fire("root.added", { element: e, gfx: t });
};
Xe.prototype._setRoot = function(e, t) {
  const n = this._rootElement;
  n && (this._elementRegistry.updateGraphics(n, null, !0), this.hideLayer(n.layer)), e && (t || (t = this._findPlaneForRoot(e).layer), this._elementRegistry.updateGraphics(e, this._svg, !0), this.showLayer(e.layer)), this._rootElement = e, this._eventBus.fire("root.set", { element: e });
};
Xe.prototype._ensureValid = function(e, t) {
  if (!t.id)
    throw new Error("element must have an id");
  if (this._elementRegistry.get(t.id))
    throw new Error("element <" + t.id + "> already exists");
  const n = SR[e];
  if (!Wa(n, function(r) {
    return typeof t[r] < "u";
  }))
    throw new Error(
      "must supply { " + n.join(", ") + " } with " + e
    );
};
Xe.prototype._setParent = function(e, t, n) {
  pn(t.children, e, n), e.parent = t;
};
Xe.prototype._addElement = function(e, t, n, i) {
  n = n || this.getRootElement();
  const r = this._eventBus, o = this._graphicsFactory;
  this._ensureValid(e, t), r.fire(e + ".add", { element: t, parent: n }), this._setParent(t, n, i);
  const a = o.create(e, t, i);
  return this._elementRegistry.add(t, a), o.update(e, t, a), r.fire(e + ".added", { element: t, gfx: a }), t;
};
Xe.prototype.addShape = function(e, t, n) {
  return this._addElement("shape", e, t, n);
};
Xe.prototype.addConnection = function(e, t, n) {
  return this._addElement("connection", e, t, n);
};
Xe.prototype._removeElement = function(e, t) {
  const n = this._elementRegistry, i = this._graphicsFactory, r = this._eventBus;
  if (e = n.get(e.id || e), !!e)
    return r.fire(t + ".remove", { element: e }), i.remove(e), rn(e.parent && e.parent.children, e), e.parent = null, r.fire(t + ".removed", { element: e }), n.remove(e), e;
};
Xe.prototype.removeShape = function(e) {
  return this._removeElement(e, "shape");
};
Xe.prototype.removeConnection = function(e) {
  return this._removeElement(e, "connection");
};
Xe.prototype.getGraphics = function(e, t) {
  return this._elementRegistry.getGraphics(e, t);
};
Xe.prototype._changeViewbox = function(e) {
  this._eventBus.fire("canvas.viewbox.changing"), e.apply(this), this._cachedViewbox = null, this._viewboxChanged();
};
Xe.prototype._viewboxChanged = function() {
  this._eventBus.fire("canvas.viewbox.changed", { viewbox: this.viewbox() });
};
Xe.prototype.viewbox = function(e) {
  if (e === void 0 && this._cachedViewbox)
    return this._cachedViewbox;
  const t = this._viewport, n = this.getSize();
  let i, r, o, a, c, l, u;
  if (e)
    this._changeViewbox(function() {
      c = Math.min(n.width / e.width, n.height / e.height);
      const d = this._svg.createSVGMatrix().scale(c).translate(-e.x, -e.y);
      js(t, d);
    });
  else
    return o = this._rootElement ? this.getActiveLayer() : null, i = o && o.getBBox() || {}, a = js(t), r = a ? a.matrix : OS(), c = Nl(r.a, 1e3), l = Nl(-r.e || 0, 1e3), u = Nl(-r.f || 0, 1e3), e = this._cachedViewbox = {
      x: l ? l / c : 0,
      y: u ? u / c : 0,
      width: n.width / c,
      height: n.height / c,
      scale: c,
      inner: {
        width: i.width || 0,
        height: i.height || 0,
        x: i.x || 0,
        y: i.y || 0
      },
      outer: n
    }, e;
  return e;
};
Xe.prototype.scroll = function(e) {
  const t = this._viewport;
  let n = t.getCTM();
  return e && this._changeViewbox(function() {
    e = G({ dx: 0, dy: 0 }, e || {}), n = this._svg.createSVGMatrix().translate(e.dx, e.dy).multiply(n), R_(t, n);
  }), { x: n.e, y: n.f };
};
Xe.prototype.scrollToElement = function(e, t) {
  let n = 100;
  typeof e == "string" && (e = this._elementRegistry.get(e));
  const i = this.findRoot(e);
  if (i !== this.getRootElement() && this.setRootElement(i), i === e)
    return;
  t || (t = {}), typeof t == "number" && (n = t), t = {
    top: t.top || n,
    right: t.right || n,
    bottom: t.bottom || n,
    left: t.left || n
  };
  const r = nn(e), o = Le(r), a = this.viewbox(), c = this.zoom();
  let l, u;
  a.y += t.top / c, a.x += t.left / c, a.width -= (t.right + t.left) / c, a.height -= (t.bottom + t.top) / c;
  const d = Le(a);
  if (!(r.width < a.width && r.height < a.height))
    l = r.x - a.x, u = r.y - a.y;
  else {
    const y = Math.max(0, o.right - d.right), g = Math.min(0, o.left - d.left), _ = Math.max(0, o.bottom - d.bottom), x = Math.min(0, o.top - d.top);
    l = y || g, u = _ || x;
  }
  this.scroll({ dx: -l * c, dy: -u * c });
};
Xe.prototype.zoom = function(e, t) {
  if (!e)
    return this.viewbox(e).scale;
  if (e === "fit-viewport")
    return this._fitViewport(t);
  let n, i;
  return this._changeViewbox(function() {
    typeof t != "object" && (n = this.viewbox().outer, t = {
      x: n.width / 2,
      y: n.height / 2
    }), i = this._setZoom(e, t);
  }), Nl(i.a, 1e3);
};
function R_(e, t) {
  const n = "matrix(" + t.a + "," + t.b + "," + t.c + "," + t.d + "," + t.e + "," + t.f + ")";
  e.setAttribute("transform", n);
}
Xe.prototype._fitViewport = function(e) {
  const t = this.viewbox(), n = t.outer, i = t.inner;
  let r, o;
  return i.x >= 0 && i.y >= 0 && i.x + i.width <= n.width && i.y + i.height <= n.height && !e ? o = {
    x: 0,
    y: 0,
    width: Math.max(i.width + i.x, n.width),
    height: Math.max(i.height + i.y, n.height)
  } : (r = Math.min(1, n.width / i.width, n.height / i.height), o = {
    x: i.x + (e ? i.width / 2 - n.width / r / 2 : 0),
    y: i.y + (e ? i.height / 2 - n.height / r / 2 : 0),
    width: n.width / r,
    height: n.height / r
  }), this.viewbox(o), this.viewbox(!1).scale;
};
Xe.prototype._setZoom = function(e, t) {
  const n = this._svg, i = this._viewport, r = n.createSVGMatrix(), o = n.createSVGPoint();
  let a, c, l, u, d;
  l = i.getCTM();
  const f = l.a;
  return t ? (a = G(o, t), c = a.matrixTransform(l.inverse()), u = r.translate(c.x, c.y).scale(1 / f * e).translate(-c.x, -c.y), d = l.multiply(u)) : d = r.scale(e), R_(this._viewport, d), d;
};
Xe.prototype.getSize = function() {
  return {
    width: this._container.clientWidth,
    height: this._container.clientHeight
  };
};
Xe.prototype.getAbsoluteBBox = function(e) {
  const t = this.viewbox();
  let n;
  e.waypoints ? n = this.getGraphics(e).getBBox() : n = e;
  const i = n.x * t.scale - t.x * t.scale, r = n.y * t.scale - t.y * t.scale, o = n.width * t.scale, a = n.height * t.scale;
  return {
    x: i,
    y: r,
    width: o,
    height: a
  };
};
Xe.prototype.resized = function() {
  delete this._cachedViewbox, this._eventBus.fire("canvas.resized");
};
var Ia = "data-element-id";
function vi(e) {
  this._elements = {}, this._eventBus = e;
}
vi.$inject = ["eventBus"];
vi.prototype.add = function(e, t, n) {
  var i = e.id;
  this._validateId(i), we(t, Ia, i), n && we(n, Ia, i), this._elements[i] = { element: e, gfx: t, secondaryGfx: n };
};
vi.prototype.remove = function(e) {
  var t = this._elements, n = e.id || e, i = n && t[n];
  i && (we(i.gfx, Ia, ""), i.secondaryGfx && we(i.secondaryGfx, Ia, ""), delete t[n]);
};
vi.prototype.updateId = function(e, t) {
  this._validateId(t), typeof e == "string" && (e = this.get(e)), this._eventBus.fire("element.updateId", {
    element: e,
    newId: t
  });
  var n = this.getGraphics(e), i = this.getGraphics(e, !0);
  this.remove(e), e.id = t, this.add(e, n, i);
};
vi.prototype.updateGraphics = function(e, t, n) {
  var i = e.id || e, r = this._elements[i];
  return n ? r.secondaryGfx = t : r.gfx = t, t && we(t, Ia, i), t;
};
vi.prototype.get = function(e) {
  var t;
  typeof e == "string" ? t = e : t = e && we(e, Ia);
  var n = this._elements[t];
  return n && n.element;
};
vi.prototype.filter = function(e) {
  var t = [];
  return this.forEach(function(n, i) {
    e(n, i) && t.push(n);
  }), t;
};
vi.prototype.find = function(e) {
  for (var t = this._elements, n = Object.keys(t), i = 0; i < n.length; i++) {
    var r = n[i], o = t[r], a = o.element, c = o.gfx;
    if (e(a, c))
      return a;
  }
};
vi.prototype.getAll = function() {
  return this.filter(function(e) {
    return e;
  });
};
vi.prototype.forEach = function(e) {
  var t = this._elements;
  Object.keys(t).forEach(function(n) {
    var i = t[n], r = i.element, o = i.gfx;
    return e(r, o);
  });
};
vi.prototype.getGraphics = function(e, t) {
  var n = e.id || e, i = this._elements[n];
  return i && (t ? i.secondaryGfx : i.gfx);
};
vi.prototype._validateId = function(e) {
  if (!e)
    throw new Error("element must have an id");
  if (this._elements[e])
    throw new Error("element with id " + e + " already added");
};
function RR(e, t, n, i) {
  var r = n.inverse;
  return Object.defineProperty(e, "remove", {
    value: function(o) {
      var a = this.indexOf(o);
      return a !== -1 && (this.splice(a, 1), t.unset(o, r, i)), o;
    }
  }), Object.defineProperty(e, "contains", {
    value: function(o) {
      return this.indexOf(o) !== -1;
    }
  }), Object.defineProperty(e, "add", {
    value: function(o, a) {
      var c = this.indexOf(o);
      if (typeof a > "u") {
        if (c !== -1)
          return;
        a = this.length;
      }
      c !== -1 && this.splice(c, 1), this.splice(a, 0, o), c === -1 && t.set(o, r, i);
    }
  }), Object.defineProperty(e, "__refs_collection", {
    value: !0
  }), e;
}
function CR(e) {
  return e.__refs_collection === !0;
}
function AR(e, t) {
  return Object.prototype.hasOwnProperty.call(e, t.name || t);
}
function C_(e, t, n) {
  var i = RR(n[t.name] || [], e, t, n);
  Object.defineProperty(n, t.name, {
    enumerable: t.enumerable,
    value: i
  }), i.length && i.forEach(function(r) {
    e.set(r, t.inverse, n);
  });
}
function PR(e, t, n) {
  var i = t.inverse, r = n[t.name];
  Object.defineProperty(n, t.name, {
    configurable: t.configurable,
    enumerable: t.enumerable,
    get: function() {
      return r;
    },
    set: function(o) {
      if (o !== r) {
        var a = r;
        r = null, a && e.unset(a, i, n), r = o, e.set(r, i, n);
      }
    }
  });
}
function Ti(e, t) {
  if (!(this instanceof Ti))
    return new Ti(e, t);
  e.inverse = t, t.inverse = e, this.props = {}, this.props[e.name] = e, this.props[t.name] = t;
}
Ti.prototype.bind = function(e, t) {
  if (typeof t == "string") {
    if (!this.props[t])
      throw new Error("no property <" + t + "> in ref");
    t = this.props[t];
  }
  t.collection ? C_(this, t, e) : PR(this, t, e);
};
Ti.prototype.ensureRefsCollection = function(e, t) {
  var n = e[t.name];
  return CR(n) || C_(this, t, e), n;
};
Ti.prototype.ensureBound = function(e, t) {
  AR(e, t) || this.bind(e, t);
};
Ti.prototype.unset = function(e, t, n) {
  e && (this.ensureBound(e, t), t.collection ? this.ensureRefsCollection(e, t).remove(n) : e[t.name] = void 0);
};
Ti.prototype.set = function(e, t, n) {
  e && (this.ensureBound(e, t), t.collection ? this.ensureRefsCollection(e, t).add(n) : e[t.name] = n);
};
var Ed = new Ti({ name: "children", enumerable: !0, collection: !0 }, { name: "parent" }), A_ = new Ti({ name: "labels", enumerable: !0, collection: !0 }, { name: "labelTarget" }), tg = new Ti({ name: "attachers", collection: !0 }, { name: "host" }), P_ = new Ti({ name: "outgoing", collection: !0 }, { name: "source" }), T_ = new Ti({ name: "incoming", collection: !0 }, { name: "target" });
function Ua() {
  Object.defineProperty(this, "businessObject", {
    writable: !0
  }), Object.defineProperty(this, "label", {
    get: function() {
      return this.labels[0];
    },
    set: function(e) {
      var t = this.label, n = this.labels;
      !e && t ? n.remove(t) : n.add(e, 0);
    }
  }), Ed.bind(this, "parent"), A_.bind(this, "labels"), P_.bind(this, "outgoing"), T_.bind(this, "incoming");
}
function nc() {
  Ua.call(this), Ed.bind(this, "children"), tg.bind(this, "host"), tg.bind(this, "attachers");
}
Pe(nc, Ua);
function k_() {
  Ua.call(this), Ed.bind(this, "children");
}
Pe(k_, nc);
function M_() {
  nc.call(this), A_.bind(this, "labelTarget");
}
Pe(M_, nc);
function D_() {
  Ua.call(this), P_.bind(this, "source"), T_.bind(this, "target");
}
Pe(D_, Ua);
var TR = {
  connection: D_,
  shape: nc,
  label: M_,
  root: k_
};
function kR(e, t) {
  var n = TR[e];
  if (!n)
    throw new Error("unknown type: <" + e + ">");
  return G(new n(), t);
}
function MR(e) {
  return e instanceof Ua;
}
function Nr() {
  this._uid = 12;
}
Nr.prototype.createRoot = function(e) {
  return this.create("root", e);
};
Nr.prototype.createLabel = function(e) {
  return this.create("label", e);
};
Nr.prototype.createShape = function(e) {
  return this.create("shape", e);
};
Nr.prototype.createConnection = function(e) {
  return this.create("connection", e);
};
Nr.prototype.create = function(e, t) {
  return t = G({}, t || {}), t.id || (t.id = e + "_" + this._uid++), kR(e, t);
};
var iu = "__fn", O_ = 1e3, DR = Array.prototype.slice;
function ui() {
  this._listeners = {}, this.on("diagram.destroy", 1, this._destroy, this);
}
ui.prototype.on = function(e, t, n, i) {
  if (e = nt(e) ? e : [e], un(t) && (i = n, n = t, t = O_), !je(t))
    throw new Error("priority must be a number");
  var r = n;
  i && (r = Jn(n, i), r[iu] = n[iu] || n);
  var o = this;
  e.forEach(function(a) {
    o._addListener(a, {
      priority: t,
      callback: r,
      next: null
    });
  });
};
ui.prototype.once = function(e, t, n, i) {
  var r = this;
  if (un(t) && (i = n, n = t, t = O_), !je(t))
    throw new Error("priority must be a number");
  function o() {
    o.__isTomb = !0;
    var a = n.apply(i, arguments);
    return r.off(e, o), a;
  }
  o[iu] = n, this.on(e, t, o);
};
ui.prototype.off = function(e, t) {
  e = nt(e) ? e : [e];
  var n = this;
  e.forEach(function(i) {
    n._removeListener(i, t);
  });
};
ui.prototype.createEvent = function(e) {
  var t = new ic();
  return t.init(e), t;
};
ui.prototype.fire = function(e, t) {
  var n, i, r, o;
  if (o = DR.call(arguments), typeof e == "object" && (t = e, e = t.type), !e)
    throw new Error("no event type specified");
  if (i = this._listeners[e], !!i) {
    t instanceof ic ? n = t : n = this.createEvent(t), o[0] = n;
    var a = n.type;
    e !== a && (n.type = e);
    try {
      r = this._invokeListeners(n, o, i);
    } finally {
      e !== a && (n.type = a);
    }
    return r === void 0 && n.defaultPrevented && (r = !1), r;
  }
};
ui.prototype.handleError = function(e) {
  return this.fire("error", { error: e }) === !1;
};
ui.prototype._destroy = function() {
  this._listeners = {};
};
ui.prototype._invokeListeners = function(e, t, n) {
  for (var i; n && !e.cancelBubble; )
    i = this._invokeListener(e, t, n), n = n.next;
  return i;
};
ui.prototype._invokeListener = function(e, t, n) {
  var i;
  if (n.callback.__isTomb)
    return i;
  try {
    i = OR(n.callback, t), i !== void 0 && (e.returnValue = i, e.stopPropagation()), i === !1 && e.preventDefault();
  } catch (r) {
    if (!this.handleError(r))
      throw console.error("unhandled error in event listener", r), r;
  }
  return i;
};
ui.prototype._addListener = function(e, t) {
  var n = this._getListeners(e), i;
  if (!n) {
    this._setListeners(e, t);
    return;
  }
  for (; n; ) {
    if (n.priority < t.priority) {
      t.next = n, i ? i.next = t : this._setListeners(e, t);
      return;
    }
    i = n, n = n.next;
  }
  i.next = t;
};
ui.prototype._getListeners = function(e) {
  return this._listeners[e];
};
ui.prototype._setListeners = function(e, t) {
  this._listeners[e] = t;
};
ui.prototype._removeListener = function(e, t) {
  var n = this._getListeners(e), i, r, o;
  if (!t) {
    this._setListeners(e, null);
    return;
  }
  for (; n; )
    i = n.next, o = n.callback, (o === t || o[iu] === t) && (r ? r.next = i : this._setListeners(e, i)), r = n, n = i;
};
function ic() {
}
ic.prototype.stopPropagation = function() {
  this.cancelBubble = !0;
};
ic.prototype.preventDefault = function() {
  this.defaultPrevented = !0;
};
ic.prototype.init = function(e) {
  G(this, e || {});
};
function OR(e, t) {
  return e.apply(null, t);
}
function Yo(e) {
  return e.childNodes[0];
}
function NR(e) {
  return e.parentNode.childNodes[1];
}
function Bl(e, t, n, i, r) {
  var o = Os();
  o.setTranslate(t, n);
  var a = Os();
  a.setRotate(i || 0, 0, 0);
  var c = Os();
  c.setScale(1, 1), js(e, [o, a, c]);
}
function Cn(e, t, n) {
  var i = Os();
  i.setTranslate(t, n), js(e, i);
}
function N_(e, t) {
  var n = Os();
  n.setRotate(t, 0, 0), js(e, n);
}
function _i(e, t) {
  this._eventBus = e, this._elementRegistry = t;
}
_i.$inject = ["eventBus", "elementRegistry"];
_i.prototype._getChildrenContainer = function(e) {
  var t = this._elementRegistry.getGraphics(e), n;
  return e.parent ? (n = NR(t), n || (n = Me("g"), dt(n).add("djs-children"), ze(t.parentNode, n))) : n = t, n;
};
_i.prototype._clear = function(e) {
  var t = Yo(e);
  return mu(t), t;
};
_i.prototype._createContainer = function(e, t, n, i) {
  var r = Me("g");
  dt(r).add("djs-group"), typeof n < "u" ? B_(r, t, t.childNodes[n]) : ze(t, r);
  var o = Me("g");
  dt(o).add("djs-element"), dt(o).add("djs-" + e), i && dt(o).add("djs-frame"), ze(r, o);
  var a = Me("g");
  return dt(a).add("djs-visual"), ze(o, a), o;
};
_i.prototype.create = function(e, t, n) {
  var i = this._getChildrenContainer(t.parent);
  return this._createContainer(e, i, n, v_(t));
};
_i.prototype.updateContainments = function(e) {
  var t = this, n = this._elementRegistry, i;
  i = li(e, function(r, o) {
    return o.parent && (r[o.parent.id] = o.parent), r;
  }, {}), z(i, function(r) {
    var o = r.children;
    if (o) {
      var a = t._getChildrenContainer(r);
      z(o.slice().reverse(), function(c) {
        var l = n.getGraphics(c);
        B_(l.parentNode, a);
      });
    }
  });
};
_i.prototype.drawShape = function(e, t, n = {}) {
  var i = this._eventBus;
  return i.fire("render.shape", { gfx: e, element: t, attrs: n });
};
_i.prototype.getShapePath = function(e) {
  var t = this._eventBus;
  return t.fire("render.getShapePath", e);
};
_i.prototype.drawConnection = function(e, t, n = {}) {
  var i = this._eventBus;
  return i.fire("render.connection", { gfx: e, element: t, attrs: n });
};
_i.prototype.getConnectionPath = function(e) {
  var t = this._eventBus;
  return t.fire("render.getConnectionPath", e);
};
_i.prototype.update = function(e, t, n) {
  if (t.parent) {
    var i = this._clear(n);
    if (e === "shape")
      this.drawShape(i, t), Cn(n, t.x, t.y);
    else if (e === "connection")
      this.drawConnection(i, t);
    else
      throw new Error("unknown type: " + e);
    t.hidden ? we(n, "display", "none") : we(n, "display", "block");
  }
};
_i.prototype.remove = function(e) {
  var t = this._elementRegistry.getGraphics(e);
  qt(t.parentNode);
};
function B_(e, t, n) {
  var i = n || t.firstChild;
  e !== i && t.insertBefore(e, i);
}
const BR = {
  __depends__: [tR],
  __init__: ["canvas"],
  canvas: ["type", Xe],
  elementRegistry: ["type", vi],
  elementFactory: ["type", Nr],
  eventBus: ["type", ui],
  graphicsFactory: ["type", _i]
};
function LR(e) {
  var t = new h_(e);
  return t.init(), t;
}
function IR(e) {
  e = e || {};
  var t = {
    config: ["value", e]
  }, n = [t, BR].concat(e.modules || []);
  return LR(n);
}
function po(e, t) {
  this._injector = t || IR(e), this.get("eventBus").fire("diagram.init");
}
po.prototype.get = function(e, t) {
  return this._injector.get(e, t);
};
po.prototype.invoke = function(e, t, n) {
  return this._injector.invoke(e, t, n);
};
po.prototype.destroy = function() {
  this.get("eventBus").fire("diagram.destroy");
};
po.prototype.clear = function() {
  this.get("eventBus").fire("diagram.clear");
};
function wd() {
}
wd.prototype.get = function(e) {
  return this.$model.properties.get(this, e);
};
wd.prototype.set = function(e, t) {
  this.$model.properties.set(this, e, t);
};
function L_(e, t) {
  this.model = e, this.properties = t;
}
L_.prototype.createType = function(e) {
  var t = this.model, n = this.properties, i = Object.create(wd.prototype);
  z(e.properties, function(a) {
    !a.isMany && a.default !== void 0 && (i[a.name] = a.default);
  }), n.defineModel(i, t), n.defineDescriptor(i, e);
  var r = e.ns.name;
  function o(a) {
    n.define(this, "$type", { value: r, enumerable: !0 }), n.define(this, "$attrs", { value: {} }), n.define(this, "$parent", { writable: !0 }), z(a, Jn(function(c, l) {
      this.set(l, c);
    }, this));
  }
  return o.prototype = i, o.hasType = i.$instanceOf = this.model.hasType, n.defineModel(o, t), n.defineDescriptor(o, e), o;
};
var $R = {
  String: !0,
  Boolean: !0,
  Integer: !0,
  Real: !0,
  Element: !0
}, I_ = {
  String: function(e) {
    return e;
  },
  Boolean: function(e) {
    return e === "true";
  },
  Integer: function(e) {
    return parseInt(e, 10);
  },
  Real: function(e) {
    return parseFloat(e);
  }
};
function Sd(e, t) {
  var n = I_[e];
  return n ? n(t) : t;
}
function Of(e) {
  return !!$R[e];
}
function $_(e) {
  return !!I_[e];
}
function Vn(e, t) {
  var n = e.split(/:/), i, r;
  if (n.length === 1)
    i = e, r = t;
  else if (n.length === 2)
    i = n[1], r = n[0];
  else
    throw new Error("expected <prefix:localName> or <localName>, got " + e);
  return e = (r ? r + ":" : "") + i, {
    name: e,
    prefix: r,
    localName: i
  };
}
function bi(e) {
  this.ns = e, this.name = e.name, this.allTypes = [], this.allTypesByName = {}, this.properties = [], this.propertiesByName = {};
}
bi.prototype.build = function() {
  return Ui(this, [
    "ns",
    "name",
    "allTypes",
    "allTypesByName",
    "properties",
    "propertiesByName",
    "bodyProperty",
    "idProperty"
  ]);
};
bi.prototype.addProperty = function(e, t, n) {
  typeof t == "boolean" && (n = t, t = void 0), this.addNamedProperty(e, n !== !1);
  var i = this.properties;
  t !== void 0 ? i.splice(t, 0, e) : i.push(e);
};
bi.prototype.replaceProperty = function(e, t, n) {
  var i = e.ns, r = this.properties, o = this.propertiesByName, a = e.name !== t.name;
  if (e.isId) {
    if (!t.isId)
      throw new Error(
        "property <" + t.ns.name + "> must be id property to refine <" + e.ns.name + ">"
      );
    this.setIdProperty(t, !1);
  }
  if (e.isBody) {
    if (!t.isBody)
      throw new Error(
        "property <" + t.ns.name + "> must be body property to refine <" + e.ns.name + ">"
      );
    this.setBodyProperty(t, !1);
  }
  var c = r.indexOf(e);
  if (c === -1)
    throw new Error("property <" + i.name + "> not found in property list");
  r.splice(c, 1), this.addProperty(t, n ? void 0 : c, a), o[i.name] = o[i.localName] = t;
};
bi.prototype.redefineProperty = function(e, t, n) {
  var i = e.ns.prefix, r = t.split("#"), o = Vn(r[0], i), a = Vn(r[1], o.prefix).name, c = this.propertiesByName[a];
  if (c)
    this.replaceProperty(c, e, n);
  else
    throw new Error("refined property <" + a + "> not found");
  delete e.redefines;
};
bi.prototype.addNamedProperty = function(e, t) {
  var n = e.ns, i = this.propertiesByName;
  t && (this.assertNotDefined(e, n.name), this.assertNotDefined(e, n.localName)), i[n.name] = i[n.localName] = e;
};
bi.prototype.removeNamedProperty = function(e) {
  var t = e.ns, n = this.propertiesByName;
  delete n[t.name], delete n[t.localName];
};
bi.prototype.setBodyProperty = function(e, t) {
  if (t && this.bodyProperty)
    throw new Error(
      "body property defined multiple times (<" + this.bodyProperty.ns.name + ">, <" + e.ns.name + ">)"
    );
  this.bodyProperty = e;
};
bi.prototype.setIdProperty = function(e, t) {
  if (t && this.idProperty)
    throw new Error(
      "id property defined multiple times (<" + this.idProperty.ns.name + ">, <" + e.ns.name + ">)"
    );
  this.idProperty = e;
};
bi.prototype.assertNotTrait = function(e) {
  if ((e.extends || []).length)
    throw new Error(
      `cannot create <${e.name}> extending <${e.extends}>`
    );
};
bi.prototype.assertNotDefined = function(e, t) {
  var n = e.name, i = this.propertiesByName[n];
  if (i)
    throw new Error(
      "property <" + n + "> already defined; override of <" + i.definedBy.ns.name + "#" + i.ns.name + "> by <" + e.definedBy.ns.name + "#" + e.ns.name + "> not allowed without redefines"
    );
};
bi.prototype.hasProperty = function(e) {
  return this.propertiesByName[e];
};
bi.prototype.addTrait = function(e, t) {
  t && this.assertNotTrait(e);
  var n = this.allTypesByName, i = this.allTypes, r = e.name;
  r in n || (z(e.properties, Jn(function(o) {
    o = G({}, o, {
      name: o.ns.localName,
      inherited: t
    }), Object.defineProperty(o, "definedBy", {
      value: e
    });
    var a = o.replaces, c = o.redefines;
    a || c ? this.redefineProperty(o, a || c, a) : (o.isBody && this.setBodyProperty(o), o.isId && this.setIdProperty(o), this.addProperty(o));
  }, this)), i.push(e), n[r] = e);
};
function fo(e, t) {
  this.packageMap = {}, this.typeMap = {}, this.packages = [], this.properties = t, z(e, Jn(this.registerPackage, this));
}
fo.prototype.getPackage = function(e) {
  return this.packageMap[e];
};
fo.prototype.getPackages = function() {
  return this.packages;
};
fo.prototype.registerPackage = function(e) {
  e = G({}, e);
  var t = this.packageMap;
  ng(t, e, "prefix"), ng(t, e, "uri"), z(e.types, Jn(function(n) {
    this.registerType(n, e);
  }, this)), t[e.uri] = t[e.prefix] = e, this.packages.push(e);
};
fo.prototype.registerType = function(e, t) {
  e = G({}, e, {
    superClass: (e.superClass || []).slice(),
    extends: (e.extends || []).slice(),
    properties: (e.properties || []).slice(),
    meta: G(e.meta || {})
  });
  var n = Vn(e.name, t.prefix), i = n.name, r = {};
  z(e.properties, Jn(function(o) {
    var a = Vn(o.name, n.prefix), c = a.name;
    Of(o.type) || (o.type = Vn(o.type, a.prefix).name), G(o, {
      ns: a,
      name: c
    }), r[c] = o;
  }, this)), G(e, {
    ns: n,
    name: i,
    propertiesByName: r
  }), z(e.extends, Jn(function(o) {
    var a = Vn(o, n.prefix), c = this.typeMap[a.name];
    c.traits = c.traits || [], c.traits.push(i);
  }, this)), this.definePackage(e, t), this.typeMap[i] = e;
};
fo.prototype.mapTypes = function(e, t, n) {
  var i = Of(e.name) ? { name: e.name } : this.typeMap[e.name], r = this;
  function o(l, u) {
    var d = Vn(l, Of(l) ? "" : e.prefix);
    r.mapTypes(d, t, u);
  }
  function a(l) {
    return o(l, !0);
  }
  function c(l) {
    return o(l, !1);
  }
  if (!i)
    throw new Error("unknown type <" + e.name + ">");
  z(i.superClass, n ? a : c), t(i, !n), z(i.traits, a);
};
fo.prototype.getEffectiveDescriptor = function(e) {
  var t = Vn(e), n = new bi(t);
  this.mapTypes(t, function(r, o) {
    n.addTrait(r, o);
  });
  var i = n.build();
  return this.definePackage(i, i.allTypes[i.allTypes.length - 1].$pkg), i;
};
fo.prototype.definePackage = function(e, t) {
  this.properties.define(e, "$pkg", { value: t });
};
function ng(e, t, n) {
  var i = t[n];
  if (i in e)
    throw new Error("package with " + n + " <" + i + "> already defined");
}
function na(e) {
  this.model = e;
}
na.prototype.set = function(e, t, n) {
  if (!ci(t) || !t.length)
    throw new TypeError("property name must be a non-empty string");
  var i = this.getProperty(e, t), r = i && i.name;
  jR(n) ? i ? delete e[r] : delete e.$attrs[Nf(t)] : i ? r in e ? e[r] = n : j_(e, i, n) : e.$attrs[Nf(t)] = n;
};
na.prototype.get = function(e, t) {
  var n = this.getProperty(e, t);
  if (!n)
    return e.$attrs[Nf(t)];
  var i = n.name;
  return !e[i] && n.isMany && j_(e, n, []), e[i];
};
na.prototype.define = function(e, t, n) {
  if (!n.writable) {
    var i = n.value;
    n = G({}, n, {
      get: function() {
        return i;
      }
    }), delete n.value;
  }
  Object.defineProperty(e, t, n);
};
na.prototype.defineDescriptor = function(e, t) {
  this.define(e, "$descriptor", { value: t });
};
na.prototype.defineModel = function(e, t) {
  this.define(e, "$model", { value: t });
};
na.prototype.getProperty = function(e, t) {
  var n = this.model, i = n.getPropertyDescriptor(e, t);
  if (i)
    return i;
  if (t.includes(":"))
    return null;
  const r = n.config.strict;
  if (typeof r < "u") {
    const o = new TypeError(`unknown property <${t}> on <${e.$type}>`);
    if (r)
      throw o;
    typeof console < "u" && console.warn(o);
  }
  return null;
};
function jR(e) {
  return typeof e > "u";
}
function j_(e, t, n) {
  Object.defineProperty(e, t.name, {
    enumerable: !t.isReference,
    writable: !0,
    value: n,
    configurable: !0
  });
}
function Nf(e) {
  return e.replace(/^:/, "");
}
function Mi(e, t = {}) {
  this.properties = new na(this), this.factory = new L_(this, this.properties), this.registry = new fo(e, this.properties), this.typeCache = {}, this.config = t;
}
Mi.prototype.create = function(e, t) {
  var n = this.getType(e);
  if (!n)
    throw new Error("unknown type <" + e + ">");
  return new n(t);
};
Mi.prototype.getType = function(e) {
  var t = this.typeCache, n = ci(e) ? e : e.ns.name, i = t[n];
  return i || (e = this.registry.getEffectiveDescriptor(n), i = t[n] = this.factory.createType(e)), i;
};
Mi.prototype.createAny = function(e, t, n) {
  var i = Vn(e), r = {
    $type: e,
    $instanceOf: function(a) {
      return a === this.$type;
    },
    get: function(a) {
      return this[a];
    },
    set: function(a, c) {
      uS(this, [a], c);
    }
  }, o = {
    name: e,
    isGeneric: !0,
    ns: {
      prefix: i.prefix,
      localName: i.localName,
      uri: t
    }
  };
  return this.properties.defineDescriptor(r, o), this.properties.defineModel(r, this), this.properties.define(r, "get", { enumerable: !1, writable: !0 }), this.properties.define(r, "set", { enumerable: !1, writable: !0 }), this.properties.define(r, "$parent", { enumerable: !1, writable: !0 }), this.properties.define(r, "$instanceOf", { enumerable: !1, writable: !0 }), z(n, function(a, c) {
    yn(a) && a.value !== void 0 ? r[a.name] = a.value : r[c] = a;
  }), r;
};
Mi.prototype.getPackage = function(e) {
  return this.registry.getPackage(e);
};
Mi.prototype.getPackages = function() {
  return this.registry.getPackages();
};
Mi.prototype.getElementDescriptor = function(e) {
  return e.$descriptor;
};
Mi.prototype.hasType = function(e, t) {
  t === void 0 && (t = e, e = this);
  var n = e.$model.getElementDescriptor(e);
  return t in n.allTypesByName;
};
Mi.prototype.getPropertyDescriptor = function(e, t) {
  return this.getElementDescriptor(e).propertiesByName[t];
};
Mi.prototype.getTypeDescriptor = function(e) {
  return this.registry.typeMap[e];
};
var ig = String.fromCharCode, FR = Object.prototype.hasOwnProperty, HR = /&#(\d+);|&#x([0-9a-f]+);|&(\w+);/ig, Bs = {
  amp: "&",
  apos: "'",
  gt: ">",
  lt: "<",
  quot: '"'
};
Object.keys(Bs).forEach(function(e) {
  Bs[e.toUpperCase()] = Bs[e];
});
function zR(e, t, n, i) {
  return i ? FR.call(Bs, i) ? Bs[i] : "&" + i + ";" : ig(t || parseInt(n, 16));
}
function $o(e) {
  return e.length > 3 && e.indexOf("&") !== -1 ? e.replace(HR, zR) : e;
}
var VR = "http://www.w3.org/2001/XMLSchema-instance", WR = "xsi", rg = "xsi:type", og = "non-whitespace outside of root node";
function Sa(e) {
  return new Error(e);
}
function ag(e) {
  return "missing namespace for prefix <" + e + ">";
}
function al(e) {
  return {
    get: e,
    enumerable: !0
  };
}
function GR(e) {
  var t = {}, n;
  for (n in e)
    t[n] = e[n];
  return t;
}
function Bf(e) {
  return e + "$uri";
}
function UR(e) {
  var t = {}, n, i;
  for (n in e)
    i = e[n], t[i] = i, t[Bf(i)] = n;
  return t;
}
function sg() {
  return { line: 0, column: 0 };
}
function YR(e) {
  throw e;
}
function F_(e) {
  if (!this)
    return new F_(e);
  var t = e && e.proxy, n, i, r, o, a = YR, c, l, u, d, f = sg, y = !1, g = !1, _ = null, x = !1, w;
  function D(P) {
    P instanceof Error || (P = Sa(P)), _ = P, a(P, f);
  }
  function O(P) {
    c && (P instanceof Error || (P = Sa(P)), c(P, f));
  }
  this.on = function(P, N) {
    if (typeof N != "function")
      throw Sa("required args <name, cb>");
    switch (P) {
      case "openTag":
        i = N;
        break;
      case "text":
        n = N;
        break;
      case "closeTag":
        r = N;
        break;
      case "error":
        a = N;
        break;
      case "warn":
        c = N;
        break;
      case "cdata":
        o = N;
        break;
      case "attention":
        d = N;
        break;
      case "question":
        u = N;
        break;
      case "comment":
        l = N;
        break;
      default:
        throw Sa("unsupported event: " + P);
    }
    return this;
  }, this.ns = function(P) {
    if (typeof P > "u" && (P = {}), typeof P != "object")
      throw Sa("required args <nsMap={}>");
    var N = {}, j;
    for (j in P)
      N[j] = P[j];
    return N[VR] = WR, g = !0, w = N, this;
  }, this.parse = function(P) {
    if (typeof P != "string")
      throw Sa("required args <xml=string>");
    return _ = null, k(P), f = sg, x = !1, _;
  }, this.stop = function() {
    x = !0;
  };
  function k(P) {
    var N = g ? [] : null, j = g ? UR(w) : null, W, $ = [], Z = 0, X = !1, V = !1, ae = 0, ie = 0, Ae, Rt, it, Ve, Zt, an, Pt, Kt, oe, se = "", fe = 0, ct;
    function Lt() {
      if (ct !== null)
        return ct;
      var Ne, I, E, C = g && j.xmlns, F = g && y ? [] : null, K = fe, ne = se, ke = ne.length, Je, Ee, at, Mt, ht, In = {}, Ii = {}, _n, Be, ft;
      e:
        for (; K < ke; K++)
          if (_n = !1, Be = ne.charCodeAt(K), !(Be === 32 || Be < 14 && Be > 8)) {
            for ((Be < 65 || Be > 122 || Be > 90 && Be < 97) && Be !== 95 && Be !== 58 && (O("illegal first char attribute name"), _n = !0), ft = K + 1; ft < ke; ft++)
              if (Be = ne.charCodeAt(ft), !(Be > 96 && Be < 123 || Be > 64 && Be < 91 || Be > 47 && Be < 59 || Be === 46 || // '.'
              Be === 45 || // '-'
              Be === 95)) {
                if (Be === 32 || Be < 14 && Be > 8) {
                  O("missing attribute value"), K = ft;
                  continue e;
                }
                if (Be === 61)
                  break;
                O("illegal attribute name char"), _n = !0;
              }
            if (ht = ne.substring(K, ft), ht === "xmlns:xmlns" && (O("illegal declaration of xmlns"), _n = !0), Be = ne.charCodeAt(ft + 1), Be === 34)
              ft = ne.indexOf('"', K = ft + 2), ft === -1 && (ft = ne.indexOf("'", K), ft !== -1 && (O("attribute value quote missmatch"), _n = !0));
            else if (Be === 39)
              ft = ne.indexOf("'", K = ft + 2), ft === -1 && (ft = ne.indexOf('"', K), ft !== -1 && (O("attribute value quote missmatch"), _n = !0));
            else
              for (O("missing attribute value quotes"), _n = !0, ft = ft + 1; ft < ke && (Be = ne.charCodeAt(ft + 1), !(Be === 32 || Be < 14 && Be > 8)); ft++)
                ;
            for (ft === -1 && (O("missing closing quotes"), ft = ke, _n = !0), _n || (at = ne.substring(K, ft)), K = ft; ft + 1 < ke && (Be = ne.charCodeAt(ft + 1), !(Be === 32 || Be < 14 && Be > 8)); ft++)
              K === ft && (O("illegal character after attribute end"), _n = !0);
            if (K = ft + 1, _n)
              continue e;
            if (ht in Ii) {
              O("attribute <" + ht + "> already defined");
              continue;
            }
            if (Ii[ht] = !0, !g) {
              In[ht] = at;
              continue;
            }
            if (y) {
              if (Ee = ht === "xmlns" ? "xmlns" : ht.charCodeAt(0) === 120 && ht.substr(0, 6) === "xmlns:" ? ht.substr(6) : null, Ee !== null) {
                if (Ne = $o(at), I = Bf(Ee), Mt = w[Ne], !Mt) {
                  if (Ee === "xmlns" || I in j && j[I] !== Ne)
                    do
                      Mt = "ns" + Z++;
                    while (typeof j[Mt] < "u");
                  else
                    Mt = Ee;
                  w[Ne] = Mt;
                }
                j[Ee] !== Mt && (Je || (j = GR(j), Je = !0), j[Ee] = Mt, Ee === "xmlns" && (j[Bf(Mt)] = Ne, C = Mt), j[I] = Ne), In[ht] = at;
                continue;
              }
              F.push(ht, at);
              continue;
            }
            if (Be = ht.indexOf(":"), Be === -1) {
              In[ht] = at;
              continue;
            }
            if (!(E = j[ht.substring(0, Be)])) {
              O(ag(ht.substring(0, Be)));
              continue;
            }
            ht = C === E ? ht.substr(Be + 1) : E + ht.substr(Be), ht === rg && (Be = at.indexOf(":"), Be !== -1 ? (E = at.substring(0, Be), E = j[E] || E, at = E + at.substring(Be)) : at = C + ":" + at), In[ht] = at;
          }
      if (y)
        for (K = 0, ke = F.length; K < ke; K++) {
          if (ht = F[K++], at = F[K], Be = ht.indexOf(":"), Be !== -1) {
            if (!(E = j[ht.substring(0, Be)])) {
              O(ag(ht.substring(0, Be)));
              continue;
            }
            ht = C === E ? ht.substr(Be + 1) : E + ht.substr(Be), ht === rg && (Be = at.indexOf(":"), Be !== -1 ? (E = at.substring(0, Be), E = j[E] || E, at = E + at.substring(Be)) : at = C + ":" + at);
          }
          In[ht] = at;
        }
      return ct = In;
    }
    function Et() {
      for (var Ne = /(\r\n|\r|\n)/g, I = 0, E = 0, C = 0, F = ie, K, ne; ae >= C && (K = Ne.exec(P), !(!K || (F = K[0].length + K.index, F > ae))); )
        I += 1, C = F;
      return ae == -1 ? (E = F, ne = P.substring(ie)) : ie === 0 ? ne = P.substring(ie, ae) : (E = ae - C, ne = ie == -1 ? P.substring(ae) : P.substring(ae, ie + 1)), {
        data: ne,
        line: I,
        column: E
      };
    }
    for (f = Et, t && (oe = Object.create({}, {
      name: al(function() {
        return Pt;
      }),
      originalName: al(function() {
        return Kt;
      }),
      attrs: al(Lt),
      ns: al(function() {
        return j;
      })
    })); ie !== -1; ) {
      if (P.charCodeAt(ie) === 60 ? ae = ie : ae = P.indexOf("<", ie), ae === -1) {
        if ($.length)
          return D("unexpected end of file");
        if (ie === 0)
          return D("missing start tag");
        ie < P.length && P.substring(ie).trim() && O(og);
        return;
      }
      if (ie !== ae) {
        if ($.length) {
          if (n && (n(P.substring(ie, ae), $o, f), x))
            return;
        } else if (P.substring(ie, ae).trim() && (O(og), x))
          return;
      }
      if (Ve = P.charCodeAt(ae + 1), Ve === 33) {
        if (it = P.charCodeAt(ae + 2), it === 91 && P.substr(ae + 3, 6) === "CDATA[") {
          if (ie = P.indexOf("]]>", ae), ie === -1)
            return D("unclosed cdata");
          if (o && (o(P.substring(ae + 9, ie), f), x))
            return;
          ie += 3;
          continue;
        }
        if (it === 45 && P.charCodeAt(ae + 3) === 45) {
          if (ie = P.indexOf("-->", ae), ie === -1)
            return D("unclosed comment");
          if (l && (l(P.substring(ae + 4, ie), $o, f), x))
            return;
          ie += 3;
          continue;
        }
      }
      if (Ve === 63) {
        if (ie = P.indexOf("?>", ae), ie === -1)
          return D("unclosed question");
        if (u && (u(P.substring(ae, ie + 2), f), x))
          return;
        ie += 2;
        continue;
      }
      for (Ae = ae + 1; ; Ae++) {
        if (Zt = P.charCodeAt(Ae), isNaN(Zt))
          return ie = -1, D("unclosed tag");
        if (Zt === 34)
          it = P.indexOf('"', Ae + 1), Ae = it !== -1 ? it : Ae;
        else if (Zt === 39)
          it = P.indexOf("'", Ae + 1), Ae = it !== -1 ? it : Ae;
        else if (Zt === 62) {
          ie = Ae;
          break;
        }
      }
      if (Ve === 33) {
        if (d && (d(P.substring(ae, ie + 1), $o, f), x))
          return;
        ie += 1;
        continue;
      }
      if (ct = {}, Ve === 47) {
        if (X = !1, V = !0, !$.length)
          return D("missing open tag");
        if (Ae = Pt = $.pop(), it = ae + 2 + Ae.length, P.substring(ae + 2, it) !== Ae)
          return D("closing tag mismatch");
        for (; it < ie; it++)
          if (Ve = P.charCodeAt(it), !(Ve === 32 || Ve > 8 && Ve < 14))
            return D("close tag");
      } else {
        if (P.charCodeAt(ie - 1) === 47 ? (Ae = Pt = P.substring(ae + 1, ie - 1), X = !0, V = !0) : (Ae = Pt = P.substring(ae + 1, ie), X = !0, V = !1), !(Ve > 96 && Ve < 123 || Ve > 64 && Ve < 91 || Ve === 95 || Ve === 58))
          return D("illegal first char nodeName");
        for (it = 1, Rt = Ae.length; it < Rt; it++)
          if (Ve = Ae.charCodeAt(it), !(Ve > 96 && Ve < 123 || Ve > 64 && Ve < 91 || Ve > 47 && Ve < 59 || Ve === 45 || Ve === 95 || Ve == 46)) {
            if (Ve === 32 || Ve < 14 && Ve > 8) {
              Pt = Ae.substring(0, it), ct = null;
              break;
            }
            return D("invalid nodeName");
          }
        V || $.push(Pt);
      }
      if (g) {
        if (W = j, X && (V || N.push(W), ct === null && (y = Ae.indexOf("xmlns", it) !== -1) && (fe = it, se = Ae, Lt(), y = !1)), Kt = Pt, Ve = Pt.indexOf(":"), Ve !== -1) {
          if (an = j[Pt.substring(0, Ve)], !an)
            return D("missing namespace on <" + Kt + ">");
          Pt = Pt.substr(Ve + 1);
        } else
          an = j.xmlns;
        an && (Pt = an + ":" + Pt);
      }
      if (X && (fe = it, se = Ae, i && (t ? i(oe, $o, V, f) : i(Pt, Lt, $o, V, f), x)))
        return;
      if (V) {
        if (r && (r(t ? oe : Pt, $o, X, f), x))
          return;
        g && (X ? j = W : j = N.pop());
      }
      ie += 1;
    }
  }
}
function H_(e) {
  return e.xml && e.xml.tagAlias === "lowerCase";
}
var KR = {
  xsi: "http://www.w3.org/2001/XMLSchema-instance",
  xml: "http://www.w3.org/XML/1998/namespace"
}, bu = "xsi:type";
function z_(e) {
  return e.xml && e.xml.serialize;
}
function V_(e) {
  return z_(e) === bu;
}
function qR(e) {
  return z_(e) === "property";
}
function XR(e) {
  return e.charAt(0).toUpperCase() + e.slice(1);
}
function W_(e, t) {
  return H_(t) ? e.prefix + ":" + XR(e.localName) : e.name;
}
function ZR(e, t) {
  var n = e.name, i = e.localName, r = t.xml && t.xml.typePrefix;
  return r && i.indexOf(r) === 0 ? e.prefix + ":" + i.slice(r.length) : n;
}
function JR(e, t) {
  var n = Vn(e), i = t.getPackage(n.prefix);
  return ZR(n, i);
}
function co(e) {
  return new Error(e);
}
function kr(e) {
  return e.$descriptor;
}
function QR(e) {
  G(this, e), this.elementsById = {}, this.references = [], this.warnings = [], this.addReference = function(t) {
    this.references.push(t);
  }, this.addElement = function(t) {
    if (!t)
      throw co("expected element");
    var n = this.elementsById, i = kr(t), r = i.idProperty, o;
    if (r && (o = t.get(r.name), o)) {
      if (!/^([a-z][\w-.]*:)?[a-z_][\w-.]*$/i.test(o))
        throw new Error("illegal ID <" + o + ">");
      if (n[o])
        throw co("duplicate ID <" + o + ">");
      n[o] = t;
    }
  }, this.addWarning = function(t) {
    this.warnings.push(t);
  };
}
function rc() {
}
rc.prototype.handleEnd = function() {
};
rc.prototype.handleText = function() {
};
rc.prototype.handleNode = function() {
};
function Rd() {
}
Rd.prototype = Object.create(rc.prototype);
Rd.prototype.handleNode = function() {
  return this;
};
function Ya() {
}
Ya.prototype = Object.create(rc.prototype);
Ya.prototype.handleText = function(e) {
  this.body = (this.body || "") + e;
};
function oc(e, t) {
  this.property = e, this.context = t;
}
oc.prototype = Object.create(Ya.prototype);
oc.prototype.handleNode = function(e) {
  if (this.element)
    throw co("expected no sub nodes");
  return this.element = this.createReference(e), this;
};
oc.prototype.handleEnd = function() {
  this.element.id = this.body;
};
oc.prototype.createReference = function(e) {
  return {
    property: this.property.ns.name,
    id: ""
  };
};
function Cd(e, t) {
  this.element = t, this.propertyDesc = e;
}
Cd.prototype = Object.create(Ya.prototype);
Cd.prototype.handleEnd = function() {
  var e = this.body || "", t = this.element, n = this.propertyDesc;
  e = Sd(n.type, e), n.isMany ? t.get(n.name).push(e) : t.set(n.name, e);
};
function xu() {
}
xu.prototype = Object.create(Ya.prototype);
xu.prototype.handleNode = function(e) {
  var t = this, n = this.element;
  return n ? t = this.handleChild(e) : (n = this.element = this.createElement(e), this.context.addElement(n)), t;
};
function Wn(e, t, n) {
  this.model = e, this.type = e.getType(t), this.context = n;
}
Wn.prototype = Object.create(xu.prototype);
Wn.prototype.addReference = function(e) {
  this.context.addReference(e);
};
Wn.prototype.handleText = function(e) {
  var t = this.element, n = kr(t), i = n.bodyProperty;
  if (!i)
    throw co("unexpected body text <" + e + ">");
  Ya.prototype.handleText.call(this, e);
};
Wn.prototype.handleEnd = function() {
  var e = this.body, t = this.element, n = kr(t), i = n.bodyProperty;
  i && e !== void 0 && (e = Sd(i.type, e), t.set(i.name, e));
};
Wn.prototype.createElement = function(e) {
  var t = e.attributes, n = this.type, i = kr(n), r = this.context, o = new n({}), a = this.model, c;
  return z(t, function(l, u) {
    var d = i.propertiesByName[u], f;
    d && d.isReference ? d.isMany ? (f = l.split(" "), z(f, function(y) {
      r.addReference({
        element: o,
        property: d.ns.name,
        id: y
      });
    })) : r.addReference({
      element: o,
      property: d.ns.name,
      id: l
    }) : (d ? l = Sd(d.type, l) : u !== "xmlns" && (c = Vn(u, i.ns.prefix), a.getPackage(c.prefix) && r.addWarning({
      message: "unknown attribute <" + u + ">",
      element: o,
      property: u,
      value: l
    })), o.set(u, l));
  }), o;
};
Wn.prototype.getPropertyForNode = function(e) {
  var t = e.name, n = Vn(t), i = this.type, r = this.model, o = kr(i), a = n.name, c = o.propertiesByName[a], l, u;
  if (c && !c.isAttr)
    return V_(c) && (l = e.attributes[bu], l) ? (l = JR(l, r), u = r.getType(l), G({}, c, {
      effectiveType: kr(u).name
    })) : c;
  var d = r.getPackage(n.prefix);
  if (d) {
    if (l = W_(n, d), u = r.getType(l), c = gt(o.properties, function(f) {
      return !f.isVirtual && !f.isReference && !f.isAttribute && u.hasType(f.type);
    }), c)
      return G({}, c, {
        effectiveType: kr(u).name
      });
  } else if (c = gt(o.properties, function(f) {
    return !f.isReference && !f.isAttribute && f.type === "Element";
  }), c)
    return c;
  throw co("unrecognized element <" + n.name + ">");
};
Wn.prototype.toString = function() {
  return "ElementDescriptor[" + kr(this.type).name + "]";
};
Wn.prototype.valueHandler = function(e, t) {
  return new Cd(e, t);
};
Wn.prototype.referenceHandler = function(e) {
  return new oc(e, this.context);
};
Wn.prototype.handler = function(e) {
  return e === "Element" ? new $a(this.model, e, this.context) : new Wn(this.model, e, this.context);
};
Wn.prototype.handleChild = function(e) {
  var t, n, i, r;
  if (t = this.getPropertyForNode(e), i = this.element, n = t.effectiveType || t.type, $_(n))
    return this.valueHandler(t, i);
  t.isReference ? r = this.referenceHandler(t).handleNode(e) : r = this.handler(n).handleNode(e);
  var o = r.element;
  return o !== void 0 && (t.isMany ? i.get(t.name).push(o) : i.set(t.name, o), t.isReference ? (G(o, {
    element: i
  }), this.context.addReference(o)) : o.$parent = i), r;
};
function Ad(e, t, n) {
  Wn.call(this, e, t, n);
}
Ad.prototype = Object.create(Wn.prototype);
Ad.prototype.createElement = function(e) {
  var t = e.name, n = Vn(t), i = this.model, r = this.type, o = i.getPackage(n.prefix), a = o && W_(n, o) || t;
  if (!r.hasType(a))
    throw co("unexpected element <" + e.originalName + ">");
  return Wn.prototype.createElement.call(this, e);
};
function $a(e, t, n) {
  this.model = e, this.context = n;
}
$a.prototype = Object.create(xu.prototype);
$a.prototype.createElement = function(e) {
  var t = e.name, n = Vn(t), i = n.prefix, r = e.ns[i + "$uri"], o = e.attributes;
  return this.model.createAny(t, r, o);
};
$a.prototype.handleChild = function(e) {
  var t = new $a(this.model, "Element", this.context).handleNode(e), n = this.element, i = t.element, r;
  return i !== void 0 && (r = n.$children = n.$children || [], r.push(i), i.$parent = n), t;
};
$a.prototype.handleEnd = function() {
  this.body && (this.element.$body = this.body);
};
function Pd(e) {
  e instanceof Mi && (e = {
    model: e
  }), G(this, { lax: !1 }, e);
}
Pd.prototype.fromXML = function(e, t, n) {
  var i = t.rootHandler;
  t instanceof Wn ? (i = t, t = {}) : typeof t == "string" ? (i = this.handler(t), t = {}) : typeof i == "string" && (i = this.handler(i));
  var r = this.model, o = this.lax, a = new QR(G({}, t, { rootHandler: i })), c = new F_({ proxy: !0 }), l = eC();
  i.context = a, l.push(i);
  function u(N, j, W) {
    var $ = j(), Z = $.line, X = $.column, V = $.data;
    V.charAt(0) === "<" && V.indexOf(" ") !== -1 && (V = V.slice(0, V.indexOf(" ")) + ">");
    var ae = "unparsable content " + (V ? V + " " : "") + `detected
	line: ` + Z + `
	column: ` + X + `
	nested error: ` + N.message;
    if (W)
      return a.addWarning({
        message: ae,
        error: N
      }), !0;
    throw co(ae);
  }
  function d(N, j) {
    return u(N, j, !0);
  }
  function f() {
    var N = a.elementsById, j = a.references, W, $;
    for (W = 0; $ = j[W]; W++) {
      var Z = $.element, X = N[$.id], V = kr(Z).propertiesByName[$.property];
      if (X || a.addWarning({
        message: "unresolved reference <" + $.id + ">",
        element: $.element,
        property: $.property,
        value: $.id
      }), V.isMany) {
        var ae = Z.get(V.name), ie = ae.indexOf($);
        ie === -1 && (ie = ae.length), X ? ae[ie] = X : ae.splice(ie, 1);
      } else
        Z.set(V.name, X);
    }
  }
  function y() {
    l.pop().handleEnd();
  }
  var g = /^<\?xml /i, _ = / encoding="([^"]+)"/i, x = /^utf-8$/i;
  function w(N) {
    if (g.test(N)) {
      var j = _.exec(N), W = j && j[1];
      !W || x.test(W) || a.addWarning({
        message: "unsupported document encoding <" + W + ">, falling back to UTF-8"
      });
    }
  }
  function D(N, j) {
    var W = l.peek();
    try {
      l.push(W.handleNode(N));
    } catch ($) {
      u($, j, o) && l.push(new Rd());
    }
  }
  function O(N, j) {
    try {
      l.peek().handleText(N);
    } catch (W) {
      d(W, j);
    }
  }
  function k(N, j) {
    N.trim() && O(N, j);
  }
  var P = r.getPackages().reduce(function(N, j) {
    return N[j.uri] = j.prefix, N;
  }, {
    "http://www.w3.org/XML/1998/namespace": "xml"
    // add default xml ns
  });
  return c.ns(P).on("openTag", function(N, j, W, $) {
    var Z = N.attrs || {}, X = Object.keys(Z).reduce(function(ae, ie) {
      var Ae = j(Z[ie]);
      return ae[ie] = Ae, ae;
    }, {}), V = {
      name: N.name,
      originalName: N.originalName,
      attributes: X,
      ns: N.ns
    };
    D(V, $);
  }).on("question", w).on("closeTag", y).on("cdata", O).on("text", function(N, j, W) {
    k(j(N), W);
  }).on("error", u).on("warn", d), new Promise(function(N, j) {
    var W;
    try {
      c.parse(e), f();
    } catch (ae) {
      W = ae;
    }
    var $ = i.element;
    !W && !$ && (W = co("failed to parse document as <" + i.type.$descriptor.name + ">"));
    var Z = a.warnings, X = a.references, V = a.elementsById;
    return W ? (W.warnings = Z, j(W)) : N({
      rootElement: $,
      elementsById: V,
      references: X,
      warnings: Z
    });
  });
};
Pd.prototype.handler = function(e) {
  return new Ad(this.model, e);
};
function eC() {
  var e = [];
  return Object.defineProperty(e, "peek", {
    value: function() {
      return this[this.length - 1];
    }
  }), e;
}
var tC = `<?xml version="1.0" encoding="UTF-8"?>
`, nC = /<|>|'|"|&|\n\r|\n/g, G_ = /<|>|&/g;
function iC(e) {
  var t = {}, n = {}, i = {}, r = [], o = [];
  this.byUri = function(a) {
    return n[a] || e && e.byUri(a);
  }, this.add = function(a, c) {
    n[a.uri] = a, c ? r.push(a) : o.push(a), this.mapPrefix(a.prefix, a.uri);
  }, this.uriByPrefix = function(a) {
    return t[a || "xmlns"];
  }, this.mapPrefix = function(a, c) {
    t[a || "xmlns"] = c;
  }, this.getNSKey = function(a) {
    return a.prefix !== void 0 ? a.uri + "|" + a.prefix : a.uri;
  }, this.logUsed = function(a) {
    var c = a.uri, l = this.getNSKey(a);
    i[l] = this.byUri(c), e && e.logUsed(a);
  }, this.getUsed = function(a) {
    function c(d) {
      var f = l.getNSKey(d);
      return i[f];
    }
    var l = this, u = [].concat(r, o);
    return u.filter(c);
  };
}
function rC(e) {
  return e.charAt(0).toLowerCase() + e.slice(1);
}
function oC(e, t) {
  return H_(t) ? rC(e) : e;
}
function U_(e, t) {
  e.super_ = t, e.prototype = Object.create(t.prototype, {
    constructor: {
      value: e,
      enumerable: !1,
      writable: !0,
      configurable: !0
    }
  });
}
function Y_(e) {
  return ci(e) ? e : (e.prefix ? e.prefix + ":" : "") + e.localName;
}
function aC(e) {
  return e.getUsed().filter(function(t) {
    return t.prefix !== "xml";
  }).map(function(t) {
    var n = "xmlns" + (t.prefix ? ":" + t.prefix : "");
    return { name: n, value: t.uri };
  });
}
function sC(e, t) {
  return t.isGeneric ? G({ localName: t.ns.localName }, e) : G({ localName: oC(t.ns.localName, t.$pkg) }, e);
}
function cC(e, t) {
  return G({ localName: t.ns.localName }, e);
}
function lC(e) {
  var t = e.$descriptor;
  return et(t.properties, function(n) {
    var i = n.name;
    if (n.isVirtual || !Zn(e, i))
      return !1;
    var r = e[i];
    return r === n.default || r === null ? !1 : n.isMany ? r.length : !0;
  });
}
var uC = {
  "\n": "#10",
  "\n\r": "#10",
  '"': "#34",
  "'": "#39",
  "<": "#60",
  ">": "#62",
  "&": "#38"
}, pC = {
  "<": "lt",
  ">": "gt",
  "&": "amp"
};
function K_(e, t, n) {
  return e = ci(e) ? e : "" + e, e.replace(t, function(i) {
    return "&" + n[i] + ";";
  });
}
function fC(e) {
  return K_(e, nC, uC);
}
function dC(e) {
  return K_(e, G_, pC);
}
function hC(e) {
  return et(e, function(t) {
    return t.isAttr;
  });
}
function mC(e) {
  return et(e, function(t) {
    return !t.isAttr;
  });
}
function Td(e) {
  this.tagName = e;
}
Td.prototype.build = function(e) {
  return this.element = e, this;
};
Td.prototype.serializeTo = function(e) {
  e.appendIndent().append("<" + this.tagName + ">" + this.element.id + "</" + this.tagName + ">").appendNewLine();
};
function Xo() {
}
Xo.prototype.serializeValue = Xo.prototype.serializeTo = function(e) {
  e.append(
    this.escape ? dC(this.value) : this.value
  );
};
Xo.prototype.build = function(e, t) {
  return this.value = t, e.type === "String" && t.search(G_) !== -1 && (this.escape = !0), this;
};
function kd(e) {
  this.tagName = e;
}
U_(kd, Xo);
kd.prototype.serializeTo = function(e) {
  e.appendIndent().append("<" + this.tagName + ">"), this.serializeValue(e), e.append("</" + this.tagName + ">").appendNewLine();
};
function Ht(e, t) {
  this.body = [], this.attrs = [], this.parent = e, this.propertyDescriptor = t;
}
Ht.prototype.build = function(e) {
  this.element = e;
  var t = e.$descriptor, n = this.propertyDescriptor, i, r, o = t.isGeneric;
  return o ? i = this.parseGeneric(e) : i = this.parseNsAttributes(e), n ? this.ns = this.nsPropertyTagName(n) : this.ns = this.nsTagName(t), this.tagName = this.addTagName(this.ns), o || (r = lC(e), this.parseAttributes(hC(r)), this.parseContainments(mC(r))), this.parseGenericAttributes(e, i), this;
};
Ht.prototype.nsTagName = function(e) {
  var t = this.logNamespaceUsed(e.ns);
  return sC(t, e);
};
Ht.prototype.nsPropertyTagName = function(e) {
  var t = this.logNamespaceUsed(e.ns);
  return cC(t, e);
};
Ht.prototype.isLocalNs = function(e) {
  return e.uri === this.ns.uri;
};
Ht.prototype.nsAttributeName = function(e) {
  var t;
  if (ci(e) ? t = Vn(e) : t = e.ns, e.inherited)
    return { localName: t.localName };
  var n = this.logNamespaceUsed(t);
  return this.getNamespaces().logUsed(n), this.isLocalNs(n) ? { localName: t.localName } : G({ localName: t.localName }, n);
};
Ht.prototype.parseGeneric = function(e) {
  var t = this, n = this.body, i = [];
  return z(e, function(r, o) {
    var a;
    o === "$body" ? n.push(new Xo().build({ type: "String" }, r)) : o === "$children" ? z(r, function(c) {
      n.push(new Ht(t).build(c));
    }) : o.indexOf("$") !== 0 && (a = t.parseNsAttribute(e, o, r), a && i.push({ name: o, value: r }));
  }), i;
};
Ht.prototype.parseNsAttribute = function(e, t, n) {
  var i = e.$model, r = Vn(t), o;
  if (r.prefix === "xmlns" && (o = { prefix: r.localName, uri: n }), !r.prefix && r.localName === "xmlns" && (o = { uri: n }), !o)
    return {
      name: t,
      value: n
    };
  if (i && i.getPackage(n))
    this.logNamespace(o, !0, !0);
  else {
    var a = this.logNamespaceUsed(o, !0);
    this.getNamespaces().logUsed(a);
  }
};
Ht.prototype.parseNsAttributes = function(e, t) {
  var n = this, i = e.$attrs, r = [];
  return z(i, function(o, a) {
    var c = n.parseNsAttribute(e, a, o);
    c && r.push(c);
  }), r;
};
Ht.prototype.parseGenericAttributes = function(e, t) {
  var n = this;
  z(t, function(i) {
    if (i.name !== bu)
      try {
        n.addAttribute(n.nsAttributeName(i.name), i.value);
      } catch (r) {
        console.warn(
          "missing namespace information for ",
          i.name,
          "=",
          i.value,
          "on",
          e,
          r
        );
      }
  });
};
Ht.prototype.parseContainments = function(e) {
  var t = this, n = this.body, i = this.element;
  z(e, function(r) {
    var o = i.get(r.name), a = r.isReference, c = r.isMany;
    if (c || (o = [o]), r.isBody)
      n.push(new Xo().build(r, o[0]));
    else if ($_(r.type))
      z(o, function(d) {
        n.push(new kd(t.addTagName(t.nsPropertyTagName(r))).build(r, d));
      });
    else if (a)
      z(o, function(d) {
        n.push(new Td(t.addTagName(t.nsPropertyTagName(r))).build(d));
      });
    else {
      var l = V_(r), u = qR(r);
      z(o, function(d) {
        var f;
        l ? f = new Eu(t, r) : u ? f = new Ht(t, r) : f = new Ht(t), n.push(f.build(d));
      });
    }
  });
};
Ht.prototype.getNamespaces = function(e) {
  var t = this.namespaces, n = this.parent, i;
  return t || (i = n && n.getNamespaces(), e || !i ? this.namespaces = t = new iC(i) : t = i), t;
};
Ht.prototype.logNamespace = function(e, t, n) {
  var i = this.getNamespaces(n), r = e.uri, o = e.prefix, a = i.byUri(r);
  return (!a || n) && i.add(e, t), i.mapPrefix(o, r), e;
};
Ht.prototype.logNamespaceUsed = function(e, t) {
  var n = this.element, i = n.$model, r = this.getNamespaces(t), o = e.prefix, a = e.uri, c, l, u;
  if (!o && !a)
    return { localName: e.localName };
  if (u = KR[o] || i && (i.getPackage(o) || {}).uri, a = a || u || r.uriByPrefix(o), !a)
    throw new Error("no namespace uri given for prefix <" + o + ">");
  if (e = r.byUri(a), !e) {
    for (c = o, l = 1; r.uriByPrefix(c); )
      c = o + "_" + l++;
    e = this.logNamespace({ prefix: c, uri: a }, u === a);
  }
  return o && r.mapPrefix(o, a), e;
};
Ht.prototype.parseAttributes = function(e) {
  var t = this, n = this.element;
  z(e, function(i) {
    var r = n.get(i.name);
    if (i.isReference)
      if (!i.isMany)
        r = r.id;
      else {
        var o = [];
        z(r, function(a) {
          o.push(a.id);
        }), r = o.join(" ");
      }
    t.addAttribute(t.nsAttributeName(i), r);
  });
};
Ht.prototype.addTagName = function(e) {
  var t = this.logNamespaceUsed(e);
  return this.getNamespaces().logUsed(t), Y_(e);
};
Ht.prototype.addAttribute = function(e, t) {
  var n = this.attrs;
  ci(t) && (t = fC(t));
  var i = i_(n, function(o) {
    return o.name.localName === e.localName && o.name.uri === e.uri && o.name.prefix === e.prefix;
  }), r = { name: e, value: t };
  i !== -1 ? n.splice(i, 1, r) : n.push(r);
};
Ht.prototype.serializeAttributes = function(e) {
  var t = this.attrs, n = this.namespaces;
  n && (t = aC(n).concat(t)), z(t, function(i) {
    e.append(" ").append(Y_(i.name)).append('="').append(i.value).append('"');
  });
};
Ht.prototype.serializeTo = function(e) {
  var t = this.body[0], n = t && t.constructor !== Xo;
  e.appendIndent().append("<" + this.tagName), this.serializeAttributes(e), e.append(t ? ">" : " />"), t && (n && e.appendNewLine().indent(), z(this.body, function(i) {
    i.serializeTo(e);
  }), n && e.unindent().appendIndent(), e.append("</" + this.tagName + ">")), e.appendNewLine();
};
function Eu(e, t) {
  Ht.call(this, e, t);
}
U_(Eu, Ht);
Eu.prototype.parseNsAttributes = function(e) {
  var t = Ht.prototype.parseNsAttributes.call(this, e), n = e.$descriptor;
  if (n.name === this.propertyDescriptor.type)
    return t;
  var i = this.typeNs = this.nsTagName(n);
  this.getNamespaces().logUsed(this.typeNs);
  var r = e.$model.getPackage(i.uri), o = r.xml && r.xml.typePrefix || "";
  return this.addAttribute(
    this.nsAttributeName(bu),
    (i.prefix ? i.prefix + ":" : "") + o + n.ns.localName
  ), t;
};
Eu.prototype.isLocalNs = function(e) {
  return e.uri === (this.typeNs || this.ns).uri;
};
function yC() {
  this.value = "", this.write = function(e) {
    this.value += e;
  };
}
function gC(e, t) {
  var n = [""];
  this.append = function(i) {
    return e.write(i), this;
  }, this.appendNewLine = function() {
    return t && e.write(`
`), this;
  }, this.appendIndent = function() {
    return t && e.write(n.join("  ")), this;
  }, this.indent = function() {
    return n.push(""), this;
  }, this.unindent = function() {
    return n.pop(), this;
  };
}
function vC(e) {
  e = G({ format: !1, preamble: !0 }, e || {});
  function t(n, i) {
    var r = i || new yC(), o = new gC(r, e.format);
    if (e.preamble && o.append(tC), new Ht().build(n).serializeTo(o), !i)
      return r.value;
  }
  return {
    toXML: t
  };
}
function wu(e, t) {
  Mi.call(this, e, t);
}
wu.prototype = Object.create(Mi.prototype);
wu.prototype.fromXML = function(e, t, n) {
  ci(t) || (n = t, t = "bpmn:Definitions");
  var i = new Pd(G({ model: this, lax: !0 }, n)), r = i.handler(t);
  return i.fromXML(e, r);
};
wu.prototype.toXML = function(e, t) {
  var n = new vC(t);
  return new Promise(function(i, r) {
    try {
      var o = n.toXML(e);
      return i({
        xml: o
      });
    } catch (a) {
      return r(a);
    }
  });
};
var _C = "BPMN20", bC = "http://www.omg.org/spec/BPMN/20100524/MODEL", xC = "bpmn", EC = [], wC = [
  {
    name: "Interface",
    superClass: [
      "RootElement"
    ],
    properties: [
      {
        name: "name",
        isAttr: !0,
        type: "String"
      },
      {
        name: "operations",
        type: "Operation",
        isMany: !0
      },
      {
        name: "implementationRef",
        isAttr: !0,
        type: "String"
      }
    ]
  },
  {
    name: "Operation",
    superClass: [
      "BaseElement"
    ],
    properties: [
      {
        name: "name",
        isAttr: !0,
        type: "String"
      },
      {
        name: "inMessageRef",
        type: "Message",
        isReference: !0
      },
      {
        name: "outMessageRef",
        type: "Message",
        isReference: !0
      },
      {
        name: "errorRef",
        type: "Error",
        isMany: !0,
        isReference: !0
      },
      {
        name: "implementationRef",
        isAttr: !0,
        type: "String"
      }
    ]
  },
  {
    name: "EndPoint",
    superClass: [
      "RootElement"
    ]
  },
  {
    name: "Auditing",
    superClass: [
      "BaseElement"
    ]
  },
  {
    name: "GlobalTask",
    superClass: [
      "CallableElement"
    ],
    properties: [
      {
        name: "resources",
        type: "ResourceRole",
        isMany: !0
      }
    ]
  },
  {
    name: "Monitoring",
    superClass: [
      "BaseElement"
    ]
  },
  {
    name: "Performer",
    superClass: [
      "ResourceRole"
    ]
  },
  {
    name: "Process",
    superClass: [
      "FlowElementsContainer",
      "CallableElement"
    ],
    properties: [
      {
        name: "processType",
        type: "ProcessType",
        isAttr: !0
      },
      {
        name: "isClosed",
        isAttr: !0,
        type: "Boolean"
      },
      {
        name: "auditing",
        type: "Auditing"
      },
      {
        name: "monitoring",
        type: "Monitoring"
      },
      {
        name: "properties",
        type: "Property",
        isMany: !0
      },
      {
        name: "laneSets",
        isMany: !0,
        replaces: "FlowElementsContainer#laneSets",
        type: "LaneSet"
      },
      {
        name: "flowElements",
        isMany: !0,
        replaces: "FlowElementsContainer#flowElements",
        type: "FlowElement"
      },
      {
        name: "artifacts",
        type: "Artifact",
        isMany: !0
      },
      {
        name: "resources",
        type: "ResourceRole",
        isMany: !0
      },
      {
        name: "correlationSubscriptions",
        type: "CorrelationSubscription",
        isMany: !0
      },
      {
        name: "supports",
        type: "Process",
        isMany: !0,
        isReference: !0
      },
      {
        name: "definitionalCollaborationRef",
        type: "Collaboration",
        isAttr: !0,
        isReference: !0
      },
      {
        name: "isExecutable",
        isAttr: !0,
        type: "Boolean"
      }
    ]
  },
  {
    name: "LaneSet",
    superClass: [
      "BaseElement"
    ],
    properties: [
      {
        name: "lanes",
        type: "Lane",
        isMany: !0
      },
      {
        name: "name",
        isAttr: !0,
        type: "String"
      }
    ]
  },
  {
    name: "Lane",
    superClass: [
      "BaseElement"
    ],
    properties: [
      {
        name: "name",
        isAttr: !0,
        type: "String"
      },
      {
        name: "partitionElementRef",
        type: "BaseElement",
        isAttr: !0,
        isReference: !0
      },
      {
        name: "partitionElement",
        type: "BaseElement"
      },
      {
        name: "flowNodeRef",
        type: "FlowNode",
        isMany: !0,
        isReference: !0
      },
      {
        name: "childLaneSet",
        type: "LaneSet",
        xml: {
          serialize: "xsi:type"
        }
      }
    ]
  },
  {
    name: "GlobalManualTask",
    superClass: [
      "GlobalTask"
    ]
  },
  {
    name: "ManualTask",
    superClass: [
      "Task"
    ]
  },
  {
    name: "UserTask",
    superClass: [
      "Task"
    ],
    properties: [
      {
        name: "renderings",
        type: "Rendering",
        isMany: !0
      },
      {
        name: "implementation",
        isAttr: !0,
        type: "String"
      }
    ]
  },
  {
    name: "Rendering",
    superClass: [
      "BaseElement"
    ]
  },
  {
    name: "HumanPerformer",
    superClass: [
      "Performer"
    ]
  },
  {
    name: "PotentialOwner",
    superClass: [
      "HumanPerformer"
    ]
  },
  {
    name: "GlobalUserTask",
    superClass: [
      "GlobalTask"
    ],
    properties: [
      {
        name: "implementation",
        isAttr: !0,
        type: "String"
      },
      {
        name: "renderings",
        type: "Rendering",
        isMany: !0
      }
    ]
  },
  {
    name: "Gateway",
    isAbstract: !0,
    superClass: [
      "FlowNode"
    ],
    properties: [
      {
        name: "gatewayDirection",
        type: "GatewayDirection",
        default: "Unspecified",
        isAttr: !0
      }
    ]
  },
  {
    name: "EventBasedGateway",
    superClass: [
      "Gateway"
    ],
    properties: [
      {
        name: "instantiate",
        default: !1,
        isAttr: !0,
        type: "Boolean"
      },
      {
        name: "eventGatewayType",
        type: "EventBasedGatewayType",
        isAttr: !0,
        default: "Exclusive"
      }
    ]
  },
  {
    name: "ComplexGateway",
    superClass: [
      "Gateway"
    ],
    properties: [
      {
        name: "activationCondition",
        type: "Expression",
        xml: {
          serialize: "xsi:type"
        }
      },
      {
        name: "default",
        type: "SequenceFlow",
        isAttr: !0,
        isReference: !0
      }
    ]
  },
  {
    name: "ExclusiveGateway",
    superClass: [
      "Gateway"
    ],
    properties: [
      {
        name: "default",
        type: "SequenceFlow",
        isAttr: !0,
        isReference: !0
      }
    ]
  },
  {
    name: "InclusiveGateway",
    superClass: [
      "Gateway"
    ],
    properties: [
      {
        name: "default",
        type: "SequenceFlow",
        isAttr: !0,
        isReference: !0
      }
    ]
  },
  {
    name: "ParallelGateway",
    superClass: [
      "Gateway"
    ]
  },
  {
    name: "RootElement",
    isAbstract: !0,
    superClass: [
      "BaseElement"
    ]
  },
  {
    name: "Relationship",
    superClass: [
      "BaseElement"
    ],
    properties: [
      {
        name: "type",
        isAttr: !0,
        type: "String"
      },
      {
        name: "direction",
        type: "RelationshipDirection",
        isAttr: !0
      },
      {
        name: "source",
        isMany: !0,
        isReference: !0,
        type: "Element"
      },
      {
        name: "target",
        isMany: !0,
        isReference: !0,
        type: "Element"
      }
    ]
  },
  {
    name: "BaseElement",
    isAbstract: !0,
    properties: [
      {
        name: "id",
        isAttr: !0,
        type: "String",
        isId: !0
      },
      {
        name: "documentation",
        type: "Documentation",
        isMany: !0
      },
      {
        name: "extensionDefinitions",
        type: "ExtensionDefinition",
        isMany: !0,
        isReference: !0
      },
      {
        name: "extensionElements",
        type: "ExtensionElements"
      }
    ]
  },
  {
    name: "Extension",
    properties: [
      {
        name: "mustUnderstand",
        default: !1,
        isAttr: !0,
        type: "Boolean"
      },
      {
        name: "definition",
        type: "ExtensionDefinition",
        isAttr: !0,
        isReference: !0
      }
    ]
  },
  {
    name: "ExtensionDefinition",
    properties: [
      {
        name: "name",
        isAttr: !0,
        type: "String"
      },
      {
        name: "extensionAttributeDefinitions",
        type: "ExtensionAttributeDefinition",
        isMany: !0
      }
    ]
  },
  {
    name: "ExtensionAttributeDefinition",
    properties: [
      {
        name: "name",
        isAttr: !0,
        type: "String"
      },
      {
        name: "type",
        isAttr: !0,
        type: "String"
      },
      {
        name: "isReference",
        default: !1,
        isAttr: !0,
        type: "Boolean"
      },
      {
        name: "extensionDefinition",
        type: "ExtensionDefinition",
        isAttr: !0,
        isReference: !0
      }
    ]
  },
  {
    name: "ExtensionElements",
    properties: [
      {
        name: "valueRef",
        isAttr: !0,
        isReference: !0,
        type: "Element"
      },
      {
        name: "values",
        type: "Element",
        isMany: !0
      },
      {
        name: "extensionAttributeDefinition",
        type: "ExtensionAttributeDefinition",
        isAttr: !0,
        isReference: !0
      }
    ]
  },
  {
    name: "Documentation",
    superClass: [
      "BaseElement"
    ],
    properties: [
      {
        name: "text",
        type: "String",
        isBody: !0
      },
      {
        name: "textFormat",
        default: "text/plain",
        isAttr: !0,
        type: "String"
      }
    ]
  },
  {
    name: "Event",
    isAbstract: !0,
    superClass: [
      "FlowNode",
      "InteractionNode"
    ],
    properties: [
      {
        name: "properties",
        type: "Property",
        isMany: !0
      }
    ]
  },
  {
    name: "IntermediateCatchEvent",
    superClass: [
      "CatchEvent"
    ]
  },
  {
    name: "IntermediateThrowEvent",
    superClass: [
      "ThrowEvent"
    ]
  },
  {
    name: "EndEvent",
    superClass: [
      "ThrowEvent"
    ]
  },
  {
    name: "StartEvent",
    superClass: [
      "CatchEvent"
    ],
    properties: [
      {
        name: "isInterrupting",
        default: !0,
        isAttr: !0,
        type: "Boolean"
      }
    ]
  },
  {
    name: "ThrowEvent",
    isAbstract: !0,
    superClass: [
      "Event"
    ],
    properties: [
      {
        name: "dataInputs",
        type: "DataInput",
        isMany: !0
      },
      {
        name: "dataInputAssociations",
        type: "DataInputAssociation",
        isMany: !0
      },
      {
        name: "inputSet",
        type: "InputSet"
      },
      {
        name: "eventDefinitions",
        type: "EventDefinition",
        isMany: !0
      },
      {
        name: "eventDefinitionRef",
        type: "EventDefinition",
        isMany: !0,
        isReference: !0
      }
    ]
  },
  {
    name: "CatchEvent",
    isAbstract: !0,
    superClass: [
      "Event"
    ],
    properties: [
      {
        name: "parallelMultiple",
        isAttr: !0,
        type: "Boolean",
        default: !1
      },
      {
        name: "dataOutputs",
        type: "DataOutput",
        isMany: !0
      },
      {
        name: "dataOutputAssociations",
        type: "DataOutputAssociation",
        isMany: !0
      },
      {
        name: "outputSet",
        type: "OutputSet"
      },
      {
        name: "eventDefinitions",
        type: "EventDefinition",
        isMany: !0
      },
      {
        name: "eventDefinitionRef",
        type: "EventDefinition",
        isMany: !0,
        isReference: !0
      }
    ]
  },
  {
    name: "BoundaryEvent",
    superClass: [
      "CatchEvent"
    ],
    properties: [
      {
        name: "cancelActivity",
        default: !0,
        isAttr: !0,
        type: "Boolean"
      },
      {
        name: "attachedToRef",
        type: "Activity",
        isAttr: !0,
        isReference: !0
      }
    ]
  },
  {
    name: "EventDefinition",
    isAbstract: !0,
    superClass: [
      "RootElement"
    ]
  },
  {
    name: "CancelEventDefinition",
    superClass: [
      "EventDefinition"
    ]
  },
  {
    name: "ErrorEventDefinition",
    superClass: [
      "EventDefinition"
    ],
    properties: [
      {
        name: "errorRef",
        type: "Error",
        isAttr: !0,
        isReference: !0
      }
    ]
  },
  {
    name: "TerminateEventDefinition",
    superClass: [
      "EventDefinition"
    ]
  },
  {
    name: "EscalationEventDefinition",
    superClass: [
      "EventDefinition"
    ],
    properties: [
      {
        name: "escalationRef",
        type: "Escalation",
        isAttr: !0,
        isReference: !0
      }
    ]
  },
  {
    name: "Escalation",
    properties: [
      {
        name: "structureRef",
        type: "ItemDefinition",
        isAttr: !0,
        isReference: !0
      },
      {
        name: "name",
        isAttr: !0,
        type: "String"
      },
      {
        name: "escalationCode",
        isAttr: !0,
        type: "String"
      }
    ],
    superClass: [
      "RootElement"
    ]
  },
  {
    name: "CompensateEventDefinition",
    superClass: [
      "EventDefinition"
    ],
    properties: [
      {
        name: "waitForCompletion",
        isAttr: !0,
        type: "Boolean",
        default: !0
      },
      {
        name: "activityRef",
        type: "Activity",
        isAttr: !0,
        isReference: !0
      }
    ]
  },
  {
    name: "TimerEventDefinition",
    superClass: [
      "EventDefinition"
    ],
    properties: [
      {
        name: "timeDate",
        type: "Expression",
        xml: {
          serialize: "xsi:type"
        }
      },
      {
        name: "timeCycle",
        type: "Expression",
        xml: {
          serialize: "xsi:type"
        }
      },
      {
        name: "timeDuration",
        type: "Expression",
        xml: {
          serialize: "xsi:type"
        }
      }
    ]
  },
  {
    name: "LinkEventDefinition",
    superClass: [
      "EventDefinition"
    ],
    properties: [
      {
        name: "name",
        isAttr: !0,
        type: "String"
      },
      {
        name: "target",
        type: "LinkEventDefinition",
        isReference: !0
      },
      {
        name: "source",
        type: "LinkEventDefinition",
        isMany: !0,
        isReference: !0
      }
    ]
  },
  {
    name: "MessageEventDefinition",
    superClass: [
      "EventDefinition"
    ],
    properties: [
      {
        name: "messageRef",
        type: "Message",
        isAttr: !0,
        isReference: !0
      },
      {
        name: "operationRef",
        type: "Operation",
        isAttr: !0,
        isReference: !0
      }
    ]
  },
  {
    name: "ConditionalEventDefinition",
    superClass: [
      "EventDefinition"
    ],
    properties: [
      {
        name: "condition",
        type: "Expression",
        xml: {
          serialize: "xsi:type"
        }
      }
    ]
  },
  {
    name: "SignalEventDefinition",
    superClass: [
      "EventDefinition"
    ],
    properties: [
      {
        name: "signalRef",
        type: "Signal",
        isAttr: !0,
        isReference: !0
      }
    ]
  },
  {
    name: "Signal",
    superClass: [
      "RootElement"
    ],
    properties: [
      {
        name: "structureRef",
        type: "ItemDefinition",
        isAttr: !0,
        isReference: !0
      },
      {
        name: "name",
        isAttr: !0,
        type: "String"
      }
    ]
  },
  {
    name: "ImplicitThrowEvent",
    superClass: [
      "ThrowEvent"
    ]
  },
  {
    name: "DataState",
    superClass: [
      "BaseElement"
    ],
    properties: [
      {
        name: "name",
        isAttr: !0,
        type: "String"
      }
    ]
  },
  {
    name: "ItemAwareElement",
    superClass: [
      "BaseElement"
    ],
    properties: [
      {
        name: "itemSubjectRef",
        type: "ItemDefinition",
        isAttr: !0,
        isReference: !0
      },
      {
        name: "dataState",
        type: "DataState"
      }
    ]
  },
  {
    name: "DataAssociation",
    superClass: [
      "BaseElement"
    ],
    properties: [
      {
        name: "sourceRef",
        type: "ItemAwareElement",
        isMany: !0,
        isReference: !0
      },
      {
        name: "targetRef",
        type: "ItemAwareElement",
        isReference: !0
      },
      {
        name: "transformation",
        type: "FormalExpression",
        xml: {
          serialize: "property"
        }
      },
      {
        name: "assignment",
        type: "Assignment",
        isMany: !0
      }
    ]
  },
  {
    name: "DataInput",
    superClass: [
      "ItemAwareElement"
    ],
    properties: [
      {
        name: "name",
        isAttr: !0,
        type: "String"
      },
      {
        name: "isCollection",
        default: !1,
        isAttr: !0,
        type: "Boolean"
      },
      {
        name: "inputSetRef",
        type: "InputSet",
        isMany: !0,
        isVirtual: !0,
        isReference: !0
      },
      {
        name: "inputSetWithOptional",
        type: "InputSet",
        isMany: !0,
        isVirtual: !0,
        isReference: !0
      },
      {
        name: "inputSetWithWhileExecuting",
        type: "InputSet",
        isMany: !0,
        isVirtual: !0,
        isReference: !0
      }
    ]
  },
  {
    name: "DataOutput",
    superClass: [
      "ItemAwareElement"
    ],
    properties: [
      {
        name: "name",
        isAttr: !0,
        type: "String"
      },
      {
        name: "isCollection",
        default: !1,
        isAttr: !0,
        type: "Boolean"
      },
      {
        name: "outputSetRef",
        type: "OutputSet",
        isMany: !0,
        isVirtual: !0,
        isReference: !0
      },
      {
        name: "outputSetWithOptional",
        type: "OutputSet",
        isMany: !0,
        isVirtual: !0,
        isReference: !0
      },
      {
        name: "outputSetWithWhileExecuting",
        type: "OutputSet",
        isMany: !0,
        isVirtual: !0,
        isReference: !0
      }
    ]
  },
  {
    name: "InputSet",
    superClass: [
      "BaseElement"
    ],
    properties: [
      {
        name: "name",
        isAttr: !0,
        type: "String"
      },
      {
        name: "dataInputRefs",
        type: "DataInput",
        isMany: !0,
        isReference: !0
      },
      {
        name: "optionalInputRefs",
        type: "DataInput",
        isMany: !0,
        isReference: !0
      },
      {
        name: "whileExecutingInputRefs",
        type: "DataInput",
        isMany: !0,
        isReference: !0
      },
      {
        name: "outputSetRefs",
        type: "OutputSet",
        isMany: !0,
        isReference: !0
      }
    ]
  },
  {
    name: "OutputSet",
    superClass: [
      "BaseElement"
    ],
    properties: [
      {
        name: "dataOutputRefs",
        type: "DataOutput",
        isMany: !0,
        isReference: !0
      },
      {
        name: "name",
        isAttr: !0,
        type: "String"
      },
      {
        name: "inputSetRefs",
        type: "InputSet",
        isMany: !0,
        isReference: !0
      },
      {
        name: "optionalOutputRefs",
        type: "DataOutput",
        isMany: !0,
        isReference: !0
      },
      {
        name: "whileExecutingOutputRefs",
        type: "DataOutput",
        isMany: !0,
        isReference: !0
      }
    ]
  },
  {
    name: "Property",
    superClass: [
      "ItemAwareElement"
    ],
    properties: [
      {
        name: "name",
        isAttr: !0,
        type: "String"
      }
    ]
  },
  {
    name: "DataInputAssociation",
    superClass: [
      "DataAssociation"
    ]
  },
  {
    name: "DataOutputAssociation",
    superClass: [
      "DataAssociation"
    ]
  },
  {
    name: "InputOutputSpecification",
    superClass: [
      "BaseElement"
    ],
    properties: [
      {
        name: "dataInputs",
        type: "DataInput",
        isMany: !0
      },
      {
        name: "dataOutputs",
        type: "DataOutput",
        isMany: !0
      },
      {
        name: "inputSets",
        type: "InputSet",
        isMany: !0
      },
      {
        name: "outputSets",
        type: "OutputSet",
        isMany: !0
      }
    ]
  },
  {
    name: "DataObject",
    superClass: [
      "FlowElement",
      "ItemAwareElement"
    ],
    properties: [
      {
        name: "isCollection",
        default: !1,
        isAttr: !0,
        type: "Boolean"
      }
    ]
  },
  {
    name: "InputOutputBinding",
    properties: [
      {
        name: "inputDataRef",
        type: "InputSet",
        isAttr: !0,
        isReference: !0
      },
      {
        name: "outputDataRef",
        type: "OutputSet",
        isAttr: !0,
        isReference: !0
      },
      {
        name: "operationRef",
        type: "Operation",
        isAttr: !0,
        isReference: !0
      }
    ]
  },
  {
    name: "Assignment",
    superClass: [
      "BaseElement"
    ],
    properties: [
      {
        name: "from",
        type: "Expression",
        xml: {
          serialize: "xsi:type"
        }
      },
      {
        name: "to",
        type: "Expression",
        xml: {
          serialize: "xsi:type"
        }
      }
    ]
  },
  {
    name: "DataStore",
    superClass: [
      "RootElement",
      "ItemAwareElement"
    ],
    properties: [
      {
        name: "name",
        isAttr: !0,
        type: "String"
      },
      {
        name: "capacity",
        isAttr: !0,
        type: "Integer"
      },
      {
        name: "isUnlimited",
        default: !0,
        isAttr: !0,
        type: "Boolean"
      }
    ]
  },
  {
    name: "DataStoreReference",
    superClass: [
      "ItemAwareElement",
      "FlowElement"
    ],
    properties: [
      {
        name: "dataStoreRef",
        type: "DataStore",
        isAttr: !0,
        isReference: !0
      }
    ]
  },
  {
    name: "DataObjectReference",
    superClass: [
      "ItemAwareElement",
      "FlowElement"
    ],
    properties: [
      {
        name: "dataObjectRef",
        type: "DataObject",
        isAttr: !0,
        isReference: !0
      }
    ]
  },
  {
    name: "ConversationLink",
    superClass: [
      "BaseElement"
    ],
    properties: [
      {
        name: "sourceRef",
        type: "InteractionNode",
        isAttr: !0,
        isReference: !0
      },
      {
        name: "targetRef",
        type: "InteractionNode",
        isAttr: !0,
        isReference: !0
      },
      {
        name: "name",
        isAttr: !0,
        type: "String"
      }
    ]
  },
  {
    name: "ConversationAssociation",
    superClass: [
      "BaseElement"
    ],
    properties: [
      {
        name: "innerConversationNodeRef",
        type: "ConversationNode",
        isAttr: !0,
        isReference: !0
      },
      {
        name: "outerConversationNodeRef",
        type: "ConversationNode",
        isAttr: !0,
        isReference: !0
      }
    ]
  },
  {
    name: "CallConversation",
    superClass: [
      "ConversationNode"
    ],
    properties: [
      {
        name: "calledCollaborationRef",
        type: "Collaboration",
        isAttr: !0,
        isReference: !0
      },
      {
        name: "participantAssociations",
        type: "ParticipantAssociation",
        isMany: !0
      }
    ]
  },
  {
    name: "Conversation",
    superClass: [
      "ConversationNode"
    ]
  },
  {
    name: "SubConversation",
    superClass: [
      "ConversationNode"
    ],
    properties: [
      {
        name: "conversationNodes",
        type: "ConversationNode",
        isMany: !0
      }
    ]
  },
  {
    name: "ConversationNode",
    isAbstract: !0,
    superClass: [
      "InteractionNode",
      "BaseElement"
    ],
    properties: [
      {
        name: "name",
        isAttr: !0,
        type: "String"
      },
      {
        name: "participantRef",
        type: "Participant",
        isMany: !0,
        isReference: !0
      },
      {
        name: "messageFlowRefs",
        type: "MessageFlow",
        isMany: !0,
        isReference: !0
      },
      {
        name: "correlationKeys",
        type: "CorrelationKey",
        isMany: !0
      }
    ]
  },
  {
    name: "GlobalConversation",
    superClass: [
      "Collaboration"
    ]
  },
  {
    name: "PartnerEntity",
    superClass: [
      "RootElement"
    ],
    properties: [
      {
        name: "name",
        isAttr: !0,
        type: "String"
      },
      {
        name: "participantRef",
        type: "Participant",
        isMany: !0,
        isReference: !0
      }
    ]
  },
  {
    name: "PartnerRole",
    superClass: [
      "RootElement"
    ],
    properties: [
      {
        name: "name",
        isAttr: !0,
        type: "String"
      },
      {
        name: "participantRef",
        type: "Participant",
        isMany: !0,
        isReference: !0
      }
    ]
  },
  {
    name: "CorrelationProperty",
    superClass: [
      "RootElement"
    ],
    properties: [
      {
        name: "correlationPropertyRetrievalExpression",
        type: "CorrelationPropertyRetrievalExpression",
        isMany: !0
      },
      {
        name: "name",
        isAttr: !0,
        type: "String"
      },
      {
        name: "type",
        type: "ItemDefinition",
        isAttr: !0,
        isReference: !0
      }
    ]
  },
  {
    name: "Error",
    superClass: [
      "RootElement"
    ],
    properties: [
      {
        name: "structureRef",
        type: "ItemDefinition",
        isAttr: !0,
        isReference: !0
      },
      {
        name: "name",
        isAttr: !0,
        type: "String"
      },
      {
        name: "errorCode",
        isAttr: !0,
        type: "String"
      }
    ]
  },
  {
    name: "CorrelationKey",
    superClass: [
      "BaseElement"
    ],
    properties: [
      {
        name: "correlationPropertyRef",
        type: "CorrelationProperty",
        isMany: !0,
        isReference: !0
      },
      {
        name: "name",
        isAttr: !0,
        type: "String"
      }
    ]
  },
  {
    name: "Expression",
    superClass: [
      "BaseElement"
    ],
    isAbstract: !1,
    properties: [
      {
        name: "body",
        isBody: !0,
        type: "String"
      }
    ]
  },
  {
    name: "FormalExpression",
    superClass: [
      "Expression"
    ],
    properties: [
      {
        name: "language",
        isAttr: !0,
        type: "String"
      },
      {
        name: "evaluatesToTypeRef",
        type: "ItemDefinition",
        isAttr: !0,
        isReference: !0
      }
    ]
  },
  {
    name: "Message",
    superClass: [
      "RootElement"
    ],
    properties: [
      {
        name: "name",
        isAttr: !0,
        type: "String"
      },
      {
        name: "itemRef",
        type: "ItemDefinition",
        isAttr: !0,
        isReference: !0
      }
    ]
  },
  {
    name: "ItemDefinition",
    superClass: [
      "RootElement"
    ],
    properties: [
      {
        name: "itemKind",
        type: "ItemKind",
        isAttr: !0
      },
      {
        name: "structureRef",
        isAttr: !0,
        type: "String"
      },
      {
        name: "isCollection",
        default: !1,
        isAttr: !0,
        type: "Boolean"
      },
      {
        name: "import",
        type: "Import",
        isAttr: !0,
        isReference: !0
      }
    ]
  },
  {
    name: "FlowElement",
    isAbstract: !0,
    superClass: [
      "BaseElement"
    ],
    properties: [
      {
        name: "name",
        isAttr: !0,
        type: "String"
      },
      {
        name: "auditing",
        type: "Auditing"
      },
      {
        name: "monitoring",
        type: "Monitoring"
      },
      {
        name: "categoryValueRef",
        type: "CategoryValue",
        isMany: !0,
        isReference: !0
      }
    ]
  },
  {
    name: "SequenceFlow",
    superClass: [
      "FlowElement"
    ],
    properties: [
      {
        name: "isImmediate",
        isAttr: !0,
        type: "Boolean"
      },
      {
        name: "conditionExpression",
        type: "Expression",
        xml: {
          serialize: "xsi:type"
        }
      },
      {
        name: "sourceRef",
        type: "FlowNode",
        isAttr: !0,
        isReference: !0
      },
      {
        name: "targetRef",
        type: "FlowNode",
        isAttr: !0,
        isReference: !0
      }
    ]
  },
  {
    name: "FlowElementsContainer",
    isAbstract: !0,
    superClass: [
      "BaseElement"
    ],
    properties: [
      {
        name: "laneSets",
        type: "LaneSet",
        isMany: !0
      },
      {
        name: "flowElements",
        type: "FlowElement",
        isMany: !0
      }
    ]
  },
  {
    name: "CallableElement",
    isAbstract: !0,
    superClass: [
      "RootElement"
    ],
    properties: [
      {
        name: "name",
        isAttr: !0,
        type: "String"
      },
      {
        name: "ioSpecification",
        type: "InputOutputSpecification",
        xml: {
          serialize: "property"
        }
      },
      {
        name: "supportedInterfaceRef",
        type: "Interface",
        isMany: !0,
        isReference: !0
      },
      {
        name: "ioBinding",
        type: "InputOutputBinding",
        isMany: !0,
        xml: {
          serialize: "property"
        }
      }
    ]
  },
  {
    name: "FlowNode",
    isAbstract: !0,
    superClass: [
      "FlowElement"
    ],
    properties: [
      {
        name: "incoming",
        type: "SequenceFlow",
        isMany: !0,
        isReference: !0
      },
      {
        name: "outgoing",
        type: "SequenceFlow",
        isMany: !0,
        isReference: !0
      },
      {
        name: "lanes",
        type: "Lane",
        isMany: !0,
        isVirtual: !0,
        isReference: !0
      }
    ]
  },
  {
    name: "CorrelationPropertyRetrievalExpression",
    superClass: [
      "BaseElement"
    ],
    properties: [
      {
        name: "messagePath",
        type: "FormalExpression"
      },
      {
        name: "messageRef",
        type: "Message",
        isAttr: !0,
        isReference: !0
      }
    ]
  },
  {
    name: "CorrelationPropertyBinding",
    superClass: [
      "BaseElement"
    ],
    properties: [
      {
        name: "dataPath",
        type: "FormalExpression"
      },
      {
        name: "correlationPropertyRef",
        type: "CorrelationProperty",
        isAttr: !0,
        isReference: !0
      }
    ]
  },
  {
    name: "Resource",
    superClass: [
      "RootElement"
    ],
    properties: [
      {
        name: "name",
        isAttr: !0,
        type: "String"
      },
      {
        name: "resourceParameters",
        type: "ResourceParameter",
        isMany: !0
      }
    ]
  },
  {
    name: "ResourceParameter",
    superClass: [
      "BaseElement"
    ],
    properties: [
      {
        name: "name",
        isAttr: !0,
        type: "String"
      },
      {
        name: "isRequired",
        isAttr: !0,
        type: "Boolean"
      },
      {
        name: "type",
        type: "ItemDefinition",
        isAttr: !0,
        isReference: !0
      }
    ]
  },
  {
    name: "CorrelationSubscription",
    superClass: [
      "BaseElement"
    ],
    properties: [
      {
        name: "correlationKeyRef",
        type: "CorrelationKey",
        isAttr: !0,
        isReference: !0
      },
      {
        name: "correlationPropertyBinding",
        type: "CorrelationPropertyBinding",
        isMany: !0
      }
    ]
  },
  {
    name: "MessageFlow",
    superClass: [
      "BaseElement"
    ],
    properties: [
      {
        name: "name",
        isAttr: !0,
        type: "String"
      },
      {
        name: "sourceRef",
        type: "InteractionNode",
        isAttr: !0,
        isReference: !0
      },
      {
        name: "targetRef",
        type: "InteractionNode",
        isAttr: !0,
        isReference: !0
      },
      {
        name: "messageRef",
        type: "Message",
        isAttr: !0,
        isReference: !0
      }
    ]
  },
  {
    name: "MessageFlowAssociation",
    superClass: [
      "BaseElement"
    ],
    properties: [
      {
        name: "innerMessageFlowRef",
        type: "MessageFlow",
        isAttr: !0,
        isReference: !0
      },
      {
        name: "outerMessageFlowRef",
        type: "MessageFlow",
        isAttr: !0,
        isReference: !0
      }
    ]
  },
  {
    name: "InteractionNode",
    isAbstract: !0,
    properties: [
      {
        name: "incomingConversationLinks",
        type: "ConversationLink",
        isMany: !0,
        isVirtual: !0,
        isReference: !0
      },
      {
        name: "outgoingConversationLinks",
        type: "ConversationLink",
        isMany: !0,
        isVirtual: !0,
        isReference: !0
      }
    ]
  },
  {
    name: "Participant",
    superClass: [
      "InteractionNode",
      "BaseElement"
    ],
    properties: [
      {
        name: "name",
        isAttr: !0,
        type: "String"
      },
      {
        name: "interfaceRef",
        type: "Interface",
        isMany: !0,
        isReference: !0
      },
      {
        name: "participantMultiplicity",
        type: "ParticipantMultiplicity"
      },
      {
        name: "endPointRefs",
        type: "EndPoint",
        isMany: !0,
        isReference: !0
      },
      {
        name: "processRef",
        type: "Process",
        isAttr: !0,
        isReference: !0
      }
    ]
  },
  {
    name: "ParticipantAssociation",
    superClass: [
      "BaseElement"
    ],
    properties: [
      {
        name: "innerParticipantRef",
        type: "Participant",
        isAttr: !0,
        isReference: !0
      },
      {
        name: "outerParticipantRef",
        type: "Participant",
        isAttr: !0,
        isReference: !0
      }
    ]
  },
  {
    name: "ParticipantMultiplicity",
    properties: [
      {
        name: "minimum",
        default: 0,
        isAttr: !0,
        type: "Integer"
      },
      {
        name: "maximum",
        default: 1,
        isAttr: !0,
        type: "Integer"
      }
    ],
    superClass: [
      "BaseElement"
    ]
  },
  {
    name: "Collaboration",
    superClass: [
      "RootElement"
    ],
    properties: [
      {
        name: "name",
        isAttr: !0,
        type: "String"
      },
      {
        name: "isClosed",
        isAttr: !0,
        type: "Boolean"
      },
      {
        name: "participants",
        type: "Participant",
        isMany: !0
      },
      {
        name: "messageFlows",
        type: "MessageFlow",
        isMany: !0
      },
      {
        name: "artifacts",
        type: "Artifact",
        isMany: !0
      },
      {
        name: "conversations",
        type: "ConversationNode",
        isMany: !0
      },
      {
        name: "conversationAssociations",
        type: "ConversationAssociation"
      },
      {
        name: "participantAssociations",
        type: "ParticipantAssociation",
        isMany: !0
      },
      {
        name: "messageFlowAssociations",
        type: "MessageFlowAssociation",
        isMany: !0
      },
      {
        name: "correlationKeys",
        type: "CorrelationKey",
        isMany: !0
      },
      {
        name: "choreographyRef",
        type: "Choreography",
        isMany: !0,
        isReference: !0
      },
      {
        name: "conversationLinks",
        type: "ConversationLink",
        isMany: !0
      }
    ]
  },
  {
    name: "ChoreographyActivity",
    isAbstract: !0,
    superClass: [
      "FlowNode"
    ],
    properties: [
      {
        name: "participantRef",
        type: "Participant",
        isMany: !0,
        isReference: !0
      },
      {
        name: "initiatingParticipantRef",
        type: "Participant",
        isAttr: !0,
        isReference: !0
      },
      {
        name: "correlationKeys",
        type: "CorrelationKey",
        isMany: !0
      },
      {
        name: "loopType",
        type: "ChoreographyLoopType",
        default: "None",
        isAttr: !0
      }
    ]
  },
  {
    name: "CallChoreography",
    superClass: [
      "ChoreographyActivity"
    ],
    properties: [
      {
        name: "calledChoreographyRef",
        type: "Choreography",
        isAttr: !0,
        isReference: !0
      },
      {
        name: "participantAssociations",
        type: "ParticipantAssociation",
        isMany: !0
      }
    ]
  },
  {
    name: "SubChoreography",
    superClass: [
      "ChoreographyActivity",
      "FlowElementsContainer"
    ],
    properties: [
      {
        name: "artifacts",
        type: "Artifact",
        isMany: !0
      }
    ]
  },
  {
    name: "ChoreographyTask",
    superClass: [
      "ChoreographyActivity"
    ],
    properties: [
      {
        name: "messageFlowRef",
        type: "MessageFlow",
        isMany: !0,
        isReference: !0
      }
    ]
  },
  {
    name: "Choreography",
    superClass: [
      "Collaboration",
      "FlowElementsContainer"
    ]
  },
  {
    name: "GlobalChoreographyTask",
    superClass: [
      "Choreography"
    ],
    properties: [
      {
        name: "initiatingParticipantRef",
        type: "Participant",
        isAttr: !0,
        isReference: !0
      }
    ]
  },
  {
    name: "TextAnnotation",
    superClass: [
      "Artifact"
    ],
    properties: [
      {
        name: "text",
        type: "String"
      },
      {
        name: "textFormat",
        default: "text/plain",
        isAttr: !0,
        type: "String"
      }
    ]
  },
  {
    name: "Group",
    superClass: [
      "Artifact"
    ],
    properties: [
      {
        name: "categoryValueRef",
        type: "CategoryValue",
        isAttr: !0,
        isReference: !0
      }
    ]
  },
  {
    name: "Association",
    superClass: [
      "Artifact"
    ],
    properties: [
      {
        name: "associationDirection",
        type: "AssociationDirection",
        isAttr: !0
      },
      {
        name: "sourceRef",
        type: "BaseElement",
        isAttr: !0,
        isReference: !0
      },
      {
        name: "targetRef",
        type: "BaseElement",
        isAttr: !0,
        isReference: !0
      }
    ]
  },
  {
    name: "Category",
    superClass: [
      "RootElement"
    ],
    properties: [
      {
        name: "categoryValue",
        type: "CategoryValue",
        isMany: !0
      },
      {
        name: "name",
        isAttr: !0,
        type: "String"
      }
    ]
  },
  {
    name: "Artifact",
    isAbstract: !0,
    superClass: [
      "BaseElement"
    ]
  },
  {
    name: "CategoryValue",
    superClass: [
      "BaseElement"
    ],
    properties: [
      {
        name: "categorizedFlowElements",
        type: "FlowElement",
        isMany: !0,
        isVirtual: !0,
        isReference: !0
      },
      {
        name: "value",
        isAttr: !0,
        type: "String"
      }
    ]
  },
  {
    name: "Activity",
    isAbstract: !0,
    superClass: [
      "FlowNode"
    ],
    properties: [
      {
        name: "isForCompensation",
        default: !1,
        isAttr: !0,
        type: "Boolean"
      },
      {
        name: "default",
        type: "SequenceFlow",
        isAttr: !0,
        isReference: !0
      },
      {
        name: "ioSpecification",
        type: "InputOutputSpecification",
        xml: {
          serialize: "property"
        }
      },
      {
        name: "boundaryEventRefs",
        type: "BoundaryEvent",
        isMany: !0,
        isReference: !0
      },
      {
        name: "properties",
        type: "Property",
        isMany: !0
      },
      {
        name: "dataInputAssociations",
        type: "DataInputAssociation",
        isMany: !0
      },
      {
        name: "dataOutputAssociations",
        type: "DataOutputAssociation",
        isMany: !0
      },
      {
        name: "startQuantity",
        default: 1,
        isAttr: !0,
        type: "Integer"
      },
      {
        name: "resources",
        type: "ResourceRole",
        isMany: !0
      },
      {
        name: "completionQuantity",
        default: 1,
        isAttr: !0,
        type: "Integer"
      },
      {
        name: "loopCharacteristics",
        type: "LoopCharacteristics"
      }
    ]
  },
  {
    name: "ServiceTask",
    superClass: [
      "Task"
    ],
    properties: [
      {
        name: "implementation",
        isAttr: !0,
        type: "String"
      },
      {
        name: "operationRef",
        type: "Operation",
        isAttr: !0,
        isReference: !0
      }
    ]
  },
  {
    name: "SubProcess",
    superClass: [
      "Activity",
      "FlowElementsContainer",
      "InteractionNode"
    ],
    properties: [
      {
        name: "triggeredByEvent",
        default: !1,
        isAttr: !0,
        type: "Boolean"
      },
      {
        name: "artifacts",
        type: "Artifact",
        isMany: !0
      }
    ]
  },
  {
    name: "LoopCharacteristics",
    isAbstract: !0,
    superClass: [
      "BaseElement"
    ]
  },
  {
    name: "MultiInstanceLoopCharacteristics",
    superClass: [
      "LoopCharacteristics"
    ],
    properties: [
      {
        name: "isSequential",
        default: !1,
        isAttr: !0,
        type: "Boolean"
      },
      {
        name: "behavior",
        type: "MultiInstanceBehavior",
        default: "All",
        isAttr: !0
      },
      {
        name: "loopCardinality",
        type: "Expression",
        xml: {
          serialize: "xsi:type"
        }
      },
      {
        name: "loopDataInputRef",
        type: "ItemAwareElement",
        isReference: !0
      },
      {
        name: "loopDataOutputRef",
        type: "ItemAwareElement",
        isReference: !0
      },
      {
        name: "inputDataItem",
        type: "DataInput",
        xml: {
          serialize: "property"
        }
      },
      {
        name: "outputDataItem",
        type: "DataOutput",
        xml: {
          serialize: "property"
        }
      },
      {
        name: "complexBehaviorDefinition",
        type: "ComplexBehaviorDefinition",
        isMany: !0
      },
      {
        name: "completionCondition",
        type: "Expression",
        xml: {
          serialize: "xsi:type"
        }
      },
      {
        name: "oneBehaviorEventRef",
        type: "EventDefinition",
        isAttr: !0,
        isReference: !0
      },
      {
        name: "noneBehaviorEventRef",
        type: "EventDefinition",
        isAttr: !0,
        isReference: !0
      }
    ]
  },
  {
    name: "StandardLoopCharacteristics",
    superClass: [
      "LoopCharacteristics"
    ],
    properties: [
      {
        name: "testBefore",
        default: !1,
        isAttr: !0,
        type: "Boolean"
      },
      {
        name: "loopCondition",
        type: "Expression",
        xml: {
          serialize: "xsi:type"
        }
      },
      {
        name: "loopMaximum",
        type: "Integer",
        isAttr: !0
      }
    ]
  },
  {
    name: "CallActivity",
    superClass: [
      "Activity",
      "InteractionNode"
    ],
    properties: [
      {
        name: "calledElement",
        type: "String",
        isAttr: !0
      }
    ]
  },
  {
    name: "Task",
    superClass: [
      "Activity",
      "InteractionNode"
    ]
  },
  {
    name: "SendTask",
    superClass: [
      "Task"
    ],
    properties: [
      {
        name: "implementation",
        isAttr: !0,
        type: "String"
      },
      {
        name: "operationRef",
        type: "Operation",
        isAttr: !0,
        isReference: !0
      },
      {
        name: "messageRef",
        type: "Message",
        isAttr: !0,
        isReference: !0
      }
    ]
  },
  {
    name: "ReceiveTask",
    superClass: [
      "Task"
    ],
    properties: [
      {
        name: "implementation",
        isAttr: !0,
        type: "String"
      },
      {
        name: "instantiate",
        default: !1,
        isAttr: !0,
        type: "Boolean"
      },
      {
        name: "operationRef",
        type: "Operation",
        isAttr: !0,
        isReference: !0
      },
      {
        name: "messageRef",
        type: "Message",
        isAttr: !0,
        isReference: !0
      }
    ]
  },
  {
    name: "ScriptTask",
    superClass: [
      "Task"
    ],
    properties: [
      {
        name: "scriptFormat",
        isAttr: !0,
        type: "String"
      },
      {
        name: "script",
        type: "String"
      }
    ]
  },
  {
    name: "BusinessRuleTask",
    superClass: [
      "Task"
    ],
    properties: [
      {
        name: "implementation",
        isAttr: !0,
        type: "String"
      }
    ]
  },
  {
    name: "AdHocSubProcess",
    superClass: [
      "SubProcess"
    ],
    properties: [
      {
        name: "completionCondition",
        type: "Expression",
        xml: {
          serialize: "xsi:type"
        }
      },
      {
        name: "ordering",
        type: "AdHocOrdering",
        isAttr: !0
      },
      {
        name: "cancelRemainingInstances",
        default: !0,
        isAttr: !0,
        type: "Boolean"
      }
    ]
  },
  {
    name: "Transaction",
    superClass: [
      "SubProcess"
    ],
    properties: [
      {
        name: "protocol",
        isAttr: !0,
        type: "String"
      },
      {
        name: "method",
        isAttr: !0,
        type: "String"
      }
    ]
  },
  {
    name: "GlobalScriptTask",
    superClass: [
      "GlobalTask"
    ],
    properties: [
      {
        name: "scriptLanguage",
        isAttr: !0,
        type: "String"
      },
      {
        name: "script",
        isAttr: !0,
        type: "String"
      }
    ]
  },
  {
    name: "GlobalBusinessRuleTask",
    superClass: [
      "GlobalTask"
    ],
    properties: [
      {
        name: "implementation",
        isAttr: !0,
        type: "String"
      }
    ]
  },
  {
    name: "ComplexBehaviorDefinition",
    superClass: [
      "BaseElement"
    ],
    properties: [
      {
        name: "condition",
        type: "FormalExpression"
      },
      {
        name: "event",
        type: "ImplicitThrowEvent"
      }
    ]
  },
  {
    name: "ResourceRole",
    superClass: [
      "BaseElement"
    ],
    properties: [
      {
        name: "resourceRef",
        type: "Resource",
        isReference: !0
      },
      {
        name: "resourceParameterBindings",
        type: "ResourceParameterBinding",
        isMany: !0
      },
      {
        name: "resourceAssignmentExpression",
        type: "ResourceAssignmentExpression"
      },
      {
        name: "name",
        isAttr: !0,
        type: "String"
      }
    ]
  },
  {
    name: "ResourceParameterBinding",
    properties: [
      {
        name: "expression",
        type: "Expression",
        xml: {
          serialize: "xsi:type"
        }
      },
      {
        name: "parameterRef",
        type: "ResourceParameter",
        isAttr: !0,
        isReference: !0
      }
    ],
    superClass: [
      "BaseElement"
    ]
  },
  {
    name: "ResourceAssignmentExpression",
    properties: [
      {
        name: "expression",
        type: "Expression",
        xml: {
          serialize: "xsi:type"
        }
      }
    ],
    superClass: [
      "BaseElement"
    ]
  },
  {
    name: "Import",
    properties: [
      {
        name: "importType",
        isAttr: !0,
        type: "String"
      },
      {
        name: "location",
        isAttr: !0,
        type: "String"
      },
      {
        name: "namespace",
        isAttr: !0,
        type: "String"
      }
    ]
  },
  {
    name: "Definitions",
    superClass: [
      "BaseElement"
    ],
    properties: [
      {
        name: "name",
        isAttr: !0,
        type: "String"
      },
      {
        name: "targetNamespace",
        isAttr: !0,
        type: "String"
      },
      {
        name: "expressionLanguage",
        default: "http://www.w3.org/1999/XPath",
        isAttr: !0,
        type: "String"
      },
      {
        name: "typeLanguage",
        default: "http://www.w3.org/2001/XMLSchema",
        isAttr: !0,
        type: "String"
      },
      {
        name: "imports",
        type: "Import",
        isMany: !0
      },
      {
        name: "extensions",
        type: "Extension",
        isMany: !0
      },
      {
        name: "rootElements",
        type: "RootElement",
        isMany: !0
      },
      {
        name: "diagrams",
        isMany: !0,
        type: "bpmndi:BPMNDiagram"
      },
      {
        name: "exporter",
        isAttr: !0,
        type: "String"
      },
      {
        name: "relationships",
        type: "Relationship",
        isMany: !0
      },
      {
        name: "exporterVersion",
        isAttr: !0,
        type: "String"
      }
    ]
  }
], SC = [
  {
    name: "ProcessType",
    literalValues: [
      {
        name: "None"
      },
      {
        name: "Public"
      },
      {
        name: "Private"
      }
    ]
  },
  {
    name: "GatewayDirection",
    literalValues: [
      {
        name: "Unspecified"
      },
      {
        name: "Converging"
      },
      {
        name: "Diverging"
      },
      {
        name: "Mixed"
      }
    ]
  },
  {
    name: "EventBasedGatewayType",
    literalValues: [
      {
        name: "Parallel"
      },
      {
        name: "Exclusive"
      }
    ]
  },
  {
    name: "RelationshipDirection",
    literalValues: [
      {
        name: "None"
      },
      {
        name: "Forward"
      },
      {
        name: "Backward"
      },
      {
        name: "Both"
      }
    ]
  },
  {
    name: "ItemKind",
    literalValues: [
      {
        name: "Physical"
      },
      {
        name: "Information"
      }
    ]
  },
  {
    name: "ChoreographyLoopType",
    literalValues: [
      {
        name: "None"
      },
      {
        name: "Standard"
      },
      {
        name: "MultiInstanceSequential"
      },
      {
        name: "MultiInstanceParallel"
      }
    ]
  },
  {
    name: "AssociationDirection",
    literalValues: [
      {
        name: "None"
      },
      {
        name: "One"
      },
      {
        name: "Both"
      }
    ]
  },
  {
    name: "MultiInstanceBehavior",
    literalValues: [
      {
        name: "None"
      },
      {
        name: "One"
      },
      {
        name: "All"
      },
      {
        name: "Complex"
      }
    ]
  },
  {
    name: "AdHocOrdering",
    literalValues: [
      {
        name: "Parallel"
      },
      {
        name: "Sequential"
      }
    ]
  }
], RC = {
  tagAlias: "lowerCase",
  typePrefix: "t"
}, CC = {
  name: _C,
  uri: bC,
  prefix: xC,
  associations: EC,
  types: wC,
  enumerations: SC,
  xml: RC
}, AC = "BPMNDI", PC = "http://www.omg.org/spec/BPMN/20100524/DI", TC = "bpmndi", kC = [
  {
    name: "BPMNDiagram",
    properties: [
      {
        name: "plane",
        type: "BPMNPlane",
        redefines: "di:Diagram#rootElement"
      },
      {
        name: "labelStyle",
        type: "BPMNLabelStyle",
        isMany: !0
      }
    ],
    superClass: [
      "di:Diagram"
    ]
  },
  {
    name: "BPMNPlane",
    properties: [
      {
        name: "bpmnElement",
        isAttr: !0,
        isReference: !0,
        type: "bpmn:BaseElement",
        redefines: "di:DiagramElement#modelElement"
      }
    ],
    superClass: [
      "di:Plane"
    ]
  },
  {
    name: "BPMNShape",
    properties: [
      {
        name: "bpmnElement",
        isAttr: !0,
        isReference: !0,
        type: "bpmn:BaseElement",
        redefines: "di:DiagramElement#modelElement"
      },
      {
        name: "isHorizontal",
        isAttr: !0,
        type: "Boolean"
      },
      {
        name: "isExpanded",
        isAttr: !0,
        type: "Boolean"
      },
      {
        name: "isMarkerVisible",
        isAttr: !0,
        type: "Boolean"
      },
      {
        name: "label",
        type: "BPMNLabel"
      },
      {
        name: "isMessageVisible",
        isAttr: !0,
        type: "Boolean"
      },
      {
        name: "participantBandKind",
        type: "ParticipantBandKind",
        isAttr: !0
      },
      {
        name: "choreographyActivityShape",
        type: "BPMNShape",
        isAttr: !0,
        isReference: !0
      }
    ],
    superClass: [
      "di:LabeledShape"
    ]
  },
  {
    name: "BPMNEdge",
    properties: [
      {
        name: "label",
        type: "BPMNLabel"
      },
      {
        name: "bpmnElement",
        isAttr: !0,
        isReference: !0,
        type: "bpmn:BaseElement",
        redefines: "di:DiagramElement#modelElement"
      },
      {
        name: "sourceElement",
        isAttr: !0,
        isReference: !0,
        type: "di:DiagramElement",
        redefines: "di:Edge#source"
      },
      {
        name: "targetElement",
        isAttr: !0,
        isReference: !0,
        type: "di:DiagramElement",
        redefines: "di:Edge#target"
      },
      {
        name: "messageVisibleKind",
        type: "MessageVisibleKind",
        isAttr: !0,
        default: "initiating"
      }
    ],
    superClass: [
      "di:LabeledEdge"
    ]
  },
  {
    name: "BPMNLabel",
    properties: [
      {
        name: "labelStyle",
        type: "BPMNLabelStyle",
        isAttr: !0,
        isReference: !0,
        redefines: "di:DiagramElement#style"
      }
    ],
    superClass: [
      "di:Label"
    ]
  },
  {
    name: "BPMNLabelStyle",
    properties: [
      {
        name: "font",
        type: "dc:Font"
      }
    ],
    superClass: [
      "di:Style"
    ]
  }
], MC = [
  {
    name: "ParticipantBandKind",
    literalValues: [
      {
        name: "top_initiating"
      },
      {
        name: "middle_initiating"
      },
      {
        name: "bottom_initiating"
      },
      {
        name: "top_non_initiating"
      },
      {
        name: "middle_non_initiating"
      },
      {
        name: "bottom_non_initiating"
      }
    ]
  },
  {
    name: "MessageVisibleKind",
    literalValues: [
      {
        name: "initiating"
      },
      {
        name: "non_initiating"
      }
    ]
  }
], DC = [], OC = {
  name: AC,
  uri: PC,
  prefix: TC,
  types: kC,
  enumerations: MC,
  associations: DC
}, NC = "DC", BC = "http://www.omg.org/spec/DD/20100524/DC", LC = "dc", IC = [
  {
    name: "Boolean"
  },
  {
    name: "Integer"
  },
  {
    name: "Real"
  },
  {
    name: "String"
  },
  {
    name: "Font",
    properties: [
      {
        name: "name",
        type: "String",
        isAttr: !0
      },
      {
        name: "size",
        type: "Real",
        isAttr: !0
      },
      {
        name: "isBold",
        type: "Boolean",
        isAttr: !0
      },
      {
        name: "isItalic",
        type: "Boolean",
        isAttr: !0
      },
      {
        name: "isUnderline",
        type: "Boolean",
        isAttr: !0
      },
      {
        name: "isStrikeThrough",
        type: "Boolean",
        isAttr: !0
      }
    ]
  },
  {
    name: "Point",
    properties: [
      {
        name: "x",
        type: "Real",
        default: "0",
        isAttr: !0
      },
      {
        name: "y",
        type: "Real",
        default: "0",
        isAttr: !0
      }
    ]
  },
  {
    name: "Bounds",
    properties: [
      {
        name: "x",
        type: "Real",
        default: "0",
        isAttr: !0
      },
      {
        name: "y",
        type: "Real",
        default: "0",
        isAttr: !0
      },
      {
        name: "width",
        type: "Real",
        isAttr: !0
      },
      {
        name: "height",
        type: "Real",
        isAttr: !0
      }
    ]
  }
], $C = [], jC = {
  name: NC,
  uri: BC,
  prefix: LC,
  types: IC,
  associations: $C
}, FC = "DI", HC = "http://www.omg.org/spec/DD/20100524/DI", zC = "di", VC = [
  {
    name: "DiagramElement",
    isAbstract: !0,
    properties: [
      {
        name: "id",
        isAttr: !0,
        isId: !0,
        type: "String"
      },
      {
        name: "extension",
        type: "Extension"
      },
      {
        name: "owningDiagram",
        type: "Diagram",
        isReadOnly: !0,
        isVirtual: !0,
        isReference: !0
      },
      {
        name: "owningElement",
        type: "DiagramElement",
        isReadOnly: !0,
        isVirtual: !0,
        isReference: !0
      },
      {
        name: "modelElement",
        isReadOnly: !0,
        isVirtual: !0,
        isReference: !0,
        type: "Element"
      },
      {
        name: "style",
        type: "Style",
        isReadOnly: !0,
        isVirtual: !0,
        isReference: !0
      },
      {
        name: "ownedElement",
        type: "DiagramElement",
        isReadOnly: !0,
        isMany: !0,
        isVirtual: !0
      }
    ]
  },
  {
    name: "Node",
    isAbstract: !0,
    superClass: [
      "DiagramElement"
    ]
  },
  {
    name: "Edge",
    isAbstract: !0,
    superClass: [
      "DiagramElement"
    ],
    properties: [
      {
        name: "source",
        type: "DiagramElement",
        isReadOnly: !0,
        isVirtual: !0,
        isReference: !0
      },
      {
        name: "target",
        type: "DiagramElement",
        isReadOnly: !0,
        isVirtual: !0,
        isReference: !0
      },
      {
        name: "waypoint",
        isUnique: !1,
        isMany: !0,
        type: "dc:Point",
        xml: {
          serialize: "xsi:type"
        }
      }
    ]
  },
  {
    name: "Diagram",
    isAbstract: !0,
    properties: [
      {
        name: "id",
        isAttr: !0,
        isId: !0,
        type: "String"
      },
      {
        name: "rootElement",
        type: "DiagramElement",
        isReadOnly: !0,
        isVirtual: !0
      },
      {
        name: "name",
        isAttr: !0,
        type: "String"
      },
      {
        name: "documentation",
        isAttr: !0,
        type: "String"
      },
      {
        name: "resolution",
        isAttr: !0,
        type: "Real"
      },
      {
        name: "ownedStyle",
        type: "Style",
        isReadOnly: !0,
        isMany: !0,
        isVirtual: !0
      }
    ]
  },
  {
    name: "Shape",
    isAbstract: !0,
    superClass: [
      "Node"
    ],
    properties: [
      {
        name: "bounds",
        type: "dc:Bounds"
      }
    ]
  },
  {
    name: "Plane",
    isAbstract: !0,
    superClass: [
      "Node"
    ],
    properties: [
      {
        name: "planeElement",
        type: "DiagramElement",
        subsettedProperty: "DiagramElement-ownedElement",
        isMany: !0
      }
    ]
  },
  {
    name: "LabeledEdge",
    isAbstract: !0,
    superClass: [
      "Edge"
    ],
    properties: [
      {
        name: "ownedLabel",
        type: "Label",
        isReadOnly: !0,
        subsettedProperty: "DiagramElement-ownedElement",
        isMany: !0,
        isVirtual: !0
      }
    ]
  },
  {
    name: "LabeledShape",
    isAbstract: !0,
    superClass: [
      "Shape"
    ],
    properties: [
      {
        name: "ownedLabel",
        type: "Label",
        isReadOnly: !0,
        subsettedProperty: "DiagramElement-ownedElement",
        isMany: !0,
        isVirtual: !0
      }
    ]
  },
  {
    name: "Label",
    isAbstract: !0,
    superClass: [
      "Node"
    ],
    properties: [
      {
        name: "bounds",
        type: "dc:Bounds"
      }
    ]
  },
  {
    name: "Style",
    isAbstract: !0,
    properties: [
      {
        name: "id",
        isAttr: !0,
        isId: !0,
        type: "String"
      }
    ]
  },
  {
    name: "Extension",
    properties: [
      {
        name: "values",
        isMany: !0,
        type: "Element"
      }
    ]
  }
], WC = [], GC = {
  tagAlias: "lowerCase"
}, UC = {
  name: FC,
  uri: HC,
  prefix: zC,
  types: VC,
  associations: WC,
  xml: GC
}, YC = "bpmn.io colors for BPMN", KC = "http://bpmn.io/schema/bpmn/biocolor/1.0", qC = "bioc", XC = [
  {
    name: "ColoredShape",
    extends: [
      "bpmndi:BPMNShape"
    ],
    properties: [
      {
        name: "stroke",
        isAttr: !0,
        type: "String"
      },
      {
        name: "fill",
        isAttr: !0,
        type: "String"
      }
    ]
  },
  {
    name: "ColoredEdge",
    extends: [
      "bpmndi:BPMNEdge"
    ],
    properties: [
      {
        name: "stroke",
        isAttr: !0,
        type: "String"
      },
      {
        name: "fill",
        isAttr: !0,
        type: "String"
      }
    ]
  }
], ZC = [], JC = [], QC = {
  name: YC,
  uri: KC,
  prefix: qC,
  types: XC,
  enumerations: ZC,
  associations: JC
}, eA = "BPMN in Color", tA = "http://www.omg.org/spec/BPMN/non-normative/color/1.0", nA = "color", iA = [
  {
    name: "ColoredLabel",
    extends: [
      "bpmndi:BPMNLabel"
    ],
    properties: [
      {
        name: "color",
        isAttr: !0,
        type: "String"
      }
    ]
  },
  {
    name: "ColoredShape",
    extends: [
      "bpmndi:BPMNShape"
    ],
    properties: [
      {
        name: "background-color",
        isAttr: !0,
        type: "String"
      },
      {
        name: "border-color",
        isAttr: !0,
        type: "String"
      }
    ]
  },
  {
    name: "ColoredEdge",
    extends: [
      "bpmndi:BPMNEdge"
    ],
    properties: [
      {
        name: "border-color",
        isAttr: !0,
        type: "String"
      }
    ]
  }
], rA = [], oA = [], aA = {
  name: eA,
  uri: tA,
  prefix: nA,
  types: iA,
  enumerations: rA,
  associations: oA
}, sA = {
  bpmn: CC,
  bpmndi: OC,
  dc: jC,
  di: UC,
  bioc: QC,
  color: aA
};
function cA(e, t) {
  var n = G({}, sA, e);
  return new wu(n, t);
}
function On(e) {
  return e ? "<" + e.$type + (e.id ? ' id="' + e.id : "") + '" />' : "<null>";
}
var lA = "Tried to access di from the businessObject. The di is available through the diagram element only. For more information, see https://github.com/bpmn-io/bpmn-js/issues/1472";
function q_(e) {
  Zn(e, "di") || Object.defineProperty(e, "di", {
    enumerable: !1,
    get: function() {
      throw new Error(lA);
    }
  });
}
function Xn(e, t) {
  return e.$instanceOf(t);
}
function uA(e) {
  return gt(e.rootElements, function(t) {
    return Xn(t, "bpmn:Process") || Xn(t, "bpmn:Collaboration");
  });
}
function pA(e) {
  var t = {}, n = [], i = {};
  function r(oe, se) {
    return function(fe) {
      oe(fe, se);
    };
  }
  function o(oe) {
    t[oe.id] = oe;
  }
  function a(oe) {
    return t[oe.id];
  }
  function c(oe, se) {
    var fe = oe.gfx;
    if (fe)
      throw new Error(
        `already rendered ${On(oe)}`
      );
    return e.element(oe, i[oe.id], se);
  }
  function l(oe, se) {
    return e.root(oe, i[oe.id], se);
  }
  function u(oe, se) {
    try {
      var fe = i[oe.id] && c(oe, se);
      return o(oe), fe;
    } catch (ct) {
      d(ct.message, { element: oe, error: ct }), console.error(`failed to import ${On(oe)}`, ct);
    }
  }
  function d(oe, se) {
    e.error(oe, se);
  }
  var f = this.registerDi = function(se) {
    var fe = se.bpmnElement;
    fe ? i[fe.id] ? d(
      `multiple DI elements defined for ${On(fe)}`,
      { element: fe }
    ) : (i[fe.id] = se, q_(fe)) : d(
      `no bpmnElement referenced in ${On(se)}`,
      { element: se }
    );
  };
  function y(oe) {
    g(oe.plane);
  }
  function g(oe) {
    f(oe), z(oe.planeElement, _);
  }
  function _(oe) {
    f(oe);
  }
  this.handleDefinitions = function(se, fe) {
    var ct = se.diagrams;
    if (fe && ct.indexOf(fe) === -1)
      throw new Error("diagram not part of <bpmn:Definitions />");
    if (!fe && ct && ct.length && (fe = ct[0]), !fe)
      throw new Error("no diagram to display");
    i = {}, y(fe);
    var Lt = fe.plane;
    if (!Lt)
      throw new Error(
        `no plane for ${On(fe)}`
      );
    var Et = Lt.bpmnElement;
    if (!Et)
      if (Et = uA(se), Et)
        d(
          `correcting missing bpmnElement on ${On(Lt)} to ${On(Et)}`
        ), Lt.bpmnElement = Et, f(Lt);
      else
        throw new Error("no process or collaboration to display");
    var Ne = l(Et, Lt);
    if (Xn(Et, "bpmn:Process") || Xn(Et, "bpmn:SubProcess"))
      w(Et, Ne);
    else if (Xn(Et, "bpmn:Collaboration"))
      Pt(Et, Ne), D(se.rootElements, Ne);
    else
      throw new Error(
        `unsupported bpmnElement for ${On(Lt)}: ${On(Et)}`
      );
    x(n);
  };
  var x = this.handleDeferred = function() {
    for (var se; n.length; )
      se = n.shift(), se();
  };
  function w(oe, se) {
    Ve(oe, se), Z(oe.ioSpecification, se), $(oe.artifacts, se), o(oe);
  }
  function D(oe, se) {
    var fe = et(oe, function(ct) {
      return !a(ct) && Xn(ct, "bpmn:Process") && ct.laneSets;
    });
    fe.forEach(r(w, se));
  }
  function O(oe, se) {
    u(oe, se);
  }
  function k(oe, se) {
    z(oe, r(O, se));
  }
  function P(oe, se) {
    u(oe, se);
  }
  function N(oe, se) {
    u(oe, se);
  }
  function j(oe, se) {
    u(oe, se);
  }
  function W(oe, se) {
    u(oe, se);
  }
  function $(oe, se) {
    z(oe, function(fe) {
      Xn(fe, "bpmn:Association") ? n.push(function() {
        W(fe, se);
      }) : W(fe, se);
    });
  }
  function Z(oe, se) {
    oe && (z(oe.dataInputs, r(N, se)), z(oe.dataOutputs, r(j, se)));
  }
  var X = this.handleSubProcess = function(se, fe) {
    Ve(se, fe), $(se.artifacts, fe);
  };
  function V(oe, se) {
    var fe = u(oe, se);
    Xn(oe, "bpmn:SubProcess") && X(oe, fe || se), Xn(oe, "bpmn:Activity") && Z(oe.ioSpecification, se), n.push(function() {
      z(oe.dataInputAssociations, r(P, se)), z(oe.dataOutputAssociations, r(P, se));
    });
  }
  function ae(oe, se) {
    u(oe, se);
  }
  function ie(oe, se) {
    u(oe, se);
  }
  function Ae(oe, se) {
    n.push(function() {
      var fe = u(oe, se);
      oe.childLaneSet && Rt(oe.childLaneSet, fe || se), Kt(oe);
    });
  }
  function Rt(oe, se) {
    z(oe.lanes, r(Ae, se));
  }
  function it(oe, se) {
    z(oe, r(Rt, se));
  }
  function Ve(oe, se) {
    Zt(oe.flowElements, se), oe.laneSets && it(oe.laneSets, se);
  }
  function Zt(oe, se) {
    z(oe, function(fe) {
      Xn(fe, "bpmn:SequenceFlow") ? n.push(function() {
        ae(fe, se);
      }) : Xn(fe, "bpmn:BoundaryEvent") ? n.unshift(function() {
        V(fe, se);
      }) : Xn(fe, "bpmn:FlowNode") ? V(fe, se) : Xn(fe, "bpmn:DataObject") || (Xn(fe, "bpmn:DataStoreReference") || Xn(fe, "bpmn:DataObjectReference") ? ie(fe, se) : d(
        `unrecognized flowElement ${On(fe)} in context ${On(se && se.businessObject)}`,
        {
          element: fe,
          context: se
        }
      ));
    });
  }
  function an(oe, se) {
    var fe = u(oe, se), ct = oe.processRef;
    ct && w(ct, fe || se);
  }
  function Pt(oe, se) {
    z(oe.participants, r(an, se)), $(oe.artifacts, se), n.push(function() {
      k(oe.messageFlows, se);
    });
  }
  function Kt(oe) {
    z(oe.flowNodeRef, function(se) {
      var fe = se.get("lanes");
      fe && fe.push(oe);
    });
  }
}
function A(e, t) {
  var n = he(e);
  return n && typeof n.$instanceOf == "function" && n.$instanceOf(t);
}
function rt(e, t) {
  return Dr(t, function(n) {
    return A(e, n);
  });
}
function he(e) {
  return e && e.businessObject || e;
}
function bt(e) {
  return e && e.di;
}
function fA(e, t, n) {
  var i, r, o, a, c = [];
  function l(u, d) {
    var f = {
      root: function(x, w) {
        return i.add(x, w);
      },
      element: function(x, w, D) {
        return i.add(x, w, D);
      },
      error: function(x, w) {
        c.push({ message: x, context: w });
      }
    }, y = new pA(f);
    d = d || u.diagrams && u.diagrams[0];
    var g = dA(u, d);
    if (!g)
      throw new Error("no diagram to display");
    z(g, function(x) {
      y.handleDefinitions(u, x);
    });
    var _ = d.plane.bpmnElement.id;
    o.setRootElement(
      o.findRoot(_ + "_plane") || o.findRoot(_)
    );
  }
  return new Promise(function(u, d) {
    try {
      return i = e.get("bpmnImporter"), r = e.get("eventBus"), o = e.get("canvas"), r.fire("import.render.start", { definitions: t }), l(t, n), r.fire("import.render.complete", {
        error: a,
        warnings: c
      }), u({ warnings: c });
    } catch (f) {
      return f.warnings = c, d(f);
    }
  });
}
function dA(e, t) {
  if (t) {
    var n = t.plane.bpmnElement, i = n;
    !A(n, "bpmn:Process") && !A(n, "bpmn:Collaboration") && (i = hA(n));
    var r;
    A(i, "bpmn:Collaboration") ? r = i : r = gt(e.rootElements, function(u) {
      if (A(u, "bpmn:Collaboration"))
        return gt(u.participants, function(d) {
          return d.processRef === i;
        });
    });
    var o = [i];
    r && (o = mn(r.participants, function(u) {
      return u.processRef;
    }), o.push(r));
    var a = X_(o), c = [t], l = [n];
    return z(e.diagrams, function(u) {
      var d = u.plane.bpmnElement;
      a.indexOf(d) !== -1 && l.indexOf(d) === -1 && (c.push(u), l.push(d));
    }), c;
  }
}
function X_(e) {
  var t = [];
  return z(e, function(n) {
    n && (t.push(n), t = t.concat(X_(n.flowElements)));
  }), t;
}
function hA(e) {
  for (var t = e; t; ) {
    if (A(t, "bpmn:Process"))
      return t;
    t = t.$parent;
  }
}
var mA = '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 14.02 5.57" width="53" height="21"><path fill="currentColor" d="M1.88.92v.14c0 .41-.13.68-.4.8.33.14.46.44.46.86v.33c0 .61-.33.95-.95.95H0V0h.95c.65 0 .93.3.93.92zM.63.57v1.06h.24c.24 0 .38-.1.38-.43V.98c0-.28-.1-.4-.32-.4zm0 1.63v1.22h.36c.2 0 .32-.1.32-.39v-.35c0-.37-.12-.48-.4-.48H.63zM4.18.99v.52c0 .64-.31.98-.94.98h-.3V4h-.62V0h.92c.63 0 .94.35.94.99zM2.94.57v1.35h.3c.2 0 .3-.09.3-.37v-.6c0-.29-.1-.38-.3-.38h-.3zm2.89 2.27L6.25 0h.88v4h-.6V1.12L6.1 3.99h-.6l-.46-2.82v2.82h-.55V0h.87zM8.14 1.1V4h-.56V0h.79L9 2.4V0h.56v4h-.64zm2.49 2.29v.6h-.6v-.6zM12.12 1c0-.63.33-1 .95-1 .61 0 .95.37.95 1v2.04c0 .64-.34 1-.95 1-.62 0-.95-.37-.95-1zm.62 2.08c0 .28.13.39.33.39s.32-.1.32-.4V.98c0-.29-.12-.4-.32-.4s-.33.11-.33.4z"/><path fill="currentColor" d="M0 4.53h14.02v1.04H0zM11.08 0h.63v.62h-.63zm.63 4V1h-.63v2.98z"/></svg>', Z_ = mA, J_ = {
  verticalAlign: "middle"
}, Q_ = {
  color: "#404040"
}, yA = {
  zIndex: "1001",
  position: "fixed",
  top: "0",
  left: "0",
  right: "0",
  bottom: "0"
}, gA = {
  width: "100%",
  height: "100%",
  background: "rgba(40,40,40,0.2)"
}, vA = {
  position: "absolute",
  left: "50%",
  top: "40%",
  transform: "translate(-50%)",
  width: "260px",
  padding: "10px",
  background: "white",
  boxShadow: "0 1px 4px rgba(0,0,0,0.3)",
  fontFamily: "Helvetica, Arial, sans-serif",
  fontSize: "14px",
  display: "flex",
  lineHeight: "1.3"
}, _A = '<div class="bjs-powered-by-lightbox"><div class="backdrop"></div><div class="notice"><a href="https://bpmn.io" target="_blank" rel="noopener" class="link">' + Z_ + '</a><span>Web-based tooling for BPMN, DMN and forms powered by <a href="https://bpmn.io" target="_blank" rel="noopener">bpmn.io</a>.</span></div></div>', rr;
function bA() {
  rr = Bt(_A), Rn(rr, yA), Rn(Tt("svg", rr), J_), Rn(Tt(".backdrop", rr), gA), Rn(Tt(".notice", rr), vA), Rn(Tt(".link", rr), Q_, {
    margin: "15px 20px 15px 10px",
    alignSelf: "center"
  });
}
function xA() {
  rr || (bA(), si.bind(rr, ".backdrop", "click", function(e) {
    document.body.removeChild(rr);
  })), document.body.appendChild(rr);
}
function zt(e) {
  e = G({}, wA, e), this._moddle = this._createModdle(e), this._container = this._createContainer(e), RA(this._container), this._init(this._container, this._moddle, e);
}
Pe(zt, po);
zt.prototype.importXML = async function(t, n) {
  const i = this;
  function r(a) {
    return i.get("eventBus").createEvent(a);
  }
  let o = [];
  try {
    t = this._emit("import.parse.start", { xml: t }) || t;
    let a;
    try {
      a = await this._moddle.fromXML(t, "bpmn:Definitions");
    } catch (y) {
      throw this._emit("import.parse.complete", {
        error: y
      }), y;
    }
    let c = a.rootElement;
    const l = a.references, u = a.warnings, d = a.elementsById;
    o = o.concat(u), c = this._emit("import.parse.complete", r({
      error: null,
      definitions: c,
      elementsById: d,
      references: l,
      warnings: o
    })) || c;
    const f = await this.importDefinitions(c, n);
    return o = o.concat(f.warnings), this._emit("import.done", { error: null, warnings: o }), { warnings: o };
  } catch (a) {
    let c = a;
    throw o = o.concat(c.warnings || []), Ll(c, o), c = EA(c), this._emit("import.done", { error: c, warnings: c.warnings }), c;
  }
};
zt.prototype.importDefinitions = async function(t, n) {
  return this._setDefinitions(t), { warnings: (await this.open(n)).warnings };
};
zt.prototype.open = async function(t) {
  const n = this._definitions;
  let i = t;
  if (!n) {
    const o = new Error("no XML imported");
    throw Ll(o, []), o;
  }
  if (typeof t == "string" && (i = SA(n, t), !i)) {
    const o = new Error("BPMNDiagram <" + t + "> not found");
    throw Ll(o, []), o;
  }
  try {
    this.clear();
  } catch (o) {
    throw Ll(o, []), o;
  }
  const { warnings: r } = await fA(this, n, i);
  return { warnings: r };
};
zt.prototype.saveXML = async function(t) {
  t = t || {};
  let n = this._definitions, i, r;
  try {
    if (!n)
      throw new Error("no definitions loaded");
    n = this._emit("saveXML.start", {
      definitions: n
    }) || n, r = (await this._moddle.toXML(n, t)).xml, r = this._emit("saveXML.serialized", {
      xml: r
    }) || r;
  } catch (a) {
    i = a;
  }
  const o = i ? { error: i } : { xml: r };
  if (this._emit("saveXML.done", o), i)
    throw i;
  return o;
};
zt.prototype.saveSVG = async function() {
  this._emit("saveSVG.start");
  let t, n;
  try {
    const i = this.get("canvas"), r = i.getActiveLayer(), o = Tt("defs", i._svg), a = zy(r), c = o ? "<defs>" + zy(o) + "</defs>" : "", l = r.getBBox();
    t = `<?xml version="1.0" encoding="utf-8"?>
<!-- created with bpmn-js / http://bpmn.io -->
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="` + l.width + '" height="' + l.height + '" viewBox="' + l.x + " " + l.y + " " + l.width + " " + l.height + '" version="1.1">' + c + a + "</svg>";
  } catch (i) {
    n = i;
  }
  if (this._emit("saveSVG.done", {
    error: n,
    svg: t
  }), n)
    throw n;
  return { svg: t };
};
zt.prototype._setDefinitions = function(e) {
  this._definitions = e;
};
zt.prototype.getModules = function() {
  return this._modules;
};
zt.prototype.clear = function() {
  this.getDefinitions() && po.prototype.clear.call(this);
};
zt.prototype.destroy = function() {
  po.prototype.destroy.call(this), lr(this._container);
};
zt.prototype.on = function(e, t, n, i) {
  return this.get("eventBus").on(e, t, n, i);
};
zt.prototype.off = function(e, t) {
  this.get("eventBus").off(e, t);
};
zt.prototype.attachTo = function(e) {
  if (!e)
    throw new Error("parentNode required");
  this.detach(), e.get && e.constructor.prototype.jquery && (e = e.get(0)), typeof e == "string" && (e = Tt(e)), e.appendChild(this._container), this._emit("attach", {}), this.get("canvas").resized();
};
zt.prototype.getDefinitions = function() {
  return this._definitions;
};
zt.prototype.detach = function() {
  const e = this._container, t = e.parentNode;
  t && (this._emit("detach", {}), t.removeChild(e));
};
zt.prototype._init = function(e, t, n) {
  const i = n.modules || this.getModules(n), r = n.additionalModules || [], o = [
    {
      bpmnjs: ["value", this],
      moddle: ["value", t]
    }
  ], a = [].concat(o, i, r), c = G(pr(n, ["additionalModules"]), {
    canvas: G({}, n.canvas, { container: e }),
    modules: a
  });
  po.call(this, c), n && n.container && this.attachTo(n.container);
};
zt.prototype._emit = function(e, t) {
  return this.get("eventBus").fire(e, t);
};
zt.prototype._createContainer = function(e) {
  const t = Bt('<div class="bjs-container"></div>');
  return Rn(t, {
    width: cg(e.width),
    height: cg(e.height),
    position: e.position
  }), t;
};
zt.prototype._createModdle = function(e) {
  const t = G({}, this._moddleExtensions, e.moddleExtensions);
  return new cA(t);
};
zt.prototype._modules = [];
function Ll(e, t) {
  return e.warnings = t, e;
}
function EA(e) {
  const n = /unparsable content <([^>]+)> detected([\s\S]*)$/.exec(e.message);
  return n && (e.message = "unparsable content <" + n[1] + "> detected; this may indicate an invalid BPMN 2.0 diagram file" + n[2]), e;
}
const wA = {
  width: "100%",
  height: "100%",
  position: "relative"
};
function cg(e) {
  return e + (je(e) ? "px" : "");
}
function SA(e, t) {
  return t && gt(e.diagrams, function(n) {
    return n.id === t;
  }) || null;
}
function RA(e) {
  const n = '<a href="http://bpmn.io" target="_blank" class="bjs-powered-by" title="Powered by bpmn.io" >' + Z_ + "</a>", i = Bt(n);
  Rn(Tt("svg", i), J_), Rn(i, Q_, {
    position: "absolute",
    bottom: "15px",
    right: "15px",
    zIndex: "100"
  }), e.appendChild(i), Ye.bind(i, "click", function(r) {
    xA(), r.preventDefault();
  });
}
function ac(e) {
  zt.call(this, e), this.on("import.parse.complete", function(t) {
    t.error || this._collectIds(t.definitions, t.elementsById);
  }, this), this.on("diagram.destroy", function() {
    this.get("moddle").ids.clear();
  }, this);
}
Pe(ac, zt);
ac.prototype._createModdle = function(e) {
  var t = zt.prototype._createModdle.call(this, e);
  return t.ids = new cr([32, 36, 1]), t;
};
ac.prototype._collectIds = function(e, t) {
  var n = e.$model, i = n.ids, r;
  i.clear();
  for (r in t)
    i.claim(r, t[r]);
};
function pt(e, t) {
  return A(e, "bpmn:CallActivity") ? !1 : A(e, "bpmn:SubProcess") ? (t = t || bt(e), t && A(t, "bpmndi:BPMNPlane") ? !0 : t && !!t.isExpanded) : A(e, "bpmn:Participant") ? !!he(e).processRef : !0;
}
function An(e) {
  if (!(!A(e, "bpmn:Participant") && !A(e, "bpmn:Lane"))) {
    var t = bt(e).isHorizontal;
    return t === void 0 ? !0 : t;
  }
}
function CA(e) {
  return e && he(e).isInterrupting !== !1;
}
function Nn(e) {
  return e && !!he(e).triggeredByEvent;
}
function sc(e, t) {
  var n = he(e).eventDefinitions;
  return Dr(n, function(i) {
    return A(i, t);
  });
}
function AA(e) {
  return sc(e, "bpmn:ErrorEventDefinition");
}
function PA(e) {
  return sc(e, "bpmn:EscalationEventDefinition");
}
function TA(e) {
  return sc(e, "bpmn:CompensateEventDefinition");
}
var Fs = {
  width: 90,
  height: 20
}, lg = 15;
function Zo(e) {
  return A(e, "bpmn:Event") || A(e, "bpmn:Gateway") || A(e, "bpmn:DataStoreReference") || A(e, "bpmn:DataObjectReference") || A(e, "bpmn:DataInput") || A(e, "bpmn:DataOutput") || A(e, "bpmn:SequenceFlow") || A(e, "bpmn:MessageFlow") || A(e, "bpmn:Group");
}
function Su(e) {
  return vt(e.label);
}
function kA(e) {
  var t = e.length / 2 - 1, n = e[Math.floor(t)], i = e[Math.ceil(t + 0.01)], r = MA(e), o = Math.atan((i.y - n.y) / (i.x - n.x)), a = r.x, c = r.y;
  return Math.abs(o) < Math.PI / 2 ? c -= lg : a += lg, { x: a, y: c };
}
function MA(e) {
  var t = e.length / 2 - 1, n = e[Math.floor(t)], i = e[Math.ceil(t + 0.01)];
  return {
    x: n.x + (i.x - n.x) / 2,
    y: n.y + (i.y - n.y) / 2
  };
}
function Md(e) {
  return e.waypoints ? kA(e.waypoints) : A(e, "bpmn:Group") ? {
    x: e.x + e.width / 2,
    y: e.y + Fs.height / 2
  } : {
    x: e.x + e.width / 2,
    y: e.y + e.height + Fs.height / 2
  };
}
function DA(e, t) {
  var n, i, r, o = e.label;
  return o && o.bounds ? (r = o.bounds, i = {
    width: Math.max(Fs.width, r.width),
    height: r.height
  }, n = {
    x: r.x + r.width / 2,
    y: r.y + r.height / 2
  }) : (n = Md(t), i = Fs), G({
    x: n.x - i.width / 2,
    y: n.y - i.height / 2
  }, i);
}
function eb(e) {
  if (A(e, "bpmn:FlowElement") || A(e, "bpmn:Participant") || A(e, "bpmn:Lane") || A(e, "bpmn:SequenceFlow") || A(e, "bpmn:MessageFlow") || A(e, "bpmn:DataInput") || A(e, "bpmn:DataOutput"))
    return "name";
  if (A(e, "bpmn:TextAnnotation"))
    return "text";
  if (A(e, "bpmn:Group"))
    return "categoryValueRef";
}
function OA(e) {
  var t = e.categoryValueRef;
  return t && t.value || "";
}
function ki(e) {
  var t = e.businessObject, n = eb(t);
  if (n)
    return n === "categoryValueRef" ? OA(t) : t[n] || "";
}
function NA(e, t) {
  var n = e.businessObject, i = eb(n);
  return i && (i === "categoryValueRef" ? n.categoryValueRef.value = t : n[i] = t), e;
}
var Lf = "hsl(225, 10%, 15%)", BA = "white";
function tr(e, t) {
  return Dr(e.eventDefinitions, function(n) {
    return n.$type === t;
  });
}
function LA(e) {
  return e.$type === "bpmn:IntermediateThrowEvent" || e.$type === "bpmn:EndEvent";
}
function IA(e) {
  var t = e.dataObjectRef;
  return e.isCollection || t && t.isCollection;
}
function ot(e, t, n) {
  var i = bt(e);
  return n || i.get("color:background-color") || i.get("bioc:fill") || t || BA;
}
function Ce(e, t, n) {
  var i = bt(e);
  return n || i.get("color:border-color") || i.get("bioc:stroke") || t || Lf;
}
function _s(e, t, n, i) {
  var r = bt(e), o = r.get("label");
  return i || o && o.get("color:color") || t || Ce(e, n);
}
function $A(e) {
  var t = e.x + e.width / 2, n = e.y + e.height / 2, i = e.width / 2, r = [
    ["M", t, n],
    ["m", 0, -i],
    ["a", i, i, 0, 1, 1, 0, 2 * i],
    ["a", i, i, 0, 1, 1, 0, -2 * i],
    ["z"]
  ];
  return ea(r);
}
function jA(e, t) {
  var n = e.x, i = e.y, r = e.width, o = e.height, a = [
    ["M", n + t, i],
    ["l", r - t * 2, 0],
    ["a", t, t, 0, 0, 1, t, t],
    ["l", 0, o - t * 2],
    ["a", t, t, 0, 0, 1, -t, t],
    ["l", t * 2 - r, 0],
    ["a", t, t, 0, 0, 1, -t, -t],
    ["l", 0, t * 2 - o],
    ["a", t, t, 0, 0, 1, t, -t],
    ["z"]
  ];
  return ea(a);
}
function FA(e) {
  var t = e.width, n = e.height, i = e.x, r = e.y, o = t / 2, a = n / 2, c = [
    ["M", i + o, r],
    ["l", o, a],
    ["l", -o, a],
    ["l", -o, -a],
    ["z"]
  ];
  return ea(c);
}
function HA(e) {
  var t = e.x, n = e.y, i = e.width, r = e.height, o = [
    ["M", t, n],
    ["l", i, 0],
    ["l", 0, r],
    ["l", -i, 0],
    ["z"]
  ];
  return ea(o);
}
function bs(e, t = {}) {
  return {
    width: Ri(e, t),
    height: ai(e, t)
  };
}
function Ri(e, t = {}) {
  return Zn(t, "width") ? t.width : e.width;
}
function ai(e, t = {}) {
  return Zn(t, "height") ? t.height : e.height;
}
var zA = new cr(), VA = 10, sl = 3, WA = 1.5, Il = 10, Ra = 0.95, GA = 1, UA = 0.25;
function ia(e, t, n, i, r, o, a) {
  Or.call(this, t, a);
  var c = e && e.defaultFillColor, l = e && e.defaultStrokeColor, u = e && e.defaultLabelColor, d = zA.next(), f = {};
  function y(I) {
    return n.computeStyle(I, {
      strokeLinecap: "round",
      strokeLinejoin: "round",
      stroke: Lf,
      strokeWidth: 2,
      fill: "white"
    });
  }
  function g(I) {
    return n.computeStyle(I, ["no-fill"], {
      strokeLinecap: "round",
      strokeLinejoin: "round",
      stroke: Lf,
      strokeWidth: 2
    });
  }
  function _(I, E) {
    var {
      ref: C = { x: 0, y: 0 },
      scale: F = 1,
      element: K
    } = E, ne = Me("marker", {
      id: I,
      viewBox: "0 0 20 20",
      refX: C.x,
      refY: C.y,
      markerWidth: 20 * F,
      markerHeight: 20 * F,
      orient: "auto"
    });
    ze(ne, K);
    var ke = Tt("defs", r._svg);
    ke || (ke = Me("defs"), ze(r._svg, ke)), ze(ke, ne), f[I] = ne;
  }
  function x(I) {
    return I.replace(/[^0-9a-zA-Z]+/g, "_");
  }
  function w(I, E, C) {
    var F = I + "-" + x(E) + "-" + x(C) + "-" + d;
    return f[F] || D(F, I, E, C), "url(#" + F + ")";
  }
  function D(I, E, C, F) {
    if (E === "sequenceflow-end") {
      var K = Me("path", {
        d: "M 1 5 L 11 10 L 1 15 Z",
        ...y({
          fill: F,
          stroke: F,
          strokeWidth: 1
        })
      });
      _(I, {
        element: K,
        ref: { x: 11, y: 10 },
        scale: 0.5
      });
    }
    if (E === "messageflow-start") {
      var ne = Me("circle", {
        cx: 6,
        cy: 6,
        r: 3.5,
        ...y({
          fill: C,
          stroke: F,
          strokeWidth: 1,
          // fix for safari / chrome / firefox bug not correctly
          // resetting stroke dash array
          strokeDasharray: [1e4, 1]
        })
      });
      _(I, {
        element: ne,
        ref: { x: 6, y: 6 }
      });
    }
    if (E === "messageflow-end") {
      var ke = Me("path", {
        d: "m 1 5 l 0 -3 l 7 3 l -7 3 z",
        ...y({
          fill: C,
          stroke: F,
          strokeWidth: 1,
          // fix for safari / chrome / firefox bug not correctly
          // resetting stroke dash array
          strokeDasharray: [1e4, 1]
        })
      });
      _(I, {
        element: ke,
        ref: { x: 8.5, y: 5 }
      });
    }
    if (E === "association-start") {
      var Je = Me("path", {
        d: "M 11 5 L 1 10 L 11 15",
        ...g({
          fill: "none",
          stroke: F,
          strokeWidth: 1.5,
          // fix for safari / chrome / firefox bug not correctly
          // resetting stroke dash array
          strokeDasharray: [1e4, 1]
        })
      });
      _(I, {
        element: Je,
        ref: { x: 1, y: 10 },
        scale: 0.5
      });
    }
    if (E === "association-end") {
      var Ee = Me("path", {
        d: "M 1 5 L 11 10 L 1 15",
        ...g({
          fill: "none",
          stroke: F,
          strokeWidth: 1.5,
          // fix for safari / chrome / firefox bug not correctly
          // resetting stroke dash array
          strokeDasharray: [1e4, 1]
        })
      });
      _(I, {
        element: Ee,
        ref: { x: 11, y: 10 },
        scale: 0.5
      });
    }
    if (E === "conditional-flow-marker") {
      var at = Me("path", {
        d: "M 0 10 L 8 6 L 16 10 L 8 14 Z",
        ...y({
          fill: C,
          stroke: F
        })
      });
      _(I, {
        element: at,
        ref: { x: -1, y: 10 },
        scale: 0.5
      });
    }
    if (E === "conditional-default-flow-marker") {
      var Mt = Me("path", {
        d: "M 6 4 L 10 16",
        ...y({
          stroke: F
        })
      });
      _(I, {
        element: Mt,
        ref: { x: 0, y: 10 },
        scale: 0.5
      });
    }
  }
  function O(I, E, C, F, K = {}) {
    yn(F) && (K = F, F = 0), F = F || 0, K = y(K);
    var ne = E / 2, ke = C / 2, Je = Me("circle", {
      cx: ne,
      cy: ke,
      r: Math.round((E + C) / 4 - F),
      ...K
    });
    return ze(I, Je), Je;
  }
  function k(I, E, C, F, K, ne) {
    yn(K) && (ne = K, K = 0), K = K || 0, ne = y(ne);
    var ke = Me("rect", {
      x: K,
      y: K,
      width: E - K * 2,
      height: C - K * 2,
      rx: F,
      ry: F,
      ...ne
    });
    return ze(I, ke), ke;
  }
  function P(I, E, C, F) {
    var K = E / 2, ne = C / 2, ke = [
      { x: K, y: 0 },
      { x: E, y: ne },
      { x: K, y: C },
      { x: 0, y: ne }
    ], Je = ke.map(function(at) {
      return at.x + "," + at.y;
    }).join(" ");
    F = y(F);
    var Ee = Me("polygon", {
      ...F,
      points: Je
    });
    return ze(I, Ee), Ee;
  }
  function N(I, E, C, F) {
    C = g(C);
    var K = gu(E, C, F);
    return ze(I, K), K;
  }
  function j(I, E, C) {
    return N(I, E, C, 5);
  }
  function W(I, E, C) {
    C = g(C);
    var F = Me("path", {
      ...C,
      d: E
    });
    return ze(I, F), F;
  }
  function $(I, E, C, F) {
    return W(E, C, G({ "data-marker": I }, F));
  }
  function Z(I) {
    return Ne[I];
  }
  function X(I) {
    return function(E, C, F) {
      return Z(I)(E, C, F);
    };
  }
  var V = {
    "bpmn:MessageEventDefinition": function(I, E, C = {}, F) {
      var K = i.getScaledPath("EVENT_MESSAGE", {
        xScaleFactor: 0.9,
        yScaleFactor: 0.9,
        containerWidth: E.width,
        containerHeight: E.height,
        position: {
          mx: 0.235,
          my: 0.315
        }
      }), ne = F ? Ce(E, l, C.stroke) : ot(E, c, C.fill), ke = F ? ot(E, c, C.fill) : Ce(E, l, C.stroke), Je = W(I, K, {
        fill: ne,
        stroke: ke,
        strokeWidth: 1
      });
      return Je;
    },
    "bpmn:TimerEventDefinition": function(I, E, C = {}) {
      var F = O(I, E.width, E.height, 0.2 * E.height, {
        fill: ot(E, c, C.fill),
        stroke: Ce(E, l, C.stroke),
        strokeWidth: 2
      }), K = i.getScaledPath("EVENT_TIMER_WH", {
        xScaleFactor: 0.75,
        yScaleFactor: 0.75,
        containerWidth: E.width,
        containerHeight: E.height,
        position: {
          mx: 0.5,
          my: 0.5
        }
      });
      W(I, K, {
        stroke: Ce(E, l, C.stroke),
        strokeWidth: 2
      });
      for (var ne = 0; ne < 12; ne++) {
        var ke = i.getScaledPath("EVENT_TIMER_LINE", {
          xScaleFactor: 0.75,
          yScaleFactor: 0.75,
          containerWidth: E.width,
          containerHeight: E.height,
          position: {
            mx: 0.5,
            my: 0.5
          }
        }), Je = E.width / 2, Ee = E.height / 2;
        W(I, ke, {
          strokeWidth: 1,
          stroke: Ce(E, l, C.stroke),
          transform: "rotate(" + ne * 30 + "," + Ee + "," + Je + ")"
        });
      }
      return F;
    },
    "bpmn:EscalationEventDefinition": function(I, E, C = {}, F) {
      var K = i.getScaledPath("EVENT_ESCALATION", {
        xScaleFactor: 1,
        yScaleFactor: 1,
        containerWidth: E.width,
        containerHeight: E.height,
        position: {
          mx: 0.5,
          my: 0.2
        }
      }), ne = F ? Ce(E, l, C.stroke) : ot(E, c, C.fill);
      return W(I, K, {
        fill: ne,
        stroke: Ce(E, l, C.stroke),
        strokeWidth: 1
      });
    },
    "bpmn:ConditionalEventDefinition": function(I, E, C = {}) {
      var F = i.getScaledPath("EVENT_CONDITIONAL", {
        xScaleFactor: 1,
        yScaleFactor: 1,
        containerWidth: E.width,
        containerHeight: E.height,
        position: {
          mx: 0.5,
          my: 0.222
        }
      });
      return W(I, F, {
        fill: ot(E, c, C.fill),
        stroke: Ce(E, l, C.stroke),
        strokeWidth: 1
      });
    },
    "bpmn:LinkEventDefinition": function(I, E, C = {}, F) {
      var K = i.getScaledPath("EVENT_LINK", {
        xScaleFactor: 1,
        yScaleFactor: 1,
        containerWidth: E.width,
        containerHeight: E.height,
        position: {
          mx: 0.57,
          my: 0.263
        }
      }), ne = F ? Ce(E, l, C.stroke) : ot(E, c, C.fill);
      return W(I, K, {
        fill: ne,
        stroke: Ce(E, l, C.stroke),
        strokeWidth: 1
      });
    },
    "bpmn:ErrorEventDefinition": function(I, E, C = {}, F) {
      var K = i.getScaledPath("EVENT_ERROR", {
        xScaleFactor: 1.1,
        yScaleFactor: 1.1,
        containerWidth: E.width,
        containerHeight: E.height,
        position: {
          mx: 0.2,
          my: 0.722
        }
      }), ne = F ? Ce(E, l, C.stroke) : ot(E, c, C.fill);
      return W(I, K, {
        fill: ne,
        stroke: Ce(E, l, C.stroke),
        strokeWidth: 1
      });
    },
    "bpmn:CancelEventDefinition": function(I, E, C = {}, F) {
      var K = i.getScaledPath("EVENT_CANCEL_45", {
        xScaleFactor: 1,
        yScaleFactor: 1,
        containerWidth: E.width,
        containerHeight: E.height,
        position: {
          mx: 0.638,
          my: -0.055
        }
      }), ne = F ? Ce(E, l, C.stroke) : "none", ke = W(I, K, {
        fill: ne,
        stroke: Ce(E, l, C.stroke),
        strokeWidth: 1
      });
      return N_(ke, 45), ke;
    },
    "bpmn:CompensateEventDefinition": function(I, E, C = {}, F) {
      var K = i.getScaledPath("EVENT_COMPENSATION", {
        xScaleFactor: 1,
        yScaleFactor: 1,
        containerWidth: E.width,
        containerHeight: E.height,
        position: {
          mx: 0.22,
          my: 0.5
        }
      }), ne = F ? Ce(E, l, C.stroke) : ot(E, c, C.fill);
      return W(I, K, {
        fill: ne,
        stroke: Ce(E, l, C.stroke),
        strokeWidth: 1
      });
    },
    "bpmn:SignalEventDefinition": function(I, E, C = {}, F) {
      var K = i.getScaledPath("EVENT_SIGNAL", {
        xScaleFactor: 0.9,
        yScaleFactor: 0.9,
        containerWidth: E.width,
        containerHeight: E.height,
        position: {
          mx: 0.5,
          my: 0.2
        }
      }), ne = F ? Ce(E, l, C.stroke) : ot(E, c, C.fill);
      return W(I, K, {
        strokeWidth: 1,
        fill: ne,
        stroke: Ce(E, l, C.stroke)
      });
    },
    "bpmn:MultipleEventDefinition": function(I, E, C = {}, F) {
      var K = i.getScaledPath("EVENT_MULTIPLE", {
        xScaleFactor: 1.1,
        yScaleFactor: 1.1,
        containerWidth: E.width,
        containerHeight: E.height,
        position: {
          mx: 0.222,
          my: 0.36
        }
      }), ne = F ? Ce(E, l, C.stroke) : ot(E, c, C.fill);
      return W(I, K, {
        fill: ne,
        strokeWidth: 1
      });
    },
    "bpmn:ParallelMultipleEventDefinition": function(I, E, C = {}) {
      var F = i.getScaledPath("EVENT_PARALLEL_MULTIPLE", {
        xScaleFactor: 1.2,
        yScaleFactor: 1.2,
        containerWidth: E.width,
        containerHeight: E.height,
        position: {
          mx: 0.458,
          my: 0.194
        }
      });
      return W(I, F, {
        fill: ot(E, c, C.fill),
        stroke: Ce(E, l, C.stroke),
        strokeWidth: 1
      });
    },
    "bpmn:TerminateEventDefinition": function(I, E, C = {}) {
      var F = O(I, E.width, E.height, 8, {
        fill: Ce(E, l, C.stroke),
        stroke: Ce(E, l, C.stroke),
        strokeWidth: 4
      });
      return F;
    }
  };
  function ae(I, E, C = {}) {
    var F = he(I), K = LA(F);
    return F.get("eventDefinitions") && F.get("eventDefinitions").length > 1 ? F.get("parallelMultiple") ? V["bpmn:ParallelMultipleEventDefinition"](E, I, C, K) : V["bpmn:MultipleEventDefinition"](E, I, C, K) : tr(F, "bpmn:MessageEventDefinition") ? V["bpmn:MessageEventDefinition"](E, I, C, K) : tr(F, "bpmn:TimerEventDefinition") ? V["bpmn:TimerEventDefinition"](E, I, C, K) : tr(F, "bpmn:ConditionalEventDefinition") ? V["bpmn:ConditionalEventDefinition"](E, I, C, K) : tr(F, "bpmn:SignalEventDefinition") ? V["bpmn:SignalEventDefinition"](E, I, C, K) : tr(F, "bpmn:EscalationEventDefinition") ? V["bpmn:EscalationEventDefinition"](E, I, C, K) : tr(F, "bpmn:LinkEventDefinition") ? V["bpmn:LinkEventDefinition"](E, I, C, K) : tr(F, "bpmn:ErrorEventDefinition") ? V["bpmn:ErrorEventDefinition"](E, I, C, K) : tr(F, "bpmn:CancelEventDefinition") ? V["bpmn:CancelEventDefinition"](E, I, C, K) : tr(F, "bpmn:CompensateEventDefinition") ? V["bpmn:CompensateEventDefinition"](E, I, C, K) : tr(F, "bpmn:TerminateEventDefinition") ? V["bpmn:TerminateEventDefinition"](E, I, C, K) : null;
  }
  var ie = {
    ParticipantMultiplicityMarker: function(I, E, C = {}) {
      var F = Ri(E, C), K = ai(E, C), ne = i.getScaledPath("MARKER_PARALLEL", {
        xScaleFactor: 1,
        yScaleFactor: 1,
        containerWidth: F,
        containerHeight: K,
        position: {
          mx: (F / 2 - 6) / F,
          my: (K - 15) / K
        }
      });
      $("participant-multiplicity", I, ne, {
        strokeWidth: 2,
        fill: ot(E, c, C.fill),
        stroke: Ce(E, l, C.stroke)
      });
    },
    SubProcessMarker: function(I, E, C = {}) {
      var F = k(I, 14, 14, 0, {
        strokeWidth: 1,
        fill: ot(E, c, C.fill),
        stroke: Ce(E, l, C.stroke)
      });
      Cn(F, E.width / 2 - 7.5, E.height - 20);
      var K = i.getScaledPath("MARKER_SUB_PROCESS", {
        xScaleFactor: 1.5,
        yScaleFactor: 1.5,
        containerWidth: E.width,
        containerHeight: E.height,
        position: {
          mx: (E.width / 2 - 7.5) / E.width,
          my: (E.height - 20) / E.height
        }
      });
      $("sub-process", I, K, {
        fill: ot(E, c, C.fill),
        stroke: Ce(E, l, C.stroke)
      });
    },
    ParallelMarker: function(I, E, C) {
      var F = Ri(E, C), K = ai(E, C), ne = i.getScaledPath("MARKER_PARALLEL", {
        xScaleFactor: 1,
        yScaleFactor: 1,
        containerWidth: F,
        containerHeight: K,
        position: {
          mx: (F / 2 + C.parallel) / F,
          my: (K - 20) / K
        }
      });
      $("parallel", I, ne, {
        fill: ot(E, c, C.fill),
        stroke: Ce(E, l, C.stroke)
      });
    },
    SequentialMarker: function(I, E, C) {
      var F = i.getScaledPath("MARKER_SEQUENTIAL", {
        xScaleFactor: 1,
        yScaleFactor: 1,
        containerWidth: E.width,
        containerHeight: E.height,
        position: {
          mx: (E.width / 2 + C.seq) / E.width,
          my: (E.height - 19) / E.height
        }
      });
      $("sequential", I, F, {
        fill: ot(E, c, C.fill),
        stroke: Ce(E, l, C.stroke)
      });
    },
    CompensationMarker: function(I, E, C) {
      var F = i.getScaledPath("MARKER_COMPENSATION", {
        xScaleFactor: 1,
        yScaleFactor: 1,
        containerWidth: E.width,
        containerHeight: E.height,
        position: {
          mx: (E.width / 2 + C.compensation) / E.width,
          my: (E.height - 13) / E.height
        }
      });
      $("compensation", I, F, {
        strokeWidth: 1,
        fill: ot(E, c, C.fill),
        stroke: Ce(E, l, C.stroke)
      });
    },
    LoopMarker: function(I, E, C) {
      var F = Ri(E, C), K = ai(E, C), ne = i.getScaledPath("MARKER_LOOP", {
        xScaleFactor: 1,
        yScaleFactor: 1,
        containerWidth: F,
        containerHeight: K,
        position: {
          mx: (F / 2 + C.loop) / F,
          my: (K - 7) / K
        }
      });
      $("loop", I, ne, {
        strokeWidth: 1.5,
        fill: "none",
        stroke: Ce(E, l, C.stroke),
        strokeMiterlimit: 0.5
      });
    },
    AdhocMarker: function(I, E, C) {
      var F = Ri(E, C), K = ai(E, C), ne = i.getScaledPath("MARKER_ADHOC", {
        xScaleFactor: 1,
        yScaleFactor: 1,
        containerWidth: F,
        containerHeight: K,
        position: {
          mx: (F / 2 + C.adhoc) / F,
          my: (K - 15) / K
        }
      });
      $("adhoc", I, ne, {
        strokeWidth: 1,
        fill: Ce(E, l, C.stroke),
        stroke: Ce(E, l, C.stroke)
      });
    }
  };
  function Ae(I, E, C, F) {
    ie[I](E, C, F);
  }
  function Rt(I, E, C, F = {}) {
    F = {
      fill: F.fill,
      stroke: F.stroke,
      width: Ri(E, F),
      height: ai(E, F)
    };
    var K = he(E), ne = C && C.includes("SubProcessMarker");
    ne ? F = {
      ...F,
      seq: -21,
      parallel: -22,
      compensation: -42,
      loop: -18,
      adhoc: 10
    } : F = {
      ...F,
      seq: -5,
      parallel: -6,
      compensation: -27,
      loop: 0,
      adhoc: 10
    }, z(C, function(Ee) {
      Ae(Ee, I, E, F);
    }), K.get("isForCompensation") && Ae("CompensationMarker", I, E, F), A(K, "bpmn:AdHocSubProcess") && Ae("AdhocMarker", I, E, F);
    var ke = K.get("loopCharacteristics"), Je = ke && ke.get("isSequential");
    ke && (Je === void 0 && Ae("LoopMarker", I, E, F), Je === !1 && Ae("ParallelMarker", I, E, F), Je === !0 && Ae("SequentialMarker", I, E, F));
  }
  function it(I, E, C = {}) {
    C = G({
      size: {
        width: 100
      }
    }, C);
    var F = o.createText(E || "", C);
    return dt(F).add("djs-label"), ze(I, F), F;
  }
  function Ve(I, E, C, F = {}) {
    var K = he(E), ne = bs({
      x: E.x,
      y: E.y,
      width: E.width,
      height: E.height
    }, F);
    return it(I, K.name, {
      align: C,
      box: ne,
      padding: 7,
      style: {
        fill: _s(E, u, l, F.stroke)
      }
    });
  }
  function Zt(I, E, C = {}) {
    var F = {
      width: 90,
      height: 30,
      x: E.width / 2 + E.x,
      y: E.height / 2 + E.y
    };
    return it(I, ki(E), {
      box: F,
      fitBox: !0,
      style: G(
        {},
        o.getExternalStyle(),
        {
          fill: _s(E, u, l, C.stroke)
        }
      )
    });
  }
  function an(I, E, C, F = {}) {
    var K = An(C), ne = it(I, E, {
      box: {
        height: 30,
        width: K ? ai(C, F) : Ri(C, F)
      },
      align: "center-middle",
      style: {
        fill: _s(C, u, l, F.stroke)
      }
    });
    if (K) {
      var ke = -1 * ai(C, F);
      Bl(ne, 0, -ke, 270);
    }
  }
  function Pt(I, E, C = {}) {
    var {
      width: F,
      height: K
    } = bs(E, C);
    return k(I, F, K, Il, {
      ...C,
      fill: ot(E, c, C.fill),
      fillOpacity: Ra,
      stroke: Ce(E, l, C.stroke)
    });
  }
  function Kt(I, E, C = {}) {
    var F = he(E), K = ot(E, c, C.fill), ne = Ce(E, l, C.stroke);
    return (F.get("associationDirection") === "One" || F.get("associationDirection") === "Both") && (C.markerEnd = w("association-end", K, ne)), F.get("associationDirection") === "Both" && (C.markerStart = w("association-start", K, ne)), C = yt(C, [
      "markerStart",
      "markerEnd"
    ]), j(I, E.waypoints, {
      ...C,
      stroke: ne,
      strokeDasharray: "0, 5"
    });
  }
  function oe(I, E, C = {}) {
    var F = ot(E, c, C.fill), K = Ce(E, l, C.stroke), ne = i.getScaledPath("DATA_OBJECT_PATH", {
      xScaleFactor: 1,
      yScaleFactor: 1,
      containerWidth: E.width,
      containerHeight: E.height,
      position: {
        mx: 0.474,
        my: 0.296
      }
    }), ke = W(I, ne, {
      fill: F,
      fillOpacity: Ra,
      stroke: K
    }), Je = he(E);
    if (IA(Je)) {
      var Ee = i.getScaledPath("DATA_OBJECT_COLLECTION_PATH", {
        xScaleFactor: 1,
        yScaleFactor: 1,
        containerWidth: E.width,
        containerHeight: E.height,
        position: {
          mx: 0.33,
          my: (E.height - 18) / E.height
        }
      });
      W(I, Ee, {
        strokeWidth: 2,
        fill: F,
        stroke: K
      });
    }
    return ke;
  }
  function se(I, E, C = {}) {
    return O(I, E.width, E.height, {
      fillOpacity: Ra,
      ...C,
      fill: ot(E, c, C.fill),
      stroke: Ce(E, l, C.stroke)
    });
  }
  function fe(I, E, C = {}) {
    return P(I, E.width, E.height, {
      fill: ot(E, c, C.fill),
      fillOpacity: Ra,
      stroke: Ce(E, l, C.stroke)
    });
  }
  function ct(I, E, C = {}) {
    var F = k(I, Ri(E, C), ai(E, C), 0, {
      fill: ot(E, c, C.fill),
      fillOpacity: C.fillOpacity || Ra,
      stroke: Ce(E, l, C.stroke),
      strokeWidth: 1.5
    }), K = he(E);
    if (A(K, "bpmn:Lane")) {
      var ne = K.get("name");
      an(I, ne, E, C);
    }
    return F;
  }
  function Lt(I, E, C = {}) {
    var F = Pt(I, E, C);
    Nn(E) && we(F, {
      strokeDasharray: "0, 5.5",
      strokeWidth: 2.5
    });
    var K = pt(E);
    return Ve(I, E, K ? "center-top" : "center-middle", C), K ? Rt(I, E, void 0, C) : Rt(I, E, ["SubProcessMarker"], C), F;
  }
  function Et(I, E, C = {}) {
    var F = Pt(I, E, C);
    return Ve(I, E, "center-middle", C), Rt(I, E, void 0, C), F;
  }
  var Ne = this.handlers = {
    "bpmn:AdHocSubProcess": function(I, E, C = {}) {
      return pt(E) ? C = yt(C, [
        "fill",
        "stroke",
        "width",
        "height"
      ]) : C = yt(C, [
        "fill",
        "stroke"
      ]), Lt(I, E, C);
    },
    "bpmn:Association": function(I, E, C = {}) {
      return C = yt(C, [
        "fill",
        "stroke"
      ]), Kt(I, E, C);
    },
    "bpmn:BoundaryEvent": function(I, E, C = {}) {
      var { renderIcon: F = !0 } = C;
      C = yt(C, [
        "fill",
        "stroke"
      ]);
      var K = he(E), ne = K.get("cancelActivity");
      C = {
        strokeWidth: 1.5,
        fill: ot(E, c, C.fill),
        fillOpacity: GA,
        stroke: Ce(E, l, C.stroke)
      }, ne || (C.strokeDasharray = "6");
      var ke = se(I, E, C);
      return O(I, E.width, E.height, sl, {
        ...C,
        fill: "none"
      }), F && ae(E, I, C), ke;
    },
    "bpmn:BusinessRuleTask": function(I, E, C = {}) {
      C = yt(C, [
        "fill",
        "stroke"
      ]);
      var F = Et(I, E, C), K = i.getScaledPath("TASK_TYPE_BUSINESS_RULE_MAIN", {
        abspos: {
          x: 8,
          y: 8
        }
      }), ne = W(I, K);
      we(ne, {
        fill: ot(E, c, C.fill),
        stroke: Ce(E, l, C.stroke),
        strokeWidth: 1
      });
      var ke = i.getScaledPath("TASK_TYPE_BUSINESS_RULE_HEADER", {
        abspos: {
          x: 8,
          y: 8
        }
      }), Je = W(I, ke);
      return we(Je, {
        fill: Ce(E, l, C.stroke),
        stroke: Ce(E, l, C.stroke),
        strokeWidth: 1
      }), F;
    },
    "bpmn:CallActivity": function(I, E, C = {}) {
      return C = yt(C, [
        "fill",
        "stroke"
      ]), Lt(I, E, {
        strokeWidth: 5,
        ...C
      });
    },
    "bpmn:ComplexGateway": function(I, E, C = {}) {
      C = yt(C, [
        "fill",
        "stroke"
      ]);
      var F = fe(I, E, C), K = i.getScaledPath("GATEWAY_COMPLEX", {
        xScaleFactor: 0.5,
        yScaleFactor: 0.5,
        containerWidth: E.width,
        containerHeight: E.height,
        position: {
          mx: 0.46,
          my: 0.26
        }
      });
      return W(I, K, {
        fill: Ce(E, l, C.stroke),
        stroke: Ce(E, l, C.stroke),
        strokeWidth: 1
      }), F;
    },
    "bpmn:DataInput": function(I, E, C = {}) {
      C = yt(C, [
        "fill",
        "stroke"
      ]);
      var F = i.getRawPath("DATA_ARROW"), K = oe(I, E, C);
      return W(I, F, {
        fill: "none",
        stroke: Ce(E, l, C.stroke),
        strokeWidth: 1
      }), K;
    },
    "bpmn:DataInputAssociation": function(I, E, C = {}) {
      return C = yt(C, [
        "fill",
        "stroke"
      ]), Kt(I, E, {
        ...C,
        markerEnd: w("association-end", ot(E, c, C.fill), Ce(E, l, C.stroke))
      });
    },
    "bpmn:DataObject": function(I, E, C = {}) {
      return C = yt(C, [
        "fill",
        "stroke"
      ]), oe(I, E, C);
    },
    "bpmn:DataObjectReference": X("bpmn:DataObject"),
    "bpmn:DataOutput": function(I, E, C = {}) {
      C = yt(C, [
        "fill",
        "stroke"
      ]);
      var F = i.getRawPath("DATA_ARROW"), K = oe(I, E, C);
      return W(I, F, {
        strokeWidth: 1,
        fill: ot(E, c, C.fill),
        stroke: Ce(E, l, C.stroke)
      }), K;
    },
    "bpmn:DataOutputAssociation": function(I, E, C = {}) {
      return C = yt(C, [
        "fill",
        "stroke"
      ]), Kt(I, E, {
        ...C,
        markerEnd: w("association-end", ot(E, c, C.fill), Ce(E, l, C.stroke))
      });
    },
    "bpmn:DataStoreReference": function(I, E, C = {}) {
      C = yt(C, [
        "fill",
        "stroke"
      ]);
      var F = i.getScaledPath("DATA_STORE", {
        xScaleFactor: 1,
        yScaleFactor: 1,
        containerWidth: E.width,
        containerHeight: E.height,
        position: {
          mx: 0,
          my: 0.133
        }
      });
      return W(I, F, {
        fill: ot(E, c, C.fill),
        fillOpacity: Ra,
        stroke: Ce(E, l, C.stroke),
        strokeWidth: 2
      });
    },
    "bpmn:EndEvent": function(I, E, C = {}) {
      var { renderIcon: F = !0 } = C;
      C = yt(C, [
        "fill",
        "stroke"
      ]);
      var K = se(I, E, {
        ...C,
        strokeWidth: 4
      });
      return F && ae(E, I, C), K;
    },
    "bpmn:EventBasedGateway": function(I, E, C = {}) {
      C = yt(C, [
        "fill",
        "stroke"
      ]);
      var F = he(E), K = fe(I, E, C);
      O(I, E.width, E.height, E.height * 0.2, {
        fill: ot(E, "none", C.fill),
        stroke: Ce(E, l, C.stroke),
        strokeWidth: 1
      });
      var ne = F.get("eventGatewayType"), ke = !!F.get("instantiate");
      function Je() {
        var at = i.getScaledPath("GATEWAY_EVENT_BASED", {
          xScaleFactor: 0.18,
          yScaleFactor: 0.18,
          containerWidth: E.width,
          containerHeight: E.height,
          position: {
            mx: 0.36,
            my: 0.44
          }
        });
        W(I, at, {
          fill: "none",
          stroke: Ce(E, l, C.stroke),
          strokeWidth: 2
        });
      }
      if (ne === "Parallel") {
        var Ee = i.getScaledPath("GATEWAY_PARALLEL", {
          xScaleFactor: 0.4,
          yScaleFactor: 0.4,
          containerWidth: E.width,
          containerHeight: E.height,
          position: {
            mx: 0.474,
            my: 0.296
          }
        });
        W(I, Ee, {
          fill: "none",
          stroke: Ce(E, l, C.stroke),
          strokeWidth: 1
        });
      } else
        ne === "Exclusive" && (ke || O(I, E.width, E.height, E.height * 0.26, {
          fill: "none",
          stroke: Ce(E, l, C.stroke),
          strokeWidth: 1
        }), Je());
      return K;
    },
    "bpmn:ExclusiveGateway": function(I, E, C = {}) {
      C = yt(C, [
        "fill",
        "stroke"
      ]);
      var F = fe(I, E, C), K = i.getScaledPath("GATEWAY_EXCLUSIVE", {
        xScaleFactor: 0.4,
        yScaleFactor: 0.4,
        containerWidth: E.width,
        containerHeight: E.height,
        position: {
          mx: 0.32,
          my: 0.3
        }
      }), ne = bt(E);
      return ne.get("isMarkerVisible") && W(I, K, {
        fill: Ce(E, l, C.stroke),
        stroke: Ce(E, l, C.stroke),
        strokeWidth: 1
      }), F;
    },
    "bpmn:Gateway": function(I, E, C = {}) {
      return C = yt(C, [
        "fill",
        "stroke"
      ]), fe(I, E, C);
    },
    "bpmn:Group": function(I, E, C = {}) {
      return C = yt(C, [
        "fill",
        "stroke",
        "width",
        "height"
      ]), k(I, E.width, E.height, Il, {
        stroke: Ce(E, l, C.stroke),
        strokeWidth: 1.5,
        strokeDasharray: "10, 6, 0, 6",
        fill: "none",
        pointerEvents: "none",
        width: Ri(E, C),
        height: ai(E, C)
      });
    },
    "bpmn:InclusiveGateway": function(I, E, C = {}) {
      C = yt(C, [
        "fill",
        "stroke"
      ]);
      var F = fe(I, E, C);
      return O(I, E.width, E.height, E.height * 0.24, {
        fill: ot(E, c, C.fill),
        stroke: Ce(E, l, C.stroke),
        strokeWidth: 2.5
      }), F;
    },
    "bpmn:IntermediateEvent": function(I, E, C = {}) {
      var { renderIcon: F = !0 } = C;
      C = yt(C, [
        "fill",
        "stroke"
      ]);
      var K = se(I, E, {
        ...C,
        strokeWidth: 1.5
      });
      return O(I, E.width, E.height, sl, {
        fill: "none",
        stroke: Ce(E, l, C.stroke),
        strokeWidth: 1.5
      }), F && ae(E, I, C), K;
    },
    "bpmn:IntermediateCatchEvent": X("bpmn:IntermediateEvent"),
    "bpmn:IntermediateThrowEvent": X("bpmn:IntermediateEvent"),
    "bpmn:Lane": function(I, E, C = {}) {
      return C = yt(C, [
        "fill",
        "stroke",
        "width",
        "height"
      ]), ct(I, E, {
        ...C,
        fillOpacity: UA
      });
    },
    "bpmn:ManualTask": function(I, E, C = {}) {
      C = yt(C, [
        "fill",
        "stroke"
      ]);
      var F = Et(I, E, C), K = i.getScaledPath("TASK_TYPE_MANUAL", {
        abspos: {
          x: 17,
          y: 15
        }
      });
      return W(I, K, {
        fill: ot(E, c, C.fill),
        stroke: Ce(E, l, C.stroke),
        strokeWidth: 0.5
      }), F;
    },
    "bpmn:MessageFlow": function(I, E, C = {}) {
      C = yt(C, [
        "fill",
        "stroke"
      ]);
      var F = he(E), K = bt(E), ne = ot(E, c, C.fill), ke = Ce(E, l, C.stroke), Je = j(I, E.waypoints, {
        markerEnd: w("messageflow-end", ne, ke),
        markerStart: w("messageflow-start", ne, ke),
        stroke: ke,
        strokeDasharray: "10, 11",
        strokeWidth: 1.5
      });
      if (F.get("messageRef")) {
        var Ee = Je.getPointAtLength(Je.getTotalLength() / 2), at = i.getScaledPath("MESSAGE_FLOW_MARKER", {
          abspos: {
            x: Ee.x,
            y: Ee.y
          }
        }), Mt = {
          strokeWidth: 1
        };
        K.get("messageVisibleKind") === "initiating" ? (Mt.fill = ne, Mt.stroke = ke) : (Mt.fill = ke, Mt.stroke = ne);
        var ht = W(I, at, Mt), In = F.get("messageRef"), Ii = In.get("name"), _n = it(I, Ii, {
          align: "center-top",
          fitBox: !0,
          style: {
            fill: ke
          }
        }), Be = ht.getBBox(), ft = _n.getBBox(), Po = Ee.x - ft.width / 2, Xi = Ee.y + Be.height / 2 + VA;
        Bl(_n, Po, Xi, 0);
      }
      return Je;
    },
    "bpmn:ParallelGateway": function(I, E, C = {}) {
      C = yt(C, [
        "fill",
        "stroke"
      ]);
      var F = fe(I, E, C), K = i.getScaledPath("GATEWAY_PARALLEL", {
        xScaleFactor: 0.6,
        yScaleFactor: 0.6,
        containerWidth: E.width,
        containerHeight: E.height,
        position: {
          mx: 0.46,
          my: 0.2
        }
      });
      return W(I, K, {
        fill: Ce(E, l, C.stroke),
        stroke: Ce(E, l, C.stroke),
        strokeWidth: 1
      }), F;
    },
    "bpmn:Participant": function(I, E, C = {}) {
      C = yt(C, [
        "fill",
        "stroke",
        "width",
        "height"
      ]);
      var F = ct(I, E, C), K = pt(E), ne = An(E), ke = he(E), Je = ke.get("name");
      if (K) {
        var Ee = ne ? [
          {
            x: 30,
            y: 0
          },
          {
            x: 30,
            y: ai(E, C)
          }
        ] : [
          {
            x: 0,
            y: 30
          },
          {
            x: Ri(E, C),
            y: 30
          }
        ];
        N(I, Ee, {
          stroke: Ce(E, l, C.stroke),
          strokeWidth: WA
        }), an(I, Je, E, C);
      } else {
        var at = bs(E, C);
        ne || (at.height = Ri(E, C), at.width = ai(E, C));
        var Mt = it(I, Je, {
          box: at,
          align: "center-middle",
          style: {
            fill: _s(E, u, l, C.stroke)
          }
        });
        if (!ne) {
          var ht = -1 * ai(E, C);
          Bl(Mt, 0, -ht, 270);
        }
      }
      return ke.get("participantMultiplicity") && Ae("ParticipantMultiplicityMarker", I, E, C), F;
    },
    "bpmn:ReceiveTask": function(I, E, C = {}) {
      C = yt(C, [
        "fill",
        "stroke"
      ]);
      var F = he(E), K = Et(I, E, C), ne;
      return F.get("instantiate") ? (O(I, 28, 28, 20 * 0.22, {
        fill: ot(E, c, C.fill),
        stroke: Ce(E, l, C.stroke),
        strokeWidth: 1
      }), ne = i.getScaledPath("TASK_TYPE_INSTANTIATING_SEND", {
        abspos: {
          x: 7.77,
          y: 9.52
        }
      })) : ne = i.getScaledPath("TASK_TYPE_SEND", {
        xScaleFactor: 0.9,
        yScaleFactor: 0.9,
        containerWidth: 21,
        containerHeight: 14,
        position: {
          mx: 0.3,
          my: 0.4
        }
      }), W(I, ne, {
        fill: ot(E, c, C.fill),
        stroke: Ce(E, l, C.stroke),
        strokeWidth: 1
      }), K;
    },
    "bpmn:ScriptTask": function(I, E, C = {}) {
      C = yt(C, [
        "fill",
        "stroke"
      ]);
      var F = Et(I, E, C), K = i.getScaledPath("TASK_TYPE_SCRIPT", {
        abspos: {
          x: 15,
          y: 20
        }
      });
      return W(I, K, {
        fill: ot(E, c, C.fill),
        stroke: Ce(E, l, C.stroke),
        strokeWidth: 1
      }), F;
    },
    "bpmn:SendTask": function(I, E, C = {}) {
      C = yt(C, [
        "fill",
        "stroke"
      ]);
      var F = Et(I, E, C), K = i.getScaledPath("TASK_TYPE_SEND", {
        xScaleFactor: 1,
        yScaleFactor: 1,
        containerWidth: 21,
        containerHeight: 14,
        position: {
          mx: 0.285,
          my: 0.357
        }
      });
      return W(I, K, {
        fill: Ce(E, l, C.stroke),
        stroke: ot(E, c, C.fill),
        strokeWidth: 1
      }), F;
    },
    "bpmn:SequenceFlow": function(I, E, C = {}) {
      C = yt(C, [
        "fill",
        "stroke"
      ]);
      var F = ot(E, c, C.fill), K = Ce(E, l, C.stroke), ne = j(I, E.waypoints, {
        markerEnd: w("sequenceflow-end", F, K),
        stroke: K
      }), ke = he(E), { source: Je } = E;
      if (Je) {
        var Ee = he(Je);
        ke.get("conditionExpression") && A(Ee, "bpmn:Activity") && we(ne, {
          markerStart: w("conditional-flow-marker", F, K)
        }), Ee.get("default") && (A(Ee, "bpmn:Gateway") || A(Ee, "bpmn:Activity")) && Ee.get("default") === ke && we(ne, {
          markerStart: w("conditional-default-flow-marker", F, K)
        });
      }
      return ne;
    },
    "bpmn:ServiceTask": function(I, E, C = {}) {
      C = yt(C, [
        "fill",
        "stroke"
      ]);
      var F = Et(I, E, C);
      O(I, 10, 10, {
        fill: ot(E, c, C.fill),
        stroke: "none",
        transform: "translate(6, 6)"
      });
      var K = i.getScaledPath("TASK_TYPE_SERVICE", {
        abspos: {
          x: 12,
          y: 18
        }
      });
      W(I, K, {
        fill: ot(E, c, C.fill),
        stroke: Ce(E, l, C.stroke),
        strokeWidth: 1
      }), O(I, 10, 10, {
        fill: ot(E, c, C.fill),
        stroke: "none",
        transform: "translate(11, 10)"
      });
      var ne = i.getScaledPath("TASK_TYPE_SERVICE", {
        abspos: {
          x: 17,
          y: 22
        }
      });
      return W(I, ne, {
        fill: ot(E, c, C.fill),
        stroke: Ce(E, l, C.stroke),
        strokeWidth: 1
      }), F;
    },
    "bpmn:StartEvent": function(I, E, C = {}) {
      var { renderIcon: F = !0 } = C;
      C = yt(C, [
        "fill",
        "stroke"
      ]);
      var K = he(E);
      K.get("isInterrupting") || (C = {
        ...C,
        strokeDasharray: "6"
      });
      var ne = se(I, E, C);
      return F && ae(E, I, C), ne;
    },
    "bpmn:SubProcess": function(I, E, C = {}) {
      return pt(E) ? C = yt(C, [
        "fill",
        "stroke",
        "width",
        "height"
      ]) : C = yt(C, [
        "fill",
        "stroke"
      ]), Lt(I, E, C);
    },
    "bpmn:Task": function(I, E, C = {}) {
      return C = yt(C, [
        "fill",
        "stroke"
      ]), Et(I, E, C);
    },
    "bpmn:TextAnnotation": function(I, E, C = {}) {
      C = yt(C, [
        "fill",
        "stroke",
        "width",
        "height"
      ]);
      var {
        width: F,
        height: K
      } = bs(E, C), ne = k(I, F, K, 0, 0, {
        fill: "none",
        stroke: "none"
      }), ke = i.getScaledPath("TEXT_ANNOTATION", {
        xScaleFactor: 1,
        yScaleFactor: 1,
        containerWidth: F,
        containerHeight: K,
        position: {
          mx: 0,
          my: 0
        }
      });
      W(I, ke, {
        stroke: Ce(E, l, C.stroke)
      });
      var Je = he(E), Ee = Je.get("text") || "";
      return it(I, Ee, {
        align: "left-top",
        box: bs(E, C),
        padding: 7,
        style: {
          fill: _s(E, u, l, C.stroke)
        }
      }), ne;
    },
    "bpmn:Transaction": function(I, E, C = {}) {
      pt(E) ? C = yt(C, [
        "fill",
        "stroke",
        "width",
        "height"
      ]) : C = yt(C, [
        "fill",
        "stroke"
      ]);
      var F = Lt(I, E, {
        strokeWidth: 1.5,
        ...C
      }), K = n.style(["no-fill", "no-events"], {
        stroke: Ce(E, l, C.stroke),
        strokeWidth: 1.5
      }), ne = pt(E);
      return ne || (C = {}), k(
        I,
        Ri(E, C),
        ai(E, C),
        Il - sl,
        sl,
        K
      ), F;
    },
    "bpmn:UserTask": function(I, E, C = {}) {
      C = yt(C, [
        "fill",
        "stroke"
      ]);
      var F = Et(I, E, C), K = 15, ne = 12, ke = i.getScaledPath("TASK_TYPE_USER_1", {
        abspos: {
          x: K,
          y: ne
        }
      });
      W(I, ke, {
        fill: ot(E, c, C.fill),
        stroke: Ce(E, l, C.stroke),
        strokeWidth: 0.5
      });
      var Je = i.getScaledPath("TASK_TYPE_USER_2", {
        abspos: {
          x: K,
          y: ne
        }
      });
      W(I, Je, {
        fill: ot(E, c, C.fill),
        stroke: Ce(E, l, C.stroke),
        strokeWidth: 0.5
      });
      var Ee = i.getScaledPath("TASK_TYPE_USER_3", {
        abspos: {
          x: K,
          y: ne
        }
      });
      return W(I, Ee, {
        fill: Ce(E, l, C.stroke),
        stroke: Ce(E, l, C.stroke),
        strokeWidth: 0.5
      }), F;
    },
    label: function(I, E, C = {}) {
      return Zt(I, E, C);
    }
  };
  this._drawPath = W, this._renderer = Z;
}
Pe(ia, Or);
ia.$inject = [
  "config.bpmnRenderer",
  "eventBus",
  "styles",
  "pathMap",
  "canvas",
  "textRenderer"
];
ia.prototype.canRender = function(e) {
  return A(e, "bpmn:BaseElement");
};
ia.prototype.drawShape = function(e, t, n = {}) {
  var { type: i } = t, r = this._renderer(i);
  return r(e, t, n);
};
ia.prototype.drawConnection = function(e, t, n = {}) {
  var { type: i } = t, r = this._renderer(i);
  return r(e, t, n);
};
ia.prototype.getShapePath = function(e) {
  return A(e, "bpmn:Event") ? $A(e) : A(e, "bpmn:Activity") ? jA(e, Il) : A(e, "bpmn:Gateway") ? FA(e) : HA(e);
};
function yt(e, t = []) {
  return t.reduce((n, i) => (e[i] && (n[i] = e[i]), n), {});
}
var YA = 0, KA = {
  width: 150,
  height: 50
};
function qA(e) {
  var t = e.split("-");
  return {
    horizontal: t[0] || "center",
    vertical: t[1] || "top"
  };
}
function XA(e) {
  return yn(e) ? G({ top: 0, left: 0, right: 0, bottom: 0 }, e) : {
    top: e,
    left: e,
    right: e,
    bottom: e
  };
}
function ZA(e, t) {
  t.textContent = e;
  var n;
  try {
    var i, r = e === "";
    return t.textContent = r ? "dummy" : e, n = t.getBBox(), i = {
      width: n.width + n.x * 2,
      height: n.height
    }, r && (i.width = 0), i;
  } catch {
    return { width: 0, height: 0 };
  }
}
function JA(e, t, n) {
  for (var i = e.shift(), r = i, o; ; ) {
    if (o = ZA(r, n), o.width = r ? o.width : 0, r === " " || r === "" || o.width < Math.round(t) || r.length < 2)
      return QA(e, r, i, o);
    r = t2(r, o.width, t);
  }
}
function QA(e, t, n, i) {
  if (t.length < n.length) {
    var r = n.slice(t.length).trim();
    e.unshift(r);
  }
  return {
    width: i.width,
    height: i.height,
    text: t
  };
}
var ug = "";
function e2(e, t) {
  var n = e.split(/(\s|-|\u00AD)/g), i, r = [], o = 0;
  if (n.length > 1)
    for (; i = n.shift(); )
      if (i.length + o < t)
        r.push(i), o += i.length;
      else {
        (i === "-" || i === ug) && r.pop();
        break;
      }
  var a = r[r.length - 1];
  return a && a === ug && (r[r.length - 1] = "-"), r.join("");
}
function t2(e, t, n) {
  var i = Math.max(e.length * (n / t), 1), r = e2(e, i);
  return r || (r = e.slice(0, Math.max(Math.round(i - 1), 1))), r;
}
function n2() {
  var e = document.getElementById("helper-svg");
  return e || (e = Me("svg"), we(e, {
    id: "helper-svg"
  }), Rn(e, {
    visibility: "hidden",
    position: "fixed",
    width: 0,
    height: 0
  }), document.body.appendChild(e)), e;
}
function Ru(e) {
  this._config = G({}, {
    size: KA,
    padding: YA,
    style: {},
    align: "center-top"
  }, e || {});
}
Ru.prototype.createText = function(e, t) {
  return this.layoutText(e, t).element;
};
Ru.prototype.getDimensions = function(e, t) {
  return this.layoutText(e, t).dimensions;
};
Ru.prototype.layoutText = function(e, t) {
  var n = G({}, this._config.size, t.box), i = G({}, this._config.style, t.style), r = qA(t.align || this._config.align), o = XA(t.padding !== void 0 ? t.padding : this._config.padding), a = t.fitBox || !1, c = i2(i), l = e.split(/\u00AD?\r?\n/), u = [], d = n.width - o.left - o.right, f = Me("text");
  we(f, { x: 0, y: 0 }), we(f, i);
  var y = n2();
  for (ze(y, f); l.length; )
    u.push(JA(l, d, f));
  r.vertical === "middle" && (o.top = o.bottom = 0);
  var g = li(u, function(O, k, P) {
    return O + (c || k.height);
  }, 0) + o.top + o.bottom, _ = li(u, function(O, k, P) {
    return k.width > O ? k.width : O;
  }, 0), x = o.top;
  r.vertical === "middle" && (x += (n.height - g) / 2), x -= (c || u[0].height) / 4;
  var w = Me("text");
  we(w, i), z(u, function(O) {
    var k;
    switch (x += c || O.height, r.horizontal) {
      case "left":
        k = o.left;
        break;
      case "right":
        k = (a ? _ : d) - o.right - O.width;
        break;
      default:
        k = Math.max(((a ? _ : d) - O.width) / 2 + o.left, 0);
    }
    var P = Me("tspan");
    we(P, { x: k, y: x }), P.textContent = O.text, ze(w, P);
  }), qt(f);
  var D = {
    width: _,
    height: g
  };
  return {
    dimensions: D,
    element: w
  };
};
function i2(e) {
  if ("fontSize" in e && "lineHeight" in e)
    return e.lineHeight * parseInt(e.fontSize, 10);
}
var r2 = 12, o2 = 1.2, a2 = 30;
function tb(e) {
  var t = G({
    fontFamily: "Arial, sans-serif",
    fontSize: r2,
    fontWeight: "normal",
    lineHeight: o2
  }, e && e.defaultStyle || {}), n = parseInt(t.fontSize, 10) - 1, i = G({}, t, {
    fontSize: n
  }, e && e.externalStyle || {}), r = new Ru({
    style: t
  });
  this.getExternalLabelBounds = function(o, a) {
    var c = r.getDimensions(a, {
      box: {
        width: 90,
        height: 30
      },
      style: i
    });
    return {
      x: Math.round(o.x + o.width / 2 - c.width / 2),
      y: Math.round(o.y),
      width: Math.ceil(c.width),
      height: Math.ceil(c.height)
    };
  }, this.getTextAnnotationBounds = function(o, a) {
    var c = r.getDimensions(a, {
      box: o,
      style: t,
      align: "left-top",
      padding: 5
    });
    return {
      x: o.x,
      y: o.y,
      width: o.width,
      height: Math.max(a2, Math.round(c.height))
    };
  }, this.createText = function(o, a) {
    return r.createText(o, a || {});
  }, this.getDefaultStyle = function() {
    return t;
  }, this.getExternalStyle = function() {
    return i;
  };
}
tb.$inject = [
  "config.textRenderer"
];
function s2() {
  this.pathMap = {
    EVENT_MESSAGE: {
      d: "m {mx},{my} l 0,{e.y1} l {e.x1},0 l 0,-{e.y1} z l {e.x0},{e.y0} l {e.x0},-{e.y0}",
      height: 36,
      width: 36,
      heightElements: [6, 14],
      widthElements: [10.5, 21]
    },
    EVENT_SIGNAL: {
      d: "M {mx},{my} l {e.x0},{e.y0} l -{e.x1},0 Z",
      height: 36,
      width: 36,
      heightElements: [18],
      widthElements: [10, 20]
    },
    EVENT_ESCALATION: {
      d: "M {mx},{my} l {e.x0},{e.y0} l -{e.x0},-{e.y1} l -{e.x0},{e.y1} Z",
      height: 36,
      width: 36,
      heightElements: [20, 7],
      widthElements: [8]
    },
    EVENT_CONDITIONAL: {
      d: "M {e.x0},{e.y0} l {e.x1},0 l 0,{e.y2} l -{e.x1},0 Z M {e.x2},{e.y3} l {e.x0},0 M {e.x2},{e.y4} l {e.x0},0 M {e.x2},{e.y5} l {e.x0},0 M {e.x2},{e.y6} l {e.x0},0 M {e.x2},{e.y7} l {e.x0},0 M {e.x2},{e.y8} l {e.x0},0 ",
      height: 36,
      width: 36,
      heightElements: [8.5, 14.5, 18, 11.5, 14.5, 17.5, 20.5, 23.5, 26.5],
      widthElements: [10.5, 14.5, 12.5]
    },
    EVENT_LINK: {
      d: "m {mx},{my} 0,{e.y0} -{e.x1},0 0,{e.y1} {e.x1},0 0,{e.y0} {e.x0},-{e.y2} -{e.x0},-{e.y2} z",
      height: 36,
      width: 36,
      heightElements: [4.4375, 6.75, 7.8125],
      widthElements: [9.84375, 13.5]
    },
    EVENT_ERROR: {
      d: "m {mx},{my} {e.x0},-{e.y0} {e.x1},-{e.y1} {e.x2},{e.y2} {e.x3},-{e.y3} -{e.x4},{e.y4} -{e.x5},-{e.y5} z",
      height: 36,
      width: 36,
      heightElements: [0.023, 8.737, 8.151, 16.564, 10.591, 8.714],
      widthElements: [0.085, 6.672, 6.97, 4.273, 5.337, 6.636]
    },
    EVENT_CANCEL_45: {
      d: "m {mx},{my} -{e.x1},0 0,{e.x0} {e.x1},0 0,{e.y1} {e.x0},0 0,-{e.y1} {e.x1},0 0,-{e.y0} -{e.x1},0 0,-{e.y1} -{e.x0},0 z",
      height: 36,
      width: 36,
      heightElements: [4.75, 8.5],
      widthElements: [4.75, 8.5]
    },
    EVENT_COMPENSATION: {
      d: "m {mx},{my} {e.x0},-{e.y0} 0,{e.y1} z m {e.x1},-{e.y2} {e.x2},-{e.y3} 0,{e.y1} -{e.x2},-{e.y3} z",
      height: 36,
      width: 36,
      heightElements: [6.5, 13, 0.4, 6.1],
      widthElements: [9, 9.3, 8.7]
    },
    EVENT_TIMER_WH: {
      d: "M {mx},{my} l {e.x0},-{e.y0} m -{e.x0},{e.y0} l {e.x1},{e.y1} ",
      height: 36,
      width: 36,
      heightElements: [10, 2],
      widthElements: [3, 7]
    },
    EVENT_TIMER_LINE: {
      d: "M {mx},{my} m {e.x0},{e.y0} l -{e.x1},{e.y1} ",
      height: 36,
      width: 36,
      heightElements: [10, 3],
      widthElements: [0, 0]
    },
    EVENT_MULTIPLE: {
      d: "m {mx},{my} {e.x1},-{e.y0} {e.x1},{e.y0} -{e.x0},{e.y1} -{e.x2},0 z",
      height: 36,
      width: 36,
      heightElements: [6.28099, 12.56199],
      widthElements: [3.1405, 9.42149, 12.56198]
    },
    EVENT_PARALLEL_MULTIPLE: {
      d: "m {mx},{my} {e.x0},0 0,{e.y1} {e.x1},0 0,{e.y0} -{e.x1},0 0,{e.y1} -{e.x0},0 0,-{e.y1} -{e.x1},0 0,-{e.y0} {e.x1},0 z",
      height: 36,
      width: 36,
      heightElements: [2.56228, 7.68683],
      widthElements: [2.56228, 7.68683]
    },
    GATEWAY_EXCLUSIVE: {
      d: "m {mx},{my} {e.x0},{e.y0} {e.x1},{e.y0} {e.x2},0 {e.x4},{e.y2} {e.x4},{e.y1} {e.x2},0 {e.x1},{e.y3} {e.x0},{e.y3} {e.x3},0 {e.x5},{e.y1} {e.x5},{e.y2} {e.x3},0 z",
      height: 17.5,
      width: 17.5,
      heightElements: [8.5, 6.5312, -6.5312, -8.5],
      widthElements: [6.5, -6.5, 3, -3, 5, -5]
    },
    GATEWAY_PARALLEL: {
      d: "m {mx},{my} 0,{e.y1} -{e.x1},0 0,{e.y0} {e.x1},0 0,{e.y1} {e.x0},0 0,-{e.y1} {e.x1},0 0,-{e.y0} -{e.x1},0 0,-{e.y1} -{e.x0},0 z",
      height: 30,
      width: 30,
      heightElements: [5, 12.5],
      widthElements: [5, 12.5]
    },
    GATEWAY_EVENT_BASED: {
      d: "m {mx},{my} {e.x0},{e.y0} {e.x0},{e.y1} {e.x1},{e.y2} {e.x2},0 z",
      height: 11,
      width: 11,
      heightElements: [-6, 6, 12, -12],
      widthElements: [9, -3, -12]
    },
    GATEWAY_COMPLEX: {
      d: "m {mx},{my} 0,{e.y0} -{e.x0},-{e.y1} -{e.x1},{e.y2} {e.x0},{e.y1} -{e.x2},0 0,{e.y3} {e.x2},0  -{e.x0},{e.y1} l {e.x1},{e.y2} {e.x0},-{e.y1} 0,{e.y0} {e.x3},0 0,-{e.y0} {e.x0},{e.y1} {e.x1},-{e.y2} -{e.x0},-{e.y1} {e.x2},0 0,-{e.y3} -{e.x2},0 {e.x0},-{e.y1} -{e.x1},-{e.y2} -{e.x0},{e.y1} 0,-{e.y0} -{e.x3},0 z",
      height: 17.125,
      width: 17.125,
      heightElements: [4.875, 3.4375, 2.125, 3],
      widthElements: [3.4375, 2.125, 4.875, 3]
    },
    DATA_OBJECT_PATH: {
      d: "m 0,0 {e.x1},0 {e.x0},{e.y0} 0,{e.y1} -{e.x2},0 0,-{e.y2} {e.x1},0 0,{e.y0} {e.x0},0",
      height: 61,
      width: 51,
      heightElements: [10, 50, 60],
      widthElements: [10, 40, 50, 60]
    },
    DATA_OBJECT_COLLECTION_PATH: {
      d: "m{mx},{my} m 3,2 l 0,10 m 3,-10 l 0,10 m 3,-10 l 0,10",
      height: 10,
      width: 10,
      heightElements: [],
      widthElements: []
    },
    DATA_ARROW: {
      d: "m 5,9 9,0 0,-3 5,5 -5,5 0,-3 -9,0 z",
      height: 61,
      width: 51,
      heightElements: [],
      widthElements: []
    },
    DATA_STORE: {
      d: "m  {mx},{my} l  0,{e.y2} c  {e.x0},{e.y1} {e.x1},{e.y1}  {e.x2},0 l  0,-{e.y2} c -{e.x0},-{e.y1} -{e.x1},-{e.y1} -{e.x2},0c  {e.x0},{e.y1} {e.x1},{e.y1}  {e.x2},0 m  -{e.x2},{e.y0}c  {e.x0},{e.y1} {e.x1},{e.y1} {e.x2},0m  -{e.x2},{e.y0}c  {e.x0},{e.y1} {e.x1},{e.y1}  {e.x2},0",
      height: 61,
      width: 61,
      heightElements: [7, 10, 45],
      widthElements: [2, 58, 60]
    },
    TEXT_ANNOTATION: {
      d: "m {mx}, {my} m 10,0 l -10,0 l 0,{e.y0} l 10,0",
      height: 30,
      width: 10,
      heightElements: [30],
      widthElements: [10]
    },
    MARKER_SUB_PROCESS: {
      d: "m{mx},{my} m 7,2 l 0,10 m -5,-5 l 10,0",
      height: 10,
      width: 10,
      heightElements: [],
      widthElements: []
    },
    MARKER_PARALLEL: {
      d: "m{mx},{my} m 3,2 l 0,10 m 3,-10 l 0,10 m 3,-10 l 0,10",
      height: 10,
      width: 10,
      heightElements: [],
      widthElements: []
    },
    MARKER_SEQUENTIAL: {
      d: "m{mx},{my} m 0,3 l 10,0 m -10,3 l 10,0 m -10,3 l 10,0",
      height: 10,
      width: 10,
      heightElements: [],
      widthElements: []
    },
    MARKER_COMPENSATION: {
      d: "m {mx},{my} 7,-5 0,10 z m 7.1,-0.3 6.9,-4.7 0,10 -6.9,-4.7 z",
      height: 10,
      width: 21,
      heightElements: [],
      widthElements: []
    },
    MARKER_LOOP: {
      d: "m {mx},{my} c 3.526979,0 6.386161,-2.829858 6.386161,-6.320661 0,-3.490806 -2.859182,-6.320661 -6.386161,-6.320661 -3.526978,0 -6.38616,2.829855 -6.38616,6.320661 0,1.745402 0.714797,3.325567 1.870463,4.469381 0.577834,0.571908 1.265885,1.034728 2.029916,1.35457 l -0.718163,-3.909793 m 0.718163,3.909793 -3.885211,0.802902",
      height: 13.9,
      width: 13.7,
      heightElements: [],
      widthElements: []
    },
    MARKER_ADHOC: {
      d: "m {mx},{my} m 0.84461,2.64411 c 1.05533,-1.23780996 2.64337,-2.07882 4.29653,-1.97997996 2.05163,0.0805 3.85579,1.15803 5.76082,1.79107 1.06385,0.34139996 2.24454,0.1438 3.18759,-0.43767 0.61743,-0.33642 1.2775,-0.64078 1.7542,-1.17511 0,0.56023 0,1.12046 0,1.6807 -0.98706,0.96237996 -2.29792,1.62393996 -3.6918,1.66181996 -1.24459,0.0927 -2.46671,-0.2491 -3.59505,-0.74812 -1.35789,-0.55965 -2.75133,-1.33436996 -4.27027,-1.18121996 -1.37741,0.14601 -2.41842,1.13685996 -3.44288,1.96782996 z",
      height: 4,
      width: 15,
      heightElements: [],
      widthElements: []
    },
    TASK_TYPE_SEND: {
      d: "m {mx},{my} l 0,{e.y1} l {e.x1},0 l 0,-{e.y1} z l {e.x0},{e.y0} l {e.x0},-{e.y0}",
      height: 14,
      width: 21,
      heightElements: [6, 14],
      widthElements: [10.5, 21]
    },
    TASK_TYPE_SCRIPT: {
      d: "m {mx},{my} c 9.966553,-6.27276 -8.000926,-7.91932 2.968968,-14.938 l -8.802728,0 c -10.969894,7.01868 6.997585,8.66524 -2.968967,14.938 z m -7,-12 l 5,0 m -4.5,3 l 4.5,0 m -3,3 l 5,0m -4,3 l 5,0",
      height: 15,
      width: 12.6,
      heightElements: [6, 14],
      widthElements: [10.5, 21]
    },
    TASK_TYPE_USER_1: {
      d: "m {mx},{my} c 0.909,-0.845 1.594,-2.049 1.594,-3.385 0,-2.554 -1.805,-4.62199999 -4.357,-4.62199999 -2.55199998,0 -4.28799998,2.06799999 -4.28799998,4.62199999 0,1.348 0.974,2.562 1.89599998,3.405 -0.52899998,0.187 -5.669,2.097 -5.794,4.7560005 v 6.718 h 17 v -6.718 c 0,-2.2980005 -5.5279996,-4.5950005 -6.0509996,-4.7760005 zm -8,6 l 0,5.5 m 11,0 l 0,-5"
    },
    TASK_TYPE_USER_2: {
      d: "m {mx},{my} m 2.162,1.009 c 0,2.4470005 -2.158,4.4310005 -4.821,4.4310005 -2.66499998,0 -4.822,-1.981 -4.822,-4.4310005 "
    },
    TASK_TYPE_USER_3: {
      d: "m {mx},{my} m -6.9,-3.80 c 0,0 2.25099998,-2.358 4.27399998,-1.177 2.024,1.181 4.221,1.537 4.124,0.965 -0.098,-0.57 -0.117,-3.79099999 -4.191,-4.13599999 -3.57499998,0.001 -4.20799998,3.36699999 -4.20699998,4.34799999 z"
    },
    TASK_TYPE_MANUAL: {
      d: "m {mx},{my} c 0.234,-0.01 5.604,0.008 8.029,0.004 0.808,0 1.271,-0.172 1.417,-0.752 0.227,-0.898 -0.334,-1.314 -1.338,-1.316 -2.467,-0.01 -7.886,-0.004 -8.108,-0.004 -0.014,-0.079 0.016,-0.533 0,-0.61 0.195,-0.042 8.507,0.006 9.616,0.002 0.877,-0.007 1.35,-0.438 1.353,-1.208 0.003,-0.768 -0.479,-1.09 -1.35,-1.091 -2.968,-0.002 -9.619,-0.013 -9.619,-0.013 v -0.591 c 0,0 5.052,-0.016 7.225,-0.016 0.888,-0.002 1.354,-0.416 1.351,-1.193 -0.006,-0.761 -0.492,-1.196 -1.361,-1.196 -3.473,-0.005 -10.86,-0.003 -11.0829995,-0.003 -0.022,-0.047 -0.045,-0.094 -0.069,-0.139 0.3939995,-0.319 2.0409995,-1.626 2.4149995,-2.017 0.469,-0.4870005 0.519,-1.1650005 0.162,-1.6040005 -0.414,-0.511 -0.973,-0.5 -1.48,-0.236 -1.4609995,0.764 -6.5999995,3.6430005 -7.7329995,4.2710005 -0.9,0.499 -1.516,1.253 -1.882,2.19 -0.37000002,0.95 -0.17,2.01 -0.166,2.979 0.004,0.718 -0.27300002,1.345 -0.055,2.063 0.629,2.087 2.425,3.312 4.859,3.318 4.6179995,0.014 9.2379995,-0.139 13.8569995,-0.158 0.755,-0.004 1.171,-0.301 1.182,-1.033 0.012,-0.754 -0.423,-0.969 -1.183,-0.973 -1.778,-0.01 -5.824,-0.004 -6.04,-0.004 10e-4,-0.084 0.003,-0.586 10e-4,-0.67 z"
    },
    TASK_TYPE_INSTANTIATING_SEND: {
      d: "m {mx},{my} l 0,8.4 l 12.6,0 l 0,-8.4 z l 6.3,3.6 l 6.3,-3.6"
    },
    TASK_TYPE_SERVICE: {
      d: "m {mx},{my} v -1.71335 c 0.352326,-0.0705 0.703932,-0.17838 1.047628,-0.32133 0.344416,-0.14465 0.665822,-0.32133 0.966377,-0.52145 l 1.19431,1.18005 1.567487,-1.57688 -1.195028,-1.18014 c 0.403376,-0.61394 0.683079,-1.29908 0.825447,-2.01824 l 1.622133,-0.01 v -2.2196 l -1.636514,0.01 c -0.07333,-0.35153 -0.178319,-0.70024 -0.323564,-1.04372 -0.145244,-0.34406 -0.321407,-0.6644 -0.522735,-0.96217 l 1.131035,-1.13631 -1.583305,-1.56293 -1.129598,1.13589 c -0.614052,-0.40108 -1.302883,-0.68093 -2.022633,-0.82247 l 0.0093,-1.61852 h -2.241173 l 0.0042,1.63124 c -0.353763,0.0736 -0.705369,0.17977 -1.049785,0.32371 -0.344415,0.14437 -0.665102,0.32092 -0.9635006,0.52046 l -1.1698628,-1.15823 -1.5667691,1.5792 1.1684265,1.15669 c -0.4026573,0.61283 -0.68308,1.29797 -0.8247287,2.01713 l -1.6588041,0.003 v 2.22174 l 1.6724648,-0.006 c 0.073327,0.35077 0.1797598,0.70243 0.3242851,1.04472 0.1452428,0.34448 0.3214064,0.6644 0.5227339,0.96066 l -1.1993431,1.19723 1.5840256,1.56011 1.1964668,-1.19348 c 0.6140517,0.40346 1.3028827,0.68232 2.0233517,0.82331 l 7.19e-4,1.69892 h 2.226848 z m 0.221462,-3.9957 c -1.788948,0.7502 -3.8576,-0.0928 -4.6097055,-1.87438 -0.7521065,-1.78321 0.090598,-3.84627 1.8802645,-4.59604 1.78823,-0.74936 3.856881,0.0929 4.608987,1.87437 0.752106,1.78165 -0.0906,3.84612 -1.879546,4.59605 z"
    },
    TASK_TYPE_SERVICE_FILL: {
      d: "m {mx},{my} c -1.788948,0.7502 -3.8576,-0.0928 -4.6097055,-1.87438 -0.7521065,-1.78321 0.090598,-3.84627 1.8802645,-4.59604 1.78823,-0.74936 3.856881,0.0929 4.608987,1.87437 0.752106,1.78165 -0.0906,3.84612 -1.879546,4.59605 z"
    },
    TASK_TYPE_BUSINESS_RULE_HEADER: {
      d: "m {mx},{my} 0,4 20,0 0,-4 z"
    },
    TASK_TYPE_BUSINESS_RULE_MAIN: {
      d: "m {mx},{my} 0,12 20,0 0,-12 zm 0,8 l 20,0 m -13,-4 l 0,8"
    },
    MESSAGE_FLOW_MARKER: {
      d: "m {mx},{my} m -10.5 ,-7 l 0,14 l 21,0 l 0,-14 z l 10.5,6 l 10.5,-6"
    }
  }, this.getRawPath = function(t) {
    return this.pathMap[t].d;
  }, this.getScaledPath = function(t, n) {
    var i = this.pathMap[t], r, o;
    n.abspos ? (r = n.abspos.x, o = n.abspos.y) : (r = n.containerWidth * n.position.mx, o = n.containerHeight * n.position.my);
    var a = {};
    if (n.position) {
      for (var c = n.containerHeight / i.height * n.yScaleFactor, l = n.containerWidth / i.width * n.xScaleFactor, u = 0; u < i.heightElements.length; u++)
        a["y" + u] = i.heightElements[u] * c;
      for (var d = 0; d < i.widthElements.length; d++)
        a["x" + d] = i.widthElements[d] * l;
    }
    var f = p2(
      i.d,
      {
        mx: r,
        my: o,
        e: a
      }
    );
    return f;
  };
}
var c2 = /\{([^{}]+)\}/g, l2 = /(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g;
function u2(e, t, n) {
  var i = n;
  return t.replace(l2, function(r, o, a, c, l) {
    o = o || c, i && (o in i && (i = i[o]), typeof i == "function" && l && (i = i()));
  }), i = (i == null || i == n ? e : i) + "", i;
}
function p2(e, t) {
  return String(e).replace(c2, function(n, i) {
    return u2(n, i, t);
  });
}
const f2 = {
  __init__: ["bpmnRenderer"],
  bpmnRenderer: ["type", ia],
  textRenderer: ["type", tb],
  pathMap: ["type", s2]
};
function d2(e, t) {
  return t = t || {}, e.replace(/{([^}]+)}/g, function(n, i) {
    return t[i] || "{" + i + "}";
  });
}
const Cu = {
  translate: ["value", d2]
};
function $l(e, t, n) {
  return G({
    id: e.id,
    type: e.$type,
    businessObject: e,
    di: t
  }, n);
}
function h2(e, t, n) {
  var i = e.waypoint;
  return !i || i.length < 2 ? [Fe(t), Fe(n)] : i.map(function(r) {
    return { x: r.x, y: r.y };
  });
}
function nb(e, t, n) {
  return new Error(
    `element ${On(t)} referenced by ${On(e)}#${n} not yet drawn`
  );
}
function Br(e, t, n, i, r) {
  this._eventBus = e, this._canvas = t, this._elementFactory = n, this._elementRegistry = i, this._textRenderer = r;
}
Br.$inject = [
  "eventBus",
  "canvas",
  "elementFactory",
  "elementRegistry",
  "textRenderer"
];
Br.prototype.add = function(e, t, n) {
  var i, r, o;
  if (A(t, "bpmndi:BPMNPlane")) {
    var a = A(e, "bpmn:SubProcess") ? { id: e.id + "_plane" } : {};
    i = this._elementFactory.createRoot($l(e, t, a)), this._canvas.addRootElement(i);
  } else if (A(t, "bpmndi:BPMNShape")) {
    var c = !pt(e, t), l = y2(e);
    r = n && (n.hidden || n.collapsed);
    var u = t.bounds;
    i = this._elementFactory.createShape($l(e, t, {
      collapsed: c,
      hidden: r,
      x: Math.round(u.x),
      y: Math.round(u.y),
      width: Math.round(u.width),
      height: Math.round(u.height),
      isFrame: l
    })), A(e, "bpmn:BoundaryEvent") && this._attachBoundary(e, i), A(e, "bpmn:Lane") && (o = 0), A(e, "bpmn:DataStoreReference") && (m2(n, Fe(u)) || (n = this._canvas.findRoot(n))), this._canvas.addShape(i, n, o);
  } else if (A(t, "bpmndi:BPMNEdge")) {
    var d = this._getSource(e), f = this._getTarget(e);
    r = n && (n.hidden || n.collapsed), i = this._elementFactory.createConnection($l(e, t, {
      hidden: r,
      source: d,
      target: f,
      waypoints: h2(t, d, f)
    })), A(e, "bpmn:DataAssociation") && (n = this._canvas.findRoot(n)), this._canvas.addConnection(i, n, o);
  } else
    throw new Error(
      `unknown di ${On(t)} for element ${On(e)}`
    );
  return Zo(e) && ki(i) && this.addLabel(e, t, i), this._eventBus.fire("bpmnElement.added", { element: i }), i;
};
Br.prototype._attachBoundary = function(e, t) {
  var n = e.attachedToRef;
  if (!n)
    throw new Error(
      `missing ${On(e)}#attachedToRef`
    );
  var i = this._elementRegistry.get(n.id), r = i && i.attachers;
  if (!i)
    throw nb(e, n, "attachedToRef");
  t.host = i, r || (i.attachers = r = []), r.indexOf(t) === -1 && r.push(t);
};
Br.prototype.addLabel = function(e, t, n) {
  var i, r, o;
  return i = DA(t, n), r = ki(n), r && (i = this._textRenderer.getExternalLabelBounds(i, r)), o = this._elementFactory.createLabel($l(e, t, {
    id: e.id + "_label",
    labelTarget: n,
    type: "label",
    hidden: n.hidden || !ki(n),
    x: Math.round(i.x),
    y: Math.round(i.y),
    width: Math.round(i.width),
    height: Math.round(i.height)
  })), this._canvas.addShape(o, n.parent);
};
Br.prototype._getConnectedElement = function(e, t) {
  var n, i, r = e.$type;
  if (i = e[t + "Ref"], t === "source" && r === "bpmn:DataInputAssociation" && (i = i && i[0]), (t === "source" && r === "bpmn:DataOutputAssociation" || t === "target" && r === "bpmn:DataInputAssociation") && (i = e.$parent), n = i && this._getElement(i), n)
    return n;
  throw i ? nb(e, i, t + "Ref") : new Error(
    `${On(e)}#${t} Ref not specified`
  );
};
Br.prototype._getSource = function(e) {
  return this._getConnectedElement(e, "source");
};
Br.prototype._getTarget = function(e) {
  return this._getConnectedElement(e, "target");
};
Br.prototype._getElement = function(e) {
  return this._elementRegistry.get(e.id);
};
function m2(e, t) {
  var n = t.x, i = t.y;
  return n >= e.x && n <= e.x + e.width && i >= e.y && i <= e.y + e.height;
}
function y2(e) {
  return A(e, "bpmn:Group");
}
const g2 = {
  __depends__: [
    Cu
  ],
  bpmnImporter: ["type", Br]
}, v2 = {
  __depends__: [
    f2,
    g2
  ]
};
function Dd(e) {
  this._counter = 0, this._prefix = (e ? e + "-" : "") + Math.floor(Math.random() * 1e9) + "-";
}
Dd.prototype.next = function() {
  return this._prefix + ++this._counter;
};
var _2 = new Dd("ov"), b2 = 500;
function vn(e, t, n, i) {
  this._eventBus = t, this._canvas = n, this._elementRegistry = i, this._ids = _2, this._overlayDefaults = G({
    // no show constraints
    show: null,
    // always scale
    scale: !0
  }, e && e.defaults), this._overlays = {}, this._overlayContainers = [], this._overlayRoot = x2(n.getContainer()), this._init();
}
vn.$inject = [
  "config.overlays",
  "eventBus",
  "canvas",
  "elementRegistry"
];
vn.prototype.get = function(e) {
  if (ci(e) && (e = { id: e }), ci(e.element) && (e.element = this._elementRegistry.get(e.element)), e.element) {
    var t = this._getOverlayContainer(e.element, !0);
    return t ? e.type ? et(t.overlays, zi({ type: e.type })) : t.overlays.slice() : [];
  } else
    return e.type ? et(this._overlays, zi({ type: e.type })) : e.id ? this._overlays[e.id] : null;
};
vn.prototype.add = function(e, t, n) {
  if (yn(t) && (n = t, t = null), e.id || (e = this._elementRegistry.get(e)), !n.position)
    throw new Error("must specifiy overlay position");
  if (!n.html)
    throw new Error("must specifiy overlay html");
  if (!e)
    throw new Error("invalid element specified");
  var i = this._ids.next();
  return n = G({}, this._overlayDefaults, n, {
    id: i,
    type: t,
    element: e,
    html: n.html
  }), this._addOverlay(n), i;
};
vn.prototype.remove = function(e) {
  var t = this.get(e) || [];
  nt(t) || (t = [t]);
  var n = this;
  z(t, function(i) {
    var r = n._getOverlayContainer(i.element, !0);
    if (i && (lr(i.html), lr(i.htmlContainer), delete i.htmlContainer, delete i.element, delete n._overlays[i.id]), r) {
      var o = r.overlays.indexOf(i);
      o !== -1 && r.overlays.splice(o, 1);
    }
  });
};
vn.prototype.isShown = function() {
  return this._overlayRoot.style.display !== "none";
};
vn.prototype.show = function() {
  Au(this._overlayRoot);
};
vn.prototype.hide = function() {
  Au(this._overlayRoot, !1);
};
vn.prototype.clear = function() {
  this._overlays = {}, this._overlayContainers = [], mu(this._overlayRoot);
};
vn.prototype._updateOverlayContainer = function(e) {
  var t = e.element, n = e.html, i = t.x, r = t.y;
  if (t.waypoints) {
    var o = nn(t);
    i = o.x, r = o.y;
  }
  ib(n, i, r), zn(e.html, "data-container-id", t.id);
};
vn.prototype._updateOverlay = function(e) {
  var t = e.position, n = e.htmlContainer, i = e.element, r = t.left, o = t.top;
  if (t.right !== void 0) {
    var a;
    i.waypoints ? a = nn(i).width : a = i.width, r = t.right * -1 + a;
  }
  if (t.bottom !== void 0) {
    var c;
    i.waypoints ? c = nn(i).height : c = i.height, o = t.bottom * -1 + c;
  }
  ib(n, r || 0, o || 0), this._updateOverlayVisibilty(e, this._canvas.viewbox());
};
vn.prototype._createOverlayContainer = function(e) {
  var t = Bt('<div class="djs-overlays" />');
  Rn(t, { position: "absolute" }), this._overlayRoot.appendChild(t);
  var n = {
    html: t,
    element: e,
    overlays: []
  };
  return this._updateOverlayContainer(n), this._overlayContainers.push(n), n;
};
vn.prototype._updateRoot = function(e) {
  var t = e.scale || 1, n = "matrix(" + [
    t,
    0,
    0,
    t,
    -1 * e.x * t,
    -1 * e.y * t
  ].join(",") + ")";
  rb(this._overlayRoot, n);
};
vn.prototype._getOverlayContainer = function(e, t) {
  var n = gt(this._overlayContainers, function(i) {
    return i.element === e;
  });
  return !n && !t ? this._createOverlayContainer(e) : n;
};
vn.prototype._addOverlay = function(e) {
  var t = e.id, n = e.element, i = e.html, r, o;
  i.get && i.constructor.prototype.jquery && (i = i.get(0)), ci(i) && (i = Bt(i)), o = this._getOverlayContainer(n), r = Bt('<div class="djs-overlay" data-overlay-id="' + t + '">'), Rn(r, { position: "absolute" }), r.appendChild(i), e.type && gn(r).add("djs-overlay-" + e.type);
  var a = this._canvas.findRoot(n), c = this._canvas.getRootElement();
  Au(r, a === c), e.htmlContainer = r, o.overlays.push(e), o.html.appendChild(r), this._overlays[t] = e, this._updateOverlay(e), this._updateOverlayVisibilty(e, this._canvas.viewbox());
};
vn.prototype._updateOverlayVisibilty = function(e, t) {
  var n = e.show, i = this._canvas.findRoot(e.element), r = n && n.minZoom, o = n && n.maxZoom, a = e.htmlContainer, c = this._canvas.getRootElement(), l = !0;
  (i !== c || n && (dn(r) && r > t.scale || dn(o) && o < t.scale)) && (l = !1), Au(a, l), this._updateOverlayScale(e, t);
};
vn.prototype._updateOverlayScale = function(e, t) {
  var n = e.scale, i, r, o = e.htmlContainer, a, c = "";
  n !== !0 && (n === !1 ? (i = 1, r = 1) : (i = n.min, r = n.max), dn(i) && t.scale < i && (a = (1 / t.scale || 1) * i), dn(r) && t.scale > r && (a = (1 / t.scale || 1) * r)), dn(a) && (c = "scale(" + a + "," + a + ")"), rb(o, c);
};
vn.prototype._updateOverlaysVisibilty = function(e) {
  var t = this;
  z(this._overlays, function(n) {
    t._updateOverlayVisibilty(n, e);
  });
};
vn.prototype._init = function() {
  var e = this._eventBus, t = this;
  function n(i) {
    t._updateRoot(i), t._updateOverlaysVisibilty(i), t.show();
  }
  e.on("canvas.viewbox.changing", function(i) {
    t.hide();
  }), e.on("canvas.viewbox.changed", function(i) {
    n(i.viewbox);
  }), e.on(["shape.remove", "connection.remove"], function(i) {
    var r = i.element, o = t.get({ element: r });
    z(o, function(l) {
      t.remove(l.id);
    });
    var a = t._getOverlayContainer(r);
    if (a) {
      lr(a.html);
      var c = t._overlayContainers.indexOf(a);
      c !== -1 && t._overlayContainers.splice(c, 1);
    }
  }), e.on("element.changed", b2, function(i) {
    var r = i.element, o = t._getOverlayContainer(r, !0);
    o && (z(o.overlays, function(a) {
      t._updateOverlay(a);
    }), t._updateOverlayContainer(o));
  }), e.on("element.marker.update", function(i) {
    var r = t._getOverlayContainer(i.element, !0);
    r && gn(r.html)[i.add ? "add" : "remove"](i.marker);
  }), e.on("root.set", function() {
    t._updateOverlaysVisibilty(t._canvas.viewbox());
  }), e.on("diagram.clear", this.clear, this);
};
function x2(e) {
  var t = Bt(
    '<div class="djs-overlay-container" />'
  );
  return Rn(t, {
    position: "absolute",
    width: 0,
    height: 0
  }), e.insertBefore(t, e.firstChild), t;
}
function ib(e, t, n) {
  Rn(e, { left: t + "px", top: n + "px" });
}
function Au(e, t) {
  e.style.display = t === !1 ? "none" : "";
}
function rb(e, t) {
  e.style["transform-origin"] = "top left", ["", "-ms-", "-webkit-"].forEach(function(n) {
    e.style[n + "transform"] = t;
  });
}
const Pu = {
  __init__: ["overlays"],
  overlays: ["type", vn]
};
function ob(e, t, n, i) {
  e.on("element.changed", function(r) {
    var o = r.element;
    (o.parent || o === t.getRootElement()) && (r.gfx = n.getGraphics(o)), r.gfx && e.fire(g_(o) + ".changed", r);
  }), e.on("elements.changed", function(r) {
    var o = r.elements;
    o.forEach(function(a) {
      e.fire("element.changed", { element: a });
    }), i.updateContainments(o);
  }), e.on("shape.changed", function(r) {
    i.update("shape", r.element, r.gfx);
  }), e.on("connection.changed", function(r) {
    i.update("connection", r.element, r.gfx);
  });
}
ob.$inject = [
  "eventBus",
  "canvas",
  "elementRegistry",
  "graphicsFactory"
];
const Od = {
  __init__: ["changeSupport"],
  changeSupport: ["type", ob]
};
var E2 = 1e3;
function le(e) {
  this._eventBus = e;
}
le.$inject = ["eventBus"];
function w2(e, t) {
  return function(n) {
    return e.call(t || null, n.context, n.command, n);
  };
}
le.prototype.on = function(e, t, n, i, r, o) {
  if ((un(t) || je(t)) && (o = r, r = i, i = n, n = t, t = null), un(n) && (o = r, r = i, i = n, n = E2), yn(r) && (o = r, r = !1), !un(i))
    throw new Error("handlerFn must be a function");
  nt(e) || (e = [e]);
  var a = this._eventBus;
  z(e, function(c) {
    var l = ["commandStack", c, t].filter(function(u) {
      return u;
    }).join(".");
    a.on(l, n, r ? w2(i, o) : i, o);
  });
};
le.prototype.canExecute = Lr("canExecute");
le.prototype.preExecute = Lr("preExecute");
le.prototype.preExecuted = Lr("preExecuted");
le.prototype.execute = Lr("execute");
le.prototype.executed = Lr("executed");
le.prototype.postExecute = Lr("postExecute");
le.prototype.postExecuted = Lr("postExecuted");
le.prototype.revert = Lr("revert");
le.prototype.reverted = Lr("reverted");
function Lr(e) {
  return function(n, i, r, o, a) {
    (un(n) || je(n)) && (a = o, o = r, r = i, i = n, n = null), this.on(n, e, i, r, o, a);
  };
}
function Nd(e, t) {
  t.invoke(le, this), this.executed(function(n) {
    var i = n.context;
    i.rootElement ? e.setRootElement(i.rootElement) : i.rootElement = e.getRootElement();
  }), this.revert(function(n) {
    var i = n.context;
    i.rootElement && e.setRootElement(i.rootElement);
  });
}
Pe(Nd, le);
Nd.$inject = ["canvas", "injector"];
const S2 = {
  __init__: ["rootElementsBehavior"],
  rootElementsBehavior: ["type", Nd]
};
function Hs(e) {
  return CSS.escape(e);
}
var R2 = {
  "&": "&amp;",
  "<": "&lt;",
  ">": "&gt;",
  '"': "&quot;",
  "'": "&#39;"
};
function If(e) {
  return e = "" + e, e && e.replace(/[&<>"']/g, function(t) {
    return R2[t];
  });
}
var ab = "_plane";
function pg(e) {
  var t = e.id;
  return C2(t);
}
function Ar(e) {
  var t = e.id;
  return A(e, "bpmn:SubProcess") ? sb(t) : t;
}
function jo(e) {
  return sb(e);
}
function jl(e) {
  var t = bt(e);
  return A(t, "bpmndi:BPMNPlane");
}
function sb(e) {
  return e + ab;
}
function C2(e) {
  return e.replace(new RegExp(ab + "$"), "");
}
var A2 = "bjs-breadcrumbs-shown";
function cb(e, t, n) {
  var i = Bt('<ul class="bjs-breadcrumbs"></ul>'), r = n.getContainer(), o = gn(r);
  r.appendChild(i);
  var a = [];
  e.on("element.changed", function(l) {
    var u = l.element, d = he(u), f = gt(a, function(y) {
      return y === d;
    });
    f && c();
  });
  function c(l) {
    l && (a = P2(l));
    var u = a.map(function(f) {
      var y = If(f.name || f.id), g = Bt('<li><span class="bjs-crumb"><a title="' + y + '">' + y + "</a></span></li>"), _ = n.findRoot(Ar(f)) || n.findRoot(f.id);
      if (!_ && A(f, "bpmn:Process")) {
        var x = t.find(function(w) {
          var D = he(w);
          return D && D.get("processRef") && D.get("processRef") === f;
        });
        _ = n.findRoot(x.id);
      }
      return g.addEventListener("click", function() {
        n.setRootElement(_);
      }), g;
    });
    i.innerHTML = "";
    var d = u.length > 1;
    o.toggle(A2, d), u.forEach(function(f) {
      i.appendChild(f);
    });
  }
  e.on("root.set", function(l) {
    c(l.element);
  });
}
cb.$inject = ["eventBus", "elementRegistry", "canvas"];
function P2(e) {
  for (var t = he(e), n = [], i = t; i; i = i.$parent)
    (A(i, "bpmn:SubProcess") || A(i, "bpmn:Process")) && n.push(i);
  return n.reverse();
}
function lb(e, t) {
  var n = null, i = new T2();
  e.on("root.set", function(r) {
    var o = r.element, a = t.viewbox(), c = i.get(o);
    if (i.set(n, {
      x: a.x,
      y: a.y,
      zoom: a.scale
    }), n = o, !(A(o, "bpmn:Collaboration") && !c)) {
      c = c || { x: 0, y: 0, zoom: 1 };
      var l = (a.x - c.x) * a.scale, u = (a.y - c.y) * a.scale;
      (l !== 0 || u !== 0) && t.scroll({
        dx: l,
        dy: u
      }), c.zoom !== a.scale && t.zoom(c.zoom, { x: 0, y: 0 });
    }
  }), e.on("diagram.clear", function() {
    i.clear(), n = null;
  });
}
lb.$inject = ["eventBus", "canvas"];
function T2() {
  this._entries = [], this.set = function(e, t) {
    var n = !1;
    for (var i in this._entries)
      if (this._entries[i][0] === e) {
        this._entries[i][1] = t, n = !0;
        break;
      }
    n || this._entries.push([e, t]);
  }, this.get = function(e) {
    for (var t in this._entries)
      if (this._entries[t][0] === e)
        return this._entries[t][1];
    return null;
  }, this.clear = function() {
    this._entries.length = 0;
  }, this.remove = function(e) {
    var t = -1;
    for (var n in this._entries)
      if (this._entries[n][0] === e) {
        t = n;
        break;
      }
    t !== -1 && this._entries.splice(t, 1);
  };
}
var fg = {
  x: 180,
  y: 160
};
function ra(e, t) {
  this._eventBus = e, this._moddle = t;
  var n = this;
  e.on("import.render.start", 1500, function(i, r) {
    n._handleImport(r.definitions);
  });
}
ra.prototype._handleImport = function(e) {
  if (e.diagrams) {
    var t = this;
    this._definitions = e, this._processToDiagramMap = {}, e.diagrams.forEach(function(i) {
      !i.plane || !i.plane.bpmnElement || (t._processToDiagramMap[i.plane.bpmnElement.id] = i);
    });
    var n = [];
    e.diagrams.forEach(function(i) {
      var r = t._createNewDiagrams(i.plane);
      Array.prototype.push.apply(n, r);
    }), n.forEach(function(i) {
      t._movePlaneElementsToOrigin(i.plane);
    });
  }
};
ra.prototype._createNewDiagrams = function(e) {
  var t = this, n = [], i = [];
  e.get("planeElement").forEach(function(o) {
    var a = o.bpmnElement;
    if (a) {
      var c = a.$parent;
      A(a, "bpmn:SubProcess") && !o.isExpanded && n.push(a), M2(a, e) && i.push({ diElement: o, parent: c });
    }
  });
  var r = [];
  return n.forEach(function(o) {
    if (!t._processToDiagramMap[o.id]) {
      var a = t._createDiagram(o);
      t._processToDiagramMap[o.id] = a, r.push(a);
    }
  }), i.forEach(function(o) {
    for (var a = o.diElement, c = o.parent; c && n.indexOf(c) === -1; )
      c = c.$parent;
    if (c) {
      var l = t._processToDiagramMap[c.id];
      t._moveToDiPlane(a, l.plane);
    }
  }), r;
};
ra.prototype._movePlaneElementsToOrigin = function(e) {
  var t = e.get("planeElement"), n = k2(e), i = {
    x: n.x - fg.x,
    y: n.y - fg.y
  };
  t.forEach(function(r) {
    r.waypoint ? r.waypoint.forEach(function(o) {
      o.x = o.x - i.x, o.y = o.y - i.y;
    }) : r.bounds && (r.bounds.x = r.bounds.x - i.x, r.bounds.y = r.bounds.y - i.y);
  });
};
ra.prototype._moveToDiPlane = function(e, t) {
  var n = ub(e), i = n.plane.get("planeElement");
  i.splice(i.indexOf(e), 1), t.get("planeElement").push(e);
};
ra.prototype._createDiagram = function(e) {
  var t = this._moddle.create("bpmndi:BPMNPlane", {
    bpmnElement: e
  }), n = this._moddle.create("bpmndi:BPMNDiagram", {
    plane: t
  });
  return t.$parent = n, t.bpmnElement = e, n.$parent = this._definitions, this._definitions.diagrams.push(n), n;
};
ra.$inject = ["eventBus", "moddle"];
function ub(e) {
  return A(e, "bpmndi:BPMNDiagram") ? e : ub(e.$parent);
}
function k2(e) {
  var t = {
    top: 1 / 0,
    right: -1 / 0,
    bottom: -1 / 0,
    left: 1 / 0
  };
  return e.planeElement.forEach(function(n) {
    if (n.bounds) {
      var i = Le(n.bounds);
      t.top = Math.min(i.top, t.top), t.left = Math.min(i.left, t.left);
    }
  }), _u(t);
}
function M2(e, t) {
  var n = e.$parent;
  return !(!A(n, "bpmn:SubProcess") || n === t.bpmnElement || rt(e, ["bpmn:DataInputAssociation", "bpmn:DataOutputAssociation"]));
}
var cl = 250, D2 = '<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4.81801948,3.50735931 L10.4996894,9.1896894 L10.5,4 L12,4 L12,12 L4,12 L4,10.5 L9.6896894,10.4996894 L3.75735931,4.56801948 C3.46446609,4.27512627 3.46446609,3.80025253 3.75735931,3.50735931 C4.05025253,3.21446609 4.52512627,3.21446609 4.81801948,3.50735931 Z"/></svg>', O2 = "bjs-drilldown-empty";
function ho(e, t, n, i) {
  le.call(this, t), this._canvas = e, this._eventBus = t, this._elementRegistry = n, this._overlays = i;
  var r = this;
  this.executed("shape.toggleCollapse", cl, function(o) {
    var a = o.shape;
    r._canDrillDown(a) ? r._addOverlay(a) : r._removeOverlay(a);
  }, !0), this.reverted("shape.toggleCollapse", cl, function(o) {
    var a = o.shape;
    r._canDrillDown(a) ? r._addOverlay(a) : r._removeOverlay(a);
  }, !0), this.executed(
    ["shape.create", "shape.move", "shape.delete"],
    cl,
    function(o) {
      var a = o.oldParent, c = o.newParent || o.parent, l = o.shape;
      r._canDrillDown(l) && r._addOverlay(l), r._updateDrilldownOverlay(a), r._updateDrilldownOverlay(c), r._updateDrilldownOverlay(l);
    },
    !0
  ), this.reverted(
    ["shape.create", "shape.move", "shape.delete"],
    cl,
    function(o) {
      var a = o.oldParent, c = o.newParent || o.parent, l = o.shape;
      r._canDrillDown(l) && r._addOverlay(l), r._updateDrilldownOverlay(a), r._updateDrilldownOverlay(c), r._updateDrilldownOverlay(l);
    },
    !0
  ), t.on("import.render.complete", function() {
    n.filter(function(o) {
      return r._canDrillDown(o);
    }).map(function(o) {
      r._addOverlay(o);
    });
  });
}
Pe(ho, le);
ho.prototype._updateDrilldownOverlay = function(e) {
  var t = this._canvas;
  if (e) {
    var n = t.findRoot(e);
    n && this._updateOverlayVisibility(n);
  }
};
ho.prototype._canDrillDown = function(e) {
  var t = this._canvas;
  return A(e, "bpmn:SubProcess") && t.findRoot(Ar(e));
};
ho.prototype._updateOverlayVisibility = function(e) {
  var t = this._overlays, n = he(e), i = t.get({ element: n.id, type: "drilldown" })[0];
  if (i) {
    var r = n && n.get("flowElements") && n.get("flowElements").length;
    gn(i.html).toggle(O2, !r);
  }
};
ho.prototype._addOverlay = function(e) {
  var t = this._canvas, n = this._overlays, i = n.get({ element: e, type: "drilldown" });
  i.length && this._removeOverlay(e);
  var r = Bt('<button class="bjs-drilldown">' + D2 + "</button>");
  r.addEventListener("click", function() {
    t.setRootElement(t.findRoot(Ar(e)));
  }), n.add(e, "drilldown", {
    position: {
      bottom: -7,
      right: -8
    },
    html: r
  }), this._updateOverlayVisibility(e);
};
ho.prototype._removeOverlay = function(e) {
  var t = this._overlays;
  t.remove({
    element: e,
    type: "drilldown"
  });
};
ho.$inject = [
  "canvas",
  "eventBus",
  "elementRegistry",
  "overlays"
];
const N2 = {
  __depends__: [Pu, Od, S2],
  __init__: ["drilldownBreadcrumbs", "drilldownOverlayBehavior", "drilldownCentering", "subprocessCompatibility"],
  drilldownBreadcrumbs: ["type", cb],
  drilldownCentering: ["type", lb],
  drilldownOverlayBehavior: ["type", ho],
  subprocessCompatibility: ["type", ra]
};
var B2 = 500, L2 = 1e3;
function oa(e, t) {
  this._eventBus = e, this.offset = 5;
  var n = t.cls("djs-outline", ["no-fill"]), i = this;
  function r(o) {
    var a = Me("rect");
    return we(a, G({
      x: 0,
      y: 0,
      rx: 4,
      width: 100,
      height: 100
    }, n)), a;
  }
  e.on(["shape.added", "shape.changed"], B2, function(o) {
    var a = o.element, c = o.gfx, l = Tt(".djs-outline", c);
    l || (l = i.getOutline(a) || r(), ze(c, l)), i.updateShapeOutline(l, a);
  }), e.on(["connection.added", "connection.changed"], function(o) {
    var a = o.element, c = o.gfx, l = Tt(".djs-outline", c);
    l || (l = r(), ze(c, l)), i.updateConnectionOutline(l, a);
  });
}
oa.prototype.updateShapeOutline = function(e, t) {
  var n = !1, i = this._getProviders();
  i.length && z(i, function(r) {
    n = n || r.updateOutline(t, e);
  }), n || we(e, {
    x: -this.offset,
    y: -this.offset,
    width: t.width + this.offset * 2,
    height: t.height + this.offset * 2
  });
};
oa.prototype.updateConnectionOutline = function(e, t) {
  var n = nn(t);
  we(e, {
    x: n.x - this.offset,
    y: n.y - this.offset,
    width: n.width + this.offset * 2,
    height: n.height + this.offset * 2
  });
};
oa.prototype.registerProvider = function(e, t) {
  t || (t = e, e = L2), this._eventBus.on("outline.getProviders", e, function(n) {
    n.providers.push(t);
  });
};
oa.prototype._getProviders = function() {
  var e = this._eventBus.createEvent({
    type: "outline.getProviders",
    providers: []
  });
  return this._eventBus.fire(e), e.providers;
};
oa.prototype.getOutline = function(e) {
  var t, n = this._getProviders();
  return z(n, function(i) {
    un(i.getOutline) && (t = t || i.getOutline(e));
  }), t;
};
oa.$inject = ["eventBus", "styles", "elementRegistry"];
const Bd = {
  __init__: ["outline"],
  outline: ["type", oa]
}, I2 = "M44.7648 11.3263L36.9892 2.64074C36.0451 1.58628 34.5651 0.988708 33.1904 0.988708H5.98667C3.22688 0.988708 0.989624 3.34892 0.989624 6.26039V55.0235C0.989624 57.9349 3.22688 60.2952 5.98667 60.2952H40.966C43.7257 60.2952 45.963 57.9349 45.963 55.0235V14.9459C45.963 13.5998 45.6407 12.3048 44.7648 11.3263Z", $2 = "M1.03845 48.1347C1.03845 49.3511 1.07295 50.758 1.38342 52.064C1.69949 53.3938 2.32428 54.7154 3.56383 55.6428C6.02533 57.4841 10.1161 58.7685 14.8212 59.6067C19.5772 60.4538 25.1388 60.8738 30.6831 60.8738C36.2276 60.8738 41.7891 60.4538 46.545 59.6067C51.2504 58.7687 55.3412 57.4842 57.8028 55.6429C59.0424 54.7156 59.6673 53.3938 59.9834 52.064C60.2938 50.7579 60.3285 49.351 60.3285 48.1344V13.8415C60.3285 12.6249 60.2938 11.218 59.9834 9.91171C59.6673 8.58194 59.0423 7.2602 57.8027 6.33294C55.341 4.49168 51.2503 3.20723 46.545 2.36914C41.7891 1.522 36.2276 1.10204 30.6831 1.10205C25.1388 1.10206 19.5772 1.52206 14.8213 2.36923C10.1162 3.20734 6.02543 4.49183 3.5639 6.33314C2.32433 7.26038 1.69951 8.58206 1.38343 9.91181C1.07295 11.2179 1.03845 12.6247 1.03845 13.8411V48.1347Z", j2 = { width: 36, height: 50 }, F2 = { width: 50, height: 50 };
function dg(e, t, n) {
  return Me("path", {
    d: e,
    strokeWidth: 2,
    transform: `translate(${t.x}, ${t.y})`,
    ...n
  });
}
const to = 5;
function Tu(e, t) {
  this._styles = t, e.registerProvider(this);
}
Tu.$inject = [
  "outline",
  "styles"
];
Tu.prototype.getOutline = function(e) {
  const t = this._styles.cls("djs-outline", ["no-fill"]);
  var n;
  if (!vt(e))
    return A(e, "bpmn:Gateway") ? (n = Me("rect"), G(n.style, {
      "transform-box": "fill-box",
      transform: "rotate(45deg)",
      "transform-origin": "center"
    }), we(n, G({
      x: 2,
      y: 2,
      rx: 4,
      width: e.width - 4,
      height: e.height - 4
    }, t))) : rt(e, ["bpmn:Task", "bpmn:SubProcess", "bpmn:Group"]) ? (n = Me("rect"), we(n, G({
      x: -to,
      y: -to,
      rx: 14,
      width: e.width + to * 2,
      height: e.height + to * 2
    }, t))) : A(e, "bpmn:EndEvent") ? (n = Me("circle"), we(n, G({
      cx: e.width / 2,
      cy: e.height / 2,
      r: e.width / 2 + to + 1
    }, t))) : A(e, "bpmn:Event") ? (n = Me("circle"), we(n, G({
      cx: e.width / 2,
      cy: e.height / 2,
      r: e.width / 2 + to
    }, t))) : A(e, "bpmn:DataObjectReference") && hg(e, "bpmn:DataObjectReference") ? n = dg(
      I2,
      { x: -6, y: -6 },
      t
    ) : A(e, "bpmn:DataStoreReference") && hg(e, "bpmn:DataStoreReference") && (n = dg(
      $2,
      { x: -6, y: -6 },
      t
    )), n;
};
Tu.prototype.updateOutline = function(e, t) {
  if (!vt(e))
    return rt(e, ["bpmn:SubProcess", "bpmn:Group"]) ? (we(t, {
      width: e.width + to * 2,
      height: e.height + to * 2
    }), !0) : !!rt(e, [
      "bpmn:Event",
      "bpmn:Gateway",
      "bpmn:DataStoreReference",
      "bpmn:DataObjectReference"
    ]);
};
function hg(e, t) {
  var n;
  return t === "bpmn:DataObjectReference" ? n = j2 : t === "bpmn:DataStoreReference" && (n = F2), e.width === n.width && e.height === n.height;
}
const H2 = {
  __depends__: [
    Bd
  ],
  __init__: ["outlineProvider"],
  outlineProvider: ["type", Tu]
};
function mg(e) {
  !e || typeof e.stopPropagation != "function" || e.stopPropagation();
}
function Ka(e) {
  return e.originalEvent || e.srcEvent;
}
function Zp(e) {
  mg(e), mg(Ka(e));
}
function Jo(e) {
  return e.pointers && e.pointers.length && (e = e.pointers[0]), e.touches && e.touches.length && (e = e.touches[0]), e ? {
    x: e.clientX,
    y: e.clientY
  } : null;
}
function pb() {
  return /mac/i.test(navigator.platform);
}
function fb(e, t) {
  return (Ka(e) || e).button === t;
}
function mo(e) {
  return fb(e, 0);
}
function z2(e) {
  return fb(e, 1);
}
function zs(e) {
  var t = Ka(e) || e;
  return mo(e) ? pb() ? t.metaKey : t.ctrlKey : !1;
}
function ru(e) {
  var t = Ka(e) || e;
  return mo(e) && t.shiftKey;
}
function V2(e) {
  return !0;
}
function ll(e) {
  return mo(e) || z2(e);
}
var yg = 500;
function db(e, t, n) {
  var i = this;
  function r($, Z, X) {
    if (!c($, Z)) {
      var V, ae, ie;
      X ? ae = t.getGraphics(X) : (V = Z.delegateTarget || Z.target, V && (ae = V, X = t.get(ae))), !(!ae || !X) && (ie = e.fire($, {
        element: X,
        gfx: ae,
        originalEvent: Z
      }), ie === !1 && (Z.stopPropagation(), Z.preventDefault()));
    }
  }
  var o = {};
  function a($) {
    return o[$];
  }
  function c($, Z) {
    var X = u[$] || mo;
    return !X(Z);
  }
  var l = {
    click: "element.click",
    contextmenu: "element.contextmenu",
    dblclick: "element.dblclick",
    mousedown: "element.mousedown",
    mousemove: "element.mousemove",
    mouseover: "element.hover",
    mouseout: "element.out",
    mouseup: "element.mouseup"
  }, u = {
    "element.contextmenu": V2,
    "element.mousedown": ll,
    "element.mouseup": ll,
    "element.click": ll,
    "element.dblclick": ll
  };
  function d($, Z, X) {
    var V = l[$];
    if (!V)
      throw new Error("unmapped DOM event name <" + $ + ">");
    return r(V, Z, X);
  }
  var f = "svg, .djs-element";
  function y($, Z, X, V) {
    var ae = o[X] = function(ie) {
      r(X, ie);
    };
    V && (u[X] = V), ae.$delegate = si.bind($, f, Z, ae);
  }
  function g($, Z, X) {
    var V = a(X);
    V && si.unbind($, Z, V.$delegate);
  }
  function _($) {
    z(l, function(Z, X) {
      y($, X, Z);
    });
  }
  function x($) {
    z(l, function(Z, X) {
      g($, X, Z);
    });
  }
  e.on("canvas.destroy", function($) {
    x($.svg);
  }), e.on("canvas.init", function($) {
    _($.svg);
  }), e.on(["shape.added", "connection.added"], function($) {
    var Z = $.element, X = $.gfx;
    e.fire("interactionEvents.createHit", { element: Z, gfx: X });
  }), e.on([
    "shape.changed",
    "connection.changed"
  ], yg, function($) {
    var Z = $.element, X = $.gfx;
    e.fire("interactionEvents.updateHit", { element: Z, gfx: X });
  }), e.on("interactionEvents.createHit", yg, function($) {
    var Z = $.element, X = $.gfx;
    i.createDefaultHit(Z, X);
  }), e.on("interactionEvents.updateHit", function($) {
    var Z = $.element, X = $.gfx;
    i.updateDefaultHit(Z, X);
  });
  var w = N("djs-hit djs-hit-stroke"), D = N("djs-hit djs-hit-click-stroke"), O = N("djs-hit djs-hit-all"), k = N("djs-hit djs-hit-no-move"), P = {
    all: O,
    "click-stroke": D,
    stroke: w,
    "no-move": k
  };
  function N($, Z) {
    return Z = G({
      stroke: "white",
      strokeWidth: 15
    }, Z || {}), n.cls($, ["no-fill", "no-border"], Z);
  }
  function j($, Z) {
    var X = P[Z];
    if (!X)
      throw new Error("invalid hit type <" + Z + ">");
    return we($, X), $;
  }
  function W($, Z) {
    ze($, Z);
  }
  this.removeHits = function($) {
    var Z = Af(".djs-hit", $);
    z(Z, qt);
  }, this.createDefaultHit = function($, Z) {
    var X = $.waypoints, V = $.isFrame, ae;
    return X ? this.createWaypointsHit(Z, X) : (ae = V ? "stroke" : "all", this.createBoxHit(Z, ae, {
      width: $.width,
      height: $.height
    }));
  }, this.createWaypointsHit = function($, Z) {
    var X = gu(Z);
    return j(X, "stroke"), W($, X), X;
  }, this.createBoxHit = function($, Z, X) {
    X = G({
      x: 0,
      y: 0
    }, X);
    var V = Me("rect");
    return j(V, Z), we(V, X), W($, V), V;
  }, this.updateDefaultHit = function($, Z) {
    var X = Tt(".djs-hit", Z);
    if (X)
      return $.waypoints ? m_(X, $.waypoints) : we(X, {
        width: $.width,
        height: $.height
      }), X;
  }, this.fire = r, this.triggerMouseEvent = d, this.mouseHandler = a, this.registerEvent = y, this.unregisterEvent = g;
}
db.$inject = [
  "eventBus",
  "elementRegistry",
  "styles"
];
const ku = {
  __init__: ["interactionEvents"],
  interactionEvents: ["type", db]
};
function qa(e, t) {
  this._eventBus = e, this._canvas = t, this._selectedElements = [];
  var n = this;
  e.on(["shape.remove", "connection.remove"], function(i) {
    var r = i.element;
    n.deselect(r);
  }), e.on(["diagram.clear", "root.set"], function(i) {
    n.select(null);
  });
}
qa.$inject = ["eventBus", "canvas"];
qa.prototype.deselect = function(e) {
  var t = this._selectedElements, n = t.indexOf(e);
  if (n !== -1) {
    var i = t.slice();
    t.splice(n, 1), this._eventBus.fire("selection.changed", { oldSelection: i, newSelection: t });
  }
};
qa.prototype.get = function() {
  return this._selectedElements;
};
qa.prototype.isSelected = function(e) {
  return this._selectedElements.indexOf(e) !== -1;
};
qa.prototype.select = function(e, t) {
  var n = this._selectedElements, i = n.slice();
  nt(e) || (e = e ? [e] : []);
  var r = this._canvas, o = r.getRootElement();
  e = e.filter(function(a) {
    var c = r.findRoot(a);
    return o === c;
  }), t ? z(e, function(a) {
    n.indexOf(a) === -1 && n.push(a);
  }) : this._selectedElements = n = e.slice(), this._eventBus.fire("selection.changed", { oldSelection: i, newSelection: n });
};
var gg = "hover", vg = "selected", ul = 6;
function Ld(e, t, n) {
  this._canvas = e;
  var i = this;
  this._multiSelectionBox = null;
  function r(a, c) {
    e.addMarker(a, c);
  }
  function o(a, c) {
    e.removeMarker(a, c);
  }
  t.on("element.hover", function(a) {
    r(a.element, gg);
  }), t.on("element.out", function(a) {
    o(a.element, gg);
  }), t.on("selection.changed", function(a) {
    function c(f) {
      o(f, vg);
    }
    function l(f) {
      r(f, vg);
    }
    var u = a.oldSelection, d = a.newSelection;
    z(u, function(f) {
      d.indexOf(f) === -1 && c(f);
    }), z(d, function(f) {
      u.indexOf(f) === -1 && l(f);
    }), i._updateSelectionOutline(d);
  }), t.on("element.changed", function(a) {
    n.isSelected(a.element) && i._updateSelectionOutline(n.get());
  });
}
Ld.$inject = [
  "canvas",
  "eventBus",
  "selection"
];
Ld.prototype._updateSelectionOutline = function(e) {
  var t = this._canvas.getLayer("selectionOutline");
  yu(t);
  var n = e.length > 1, i = this._canvas.getContainer();
  if (dt(i)[n ? "add" : "remove"]("djs-multi-select"), !!n) {
    var r = W2(nn(e)), o = Me("rect");
    we(o, G({
      rx: 3
    }, r)), dt(o).add("djs-selection-outline"), ze(t, o);
  }
};
function W2(e) {
  return {
    x: e.x - ul,
    y: e.y - ul,
    width: e.width + ul * 2,
    height: e.height + ul * 2
  };
}
function hb(e, t, n, i) {
  e.on("create.end", 500, function(r) {
    var o = r.context, a = o.canExecute, c = o.elements, l = o.hints || {}, u = l.autoSelect;
    if (a) {
      if (u === !1)
        return;
      nt(u) ? t.select(u) : t.select(c.filter(G2));
    }
  }), e.on("connect.end", 500, function(r) {
    var o = r.context, a = o.connection;
    a && t.select(a);
  }), e.on("shape.move.end", 500, function(r) {
    var o = r.previousSelection || [], a = i.get(r.context.shape.id), c = gt(o, function(l) {
      return a.id === l.id;
    });
    c || t.select(a);
  }), e.on("element.click", function(r) {
    if (mo(r)) {
      var o = r.element;
      o === n.getRootElement() && (o = null);
      var a = t.isSelected(o), c = t.get().length > 1, l = ru(r);
      if (a && c)
        return l ? t.deselect(o) : t.select(o);
      a ? t.deselect(o) : t.select(o, l);
    }
  });
}
hb.$inject = [
  "eventBus",
  "selection",
  "canvas",
  "elementRegistry"
];
function G2(e) {
  return !e.hidden;
}
const fr = {
  __init__: ["selectionVisuals", "selectionBehavior"],
  __depends__: [
    ku,
    Bd
  ],
  selection: ["type", qa],
  selectionVisuals: ["type", Ld],
  selectionBehavior: ["type", hb]
};
function yo(e) {
  zt.call(this, e);
}
Pe(yo, zt);
yo.prototype._modules = [
  v2,
  N2,
  H2,
  Pu,
  fr,
  Cu
];
yo.prototype._moddleExtensions = {};
var U2 = ["c", "C"], Y2 = ["v", "V"], K2 = ["y", "Y"], mb = ["z", "Z"];
function q2(e) {
  return e.ctrlKey || e.metaKey || e.shiftKey || e.altKey;
}
function gi(e) {
  return e.altKey ? !1 : e.ctrlKey || e.metaKey;
}
function fn(e, t) {
  return e = nt(e) ? e : [e], e.indexOf(t.key) !== -1 || e.indexOf(t.code) !== -1;
}
function Id(e) {
  return e.shiftKey;
}
function X2(e) {
  return gi(e) && fn(U2, e);
}
function Z2(e) {
  return gi(e) && fn(Y2, e);
}
function J2(e) {
  return gi(e) && !Id(e) && fn(mb, e);
}
function Q2(e) {
  return gi(e) && (fn(K2, e) || fn(mb, e) && Id(e));
}
var Mu = "keyboard.keydown", eP = "keyboard.keyup", _g = "input-handle-modified-keys", tP = 1e3;
function Pn(e, t) {
  var n = this;
  this._config = e || {}, this._eventBus = t, this._keydownHandler = this._keydownHandler.bind(this), this._keyupHandler = this._keyupHandler.bind(this), t.on("diagram.destroy", function() {
    n._fire("destroy"), n.unbind();
  }), t.on("diagram.init", function() {
    n._fire("init");
  }), t.on("attach", function() {
    e && e.bindTo && n.bind(e.bindTo);
  }), t.on("detach", function() {
    n.unbind();
  });
}
Pn.$inject = [
  "config.keyboard",
  "eventBus"
];
Pn.prototype._keydownHandler = function(e) {
  this._keyHandler(e, Mu);
};
Pn.prototype._keyupHandler = function(e) {
  this._keyHandler(e, eP);
};
Pn.prototype._keyHandler = function(e, t) {
  var n;
  if (!this._isEventIgnored(e)) {
    var i = {
      keyEvent: e
    };
    n = this._eventBus.fire(t || Mu, i), n && e.preventDefault();
  }
};
Pn.prototype._isEventIgnored = function(e) {
  return e.defaultPrevented ? !0 : (nP(e.target) || iP(e.target) && fn([" ", "Enter"], e)) && this._isModifiedKeyIgnored(e);
};
Pn.prototype._isModifiedKeyIgnored = function(e) {
  if (!gi(e))
    return !0;
  var t = this._getAllowedModifiers(e.target);
  return t.indexOf(e.key) === -1;
};
Pn.prototype._getAllowedModifiers = function(e) {
  var t = lo(e, "[" + _g + "]", !0);
  return !t || this._node && !this._node.contains(t) ? [] : t.getAttribute(_g).split(",");
};
Pn.prototype.bind = function(e) {
  this.unbind(), this._node = e, Ye.bind(e, "keydown", this._keydownHandler), Ye.bind(e, "keyup", this._keyupHandler), this._fire("bind");
};
Pn.prototype.getBinding = function() {
  return this._node;
};
Pn.prototype.unbind = function() {
  var e = this._node;
  e && (this._fire("unbind"), Ye.unbind(e, "keydown", this._keydownHandler), Ye.unbind(e, "keyup", this._keyupHandler)), this._node = null;
};
Pn.prototype._fire = function(e) {
  this._eventBus.fire("keyboard." + e, { node: this._node });
};
Pn.prototype.addListener = function(e, t, n) {
  un(e) && (n = t, t = e, e = tP), this._eventBus.on(n || Mu, e, t);
};
Pn.prototype.removeListener = function(e, t) {
  this._eventBus.off(t || Mu, e);
};
Pn.prototype.hasModifier = q2;
Pn.prototype.isCmd = gi;
Pn.prototype.isShift = Id;
Pn.prototype.isKey = fn;
function nP(e) {
  return e && (Ba(e, "input, textarea") || e.contentEditable === "true");
}
function iP(e) {
  return e && Ba(e, "button, input[type=submit], input[type=button], a[href], [aria-role=button]");
}
var rP = 500;
function Xa(e, t) {
  var n = this;
  e.on("editorActions.init", rP, function(i) {
    var r = i.editorActions;
    n.registerBindings(t, r);
  });
}
Xa.$inject = [
  "eventBus",
  "keyboard"
];
Xa.prototype.registerBindings = function(e, t) {
  function n(i, r) {
    t.isRegistered(i) && e.addListener(r);
  }
  n("undo", function(i) {
    var r = i.keyEvent;
    if (J2(r))
      return t.trigger("undo"), !0;
  }), n("redo", function(i) {
    var r = i.keyEvent;
    if (Q2(r))
      return t.trigger("redo"), !0;
  }), n("copy", function(i) {
    var r = i.keyEvent;
    if (X2(r))
      return t.trigger("copy"), !0;
  }), n("paste", function(i) {
    var r = i.keyEvent;
    if (Z2(r))
      return t.trigger("paste"), !0;
  }), n("stepZoom", function(i) {
    var r = i.keyEvent;
    if (fn(["+", "Add", "="], r) && gi(r))
      return t.trigger("stepZoom", { value: 1 }), !0;
  }), n("stepZoom", function(i) {
    var r = i.keyEvent;
    if (fn(["-", "Subtract"], r) && gi(r))
      return t.trigger("stepZoom", { value: -1 }), !0;
  }), n("zoom", function(i) {
    var r = i.keyEvent;
    if (fn("0", r) && gi(r))
      return t.trigger("zoom", { value: 1 }), !0;
  }), n("removeSelection", function(i) {
    var r = i.keyEvent;
    if (fn(["Backspace", "Delete", "Del"], r))
      return t.trigger("removeSelection"), !0;
  });
};
const $d = {
  __init__: ["keyboard", "keyboardBindings"],
  keyboard: ["type", Pn],
  keyboardBindings: ["type", Xa]
};
var oP = {
  moveSpeed: 50,
  moveSpeedAccelerated: 200
};
function yb(e, t, n) {
  var i = this;
  this._config = G({}, oP, e || {}), t.addListener(r);
  function r(o) {
    var a = o.keyEvent, c = i._config;
    if (t.isCmd(a) && t.isKey([
      "ArrowLeft",
      "Left",
      "ArrowUp",
      "Up",
      "ArrowDown",
      "Down",
      "ArrowRight",
      "Right"
    ], a)) {
      var l = t.isShift(a) ? c.moveSpeedAccelerated : c.moveSpeed, u;
      switch (a.key) {
        case "ArrowLeft":
        case "Left":
          u = "left";
          break;
        case "ArrowUp":
        case "Up":
          u = "up";
          break;
        case "ArrowRight":
        case "Right":
          u = "right";
          break;
        case "ArrowDown":
        case "Down":
          u = "down";
          break;
      }
      return i.moveCanvas({
        speed: l,
        direction: u
      }), !0;
    }
  }
  this.moveCanvas = function(o) {
    var a = 0, c = 0, l = o.speed, u = l / Math.min(Math.sqrt(n.viewbox().scale), 1);
    switch (o.direction) {
      case "left":
        a = u;
        break;
      case "up":
        c = u;
        break;
      case "right":
        a = -u;
        break;
      case "down":
        c = -u;
        break;
    }
    n.scroll({
      dx: a,
      dy: c
    });
  };
}
yb.$inject = [
  "config.keyboardMove",
  "keyboard",
  "canvas"
];
const gb = {
  __depends__: [
    $d
  ],
  __init__: ["keyboardMove"],
  keyboardMove: ["type", yb]
};
var aP = /^djs-cursor-.*$/;
function Du(e) {
  var t = gn(document.body);
  t.removeMatching(aP), e && t.add("djs-cursor-" + e);
}
function vb() {
  Du(null);
}
var sP = 5e3;
function _b(e, t) {
  t = t || "element.click";
  function n() {
    return !1;
  }
  return e.once(t, sP, n), function() {
    e.off(t, n);
  };
}
function Ls(e) {
  return {
    x: e.x + e.width / 2,
    y: e.y + e.height / 2
  };
}
function Vi(e, t) {
  return {
    x: e.x - t.x,
    y: e.y - t.y
  };
}
var cP = 15;
function bb(e, t) {
  var n;
  e.on("element.mousedown", 500, function(a) {
    return o(a.originalEvent);
  });
  function i(a) {
    var c = n.start, l = n.button, u = Jo(a), d = Vi(u, c);
    if (!n.dragging && lP(d) > cP && (n.dragging = !0, l === 0 && _b(e), Du("grab")), n.dragging) {
      var f = n.last || n.start;
      d = Vi(u, f), t.scroll({
        dx: d.x,
        dy: d.y
      }), n.last = u;
    }
    a.preventDefault();
  }
  function r(a) {
    Ye.unbind(document, "mousemove", i), Ye.unbind(document, "mouseup", r), n = null, vb();
  }
  function o(a) {
    if (!lo(a.target, ".djs-draggable")) {
      var c = a.button;
      if (!(c >= 2 || a.ctrlKey || a.shiftKey || a.altKey))
        return n = {
          button: c,
          start: Jo(a)
        }, Ye.bind(document, "mousemove", i), Ye.bind(document, "mouseup", r), !0;
    }
  }
  this.isActive = function() {
    return !!n;
  };
}
bb.$inject = [
  "eventBus",
  "canvas"
];
function lP(e) {
  return Math.sqrt(Math.pow(e.x, 2) + Math.pow(e.y, 2));
}
const xb = {
  __init__: ["moveCanvas"],
  moveCanvas: ["type", bb]
};
function $f(e) {
  return Math.log(e) / Math.log(10);
}
function Eb(e, t) {
  var n = $f(e.min), i = $f(e.max), r = Math.abs(n) + Math.abs(i);
  return r / t;
}
function uP(e, t) {
  return Math.max(e.min, Math.min(e.max, t));
}
var pP = Math.sign || function(e) {
  return e >= 0 ? 1 : -1;
}, jd = { min: 0.2, max: 4 }, wb = 10, fP = 0.1, dP = 0.75;
function dr(e, t, n) {
  e = e || {}, this._enabled = !1, this._canvas = n, this._container = n._container, this._handleWheel = Jn(this._handleWheel, this), this._totalDelta = 0, this._scale = e.scale || dP;
  var i = this;
  t.on("canvas.init", function(r) {
    i._init(e.enabled !== !1);
  });
}
dr.$inject = [
  "config.zoomScroll",
  "eventBus",
  "canvas"
];
dr.prototype.scroll = function(t) {
  this._canvas.scroll(t);
};
dr.prototype.reset = function() {
  this._canvas.zoom("fit-viewport");
};
dr.prototype.zoom = function(t, n) {
  var i = Eb(jd, wb * 2);
  this._totalDelta += t, Math.abs(this._totalDelta) > fP && (this._zoom(t, n, i), this._totalDelta = 0);
};
dr.prototype._handleWheel = function(t) {
  if (!lo(t.target, ".djs-scrollable", !0)) {
    var n = this._container;
    t.preventDefault();
    var i = t.ctrlKey || pb() && t.metaKey, r = t.shiftKey, o = -1 * this._scale, a;
    if (i ? o *= t.deltaMode === 0 ? 0.02 : 0.32 : o *= t.deltaMode === 0 ? 1 : 16, i) {
      var c = n.getBoundingClientRect(), l = {
        x: t.clientX - c.left,
        y: t.clientY - c.top
      };
      a = Math.sqrt(
        Math.pow(t.deltaY, 2) + Math.pow(t.deltaX, 2)
      ) * pP(t.deltaY) * o, this.zoom(a, l);
    } else
      r ? a = {
        dx: o * t.deltaY,
        dy: 0
      } : a = {
        dx: o * t.deltaX,
        dy: o * t.deltaY
      }, this.scroll(a);
  }
};
dr.prototype.stepZoom = function(t, n) {
  var i = Eb(jd, wb);
  this._zoom(t, n, i);
};
dr.prototype._zoom = function(e, t, n) {
  var i = this._canvas, r = e > 0 ? 1 : -1, o = $f(i.zoom()), a = Math.round(o / n) * n;
  a += n * r;
  var c = Math.pow(10, a);
  i.zoom(uP(jd, c), t);
};
dr.prototype.toggle = function(t) {
  var n = this._container, i = this._handleWheel, r = this._enabled;
  return typeof t > "u" && (t = !r), r !== t && Ye[t ? "bind" : "unbind"](n, "wheel", i, !1), this._enabled = t, t;
};
dr.prototype._init = function(e) {
  this.toggle(e);
};
const Sb = {
  __init__: ["zoomScroll"],
  zoomScroll: ["type", dr]
};
function Vs(e) {
  yo.call(this, e);
}
Pe(Vs, yo);
Vs.prototype._navigationModules = [
  gb,
  xb,
  Sb
];
Vs.prototype._modules = [].concat(
  yo.prototype._modules,
  Vs.prototype._navigationModules
);
function Jp(e) {
  return e && e[e.length - 1];
}
function bg(e) {
  return e.y;
}
function xg(e) {
  return e.x;
}
var hP = {
  left: xg,
  center: xg,
  right: function(e) {
    return e.x + e.width;
  },
  top: bg,
  middle: bg,
  bottom: function(e) {
    return e.y + e.height;
  }
};
function Za(e, t) {
  this._modeling = e, this._rules = t;
}
Za.$inject = ["modeling", "rules"];
Za.prototype._getOrientationDetails = function(e) {
  var t = ["top", "bottom", "middle"], n = "x", i = "width";
  return t.indexOf(e) !== -1 && (n = "y", i = "height"), {
    axis: n,
    dimension: i
  };
};
Za.prototype._isType = function(e, t) {
  return t.indexOf(e) !== -1;
};
Za.prototype._alignmentPosition = function(e, t) {
  var n = this._getOrientationDetails(e), i = n.axis, r = n.dimension, o = {}, a = {}, c = !1, l, u, d;
  function f(y, g) {
    return Math.round((y[i] + g[i] + g[r]) / 2);
  }
  if (this._isType(e, ["left", "top"]))
    o[e] = t[0][i];
  else if (this._isType(e, ["right", "bottom"]))
    d = Jp(t), o[e] = d[i] + d[r];
  else if (this._isType(e, ["center", "middle"])) {
    if (z(t, function(y) {
      var g = y[i] + Math.round(y[r] / 2);
      a[g] ? a[g].elements.push(y) : a[g] = {
        elements: [y],
        center: g
      };
    }), l = Gi(a, function(y) {
      return y.elements.length > 1 && (c = !0), y.elements.length;
    }), c)
      return o[e] = Jp(l).center, o;
    u = t[0], t = Gi(t, function(y) {
      return y[i] + y[r];
    }), d = Jp(t), o[e] = f(u, d);
  }
  return o;
};
Za.prototype.trigger = function(e, t) {
  var n = this._modeling, i, r = et(e, function(l) {
    return !(l.waypoints || l.host || l.labelTarget);
  });
  if (i = this._rules.allowed("elements.align", { elements: r }), nt(i) && (r = i), !(r.length < 2 || !i)) {
    var o = hP[t], a = Gi(r, o), c = this._alignmentPosition(t, a);
    n.alignElements(a, c);
  }
};
const mP = {
  __init__: ["alignElements"],
  alignElements: ["type", Za]
};
var pl = ".entry", yP = 1e3, Eg = 12, gP = 300;
function Qn(e, t, n, i) {
  this._canvas = e, this._eventBus = n, this._overlays = i;
  var r = dn(t && t.scale) ? t.scale : {
    min: 1,
    max: 1
  };
  this._overlaysConfig = {
    scale: r
  }, this._current = null, this._init();
}
Qn.$inject = [
  "canvas",
  "config.contextPad",
  "eventBus",
  "overlays"
];
Qn.prototype._init = function() {
  var e = this;
  this._eventBus.on("selection.changed", function(t) {
    var n = t.newSelection, i = n.length ? n.length === 1 ? n[0] : n : null;
    i ? e.open(i, !0) : e.close();
  }), this._eventBus.on("elements.changed", function(t) {
    var n = t.elements, i = e._current;
    if (i) {
      var r = i.target, o = Dr(
        nt(r) ? r : [r],
        function(a) {
          return Rb(n, a);
        }
      );
      o && e.open(r, !0);
    }
  });
};
Qn.prototype.registerProvider = function(e, t) {
  t || (t = e, e = yP), this._eventBus.on("contextPad.getProviders", e, function(n) {
    n.providers.push(t);
  });
};
Qn.prototype.getEntries = function(e) {
  var t = this._getProviders(), n = nt(e) ? "getMultiElementContextPadEntries" : "getContextPadEntries", i = {};
  return z(t, function(r) {
    if (un(r[n])) {
      var o = r[n](e);
      un(o) ? i = o(i) : z(o, function(a, c) {
        i[c] = a;
      });
    }
  }), i;
};
Qn.prototype.trigger = function(e, t, n) {
  var i, r, o = t.delegateTarget || t.target;
  return o ? (i = zn(o, "data-action"), r = t.originalEvent || t, e === "mouseover" ? this._timeout = setTimeout(() => {
    this._mouseout = this.triggerEntry(i, "hover", r, n);
  }, gP) : e === "mouseout" && (clearTimeout(this._timeout), this._mouseout && (this._mouseout(), this._mouseout = null)), this.triggerEntry(i, e, r, n)) : t.preventDefault();
};
Qn.prototype.triggerEntry = function(e, t, n, i) {
  if (this.isShown()) {
    var r = this._current.target, o = this._current.entries, a = o[e];
    if (a) {
      var c = a.action;
      if (this._eventBus.fire("contextPad.trigger", { entry: a, event: n }) !== !1) {
        if (un(c)) {
          if (t === "click")
            return c(n, r, i);
        } else if (c[t])
          return c[t](n, r, i);
        n.preventDefault();
      }
    }
  }
};
Qn.prototype.open = function(e, t) {
  !t && this.isOpen(e) || (this.close(), this._updateAndOpen(e));
};
Qn.prototype._getProviders = function() {
  var e = this._eventBus.createEvent({
    type: "contextPad.getProviders",
    providers: []
  });
  return this._eventBus.fire(e), e.providers;
};
Qn.prototype._updateAndOpen = function(e) {
  var t = this.getEntries(e), n = this.getPad(e), i = n.html, r;
  z(t, function(o, a) {
    var c = o.group || "default", l = Bt(o.html || '<div class="entry" draggable="true"></div>'), u;
    zn(l, "data-action", a), u = Tt("[data-group=" + Hs(c) + "]", i), u || (u = Bt('<div class="group"></div>'), zn(u, "data-group", c), i.appendChild(u)), u.appendChild(l), o.className && vP(l, o.className), o.title && zn(l, "title", o.title), o.imageUrl && (r = Bt("<img>"), zn(r, "src", o.imageUrl), r.style.width = "100%", r.style.height = "100%", l.appendChild(r));
  }), gn(i).add("open"), this._current = {
    target: e,
    entries: t,
    pad: n
  }, this._eventBus.fire("contextPad.open", { current: this._current });
};
Qn.prototype.getPad = function(e) {
  if (this.isOpen())
    return this._current.pad;
  var t = this, n = this._overlays, i = Bt('<div class="djs-context-pad"></div>'), r = this._getPosition(e), o = G({
    html: i
  }, this._overlaysConfig, r);
  si.bind(i, pl, "click", function(l) {
    t.trigger("click", l);
  }), si.bind(i, pl, "dragstart", function(l) {
    t.trigger("dragstart", l);
  }), si.bind(i, pl, "mouseover", function(l) {
    t.trigger("mouseover", l);
  }), si.bind(i, pl, "mouseout", function(l) {
    t.trigger("mouseout", l);
  }), Ye.bind(i, "mousedown", function(l) {
    l.stopPropagation();
  });
  var a = this._canvas.getRootElement();
  this._overlayId = n.add(a, "context-pad", o);
  var c = n.get(this._overlayId);
  return this._eventBus.fire("contextPad.create", {
    target: e,
    pad: c
  }), c;
};
Qn.prototype.close = function() {
  this.isOpen() && (clearTimeout(this._timeout), this._overlays.remove(this._overlayId), this._overlayId = null, this._eventBus.fire("contextPad.close", { current: this._current }), this._current = null);
};
Qn.prototype.isOpen = function(e) {
  var t = this._current;
  if (!t)
    return !1;
  if (!e)
    return !0;
  var n = t.target;
  return nt(e) !== nt(n) ? !1 : nt(e) ? e.length === n.length && Wa(e, function(i) {
    return Rb(n, i);
  }) : n === e;
};
Qn.prototype.isShown = function() {
  return this.isOpen() && this._overlays.isShown();
};
Qn.prototype._getPosition = function(e) {
  e = kt(e) ? _P(e) : e;
  var t = nt(e) ? e : [e], n = nn(t);
  return {
    position: {
      left: n.x + n.width + Eg,
      top: n.y - Eg / 2
    }
  };
};
function vP(e, t) {
  var n = gn(e);
  t = nt(t) ? t : t.split(/\s+/g), t.forEach(function(i) {
    n.add(i);
  });
}
function Rb(e, t) {
  return e.indexOf(t) !== -1;
}
function _P(e) {
  return e.waypoints[e.waypoints.length - 1];
}
const Cb = {
  __depends__: [
    ku,
    Pu
  ],
  contextPad: ["type", Qn]
};
var Ou, Xt, Ab, Vo, wg, Pb, jf, Fd, Ff, Hf, Ws = {}, Tb = [], bP = /acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i, Hd = Array.isArray;
function io(e, t) {
  for (var n in t)
    e[n] = t[n];
  return e;
}
function kb(e) {
  var t = e.parentNode;
  t && t.removeChild(e);
}
function Mb(e, t, n) {
  var i, r, o, a = {};
  for (o in t)
    o == "key" ? i = t[o] : o == "ref" ? r = t[o] : a[o] = t[o];
  if (arguments.length > 2 && (a.children = arguments.length > 3 ? Ou.call(arguments, 2) : n), typeof e == "function" && e.defaultProps != null)
    for (o in e.defaultProps)
      a[o] === void 0 && (a[o] = e.defaultProps[o]);
  return Fl(e, a, i, r, null);
}
function Fl(e, t, n, i, r) {
  var o = { type: e, props: t, key: n, ref: i, __k: null, __: null, __b: 0, __e: null, __d: void 0, __c: null, constructor: void 0, __v: r ?? ++Ab, __i: -1, __u: 0 };
  return r == null && Xt.vnode != null && Xt.vnode(o), o;
}
function Nu(e) {
  return e.children;
}
function Hl(e, t) {
  this.props = e, this.context = t;
}
function Qo(e, t) {
  if (t == null)
    return e.__ ? Qo(e.__, e.__i + 1) : null;
  for (var n; t < e.__k.length; t++)
    if ((n = e.__k[t]) != null && n.__e != null)
      return n.__e;
  return typeof e.type == "function" ? Qo(e) : null;
}
function Db(e) {
  var t, n;
  if ((e = e.__) != null && e.__c != null) {
    for (e.__e = e.__c.base = null, t = 0; t < e.__k.length; t++)
      if ((n = e.__k[t]) != null && n.__e != null) {
        e.__e = e.__c.base = n.__e;
        break;
      }
    return Db(e);
  }
}
function Sg(e) {
  (!e.__d && (e.__d = !0) && Vo.push(e) && !ou.__r++ || wg !== Xt.debounceRendering) && ((wg = Xt.debounceRendering) || Pb)(ou);
}
function ou() {
  var e, t, n, i, r, o, a, c;
  for (Vo.sort(jf); e = Vo.shift(); )
    e.__d && (t = Vo.length, i = void 0, o = (r = (n = e).__v).__e, a = [], c = [], n.__P && ((i = io({}, r)).__v = r.__v + 1, Xt.vnode && Xt.vnode(i), zd(n.__P, i, r, n.__n, n.__P.ownerSVGElement !== void 0, 32 & r.__u ? [o] : null, a, o ?? Qo(r), !!(32 & r.__u), c), i.__v = r.__v, i.__.__k[i.__i] = i, Bb(a, i, c), i.__e != o && Db(i)), Vo.length > t && Vo.sort(jf));
  ou.__r = 0;
}
function Ob(e, t, n, i, r, o, a, c, l, u, d) {
  var f, y, g, _, x, w = i && i.__k || Tb, D = t.length;
  for (n.__d = l, xP(n, t, w), l = n.__d, f = 0; f < D; f++)
    (g = n.__k[f]) != null && typeof g != "boolean" && typeof g != "function" && (y = g.__i === -1 ? Ws : w[g.__i] || Ws, g.__i = f, zd(e, g, y, r, o, a, c, l, u, d), _ = g.__e, g.ref && y.ref != g.ref && (y.ref && Vd(y.ref, null, g), d.push(g.ref, g.__c || _, g)), x == null && _ != null && (x = _), 65536 & g.__u || y.__k === g.__k ? (l && !l.isConnected && (l = Qo(y)), l = Nb(g, l, e)) : typeof g.type == "function" && g.__d !== void 0 ? l = g.__d : _ && (l = _.nextSibling), g.__d = void 0, g.__u &= -196609);
  n.__d = l, n.__e = x;
}
function xP(e, t, n) {
  var i, r, o, a, c, l = t.length, u = n.length, d = u, f = 0;
  for (e.__k = [], i = 0; i < l; i++)
    a = i + f, (r = e.__k[i] = (r = t[i]) == null || typeof r == "boolean" || typeof r == "function" ? null : typeof r == "string" || typeof r == "number" || typeof r == "bigint" || r.constructor == String ? Fl(null, r, null, null, null) : Hd(r) ? Fl(Nu, { children: r }, null, null, null) : r.constructor === void 0 && r.__b > 0 ? Fl(r.type, r.props, r.key, r.ref ? r.ref : null, r.__v) : r) != null ? (r.__ = e, r.__b = e.__b + 1, c = EP(r, n, a, d), r.__i = c, o = null, c !== -1 && (d--, (o = n[c]) && (o.__u |= 131072)), o == null || o.__v === null ? (c == -1 && f--, typeof r.type != "function" && (r.__u |= 65536)) : c !== a && (c === a + 1 ? f++ : c > a ? d > l - a ? f += c - a : f-- : c < a ? c == a - 1 && (f = c - a) : f = 0, c !== i + f && (r.__u |= 65536))) : (o = n[a]) && o.key == null && o.__e && !(131072 & o.__u) && (o.__e == e.__d && (e.__d = Qo(o)), zf(o, o, !1), n[a] = null, d--);
  if (d)
    for (i = 0; i < u; i++)
      (o = n[i]) != null && !(131072 & o.__u) && (o.__e == e.__d && (e.__d = Qo(o)), zf(o, o));
}
function Nb(e, t, n) {
  var i, r;
  if (typeof e.type == "function") {
    for (i = e.__k, r = 0; i && r < i.length; r++)
      i[r] && (i[r].__ = e, t = Nb(i[r], t, n));
    return t;
  }
  e.__e != t && (n.insertBefore(e.__e, t || null), t = e.__e);
  do
    t = t && t.nextSibling;
  while (t != null && t.nodeType === 8);
  return t;
}
function EP(e, t, n, i) {
  var r = e.key, o = e.type, a = n - 1, c = n + 1, l = t[n];
  if (l === null || l && r == l.key && o === l.type && !(131072 & l.__u))
    return n;
  if (i > (l != null && !(131072 & l.__u) ? 1 : 0))
    for (; a >= 0 || c < t.length; ) {
      if (a >= 0) {
        if ((l = t[a]) && !(131072 & l.__u) && r == l.key && o === l.type)
          return a;
        a--;
      }
      if (c < t.length) {
        if ((l = t[c]) && !(131072 & l.__u) && r == l.key && o === l.type)
          return c;
        c++;
      }
    }
  return -1;
}
function Rg(e, t, n) {
  t[0] === "-" ? e.setProperty(t, n ?? "") : e[t] = n == null ? "" : typeof n != "number" || bP.test(t) ? n : n + "px";
}
function fl(e, t, n, i, r) {
  var o;
  e:
    if (t === "style")
      if (typeof n == "string")
        e.style.cssText = n;
      else {
        if (typeof i == "string" && (e.style.cssText = i = ""), i)
          for (t in i)
            n && t in n || Rg(e.style, t, "");
        if (n)
          for (t in n)
            i && n[t] === i[t] || Rg(e.style, t, n[t]);
      }
    else if (t[0] === "o" && t[1] === "n")
      o = t !== (t = t.replace(/(PointerCapture)$|Capture$/i, "$1")), t = t.toLowerCase() in e || t === "onFocusOut" || t === "onFocusIn" ? t.toLowerCase().slice(2) : t.slice(2), e.l || (e.l = {}), e.l[t + o] = n, n ? i ? n.u = i.u : (n.u = Fd, e.addEventListener(t, o ? Hf : Ff, o)) : e.removeEventListener(t, o ? Hf : Ff, o);
    else {
      if (r)
        t = t.replace(/xlink(H|:h)/, "h").replace(/sName$/, "s");
      else if (t != "width" && t != "height" && t != "href" && t != "list" && t != "form" && t != "tabIndex" && t != "download" && t != "rowSpan" && t != "colSpan" && t != "role" && t in e)
        try {
          e[t] = n ?? "";
          break e;
        } catch {
        }
      typeof n == "function" || (n == null || n === !1 && t[4] !== "-" ? e.removeAttribute(t) : e.setAttribute(t, n));
    }
}
function Cg(e) {
  return function(t) {
    if (this.l) {
      var n = this.l[t.type + e];
      if (t.t == null)
        t.t = Fd++;
      else if (t.t < n.u)
        return;
      return n(Xt.event ? Xt.event(t) : t);
    }
  };
}
function zd(e, t, n, i, r, o, a, c, l, u) {
  var d, f, y, g, _, x, w, D, O, k, P, N, j, W, $, Z = t.type;
  if (t.constructor !== void 0)
    return null;
  128 & n.__u && (l = !!(32 & n.__u), o = [c = t.__e = n.__e]), (d = Xt.__b) && d(t);
  e:
    if (typeof Z == "function")
      try {
        if (D = t.props, O = (d = Z.contextType) && i[d.__c], k = d ? O ? O.props.value : d.__ : i, n.__c ? w = (f = t.__c = n.__c).__ = f.__E : ("prototype" in Z && Z.prototype.render ? t.__c = f = new Z(D, k) : (t.__c = f = new Hl(D, k), f.constructor = Z, f.render = SP), O && O.sub(f), f.props = D, f.state || (f.state = {}), f.context = k, f.__n = i, y = f.__d = !0, f.__h = [], f._sb = []), f.__s == null && (f.__s = f.state), Z.getDerivedStateFromProps != null && (f.__s == f.state && (f.__s = io({}, f.__s)), io(f.__s, Z.getDerivedStateFromProps(D, f.__s))), g = f.props, _ = f.state, f.__v = t, y)
          Z.getDerivedStateFromProps == null && f.componentWillMount != null && f.componentWillMount(), f.componentDidMount != null && f.__h.push(f.componentDidMount);
        else {
          if (Z.getDerivedStateFromProps == null && D !== g && f.componentWillReceiveProps != null && f.componentWillReceiveProps(D, k), !f.__e && (f.shouldComponentUpdate != null && f.shouldComponentUpdate(D, f.__s, k) === !1 || t.__v === n.__v)) {
            for (t.__v !== n.__v && (f.props = D, f.state = f.__s, f.__d = !1), t.__e = n.__e, t.__k = n.__k, t.__k.forEach(function(X) {
              X && (X.__ = t);
            }), P = 0; P < f._sb.length; P++)
              f.__h.push(f._sb[P]);
            f._sb = [], f.__h.length && a.push(f);
            break e;
          }
          f.componentWillUpdate != null && f.componentWillUpdate(D, f.__s, k), f.componentDidUpdate != null && f.__h.push(function() {
            f.componentDidUpdate(g, _, x);
          });
        }
        if (f.context = k, f.props = D, f.__P = e, f.__e = !1, N = Xt.__r, j = 0, "prototype" in Z && Z.prototype.render) {
          for (f.state = f.__s, f.__d = !1, N && N(t), d = f.render(f.props, f.state, f.context), W = 0; W < f._sb.length; W++)
            f.__h.push(f._sb[W]);
          f._sb = [];
        } else
          do
            f.__d = !1, N && N(t), d = f.render(f.props, f.state, f.context), f.state = f.__s;
          while (f.__d && ++j < 25);
        f.state = f.__s, f.getChildContext != null && (i = io(io({}, i), f.getChildContext())), y || f.getSnapshotBeforeUpdate == null || (x = f.getSnapshotBeforeUpdate(g, _)), Ob(e, Hd($ = d != null && d.type === Nu && d.key == null ? d.props.children : d) ? $ : [$], t, n, i, r, o, a, c, l, u), f.base = t.__e, t.__u &= -161, f.__h.length && a.push(f), w && (f.__E = f.__ = null);
      } catch (X) {
        t.__v = null, l || o != null ? (t.__e = c, t.__u |= l ? 160 : 32, o[o.indexOf(c)] = null) : (t.__e = n.__e, t.__k = n.__k), Xt.__e(X, t, n);
      }
    else
      o == null && t.__v === n.__v ? (t.__k = n.__k, t.__e = n.__e) : t.__e = wP(n.__e, t, n, i, r, o, a, l, u);
  (d = Xt.diffed) && d(t);
}
function Bb(e, t, n) {
  t.__d = void 0;
  for (var i = 0; i < n.length; i++)
    Vd(n[i], n[++i], n[++i]);
  Xt.__c && Xt.__c(t, e), e.some(function(r) {
    try {
      e = r.__h, r.__h = [], e.some(function(o) {
        o.call(r);
      });
    } catch (o) {
      Xt.__e(o, r.__v);
    }
  });
}
function wP(e, t, n, i, r, o, a, c, l) {
  var u, d, f, y, g, _, x, w = n.props, D = t.props, O = t.type;
  if (O === "svg" && (r = !0), o != null) {
    for (u = 0; u < o.length; u++)
      if ((g = o[u]) && "setAttribute" in g == !!O && (O ? g.localName === O : g.nodeType === 3)) {
        e = g, o[u] = null;
        break;
      }
  }
  if (e == null) {
    if (O === null)
      return document.createTextNode(D);
    e = r ? document.createElementNS("http://www.w3.org/2000/svg", O) : document.createElement(O, D.is && D), o = null, c = !1;
  }
  if (O === null)
    w === D || c && e.data === D || (e.data = D);
  else {
    if (o = o && Ou.call(e.childNodes), w = n.props || Ws, !c && o != null)
      for (w = {}, u = 0; u < e.attributes.length; u++)
        w[(g = e.attributes[u]).name] = g.value;
    for (u in w)
      if (g = w[u], u != "children") {
        if (u == "dangerouslySetInnerHTML")
          f = g;
        else if (u !== "key" && !(u in D)) {
          if (u == "value" && "defaultValue" in D || u == "checked" && "defaultChecked" in D)
            continue;
          fl(e, u, null, g, r);
        }
      }
    for (u in D)
      g = D[u], u == "children" ? y = g : u == "dangerouslySetInnerHTML" ? d = g : u == "value" ? _ = g : u == "checked" ? x = g : u === "key" || c && typeof g != "function" || w[u] === g || fl(e, u, g, w[u], r);
    if (d)
      c || f && (d.__html === f.__html || d.__html === e.innerHTML) || (e.innerHTML = d.__html), t.__k = [];
    else if (f && (e.innerHTML = ""), Ob(e, Hd(y) ? y : [y], t, n, i, r && O !== "foreignObject", o, a, o ? o[0] : n.__k && Qo(n, 0), c, l), o != null)
      for (u = o.length; u--; )
        o[u] != null && kb(o[u]);
    c || (u = "value", _ !== void 0 && (_ !== e[u] || O === "progress" && !_ || O === "option" && _ !== w[u]) && fl(e, u, _, w[u], !1), u = "checked", x !== void 0 && x !== e[u] && fl(e, u, x, w[u], !1));
  }
  return e;
}
function Vd(e, t, n) {
  try {
    typeof e == "function" ? e(t) : e.current = t;
  } catch (i) {
    Xt.__e(i, n);
  }
}
function zf(e, t, n) {
  var i, r;
  if (Xt.unmount && Xt.unmount(e), (i = e.ref) && (i.current && i.current !== e.__e || Vd(i, null, t)), (i = e.__c) != null) {
    if (i.componentWillUnmount)
      try {
        i.componentWillUnmount();
      } catch (o) {
        Xt.__e(o, t);
      }
    i.base = i.__P = null;
  }
  if (i = e.__k)
    for (r = 0; r < i.length; r++)
      i[r] && zf(i[r], t, n || typeof e.type != "function");
  n || e.__e == null || kb(e.__e), e.__c = e.__ = e.__e = e.__d = void 0;
}
function SP(e, t, n) {
  return this.constructor(e, n);
}
function Lb(e, t, n) {
  var i, r, o, a;
  Xt.__ && Xt.__(e, t), r = (i = typeof n == "function") ? null : t.__k, o = [], a = [], zd(t, e = (!i && n || t).__k = Mb(Nu, null, [e]), r || Ws, Ws, t.ownerSVGElement !== void 0, !i && n ? [n] : r ? null : t.firstChild ? Ou.call(t.childNodes) : null, o, !i && n ? n : r ? r.__e : t.firstChild, i, a), Bb(o, e, a);
}
Ou = Tb.slice, Xt = { __e: function(e, t, n, i) {
  for (var r, o, a; t = t.__; )
    if ((r = t.__c) && !r.__)
      try {
        if ((o = r.constructor) && o.getDerivedStateFromError != null && (r.setState(o.getDerivedStateFromError(e)), a = r.__d), r.componentDidCatch != null && (r.componentDidCatch(e, i || {}), a = r.__d), a)
          return r.__E = r;
      } catch (c) {
        e = c;
      }
  throw e;
} }, Ab = 0, Hl.prototype.setState = function(e, t) {
  var n;
  n = this.__s != null && this.__s !== this.state ? this.__s : this.__s = io({}, this.state), typeof e == "function" && (e = e(io({}, n), this.props)), e && io(n, e), e != null && this.__v && (t && this._sb.push(t), Sg(this));
}, Hl.prototype.forceUpdate = function(e) {
  this.__v && (this.__e = !0, e && this.__h.push(e), Sg(this));
}, Hl.prototype.render = Nu, Vo = [], Pb = typeof Promise == "function" ? Promise.prototype.then.bind(Promise.resolve()) : setTimeout, jf = function(e, t) {
  return e.__v.__b - t.__v.__b;
}, ou.__r = 0, Fd = 0, Ff = Cg(!1), Hf = Cg(!0);
var Ib = function(e, t, n, i) {
  var r;
  t[0] = 0;
  for (var o = 1; o < t.length; o++) {
    var a = t[o++], c = t[o] ? (t[0] |= a ? 1 : 2, n[t[o++]]) : t[++o];
    a === 3 ? i[0] = c : a === 4 ? i[1] = Object.assign(i[1] || {}, c) : a === 5 ? (i[1] = i[1] || {})[t[++o]] = c : a === 6 ? i[1][t[++o]] += c + "" : a ? (r = e.apply(c, Ib(e, c, n, ["", null])), i.push(r), c[0] ? t[0] |= 2 : (t[o - 2] = 0, t[o] = r)) : i.push(c);
  }
  return i;
}, Ag = /* @__PURE__ */ new Map();
function RP(e) {
  var t = Ag.get(this);
  return t || (t = /* @__PURE__ */ new Map(), Ag.set(this, t)), (t = Ib(this, t.get(e) || (t.set(e, t = function(n) {
    for (var i, r, o = 1, a = "", c = "", l = [0], u = function(y) {
      o === 1 && (y || (a = a.replace(/^\s*\n\s*|\s*\n\s*$/g, ""))) ? l.push(0, y, a) : o === 3 && (y || a) ? (l.push(3, y, a), o = 2) : o === 2 && a === "..." && y ? l.push(4, y, 0) : o === 2 && a && !y ? l.push(5, 0, !0, a) : o >= 5 && ((a || !y && o === 5) && (l.push(o, 0, a, r), o = 6), y && (l.push(o, y, 0, r), o = 6)), a = "";
    }, d = 0; d < n.length; d++) {
      d && (o === 1 && u(), u(d));
      for (var f = 0; f < n[d].length; f++)
        i = n[d][f], o === 1 ? i === "<" ? (u(), l = [l], o = 3) : a += i : o === 4 ? a === "--" && i === ">" ? (o = 1, a = "") : a = i + a[0] : c ? i === c ? c = "" : a += i : i === '"' || i === "'" ? c = i : i === ">" ? (u(), o = 1) : o && (i === "=" ? (o = 5, r = a, a = "") : i === "/" && (o < 5 || n[d][f + 1] === ">") ? (u(), o === 3 && (l = l[0]), o = l, (l = l[0]).push(2, 0, o), o = 0) : i === " " || i === "	" || i === `
` || i === "\r" ? (u(), o = 2) : a += i), o === 3 && a === "!--" && (o = 4, l = l[0]);
    }
    return u(), l;
  }(e)), t), arguments, [])).length > 1 ? t : t[0];
}
var ln = RP.bind(Mb), ja, en, Qp, Pg, Gs = 0, $b = [], zl = [], sn = Xt, Tg = sn.__b, kg = sn.__r, Mg = sn.diffed, Dg = sn.__c, Og = sn.unmount, Ng = sn.__;
function Bu(e, t) {
  sn.__h && sn.__h(en, e, Gs || t), Gs = 0;
  var n = en.__H || (en.__H = { __: [], __h: [] });
  return e >= n.__.length && n.__.push({ __V: zl }), n.__[e];
}
function ef(e) {
  return Gs = 1, CP(Fb, e);
}
function CP(e, t, n) {
  var i = Bu(ja++, 2);
  if (i.t = e, !i.__c && (i.__ = [Fb(void 0, t), function(c) {
    var l = i.__N ? i.__N[0] : i.__[0], u = i.t(l, c);
    l !== u && (i.__N = [u, i.__[1]], i.__c.setState({}));
  }], i.__c = en, !en.u)) {
    var r = function(c, l, u) {
      if (!i.__c.__H)
        return !0;
      var d = i.__c.__H.__.filter(function(y) {
        return !!y.__c;
      });
      if (d.every(function(y) {
        return !y.__N;
      }))
        return !o || o.call(this, c, l, u);
      var f = !1;
      return d.forEach(function(y) {
        if (y.__N) {
          var g = y.__[0];
          y.__ = y.__N, y.__N = void 0, g !== y.__[0] && (f = !0);
        }
      }), !(!f && i.__c.props === c) && (!o || o.call(this, c, l, u));
    };
    en.u = !0;
    var o = en.shouldComponentUpdate, a = en.componentWillUpdate;
    en.componentWillUpdate = function(c, l, u) {
      if (this.__e) {
        var d = o;
        o = void 0, r(c, l, u), o = d;
      }
      a && a.call(this, c, l, u);
    }, en.shouldComponentUpdate = r;
  }
  return i.__N || i.__;
}
function Vf(e, t) {
  var n = Bu(ja++, 3);
  !sn.__s && Wd(n.__H, t) && (n.__ = e, n.i = t, en.__H.__h.push(n));
}
function Wf(e, t) {
  var n = Bu(ja++, 4);
  !sn.__s && Wd(n.__H, t) && (n.__ = e, n.i = t, en.__h.push(n));
}
function jb(e) {
  return Gs = 5, Us(function() {
    return { current: e };
  }, []);
}
function Us(e, t) {
  var n = Bu(ja++, 7);
  return Wd(n.__H, t) ? (n.__V = e(), n.i = t, n.__h = e, n.__V) : n.__;
}
function xs(e, t) {
  return Gs = 8, Us(function() {
    return e;
  }, t);
}
function AP() {
  for (var e; e = $b.shift(); )
    if (e.__P && e.__H)
      try {
        e.__H.__h.forEach(Vl), e.__H.__h.forEach(Gf), e.__H.__h = [];
      } catch (t) {
        e.__H.__h = [], sn.__e(t, e.__v);
      }
}
sn.__b = function(e) {
  en = null, Tg && Tg(e);
}, sn.__ = function(e, t) {
  e && t.__k && t.__k.__m && (e.__m = t.__k.__m), Ng && Ng(e, t);
}, sn.__r = function(e) {
  kg && kg(e), ja = 0;
  var t = (en = e.__c).__H;
  t && (Qp === en ? (t.__h = [], en.__h = [], t.__.forEach(function(n) {
    n.__N && (n.__ = n.__N), n.__V = zl, n.__N = n.i = void 0;
  })) : (t.__h.forEach(Vl), t.__h.forEach(Gf), t.__h = [], ja = 0)), Qp = en;
}, sn.diffed = function(e) {
  Mg && Mg(e);
  var t = e.__c;
  t && t.__H && (t.__H.__h.length && ($b.push(t) !== 1 && Pg === sn.requestAnimationFrame || ((Pg = sn.requestAnimationFrame) || PP)(AP)), t.__H.__.forEach(function(n) {
    n.i && (n.__H = n.i), n.__V !== zl && (n.__ = n.__V), n.i = void 0, n.__V = zl;
  })), Qp = en = null;
}, sn.__c = function(e, t) {
  t.some(function(n) {
    try {
      n.__h.forEach(Vl), n.__h = n.__h.filter(function(i) {
        return !i.__ || Gf(i);
      });
    } catch (i) {
      t.some(function(r) {
        r.__h && (r.__h = []);
      }), t = [], sn.__e(i, n.__v);
    }
  }), Dg && Dg(e, t);
}, sn.unmount = function(e) {
  Og && Og(e);
  var t, n = e.__c;
  n && n.__H && (n.__H.__.forEach(function(i) {
    try {
      Vl(i);
    } catch (r) {
      t = r;
    }
  }), n.__H = void 0, t && sn.__e(t, n.__v));
};
var Bg = typeof requestAnimationFrame == "function";
function PP(e) {
  var t, n = function() {
    clearTimeout(i), Bg && cancelAnimationFrame(t), setTimeout(e);
  }, i = setTimeout(n, 100);
  Bg && (t = requestAnimationFrame(n));
}
function Vl(e) {
  var t = en, n = e.__c;
  typeof n == "function" && (e.__c = void 0, n()), en = t;
}
function Gf(e) {
  var t = en;
  e.__c = e.__(), en = t;
}
function Wd(e, t) {
  return !e || e.length !== t.length || t.some(function(n, i) {
    return n !== e[i];
  });
}
function Fb(e, t) {
  return typeof t == "function" ? t(e) : t;
}
function Hb(e) {
  var t, n, i = "";
  if (typeof e == "string" || typeof e == "number")
    i += e;
  else if (typeof e == "object")
    if (Array.isArray(e)) {
      var r = e.length;
      for (t = 0; t < r; t++)
        e[t] && (n = Hb(e[t])) && (i && (i += " "), i += n);
    } else
      for (n in e)
        e[n] && (i && (i += " "), i += n);
  return i;
}
function Yi() {
  for (var e, t, n = 0, i = "", r = arguments.length; n < r; n++)
    (e = arguments[n]) && (t = Hb(e)) && (i && (i += " "), i += t);
  return i;
}
function TP(e) {
  const {
    entry: t,
    selected: n,
    onMouseEnter: i,
    onMouseLeave: r,
    onAction: o
  } = e;
  return ln`
    <li
      class=${Yi("entry", { selected: n })}
      data-id=${t.id}
      title=${t.title || t.label}
      tabIndex="0"
      onClick=${o}
      onFocus=${i}
      onBlur=${r}
      onMouseEnter=${i}
      onMouseLeave=${r}
      onDragStart=${(a) => o(a, t, "dragstart")}
      aria-role="button"
      draggable=${!0}
    >
      <div class="djs-popup-entry-content">
        <span
          class=${Yi("djs-popup-entry-name", t.className)}
        >
          ${t.imageUrl && ln`<img class="djs-popup-entry-icon" src=${t.imageUrl} alt="" />` || t.imageHtml && ln`<div class="djs-popup-entry-icon" dangerouslySetInnerHTML=${{ __html: t.imageHtml }} />`}

          ${t.label ? ln`
            <span class="djs-popup-label">
              ${t.label}
            </span>
          ` : null}
        </span>
        ${t.description && ln`
          <span
            class="djs-popup-entry-description"
            title=${t.description}
          >
            ${t.description}
          </span>
        `}
      </div>
      ${t.documentationRef && ln`
        <div class="djs-popup-entry-docs">
          <a
            href="${t.documentationRef}"
            onClick=${(a) => a.stopPropagation()}
            title="Open element documentation"
            target="_blank"
            rel="noopener"
          >
            <svg width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path fill-rule="evenodd" clip-rule="evenodd" d="M10.6368 10.6375V5.91761H11.9995V10.6382C11.9995 10.9973 11.8623 11.3141 11.5878 11.5885C11.3134 11.863 10.9966 12.0002 10.6375 12.0002H1.36266C0.982345 12.0002 0.660159 11.8681 0.396102 11.6041C0.132044 11.34 1.52588e-05 11.0178 1.52588e-05 10.6375V1.36267C1.52588e-05 0.98236 0.132044 0.660173 0.396102 0.396116C0.660159 0.132058 0.982345 2.95639e-05 1.36266 2.95639e-05H5.91624V1.36267H1.36266V10.6375H10.6368ZM12 0H7.2794L7.27873 1.36197H9.68701L3.06507 7.98391L4.01541 8.93425L10.6373 2.31231V4.72059H12V0Z" fill="#818798"/>
            </svg>
          </a>
        </div>
      `}
    </li>
  `;
}
function kP(e) {
  const {
    selectedEntry: t,
    setSelectedEntry: n,
    entries: i,
    ...r
  } = e, o = jb(), a = Us(() => MP(i), [i]);
  return Wf(() => {
    const c = o.current;
    if (!c)
      return;
    const l = c.querySelector(".selected");
    l && DP(l);
  }, [t]), ln`
    <div class="djs-popup-results" ref=${o}>
      ${a.map((c) => ln`
        ${c.name && ln`
          <div key=${c.id} class="entry-header" title=${c.name}>
            ${c.name}
          </div>
        `}
        <ul class="djs-popup-group" data-group=${c.id}>
          ${c.entries.map((l) => ln`
            <${TP}
              key=${l.id}
              entry=${l}
              selected=${l === t}
              onMouseEnter=${() => n(l)}
              onMouseLeave=${() => n(null)}
              ...${r}
            />
          `)}
        </ul>
      `)}
    </div>
  `;
}
function MP(e) {
  const t = [], n = (o) => t.find((a) => o.id === a.id), i = (o) => !!n(o), r = (o) => typeof o == "string" ? { id: o } : o;
  return e.forEach((o) => {
    const a = o.group ? r(o.group) : { id: "default" };
    i(a) ? n(a).entries.push(o) : t.push({ ...a, entries: [o] });
  }), t;
}
function DP(e) {
  typeof e.scrollIntoViewIfNeeded == "function" ? e.scrollIntoViewIfNeeded() : e.scrollIntoView({
    scrollMode: "if-needed",
    block: "nearest"
  });
}
function OP(e) {
  const {
    onClose: t,
    onSelect: n,
    className: i,
    headerEntries: r,
    position: o,
    title: a,
    width: c,
    scale: l,
    search: u,
    emptyPlaceholder: d,
    entries: f,
    onOpened: y,
    onClosed: g
  } = e, _ = Us(() => dn(u) ? f.length > 5 : !1, [u, f]), [x, w] = ef(""), D = xs((V, ae) => {
    if (!_)
      return V;
    const ie = (Ae) => {
      if (!ae)
        return (Ae.rank || 0) >= 0;
      if (Ae.searchable === !1)
        return !1;
      const Rt = [
        Ae.description || "",
        Ae.label || "",
        Ae.search || ""
      ].map((it) => it.toLowerCase());
      return ae.toLowerCase().split(/\s/g).every((it) => Rt.some((Ve) => Ve.includes(it)));
    };
    return V.filter(ie);
  }, [_]), [O, k] = ef(D(f, x)), [P, N] = ef(O[0]), j = xs((V) => {
    (!P || !V.includes(P)) && N(V[0]), k(V);
  }, [P, k, N]);
  Vf(() => {
    j(D(f, x));
  }, [x, f]);
  const W = xs((V) => {
    let ie = O.indexOf(P) + V;
    ie < 0 && (ie = O.length - 1), ie >= O.length && (ie = 0), N(O[ie]);
  }, [O, P, N]), $ = xs((V) => {
    if (V.key === "Enter" && P)
      return n(V, P);
    if (V.key === "ArrowUp")
      return W(-1), V.preventDefault();
    if (V.key === "ArrowDown")
      return W(1), V.preventDefault();
  }, [n, P, W]), Z = xs((V) => {
    Ba(V.target, "input") && w(() => V.target.value);
  }, [w]);
  Vf(() => (y(), () => {
    g();
  }), []);
  const X = Us(() => a || r.length > 0, [a, r]);
  return ln`
    <${Lg}
      onClose=${t}
      onKeyup=${Z}
      onKeydown=${$}
      className=${i}
      position=${o}
      width=${c}
      scale=${l}
    >
      ${X && ln`
        <div class="djs-popup-header">
          <h3 class="djs-popup-title" title=${a}>${a}</h3>
          ${r.map((V) => ln`
            <${V.action ? "button" : "span"}
              class=${BP(V, V === P)}
              onClick=${(ae) => n(ae, V)}
              title=${V.title || V.label}
              data-id=${V.id}
              onMouseEnter=${() => N(V)}
              onMouseLeave=${() => N(null)}
              onFocus=${() => N(V)}
              onBlur=${() => N(null)}
            >
            ${V.imageUrl && ln`<img class="djs-popup-entry-icon" src=${V.imageUrl} alt="" />` || V.imageHtml && ln`<div class="djs-popup-entry-icon" dangerouslySetInnerHTML=${{ __html: V.imageHtml }} />`}

              ${V.label ? ln`
                <span class="djs-popup-label">${V.label}</span>
              ` : null}
            </${V.action ? "button" : "span"}>
          `)}
        </div>
      `}
      ${f.length > 0 && ln`
        <div class="djs-popup-body">

          ${_ && ln`
          <div class="djs-popup-search">
            <svg class="djs-popup-search-icon" width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path fill-rule="evenodd" clip-rule="evenodd" d="M9.0325 8.5H9.625L13.3675 12.25L12.25 13.3675L8.5 9.625V9.0325L8.2975 8.8225C7.4425 9.5575 6.3325 10 5.125 10C2.4325 10 0.25 7.8175 0.25 5.125C0.25 2.4325 2.4325 0.25 5.125 0.25C7.8175 0.25 10 2.4325 10 5.125C10 6.3325 9.5575 7.4425 8.8225 8.2975L9.0325 8.5ZM1.75 5.125C1.75 6.9925 3.2575 8.5 5.125 8.5C6.9925 8.5 8.5 6.9925 8.5 5.125C8.5 3.2575 6.9925 1.75 5.125 1.75C3.2575 1.75 1.75 3.2575 1.75 5.125Z" fill="#22242A"/>
            </svg>
            <input type="text" aria-label="${a}" />
          </div>
          `}

          <${kP}
            entries=${O}
            selectedEntry=${P}
            setSelectedEntry=${N}
            onAction=${n}
          />
        </div>
      `}
    ${d && O.length === 0 && ln`
      <div class="djs-popup-no-results">${un(d) ? d(x) : d}</div>
    `}
    </${Lg}>
  `;
}
function Lg(e) {
  const {
    onClose: t,
    onKeydown: n,
    onKeyup: i,
    className: r,
    children: o,
    position: a
  } = e, c = jb();
  return Wf(() => {
    if (typeof a != "function")
      return;
    const l = c.current, u = a(l);
    l.style.left = `${u.x}px`, l.style.top = `${u.y}px`;
  }, [c.current, a]), Wf(() => {
    const l = c.current;
    if (!l)
      return;
    (l.querySelector("input") || l).focus();
  }, []), Vf(() => {
    const l = (d) => {
      if (d.key === "Escape")
        return d.preventDefault(), t();
    }, u = (d) => {
      if (!lo(d.target, ".djs-popup", !0))
        return t();
    };
    return document.documentElement.addEventListener("keydown", l), document.body.addEventListener("click", u), () => {
      document.documentElement.removeEventListener("keydown", l), document.body.removeEventListener("click", u);
    };
  }, []), ln`
    <div
      class=${Yi("djs-popup", r)}
      style=${NP(e)}
      onKeydown=${n}
      onKeyup=${i}
      ref=${c}
      tabIndex="-1"
    >
      ${o}
    </div>
  `;
}
function NP(e) {
  return {
    transform: `scale(${e.scale})`,
    width: `${e.width}px`,
    "transform-origin": "top left"
  };
}
function BP(e, t) {
  return Yi(
    "entry",
    e.className,
    e.active ? "active" : "",
    e.disabled ? "disabled" : "",
    t ? "selected" : ""
  );
}
var LP = "data-id", zb = [
  "contextPad.close",
  "canvas.viewbox.changing",
  "commandStack.changed"
], IP = 1e3;
function Vt(e, t, n) {
  this._eventBus = t, this._canvas = n, this._current = null;
  var i = dn(e && e.scale) ? e.scale : {
    min: 1,
    max: 1
  };
  this._config = {
    scale: i
  }, t.on("diagram.destroy", () => {
    this.close();
  }), t.on("element.changed", (r) => {
    const o = this.isOpen() && this._current.target;
    r.element === o && this.refresh();
  });
}
Vt.$inject = [
  "config.popupMenu",
  "eventBus",
  "canvas"
];
Vt.prototype._render = function() {
  const {
    position: e,
    providerId: t,
    entries: n,
    headerEntries: i,
    emptyPlaceholder: r,
    options: o
  } = this._current, a = Object.entries(n).map(
    ([y, g]) => ({ id: y, ...g })
  ), c = Object.entries(i).map(
    ([y, g]) => ({ id: y, ...g })
  ), l = e && ((y) => this._ensureVisible(y, e)), u = this._updateScale(this._current.container);
  Lb(
    ln`
      <${OP}
        onClose=${(y) => this.close(y)}
        onSelect=${(y, g, _) => this.trigger(y, g, _)}
        position=${l}
        className=${t}
        entries=${a}
        headerEntries=${c}
        emptyPlaceholder=${r}
        scale=${u}
        onOpened=${this._onOpened.bind(this)}
        onClosed=${this._onClosed.bind(this)}
        ...${{ ...o }}
      />
    `,
    this._current.container
  );
};
Vt.prototype.open = function(e, t, n, i) {
  if (!e)
    throw new Error("target is missing");
  if (!t)
    throw new Error("providers for <" + t + "> not found");
  if (!n)
    throw new Error("position is missing");
  this.isOpen() && this.close();
  const {
    entries: r,
    headerEntries: o,
    emptyPlaceholder: a
  } = this._getContext(e, t);
  this._current = {
    position: n,
    providerId: t,
    target: e,
    entries: r,
    headerEntries: o,
    emptyPlaceholder: a,
    container: this._createContainer({ provider: t }),
    options: i
  }, this._emit("open"), this._bindAutoClose(), this._render();
};
Vt.prototype.refresh = function() {
  if (!this.isOpen())
    return;
  const {
    target: e,
    providerId: t
  } = this._current, {
    entries: n,
    headerEntries: i,
    emptyPlaceholder: r
  } = this._getContext(e, t);
  this._current = {
    ...this._current,
    entries: n,
    headerEntries: i,
    emptyPlaceholder: r
  }, this._emit("refresh"), this._render();
};
Vt.prototype._getContext = function(e, t) {
  const n = this._getProviders(t);
  if (!n || !n.length)
    throw new Error("provider for <" + t + "> not found");
  const i = this._getEntries(e, n), r = this._getHeaderEntries(e, n), o = this._getEmptyPlaceholder(n);
  return {
    entries: i,
    headerEntries: r,
    emptyPlaceholder: o,
    empty: !(Object.keys(i).length || Object.keys(r).length)
  };
};
Vt.prototype.close = function() {
  this.isOpen() && (this._emit("close"), this.reset(), this._current = null);
};
Vt.prototype.reset = function() {
  const e = this._current.container;
  Lb(null, e), lr(e);
};
Vt.prototype._emit = function(e, t) {
  this._eventBus.fire(`popupMenu.${e}`, t);
};
Vt.prototype._onOpened = function() {
  this._emit("opened");
};
Vt.prototype._onClosed = function() {
  this._emit("closed");
};
Vt.prototype._createContainer = function(e) {
  var t = this._canvas, n = t.getContainer();
  const i = Bt(`<div class="djs-popup-parent djs-scrollable" data-popup=${e.provider}></div>`);
  return n.appendChild(i), i;
};
Vt.prototype._bindAutoClose = function() {
  this._eventBus.once(zb, this.close, this);
};
Vt.prototype._unbindAutoClose = function() {
  this._eventBus.off(zb, this.close, this);
};
Vt.prototype._updateScale = function() {
  var e = this._canvas.zoom(), t = this._config.scale, n, i, r = e;
  return t !== !0 && (t === !1 ? (n = 1, i = 1) : (n = t.min, i = t.max), dn(n) && e < n && (r = n), dn(i) && e > i && (r = i)), r;
};
Vt.prototype._ensureVisible = function(e, t) {
  var n = document.documentElement.getBoundingClientRect(), i = e.getBoundingClientRect(), r = {}, o = t.x, a = t.y;
  return t.x + i.width > n.width && (r.x = !0), t.y + i.height > n.height && (r.y = !0), r.x && r.y ? (o = t.x - i.width, a = t.y - i.height) : r.x ? (o = t.x - i.width, a = t.y) : r.y && t.y < i.height ? (o = t.x, a = 10) : r.y && (o = t.x, a = t.y - i.height), t.y < n.top && (a = t.y + i.height), {
    x: o,
    y: a
  };
};
Vt.prototype.isEmpty = function(e, t) {
  if (!e)
    throw new Error("target is missing");
  if (!t)
    throw new Error("provider ID is missing");
  const n = this._getProviders(t);
  return !n || !n.length ? !0 : this._getContext(e, t).empty;
};
Vt.prototype.registerProvider = function(e, t, n) {
  n || (n = t, t = IP), this._eventBus.on("popupMenu.getProviders." + e, t, function(i) {
    i.providers.push(n);
  });
};
Vt.prototype._getProviders = function(e) {
  var t = this._eventBus.createEvent({
    type: "popupMenu.getProviders." + e,
    providers: []
  });
  return this._eventBus.fire(t), t.providers;
};
Vt.prototype._getEntries = function(e, t) {
  var n = {};
  return z(t, function(i) {
    if (!i.getPopupMenuEntries) {
      z(i.getEntries(e), function(o) {
        var a = o.id;
        if (!a)
          throw new Error("entry ID is missing");
        n[a] = pr(o, ["id"]);
      });
      return;
    }
    var r = i.getPopupMenuEntries(e);
    un(r) ? n = r(n) : z(r, function(o, a) {
      n[a] = o;
    });
  }), n;
};
Vt.prototype._getHeaderEntries = function(e, t) {
  var n = {};
  return z(t, function(i) {
    if (!i.getPopupMenuHeaderEntries) {
      if (!i.getHeaderEntries)
        return;
      z(i.getHeaderEntries(e), function(o) {
        var a = o.id;
        if (!a)
          throw new Error("entry ID is missing");
        n[a] = pr(o, ["id"]);
      });
      return;
    }
    var r = i.getPopupMenuHeaderEntries(e);
    un(r) ? n = r(n) : z(r, function(o, a) {
      n[a] = o;
    });
  }), n;
};
Vt.prototype._getEmptyPlaceholder = function(e) {
  const t = e.find(
    (n) => un(n.getEmptyPlaceholder)
  );
  return t && t.getEmptyPlaceholder();
};
Vt.prototype.isOpen = function() {
  return !!this._current;
};
Vt.prototype.trigger = function(e, t, n = "click") {
  if (e.preventDefault(), !t) {
    let r = lo(e.delegateTarget || e.target, ".entry", !0), o = zn(r, LP);
    t = { id: o, ...this._getEntry(o) };
  }
  const i = t.action;
  if (this._emit("trigger", { entry: t, event: e }) !== !1) {
    if (un(i)) {
      if (n === "click")
        return i(e, t);
    } else if (i[n])
      return i[n](e, t);
  }
};
Vt.prototype._getEntry = function(e) {
  var t = this._current.entries[e] || this._current.headerEntries[e];
  if (!t)
    throw new Error("entry not found");
  return t;
};
const Gd = {
  __init__: ["popupMenu"],
  popupMenu: ["type", Vt]
};
var Vb = {
  align: `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 2000 2000">
              <line x1="200" y1="150" x2="200" y2="1850" style="stroke:currentColor;stroke-width:100;stroke-linecap:round;"/>
              <rect x="500" y="150" width="1300" height="700" rx="1" style="fill:none;stroke:currentColor;stroke-width:100;"></rect>
              <rect x="500" y="1150" width="700" height="700" rx="1" style="fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;"></rect>
          </svg>`,
  bottom: `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1800 1800">
            <line x1="150" y1="1650" x2="1650" y2="1650" style="stroke:currentColor;stroke-width:100;stroke-linecap:round;"/>
            <rect x="150" y="350" width="600" height="1300" rx="1" style="fill:none;stroke:currentColor;stroke-width:100;"></rect>
            <rect x="1050" y="850" width="600" height="800" rx="1" style="fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;"></rect>
          </svg>`,
  center: `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1800 1800">
            <line x1="900" y1="150" x2="900" y2="1650" style="stroke:currentColor;stroke-width:100;stroke-linecap:round;"/>
            <rect x="250" y="150" width="1300" height="600" rx="1" style="fill:none;stroke:currentColor;stroke-width:100;"></rect>
            <rect x="500" y="1050" width="800" height="600" rx="1" style="fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;"></rect>
          </svg>`,
  left: `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1800 1800">
            <line x1="100" y1="150" x2="100" y2="1650" style="stroke:currentColor;stroke-width:100;stroke-linecap:round;"/>
            <rect x="100" y="150" width="1300" height="600" rx="1" style="fill:none;stroke:currentColor;stroke-width:100;"></rect>
            <rect x="100" y="1050" width="800" height="600" rx="1" style="fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;"></rect>
          </svg>`,
  right: `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1800 1800">
            <line x1="1650" y1="150" x2="1650" y2="1650" style="stroke:currentColor;stroke-width:100;stroke-linecap:round;"/>
            <rect x="350" y="150" width="1300" height="600" rx="1" style="fill:none;stroke:currentColor;stroke-width:100;"></rect>
            <rect x="850" y="1050" width="800" height="600" rx="1" style="fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;"></rect>
          </svg>`,
  top: `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1800 1800">
            <line x1="150" y1="150" x2="1650" y2="150" style="stroke:currentColor;stroke-width:100;stroke-linecap:round;"/>
            <rect x="150" y="150" width="600" height="1300" rx="1" style="fill:none;stroke:currentColor;stroke-width:100;"></rect>
            <rect x="1050" y="150" width="600" height="800" rx="1" style="fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;"></rect>
          </svg>`,
  middle: `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1800 1800">
            <line x1="150" y1="900" x2="1650" y2="900" style="stroke:currentColor;stroke-width:100;stroke-linecap:round;"/>
            <rect x="150" y="250" width="600" height="1300" rx="1" style="fill:none;stroke:currentColor;stroke-width:100;"></rect>
            <rect x="1050" y="500" width="600" height="800" rx="1" style="fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;"></rect>
          </svg>`
}, $P = 900;
function Ja(e, t, n, i) {
  e.registerProvider($P, this), this._contextPad = e, this._popupMenu = t, this._translate = n, this._canvas = i;
}
Ja.$inject = [
  "contextPad",
  "popupMenu",
  "translate",
  "canvas"
];
Ja.prototype.getMultiElementContextPadEntries = function(e) {
  var t = {};
  return this._isAllowed(e) && G(t, this._getEntries(e)), t;
};
Ja.prototype._isAllowed = function(e) {
  return !this._popupMenu.isEmpty(e, "align-elements");
};
Ja.prototype._getEntries = function() {
  var e = this;
  return {
    "align-elements": {
      group: "align-elements",
      title: e._translate("Align elements"),
      html: `<div class="entry">${Vb.align}</div>`,
      action: {
        click: function(t, n) {
          var i = e._getMenuPosition(n);
          G(i, {
            cursor: {
              x: t.x,
              y: t.y
            }
          }), e._popupMenu.open(n, "align-elements", i);
        }
      }
    }
  };
};
Ja.prototype._getMenuPosition = function(e) {
  var t = 5, n = this._contextPad.getPad(e).html, i = n.getBoundingClientRect(), r = {
    x: i.left,
    y: i.bottom + t
  };
  return r;
};
var jP = [
  "left",
  "center",
  "right",
  "top",
  "middle",
  "bottom"
];
function cc(e, t, n, i) {
  this._alignElements = t, this._translate = n, this._popupMenu = e, this._rules = i, e.registerProvider("align-elements", this);
}
cc.$inject = [
  "popupMenu",
  "alignElements",
  "translate",
  "rules"
];
cc.prototype.getPopupMenuEntries = function(e) {
  var t = {};
  return this._isAllowed(e) && G(t, this._getEntries(e)), t;
};
cc.prototype._isAllowed = function(e) {
  return this._rules.allowed("elements.align", { elements: e });
};
cc.prototype._getEntries = function(e) {
  var t = this._alignElements, n = this._translate, i = this._popupMenu, r = {};
  return z(jP, function(o) {
    r["align-elements-" + o] = {
      group: "align",
      title: n("Align elements " + o),
      className: "bjs-align-elements-menu-entry",
      imageHtml: Vb[o],
      action: function() {
        t.trigger(e, o), i.close();
      }
    };
  }), r;
};
function Di(e) {
  le.call(this, e), this.init();
}
Di.$inject = ["eventBus"];
Pe(Di, le);
Di.prototype.addRule = function(e, t, n) {
  var i = this;
  typeof e == "string" && (e = [e]), e.forEach(function(r) {
    i.canExecute(r, t, function(o, a, c) {
      return n(o);
    }, !0);
  });
};
Di.prototype.init = function() {
};
function Lu(e) {
  Di.call(this, e);
}
Lu.$inject = ["eventBus"];
Pe(Lu, Di);
Lu.prototype.init = function() {
  this.addRule("elements.align", function(e) {
    var t = e.elements, n = et(t, function(i) {
      return !(i.waypoints || i.host || i.labelTarget);
    });
    return n = vu(n), n.length < 2 ? !1 : n;
  });
};
const FP = {
  __depends__: [
    mP,
    Cb,
    Gd
  ],
  __init__: [
    "alignElementsContextPadProvider",
    "alignElementsMenuProvider",
    "bpmnAlignElements"
  ],
  alignElementsContextPadProvider: ["type", Ja],
  alignElementsMenuProvider: ["type", cc],
  bpmnAlignElements: ["type", Lu]
};
var HP = 10, Wb = 50, zP = 250;
function Ud(e, t, n, i) {
  for (var r; r = VP(e, n, t); )
    n = i(t, n, r);
  return n;
}
function Yd(e) {
  return function(t, n, i) {
    var r = {
      x: n.x,
      y: n.y
    };
    return ["x", "y"].forEach(function(o) {
      var a = e[o];
      if (a) {
        var c = o === "x" ? "width" : "height", l = a.margin, u = a.minDistance;
        l < 0 ? r[o] = Math.min(
          i[o] + l - t[c] / 2,
          n[o] - u + l
        ) : r[o] = Math.max(
          i[o] + i[c] + l + t[c] / 2,
          n[o] + u + l
        );
      }
    }), r;
  };
}
function VP(e, t, n) {
  var i = {
    x: t.x - n.width / 2,
    y: t.y - n.height / 2,
    width: n.width,
    height: n.height
  }, r = GP(e);
  return gt(r, function(o) {
    if (o === n)
      return !1;
    var a = Bn(o, i, HP);
    return a === "intersect";
  });
}
function WP(e, t) {
  t || (t = {});
  function n(_) {
    return _.source === e ? 1 : -1;
  }
  var i = t.defaultDistance || Wb, r = t.direction || "e", o = t.filter, a = t.getWeight || n, c = t.maxDistance || zP, l = t.reference || "start";
  o || (o = KP);
  function u(_, x) {
    return r === "n" ? l === "start" ? Le(_).top - Le(x).bottom : l === "center" ? Le(_).top - Fe(x).y : Le(_).top - Le(x).top : r === "w" ? l === "start" ? Le(_).left - Le(x).right : l === "center" ? Le(_).left - Fe(x).x : Le(_).left - Le(x).left : r === "s" ? l === "start" ? Le(x).top - Le(_).bottom : l === "center" ? Fe(x).y - Le(_).bottom : Le(x).bottom - Le(_).bottom : l === "start" ? Le(x).left - Le(_).right : l === "center" ? Fe(x).x - Le(_).right : Le(x).right - Le(_).right;
  }
  var d = e.incoming.filter(o).map(function(_) {
    var x = a(_), w = x < 0 ? u(_.source, e) : u(e, _.source);
    return {
      id: _.source.id,
      distance: w,
      weight: x
    };
  }), f = e.outgoing.filter(o).map(function(_) {
    var x = a(_), w = x > 0 ? u(e, _.target) : u(_.target, e);
    return {
      id: _.target.id,
      distance: w,
      weight: x
    };
  }), y = d.concat(f).reduce(function(_, x) {
    return _[x.id + "__weight_" + x.weight] = x, _;
  }, {}), g = li(y, function(_, x) {
    var w = x.distance, D = x.weight;
    return w < 0 || w > c || (_[String(w)] || (_[String(w)] = 0), _[String(w)] += 1 * D, (!_.distance || _[_.distance] < _[String(w)]) && (_.distance = w)), _;
  }, {});
  return g.distance || i;
}
function GP(e) {
  var t = tf(e);
  return e.host && (t = t.concat(tf(e.host))), e.attachers && (t = t.concat(e.attachers.reduce(function(n, i) {
    return n.concat(tf(i));
  }, []))), t;
}
function tf(e) {
  return YP(e).concat(UP(e));
}
function UP(e) {
  return e.incoming.map(function(t) {
    return t.source;
  });
}
function YP(e) {
  return e.outgoing.map(function(t) {
    return t.target;
  });
}
function KP() {
  return !0;
}
var qP = 100;
function Gb(e, t, n) {
  e.on("autoPlace", qP, function(i) {
    var r = i.shape, o = i.source;
    return XP(o, r);
  }), e.on("autoPlace.end", function(i) {
    n.scrollToElement(i.shape);
  }), this.append = function(i, r, o) {
    e.fire("autoPlace.start", {
      source: i,
      shape: r
    });
    var a = e.fire("autoPlace", {
      source: i,
      shape: r
    }), c = t.appendShape(i, r, a, i.parent, o);
    return e.fire("autoPlace.end", {
      source: i,
      shape: c
    }), c;
  };
}
Gb.$inject = [
  "eventBus",
  "modeling",
  "canvas"
];
function XP(e, t, n) {
  n || (n = {});
  var i = n.defaultDistance || Wb, r = Fe(e), o = Le(e);
  return {
    x: o.right + i + t.width / 2,
    y: r.y
  };
}
function Ub(e, t) {
  e.on("autoPlace.end", 500, function(n) {
    t.select(n.shape);
  });
}
Ub.$inject = [
  "eventBus",
  "selection"
];
const ZP = {
  __init__: ["autoPlaceSelectionBehavior"],
  autoPlace: ["type", Gb],
  autoPlaceSelectionBehavior: ["type", Ub]
};
function Ys(e, t) {
  for (ci(t) && (t = [t]); e = e.parent; )
    if (rt(e, t))
      return e;
  return null;
}
function Iu(e) {
  var t = ["bpmn:Participant", "bpmn:Lane"], n = Ys(e, t);
  return n ? An(n) : rt(e, t) ? An(e) : !0;
}
function Yb(e, t) {
  if (A(t, "bpmn:TextAnnotation"))
    return QP(e, t);
  if (rt(t, ["bpmn:DataObjectReference", "bpmn:DataStoreReference"]))
    return eT(e, t);
  if (A(t, "bpmn:FlowNode"))
    return JP(e, t);
}
function JP(e, t) {
  var n = Le(e), i = Fe(e), r = Iu(e), o = r ? {
    directionHint: "e",
    minDistance: 80,
    baseOrientation: "left",
    boundaryOrientation: "top",
    start: "top",
    end: "bottom"
  } : {
    directionHint: "s",
    minDistance: 90,
    baseOrientation: "top",
    boundaryOrientation: "left",
    start: "left",
    end: "right"
  }, a = WP(e, {
    filter: function(g) {
      return A(g, "bpmn:SequenceFlow");
    },
    direction: o.directionHint
  }), c = 30, l = o.minDistance, u = o.baseOrientation;
  A(e, "bpmn:BoundaryEvent") && (u = Bn(e, e.host, -25), u.indexOf(o.boundaryOrientation) !== -1 && (c *= -1));
  var d = r ? {
    x: n.right + a + t.width / 2,
    y: i.y + Ig(u, l, o)
  } : {
    x: i.x + Ig(u, l, o),
    y: n.bottom + a + t.height / 2
  }, f = {
    margin: c,
    minDistance: l
  }, y = r ? {
    y: f
  } : {
    x: f
  };
  return Ud(e, t, d, Yd(y));
}
function Ig(e, t, n) {
  return e.includes(n.start) ? -1 * t : e.includes(n.end) ? t : 0;
}
function QP(e, t) {
  var n = Le(e), i = Iu(e), r = i ? {
    x: n.right + t.width / 2,
    y: n.top - 50 - t.height / 2
  } : {
    x: n.right + 50 + t.width / 2,
    y: n.bottom + t.height / 2
  };
  kt(e) && (r = Fe(e), i ? (r.x += 100, r.y -= 50) : (r.x += 100, r.y += 50));
  var o = {
    margin: i ? -30 : 30,
    minDistance: 20
  }, a = i ? {
    y: o
  } : {
    x: o
  };
  return Ud(e, t, r, Yd(a));
}
function eT(e, t) {
  var n = Le(e), i = Iu(e), r = i ? {
    x: n.right - 10 + t.width / 2,
    y: n.bottom + 40 + t.width / 2
  } : {
    x: n.left - 40 - t.width / 2,
    y: n.bottom - 10 + t.height / 2
  }, o = {
    margin: 30,
    minDistance: 30
  }, a = i ? {
    x: o
  } : {
    y: o
  };
  return Ud(e, t, r, Yd(a));
}
function Kb(e) {
  e.on("autoPlace", function(t) {
    var n = t.shape, i = t.source;
    return Yb(i, n);
  });
}
Kb.$inject = ["eventBus"];
const Kd = {
  __depends__: [ZP],
  __init__: ["bpmnAutoPlace"],
  bpmnAutoPlace: ["type", Kb]
};
function Ir(e, t, n, i) {
  le.call(this, e), this._elementRegistry = t, this._modeling = n, this._rules = i;
  var r = this;
  this.postExecuted(["shape.create"], function(o) {
    var a = o.context, c = a.hints || {}, l = a.shape, u = a.parent || a.newParent;
    c.autoResize !== !1 && r._expand([l], u);
  }), this.postExecuted(["elements.move"], function(o) {
    var a = o.context, c = ql(hd(a.closure.topLevel)), l = a.hints, u = l ? l.autoResize : !0;
    if (u !== !1) {
      var d = Ga(c, function(f) {
        return f.parent.id;
      });
      z(d, function(f, y) {
        nt(u) && (f = f.filter(function(g) {
          return gt(u, zi({ id: g.id }));
        })), r._expand(f, y);
      });
    }
  }), this.postExecuted(["shape.toggleCollapse"], function(o) {
    var a = o.context, c = a.hints, l = a.shape;
    c && c.autoResize === !1 || l.collapsed || r._expand(l.children || [], l);
  }), this.postExecuted(["shape.resize"], function(o) {
    var a = o.context, c = a.hints, l = a.shape, u = l.parent;
    c && c.autoResize === !1 || u && r._expand([l], u);
  });
}
Ir.$inject = [
  "eventBus",
  "elementRegistry",
  "modeling",
  "rules"
];
Pe(Ir, le);
Ir.prototype._getOptimalBounds = function(e, t) {
  var n = this.getOffset(t), i = this.getPadding(t), r = Le(nn(e)), o = Le(t), a = {};
  return r.top - o.top < i.top && (a.top = r.top - n.top), r.left - o.left < i.left && (a.left = r.left - n.left), o.right - r.right < i.right && (a.right = r.right + n.right), o.bottom - r.bottom < i.bottom && (a.bottom = r.bottom + n.bottom), _u(G({}, o, a));
};
Ir.prototype._expand = function(e, t) {
  typeof t == "string" && (t = this._elementRegistry.get(t));
  var n = this._rules.allowed("element.autoResize", {
    elements: e,
    target: t
  });
  if (n) {
    var i = this._getOptimalBounds(e, t);
    if (tT(i, t)) {
      var r = nT(Ui(t, ["x", "y", "width", "height"]), i);
      this.resize(t, i, {
        autoResize: r
      });
      var o = t.parent;
      o && this._expand([t], o);
    }
  }
};
Ir.prototype.getOffset = function(e) {
  return { top: 60, bottom: 60, left: 100, right: 100 };
};
Ir.prototype.getPadding = function(e) {
  return { top: 2, bottom: 2, left: 15, right: 15 };
};
Ir.prototype.resize = function(e, t, n) {
  this._modeling.resizeShape(e, t, null, n);
};
function tT(e, t) {
  return e.x !== t.x || e.y !== t.y || e.width !== t.width || e.height !== t.height;
}
function nT(e, t) {
  var n = "";
  return e = Le(e), t = Le(t), e.top > t.top && (n = n.concat("n")), e.right < t.right && (n = n.concat("w")), e.bottom < t.bottom && (n = n.concat("s")), e.left > t.left && (n = n.concat("e")), n;
}
function $u(e) {
  e.invoke(Ir, this);
}
$u.$inject = [
  "injector"
];
Pe($u, Ir);
$u.prototype.resize = function(e, t, n) {
  A(e, "bpmn:Participant") ? this._modeling.resizeLane(e, t, null, n) : this._modeling.resizeShape(e, t, null, n);
};
function lc(e) {
  Di.call(this, e);
  var t = this;
  this.addRule("element.autoResize", function(n) {
    return t.canResize(n.elements, n.target);
  });
}
lc.$inject = ["eventBus"];
Pe(lc, Di);
lc.prototype.canResize = function(e, t) {
  return !1;
};
function ju(e, t) {
  lc.call(this, e), this._modeling = t;
}
Pe(ju, lc);
ju.$inject = [
  "eventBus",
  "modeling"
];
ju.prototype.canResize = function(e, t) {
  if (A(t.di, "bpmndi:BPMNPlane") || !A(t, "bpmn:Participant") && !A(t, "bpmn:Lane") && !A(t, "bpmn:SubProcess"))
    return !1;
  var n = !0;
  return z(e, function(i) {
    if (A(i, "bpmn:Lane") || vt(i)) {
      n = !1;
      return;
    }
  }), n;
};
const iT = {
  __init__: [
    "bpmnAutoResize",
    "bpmnAutoResizeProvider"
  ],
  bpmnAutoResize: ["type", $u],
  bpmnAutoResizeProvider: ["type", ju]
};
var $g = 1500;
function qb(e, t, n) {
  var i = this, r = n.get("dragging", !1);
  function o(a) {
    if (!a.hover) {
      var c = a.originalEvent, l = i._findTargetGfx(c), u = l && e.get(l);
      l && u && (a.stopPropagation(), r.hover({ element: u, gfx: l }), r.move(c));
    }
  }
  r && t.on("drag.start", function(a) {
    t.once("drag.move", $g, function(c) {
      o(c);
    });
  }), function() {
    var a, c;
    t.on("element.hover", function(l) {
      a = l.gfx, c = l.element;
    }), t.on("element.hover", $g, function(l) {
      c && t.fire("element.out", {
        element: c,
        gfx: a
      });
    }), t.on("element.out", function() {
      a = null, c = null;
    });
  }(), this._findTargetGfx = function(a) {
    var c, l;
    if (a instanceof MouseEvent)
      return c = Jo(a), l = document.elementFromPoint(c.x, c.y), rT(l);
  };
}
qb.$inject = [
  "elementRegistry",
  "eventBus",
  "injector"
];
function rT(e) {
  return lo(e, "svg, .djs-element", !0);
}
const oT = {
  __init__: [
    "hoverFix"
  ],
  hoverFix: ["type", qb]
};
var Ca = Math.round, jg = "djs-drag-active";
function Fo(e) {
  e.preventDefault();
}
function aT(e) {
  return typeof TouchEvent < "u" && e instanceof TouchEvent;
}
function sT(e) {
  return Math.sqrt(Math.pow(e.x, 2) + Math.pow(e.y, 2));
}
function Xb(e, t, n, i) {
  var r = {
    threshold: 5,
    trapClick: !0
  }, o;
  function a(k) {
    var P = t.viewbox(), N = t._container.getBoundingClientRect();
    return {
      x: P.x + (k.x - N.left) / P.scale,
      y: P.y + (k.y - N.top) / P.scale
    };
  }
  function c(k, P) {
    P = P || o;
    var N = e.createEvent(
      G(
        {},
        P.payload,
        P.data,
        { isTouch: P.isTouch }
      )
    );
    return e.fire("drag." + k, N) === !1 ? !1 : e.fire(P.prefix + "." + k, N);
  }
  function l(k) {
    var P = k.filter(function(N) {
      return i.get(N.id);
    });
    P.length && n.select(P);
  }
  function u(k, P) {
    var N = o.payload, j = o.displacement, W = o.globalStart, $ = Jo(k), Z = Vi($, W), X = o.localStart, V = a($), ae = Vi(V, X);
    if (!o.active && (P || sT(Z) > o.threshold)) {
      if (G(N, {
        x: Ca(X.x + j.x),
        y: Ca(X.y + j.y),
        dx: 0,
        dy: 0
      }, { originalEvent: k }), c("start") === !1)
        return w();
      o.active = !0, o.keepSelection || (N.previousSelection = n.get(), n.select(null)), o.cursor && Du(o.cursor), t.addMarker(t.getRootElement(), jg);
    }
    Zp(k), o.active && (G(N, {
      x: Ca(V.x + j.x),
      y: Ca(V.y + j.y),
      dx: Ca(ae.x),
      dy: Ca(ae.y)
    }, { originalEvent: k }), c("move"));
  }
  function d(k) {
    var P, N = !0;
    o.active && (k && (o.payload.originalEvent = k, Zp(k)), N = c("end")), N === !1 && c("rejected"), P = D(N !== !0), c("ended", P);
  }
  function f(k) {
    fn("Escape", k) && (Fo(k), w());
  }
  function y(k) {
    var P;
    o.active && (P = _b(e), setTimeout(P, 400), Fo(k)), d(k);
  }
  function g(k) {
    u(k);
  }
  function _(k) {
    var P = o.payload;
    P.hoverGfx = k.gfx, P.hover = k.element, c("hover");
  }
  function x(k) {
    c("out");
    var P = o.payload;
    P.hoverGfx = null, P.hover = null;
  }
  function w(k) {
    var P;
    if (o) {
      var N = o.active;
      N && c("cancel"), P = D(k), N && c("canceled", P);
    }
  }
  function D(k) {
    var P, N;
    c("cleanup"), vb(), o.trapClick ? N = y : N = d, Ye.unbind(document, "mousemove", u), Ye.unbind(document, "dragstart", Fo), Ye.unbind(document, "selectstart", Fo), Ye.unbind(document, "mousedown", N, !0), Ye.unbind(document, "mouseup", N, !0), Ye.unbind(document, "keyup", f), Ye.unbind(document, "touchstart", g, !0), Ye.unbind(document, "touchcancel", w, !0), Ye.unbind(document, "touchmove", u, !0), Ye.unbind(document, "touchend", d, !0), e.off("element.hover", _), e.off("element.out", x), t.removeMarker(t.getRootElement(), jg);
    var j = o.payload.previousSelection;
    return k !== !1 && j && !n.get().length && l(j), P = o, o = null, P;
  }
  function O(k, P, N, j) {
    o && w(!1), typeof P == "string" && (j = N, N = P, P = null), j = G({}, r, j || {});
    var W = j.data || {}, $, Z, X, V, ae;
    j.trapClick ? V = y : V = d, k ? ($ = Ka(k) || k, Z = Jo(k), Zp(k), $.type === "dragstart" && Fo($)) : ($ = null, Z = { x: 0, y: 0 }), X = a(Z), P || (P = X), ae = aT($), o = G({
      prefix: N,
      data: W,
      payload: {},
      globalStart: Z,
      displacement: Vi(P, X),
      localStart: X,
      isTouch: ae
    }, j), j.manual || (ae ? (Ye.bind(document, "touchstart", g, !0), Ye.bind(document, "touchcancel", w, !0), Ye.bind(document, "touchmove", u, !0), Ye.bind(document, "touchend", d, !0)) : (Ye.bind(document, "mousemove", u), Ye.bind(document, "dragstart", Fo), Ye.bind(document, "selectstart", Fo), Ye.bind(document, "mousedown", V, !0), Ye.bind(document, "mouseup", V, !0)), Ye.bind(document, "keyup", f), e.on("element.hover", _), e.on("element.out", x)), c("init"), j.autoActivate && u(k, !0);
  }
  e.on("diagram.destroy", w), this.init = O, this.move = u, this.hover = _, this.out = x, this.end = d, this.cancel = w, this.context = function() {
    return o;
  }, this.setOptions = function(k) {
    G(r, k);
  };
}
Xb.$inject = [
  "eventBus",
  "canvas",
  "selection",
  "elementRegistry"
];
const $r = {
  __depends__: [
    oT,
    fr
  ],
  dragging: ["type", Xb]
};
function Qa(e, t, n) {
  this._canvas = n, this._opts = G({
    scrollThresholdIn: [20, 20, 20, 20],
    scrollThresholdOut: [0, 0, 0, 0],
    scrollRepeatTimeout: 15,
    scrollStep: 10
  }, e);
  var i = this;
  t.on("drag.move", function(r) {
    var o = i._toBorderPoint(r);
    i.startScroll(o);
  }), t.on(["drag.cleanup"], function() {
    i.stopScroll();
  });
}
Qa.$inject = [
  "config.autoScroll",
  "eventBus",
  "canvas"
];
Qa.prototype.startScroll = function(e) {
  var t = this._canvas, n = this._opts, i = this, r = t.getContainer().getBoundingClientRect(), o = [
    e.x,
    e.y,
    r.width - e.x,
    r.height - e.y
  ];
  this.stopScroll();
  for (var a = 0, c = 0, l = 0; l < 4; l++)
    cT(o[l], n.scrollThresholdOut[l], n.scrollThresholdIn[l]) && (l === 0 ? a = n.scrollStep : l == 1 ? c = n.scrollStep : l == 2 ? a = -n.scrollStep : l == 3 && (c = -n.scrollStep));
  (a !== 0 || c !== 0) && (t.scroll({ dx: a, dy: c }), this._scrolling = setTimeout(function() {
    i.startScroll(e);
  }, n.scrollRepeatTimeout));
};
function cT(e, t, n) {
  return t < e && e < n;
}
Qa.prototype.stopScroll = function() {
  clearTimeout(this._scrolling);
};
Qa.prototype.setOptions = function(e) {
  this._opts = G({}, this._opts, e);
};
Qa.prototype._toBorderPoint = function(e) {
  var t = this._canvas._container.getBoundingClientRect(), n = Jo(e.originalEvent);
  return {
    x: n.x - t.left,
    y: n.y - t.top
  };
};
const lT = {
  __depends__: [
    $r
  ],
  __init__: ["autoScroll"],
  autoScroll: ["type", Qa]
};
function qd(e) {
  this._commandStack = e.get("commandStack", !1);
}
qd.$inject = ["injector"];
qd.prototype.allowed = function(e, t) {
  var n = !0, i = this._commandStack;
  return i && (n = i.canExecute(e, t)), n === void 0 ? !0 : n;
};
const hr = {
  __init__: ["rules"],
  rules: ["type", qd]
};
var dl = Math.round, uT = Math.max;
function pT(e, t) {
  var n = e.x, i = e.y;
  return [
    ["M", n, i],
    ["m", 0, -t],
    ["a", t, t, 0, 1, 1, 0, 2 * t],
    ["a", t, t, 0, 1, 1, 0, -2 * t],
    ["z"]
  ];
}
function fT(e) {
  var t = [];
  return e.forEach(function(n, i) {
    t.push([i === 0 ? "M" : "L", n.x, n.y]);
  }), t;
}
var Zb = 10;
function dT(e, t) {
  var n, i;
  for (n = 0; i = e[n]; n++)
    if (tc(i, t) <= Zb)
      return {
        point: e[n],
        bendpoint: !0,
        index: n
      };
  return null;
}
function hT(e, t) {
  var n = b_(pT(t, Zb), fT(e)), i = n[0], r = n[n.length - 1], o;
  return i ? i !== r ? i.segment2 !== r.segment2 ? (o = uT(i.segment2, r.segment2) - 1, {
    point: e[o],
    bendpoint: !0,
    index: o
  }) : {
    point: {
      x: dl(i.x + r.x) / 2,
      y: dl(i.y + r.y) / 2
    },
    index: i.segment2
  } : {
    point: {
      x: dl(i.x),
      y: dl(i.y)
    },
    index: i.segment2
  } : null;
}
function Uf(e, t) {
  return dT(e, t) || hT(e, t);
}
function Jb(e) {
  return Math.sqrt(Math.pow(e.x, 2) + Math.pow(e.y, 2));
}
function Fg(e) {
  return Math.atan((e[1].y - e[0].y) / (e[1].x - e[0].x));
}
function mT(e, t) {
  return t ? {
    x: Math.cos(t) * e.x - Math.sin(t) * e.y,
    y: Math.sin(t) * e.x + Math.cos(t) * e.y
  } : e;
}
function yT(e, t, n) {
  var i = [
    { n: e[0] - n[0], lambda: t[0] },
    { n: e[1] - n[1], lambda: t[1] }
  ], r = i[0].n * t[0] + i[1].n * t[1], o = i[0].lambda * t[0] + i[1].lambda * t[1];
  return -r / o;
}
function Xd(e, t) {
  var n = t[0], i = t[1], r = { x: i.x - n.x, y: i.y - n.y }, o = yT([n.x, n.y], [r.x, r.y], [e.x, e.y]);
  return { x: n.x + o * r.x, y: n.y + o * r.y };
}
function Qb(e, t) {
  var n = Xd(e, t), i = {
    x: n.x - e.x,
    y: n.y - e.y
  };
  return Jb(i);
}
function au(e, t) {
  return Jb({
    x: e.x - t.x,
    y: e.y - t.y
  });
}
var ex = "djs-bendpoint", tx = "djs-segment-dragger";
function gT(e, t) {
  var n = Jo(t), i = e._container.getBoundingClientRect(), r;
  r = {
    x: i.left,
    y: i.top
  };
  var o = e.viewbox();
  return {
    x: o.x + (n.x - r.x) / o.scale,
    y: o.y + (n.y - r.y) / o.scale
  };
}
function Yf(e, t, n) {
  var i = gT(e, n), r = Uf(t, i);
  return r;
}
function Kf(e, t) {
  var n = Me("g");
  dt(n).add(ex), ze(e, n);
  var i = Me("circle");
  we(i, {
    cx: 0,
    cy: 0,
    r: 4
  }), dt(i).add("djs-visual"), ze(n, i);
  var r = Me("circle");
  return we(r, {
    cx: 0,
    cy: 0,
    r: 10
  }), dt(r).add("djs-hit"), ze(n, r), t && dt(n).add(t), n;
}
function vT(e, t, n, i) {
  var r = Me("g");
  ze(e, r);
  var o = 18, a = 6, c = 11, l = bT(t, n, i), u = a + c, d = Me("rect");
  we(d, {
    x: -o / 2,
    y: -a / 2,
    width: o,
    height: a
  }), dt(d).add("djs-visual"), ze(r, d);
  var f = Me("rect");
  return we(f, {
    x: -l / 2,
    y: -u / 2,
    width: l,
    height: u
  }), dt(f).add("djs-hit"), ze(r, f), N_(r, i === "v" ? 90 : 0), r;
}
function nx(e, t, n) {
  var i = Me("g"), r = kf(t, n), o = Pr(t, n);
  return ze(e, i), vT(i, t, n, o), dt(i).add(tx), dt(i).add(o === "h" ? "horizontal" : "vertical"), Cn(i, r.x, r.y), i;
}
function qf(e) {
  return Math.abs(Math.round(e * 2 / 3));
}
function _T(e, t) {
  var n = xT(e, t);
  return Xd(e, n);
}
function bT(e, t, n) {
  var i = t.x - e.x, r = t.y - e.y;
  return qf(n === "h" ? i : r);
}
function xT(e, t) {
  for (var n = t.waypoints, i = 1 / 0, r, o = 0; o < n.length - 1; o++) {
    var a = n[o], c = n[o + 1], l = Qb(e, [a, c]);
    l < i && (i = l, r = o);
  }
  return [n[r], n[r + 1]];
}
function ix(e, t, n, i, r) {
  function o(k, P, N) {
    var j = k.index, W = k.point, $, Z, X, V, ae, ie;
    return j <= 0 || k.bendpoint ? !1 : ($ = P[j - 1], Z = P[j], X = kf($, Z), V = Pr($, Z), ae = Math.abs(W.x - X.x), ie = Math.abs(W.y - X.y), V && ae <= N && ie <= N);
  }
  function a(k, P) {
    var N = k.waypoints, j, W, $, Z;
    return P.index <= 0 || P.bendpoint || (j = {
      start: N[P.index - 1],
      end: N[P.index]
    }, W = Pr(j.start, j.end), !W) ? null : (W === "h" ? $ = j.end.x - j.start.x : $ = j.end.y - j.start.y, Z = qf($) / 2, Z);
  }
  function c(k, P) {
    var N = P.waypoints, j = Yf(t, N, k), W;
    if (j)
      return W = a(P, j), o(j, N, W) ? r.start(k, P, j.index) : i.start(k, P, j.index, !j.bendpoint), !0;
  }
  function l(k, P, N) {
    Ye.bind(k, P, function(j) {
      n.triggerMouseEvent(P, j, N), j.stopPropagation();
    });
  }
  function u(k, P) {
    var N = t.getLayer("overlays"), j = Tt('.djs-bendpoints[data-element-id="' + Hs(k.id) + '"]', N);
    return !j && P && (j = Me("g"), we(j, { "data-element-id": k.id }), dt(j).add("djs-bendpoints"), ze(N, j), l(j, "mousedown", k), l(j, "click", k), l(j, "dblclick", k)), j;
  }
  function d(k, P) {
    return Tt(
      '.djs-segment-dragger[data-segment-idx="' + k + '"]',
      P
    );
  }
  function f(k, P) {
    P.waypoints.forEach(function(N, j) {
      var W = Kf(k);
      ze(k, W), Cn(W, N.x, N.y);
    }), Kf(k, "floating");
  }
  function y(k, P) {
    for (var N = P.waypoints, j, W, $, Z = 1; Z < N.length; Z++)
      j = N[Z - 1], W = N[Z], Pr(j, W) && ($ = nx(k, j, W), we($, { "data-segment-idx": Z }), l($, "mousemove", P));
  }
  function g(k) {
    z(Af("." + ex, k), function(P) {
      qt(P);
    });
  }
  function _(k) {
    z(Af("." + tx, k), function(P) {
      qt(P);
    });
  }
  function x(k) {
    var P = u(k);
    return P || (P = u(k, !0), f(P, k), y(P, k)), P;
  }
  function w(k) {
    var P = u(k);
    P && (_(P), g(P), y(P, k), f(P, k));
  }
  function D(k, P) {
    var N = Tt(".floating", k), j = P.point;
    N && Cn(N, j.x, j.y);
  }
  function O(k, P, N) {
    var j = d(P.index, k), W = N[P.index - 1], $ = N[P.index], Z = P.point, X = kf(W, $), V = Pr(W, $), ae, ie;
    j && (ae = ET(j), ie = {
      x: Z.x - X.x,
      y: Z.y - X.y
    }, V === "v" && (ie = {
      x: ie.y,
      y: ie.x
    }), Cn(ae, ie.x, ie.y));
  }
  e.on("connection.changed", function(k) {
    w(k.element);
  }), e.on("connection.remove", function(k) {
    var P = u(k.element);
    P && qt(P);
  }), e.on("element.marker.update", function(k) {
    var P = k.element, N;
    P.waypoints && (N = x(P), k.add ? dt(N).add(k.marker) : dt(N).remove(k.marker));
  }), e.on("element.mousemove", function(k) {
    var P = k.element, N = P.waypoints, j, W;
    if (N) {
      if (j = u(P, !0), W = Yf(t, N, k.originalEvent), !W)
        return;
      D(j, W), W.bendpoint || O(j, W, N);
    }
  }), e.on("element.mousedown", function(k) {
    if (mo(k)) {
      var P = k.originalEvent, N = k.element;
      if (N.waypoints)
        return c(P, N);
    }
  }), e.on("selection.changed", function(k) {
    var P = k.newSelection, N = P[0];
    N && N.waypoints && x(N);
  }), e.on("element.hover", function(k) {
    var P = k.element;
    P.waypoints && (x(P), n.registerEvent(k.gfx, "mousemove", "element.mousemove"));
  }), e.on("element.out", function(k) {
    n.unregisterEvent(k.gfx, "mousemove", "element.mousemove");
  }), e.on("element.updateId", function(k) {
    var P = k.element, N = k.newId;
    if (P.waypoints) {
      var j = u(P);
      j && we(j, { "data-element-id": N });
    }
  }), this.addHandles = x, this.updateHandles = w, this.getBendpointsContainer = u, this.getSegmentDragger = d;
}
ix.$inject = [
  "eventBus",
  "canvas",
  "interactionEvents",
  "bendpointMove",
  "connectionSegmentMove"
];
function ET(e) {
  return Tt(".djs-visual", e);
}
var Hg = Math.round, Ho = "reconnectStart", zo = "reconnectEnd", Es = "updateWaypoints";
function Zd(e, t, n, i, r, o) {
  this._injector = e, this.start = function(a, c, l, u) {
    var d = n.getGraphics(c), f = c.source, y = c.target, g = c.waypoints, _;
    !u && l === 0 ? _ = Ho : !u && l === g.length - 1 ? _ = zo : _ = Es;
    var x = _ === Es ? "connection.updateWaypoints" : "connection.reconnect", w = r.allowed(x, {
      connection: c,
      source: f,
      target: y
    });
    w === !1 && (w = r.allowed(x, {
      connection: c,
      source: y,
      target: f
    })), w !== !1 && i.init(a, "bendpoint.move", {
      data: {
        connection: c,
        connectionGfx: d,
        context: {
          allowed: w,
          bendpointIndex: l,
          connection: c,
          source: f,
          target: y,
          insert: u,
          type: _
        }
      }
    });
  }, t.on("bendpoint.move.hover", function(a) {
    var c = a.context, l = c.connection, u = l.source, d = l.target, f = a.hover, y = c.type;
    c.hover = f;
    var g;
    if (f) {
      var _ = y === Es ? "connection.updateWaypoints" : "connection.reconnect";
      if (g = c.allowed = r.allowed(_, {
        connection: l,
        source: y === Ho ? f : u,
        target: y === zo ? f : d
      }), g) {
        c.source = y === Ho ? f : u, c.target = y === zo ? f : d;
        return;
      }
      g === !1 && (g = c.allowed = r.allowed(_, {
        connection: l,
        source: y === zo ? f : d,
        target: y === Ho ? f : u
      })), g && (c.source = y === zo ? f : d, c.target = y === Ho ? f : u);
    }
  }), t.on(["bendpoint.move.out", "bendpoint.move.cleanup"], function(a) {
    var c = a.context, l = c.type;
    c.hover = null, c.source = null, c.target = null, l !== Es && (c.allowed = !1);
  }), t.on("bendpoint.move.end", function(a) {
    var c = a.context, l = c.allowed, u = c.bendpointIndex, d = c.connection, f = c.insert, y = d.waypoints.slice(), g = c.source, _ = c.target, x = c.type, w = c.hints || {}, D = {
      x: Hg(a.x),
      y: Hg(a.y)
    };
    if (!l)
      return !1;
    x === Es ? (f ? y.splice(u, 0, D) : y[u] = D, w.bendpointMove = {
      insert: f,
      bendpointIndex: u
    }, y = this.cropWaypoints(d, y), o.updateWaypoints(d, vR(y), w)) : (x === Ho ? (w.docking = "source", su(c) && (w.docking = "target", w.newWaypoints = y.reverse())) : x === zo && (w.docking = "target", su(c) && (w.docking = "source", w.newWaypoints = y.reverse())), o.reconnect(d, g, _, D, w));
  }, this);
}
Zd.$inject = [
  "injector",
  "eventBus",
  "canvas",
  "dragging",
  "rules",
  "modeling"
];
Zd.prototype.cropWaypoints = function(e, t) {
  var n = this._injector.get("connectionDocking", !1);
  if (!n)
    return t;
  var i = e.waypoints;
  return e.waypoints = t, e.waypoints = n.getCroppedWaypoints(e), t = e.waypoints, e.waypoints = i, t;
};
function su(e) {
  var t = e.hover, n = e.source, i = e.target, r = e.type;
  if (r === Ho)
    return t && i && t === i && n !== i;
  if (r === zo)
    return t && n && t === n && n !== i;
}
var wT = "reconnectStart", ST = "reconnectEnd", zg = "updateWaypoints", ws = "connect-ok", hl = "connect-not-ok", Vg = "connect-hover", Wg = "djs-updating", Gg = "djs-dragging", Ug = 1100;
function rx(e, t, n, i) {
  this._injector = t;
  var r = t.get("connectionPreview", !1);
  n.on("bendpoint.move.start", function(o) {
    var a = o.context, c = a.bendpointIndex, l = a.connection, u = a.insert, d = l.waypoints, f = d.slice();
    a.waypoints = d, u && f.splice(c, 0, { x: o.x, y: o.y }), l.waypoints = f;
    var y = a.draggerGfx = Kf(i.getLayer("overlays"));
    dt(y).add("djs-dragging"), i.addMarker(l, Gg), i.addMarker(l, Wg);
  }), n.on("bendpoint.move.hover", function(o) {
    var a = o.context, c = a.allowed, l = a.hover, u = a.type;
    if (l) {
      if (i.addMarker(l, Vg), u === zg)
        return;
      c ? (i.removeMarker(l, hl), i.addMarker(l, ws)) : c === !1 && (i.removeMarker(l, ws), i.addMarker(l, hl));
    }
  }), n.on([
    "bendpoint.move.out",
    "bendpoint.move.cleanup"
  ], Ug, function(o) {
    var a = o.context, c = a.hover, l = a.target;
    c && (i.removeMarker(c, Vg), i.removeMarker(c, l ? ws : hl));
  }), n.on("bendpoint.move.move", function(o) {
    var a = o.context, c = a.allowed, l = a.bendpointIndex, u = a.draggerGfx, d = a.hover, f = a.type, y = a.connection, g = y.source, _ = y.target, x = y.waypoints.slice(), w = { x: o.x, y: o.y }, D = a.hints || {}, O = {};
    r && (D.connectionStart && (O.connectionStart = D.connectionStart), D.connectionEnd && (O.connectionEnd = D.connectionEnd), f === wT ? su(a) ? (O.connectionEnd = O.connectionEnd || w, O.source = _, O.target = d || g, x = x.reverse()) : (O.connectionStart = O.connectionStart || w, O.source = d || g, O.target = _) : f === ST ? su(a) ? (O.connectionStart = O.connectionStart || w, O.source = d || _, O.target = g, x = x.reverse()) : (O.connectionEnd = O.connectionEnd || w, O.source = g, O.target = d || _) : (O.noCropping = !0, O.noLayout = !0, x[l] = w), f === zg && (x = e.cropWaypoints(y, x)), O.waypoints = x, r.drawPreview(a, c, O)), Cn(u, o.x, o.y);
  }, this), n.on([
    "bendpoint.move.end",
    "bendpoint.move.cancel"
  ], Ug, function(o) {
    var a = o.context, c = a.connection, l = a.draggerGfx, u = a.hover, d = a.target, f = a.waypoints;
    c.waypoints = f, qt(l), i.removeMarker(c, Wg), i.removeMarker(c, Gg), u && (i.removeMarker(u, ws), i.removeMarker(u, d ? ws : hl)), r && r.cleanUp(a);
  });
}
rx.$inject = [
  "bendpointMove",
  "injector",
  "eventBus",
  "canvas"
];
var Yg = "connect-hover", Kg = "djs-updating";
function qg(e, t, n) {
  return Jd(e, t, e[t] + n);
}
function Jd(e, t, n) {
  return {
    x: t === "x" ? n : e.x,
    y: t === "y" ? n : e.y
  };
}
function RT(e, t, n, i) {
  var r = Math.max(t[i], n[i]), o = Math.min(t[i], n[i]), a = 20, c = Math.min(Math.max(o + a, e[i]), r - a);
  return Jd(t, i, c);
}
function ox(e) {
  return e === "x" ? "y" : "x";
}
function Xg(e, t, n) {
  var i, r;
  return e.original ? e.original : (i = Fe(t), r = ox(n), Jd(e, r, i[r]));
}
function ax(e, t, n, i, r, o) {
  var a = e.get("connectionDocking", !1);
  this.start = function(f, y, g) {
    var _, x = n.getGraphics(y), w = g - 1, D = g, O = y.waypoints, k = O[w], P = O[D], N = Yf(n, O, f), j, W, $;
    j = Pr(k, P), j && (W = j === "v" ? "x" : "y", w === 0 && (k = Xg(k, y.source, W)), D === O.length - 1 && (P = Xg(P, y.target, W)), N ? $ = N.point : $ = {
      x: (k.x + P.x) / 2,
      y: (k.y + P.y) / 2
    }, _ = {
      connection: y,
      segmentStartIndex: w,
      segmentEndIndex: D,
      segmentStart: k,
      segmentEnd: P,
      axis: W,
      dragPosition: $
    }, i.init(f, $, "connectionSegment.move", {
      cursor: W === "x" ? "resize-ew" : "resize-ns",
      data: {
        connection: y,
        connectionGfx: x,
        context: _
      }
    }));
  };
  function c(f, y) {
    if (!a)
      return y;
    var g = f.waypoints, _;
    return f.waypoints = y, _ = a.getCroppedWaypoints(f), f.waypoints = g, _;
  }
  function l(f) {
    r.update("connection", f.connection, f.connectionGfx);
  }
  function u(f, y, g) {
    var _ = f.newWaypoints, x = f.segmentStartIndex + y, w = _[x], D = f.segmentEndIndex + y, O = _[D], k = ox(f.axis), P = RT(g, w, O, k);
    Cn(f.draggerGfx, P.x, P.y);
  }
  function d(f, y) {
    var g = 0, _ = f.filter(function(x, w) {
      return bd(f[w - 1], f[w + 1], x) ? (g = w <= y ? g - 1 : g, !1) : !0;
    });
    return {
      waypoints: _,
      segmentOffset: g
    };
  }
  t.on("connectionSegment.move.start", function(f) {
    var y = f.context, g = f.connection, _ = n.getLayer("overlays");
    y.originalWaypoints = g.waypoints.slice(), y.draggerGfx = nx(_, y.segmentStart, y.segmentEnd), dt(y.draggerGfx).add("djs-dragging"), n.addMarker(g, Kg);
  }), t.on("connectionSegment.move.move", function(f) {
    var y = f.context, g = y.connection, _ = y.segmentStartIndex, x = y.segmentEndIndex, w = y.segmentStart, D = y.segmentEnd, O = y.axis, k = y.originalWaypoints.slice(), P = qg(w, O, f["d" + O]), N = qg(D, O, f["d" + O]), j = k.length, W = 0;
    k[_] = P, k[x] = N;
    var $, Z;
    _ < 2 && ($ = Bn(g.source, P), _ === 1 ? $ === "intersect" && (k.shift(), k[0] = P, W--) : $ !== "intersect" && (k.unshift(w), W++)), x > j - 3 && (Z = Bn(g.target, N), x === j - 2 ? Z === "intersect" && (k.pop(), k[k.length - 1] = N) : Z !== "intersect" && k.push(D)), y.newWaypoints = g.waypoints = c(g, k), u(y, W, f), y.newSegmentStartIndex = _ + W, l(f);
  }), t.on("connectionSegment.move.hover", function(f) {
    f.context.hover = f.hover, n.addMarker(f.hover, Yg);
  }), t.on([
    "connectionSegment.move.out",
    "connectionSegment.move.cleanup"
  ], function(f) {
    var y = f.context.hover;
    y && n.removeMarker(y, Yg);
  }), t.on("connectionSegment.move.cleanup", function(f) {
    var y = f.context, g = y.connection;
    y.draggerGfx && qt(y.draggerGfx), n.removeMarker(g, Kg);
  }), t.on([
    "connectionSegment.move.cancel",
    "connectionSegment.move.end"
  ], function(f) {
    var y = f.context, g = y.connection;
    g.waypoints = y.originalWaypoints, l(f);
  }), t.on("connectionSegment.move.end", function(f) {
    var y = f.context, g = y.connection, _ = y.newWaypoints, x = y.newSegmentStartIndex;
    _ = _.map(function(N) {
      return {
        original: N.original,
        x: Math.round(N.x),
        y: Math.round(N.y)
      };
    });
    var w = d(_, x), D = w.waypoints, O = c(g, D), k = w.segmentOffset, P = {
      segmentMove: {
        segmentStartIndex: y.segmentStartIndex,
        newSegmentStartIndex: x + k
      }
    };
    o.updateWaypoints(g, O, P);
  });
}
ax.$inject = [
  "injector",
  "eventBus",
  "canvas",
  "dragging",
  "graphicsFactory",
  "modeling"
];
var CT = Math.abs, Zg = Math.round;
function AT(e, t, n) {
  n = n === void 0 ? 10 : n;
  var i, r;
  for (i = 0; i < t.length; i++)
    if (r = t[i], CT(r - e) <= n)
      return r;
}
function sx(e) {
  return {
    x: e.x,
    y: e.y
  };
}
function cx(e) {
  return {
    x: e.x + e.width,
    y: e.y + e.height
  };
}
function Pi(e, t) {
  return !e || isNaN(e.x) || isNaN(e.y) ? t : {
    x: Zg(e.x + e.width / 2),
    y: Zg(e.y + e.height / 2)
  };
}
function Fa(e, t) {
  var n = e.snapped;
  return n ? typeof t == "string" ? n[t] : n.x && n.y : !1;
}
function tn(e, t, n) {
  if (typeof t != "string")
    throw new Error("axis must be in [x, y]");
  if (typeof n != "number" && n !== !1)
    throw new Error("value must be Number or false");
  var i, r = e[t], o = e.snapped = e.snapped || {};
  return n === !1 ? o[t] = !1 : (o[t] = !0, i = n - r, e[t] += i, e["d" + t] += i), r;
}
function lx(e) {
  return e.children || [];
}
var PT = Math.abs, Jg = Math.round, nf = 10;
function ux(e) {
  function t(o, a) {
    if (nt(o)) {
      for (var c = o.length; c--; )
        if (PT(o[c] - a) <= nf)
          return o[c];
    } else {
      o = +o;
      var l = a % o;
      if (l < nf)
        return a - l;
      if (l > o - nf)
        return a - l + o;
    }
    return a;
  }
  function n(o, a) {
    if (o.waypoints)
      return _T(a, o);
    if (o.width)
      return {
        x: Jg(o.width / 2 + o.x),
        y: Jg(o.height / 2 + o.y)
      };
  }
  function i(o) {
    var a = o.context, c = a.snapPoints, l = a.connection, u = l.waypoints, d = a.segmentStart, f = a.segmentStartIndex, y = a.segmentEnd, g = a.segmentEndIndex, _ = a.axis;
    if (c)
      return c;
    var x = [
      u[f - 1],
      d,
      y,
      u[g + 1]
    ];
    return f < 2 && x.unshift(n(l.source, o)), g > u.length - 3 && x.unshift(n(l.target, o)), a.snapPoints = c = { horizontal: [], vertical: [] }, z(x, function(w) {
      w && (w = w.original || w, _ === "y" && c.horizontal.push(w.y), _ === "x" && c.vertical.push(w.x));
    }), c;
  }
  e.on("connectionSegment.move.move", 1500, function(o) {
    var a = i(o), c = o.x, l = o.y, u, d;
    if (a) {
      u = t(a.vertical, c), d = t(a.horizontal, l);
      var f = c - u, y = l - d;
      G(o, {
        dx: o.dx - f,
        dy: o.dy - y,
        x: u,
        y: d
      }), (f || a.vertical.indexOf(c) !== -1) && tn(o, "x", u), (y || a.horizontal.indexOf(l) !== -1) && tn(o, "y", d);
    }
  });
  function r(o) {
    var a = o.snapPoints, c = o.connection.waypoints, l = o.bendpointIndex;
    if (a)
      return a;
    var u = [c[l - 1], c[l + 1]];
    return o.snapPoints = a = { horizontal: [], vertical: [] }, z(u, function(d) {
      d && (d = d.original || d, a.horizontal.push(d.y), a.vertical.push(d.x));
    }), a;
  }
  e.on([
    "connect.hover",
    "connect.move",
    "connect.end"
  ], 1500, function(o) {
    var a = o.context, c = a.hover, l = c && n(c, o);
    !kt(c) || !l || !l.x || !l.y || (tn(o, "x", l.x), tn(o, "y", l.y));
  }), e.on(["bendpoint.move.move", "bendpoint.move.end"], 1500, function(o) {
    var a = o.context, c = r(a), l = a.hover, u = l && n(l, o), d = o.x, f = o.y, y, g;
    if (c) {
      y = t(u ? c.vertical.concat([u.x]) : c.vertical, d), g = t(u ? c.horizontal.concat([u.y]) : c.horizontal, f);
      var _ = d - y, x = f - g;
      G(o, {
        dx: o.dx - _,
        dy: o.dy - x,
        x: o.x - _,
        y: o.y - x
      }), (_ || c.vertical.indexOf(d) !== -1) && tn(o, "x", y), (x || c.horizontal.indexOf(f) !== -1) && tn(o, "y", g);
    }
  });
}
ux.$inject = ["eventBus"];
const TT = {
  __depends__: [
    $r,
    hr
  ],
  __init__: ["bendpoints", "bendpointSnapping", "bendpointMovePreview"],
  bendpoints: ["type", ix],
  bendpointMove: ["type", Zd],
  bendpointMovePreview: ["type", rx],
  connectionSegmentMove: ["type", ax],
  bendpointSnapping: ["type", ux]
};
function px(e, t, n, i) {
  function r(a, c) {
    return i.allowed("connection.create", {
      source: a,
      target: c
    });
  }
  function o(a, c) {
    return r(c, a);
  }
  e.on("connect.hover", function(a) {
    var c = a.context, l = c.start, u = a.hover, d;
    if (c.hover = u, d = c.canExecute = r(l, u), !Xl(d)) {
      if (d !== !1) {
        c.source = l, c.target = u;
        return;
      }
      d = c.canExecute = o(l, u), !Xl(d) && d !== !1 && (c.source = u, c.target = l);
    }
  }), e.on(["connect.out", "connect.cleanup"], function(a) {
    var c = a.context;
    c.hover = null, c.source = null, c.target = null, c.canExecute = !1;
  }), e.on("connect.end", function(a) {
    var c = a.context, l = c.canExecute, u = c.connectionStart, d = {
      x: a.x,
      y: a.y
    }, f = c.source, y = c.target;
    if (!l)
      return !1;
    var g = null, _ = {
      connectionStart: Xf(c) ? d : u,
      connectionEnd: Xf(c) ? u : d
    };
    yn(l) && (g = l), c.connection = n.connect(f, y, g, _);
  }), this.start = function(a, c, l, u) {
    yn(l) || (u = l, l = Fe(c)), t.init(a, "connect", {
      autoActivate: u,
      data: {
        shape: c,
        context: {
          start: c,
          connectionStart: l
        }
      }
    });
  };
}
px.$inject = [
  "eventBus",
  "dragging",
  "modeling",
  "rules"
];
function Xf(e) {
  var t = e.hover, n = e.source, i = e.target;
  return t && n && t === n && n !== i;
}
var kT = 1100, MT = 900, Qg = "connect-ok", ev = "connect-not-ok";
function fx(e, t, n) {
  var i = e.get("connectionPreview", !1);
  i && t.on("connect.move", function(r) {
    var o = r.context, a = o.canExecute, c = o.hover, l = o.source, u = o.start, d = o.startPosition, f = o.target, y = o.connectionStart || d, g = o.connectionEnd || {
      x: r.x,
      y: r.y
    }, _ = y, x = g;
    Xf(o) && (_ = g, x = y), i.drawPreview(o, a, {
      source: l || u,
      target: f || c,
      connectionStart: _,
      connectionEnd: x
    });
  }), t.on("connect.hover", MT, function(r) {
    var o = r.context, a = r.hover, c = o.canExecute;
    c !== null && n.addMarker(a, c ? Qg : ev);
  }), t.on([
    "connect.out",
    "connect.cleanup"
  ], kT, function(r) {
    var o = r.hover;
    o && (n.removeMarker(o, Qg), n.removeMarker(o, ev));
  }), i && t.on("connect.cleanup", function(r) {
    i.cleanUp(r.context);
  });
}
fx.$inject = [
  "injector",
  "eventBus",
  "canvas"
];
const Qd = {
  __depends__: [
    fr,
    hr,
    $r
  ],
  __init__: [
    "connectPreview"
  ],
  connect: ["type", px],
  connectPreview: ["type", fx]
};
var DT = "djs-dragger";
function jr(e, t, n, i) {
  this._canvas = t, this._graphicsFactory = n, this._elementFactory = i, this._connectionDocking = e.get("connectionDocking", !1), this._layouter = e.get("layouter", !1);
}
jr.$inject = [
  "injector",
  "canvas",
  "graphicsFactory",
  "elementFactory"
];
jr.prototype.drawPreview = function(e, t, n) {
  n = n || {};
  var i = e.connectionPreviewGfx, r = e.getConnection, o = n.source, a = n.target, c = n.waypoints, l = n.connectionStart, u = n.connectionEnd, d = n.noLayout, f = n.noCropping, y = n.noNoop, g, _ = this;
  if (i || (i = e.connectionPreviewGfx = this.createConnectionPreviewGfx()), yu(i), r || (r = e.getConnection = OT(function(x, w, D) {
    return _.getConnection(x, w, D);
  })), t && (g = r(t, o, a)), !g) {
    !y && this.drawNoopPreview(i, n);
    return;
  }
  g.waypoints = c || [], this._layouter && !d && (g.waypoints = this._layouter.layoutConnection(g, {
    source: o,
    target: a,
    connectionStart: l,
    connectionEnd: u,
    waypoints: n.waypoints || g.waypoints
  })), (!g.waypoints || !g.waypoints.length) && (g.waypoints = [
    o ? Fe(o) : l,
    a ? Fe(a) : u
  ]), this._connectionDocking && (o || a) && !f && (g.waypoints = this._connectionDocking.getCroppedWaypoints(g, o, a)), this._graphicsFactory.drawConnection(i, g, {
    stroke: "var(--element-dragger-color)"
  });
};
jr.prototype.drawNoopPreview = function(e, t) {
  var n = t.source, i = t.target, r = t.connectionStart || Fe(n), o = t.connectionEnd || Fe(i), a = this.cropWaypoints(r, o, n, i), c = this.createNoopConnection(a[0], a[1]);
  ze(e, c);
};
jr.prototype.cropWaypoints = function(e, t, n, i) {
  var r = this._graphicsFactory, o = n && r.getShapePath(n), a = i && r.getShapePath(i), c = r.getConnectionPath({ waypoints: [e, t] });
  return e = n && Df(o, c, !0) || e, t = i && Df(a, c, !1) || t, [e, t];
};
jr.prototype.cleanUp = function(e) {
  e && e.connectionPreviewGfx && qt(e.connectionPreviewGfx);
};
jr.prototype.getConnection = function(e) {
  var t = NT(e);
  return this._elementFactory.createConnection(t);
};
jr.prototype.createConnectionPreviewGfx = function() {
  var e = Me("g");
  return we(e, {
    pointerEvents: "none"
  }), dt(e).add(DT), ze(this._canvas.getActiveLayer(), e), e;
};
jr.prototype.createNoopConnection = function(e, t) {
  return gu([e, t], {
    stroke: "#333",
    strokeDasharray: [1],
    strokeWidth: 2,
    "pointer-events": "none"
  });
};
function OT(e) {
  var t = {};
  return function(n) {
    var i = JSON.stringify(n), r = t[i];
    return r || (r = t[i] = e.apply(null, arguments)), r;
  };
}
function NT(e) {
  return yn(e) ? e : {};
}
const BT = {
  __init__: ["connectionPreview"],
  connectionPreview: ["type", jr]
};
var LT = [
  "marker-start",
  "marker-mid",
  "marker-end"
], IT = [
  "circle",
  "ellipse",
  "line",
  "path",
  "polygon",
  "polyline",
  "path",
  "rect"
];
function go(e, t, n, i) {
  this._elementRegistry = e, this._canvas = n, this._styles = i, this._clonedMarkers = {};
  var r = this;
  t.on("drag.cleanup", function() {
    r.cleanUp();
  });
}
go.$inject = [
  "elementRegistry",
  "eventBus",
  "canvas",
  "styles"
];
go.prototype.cleanUp = function() {
  var e = this;
  z(e._clonedMarkers, function(t) {
    qt(t);
  }), e._clonedMarkers = {};
};
go.prototype.getGfx = function(e) {
  return this._elementRegistry.getGraphics(e);
};
go.prototype.addDragger = function(e, t, n, i = "djs-dragger") {
  n = n || this.getGfx(e);
  var r = p_(n), o = n.getBoundingClientRect();
  return this._cloneMarkers(Yo(r), i), we(r, this._styles.cls(i, [], {
    x: o.top,
    y: o.left
  })), ze(t, r), we(r, "data-preview-support-element-id", e.id), r;
};
go.prototype.addFrame = function(e, t) {
  var n = Me("rect", {
    class: "djs-resize-overlay",
    width: e.width,
    height: e.height,
    x: e.x,
    y: e.y
  });
  return ze(t, n), we(n, "data-preview-support-element-id", e.id), n;
};
go.prototype._cloneMarkers = function(e, t = "djs-dragger") {
  var n = this;
  if (e.childNodes)
    for (var i = 0; i < e.childNodes.length; i++)
      n._cloneMarkers(e.childNodes[i], t);
  HT(e) && LT.forEach(function(r) {
    if (we(e, r)) {
      var o = $T(e, r, n._canvas.getContainer());
      n._cloneMarker(e, o, r, t);
    }
  });
};
go.prototype._cloneMarker = function(e, t, n, i = "djs-dragger") {
  var r = t.id + "-" + i, o = this._clonedMarkers[r];
  if (!o) {
    o = p_(t);
    var a = r + "-clone";
    o.id = a, dt(o).add(i), this._clonedMarkers[r] = o;
    var c = Tt("defs", this._canvas._svg);
    c || (c = Me("defs"), ze(this._canvas._svg, c)), ze(c, o);
  }
  var l = FT(this._clonedMarkers[r].id);
  we(e, n, l);
};
function $T(e, t, n) {
  var i = jT(we(e, t));
  return Tt("marker#" + i, n || document);
}
function jT(e) {
  return e.match(/url\(['"]?#([^'"]*)['"]?\)/)[1];
}
function FT(e) {
  return "url(#" + e + ")";
}
function HT(e) {
  return IT.indexOf(e.nodeName) !== -1;
}
const es = {
  __init__: ["previewSupport"],
  previewSupport: ["type", go]
}, ml = "complex-preview";
class dx {
  constructor(t, n, i) {
    this._canvas = t, this._graphicsFactory = n, this._previewSupport = i, this._markers = [];
  }
  /**
   * Create complex preview.
   *
   * @param {CreateOptions} options
   */
  create(t) {
    this.cleanUp();
    const {
      created: n = [],
      moved: i = [],
      removed: r = [],
      resized: o = []
    } = t, a = this._canvas.getLayer(ml);
    n.filter((c) => !zT(c)).forEach((c) => {
      let l;
      kt(c) ? (l = this._graphicsFactory._createContainer("connection", Me("g")), this._graphicsFactory.drawConnection(Yo(l), c)) : (l = this._graphicsFactory._createContainer("shape", Me("g")), this._graphicsFactory.drawShape(Yo(l), c), Cn(l, c.x, c.y)), this._previewSupport.addDragger(c, a, l);
    }), i.forEach(({ element: c, delta: l }) => {
      this._previewSupport.addDragger(c, a, void 0, "djs-dragging"), this._canvas.addMarker(c, "djs-element-hidden"), this._markers.push([c, "djs-element-hidden"]);
      const u = this._previewSupport.addDragger(c, a);
      kt(c) ? Cn(u, l.x, l.y) : Cn(u, c.x + l.x, c.y + l.y);
    }), r.forEach((c) => {
      this._previewSupport.addDragger(c, a, void 0, "djs-dragging"), this._canvas.addMarker(c, "djs-element-hidden"), this._markers.push([c, "djs-element-hidden"]);
    }), o.forEach(({ shape: c, bounds: l }) => {
      this._canvas.addMarker(c, "djs-hidden"), this._markers.push([c, "djs-hidden"]), this._previewSupport.addDragger(c, a, void 0, "djs-dragging");
      const u = this._graphicsFactory._createContainer("shape", Me("g"));
      this._graphicsFactory.drawShape(Yo(u), c, {
        width: l.width,
        height: l.height
      }), Cn(u, l.x, l.y), this._previewSupport.addDragger(c, a, u);
    });
  }
  cleanUp() {
    yu(this._canvas.getLayer(ml)), this._markers.forEach(([t, n]) => this._canvas.removeMarker(t, n)), this._markers = [], this._previewSupport.cleanUp();
  }
  show() {
    this._canvas.showLayer(ml);
  }
  hide() {
    this._canvas.hideLayer(ml);
  }
}
dx.$inject = [
  "canvas",
  "graphicsFactory",
  "previewSupport"
];
function zT(e) {
  return e.hidden;
}
const VT = {
  __depends__: [es],
  __init__: ["complexPreview"],
  complexPreview: ["type", dx]
};
var eh = [
  "top",
  "bottom",
  "left",
  "right"
], yl = 10;
function th(e, t) {
  le.call(this, e), this.postExecuted([
    "connection.create",
    "connection.layout",
    "connection.updateWaypoints"
  ], function(r) {
    var o = r.context, a = o.connection, c = a.source, l = a.target, u = o.hints || {};
    u.createElementsBehavior !== !1 && (n(c), n(l));
  }), this.postExecuted([
    "label.create"
  ], function(r) {
    var o = r.context, a = o.shape, c = o.hints || {};
    c.createElementsBehavior !== !1 && n(a.labelTarget);
  }), this.postExecuted([
    "elements.create"
  ], function(r) {
    var o = r.context, a = o.elements, c = o.hints || {};
    c.createElementsBehavior !== !1 && a.forEach(function(l) {
      n(l);
    });
  });
  function n(r) {
    if (Su(r)) {
      var o = UT(r);
      o && i(r, o);
    }
  }
  function i(r, o) {
    var a = Fe(r), c = r.label, l = Fe(c);
    if (c.parent) {
      var u = Le(r), d;
      switch (o) {
        case "top":
          d = {
            x: a.x,
            y: u.top - yl - c.height / 2
          };
          break;
        case "left":
          d = {
            x: u.left - yl - c.width / 2,
            y: a.y
          };
          break;
        case "bottom":
          d = {
            x: a.x,
            y: u.bottom + yl + c.height / 2
          };
          break;
        case "right":
          d = {
            x: u.right + yl + c.width / 2,
            y: a.y
          };
          break;
      }
      var f = Vi(d, l);
      t.moveShape(c, f);
    }
  }
}
Pe(th, le);
th.$inject = [
  "eventBus",
  "modeling"
];
function WT(e) {
  var t = e.host, n = Fe(e), i = Bn(n, t), r;
  i.indexOf("-") >= 0 ? r = i.split("-") : r = [i];
  var o = eh.filter(function(a) {
    return r.indexOf(a) === -1;
  });
  return o;
}
function GT(e) {
  var t = Fe(e), n = [].concat(
    e.incoming.map(function(i) {
      return i.waypoints[i.waypoints.length - 2];
    }),
    e.outgoing.map(function(i) {
      return i.waypoints[1];
    })
  ).map(function(i) {
    return hx(t, i);
  });
  return n;
}
function UT(e) {
  var t = Fe(e.label), n = Fe(e), i = hx(n, t);
  if (YT(i)) {
    var r = GT(e);
    if (e.host) {
      var o = WT(e);
      r = r.concat(o);
    }
    var a = eh.filter(function(c) {
      return r.indexOf(c) === -1;
    });
    if (a.indexOf(i) === -1)
      return a[0];
  }
}
function hx(e, t) {
  return Bn(t, e, 5);
}
function YT(e) {
  return eh.indexOf(e) !== -1;
}
function nh(e) {
  le.call(this, e), this.preExecute("shape.append", function(t) {
    var n = t.source, i = t.shape;
    t.position || (A(i, "bpmn:TextAnnotation") ? t.position = {
      x: n.x + n.width / 2 + 75,
      y: n.y - 50 - i.height / 2
    } : t.position = {
      x: n.x + n.width + 80 + i.width / 2,
      y: n.y + n.height / 2
    });
  }, !0);
}
Pe(nh, le);
nh.$inject = [
  "eventBus"
];
function ih(e, t) {
  e.invoke(le, this), this.postExecute("shape.move", function(n) {
    var i = n.newParent, r = n.shape, o = et(r.incoming.concat(r.outgoing), function(a) {
      return A(a, "bpmn:Association");
    });
    z(o, function(a) {
      t.moveConnection(a, { x: 0, y: 0 }, i);
    });
  }, !0);
}
Pe(ih, le);
ih.$inject = [
  "injector",
  "modeling"
];
var tv = 500;
function Fu(e, t) {
  t.invoke(le, this), this._bpmnReplace = e;
  var n = this;
  this.postExecuted("elements.create", tv, function(i) {
    var r = i.elements;
    r = r.filter(function(o) {
      var a = o.host;
      return nv(o, a);
    }), r.length === 1 && r.map(function(o) {
      return r.indexOf(o);
    }).forEach(function(o) {
      var a = r[o];
      i.elements[o] = n._replaceShape(r[o], a);
    });
  }, !0), this.preExecute("elements.move", tv, function(i) {
    var r = i.shapes, o = i.newHost;
    if (r.length === 1) {
      var a = r[0];
      nv(a, o) && (i.shapes = [n._replaceShape(a, o)]);
    }
  }, !0);
}
Fu.$inject = [
  "bpmnReplace",
  "injector"
];
Pe(Fu, le);
Fu.prototype._replaceShape = function(e, t) {
  var n = KT(e), i = {
    type: "bpmn:BoundaryEvent",
    host: t
  };
  return n && (i.eventDefinitionType = n.$type), this._bpmnReplace.replaceElement(e, i, { layoutConnection: !1 });
};
function KT(e) {
  var t = he(e), n = t.eventDefinitions;
  return n && n[0];
}
function nv(e, t) {
  return !vt(e) && rt(e, ["bpmn:IntermediateThrowEvent", "bpmn:IntermediateCatchEvent"]) && !!t;
}
function rh(e, t) {
  le.call(this, e);
  function n(i) {
    return et(i.attachers, function(r) {
      return A(r, "bpmn:BoundaryEvent");
    });
  }
  this.postExecute("connection.create", function(i) {
    var r = i.context.source, o = i.context.target, a = n(o);
    A(r, "bpmn:EventBasedGateway") && A(o, "bpmn:ReceiveTask") && a.length > 0 && t.removeElements(a);
  }), this.postExecute("connection.reconnect", function(i) {
    var r = i.context.oldSource, o = i.context.newSource;
    A(r, "bpmn:Gateway") && A(o, "bpmn:EventBasedGateway") && z(o.outgoing, function(a) {
      var c = a.target, l = n(c);
      A(c, "bpmn:ReceiveTask") && l.length > 0 && t.removeElements(l);
    });
  });
}
rh.$inject = [
  "eventBus",
  "modeling"
];
Pe(rh, le);
function oh(e, t, n) {
  le.call(this, e), this.preExecute("shape.replace", c, !0), this.postExecuted("shape.replace", l, !0), this.preExecute("connection.create", r, !0), this.postExecuted("connection.delete", i, !0), this.postExecuted("connection.reconnect", o, !0), this.postExecuted("element.updateProperties", a, !0);
  function i(w) {
    const D = w.source, O = w.target;
    Aa(D) && Ss(O) && d(O);
  }
  function r(w) {
    const D = w.connection, O = w.source, k = w.target;
    Aa(O) && gl(k) && (u(k), y(O, [D]));
  }
  function o(w) {
    const D = w.newTarget, O = w.oldSource, k = w.oldTarget;
    if (k !== D) {
      const P = O;
      Ss(k) && d(k), Aa(P) && gl(D) && u(D);
    }
  }
  function a(w) {
    const { element: D } = w;
    Ss(D) ? (f(D), g(D)) : gl(D) && _(D);
  }
  function c(w) {
    const {
      newData: D,
      oldShape: O
    } = w;
    if (Aa(w.oldShape) && D.eventDefinitionType !== "bpmn:CompensateEventDefinition" || D.type !== "bpmn:BoundaryEvent") {
      const k = O.outgoing.find(
        ({ target: P }) => Ss(P)
      );
      k && k.target && (w._connectionTarget = k.target);
    } else if (!Aa(w.oldShape) && D.eventDefinitionType === "bpmn:CompensateEventDefinition" && D.type === "bpmn:BoundaryEvent") {
      const k = O.outgoing.find(
        ({ target: P }) => gl(P)
      );
      k && k.target && (w._connectionTarget = k.target), x(O);
    }
  }
  function l(w) {
    const { _connectionTarget: D, newShape: O } = w;
    D && t.connect(O, D);
  }
  function u(w) {
    t.updateProperties(w, { isForCompensation: !0 });
  }
  function d(w) {
    t.updateProperties(w, { isForCompensation: void 0 });
  }
  function f(w) {
    for (const D of w.incoming)
      n.canConnect(D.source, w) || t.removeConnection(D);
    for (const D of w.outgoing)
      n.canConnect(w, D.target) || t.removeConnection(D);
  }
  function y(w, D) {
    w.outgoing.filter((P) => A(P, "bpmn:Association")).filter((P) => Ss(P.target) && !D.includes(P)).forEach((P) => t.removeConnection(P));
  }
  function g(w) {
    const D = w.attachers.slice();
    D.length && t.removeElements(D);
  }
  function _(w) {
    const D = w.incoming.filter(
      (O) => Aa(O.source)
    );
    t.removeElements(D);
  }
  function x(w) {
    const D = w.outgoing.filter(
      (O) => A(O, "bpmn:SequenceFlow")
    );
    t.removeElements(D);
  }
}
Pe(oh, le);
oh.$inject = [
  "eventBus",
  "modeling",
  "bpmnRules"
];
function Ss(e) {
  const t = he(e);
  return t && t.get("isForCompensation");
}
function Aa(e) {
  return e && A(e, "bpmn:BoundaryEvent") && sc(e, "bpmn:CompensateEventDefinition");
}
function gl(e) {
  return e && A(e, "bpmn:Activity") && !Nn(e);
}
function ah(e) {
  e.invoke(le, this), this.preExecute("shape.create", 1500, function(t) {
    var n = t.context, i = n.parent, r = n.shape;
    A(i, "bpmn:Lane") && !A(r, "bpmn:Lane") && (n.parent = Ys(i, "bpmn:Participant"));
  });
}
ah.$inject = ["injector"];
Pe(ah, le);
function sh(e, t) {
  le.call(this, e), this.preExecute("shape.create", function(n) {
    var i = n.context, r = i.shape;
    if (A(r, "bpmn:DataObjectReference") && r.type !== "label") {
      var o = t.create("bpmn:DataObject");
      r.businessObject.dataObjectRef = o;
    }
  });
}
sh.$inject = [
  "eventBus",
  "bpmnFactory"
];
Pe(sh, le);
var Zf = 20, Jf = 20, mx = 30, vl = 2e3;
function ch(e, t, n) {
  le.call(this, t), t.on([
    "create.start",
    "shape.move.start"
  ], vl, function(r) {
    var o = r.context, a = o.shape, c = e.getRootElement();
    if (!(!A(a, "bpmn:Participant") || !A(c, "bpmn:Process") || !c.children.length)) {
      var l = c.children.filter(function(f) {
        return !A(f, "bpmn:Group") && !vt(f) && !kt(f);
      });
      if (l.length) {
        var u = nn(l), d = qT(a, u);
        G(a, d), o.createConstraints = XT(a, u);
      }
    }
  }), t.on("create.start", vl, function(r) {
    var o = r.context, a = o.shape, c = e.getRootElement(), l = e.getGraphics(c);
    function u(d) {
      d.element = c, d.gfx = l;
    }
    A(a, "bpmn:Participant") && A(c, "bpmn:Process") && (t.on("element.hover", vl, u), t.once("create.cleanup", function() {
      t.off("element.hover", u);
    }));
  });
  function i() {
    var r = e.getRootElement();
    return A(r, "bpmn:Collaboration") ? r : n.makeCollaboration();
  }
  this.preExecute("elements.create", vl, function(r) {
    var o = r.elements, a = r.parent, c = ZT(o), l;
    c && A(a, "bpmn:Process") && (r.parent = i(), l = r.hints = r.hints || {}, l.participant = c, l.process = a, l.processRef = he(c).get("processRef"));
  }, !0), this.preExecute("shape.create", function(r) {
    var o = r.parent, a = r.shape;
    A(a, "bpmn:Participant") && A(o, "bpmn:Process") && (r.parent = i(), r.process = o, r.processRef = he(a).get("processRef"));
  }, !0), this.execute("shape.create", function(r) {
    var o = r.hints || {}, a = r.process || o.process, c = r.shape, l = o.participant;
    a && (!l || c === l) && he(c).set("processRef", he(a));
  }, !0), this.revert("shape.create", function(r) {
    var o = r.hints || {}, a = r.process || o.process, c = r.processRef || o.processRef, l = r.shape, u = o.participant;
    a && (!u || l === u) && he(l).set("processRef", c);
  }, !0), this.postExecute("shape.create", function(r) {
    var o = r.hints || {}, a = r.process || r.hints.process, c = r.shape, l = o.participant;
    if (a) {
      var u = a.children.slice();
      l ? c === l && n.moveElements(u, { x: 0, y: 0 }, l) : n.moveElements(u, { x: 0, y: 0 }, c);
    }
  }, !0);
}
ch.$inject = [
  "canvas",
  "eventBus",
  "modeling"
];
Pe(ch, le);
function qT(e, t) {
  t = {
    width: t.width + Zf * 2 + mx,
    height: t.height + Jf * 2
  };
  var n = Math.max(e.width, t.width), i = Math.max(e.height, t.height);
  return {
    x: -n / 2,
    y: -i / 2,
    width: n,
    height: i
  };
}
function XT(e, t) {
  return t = Le(t), {
    bottom: t.top + e.height / 2 - Jf,
    left: t.right - e.width / 2 + Zf,
    top: t.bottom - e.height / 2 + Jf,
    right: t.left + e.width / 2 - Zf - mx
  };
}
function ZT(e) {
  return gt(e, function(t) {
    return A(t, "bpmn:Participant");
  });
}
var iv = "__targetRef_placeholder";
function lh(e, t) {
  le.call(this, e), this.executed([
    "connection.create",
    "connection.delete",
    "connection.move",
    "connection.reconnect"
  ], rv(o)), this.reverted([
    "connection.create",
    "connection.delete",
    "connection.move",
    "connection.reconnect"
  ], rv(o));
  function n(a, c, l) {
    var u = a.get("dataInputAssociations");
    return gt(u, function(d) {
      return d !== l && d.targetRef === c;
    });
  }
  function i(a, c) {
    var l = a.get("properties"), u = gt(l, function(d) {
      return d.name === iv;
    });
    return !u && c && (u = t.create("bpmn:Property", {
      name: iv
    }), pn(l, u)), u;
  }
  function r(a, c) {
    var l = i(a);
    l && (n(a, l, c) || rn(a.get("properties"), l));
  }
  function o(a) {
    var c = a.context, l = c.connection, u = l.businessObject, d = l.target, f = d && d.businessObject, y = c.newTarget, g = y && y.businessObject, _ = c.oldTarget || c.target, x = _ && _.businessObject, w = l.businessObject, D;
    x && x !== f && r(x, u), g && g !== f && r(g, u), f ? (D = i(f, !0), w.targetRef = D) : w.targetRef = null;
  }
}
lh.$inject = [
  "eventBus",
  "bpmnFactory"
];
Pe(lh, le);
function rv(e) {
  return function(t) {
    var n = t.context, i = n.connection;
    if (A(i, "bpmn:DataInputAssociation"))
      return e(t);
  };
}
function Hu(e) {
  this._bpmnUpdater = e;
}
Hu.$inject = ["bpmnUpdater"];
Hu.prototype.execute = function(e) {
  var t = e.dataStoreBo, n = e.dataStoreDi, i = e.newSemanticParent, r = e.newDiParent;
  return e.oldSemanticParent = t.$parent, e.oldDiParent = n.$parent, this._bpmnUpdater.updateSemanticParent(t, i), this._bpmnUpdater.updateDiParent(n, r), [];
};
Hu.prototype.revert = function(e) {
  var t = e.dataStoreBo, n = e.dataStoreDi, i = e.oldSemanticParent, r = e.oldDiParent;
  return this._bpmnUpdater.updateSemanticParent(t, i), this._bpmnUpdater.updateDiParent(n, r), [];
};
function uh(e, t, n, i) {
  le.call(this, i), t.registerHandler("dataStore.updateContainment", Hu);
  function r() {
    return n.filter(function(c) {
      return A(c, "bpmn:Participant") && he(c).processRef;
    })[0];
  }
  function o(c) {
    return c.children.filter(function(l) {
      return A(l, "bpmn:DataStoreReference") && !l.labelTarget;
    });
  }
  function a(c, l) {
    var u = c.businessObject || c;
    if (l = l || r(), l) {
      var d = l.businessObject || l;
      t.execute("dataStore.updateContainment", {
        dataStoreBo: u,
        dataStoreDi: bt(c),
        newSemanticParent: d.processRef || d,
        newDiParent: bt(l)
      });
    }
  }
  this.preExecute("shape.create", function(c) {
    var l = c.context, u = l.shape;
    A(u, "bpmn:DataStoreReference") && u.type !== "label" && (l.hints || (l.hints = {}), l.hints.autoResize = !1);
  }), this.preExecute("elements.move", function(c) {
    var l = c.context, u = l.shapes, d = u.filter(function(f) {
      return A(f, "bpmn:DataStoreReference");
    });
    d.length && (l.hints || (l.hints = {}), l.hints.autoResize = u.filter(function(f) {
      return !A(f, "bpmn:DataStoreReference");
    }));
  }), this.postExecute("shape.create", function(c) {
    var l = c.context, u = l.shape, d = u.parent;
    A(u, "bpmn:DataStoreReference") && u.type !== "label" && A(d, "bpmn:Collaboration") && a(u);
  }), this.postExecute("shape.move", function(c) {
    var l = c.context, u = l.shape, d = l.oldParent, f = u.parent;
    if (!A(d, "bpmn:Collaboration") && A(u, "bpmn:DataStoreReference") && u.type !== "label" && A(f, "bpmn:Collaboration")) {
      var y = A(d, "bpmn:Participant") ? d : QT(d, "bpmn:Participant");
      a(u, y);
    }
  }), this.postExecute("shape.delete", function(c) {
    var l = c.context, u = l.shape, d = e.getRootElement();
    rt(u, ["bpmn:Participant", "bpmn:SubProcess"]) && A(d, "bpmn:Collaboration") && o(d).filter(function(f) {
      return JT(f, u);
    }).forEach(function(f) {
      a(f);
    });
  }), this.postExecute("canvas.updateRoot", function(c) {
    var l = c.context, u = l.oldRoot, d = l.newRoot, f = o(u);
    f.forEach(function(y) {
      A(d, "bpmn:Process") && a(y, d);
    });
  });
}
uh.$inject = [
  "canvas",
  "commandStack",
  "elementRegistry",
  "eventBus"
];
Pe(uh, le);
function JT(e, t) {
  for (var n = e.businessObject || e, i = t.businessObject || t; n.$parent; ) {
    if (n.$parent === i.processRef || i)
      return !0;
    n = n.$parent;
  }
  return !1;
}
function QT(e, t) {
  for (; e.parent; ) {
    if (A(e.parent, t))
      return e.parent;
    e = e.parent;
  }
}
var cu = Math.max, lu = Math.min, ek = 20;
function yx(e, t) {
  return {
    top: e.top - t.top,
    right: e.right - t.right,
    bottom: e.bottom - t.bottom,
    left: e.left - t.left
  };
}
function tk(e, t, n) {
  var i = n.x, r = n.y, o = {
    x: e.x,
    y: e.y,
    width: e.width,
    height: e.height
  };
  return t.indexOf("n") !== -1 ? (o.y = e.y + r, o.height = e.height - r) : t.indexOf("s") !== -1 && (o.height = e.height + r), t.indexOf("e") !== -1 ? o.width = e.width + i : t.indexOf("w") !== -1 && (o.x = e.x + i, o.width = e.width - i), o;
}
function nk(e, t) {
  return {
    x: e.x + (t.left || 0),
    y: e.y + (t.top || 0),
    width: e.width - (t.left || 0) + (t.right || 0),
    height: e.height - (t.top || 0) + (t.bottom || 0)
  };
}
function _l(e, t, n) {
  var i = t[e], r = n.min && n.min[e], o = n.max && n.max[e];
  return je(r) && (i = (/top|left/.test(e) ? lu : cu)(i, r)), je(o) && (i = (/top|left/.test(e) ? cu : lu)(i, o)), i;
}
function ik(e, t) {
  if (!t)
    return e;
  var n = Le(e);
  return _u({
    top: _l("top", n, t),
    right: _l("right", n, t),
    bottom: _l("bottom", n, t),
    left: _l("left", n, t)
  });
}
function rk(e, t, n, i) {
  var r = Le(t), o = {
    top: /n/.test(e) ? r.bottom - n.height : r.top,
    left: /w/.test(e) ? r.right - n.width : r.left,
    bottom: /s/.test(e) ? r.top + n.height : r.bottom,
    right: /e/.test(e) ? r.left + n.width : r.right
  }, a = i ? Le(i) : o, c = {
    top: lu(o.top, a.top),
    left: lu(o.left, a.left),
    bottom: cu(o.bottom, a.bottom),
    right: cu(o.right, a.right)
  };
  return _u(c);
}
function Rs(e, t) {
  return typeof e < "u" ? e : ek;
}
function ok(e, t) {
  var n, i, r, o;
  return typeof t == "object" ? (n = Rs(t.left), i = Rs(t.right), r = Rs(t.top), o = Rs(t.bottom)) : n = i = r = o = Rs(t), {
    x: e.x - n,
    y: e.y - r,
    width: e.width + n + i,
    height: e.height + r + o
  };
}
function ak(e) {
  return !(e.waypoints || e.type === "label");
}
function gx(e, t) {
  var n;
  if (e.length === void 0 ? n = et(e.children, ak) : n = e, n.length)
    return ok(nn(n), t);
}
var Zr = Math.abs;
function sk(e, t) {
  return yx(Le(t), Le(e));
}
var ck = [
  "bpmn:Participant",
  "bpmn:Process",
  "bpmn:SubProcess"
], Ci = 30;
function zu(e, t) {
  return t = t || [], e.children.filter(function(n) {
    A(n, "bpmn:Lane") && (zu(n, t), t.push(n));
  }), t;
}
function vo(e) {
  return e.children.filter(function(t) {
    return A(t, "bpmn:Lane");
  });
}
function Ai(e) {
  return Ys(e, ck) || e;
}
function lk(e, t) {
  var n = Ai(e), i = A(n, "bpmn:Process") ? [] : [n], r = zu(n, i), o = Le(e), a = Le(t), c = sk(e, t), l = [], u = An(e);
  return r.forEach(function(d) {
    if (d !== e) {
      var f = u ? 0 : c.top, y = u ? c.right : 0, g = u ? 0 : c.bottom, _ = u ? c.left : 0, x = Le(d);
      c.top && (Zr(x.bottom - o.top) < 10 && (g = a.top - x.bottom), Zr(x.top - o.top) < 5 && (f = a.top - x.top)), c.left && (Zr(x.right - o.left) < 10 && (y = a.left - x.right), Zr(x.left - o.left) < 5 && (_ = a.left - x.left)), c.bottom && (Zr(x.top - o.bottom) < 10 && (f = a.bottom - x.top), Zr(x.bottom - o.bottom) < 5 && (g = a.bottom - x.bottom)), c.right && (Zr(x.left - o.right) < 10 && (_ = a.right - x.left), Zr(x.right - o.right) < 5 && (y = a.right - x.right)), (f || y || g || _) && l.push({
        shape: d,
        newBounds: nk(d, {
          top: f,
          right: y,
          bottom: g,
          left: _
        })
      });
    }
  }), l;
}
var uk = 500;
function ph(e, t) {
  le.call(this, e);
  function n(i, r) {
    var o = An(i), a = vo(r), c = [], l = [], u = [], d = [];
    if (ta(a, function(w) {
      return o ? w.y > i.y ? l.push(w) : c.push(w) : w.x > i.x ? d.push(w) : u.push(w), w.children;
    }), !!a.length) {
      var f;
      o ? l.length && c.length ? f = i.height / 2 : f = i.height : d.length && u.length ? f = i.width / 2 : f = i.width;
      var y, g, _, x;
      c.length && (y = t.calculateAdjustments(
        c,
        "y",
        f,
        i.y - 10
      ), t.makeSpace(
        y.movingShapes,
        y.resizingShapes,
        { x: 0, y: f },
        "s"
      )), l.length && (g = t.calculateAdjustments(
        l,
        "y",
        -f,
        i.y + i.height + 10
      ), t.makeSpace(
        g.movingShapes,
        g.resizingShapes,
        { x: 0, y: -f },
        "n"
      )), u.length && (_ = t.calculateAdjustments(
        u,
        "x",
        f,
        i.x - 10
      ), t.makeSpace(
        _.movingShapes,
        _.resizingShapes,
        { x: f, y: 0 },
        "e"
      )), d.length && (x = t.calculateAdjustments(
        d,
        "x",
        -f,
        i.x + i.width + 10
      ), t.makeSpace(
        x.movingShapes,
        x.resizingShapes,
        { x: -f, y: 0 },
        "w"
      ));
    }
  }
  this.postExecuted("shape.delete", uk, function(i) {
    var r = i.context, o = r.hints, a = r.shape, c = r.oldParent;
    A(a, "bpmn:Lane") && (o && o.nested || n(a, c));
  });
}
ph.$inject = [
  "eventBus",
  "spaceTool"
];
Pe(ph, le);
var ov = 500;
function Vu(e, t) {
  t.invoke(le, this), this._bpmnReplace = e;
  var n = this;
  this.postExecuted("elements.create", ov, function(i) {
    var r = i.elements;
    r.filter(function(o) {
      var a = o.host;
      return av(o, a);
    }).map(function(o) {
      return r.indexOf(o);
    }).forEach(function(o) {
      i.elements[o] = n._replaceShape(r[o]);
    });
  }, !0), this.preExecute("elements.move", ov, function(i) {
    var r = i.shapes, o = i.newHost;
    r.forEach(function(a, c) {
      var l = a.host;
      av(a, fk(r, l) ? l : o) && (r[c] = n._replaceShape(a));
    });
  }, !0);
}
Vu.$inject = [
  "bpmnReplace",
  "injector"
];
Pe(Vu, le);
Vu.prototype._replaceShape = function(e) {
  var t = pk(e), n;
  return t ? n = {
    type: "bpmn:IntermediateCatchEvent",
    eventDefinitionType: t.$type
  } : n = {
    type: "bpmn:IntermediateThrowEvent"
  }, this._bpmnReplace.replaceElement(e, n, { layoutConnection: !1 });
};
function pk(e) {
  var t = he(e), n = t.eventDefinitions;
  return n && n[0];
}
function av(e, t) {
  return !vt(e) && A(e, "bpmn:BoundaryEvent") && !t;
}
function fk(e, t) {
  return e.indexOf(t) !== -1;
}
function fh(e, t, n) {
  le.call(this, e);
  function i(r, o, a) {
    var c = o.waypoints, l, u, d, f, y, g, _, x = r.outgoing.slice(), w = r.incoming.slice(), D;
    je(a.width) ? D = Fe(a) : D = a;
    var O = Uf(c, D);
    if (O) {
      if (l = c.slice(0, O.index), u = c.slice(O.index + (O.bendpoint ? 1 : 0)), !l.length || !u.length)
        return;
      d = O.bendpoint ? c[O.index] : D, (l.length === 1 || !sv(r, l[l.length - 1])) && l.push(cv(d)), (u.length === 1 || !sv(r, u[0])) && u.unshift(cv(d));
    }
    f = o.source, y = o.target, t.canConnect(f, r, o) && (n.reconnectEnd(o, r, l || D), g = o), t.canConnect(r, y, o) && (g ? _ = n.connect(
      r,
      y,
      { type: o.type, waypoints: u }
    ) : (n.reconnectStart(o, r, u || D), _ = o));
    var k = [].concat(
      g && et(w, function(P) {
        return P.source === g.source;
      }) || [],
      _ && et(x, function(P) {
        return P.target === _.target;
      }) || []
    );
    k.length && n.removeElements(k);
  }
  this.preExecute("elements.move", function(r) {
    var o = r.newParent, a = r.shapes, c = r.delta, l = a[0];
    if (!(!l || !o)) {
      o && o.waypoints && (r.newParent = o = o.parent);
      var u = Fe(l), d = {
        x: u.x + c.x,
        y: u.y + c.y
      }, f = gt(o.children, function(y) {
        var g = t.canInsert(a, y);
        return g && Uf(y.waypoints, d);
      });
      f && (r.targetFlow = f, r.position = d);
    }
  }, !0), this.postExecuted("elements.move", function(r) {
    var o = r.shapes, a = r.targetFlow, c = r.position;
    a && i(o[0], a, c);
  }, !0), this.preExecute("shape.create", function(r) {
    var o = r.parent, a = r.shape;
    t.canInsert(a, o) && (r.targetFlow = o, r.parent = o.parent);
  }, !0), this.postExecuted("shape.create", function(r) {
    var o = r.shape, a = r.targetFlow, c = r.position;
    a && i(o, a, c);
  }, !0);
}
Pe(fh, le);
fh.$inject = [
  "eventBus",
  "bpmnRules",
  "modeling"
];
function sv(e, t) {
  var n = t.x, i = t.y;
  return n >= e.x && n <= e.x + e.width && i >= e.y && i <= e.y + e.height;
}
function cv(e) {
  return G({}, e);
}
function dh(e, t) {
  le.call(this, e), this.preExecuted("connection.create", function(n) {
    var i = n.context, r = i.connection, o = i.source, a = i.target, c = i.hints;
    if (!(c && c.createElementsBehavior === !1) && Pa(r)) {
      var l = [];
      A(o, "bpmn:EventBasedGateway") ? l = a.incoming.filter(
        (u) => u !== r && Pa(u)
      ) : l = a.incoming.filter(
        (u) => u !== r && Pa(u) && A(u.source, "bpmn:EventBasedGateway")
      ), l.forEach(function(u) {
        t.removeConnection(u);
      });
    }
  }), this.preExecuted("shape.replace", function(n) {
    var i = n.context, r = i.newShape;
    if (A(r, "bpmn:EventBasedGateway")) {
      var o = r.outgoing.filter(Pa).reduce(function(a, c) {
        return a.includes(c.target) ? a : a.concat(c.target);
      }, []);
      o.forEach(function(a) {
        a.incoming.filter(Pa).forEach(function(c) {
          const l = a.incoming.filter(Pa).filter(function(u) {
            return u.source === r;
          });
          (c.source !== r || l.length > 1) && t.removeConnection(c);
        });
      });
    }
  });
}
dh.$inject = [
  "eventBus",
  "modeling"
];
Pe(dh, le);
function Pa(e) {
  return A(e, "bpmn:SequenceFlow");
}
var bl = 1500, lv = 2e3;
function vx(e, t, n) {
  t.on([
    "create.hover",
    "create.move",
    "create.out",
    "create.end",
    "shape.move.hover",
    "shape.move.move",
    "shape.move.out",
    "shape.move.end"
  ], bl, function(i) {
    var r = i.context, o = r.shape || i.shape, a = i.hover;
    A(a, "bpmn:Lane") && !rt(o, ["bpmn:Lane", "bpmn:Participant"]) && (i.hover = Ai(a), i.hoverGfx = e.getGraphics(i.hover));
    var c = n.getRootElement();
    a !== c && (o.labelTarget || rt(o, ["bpmn:Group", "bpmn:TextAnnotation"])) && (i.hover = c, i.hoverGfx = e.getGraphics(i.hover));
  }), t.on([
    "connect.hover",
    "connect.out",
    "connect.end",
    "connect.cleanup",
    "global-connect.hover",
    "global-connect.out",
    "global-connect.end",
    "global-connect.cleanup"
  ], bl, function(i) {
    var r = i.hover;
    A(r, "bpmn:Lane") && (i.hover = Ai(r) || r, i.hoverGfx = e.getGraphics(i.hover));
  }), t.on([
    "bendpoint.move.hover"
  ], bl, function(i) {
    var r = i.context, o = i.hover, a = r.type;
    A(o, "bpmn:Lane") && /reconnect/.test(a) && (i.hover = Ai(o) || o, i.hoverGfx = e.getGraphics(i.hover));
  }), t.on([
    "connect.start"
  ], bl, function(i) {
    var r = i.context, o = r.start;
    A(o, "bpmn:Lane") && (r.start = Ai(o) || o);
  }), t.on("shape.move.start", lv, function(i) {
    var r = i.shape;
    A(r, "bpmn:Lane") && (i.shape = Ai(r) || r);
  }), t.on("spaceTool.move", lv, function(i) {
    var r = i.hover;
    r && A(r, "bpmn:Lane") && (i.hover = Ai(r));
  });
}
vx.$inject = [
  "elementRegistry",
  "eventBus",
  "canvas"
];
function dk(e) {
  return e.create("bpmn:Category");
}
function hk(e) {
  return e.create("bpmn:CategoryValue");
}
function mk(e, t, n) {
  return pn(t.get("categoryValue"), e), e.$parent = t, pn(n.get("rootElements"), t), t.$parent = n, e;
}
function yk(e) {
  var t = e.$parent;
  return t && (rn(t.get("categoryValue"), e), e.$parent = null), e;
}
function gk(e) {
  var t = e.$parent;
  return t && (rn(t.get("rootElements"), e), e.$parent = null), e;
}
var uv = 770;
function hh(e, t, n, i, r, o) {
  r.invoke(le, this);
  function a() {
    return n.filter(function(_) {
      return A(_, "bpmn:Group");
    });
  }
  function c(_, x) {
    return _.some(function(w) {
      var D = he(w), O = D.categoryValueRef && D.categoryValueRef.$parent;
      return O === x;
    });
  }
  function l(_, x) {
    return _.some(function(w) {
      var D = he(w);
      return D.categoryValueRef === x;
    });
  }
  function u(_, x, w) {
    var D = a().filter(function(O) {
      return O.businessObject !== w;
    });
    x && !c(D, x) && gk(x), _ && !l(D, _) && yk(_);
  }
  function d(_, x) {
    return mk(_, x, t.getDefinitions());
  }
  function f(_, x) {
    var w = he(_), D = w.categoryValueRef;
    D || (D = w.categoryValueRef = x.categoryValue = x.categoryValue || hk(e));
    var O = D.$parent;
    O || (O = D.$parent = x.category = x.category || dk(e)), d(D, O, t.getDefinitions());
  }
  function y(_, x) {
    var w = x.category, D = x.categoryValue, O = he(_);
    D ? (O.categoryValueRef = null, u(D, w, O)) : u(null, O.categoryValueRef.$parent, O);
  }
  this.execute("label.create", function(_) {
    var x = _.context, w = x.labelTarget;
    A(w, "bpmn:Group") && f(w, x);
  }), this.revert("label.create", function(_) {
    var x = _.context, w = x.labelTarget;
    A(w, "bpmn:Group") && y(w, x);
  }), this.execute("shape.delete", function(_) {
    var x = _.context, w = x.shape, D = he(w);
    if (!(!A(w, "bpmn:Group") || w.labelTarget)) {
      var O = x.categoryValue = D.categoryValueRef, k;
      O && (k = x.category = O.$parent, u(O, k, D), D.categoryValueRef = null);
    }
  }), this.reverted("shape.delete", function(_) {
    var x = _.context, w = x.shape;
    if (!(!A(w, "bpmn:Group") || w.labelTarget)) {
      var D = x.category, O = x.categoryValue, k = he(w);
      O && (k.categoryValueRef = O, d(O, D));
    }
  }), this.execute("shape.create", function(_) {
    var x = _.context, w = x.shape;
    !A(w, "bpmn:Group") || w.labelTarget || he(w).categoryValueRef && f(w, x);
  }), this.reverted("shape.create", function(_) {
    var x = _.context, w = x.shape;
    !A(w, "bpmn:Group") || w.labelTarget || he(w).categoryValueRef && y(w, x);
  });
  function g(_, x) {
    var w = e.create(_.$type);
    return o.copyElement(_, w, null, x);
  }
  i.on("copyPaste.copyElement", uv, function(_) {
    var x = _.descriptor, w = _.element;
    if (!(!A(w, "bpmn:Group") || w.labelTarget)) {
      var D = he(w);
      if (D.categoryValueRef) {
        var O = D.categoryValueRef;
        x.categoryValue = g(O, !0), O.$parent && (x.category = g(O.$parent, !0));
      }
    }
  }), i.on("copyPaste.pasteElement", uv, function(_) {
    var x = _.descriptor, w = x.businessObject, D = x.categoryValue, O = x.category;
    D && (D = w.categoryValueRef = g(D)), O && (D.$parent = g(O)), delete x.category, delete x.categoryValue;
  });
}
hh.$inject = [
  "bpmnFactory",
  "bpmnjs",
  "elementRegistry",
  "eventBus",
  "injector",
  "moddleCopy"
];
Pe(hh, le);
function Qf(e, t, n, i) {
  var r, o, a, c, l;
  return r = (i.y - n.y) * (t.x - e.x) - (i.x - n.x) * (t.y - e.y), r == 0 ? null : (o = e.y - n.y, a = e.x - n.x, l = (i.x - n.x) * o - (i.y - n.y) * a, c = l / r, {
    x: Math.round(e.x + c * (t.x - e.x)),
    y: Math.round(e.y + c * (t.y - e.y))
  });
}
function _x(e) {
  function t(i, r, o) {
    var a = {
      x: o.x,
      y: o.y - 50
    }, c = {
      x: o.x - 50,
      y: o.y
    }, l = Qf(i, r, o, a), u = Qf(i, r, o, c), d;
    l && u ? pv(l, o) > pv(u, o) ? d = u : d = l : d = l || u, i.original = d;
  }
  function n(i) {
    var r = i.waypoints;
    t(
      r[0],
      r[1],
      Fe(i.source)
    ), t(
      r[r.length - 1],
      r[r.length - 2],
      Fe(i.target)
    );
  }
  e.on("bpmnElement.added", function(i) {
    var r = i.element;
    r.waypoints && n(r);
  });
}
_x.$inject = [
  "eventBus"
];
function pv(e, t) {
  return Math.sqrt(Math.pow(e.x - t.x, 2) + Math.pow(e.y - t.y, 2));
}
function mh(e) {
  le.call(this, e);
  var t = [
    "bpmn:Participant",
    "bpmn:Lane"
  ];
  this.executed(["shape.move", "shape.create", "shape.resize"], function(n) {
    var i = n.context.shape, r = he(i), o = bt(i);
    if (rt(r, t)) {
      var a = o.get("isHorizontal");
      a === void 0 && (a = !0), o.set("isHorizontal", a);
    }
  });
}
mh.$inject = ["eventBus"];
Pe(mh, le);
var bx = Math.sqrt, xx = Math.min, vk = Math.max, fv = Math.abs;
function dv(e) {
  return Math.pow(e, 2);
}
function Cs(e, t) {
  return bx(dv(e.x - t.x) + dv(e.y - t.y));
}
function _k(e, t) {
  var n = 0, i, r, o, a, c, l, u, d, f, y, g;
  for (n = 0; n < t.length - 1; n++) {
    if (i = t[n], r = t[n + 1], mv(i, r) ? u = [i] : (o = Cs(e, i), a = Cs(e, r), l = xx(o, a), u = bk(i, r, e, l)), u.length < 1)
      throw new Error("expected between [1, 2] circle -> line intersections");
    u.length === 1 && (d = {
      type: "bendpoint",
      position: u[0],
      segmentIndex: n,
      bendpointIndex: mv(i, u[0]) ? n : n + 1
    }), u.length === 2 && (c = Ek(u[0], u[1]), d = {
      type: "segment",
      position: c,
      segmentIndex: n,
      relativeLocation: Cs(i, c) / Cs(i, r)
    }), f = Cs(d.position, e), (!g || y > f) && (g = d, y = f);
  }
  return g;
}
function bk(e, t, n, i) {
  var r = t.x - e.x, o = t.y - e.y, a = n.x - e.x, c = n.y - e.y, l = r * r + o * o, u = r * a + o * c, d = a * a + c * c - i * i, f = u / l, y = d / l, g = f * f - y;
  if (g < 0 && g > -1e-6 && (g = 0), g < 0)
    return [];
  var _ = bx(g), x = -f + _, w = -f - _, D = {
    x: e.x - r * x,
    y: e.y - o * x
  };
  if (g === 0)
    return [D];
  var O = {
    x: e.x - r * w,
    y: e.y - o * w
  };
  return [D, O].filter(function(k) {
    return xk(k, e, t);
  });
}
function xk(e, t, n) {
  return hv(e.x, t.x, n.x) && hv(e.y, t.y, n.y);
}
function hv(e, t, n) {
  return e >= xx(t, n) - uu && e <= vk(t, n) + uu;
}
function Ek(e, t) {
  return {
    x: (e.x + t.x) / 2,
    y: (e.y + t.y) / 2
  };
}
var uu = 0.1;
function mv(e, t) {
  return fv(e.x - t.x) <= uu && fv(e.y - t.y) <= uu;
}
function wk(e, t, n, i) {
  var r = n.segmentIndex, o = t.length - e.length;
  if (i.segmentMove) {
    var a = i.segmentMove.segmentStartIndex, c = i.segmentMove.newSegmentStartIndex;
    return r === a ? c : r >= c ? r + o < c ? c : r + o : r;
  }
  if (i.bendpointMove) {
    var l = i.bendpointMove.insert, u = i.bendpointMove.bendpointIndex, d;
    if (o === 0)
      return r;
    if (r >= u && (d = l ? r + 1 : r - 1), r < u && (d = r, l && n.type !== "bendpoint" && u - 1 === r)) {
      var f = wx(t, u);
      f < n.relativeLocation && d++;
    }
    return d;
  }
  return o === 0 ? r : i.connectionStart && r === 0 ? 0 : i.connectionEnd && r === e.length - 2 ? t.length - 2 : Math.floor((t.length - 2) / 2);
}
function Ex(e, t, n, i) {
  var r = 0, o = 0, a = {
    point: e,
    delta: { x: 0, y: 0 }
  }, c = _k(e, n), l = c.segmentIndex, u = wk(n, t, c, i);
  if (u < 0 || u > t.length - 2 || u === null)
    return a;
  var d = yv(n, l), f = yv(t, u), y = c.position, g = Rk(d, y), _ = Sk(d, f);
  if (c.type === "bendpoint") {
    var x = t.length - n.length, w = c.bendpointIndex, D = n[w];
    if (t.indexOf(D) !== -1)
      return a;
    if (x === 0) {
      var O = t[w];
      return r = O.x - c.position.x, o = O.y - c.position.y, {
        delta: {
          x: r,
          y: o
        },
        point: {
          x: e.x + r,
          y: e.y + o
        }
      };
    }
    x < 0 && w !== 0 && w < n.length - 1 && (g = wx(n, w));
  }
  var k = {
    x: (f[1].x - f[0].x) * g + f[0].x,
    y: (f[1].y - f[0].y) * g + f[0].y
  }, P = mT({
    x: e.x - y.x,
    y: e.y - y.y
  }, _);
  return r = k.x + P.x - e.x, o = k.y + P.y - e.y, {
    point: Tr(k),
    delta: Tr({
      x: r,
      y: o
    })
  };
}
function wx(e, t) {
  var n = au(e[t - 1], e[t]), i = au(e[t], e[t + 1]), r = n / (n + i);
  return r;
}
function Sk(e, t) {
  var n = Fg(e), i = Fg(t);
  return i - n;
}
function yv(e, t) {
  return [e[t], e[t + 1]];
}
function Rk(e, t) {
  var n = au(e[0], e[1]), i = au(e[0], t);
  return n === 0 ? 0 : i / n;
}
function Ck(e, t, n, i) {
  var r = Fe(e);
  return Ex(r, t, n, i).delta;
}
function uc(e, t, n) {
  var i = Ls(t), r = Ls(n), o = Vi(e, i), a = {
    x: o.x * (n.width / t.width),
    y: o.y * (n.height / t.height)
  };
  return Tr({
    x: r.x + a.x,
    y: r.y + a.y
  });
}
function gv(e, t, n) {
  var i = Ls(e), r = Ls(t), o = Ls(n), a = Vi(e, i), c = Vi(i, r), l = Ak(i, t, n);
  if (l)
    return l;
  var u = {
    x: c.x * (n.width / t.width),
    y: c.y * (n.height / t.height)
  }, d = {
    x: o.x + u.x,
    y: o.y + u.y
  };
  return Tr({
    x: d.x + a.x - e.x,
    y: d.y + a.y - e.y
  });
}
function Ak(e, t, n) {
  var i = Le(t), r = Le(n);
  if (Pk(i, r))
    return null;
  var o = Bn(t, e), a, c, l;
  if (o === "top")
    a = {
      x: 0,
      y: r.bottom - i.bottom
    };
  else if (o === "bottom")
    a = {
      x: 0,
      y: r.top - i.top
    };
  else if (o === "right")
    a = {
      x: r.left - i.left,
      y: 0
    };
  else if (o === "left")
    a = {
      x: r.right - i.right,
      y: 0
    };
  else
    return null;
  return c = {
    x: e.x + a.x,
    y: e.y + a.y
  }, l = Bn(n, c), l !== o ? null : a;
}
function Pk(e, t) {
  return Tk(e, t) || kk(e, t);
}
function Tk(e, t) {
  return e.right !== t.right && e.left !== t.left;
}
function kk(e, t) {
  return e.top !== t.top && e.bottom !== t.bottom;
}
var vv = "name", _v = "text";
function yh(e, t, n, i) {
  le.call(this, e), this.postExecute("element.updateProperties", r), this.postExecute("element.updateModdleProperties", (a) => {
    he(a.context.element) === a.context.moddleElement && r(a);
  });
  function r(a) {
    var c = a.context, l = c.element, u = c.properties;
    if (vv in u && t.updateLabel(l, u[vv]), _v in u && A(l, "bpmn:TextAnnotation")) {
      var d = i.getTextAnnotationBounds(
        {
          x: l.x,
          y: l.y,
          width: l.width,
          height: l.height
        },
        u[_v] || ""
      );
      t.updateLabel(l, u.text, d);
    }
  }
  this.postExecute(["shape.create", "connection.create"], function(a) {
    var c = a.context, l = c.hints || {};
    if (l.createElementsBehavior !== !1) {
      var u = c.shape || c.connection;
      vt(u) || !Zo(u) || ki(u) && t.updateLabel(u, ki(u));
    }
  }), this.postExecute("shape.delete", function(a) {
    var c = a.context, l = c.labelTarget, u = c.hints || {};
    l && u.unsetLabel !== !1 && t.updateLabel(l, null, null, { removeShape: !1 });
  });
  function o(a) {
    var c = a.context, l = c.connection, u = l.label, d = G({}, c.hints), f = c.newWaypoints || l.waypoints, y = c.oldWaypoints;
    return typeof d.startChanged > "u" && (d.startChanged = !!d.connectionStart), typeof d.endChanged > "u" && (d.endChanged = !!d.connectionEnd), Ck(u, f, y, d);
  }
  this.postExecute([
    "connection.layout",
    "connection.updateWaypoints"
  ], function(a) {
    var c = a.context, l = c.hints || {};
    if (l.labelBehavior !== !1) {
      var u = c.connection, d = u.label, f;
      !d || !d.parent || (f = o(a), t.moveShape(d, f));
    }
  }), this.postExecute(["shape.replace"], function(a) {
    var c = a.context, l = c.newShape, u = c.oldShape, d = he(l);
    d && Zo(d) && u.label && l.label && (l.label.x = u.label.x, l.label.y = u.label.y);
  }), this.postExecute("shape.resize", function(a) {
    var c = a.context, l = c.shape, u = c.newBounds, d = c.oldBounds;
    if (Su(l)) {
      var f = l.label, y = Fe(f), g = Ok(d), _ = Dk(y, g), x = Mk(_, d, u);
      t.moveShape(f, x);
    }
  });
}
Pe(yh, le);
yh.$inject = [
  "eventBus",
  "modeling",
  "bpmnFactory",
  "textRenderer"
];
function Mk(e, t, n) {
  var i = uc(e, t, n);
  return Tr(Vi(i, e));
}
function Dk(e, t) {
  if (t.length) {
    var n = Nk(e, t);
    return Xd(e, n);
  }
}
function Ok(e) {
  return [
    [
      // top
      {
        x: e.x,
        y: e.y
      },
      {
        x: e.x + (e.width || 0),
        y: e.y
      }
    ],
    [
      // right
      {
        x: e.x + (e.width || 0),
        y: e.y
      },
      {
        x: e.x + (e.width || 0),
        y: e.y + (e.height || 0)
      }
    ],
    [
      // bottom
      {
        x: e.x,
        y: e.y + (e.height || 0)
      },
      {
        x: e.x + (e.width || 0),
        y: e.y + (e.height || 0)
      }
    ],
    [
      // left
      {
        x: e.x,
        y: e.y
      },
      {
        x: e.x,
        y: e.y + (e.height || 0)
      }
    ]
  ];
}
function Nk(e, t) {
  var n = t.map(function(r) {
    return {
      line: r,
      distance: Qb(e, r)
    };
  }), i = Gi(n, "distance");
  return i[0].line;
}
function Bk(e, t, n, i) {
  return Ex(e, t, n, i).point;
}
function gh(e, t) {
  le.call(this, e);
  function n(i, r) {
    var o = i.context, a = o.connection, c = G({}, o.hints), l = o.newWaypoints || a.waypoints, u = o.oldWaypoints;
    return typeof c.startChanged > "u" && (c.startChanged = !!c.connectionStart), typeof c.endChanged > "u" && (c.endChanged = !!c.connectionEnd), Bk(r, l, u, c);
  }
  this.postExecute([
    "connection.layout",
    "connection.updateWaypoints"
  ], function(i) {
    var r = i.context, o = r.connection, a = o.outgoing, c = o.incoming;
    c.forEach(function(l) {
      var u = l.waypoints[l.waypoints.length - 1], d = n(i, u), f = [].concat(l.waypoints.slice(0, -1), [d]);
      t.updateWaypoints(l, f);
    }), a.forEach(function(l) {
      var u = l.waypoints[0], d = n(i, u), f = [].concat([d], l.waypoints.slice(1));
      t.updateWaypoints(l, f);
    });
  }), this.postExecute([
    "connection.move"
  ], function(i) {
    var r = i.context, o = r.connection, a = o.outgoing, c = o.incoming, l = r.delta;
    c.forEach(function(u) {
      var d = u.waypoints[u.waypoints.length - 1], f = {
        x: d.x + l.x,
        y: d.y + l.y
      }, y = [].concat(u.waypoints.slice(0, -1), [f]);
      t.updateWaypoints(u, y);
    }), a.forEach(function(u) {
      var d = u.waypoints[0], f = {
        x: d.x + l.x,
        y: d.y + l.y
      }, y = [].concat([f], u.waypoints.slice(1));
      t.updateWaypoints(u, y);
    });
  });
}
Pe(gh, le);
gh.$inject = [
  "eventBus",
  "modeling"
];
function Wu(e, t, n) {
  var i = Uu(e), r = Rx(i, t), o = i[0];
  return r.length ? r[r.length - 1] : uc(o.original || o, n, t);
}
function Gu(e, t, n) {
  var i = Uu(e), r = Rx(i, t), o = i[i.length - 1];
  return r.length ? r[0] : uc(o.original || o, n, t);
}
function vh(e, t, n) {
  var i = Uu(e), r = Sx(t, n), o = i[0];
  return uc(o.original || o, r, t);
}
function _h(e, t, n) {
  var i = Uu(e), r = Sx(t, n), o = i[i.length - 1];
  return uc(o.original || o, r, t);
}
function Sx(e, t) {
  return {
    x: e.x - t.x,
    y: e.y - t.y,
    width: e.width,
    height: e.height
  };
}
function Uu(e) {
  var t = e.waypoints;
  if (!t.length)
    throw new Error("connection#" + e.id + ": no waypoints");
  return t;
}
function Rx(e, t) {
  var n = mn(e, Ik);
  return et(n, function(i) {
    return Lk(i, t);
  });
}
function Lk(e, t) {
  return Bn(t, e, 1) === "intersect";
}
function Ik(e) {
  return e.original || e;
}
function bh(e, t) {
  le.call(this, e), this.postExecute("shape.replace", function(n) {
    var i = n.oldShape, r = n.newShape;
    if ($k(i, r)) {
      var o = jk(i);
      o.incoming.forEach(function(a) {
        var c = Gu(a, r, i);
        t.reconnectEnd(a, r, c);
      }), o.outgoing.forEach(function(a) {
        var c = Wu(a, r, i);
        t.reconnectStart(a, r, c);
      });
    }
  }, !0);
}
bh.$inject = ["eventBus", "modeling"];
Pe(bh, le);
function $k(e, t) {
  return A(e, "bpmn:Participant") && pt(e) && A(t, "bpmn:Participant") && !pt(t);
}
function jk(e) {
  var t = ec([e], !1), n = [], i = [];
  return t.forEach(function(r) {
    r !== e && (r.incoming.forEach(function(o) {
      A(o, "bpmn:MessageFlow") && n.push(o);
    }), r.outgoing.forEach(function(o) {
      A(o, "bpmn:MessageFlow") && i.push(o);
    }));
  }, []), {
    incoming: n,
    outgoing: i
  };
}
const Fk = [
  "bpmn:MessageEventDefinition",
  "bpmn:TimerEventDefinition",
  "bpmn:EscalationEventDefinition",
  "bpmn:ConditionalEventDefinition",
  "bpmn:SignalEventDefinition"
];
function Cx(e) {
  const t = he(e);
  if (!A(t, "bpmn:BoundaryEvent") && !(A(t, "bpmn:StartEvent") && Nn(t.$parent)))
    return !1;
  const n = t.get("eventDefinitions");
  return !n || !n.length ? !1 : Fk.some((i) => A(n[0], i));
}
function Ax(e) {
  return A(e, "bpmn:BoundaryEvent") ? "cancelActivity" : "isInterrupting";
}
function xh(e, t) {
  e.invoke(le, this), this.postExecuted("shape.replace", function(n) {
    const i = n.context.oldShape, r = n.context.newShape, o = n.context.hints;
    if (!Cx(r))
      return;
    const a = Ax(r);
    if (o.targetElement && o.targetElement[a] !== void 0)
      return;
    const l = he(i).get(a), u = he(r).get(a);
    l !== u && t.updateProperties(r, {
      [a]: l
    });
  });
}
xh.$inject = ["injector", "modeling"];
Pe(xh, le);
function Eh(e, t) {
  le.call(this, e), this.preExecute("shape.resize", function(n) {
    var i = n.shape, r = bt(i), o = r && r.get("label"), a = o && o.get("bounds");
    a && t.updateModdleProperties(i, o, {
      bounds: void 0
    });
  }, !0);
}
Pe(Eh, le);
Eh.$inject = [
  "eventBus",
  "modeling"
];
function wh(e, t, n) {
  le.call(this, e), this.preExecute("shape.delete", function(i) {
    var r = i.context.shape;
    if (!(r.incoming.length !== 1 || r.outgoing.length !== 1)) {
      var o = r.incoming[0], a = r.outgoing[0];
      if (!(!A(o, "bpmn:SequenceFlow") || !A(a, "bpmn:SequenceFlow")) && t.canConnect(o.source, a.target, o)) {
        var c = Hk(o.waypoints, a.waypoints);
        n.reconnectEnd(o, a.target, c);
      }
    }
  });
}
Pe(wh, le);
wh.$inject = [
  "eventBus",
  "bpmnRules",
  "modeling"
];
function Ta(e) {
  return e.original || e;
}
function Hk(e, t) {
  var n = Qf(
    Ta(e[e.length - 2]),
    Ta(e[e.length - 1]),
    Ta(t[1]),
    Ta(t[0])
  );
  return n ? [].concat(
    e.slice(0, e.length - 1),
    [n],
    t.slice(1)
  ) : [
    Ta(e[0]),
    Ta(t[t.length - 1])
  ];
}
function Sh(e, t) {
  le.call(this, e), this.preExecute("shape.delete", function(n) {
    var i = n.shape, r = i.parent;
    A(i, "bpmn:Participant") && (n.collaborationRoot = r);
  }, !0), this.postExecute("shape.delete", function(n) {
    var i = n.collaborationRoot;
    i && !i.businessObject.participants.length && t.makeProcess();
  }, !0);
}
Sh.$inject = ["eventBus", "modeling"];
Pe(Sh, le);
function Rh(e, t, n, i) {
  le.call(this, e);
  var r = i.get("dragging", !1);
  function o(l) {
    var u = l.source, d = l.target, f = l.parent;
    if (f) {
      var y, g;
      A(l, "bpmn:SequenceFlow") && (n.canConnectSequenceFlow(u, d) || (g = !0), n.canConnectMessageFlow(u, d) && (y = "bpmn:MessageFlow")), A(l, "bpmn:MessageFlow") && (n.canConnectMessageFlow(u, d) || (g = !0), n.canConnectSequenceFlow(u, d) && (y = "bpmn:SequenceFlow")), g && t.removeConnection(l), y && t.connect(u, d, {
        type: y,
        waypoints: l.waypoints.slice()
      });
    }
  }
  function a(l) {
    var u = l.context, d = u.connection, f = u.newSource || d.source, y = u.newTarget || d.target, g, _;
    g = n.canConnect(f, y), !(!g || g.type === d.type) && (_ = t.connect(f, y, {
      type: g.type,
      associationDirection: g.associationDirection,
      waypoints: d.waypoints.slice()
    }), d.parent && t.removeConnection(d), u.connection = _, r && c(d, _));
  }
  function c(l, u) {
    var d = r.context(), f = d && d.payload.previousSelection, y;
    !f || !f.length || (y = f.indexOf(l), y !== -1 && f.splice(y, 1, u));
  }
  this.postExecuted("elements.move", function(l) {
    var u = l.closure, d = u.allConnections;
    z(d, o);
  }, !0), this.preExecute("connection.reconnect", a), this.postExecuted("element.updateProperties", function(l) {
    var u = l.context, d = u.properties, f = u.element, y = f.businessObject, g;
    d.default && (g = gt(
      f.outgoing,
      zi({ id: f.businessObject.default.id })
    ), g && t.updateProperties(g, { conditionExpression: void 0 })), d.conditionExpression && y.sourceRef.default === y && t.updateProperties(f.source, { default: void 0 });
  });
}
Pe(Rh, le);
Rh.$inject = [
  "eventBus",
  "modeling",
  "bpmnRules",
  "injector"
];
function Yu(e, t, n, i, r, o) {
  i.invoke(le, this), this._bpmnReplace = e, this._elementRegistry = n, this._selection = o, this.postExecuted(["elements.create"], 500, function(a) {
    var c = a.context, l = c.parent, u = c.elements, d = li(u, function(f, y) {
      var g = t.canReplace([y], y.host || y.parent || l);
      return g ? f.concat(g.replacements) : f;
    }, []);
    d.length && this._replaceElements(u, d);
  }, this), this.postExecuted(["elements.move"], 500, function(a) {
    var c = a.context, l = c.newParent, u = c.newHost, d = [];
    z(c.closure.topLevel, function(y) {
      Nn(y) ? d = d.concat(y.children) : d = d.concat(y);
    }), d.length === 1 && u && (l = u);
    var f = t.canReplace(d, l);
    f && this._replaceElements(d, f.replacements, u);
  }, this), this.postExecute(["shape.replace"], 1500, function(a) {
    var c = a.context, l = c.oldShape, u = c.newShape, d = l.attachers, f;
    d && d.length && (f = t.canReplace(d, u), this._replaceElements(d, f.replacements));
  }, this), this.postExecuted(["shape.replace"], 1500, function(a) {
    var c = a.context, l = c.oldShape, u = c.newShape;
    r.unclaimId(l.businessObject.id, l.businessObject), r.updateProperties(u, { id: l.id });
  });
}
Pe(Yu, le);
Yu.prototype._replaceElements = function(e, t) {
  var n = this._elementRegistry, i = this._bpmnReplace, r = this._selection;
  z(t, function(o) {
    var a = {
      type: o.newElementType
    }, c = n.get(o.oldElementId), l = e.indexOf(c);
    e[l] = i.replaceElement(c, a, { select: !1 });
  }), t && r.select(e);
};
Yu.$inject = [
  "bpmnReplace",
  "bpmnRules",
  "elementRegistry",
  "injector",
  "modeling",
  "selection"
];
var zk = 1500, Vk = { width: 140, height: 120 }, Ch = { width: 300, height: 60 }, Ah = { width: 60, height: 300 }, Wl = { width: 300, height: 150 }, Gl = { width: 150, height: 300 }, Px = { width: 140, height: 120 }, Tx = { width: 50, height: 30 };
function kx(e) {
  e.on("resize.start", zk, function(t) {
    var n = t.context, i = n.shape, r = n.direction, o = n.balanced;
    (A(i, "bpmn:Lane") || A(i, "bpmn:Participant")) && (n.resizeConstraints = Kk(i, r, o)), A(i, "bpmn:SubProcess") && pt(i) && (n.minDimensions = Px), A(i, "bpmn:TextAnnotation") && (n.minDimensions = Tx);
  });
}
kx.$inject = ["eventBus"];
var Jr = Math.abs, Wk = Math.min, Gk = Math.max;
function Mx(e, t, n, i) {
  var r = e[t];
  e[t] = r === void 0 ? n : i(n, r);
}
function ka(e, t, n) {
  return Mx(e, t, n, Wk);
}
function Ma(e, t, n) {
  return Mx(e, t, n, Gk);
}
var Uk = { top: 20, left: 50, right: 20, bottom: 20 }, Yk = { top: 50, left: 20, right: 20, bottom: 20 };
function Kk(e, t, n) {
  var i = Ai(e), r = !0, o = !0, a = zu(i, [i]), c = Le(e), l = {}, u = {}, d = An(e), f = d ? Ch : Ah;
  /n/.test(t) ? u.top = c.bottom - f.height : /e/.test(t) ? u.right = c.left + f.width : /s/.test(t) ? u.bottom = c.top + f.height : /w/.test(t) && (u.left = c.right - f.width), a.forEach(function(_) {
    var x = Le(_);
    /n/.test(t) && (d && x.top < c.top - 10 && (r = !1), n && Jr(c.top - x.bottom) < 10 && Ma(l, "top", x.top + f.height), Jr(c.top - x.top) < 5 && ka(u, "top", x.bottom - f.height)), /e/.test(t) && (!d && x.right > c.right + 10 && (o = !1), n && Jr(c.right - x.left) < 10 && ka(l, "right", x.right - f.width), Jr(c.right - x.right) < 5 && Ma(u, "right", x.left + f.width)), /s/.test(t) && (d && x.bottom > c.bottom + 10 && (o = !1), n && Jr(c.bottom - x.top) < 10 && ka(l, "bottom", x.bottom - f.height), Jr(c.bottom - x.bottom) < 5 && Ma(u, "bottom", x.top + f.height)), /w/.test(t) && (!d && x.left < c.left - 10 && (r = !1), n && Jr(c.left - x.right) < 10 && Ma(l, "left", x.left + f.width), Jr(c.left - x.left) < 5 && ka(u, "left", x.right - f.width));
  });
  var y = i.children.filter(function(_) {
    return !_.hidden && !_.waypoints && (A(_, "bpmn:FlowElement") || A(_, "bpmn:Artifact"));
  }), g = d ? Uk : Yk;
  return y.forEach(function(_) {
    var x = Le(_);
    r && /n/.test(t) && ka(u, "top", x.top - g.top), o && /e/.test(t) && Ma(u, "right", x.right + g.right), o && /s/.test(t) && Ma(u, "bottom", x.bottom + g.bottom), r && /w/.test(t) && ka(u, "left", x.left - g.left);
  }), {
    min: u,
    max: l
  };
}
var bv = 1001;
function Dx(e, t) {
  e.on("resize.start", bv + 500, function(n) {
    var i = n.context, r = i.shape;
    (A(r, "bpmn:Lane") || A(r, "bpmn:Participant")) && (i.balanced = !zs(n));
  }), e.on("resize.end", bv, function(n) {
    var i = n.context, r = i.shape, o = i.canExecute, a = i.newBounds;
    if (A(r, "bpmn:Lane") || A(r, "bpmn:Participant"))
      return o && (a = E_(a), t.resizeLane(r, a, i.balanced)), !1;
  });
}
Dx.$inject = [
  "eventBus",
  "modeling"
];
var qk = 500;
function Ph(e, t, n, i, r) {
  n.invoke(le, this);
  function o(d) {
    return rt(d, ["bpmn:ReceiveTask", "bpmn:SendTask"]) || Xk(d, [
      "bpmn:ErrorEventDefinition",
      "bpmn:EscalationEventDefinition",
      "bpmn:MessageEventDefinition",
      "bpmn:SignalEventDefinition"
    ]);
  }
  function a(d) {
    var f = e.getDefinitions(), y = f.get("rootElements");
    return !!gt(y, zi({ id: d.id }));
  }
  function c(d) {
    if (A(d, "bpmn:ErrorEventDefinition"))
      return "errorRef";
    if (A(d, "bpmn:EscalationEventDefinition"))
      return "escalationRef";
    if (A(d, "bpmn:MessageEventDefinition"))
      return "messageRef";
    if (A(d, "bpmn:SignalEventDefinition"))
      return "signalRef";
  }
  function l(d) {
    if (rt(d, ["bpmn:ReceiveTask", "bpmn:SendTask"]))
      return d.get("messageRef");
    var f = d.get("eventDefinitions"), y = f[0];
    return y.get(c(y));
  }
  function u(d, f) {
    if (rt(d, ["bpmn:ReceiveTask", "bpmn:SendTask"]))
      return d.set("messageRef", f);
    var y = d.get("eventDefinitions"), g = y[0];
    return g.set(c(g), f);
  }
  this.executed([
    "shape.create",
    "element.updateProperties",
    "element.updateModdleProperties"
  ], function(d) {
    var f = d.shape || d.element;
    if (o(f)) {
      var y = he(f), g = l(y), _;
      g && !a(g) && (_ = e.getDefinitions().get("rootElements"), pn(_, g), d.addedRootElement = g);
    }
  }, !0), this.reverted([
    "shape.create",
    "element.updateProperties",
    "element.updateModdleProperties"
  ], function(d) {
    var f = d.addedRootElement;
    if (f) {
      var y = e.getDefinitions().get("rootElements");
      rn(y, f);
    }
  }, !0), t.on("copyPaste.copyElement", function(d) {
    var f = d.descriptor, y = d.element;
    if (!(y.labelTarget || !o(y))) {
      var g = he(y), _ = l(g);
      _ && (f.referencedRootElement = _);
    }
  }), t.on("copyPaste.pasteElement", qk, function(d) {
    var f = d.descriptor, y = f.businessObject, g = f.referencedRootElement;
    g && (a(g) || (g = i.copyElement(
      g,
      r.create(g.$type)
    )), u(y, g), delete f.referencedRootElement);
  });
}
Ph.$inject = [
  "bpmnjs",
  "eventBus",
  "injector",
  "moddleCopy",
  "bpmnFactory"
];
Pe(Ph, le);
function Xk(e, t) {
  return nt(t) || (t = [t]), Dr(t, function(n) {
    return sc(e, n);
  });
}
var Ox = Math.max;
function Nx(e) {
  e.on("spaceTool.getMinDimensions", function(t) {
    var n = t.shapes, i = t.axis, r = t.start, o = {};
    return z(n, function(a) {
      var c = a.id;
      A(a, "bpmn:Participant") && (o[c] = Jk(a, i, r)), A(a, "bpmn:Lane") && (o[c] = An(a) ? Ch : Ah), A(a, "bpmn:SubProcess") && pt(a) && (o[c] = Px), A(a, "bpmn:TextAnnotation") && (o[c] = Tx), A(a, "bpmn:Group") && (o[c] = Vk);
    }), o;
  });
}
Nx.$inject = ["eventBus"];
function Zk(e) {
  return e === "x";
}
function Jk(e, t, n) {
  var i = An(e);
  if (!tM(e))
    return i ? Wl : Gl;
  var r = Zk(t), o = {};
  return r ? i ? o = Wl : o = {
    width: eM(e, n, r),
    height: Gl.height
  } : i ? o = {
    width: Wl.width,
    height: Qk(e, n, r)
  } : o = Gl, o;
}
function Qk(e, t, n) {
  var i;
  return i = nM(e, t, n), Ox(Wl.height, i);
}
function eM(e, t, n) {
  var i;
  return i = iM(e, t, n), Ox(Gl.width, i);
}
function tM(e) {
  return !!vo(e).length;
}
function nM(e, t, n) {
  var i = vo(e), r;
  return r = Th(i, t, n), e.height - r.height + Ch.height;
}
function iM(e, t, n) {
  var i = vo(e), r;
  return r = Th(i, t, n), e.width - r.width + Ah.width;
}
function Th(e, t, n) {
  var i, r, o;
  for (i = 0; i < e.length; i++)
    if (r = e[i], !n && t >= r.y && t <= r.y + r.height || n && t >= r.x && t <= r.x + r.width)
      return o = vo(r), o.length ? Th(o, t, n) : r;
}
var xv = 400, rM = 600, Ev = {
  x: 180,
  y: 160
};
function _o(e, t, n, i, r, o, a) {
  le.call(this, t), this._canvas = e, this._eventBus = t, this._modeling = n, this._elementFactory = i, this._bpmnFactory = r, this._bpmnjs = o, this._elementRegistry = a;
  var c = this;
  function l(f) {
    return A(f, "bpmn:SubProcess") && !pt(f);
  }
  function u(f) {
    var y = f.shape, g = f.newRootElement, _ = he(y);
    g = c._addDiagram(g || _), f.newRootElement = e.addRootElement(g);
  }
  function d(f) {
    var y = f.shape, g = he(y);
    c._removeDiagram(g);
    var _ = f.newRootElement = a.get(Ar(g));
    e.removeRootElement(_);
  }
  this.executed("shape.create", function(f) {
    var y = f.shape;
    l(y) && u(f);
  }, !0), this.postExecuted("shape.create", function(f) {
    var y = f.shape, g = f.newRootElement;
    !g || !y.children || (c._showRecursively(y.children), c._moveChildrenToShape(y, g));
  }, !0), this.reverted("shape.create", function(f) {
    var y = f.shape;
    l(y) && d(f);
  }, !0), this.preExecuted("shape.delete", function(f) {
    var y = f.shape;
    if (l(y)) {
      var g = a.get(Ar(y));
      g && n.removeElements(g.children.slice());
    }
  }, !0), this.executed("shape.delete", function(f) {
    var y = f.shape;
    l(y) && d(f);
  }, !0), this.reverted("shape.delete", function(f) {
    var y = f.shape;
    l(y) && u(f);
  }, !0), this.preExecuted("shape.replace", function(f) {
    var y = f.oldShape, g = f.newShape;
    !l(y) || !l(g) || (f.oldRoot = e.removeRootElement(Ar(y)));
  }, !0), this.postExecuted("shape.replace", function(f) {
    var y = f.newShape, g = f.oldRoot, _ = e.findRoot(Ar(y));
    if (!(!g || !_)) {
      var x = g.children;
      n.moveElements(x, { x: 0, y: 0 }, _);
    }
  }, !0), this.executed("element.updateProperties", function(f) {
    var y = f.element;
    if (A(y, "bpmn:SubProcess")) {
      var g = f.properties, _ = f.oldProperties, x = _.id, w = g.id;
      if (x !== w) {
        if (jl(y)) {
          a.updateId(y, jo(w)), a.updateId(x, w);
          return;
        }
        var D = a.get(jo(x));
        D && a.updateId(jo(x), jo(w));
      }
    }
  }, !0), this.reverted("element.updateProperties", function(f) {
    var y = f.element;
    if (A(y, "bpmn:SubProcess")) {
      var g = f.properties, _ = f.oldProperties, x = _.id, w = g.id;
      if (x !== w) {
        if (jl(y)) {
          a.updateId(y, jo(x)), a.updateId(w, x);
          return;
        }
        var D = a.get(jo(w));
        D && a.updateId(D, jo(x));
      }
    }
  }, !0), t.on("element.changed", function(f) {
    var y = f.element;
    if (jl(y)) {
      var g = y, _ = a.get(pg(g));
      !_ || _ === g || t.fire("element.changed", { element: _ });
    }
  }), this.executed("shape.toggleCollapse", xv, function(f) {
    var y = f.shape;
    A(y, "bpmn:SubProcess") && (pt(y) ? d(f) : (u(f), c._showRecursively(y.children)));
  }, !0), this.reverted("shape.toggleCollapse", xv, function(f) {
    var y = f.shape;
    A(y, "bpmn:SubProcess") && (pt(y) ? d(f) : (u(f), c._showRecursively(y.children)));
  }, !0), this.postExecuted("shape.toggleCollapse", rM, function(f) {
    var y = f.shape;
    if (A(y, "bpmn:SubProcess")) {
      var g = f.newRootElement;
      g && (pt(y) ? c._moveChildrenToShape(g, y) : c._moveChildrenToShape(y, g));
    }
  }, !0), t.on("copyPaste.createTree", function(f) {
    var y = f.element, g = f.children;
    if (l(y)) {
      var _ = Ar(y), x = a.get(_);
      x && g.push.apply(g, x.children);
    }
  }), t.on("copyPaste.copyElement", function(f) {
    var y = f.descriptor, g = f.element, _ = f.elements, x = g.parent, w = A(bt(x), "bpmndi:BPMNPlane");
    if (w) {
      var D = pg(x), O = gt(_, function(k) {
        return k.id === D;
      });
      O && (y.parent = O.id);
    }
  }), t.on("copyPaste.pasteElement", function(f) {
    var y = f.descriptor;
    y.parent && (l(y.parent) || y.parent.hidden) && (y.hidden = !0);
  });
}
Pe(_o, le);
_o.prototype._moveChildrenToShape = function(e, t) {
  var n = this._modeling, i = e.children, r;
  if (i) {
    i = i.concat(i.reduce(function(u, d) {
      return d.label && d.label.parent !== e ? u.concat(d.label) : u;
    }, []));
    var o = i.filter(function(u) {
      return !u.hidden;
    });
    if (!o.length) {
      n.moveElements(i, { x: 0, y: 0 }, t, { autoResize: !1 });
      return;
    }
    var a = nn(o);
    if (!t.x)
      r = {
        x: Ev.x - a.x,
        y: Ev.y - a.y
      };
    else {
      var c = Fe(t), l = Fe(a);
      r = {
        x: c.x - l.x,
        y: c.y - l.y
      };
    }
    n.moveElements(i, r, t, { autoResize: !1 });
  }
};
_o.prototype._showRecursively = function(e, t) {
  var n = this, i = [];
  return e.forEach(function(r) {
    r.hidden = !!t, i = i.concat(r), r.children && (i = i.concat(
      n._showRecursively(r.children, r.collapsed || t)
    ));
  }), i;
};
_o.prototype._addDiagram = function(e) {
  var t = this._bpmnjs, n = t.getDefinitions().diagrams;
  return e.businessObject || (e = this._createNewDiagram(e)), n.push(e.di.$parent), e;
};
_o.prototype._createNewDiagram = function(e) {
  var t = this._bpmnFactory, n = this._elementFactory, i = t.create("bpmndi:BPMNPlane", {
    bpmnElement: e
  }), r = t.create("bpmndi:BPMNDiagram", {
    plane: i
  });
  i.$parent = r;
  var o = n.createRoot({
    id: Ar(e),
    type: e.$type,
    di: i,
    businessObject: e,
    collapsed: !0
  });
  return o;
};
_o.prototype._removeDiagram = function(e) {
  var t = this._bpmnjs, n = t.getDefinitions().diagrams, i = gt(n, function(r) {
    return r.plane.bpmnElement.id === e.id;
  });
  return n.splice(n.indexOf(i), 1), i;
};
_o.$inject = [
  "canvas",
  "eventBus",
  "modeling",
  "elementFactory",
  "bpmnFactory",
  "bpmnjs",
  "elementRegistry"
];
function kh(e, t) {
  e.invoke(le, this), this.postExecuted("shape.replace", function(n) {
    var i = n.context.oldShape, r = n.context.newShape;
    if (!(!A(r, "bpmn:SubProcess") || !(A(i, "bpmn:Task") || A(i, "bpmn:CallActivity")) || !pt(r))) {
      var o = oM(r);
      t.createShape({ type: "bpmn:StartEvent" }, o, r);
    }
  });
}
kh.$inject = [
  "injector",
  "modeling"
];
Pe(kh, le);
function oM(e) {
  return {
    x: e.x + e.width / 6,
    y: e.y + e.height / 2
  };
}
function Mh(e) {
  le.call(this, e), this.preExecute("connection.create", function(t) {
    const { target: n } = t;
    A(n, "bpmn:TextAnnotation") && (t.parent = n.parent);
  }, !0), this.preExecute(["shape.create", "shape.resize", "elements.move"], function(t) {
    const n = t.shapes || [t.shape];
    n.length === 1 && A(n[0], "bpmn:TextAnnotation") && (t.hints = t.hints || {}, t.hints.autoResize = !1);
  }, !0);
}
Pe(Mh, le);
Mh.$inject = [
  "eventBus"
];
function Dh(e, t) {
  le.call(this, e), this.postExecuted("shape.toggleCollapse", 1500, function(n) {
    var i = n.shape;
    if (pt(i))
      return;
    var r = ec(i);
    r.forEach(function(a) {
      var c = a.incoming.slice(), l = a.outgoing.slice();
      z(c, function(u) {
        o(u, !0);
      }), z(l, function(u) {
        o(u, !1);
      });
    });
    function o(a, c) {
      r.indexOf(a.source) !== -1 && r.indexOf(a.target) !== -1 || (c ? t.reconnectEnd(a, i, Fe(i)) : t.reconnectStart(a, i, Fe(i)));
    }
  }, !0);
}
Pe(Dh, le);
Dh.$inject = [
  "eventBus",
  "modeling"
];
var rf = 500;
function Oh(e, t, n) {
  le.call(this, e);
  function i(a) {
    a.length && a.forEach(function(c) {
      c.type === "label" && !c.businessObject.name && (c.hidden = !0);
    });
  }
  function r(a, c) {
    var l = a.children, u = c, d, f;
    return d = aM(l).concat([a]), f = gx(d), f ? (u.width = Math.max(f.width, u.width), u.height = Math.max(f.height, u.height), u.x = f.x + (f.width - u.width) / 2, u.y = f.y + (f.height - u.height) / 2) : (u.x = a.x + (a.width - u.width) / 2, u.y = a.y + (a.height - u.height) / 2), u;
  }
  function o(a, c) {
    return {
      x: a.x + (a.width - c.width) / 2,
      y: a.y + (a.height - c.height) / 2,
      width: c.width,
      height: c.height
    };
  }
  this.executed(["shape.toggleCollapse"], rf, function(a) {
    var c = a.context, l = c.shape;
    A(l, "bpmn:SubProcess") && (l.collapsed ? bt(l).isExpanded = !1 : (i(l.children), bt(l).isExpanded = !0));
  }), this.reverted(["shape.toggleCollapse"], rf, function(a) {
    var c = a.context, l = c.shape;
    l.collapsed ? bt(l).isExpanded = !1 : bt(l).isExpanded = !0;
  }), this.postExecuted(["shape.toggleCollapse"], rf, function(a) {
    var c = a.context.shape, l = t.getDefaultSize(c), u;
    c.collapsed ? u = o(c, l) : u = r(c, l), n.resizeShape(c, u, null, {
      autoResize: c.collapsed ? !1 : "nwse"
    });
  });
}
Pe(Oh, le);
Oh.$inject = [
  "eventBus",
  "elementFactory",
  "modeling"
];
function aM(e) {
  return e.filter(function(t) {
    return !t.hidden;
  });
}
function Nh(e, t, n, i) {
  t.invoke(le, this), this.preExecute("shape.delete", function(r) {
    var o = r.context, a = o.shape, c = a.businessObject;
    vt(a) || (A(a, "bpmn:Participant") && pt(a) && n.ids.unclaim(c.processRef.id), i.unclaimId(c.id, c));
  }), this.preExecute("connection.delete", function(r) {
    var o = r.context, a = o.connection, c = a.businessObject;
    i.unclaimId(c.id, c);
  }), this.preExecute("canvas.updateRoot", function() {
    var r = e.getRootElement(), o = r.businessObject;
    A(r, "bpmn:Collaboration") && n.ids.unclaim(o.id);
  });
}
Pe(Nh, le);
Nh.$inject = ["canvas", "injector", "moddle", "modeling"];
function Bh(e, t) {
  le.call(this, e), this.preExecute("connection.delete", function(n) {
    var i = n.context, r = i.connection, o = r.source;
    sM(r, o) && t.updateProperties(o, {
      default: null
    });
  });
}
Pe(Bh, le);
Bh.$inject = [
  "eventBus",
  "modeling"
];
function sM(e, t) {
  if (!A(e, "bpmn:SequenceFlow"))
    return !1;
  var n = he(t), i = he(e);
  return n.get("default") === i;
}
var cM = 500, lM = 5e3;
function Lh(e, t) {
  le.call(this, e);
  var n;
  function i() {
    return n = n || new uM(), n.enter(), n;
  }
  function r() {
    if (!n)
      throw new Error("out of bounds release");
    return n;
  }
  function o() {
    if (!n)
      throw new Error("out of bounds release");
    var c = n.leave();
    return c && (t.updateLaneRefs(n.flowNodes, n.lanes), n = null), c;
  }
  var a = [
    "spaceTool",
    "lane.add",
    "lane.resize",
    "lane.split",
    "elements.create",
    "elements.delete",
    "elements.move",
    "shape.create",
    "shape.delete",
    "shape.move",
    "shape.resize"
  ];
  this.preExecute(a, lM, function(c) {
    i();
  }), this.postExecuted(a, cM, function(c) {
    o();
  }), this.preExecute([
    "shape.create",
    "shape.move",
    "shape.delete",
    "shape.resize"
  ], function(c) {
    var l = c.context, u = l.shape, d = r();
    u.labelTarget || (A(u, "bpmn:Lane") && d.addLane(u), A(u, "bpmn:FlowNode") && d.addFlowNode(u));
  });
}
Lh.$inject = [
  "eventBus",
  "modeling"
];
Pe(Lh, le);
function uM() {
  this.flowNodes = [], this.lanes = [], this.counter = 0, this.addLane = function(e) {
    this.lanes.push(e);
  }, this.addFlowNode = function(e) {
    this.flowNodes.push(e);
  }, this.enter = function() {
    this.counter++;
  }, this.leave = function() {
    return this.counter--, !this.counter;
  };
}
const pM = {
  __init__: [
    "adaptiveLabelPositioningBehavior",
    "appendBehavior",
    "associationBehavior",
    "attachEventBehavior",
    "boundaryEventBehavior",
    "compensateBoundaryEventBehaviour",
    "createBehavior",
    "createDataObjectBehavior",
    "createParticipantBehavior",
    "dataInputAssociationBehavior",
    "dataStoreBehavior",
    "deleteLaneBehavior",
    "detachEventBehavior",
    "dropOnFlowBehavior",
    "eventBasedGatewayBehavior",
    "fixHoverBehavior",
    "groupBehavior",
    "importDockingFix",
    "isHorizontalFix",
    "labelBehavior",
    "layoutConnectionBehavior",
    "messageFlowBehavior",
    "nonInterruptingBehavior",
    "removeElementBehavior",
    "removeEmbeddedLabelBoundsBehavior",
    "removeParticipantBehavior",
    "replaceConnectionBehavior",
    "replaceElementBehaviour",
    "resizeBehavior",
    "resizeLaneBehavior",
    "rootElementReferenceBehavior",
    "spaceToolBehavior",
    "subProcessPlaneBehavior",
    "subProcessStartEventBehavior",
    "textAnnotationBehavior",
    "toggleCollapseConnectionBehaviour",
    "toggleElementCollapseBehaviour",
    "unclaimIdBehavior",
    "updateFlowNodeRefsBehavior",
    "unsetDefaultFlowBehavior"
  ],
  adaptiveLabelPositioningBehavior: ["type", th],
  appendBehavior: ["type", nh],
  associationBehavior: ["type", ih],
  attachEventBehavior: ["type", Fu],
  boundaryEventBehavior: ["type", rh],
  compensateBoundaryEventBehaviour: ["type", oh],
  createBehavior: ["type", ah],
  createDataObjectBehavior: ["type", sh],
  createParticipantBehavior: ["type", ch],
  dataInputAssociationBehavior: ["type", lh],
  dataStoreBehavior: ["type", uh],
  deleteLaneBehavior: ["type", ph],
  detachEventBehavior: ["type", Vu],
  dropOnFlowBehavior: ["type", fh],
  eventBasedGatewayBehavior: ["type", dh],
  fixHoverBehavior: ["type", vx],
  groupBehavior: ["type", hh],
  importDockingFix: ["type", _x],
  isHorizontalFix: ["type", mh],
  labelBehavior: ["type", yh],
  layoutConnectionBehavior: ["type", gh],
  messageFlowBehavior: ["type", bh],
  nonInterruptingBehavior: ["type", xh],
  removeElementBehavior: ["type", wh],
  removeEmbeddedLabelBoundsBehavior: ["type", Eh],
  removeParticipantBehavior: ["type", Sh],
  replaceConnectionBehavior: ["type", Rh],
  replaceElementBehaviour: ["type", Yu],
  resizeBehavior: ["type", kx],
  resizeLaneBehavior: ["type", Dx],
  rootElementReferenceBehavior: ["type", Ph],
  spaceToolBehavior: ["type", Nx],
  subProcessPlaneBehavior: ["type", _o],
  subProcessStartEventBehavior: ["type", kh],
  textAnnotationBehavior: ["type", Mh],
  toggleCollapseConnectionBehaviour: ["type", Dh],
  toggleElementCollapseBehaviour: ["type", Oh],
  unclaimIdBehavior: ["type", Nh],
  unsetDefaultFlowBehavior: ["type", Bh],
  updateFlowNodeRefsBehavior: ["type", Lh]
};
function Bx(e, t) {
  var n = Bn(e, t, -15);
  return n !== "intersect" ? n : null;
}
function Tn(e) {
  Di.call(this, e);
}
Pe(Tn, Di);
Tn.$inject = ["eventBus"];
Tn.prototype.init = function() {
  this.addRule("connection.start", function(e) {
    var t = e.source;
    return fM(t);
  }), this.addRule("connection.create", function(e) {
    var t = e.source, n = e.target, i = e.hints || {}, r = i.targetParent, o = i.targetAttach;
    if (o)
      return !1;
    r && (n.parent = r);
    try {
      return Ul(t, n);
    } finally {
      r && (n.parent = null);
    }
  }), this.addRule("connection.reconnect", function(e) {
    var t = e.connection, n = e.source, i = e.target;
    return Ul(n, i, t);
  }), this.addRule("connection.updateWaypoints", function(e) {
    return {
      type: e.connection.type
    };
  }), this.addRule("shape.resize", function(e) {
    var t = e.shape, n = e.newBounds;
    return Wx(t, n);
  }), this.addRule("elements.create", function(e) {
    var t = e.elements, n = e.position, i = e.target;
    return kt(i) && !pu(t, i) ? !1 : Wa(t, function(r) {
      return kt(r) ? Ul(r.source, r.target, r) : r.host ? Is(r, r.host, null, n) : id(r, i, null);
    });
  }), this.addRule("elements.move", function(e) {
    var t = e.target, n = e.shapes, i = e.position;
    return Is(n, t, null, i) || zx(n, t, i) || Vx(n, t) || pu(n, t);
  }), this.addRule("shape.create", function(e) {
    return id(
      e.shape,
      e.target,
      e.source,
      e.position
    );
  }), this.addRule("shape.attach", function(e) {
    return Is(
      e.shape,
      e.target,
      null,
      e.position
    );
  }), this.addRule("element.copy", function(e) {
    var t = e.element, n = e.elements;
    return qx(n, t);
  });
};
Tn.prototype.canConnectMessageFlow = Yx;
Tn.prototype.canConnectSequenceFlow = Kx;
Tn.prototype.canConnectDataAssociation = $h;
Tn.prototype.canConnectAssociation = Gx;
Tn.prototype.canConnectCompensationAssociation = Ux;
Tn.prototype.canMove = Vx;
Tn.prototype.canAttach = Is;
Tn.prototype.canReplace = zx;
Tn.prototype.canDrop = Ha;
Tn.prototype.canInsert = pu;
Tn.prototype.canCreate = id;
Tn.prototype.canConnect = Ul;
Tn.prototype.canResize = Wx;
Tn.prototype.canCopy = qx;
function fM(e) {
  return ed(e) ? null : rt(e, [
    "bpmn:FlowNode",
    "bpmn:InteractionNode",
    "bpmn:DataObjectReference",
    "bpmn:DataStoreReference",
    "bpmn:Group",
    "bpmn:TextAnnotation"
  ]);
}
function ed(e) {
  return !e || vt(e);
}
function dM(e, t) {
  return e === t;
}
function wv(e) {
  do {
    if (A(e, "bpmn:Process"))
      return he(e);
    if (A(e, "bpmn:Participant"))
      return he(e).processRef || he(e);
  } while (e = e.parent);
}
function td(e) {
  return A(e, "bpmn:TextAnnotation");
}
function Ih(e) {
  return A(e, "bpmn:Group") && !e.labelTarget;
}
function Lx(e) {
  return A(e, "bpmn:BoundaryEvent") && or(e, "bpmn:CompensateEventDefinition");
}
function Ku(e) {
  return he(e).isForCompensation;
}
function hM(e, t) {
  var n = wv(e), i = wv(t);
  return n === i;
}
function mM(e) {
  return A(e, "bpmn:InteractionNode") && !A(e, "bpmn:BoundaryEvent") && (!A(e, "bpmn:Event") || A(e, "bpmn:ThrowEvent") && $x(e, "bpmn:MessageEventDefinition"));
}
function yM(e) {
  return A(e, "bpmn:InteractionNode") && !Ku(e) && (!A(e, "bpmn:Event") || A(e, "bpmn:CatchEvent") && $x(e, "bpmn:MessageEventDefinition")) && !(A(e, "bpmn:BoundaryEvent") && !or(e, "bpmn:MessageEventDefinition"));
}
function Sv(e) {
  for (var t = e; t = t.parent; ) {
    if (A(t, "bpmn:FlowElementsContainer"))
      return he(t);
    if (A(t, "bpmn:Participant"))
      return he(t).processRef;
  }
  return null;
}
function Ix(e, t) {
  var n = Sv(e), i = Sv(t);
  return n === i;
}
function or(e, t) {
  var n = he(e);
  return !!gt(n.eventDefinitions || [], function(i) {
    return A(i, t);
  });
}
function $x(e, t) {
  var n = he(e);
  return (n.eventDefinitions || []).every(function(i) {
    return A(i, t);
  });
}
function gM(e) {
  return A(e, "bpmn:FlowNode") && !A(e, "bpmn:EndEvent") && !Nn(e) && !(A(e, "bpmn:IntermediateThrowEvent") && or(e, "bpmn:LinkEventDefinition")) && !Lx(e) && !Ku(e);
}
function vM(e) {
  return A(e, "bpmn:FlowNode") && !A(e, "bpmn:StartEvent") && !A(e, "bpmn:BoundaryEvent") && !Nn(e) && !(A(e, "bpmn:IntermediateCatchEvent") && or(e, "bpmn:LinkEventDefinition")) && !Ku(e);
}
function _M(e) {
  return A(e, "bpmn:ReceiveTask") || A(e, "bpmn:IntermediateCatchEvent") && (or(e, "bpmn:MessageEventDefinition") || or(e, "bpmn:TimerEventDefinition") || or(e, "bpmn:ConditionalEventDefinition") || or(e, "bpmn:SignalEventDefinition"));
}
function bM(e) {
  for (var t = []; e; )
    e = e.parent, e && t.push(e);
  return t;
}
function nd(e, t) {
  var n = bM(t);
  return n.indexOf(e) !== -1;
}
function Ul(e, t, n) {
  if (ed(e) || ed(t))
    return null;
  if (!A(n, "bpmn:DataAssociation")) {
    if (Yx(e, t))
      return { type: "bpmn:MessageFlow" };
    if (Kx(e, t))
      return { type: "bpmn:SequenceFlow" };
  }
  var i = $h(e, t);
  return i || (Ux(e, t) ? {
    type: "bpmn:Association",
    associationDirection: "One"
  } : Gx(e, t) ? {
    type: "bpmn:Association",
    associationDirection: "None"
  } : !1);
}
function Ha(e, t) {
  return vt(e) || Ih(e) ? !0 : A(t, "bpmn:Participant") && !pt(t) ? !1 : A(e, "bpmn:Participant") ? A(t, "bpmn:Process") || A(t, "bpmn:Collaboration") : rt(e, ["bpmn:DataInput", "bpmn:DataOutput"]) && e.parent ? t === e.parent : A(e, "bpmn:Lane") ? A(t, "bpmn:Participant") || A(t, "bpmn:Lane") : A(e, "bpmn:BoundaryEvent") && !xM(e) ? !1 : A(e, "bpmn:FlowElement") && !A(e, "bpmn:DataStoreReference") ? A(t, "bpmn:FlowElementsContainer") ? pt(t) : rt(t, ["bpmn:Participant", "bpmn:Lane"]) : A(e, "bpmn:DataStoreReference") && A(t, "bpmn:Collaboration") ? Dr(he(t).get("participants"), function(n) {
    return !!n.get("processRef");
  }) : rt(e, ["bpmn:Artifact", "bpmn:DataAssociation", "bpmn:DataStoreReference"]) ? rt(t, [
    "bpmn:Collaboration",
    "bpmn:Lane",
    "bpmn:Participant",
    "bpmn:Process",
    "bpmn:SubProcess"
  ]) : A(e, "bpmn:MessageFlow") ? A(t, "bpmn:Collaboration") || e.source.parent == t || e.target.parent == t : !1;
}
function xM(e) {
  return he(e).cancelActivity && (jx(e) || Fx(e));
}
function EM(e) {
  return !vt(e) && A(e, "bpmn:BoundaryEvent");
}
function wM(e) {
  return A(e, "bpmn:Lane");
}
function SM(e) {
  return EM(e) || A(e, "bpmn:IntermediateThrowEvent") && jx(e) ? !0 : A(e, "bpmn:IntermediateCatchEvent") && Fx(e);
}
function jx(e) {
  var t = he(e);
  return t && !(t.eventDefinitions && t.eventDefinitions.length);
}
function Fx(e) {
  return Hx(e, [
    "bpmn:MessageEventDefinition",
    "bpmn:TimerEventDefinition",
    "bpmn:SignalEventDefinition",
    "bpmn:ConditionalEventDefinition"
  ]);
}
function Hx(e, t) {
  return t.some(function(n) {
    return or(e, n);
  });
}
function RM(e) {
  return A(e, "bpmn:ReceiveTask") && gt(e.incoming, function(t) {
    return A(t.source, "bpmn:EventBasedGateway");
  });
}
function Is(e, t, n, i) {
  if (Array.isArray(e) || (e = [e]), e.length !== 1)
    return !1;
  var r = e[0];
  return vt(r) || !SM(r) || Nn(t) || !A(t, "bpmn:Activity") || Ku(t) || i && !Bx(i, t) || RM(t) ? !1 : "attach";
}
function zx(e, t, n) {
  if (!t)
    return !1;
  var i = {
    replacements: []
  };
  return z(e, function(r) {
    Nn(t) || A(r, "bpmn:StartEvent") && r.type !== "label" && Ha(r, t) && (CA(r) || i.replacements.push({
      oldElementId: r.id,
      newElementType: "bpmn:StartEvent"
    }), (AA(r) || PA(r) || TA(r)) && i.replacements.push({
      oldElementId: r.id,
      newElementType: "bpmn:StartEvent"
    }), Hx(
      r,
      [
        "bpmn:MessageEventDefinition",
        "bpmn:TimerEventDefinition",
        "bpmn:SignalEventDefinition",
        "bpmn:ConditionalEventDefinition"
      ]
    ) && A(t, "bpmn:SubProcess") && i.replacements.push({
      oldElementId: r.id,
      newElementType: "bpmn:StartEvent"
    })), A(t, "bpmn:Transaction") || or(r, "bpmn:CancelEventDefinition") && r.type !== "label" && (A(r, "bpmn:EndEvent") && Ha(r, t) && i.replacements.push({
      oldElementId: r.id,
      newElementType: "bpmn:EndEvent"
    }), A(r, "bpmn:BoundaryEvent") && Is(r, t, null, n) && i.replacements.push({
      oldElementId: r.id,
      newElementType: "bpmn:BoundaryEvent"
    }));
  }), i.replacements.length ? i : !1;
}
function Vx(e, t) {
  return Dr(e, wM) ? !1 : t ? e.every(function(n) {
    return Ha(n, t);
  }) : !0;
}
function id(e, t, n, i) {
  return t ? vt(e) || Ih(e) ? !0 : dM(n, t) || n && nd(n, t) ? !1 : Ha(e, t) || pu(e, t) : !1;
}
function Wx(e, t) {
  return A(e, "bpmn:SubProcess") ? pt(e) && (!t || t.width >= 100 && t.height >= 80) : !!(A(e, "bpmn:Lane") || A(e, "bpmn:Participant") || td(e) || Ih(e));
}
function CM(e, t) {
  var n = td(e), i = td(t);
  return (n || i) && n !== i;
}
function Gx(e, t) {
  return nd(t, e) || nd(e, t) ? !1 : CM(e, t) ? !0 : !!$h(e, t);
}
function Ux(e, t) {
  return Ix(e, t) && Lx(e) && A(t, "bpmn:Activity") && !PM(t, e) && !Nn(t);
}
function Yx(e, t) {
  return Rv(e) && !Rv(t) ? !1 : mM(e) && yM(t) && !hM(e, t);
}
function Kx(e, t) {
  return gM(e) && vM(t) && Ix(e, t) && !(A(e, "bpmn:EventBasedGateway") && !_M(t));
}
function $h(e, t) {
  return rt(e, ["bpmn:DataObjectReference", "bpmn:DataStoreReference"]) && rt(t, ["bpmn:Activity", "bpmn:ThrowEvent"]) ? { type: "bpmn:DataInputAssociation" } : rt(t, ["bpmn:DataObjectReference", "bpmn:DataStoreReference"]) && rt(e, ["bpmn:Activity", "bpmn:CatchEvent"]) ? { type: "bpmn:DataOutputAssociation" } : !1;
}
function pu(e, t, n) {
  if (!t)
    return !1;
  if (Array.isArray(e)) {
    if (e.length !== 1)
      return !1;
    e = e[0];
  }
  return t.source === e || t.target === e ? !1 : rt(t, ["bpmn:SequenceFlow", "bpmn:MessageFlow"]) && !vt(t) && A(e, "bpmn:FlowNode") && !A(e, "bpmn:BoundaryEvent") && Ha(e, t.parent);
}
function AM(e, t) {
  return e && t && e.indexOf(t) !== -1;
}
function qx(e, t) {
  return vt(t) ? !0 : !(A(t, "bpmn:Lane") && !AM(e, t.parent));
}
function Rv(e) {
  return Ys(e, "bpmn:Process") || Ys(e, "bpmn:Collaboration");
}
function PM(e, t) {
  return e.attachers.includes(t);
}
const TM = {
  __depends__: [
    hr
  ],
  __init__: ["bpmnRules"],
  bpmnRules: ["type", Tn]
};
var kM = 2e3;
function Xx(e, t) {
  e.on("saveXML.start", kM, n);
  function n() {
    var i = t.getRootElements();
    z(i, function(r) {
      var o = bt(r), a, c;
      a = ec([r], !1), a = et(a, function(l) {
        return l !== r && !l.labelTarget;
      }), c = mn(a, bt), o.set("planeElement", c);
    });
  }
}
Xx.$inject = ["eventBus", "canvas"];
const MM = {
  __init__: [
    "bpmnDiOrdering"
  ],
  bpmnDiOrdering: ["type", Xx]
};
function qu(e) {
  le.call(this, e);
  var t = this;
  this.preExecute(["shape.create", "connection.create"], function(n) {
    var i = n.context, r = i.shape || i.connection, o = i.parent, a = t.getOrdering(r, o);
    a && (a.parent !== void 0 && (i.parent = a.parent), i.parentIndex = a.index);
  }), this.preExecute(["shape.move", "connection.move"], function(n) {
    var i = n.context, r = i.shape || i.connection, o = i.newParent || r.parent, a = t.getOrdering(r, o);
    a && (a.parent !== void 0 && (i.newParent = a.parent), i.newParentIndex = a.index);
  });
}
qu.prototype.getOrdering = function(e, t) {
  return null;
};
Pe(qu, le);
function jh(e, t) {
  qu.call(this, e);
  var n = [
    { type: "bpmn:SubProcess", order: { level: 6 } },
    // handle SequenceFlow(s) like message flows and render them always on top
    {
      type: "bpmn:SequenceFlow",
      order: {
        level: 9,
        containers: [
          "bpmn:Participant",
          "bpmn:FlowElementsContainer"
        ]
      }
    },
    // handle DataAssociation(s) like message flows and render them always on top
    {
      type: "bpmn:DataAssociation",
      order: {
        level: 9,
        containers: [
          "bpmn:Collaboration",
          "bpmn:FlowElementsContainer"
        ]
      }
    },
    {
      type: "bpmn:TextAnnotation",
      order: {
        level: 9
      }
    },
    {
      type: "bpmn:MessageFlow",
      order: {
        level: 9,
        containers: ["bpmn:Collaboration"]
      }
    },
    {
      type: "bpmn:Association",
      order: {
        level: 6,
        containers: [
          "bpmn:Participant",
          "bpmn:FlowElementsContainer",
          "bpmn:Collaboration"
        ]
      }
    },
    { type: "bpmn:BoundaryEvent", order: { level: 8 } },
    {
      type: "bpmn:Group",
      order: {
        level: 10,
        containers: [
          "bpmn:Collaboration",
          "bpmn:FlowElementsContainer"
        ]
      }
    },
    { type: "bpmn:FlowElement", order: { level: 5 } },
    { type: "bpmn:Participant", order: { level: -2 } },
    { type: "bpmn:Lane", order: { level: -1 } }
  ];
  function i(a) {
    if (a.labelTarget)
      return { level: 10 };
    var c = gt(n, function(l) {
      return rt(a, [l.type]);
    });
    return c && c.order || { level: 1 };
  }
  function r(a) {
    var c = a.order;
    if (c || (a.order = c = i(a)), !c)
      throw new Error(`no order for <${a.id}>`);
    return c;
  }
  function o(a, c, l) {
    for (var u = c; u && !rt(u, l); )
      u = u.parent;
    if (!u)
      throw new Error(`no parent for <${a.id}> in <${c && c.id}>`);
    return u;
  }
  this.getOrdering = function(a, c) {
    if (a.labelTarget || A(a, "bpmn:TextAnnotation"))
      return {
        parent: t.findRoot(c) || t.getRootElement(),
        index: -1
      };
    var l = r(a);
    l.containers && (c = o(a, c, l.containers));
    var u = c.children.indexOf(a), d = i_(c.children, function(f) {
      return !a.labelTarget && f.labelTarget ? !1 : l.level < r(f).level;
    });
    return d !== -1 && u !== -1 && u < d && (d -= 1), {
      index: d,
      parent: c
    };
  };
}
jh.$inject = ["eventBus", "canvas"];
Pe(jh, qu);
const DM = {
  __init__: ["bpmnOrderingProvider"],
  bpmnOrderingProvider: ["type", jh]
};
function pc() {
}
pc.prototype.get = function() {
  return this._data;
};
pc.prototype.set = function(e) {
  this._data = e;
};
pc.prototype.clear = function() {
  var e = this._data;
  return delete this._data, e;
};
pc.prototype.isEmpty = function() {
  return !this._data;
};
const OM = {
  clipboard: ["type", pc]
};
var NM = "drop-ok", Cv = "drop-not-ok", Av = "attach-ok", Pv = "new-parent", Tv = "create", BM = 2e3;
function Zx(e, t, n, i, r) {
  function o(l, u, d, f, y) {
    if (!u)
      return !1;
    l = et(l, function(O) {
      var k = O.labelTarget;
      return !O.parent && !(vt(O) && l.indexOf(k) !== -1);
    });
    var g = gt(l, function(O) {
      return !kt(O);
    }), _ = !1, x = !1, w = !1;
    Mv(l) && (_ = r.allowed("shape.attach", {
      position: d,
      shape: g,
      target: u
    })), _ || (Mv(l) ? w = r.allowed("shape.create", {
      position: d,
      shape: g,
      source: f,
      target: u
    }) : w = r.allowed("elements.create", {
      elements: l,
      position: d,
      target: u
    }));
    var D = y.connectionTarget;
    return w || _ ? (g && f && (x = r.allowed("connection.create", {
      source: D === f ? g : f,
      target: D === f ? f : g,
      hints: {
        targetParent: u,
        targetAttach: _
      }
    })), {
      attach: _,
      connect: x
    }) : w === null || _ === null ? null : !1;
  }
  function a(l, u) {
    [Av, NM, Cv, Pv].forEach(function(d) {
      d === u ? e.addMarker(l, d) : e.removeMarker(l, d);
    });
  }
  n.on(["create.move", "create.hover"], function(l) {
    var u = l.context, d = u.elements, f = l.hover, y = u.source, g = u.hints || {};
    if (!f) {
      u.canExecute = !1, u.target = null;
      return;
    }
    kv(l);
    var _ = {
      x: l.x,
      y: l.y
    }, x = u.canExecute = f && o(d, f, _, y, g);
    f && x !== null && (u.target = f, x && x.attach ? a(f, Av) : a(f, x ? Pv : Cv));
  }), n.on(["create.end", "create.out", "create.cleanup"], function(l) {
    var u = l.hover;
    u && a(u, null);
  }), n.on("create.end", function(l) {
    var u = l.context, d = u.source, f = u.shape, y = u.elements, g = u.target, _ = u.canExecute, x = _ && _.attach, w = _ && _.connect, D = u.hints || {};
    if (_ === !1 || !g)
      return !1;
    kv(l);
    var O = {
      x: l.x,
      y: l.y
    };
    w ? f = i.appendShape(d, f, O, g, {
      attach: x,
      connection: w === !0 ? {} : w,
      connectionTarget: D.connectionTarget
    }) : (y = i.createElements(y, O, g, G({}, D, {
      attach: x
    })), f = gt(y, function(k) {
      return !kt(k);
    })), G(u, {
      elements: y,
      shape: f
    }), G(l, {
      elements: y,
      shape: f
    });
  });
  function c() {
    var l = t.context();
    l && l.prefix === Tv && t.cancel();
  }
  n.on("create.init", function() {
    n.on("elements.changed", c), n.once(["create.cancel", "create.end"], BM, function() {
      n.off("elements.changed", c);
    });
  }), this.start = function(l, u, d) {
    nt(u) || (u = [u]);
    var f = gt(u, function(_) {
      return !kt(_);
    });
    if (f) {
      d = G({
        elements: u,
        hints: {},
        shape: f
      }, d || {}), z(u, function(_) {
        je(_.x) || (_.x = 0), je(_.y) || (_.y = 0);
      });
      var y = et(u, function(_) {
        return !_.hidden;
      }), g = nn(y);
      z(u, function(_) {
        kt(_) && (_.waypoints = mn(_.waypoints, function(x) {
          return {
            x: x.x - g.x - g.width / 2,
            y: x.y - g.y - g.height / 2
          };
        })), G(_, {
          x: _.x - g.x - g.width / 2,
          y: _.y - g.y - g.height / 2
        });
      }), t.init(l, Tv, {
        cursor: "grabbing",
        autoActivate: !0,
        data: {
          shape: f,
          elements: u,
          context: d
        }
      });
    }
  };
}
Zx.$inject = [
  "canvas",
  "dragging",
  "eventBus",
  "modeling",
  "rules"
];
function kv(e) {
  var t = e.context, n = t.createConstraints;
  n && (n.left && (e.x = Math.max(e.x, n.left)), n.right && (e.x = Math.min(e.x, n.right)), n.top && (e.y = Math.max(e.y, n.top)), n.bottom && (e.y = Math.min(e.y, n.bottom)));
}
function Mv(e) {
  return e && e.length === 1 && !kt(e[0]);
}
var LM = 750;
function Jx(e, t, n, i, r) {
  function o(a) {
    var c = Me("g");
    we(c, r.cls("djs-drag-group", ["no-events"]));
    var l = Me("g");
    return a.forEach(function(u) {
      var d;
      u.hidden || (u.waypoints ? (d = n._createContainer("connection", l), n.drawConnection(Yo(d), u)) : (d = n._createContainer("shape", l), n.drawShape(Yo(d), u), Cn(d, u.x, u.y)), i.addDragger(u, c, d));
    }), c;
  }
  t.on("create.move", LM, function(a) {
    var c = a.hover, l = a.context, u = l.elements, d = l.dragGroup;
    d || (d = l.dragGroup = o(u));
    var f;
    c ? (d.parentNode || (f = e.getActiveLayer(), ze(f, d)), Cn(d, a.x, a.y)) : qt(d);
  }), t.on("create.cleanup", function(a) {
    var c = a.context, l = c.dragGroup;
    l && qt(l);
  });
}
Jx.$inject = [
  "canvas",
  "eventBus",
  "graphicsFactory",
  "previewSupport",
  "styles"
];
const Xu = {
  __depends__: [
    $r,
    es,
    hr,
    fr
  ],
  __init__: [
    "create",
    "createPreview"
  ],
  create: ["type", Zx],
  createPreview: ["type", Jx]
};
function Fh(e) {
  var t = this;
  this._lastMoveEvent = null;
  function n(i) {
    t._lastMoveEvent = i;
  }
  e.on("canvas.init", function(i) {
    var r = t._svg = i.svg;
    r.addEventListener("mousemove", n);
  }), e.on("canvas.destroy", function() {
    t._lastMouseEvent = null, t._svg.removeEventListener("mousemove", n);
  });
}
Fh.$inject = ["eventBus"];
Fh.prototype.getLastMoveEvent = function() {
  return this._lastMoveEvent || IM(0, 0);
};
function IM(e, t) {
  var n = document.createEvent("MouseEvent"), i = e, r = t, o = e, a = t;
  return n.initMouseEvent && n.initMouseEvent(
    "mousemove",
    !0,
    !0,
    window,
    0,
    i,
    r,
    o,
    a,
    !1,
    !1,
    !1,
    !1,
    0,
    null
  ), n;
}
const fc = {
  __init__: ["mouse"],
  mouse: ["type", Fh]
};
function Ki(e, t, n, i, r, o, a, c) {
  this._canvas = e, this._create = t, this._clipboard = n, this._elementFactory = i, this._eventBus = r, this._modeling = o, this._mouse = a, this._rules = c, r.on("copyPaste.copyElement", function(l) {
    var u = l.descriptor, d = l.element, f = l.elements;
    u.priority = 1, u.id = d.id;
    var y = gt(f, function(g) {
      return g === d.parent;
    });
    y && (u.parent = d.parent.id), $M(d) && (u.priority = 2, u.host = d.host.id), kt(d) && (u.priority = 3, u.source = d.source.id, u.target = d.target.id, u.waypoints = jM(d)), vt(d) && (u.priority = 4, u.labelTarget = d.labelTarget.id), z(["x", "y", "width", "height"], function(g) {
      je(d[g]) && (u[g] = d[g]);
    }), u.hidden = d.hidden, u.collapsed = d.collapsed;
  }), r.on("copyPaste.pasteElements", function(l) {
    var u = l.hints;
    G(u, {
      createElementsBehavior: !1
    });
  });
}
Ki.$inject = [
  "canvas",
  "create",
  "clipboard",
  "elementFactory",
  "eventBus",
  "modeling",
  "mouse",
  "rules"
];
Ki.prototype.copy = function(e) {
  var t, n;
  return nt(e) || (e = e ? [e] : []), t = this._eventBus.fire("copyPaste.canCopyElements", {
    elements: e
  }), t === !1 ? n = {} : n = this.createTree(nt(t) ? t : e), this._clipboard.set(n), this._eventBus.fire("copyPaste.elementsCopied", {
    elements: e,
    tree: n
  }), n;
};
Ki.prototype.paste = function(e) {
  var t = this._clipboard.get();
  if (!this._clipboard.isEmpty()) {
    var n = e && e.hints || {};
    this._eventBus.fire("copyPaste.pasteElements", {
      hints: n
    });
    var i = this._createElements(t);
    if (e && e.element && e.point)
      return this._paste(i, e.element, e.point, n);
    this._create.start(this._mouse.getLastMoveEvent(), i, {
      hints: n || {}
    });
  }
};
Ki.prototype._paste = function(e, t, n, i) {
  z(e, function(o) {
    je(o.x) || (o.x = 0), je(o.y) || (o.y = 0);
  });
  var r = nn(e);
  return z(e, function(o) {
    kt(o) && (o.waypoints = mn(o.waypoints, function(a) {
      return {
        x: a.x - r.x - r.width / 2,
        y: a.y - r.y - r.height / 2
      };
    })), G(o, {
      x: o.x - r.x - r.width / 2,
      y: o.y - r.y - r.height / 2
    });
  }), this._modeling.createElements(e, n, t, G({}, i));
};
Ki.prototype._createElements = function(e) {
  var t = this, n = this._eventBus, i = {}, r = [];
  return z(e, function(o, a) {
    o = Gi(o, "priority"), z(o, function(c) {
      var l = G({}, pr(c, ["priority"]));
      i[c.parent] ? l.parent = i[c.parent] : delete l.parent, n.fire("copyPaste.pasteElement", {
        cache: i,
        descriptor: l
      });
      var u;
      if (kt(l)) {
        l.source = i[c.source], l.target = i[c.target], u = i[c.id] = t.createConnection(l), r.push(u);
        return;
      }
      if (vt(l)) {
        l.labelTarget = i[l.labelTarget], u = i[c.id] = t.createLabel(l), r.push(u);
        return;
      }
      l.host && (l.host = i[l.host]), u = i[c.id] = t.createShape(l), r.push(u);
    });
  }), r;
};
Ki.prototype.createConnection = function(e) {
  var t = this._elementFactory.createConnection(pr(e, ["id"]));
  return t;
};
Ki.prototype.createLabel = function(e) {
  var t = this._elementFactory.createLabel(pr(e, ["id"]));
  return t;
};
Ki.prototype.createShape = function(e) {
  var t = this._elementFactory.createShape(pr(e, ["id"]));
  return t;
};
Ki.prototype.hasRelations = function(e, t) {
  var n, i, r;
  return !(kt(e) && (i = gt(t, zi({ id: e.source.id })), r = gt(t, zi({ id: e.target.id })), !i || !r) || vt(e) && (n = gt(t, zi({ id: e.labelTarget.id })), !n));
};
Ki.prototype.createTree = function(e) {
  var t = this._rules, n = this, i = {}, r = [], o = vu(e);
  function a(u, d) {
    return t.allowed("element.copy", {
      element: u,
      elements: d
    });
  }
  function c(u, d) {
    var f = gt(r, function(y) {
      return u === y.element;
    });
    if (!f) {
      r.push({
        element: u,
        depth: d
      });
      return;
    }
    f.depth < d && (r = l(f, r), r.push({
      element: f.element,
      depth: d
    }));
  }
  function l(u, d) {
    var f = d.indexOf(u);
    return f !== -1 && d.splice(f, 1), d;
  }
  return ta(o, function(u, d, f) {
    if (vt(u))
      return;
    z(u.labels, function(_) {
      c(_, f);
    });
    function y(_) {
      _ && _.length && z(_, function(x) {
        z(x.labels, function(w) {
          c(w, f);
        }), c(x, f);
      });
    }
    z([u.attachers, u.incoming, u.outgoing], y), c(u, f);
    var g = [];
    return u.children && (g = u.children.slice()), n._eventBus.fire("copyPaste.createTree", {
      element: u,
      children: g
    }), g;
  }), e = mn(r, function(u) {
    return u.element;
  }), r = mn(r, function(u) {
    return u.descriptor = {}, n._eventBus.fire("copyPaste.copyElement", {
      descriptor: u.descriptor,
      element: u.element,
      elements: e
    }), u;
  }), r = Gi(r, function(u) {
    return u.descriptor.priority;
  }), e = mn(r, function(u) {
    return u.element;
  }), z(r, function(u) {
    var d = u.depth;
    if (!n.hasRelations(u.element, e)) {
      Ov(u.element, e);
      return;
    }
    if (!a(u.element, e)) {
      Ov(u.element, e);
      return;
    }
    i[d] || (i[d] = []), i[d].push(u.descriptor);
  }), i;
};
function $M(e) {
  return !!e.host;
}
function jM(e) {
  return mn(e.waypoints, function(t) {
    return t = Dv(t), t.original && (t.original = Dv(t.original)), t;
  });
}
function Dv(e) {
  return G({}, e);
}
function Ov(e, t) {
  var n = t.indexOf(e);
  return n === -1 ? t : t.splice(n, 1);
}
const FM = {
  __depends__: [
    OM,
    Xu,
    fc,
    hr
  ],
  __init__: ["copyPaste"],
  copyPaste: ["type", Ki]
};
function of(e, t, n) {
  nt(n) || (n = [n]), z(n, function(i) {
    qo(e[i]) || (t[i] = e[i]);
  });
}
var af = 750;
function Qx(e, t, n) {
  function i(l, u) {
    var d = e.create(l.$type);
    return n.copyElement(l, d, null, u);
  }
  t.on("copyPaste.copyElement", af, function(l) {
    var u = l.descriptor, d = l.element, f = he(d);
    if (vt(d))
      return u;
    var y = u.businessObject = i(f, !0), g = u.di = i(bt(d), !0);
    g.bpmnElement = y, of(y, u, "name"), of(g, u, "isExpanded"), f.default && (u.default = f.default.id);
  });
  var r = "-bpmn-js-refs";
  function o(l) {
    return l[r] = l[r] || {};
  }
  function a(l, u) {
    l[r] = u;
  }
  function c(l, u, d) {
    var f = he(l);
    return l.default && (d[l.default] = {
      element: f,
      property: "default"
    }), l.host && (he(l).attachedToRef = he(u[l.host])), pr(d, li(d, function(y, g, _) {
      var x = g.element, w = g.property;
      return _ === l.id && (x.set(w, f), y.push(l.id)), y;
    }, []));
  }
  t.on("copyPaste.pasteElement", function(l) {
    var u = l.cache, d = l.descriptor, f = d.businessObject, y = d.di;
    if (vt(d)) {
      d.businessObject = he(u[d.labelTarget]), d.di = bt(u[d.labelTarget]);
      return;
    }
    f = d.businessObject = i(f), y = d.di = i(y), y.bpmnElement = f, of(d, f, [
      "isExpanded",
      "name"
    ]), d.type = f.$type;
  }), t.on("copyPaste.copyElement", af, function(l) {
    var u = l.descriptor, d = l.element;
    if (A(d, "bpmn:Participant")) {
      var f = he(d);
      f.processRef && (u.processRef = i(f.processRef, !0));
    }
  }), t.on("copyPaste.pasteElement", function(l) {
    var u = l.descriptor, d = u.processRef;
    d && (u.processRef = i(d));
  }), t.on("copyPaste.pasteElement", af, function(l) {
    var u = l.cache, d = l.descriptor;
    a(
      u,
      c(d, u, o(u))
    );
  });
}
Qx.$inject = [
  "bpmnFactory",
  "eventBus",
  "moddleCopy"
];
var HM = [
  "artifacts",
  "dataInputAssociations",
  "dataOutputAssociations",
  "default",
  "flowElements",
  "lanes",
  "incoming",
  "outgoing",
  "categoryValue"
];
function dc(e, t, n) {
  this._bpmnFactory = t, this._eventBus = e, this._moddle = n, e.on("moddleCopy.canCopyProperties", function(i) {
    var r = i.propertyNames;
    if (!(!r || !r.length))
      return Gi(r, function(o) {
        return o === "extensionElements";
      });
  }), e.on("moddleCopy.canCopyProperty", function(i) {
    var r = i.parent, o = yn(r) && r.$descriptor, a = i.propertyName;
    if (a && HM.indexOf(a) !== -1 || a && o && !gt(o.properties, zi({ name: a })))
      return !1;
  }), e.on("moddleCopy.canSetCopiedProperty", function(i) {
    var r = i.property;
    if (zM(r, "bpmn:ExtensionElements") && (!r.values || !r.values.length))
      return !1;
  });
}
dc.$inject = [
  "eventBus",
  "bpmnFactory",
  "moddle"
];
dc.prototype.copyElement = function(e, t, n, i = !1) {
  var r = this;
  n && !nt(n) && (n = [n]), n = n || rd(e.$descriptor);
  var o = this._eventBus.fire("moddleCopy.canCopyProperties", {
    propertyNames: n,
    sourceElement: e,
    targetElement: t,
    clone: i
  });
  return o === !1 || (nt(o) && (n = o), z(n, function(a) {
    var c;
    Zn(e, a) && (c = e.get(a));
    var l = r.copyProperty(c, t, a, i);
    if (dn(l)) {
      var u = r._eventBus.fire("moddleCopy.canSetCopiedProperty", {
        parent: t,
        property: l,
        propertyName: a
      });
      u !== !1 && t.set(a, l);
    }
  })), t;
};
dc.prototype.copyProperty = function(e, t, n, i = !1) {
  var r = this, o = this._eventBus.fire("moddleCopy.canCopyProperty", {
    parent: t,
    property: e,
    propertyName: n,
    clone: i
  });
  if (o !== !1) {
    if (o)
      return yn(o) && o.$type && !o.$parent && (o.$parent = t), o;
    var a = this._moddle.getPropertyDescriptor(t, n);
    if (!a.isReference)
      return a.isId ? e && this._copyId(e, t, i) : nt(e) ? li(e, function(c, l) {
        return o = r.copyProperty(l, t, n, i), o ? c.concat(o) : c;
      }, []) : yn(e) && e.$type ? this._moddle.getElementDescriptor(e).isGeneric ? void 0 : (o = r._bpmnFactory.create(e.$type), o.$parent = t, o = r.copyElement(e, o, null, i), o) : e;
  }
};
dc.prototype._copyId = function(e, t, n = !1) {
  if (n)
    return e;
  if (!this._moddle.ids.assigned(e))
    return this._moddle.ids.claim(e, t), e;
};
function rd(e, t) {
  return li(e.properties, function(n, i) {
    return t && i.default ? n : n.concat(i.name);
  }, []);
}
function zM(e, t) {
  return e && un(e.$instanceOf) && e.$instanceOf(t);
}
const eE = {
  __depends__: [
    FM
  ],
  __init__: ["bpmnCopyPaste", "moddleCopy"],
  bpmnCopyPaste: ["type", Qx],
  moddleCopy: ["type", dc]
};
var Nv = Math.round;
function Hh(e, t) {
  this._modeling = e, this._eventBus = t;
}
Hh.$inject = ["modeling", "eventBus"];
Hh.prototype.replaceElement = function(e, t, n) {
  if (e.waypoints)
    return null;
  var i = this._modeling, r = this._eventBus;
  r.fire("replace.start", {
    element: e,
    attrs: t,
    hints: n
  });
  var o = t.width || e.width, a = t.height || e.height, c = t.x || e.x, l = t.y || e.y, u = Nv(c + o / 2), d = Nv(l + a / 2), f = i.replaceShape(
    e,
    G(
      {},
      t,
      {
        x: u,
        y: d,
        width: o,
        height: a
      }
    ),
    n
  );
  return r.fire("replace.end", {
    element: e,
    newElement: f,
    hints: n
  }), f;
};
function tE(e, t) {
  t.on("replace.end", 500, function(n) {
    const {
      newElement: i,
      hints: r = {}
    } = n;
    r.select !== !1 && e.select(i);
  });
}
tE.$inject = ["selection", "eventBus"];
const VM = {
  __init__: ["replace", "replaceSelectionBehavior"],
  replaceSelectionBehavior: ["type", tE],
  replace: ["type", Hh]
};
function WM(e, t, n) {
  nt(n) || (n = [n]), z(n, function(i) {
    qo(e[i]) || (t[i] = e[i]);
  });
}
var GM = [
  "cancelActivity",
  "instantiate",
  "eventGatewayType",
  "triggeredByEvent",
  "isInterrupting"
];
function UM(e, t) {
  var n = e && Zn(e, "collapsed") ? e.collapsed : !pt(e), i;
  return t && (Zn(t, "collapsed") || Zn(t, "isExpanded")) ? i = Zn(t, "collapsed") ? t.collapsed : !t.isExpanded : i = n, n !== i;
}
function nE(e, t, n, i, r, o) {
  function a(c, l, u) {
    u = u || {};
    var d = l.type, f = c.businessObject;
    if (xl(f) && d === "bpmn:SubProcess" && UM(c, l))
      return i.toggleCollapse(c), c;
    var y = e.create(d), g = {
      type: d,
      businessObject: y
    };
    g.di = {}, d === "bpmn:ExclusiveGateway" && (g.di.isMarkerVisible = !0), WM(c.di, g.di, [
      "fill",
      "stroke",
      "background-color",
      "border-color",
      "color"
    ]);
    var _ = rd(f.$descriptor), x = rd(y.$descriptor, !0), w = YM(_, x);
    G(y, Ui(l, GM));
    var D = et(w, function(k) {
      return k === "eventDefinitions" ? Bv(c, l.eventDefinitionType) : k === "loopCharacteristics" ? !Nn(y) : Zn(y, k) || k === "processRef" && l.isExpanded === !1 || k === "triggeredByEvent" ? !1 : k === "isForCompensation" ? !Nn(y) : !0;
    });
    if (y = n.copyElement(
      f,
      y,
      D
    ), l.eventDefinitionType && (Bv(y, l.eventDefinitionType) || (g.eventDefinitionType = l.eventDefinitionType, g.eventDefinitionAttrs = l.eventDefinitionAttrs)), A(f, "bpmn:Activity")) {
      if (xl(f))
        g.isExpanded = pt(c);
      else if (l && Zn(l, "isExpanded")) {
        g.isExpanded = l.isExpanded;
        var O = t.getDefaultSize(y, {
          isExpanded: g.isExpanded
        });
        g.width = O.width, g.height = O.height, g.x = c.x - (g.width - c.width) / 2, g.y = c.y - (g.height - c.height) / 2;
      }
      pt(c) && !A(f, "bpmn:Task") && g.isExpanded && (g.width = c.width, g.height = c.height);
    }
    return xl(f) && !xl(y) && (u.moveChildren = !1), A(f, "bpmn:Participant") && (l.isExpanded === !0 ? y.processRef = e.create("bpmn:Process") : u.moveChildren = !1, g.width = c.width, g.height = t.getDefaultSize(g).height), o.allowed("shape.resize", { shape: y }) || (g.height = t.getDefaultSize(g).height, g.width = t.getDefaultSize(g).width), y.name = f.name, rt(f, [
      "bpmn:ExclusiveGateway",
      "bpmn:InclusiveGateway",
      "bpmn:Activity"
    ]) && rt(y, [
      "bpmn:ExclusiveGateway",
      "bpmn:InclusiveGateway",
      "bpmn:Activity"
    ]) && (y.default = f.default), l.host && !A(f, "bpmn:BoundaryEvent") && A(y, "bpmn:BoundaryEvent") && (g.host = l.host), (g.type === "bpmn:DataStoreReference" || g.type === "bpmn:DataObjectReference") && (g.x = c.x + (c.width - g.width) / 2), r.replaceElement(c, g, { ...u, targetElement: l });
  }
  this.replaceElement = a;
}
nE.$inject = [
  "bpmnFactory",
  "elementFactory",
  "moddleCopy",
  "modeling",
  "replace",
  "rules"
];
function xl(e) {
  return A(e, "bpmn:SubProcess");
}
function Bv(e, t) {
  var n = he(e);
  return t && n.get("eventDefinitions").some(function(i) {
    return A(i, t);
  });
}
function YM(e, t) {
  return e.filter(function(n) {
    return t.includes(n);
  });
}
const iE = {
  __depends__: [
    eE,
    VM,
    fr
  ],
  bpmnReplace: ["type", nE]
};
var KM = 250;
function aa(e) {
  this._eventBus = e, this._tools = [], this._active = null;
}
aa.$inject = ["eventBus"];
aa.prototype.registerTool = function(e, t) {
  var n = this._tools;
  if (!t)
    throw new Error(`A tool has to be registered with it's "events"`);
  n.push(e), this.bindEvents(e, t);
};
aa.prototype.isActive = function(e) {
  return e && this._active === e;
};
aa.prototype.length = function(e) {
  return this._tools.length;
};
aa.prototype.setActive = function(e) {
  var t = this._eventBus;
  this._active !== e && (this._active = e, t.fire("tool-manager.update", { tool: e }));
};
aa.prototype.bindEvents = function(e, t) {
  var n = this._eventBus, i = [];
  n.on(t.tool + ".init", function(r) {
    var o = r.context;
    if (!o.reactivate && this.isActive(e)) {
      this.setActive(null);
      return;
    }
    this.setActive(e);
  }, this), z(t, function(r) {
    i.push(r + ".ended"), i.push(r + ".canceled");
  }), n.on(i, KM, function(r) {
    this._active && (qM(r) || this.setActive(null));
  }, this);
};
function qM(e) {
  var t = e.originalEvent && e.originalEvent.target;
  return t && lo(t, '.group[data-group="tools"]');
}
const Zu = {
  __depends__: [
    $r
  ],
  __init__: ["toolManager"],
  toolManager: ["type", aa]
};
function XM(e, t) {
  if (e === "x") {
    if (t > 0)
      return "e";
    if (t < 0)
      return "w";
  }
  if (e === "y") {
    if (t > 0)
      return "s";
    if (t < 0)
      return "n";
  }
  return null;
}
function ZM(e, t) {
  var n = [];
  return z(e.concat(t), function(i) {
    var r = i.incoming, o = i.outgoing;
    z(r.concat(o), function(a) {
      var c = a.source, l = a.target;
      (As(e, c) || As(e, l) || As(t, c) || As(t, l)) && (As(n, a) || n.push(a));
    });
  }), n;
}
function As(e, t) {
  return e.indexOf(t) !== -1;
}
function JM(e, t, n) {
  var i = e.x, r = e.y, o = e.width, a = e.height, c = n.x, l = n.y;
  switch (t) {
    case "n":
      return {
        x: i,
        y: r + l,
        width: o,
        height: a - l
      };
    case "s":
      return {
        x: i,
        y: r,
        width: o,
        height: a + l
      };
    case "w":
      return {
        x: i + c,
        y: r,
        width: o - c,
        height: a
      };
    case "e":
      return {
        x: i,
        y: r,
        width: o + c,
        height: a
      };
    default:
      throw new Error("unknown direction: " + t);
  }
}
var sf = Math.abs, QM = Math.round, Rr = {
  x: "width",
  y: "height"
}, rE = "crosshair", Qr = {
  n: "top",
  w: "left",
  s: "bottom",
  e: "right"
}, eD = 1500, El = {
  n: "s",
  w: "e",
  s: "n",
  e: "w"
}, wl = 20;
function Oi(e, t, n, i, r, o, a) {
  this._canvas = e, this._dragging = t, this._eventBus = n, this._modeling = i, this._rules = r, this._toolManager = o, this._mouse = a;
  var c = this;
  o.registerTool("space", {
    tool: "spaceTool.selection",
    dragging: "spaceTool"
  }), n.on("spaceTool.selection.end", function(l) {
    n.once("spaceTool.selection.ended", function() {
      c.activateMakeSpace(l.originalEvent);
    });
  }), n.on("spaceTool.move", eD, function(l) {
    var u = l.context, d = u.initialized;
    d || (d = u.initialized = c.init(l, u)), d && Iv(l);
  }), n.on("spaceTool.end", function(l) {
    var u = l.context, d = u.axis, f = u.direction, y = u.movingShapes, g = u.resizingShapes, _ = u.start;
    if (u.initialized) {
      Iv(l);
      var x = {
        x: 0,
        y: 0
      };
      x[d] = QM(l["d" + d]), c.makeSpace(y, g, x, f, _), n.once("spaceTool.ended", function(w) {
        c.activateSelection(w.originalEvent, !0, !0);
      });
    }
  });
}
Oi.$inject = [
  "canvas",
  "dragging",
  "eventBus",
  "modeling",
  "rules",
  "toolManager",
  "mouse"
];
Oi.prototype.activateSelection = function(e, t, n) {
  this._dragging.init(e, "spaceTool.selection", {
    autoActivate: t,
    cursor: rE,
    data: {
      context: {
        reactivate: n
      }
    },
    trapClick: !1
  });
};
Oi.prototype.activateMakeSpace = function(e) {
  this._dragging.init(e, "spaceTool", {
    autoActivate: !0,
    cursor: rE,
    data: {
      context: {}
    }
  });
};
Oi.prototype.makeSpace = function(e, t, n, i, r) {
  return this._modeling.createSpace(e, t, n, i, r);
};
Oi.prototype.init = function(e, t) {
  var n = sf(e.dx) > sf(e.dy) ? "x" : "y", i = e["d" + n], r = e[n] - i;
  if (sf(i) < 5)
    return !1;
  i < 0 && (i *= -1), zs(e) && (i *= -1);
  var o = XM(n, i), a = this._canvas.getRootElement();
  !ru(e) && e.hover && (a = e.hover);
  var c = [
    ...ec(a, !0),
    ...a.attachers || []
  ], l = this.calculateAdjustments(c, n, i, r), u = this._eventBus.fire("spaceTool.getMinDimensions", {
    axis: n,
    direction: o,
    shapes: l.resizingShapes,
    start: r
  }), d = tD(l, n, o, r, u);
  return G(
    t,
    l,
    {
      axis: n,
      direction: o,
      spaceToolConstraints: d,
      start: r
    }
  ), Du("resize-" + (n === "x" ? "ew" : "ns")), !0;
};
Oi.prototype.calculateAdjustments = function(e, t, n, i) {
  var r = this._rules, o = [], a = [], c = [], l = [];
  function u(y) {
    o.includes(y) || o.push(y);
    var g = y.label;
    g && !o.includes(g) && o.push(g);
  }
  function d(y) {
    a.includes(y) || a.push(y);
  }
  z(e, function(y) {
    if (!(!y.parent || vt(y))) {
      if (kt(y)) {
        l.push(y);
        return;
      }
      var g = y[t], _ = g + y[Rr[t]];
      if (nD(y) && (n > 0 && Fe(y)[t] > i || n < 0 && Fe(y)[t] < i)) {
        c.push(y);
        return;
      }
      if (n > 0 && g > i || n < 0 && _ < i) {
        u(y);
        return;
      }
      if (g < i && _ > i && r.allowed("shape.resize", { shape: y })) {
        d(y);
        return;
      }
    }
  }), z(o, function(y) {
    var g = y.attachers;
    g && z(g, function(_) {
      u(_);
    });
  });
  var f = o.concat(a);
  return z(c, function(y) {
    var g = y.host;
    Wo(f, g) && u(y);
  }), f = o.concat(a), z(l, function(y) {
    var g = y.source, _ = y.target, x = y.label;
    Wo(f, g) && Wo(f, _) && x && u(x);
  }), {
    movingShapes: o,
    resizingShapes: a
  };
};
Oi.prototype.toggle = function() {
  if (this.isActive())
    return this._dragging.cancel();
  var e = this._mouse.getLastMoveEvent();
  this.activateSelection(e, !!e);
};
Oi.prototype.isActive = function() {
  var e = this._dragging.context();
  return e ? /^spaceTool/.test(e.prefix) : !1;
};
function Lv(e) {
  return {
    top: e.top - wl,
    right: e.right + wl,
    bottom: e.bottom + wl,
    left: e.left - wl
  };
}
function Iv(e) {
  var t = e.context, n = t.spaceToolConstraints;
  if (n) {
    var i, r;
    je(n.left) && (i = Math.max(e.x, n.left), e.dx = e.dx + i - e.x, e.x = i), je(n.right) && (i = Math.min(e.x, n.right), e.dx = e.dx + i - e.x, e.x = i), je(n.top) && (r = Math.max(e.y, n.top), e.dy = e.dy + r - e.y, e.y = r), je(n.bottom) && (r = Math.min(e.y, n.bottom), e.dy = e.dy + r - e.y, e.y = r);
  }
}
function tD(e, t, n, i, r) {
  var o = e.movingShapes, a = e.resizingShapes;
  if (a.length) {
    var c = {}, l, u;
    return z(a, function(d) {
      var f = d.attachers, y = d.children, g = Le(d), _ = et(y, function(X) {
        return !kt(X) && !vt(X) && !Wo(o, X) && !Wo(a, X);
      }), x = et(y, function(X) {
        return !kt(X) && !vt(X) && Wo(o, X);
      }), w, D, O, k = [], P = [], N, j, W, $;
      _.length && (D = Lv(Le(nn(_))), w = i - g[Qr[n]] + D[Qr[n]], n === "n" ? c.bottom = u = je(u) ? Math.min(u, w) : w : n === "w" ? c.right = u = je(u) ? Math.min(u, w) : w : n === "s" ? c.top = l = je(l) ? Math.max(l, w) : w : n === "e" && (c.left = l = je(l) ? Math.max(l, w) : w)), x.length && (O = Lv(Le(nn(x))), w = i - O[Qr[El[n]]] + g[Qr[El[n]]], n === "n" ? c.bottom = u = je(u) ? Math.min(u, w) : w : n === "w" ? c.right = u = je(u) ? Math.min(u, w) : w : n === "s" ? c.top = l = je(l) ? Math.max(l, w) : w : n === "e" && (c.left = l = je(l) ? Math.max(l, w) : w)), f && f.length && (f.forEach(function(X) {
        Wo(o, X) ? k.push(X) : P.push(X);
      }), k.length && (N = Le(nn(k.map(Fe))), j = g[Qr[El[n]]] - (N[Qr[El[n]]] - i)), P.length && (W = Le(nn(P.map(Fe))), $ = W[Qr[n]] - (g[Qr[n]] - i)), n === "n" ? (w = Math.min(j || 1 / 0, $ || 1 / 0), c.bottom = u = je(u) ? Math.min(u, w) : w) : n === "w" ? (w = Math.min(j || 1 / 0, $ || 1 / 0), c.right = u = je(u) ? Math.min(u, w) : w) : n === "s" ? (w = Math.max(j || -1 / 0, $ || -1 / 0), c.top = l = je(l) ? Math.max(l, w) : w) : n === "e" && (w = Math.max(j || -1 / 0, $ || -1 / 0), c.left = l = je(l) ? Math.max(l, w) : w));
      var Z = r && r[d.id];
      Z && (n === "n" ? (w = i + d[Rr[t]] - Z[Rr[t]], c.bottom = u = je(u) ? Math.min(u, w) : w) : n === "w" ? (w = i + d[Rr[t]] - Z[Rr[t]], c.right = u = je(u) ? Math.min(u, w) : w) : n === "s" ? (w = i - d[Rr[t]] + Z[Rr[t]], c.top = l = je(l) ? Math.max(l, w) : w) : n === "e" && (w = i - d[Rr[t]] + Z[Rr[t]], c.left = l = je(l) ? Math.max(l, w) : w));
    }), c;
  }
}
function Wo(e, t) {
  return e.indexOf(t) !== -1;
}
function nD(e) {
  return !!e.host;
}
var cf = "djs-dragging", $v = "djs-resizing", iD = 250, Sl = Math.max;
function oE(e, t, n, i, r) {
  function o(a, c) {
    z(a, function(l) {
      r.addDragger(l, c), n.addMarker(l, cf);
    });
  }
  e.on("spaceTool.selection.start", function(a) {
    var c = n.getLayer("space"), l = a.context, u = {
      x: "M 0,-10000 L 0,10000",
      y: "M -10000,0 L 10000,0"
    }, d = Me("g");
    we(d, i.cls("djs-crosshair-group", ["no-events"])), ze(c, d);
    var f = Me("path");
    we(f, "d", u.x), dt(f).add("djs-crosshair"), ze(d, f);
    var y = Me("path");
    we(y, "d", u.y), dt(y).add("djs-crosshair"), ze(d, y), l.crosshairGroup = d;
  }), e.on("spaceTool.selection.move", function(a) {
    var c = a.context.crosshairGroup;
    Cn(c, a.x, a.y);
  }), e.on("spaceTool.selection.cleanup", function(a) {
    var c = a.context, l = c.crosshairGroup;
    l && qt(l);
  }), e.on("spaceTool.move", iD, function(a) {
    var c = a.context, l = c.line, u = c.axis, d = c.movingShapes, f = c.resizingShapes;
    if (c.initialized) {
      if (!c.dragGroup) {
        var y = n.getLayer("space");
        l = Me("path"), we(l, "d", "M0,0 L0,0"), dt(l).add("djs-crosshair"), ze(y, l), c.line = l;
        var g = Me("g");
        we(g, i.cls("djs-drag-group", ["no-events"])), ze(n.getActiveLayer(), g), o(d, g);
        var _ = c.movingConnections = t.filter(function(P) {
          var N = !1;
          z(d, function(Z) {
            z(Z.outgoing, function(X) {
              P === X && (N = !0);
            });
          });
          var j = !1;
          z(d, function(Z) {
            z(Z.incoming, function(X) {
              P === X && (j = !0);
            });
          });
          var W = !1;
          z(f, function(Z) {
            z(Z.outgoing, function(X) {
              P === X && (W = !0);
            });
          });
          var $ = !1;
          return z(f, function(Z) {
            z(Z.incoming, function(X) {
              P === X && ($ = !0);
            });
          }), kt(P) && (N || W) && (j || $);
        });
        o(_, g), c.dragGroup = g;
      }
      if (!c.frameGroup) {
        var x = Me("g");
        we(x, i.cls("djs-frame-group", ["no-events"])), ze(n.getActiveLayer(), x);
        var w = [];
        z(f, function(P) {
          var N = r.addFrame(P, x), j = N.getBBox();
          w.push({
            element: N,
            initialBounds: j
          }), n.addMarker(P, $v);
        }), c.frameGroup = x, c.frames = w;
      }
      var D = {
        x: "M" + a.x + ", -10000 L" + a.x + ", 10000",
        y: "M -10000, " + a.y + " L 10000, " + a.y
      };
      we(l, { d: D[u] });
      var O = { x: "y", y: "x" }, k = { x: a.dx, y: a.dy };
      k[O[c.axis]] = 0, Cn(c.dragGroup, k.x, k.y), z(c.frames, function(P) {
        var N = P.element, j = P.initialBounds, W, $;
        c.direction === "e" ? we(N, {
          width: Sl(j.width + k.x, 5)
        }) : (W = Sl(j.width - k.x, 5), we(N, {
          width: W,
          x: j.x + j.width - W
        })), c.direction === "s" ? we(N, {
          height: Sl(j.height + k.y, 5)
        }) : ($ = Sl(j.height - k.y, 5), we(N, {
          height: $,
          y: j.y + j.height - $
        }));
      });
    }
  }), e.on("spaceTool.cleanup", function(a) {
    var c = a.context, l = c.movingShapes, u = c.movingConnections, d = c.resizingShapes, f = c.line, y = c.dragGroup, g = c.frameGroup;
    z(l, function(_) {
      n.removeMarker(_, cf);
    }), z(u, function(_) {
      n.removeMarker(_, cf);
    }), y && (qt(f), qt(y)), z(d, function(_) {
      n.removeMarker(_, $v);
    }), g && qt(g);
  });
}
oE.$inject = [
  "eventBus",
  "elementRegistry",
  "canvas",
  "styles",
  "previewSupport"
];
const rD = {
  __init__: ["spaceToolPreview"],
  __depends__: [
    $r,
    hr,
    Zu,
    es,
    fc
  ],
  spaceTool: ["type", Oi],
  spaceToolPreview: ["type", oE]
};
function Ju(e) {
  e.invoke(Oi, this);
}
Ju.$inject = [
  "injector"
];
Pe(Ju, Oi);
Ju.prototype.calculateAdjustments = function(e, t, n, i) {
  var r = Oi.prototype.calculateAdjustments.call(this, e, t, n, i);
  return r.resizingShapes = r.resizingShapes.filter(function(o) {
    return !(A(o, "bpmn:TextAnnotation") || oD(o) && (t === "y" && An(o) || t === "x" && !An(o)));
  }), r;
};
function oD(e) {
  return A(e, "bpmn:Participant") && !he(e).processRef;
}
const aE = {
  __depends__: [rD],
  spaceTool: ["type", Ju]
};
function Wt(e, t) {
  this._handlerMap = {}, this._stack = [], this._stackIdx = -1, this._currentExecution = {
    actions: [],
    dirty: [],
    trigger: null
  }, this._injector = t, this._eventBus = e, this._uid = 1, e.on([
    "diagram.destroy",
    "diagram.clear"
  ], function() {
    this.clear(!1);
  }, this);
}
Wt.$inject = ["eventBus", "injector"];
Wt.prototype.execute = function(e, t) {
  if (!e)
    throw new Error("command required");
  this._currentExecution.trigger = "execute";
  const n = { command: e, context: t };
  this._pushAction(n), this._internalExecute(n), this._popAction();
};
Wt.prototype.canExecute = function(e, t) {
  const n = { command: e, context: t }, i = this._getHandler(e);
  let r = this._fire(e, "canExecute", n);
  if (r === void 0) {
    if (!i)
      return !1;
    i.canExecute && (r = i.canExecute(t));
  }
  return r;
};
Wt.prototype.clear = function(e) {
  this._stack.length = 0, this._stackIdx = -1, e !== !1 && this._fire("changed", { trigger: "clear" });
};
Wt.prototype.undo = function() {
  let e = this._getUndoAction(), t;
  if (e) {
    for (this._currentExecution.trigger = "undo", this._pushAction(e); e && (this._internalUndo(e), t = this._getUndoAction(), !(!t || t.id !== e.id)); )
      e = t;
    this._popAction();
  }
};
Wt.prototype.redo = function() {
  let e = this._getRedoAction(), t;
  if (e) {
    for (this._currentExecution.trigger = "redo", this._pushAction(e); e && (this._internalExecute(e, !0), t = this._getRedoAction(), !(!t || t.id !== e.id)); )
      e = t;
    this._popAction();
  }
};
Wt.prototype.register = function(e, t) {
  this._setHandler(e, t);
};
Wt.prototype.registerHandler = function(e, t) {
  if (!e || !t)
    throw new Error("command and handlerCls must be defined");
  const n = this._injector.instantiate(t);
  this.register(e, n);
};
Wt.prototype.canUndo = function() {
  return !!this._getUndoAction();
};
Wt.prototype.canRedo = function() {
  return !!this._getRedoAction();
};
Wt.prototype._getRedoAction = function() {
  return this._stack[this._stackIdx + 1];
};
Wt.prototype._getUndoAction = function() {
  return this._stack[this._stackIdx];
};
Wt.prototype._internalUndo = function(e) {
  const t = e.command, n = e.context, i = this._getHandler(t);
  this._atomicDo(() => {
    this._fire(t, "revert", e), i.revert && this._markDirty(i.revert(n)), this._revertedAction(e), this._fire(t, "reverted", e);
  });
};
Wt.prototype._fire = function(e, t, n) {
  arguments.length < 3 && (n = t, t = null);
  const i = t ? [e + "." + t, t] : [e];
  let r;
  n = this._eventBus.createEvent(n);
  for (const o of i)
    if (r = this._eventBus.fire("commandStack." + o, n), n.cancelBubble)
      break;
  return r;
};
Wt.prototype._createId = function() {
  return this._uid++;
};
Wt.prototype._atomicDo = function(e) {
  const t = this._currentExecution;
  t.atomic = !0;
  try {
    e();
  } finally {
    t.atomic = !1;
  }
};
Wt.prototype._internalExecute = function(e, t) {
  const n = e.command, i = e.context, r = this._getHandler(n);
  if (!r)
    throw new Error("no command handler registered for <" + n + ">");
  this._pushAction(e), t || (this._fire(n, "preExecute", e), r.preExecute && r.preExecute(i), this._fire(n, "preExecuted", e)), this._atomicDo(() => {
    this._fire(n, "execute", e), r.execute && this._markDirty(r.execute(i)), this._executedAction(e, t), this._fire(n, "executed", e);
  }), t || (this._fire(n, "postExecute", e), r.postExecute && r.postExecute(i), this._fire(n, "postExecuted", e)), this._popAction();
};
Wt.prototype._pushAction = function(e) {
  const t = this._currentExecution, n = t.actions, i = n[0];
  if (t.atomic)
    throw new Error("illegal invocation in <execute> or <revert> phase (action: " + e.command + ")");
  e.id || (e.id = i && i.id || this._createId()), n.push(e);
};
Wt.prototype._popAction = function() {
  const e = this._currentExecution, t = e.trigger, n = e.actions, i = e.dirty;
  n.pop(), n.length || (this._eventBus.fire("elements.changed", { elements: r_("id", i.reverse()) }), i.length = 0, this._fire("changed", { trigger: t }), e.trigger = null);
};
Wt.prototype._markDirty = function(e) {
  const t = this._currentExecution;
  e && (e = nt(e) ? e : [e], t.dirty = t.dirty.concat(e));
};
Wt.prototype._executedAction = function(e, t) {
  const n = ++this._stackIdx;
  t || this._stack.splice(n, this._stack.length, e);
};
Wt.prototype._revertedAction = function(e) {
  this._stackIdx--;
};
Wt.prototype._getHandler = function(e) {
  return this._handlerMap[e];
};
Wt.prototype._setHandler = function(e, t) {
  if (!e || !t)
    throw new Error("command and handler required");
  if (this._handlerMap[e])
    throw new Error("overriding handler for command <" + e + ">");
  this._handlerMap[e] = t;
};
const aD = {
  commandStack: ["type", Wt]
};
function ro(e, t) {
  if (typeof t != "function")
    throw new Error("removeFn iterator must be a function");
  if (e) {
    for (var n; n = e[0]; )
      t(n);
    return e;
  }
}
var sD = 250, jv = 1400;
function zh(e, t, n) {
  le.call(this, t);
  var i = e.get("movePreview", !1);
  t.on("shape.move.start", jv, function(r) {
    var o = r.context, a = o.shapes, c = o.validatedShapes;
    o.shapes = Fv(a), o.validatedShapes = Fv(c);
  }), i && t.on("shape.move.start", sD, function(r) {
    var o = r.context, a = o.shapes, c = [];
    z(a, function(l) {
      z(l.labels, function(u) {
        !u.hidden && o.shapes.indexOf(u) === -1 && c.push(u), l.labelTarget && c.push(l);
      });
    }), z(c, function(l) {
      i.makeDraggable(o, l, !0);
    });
  }), this.preExecuted("elements.move", jv, function(r) {
    var o = r.context, a = o.closure, c = a.enclosedElements, l = [];
    z(c, function(u) {
      z(u.labels, function(d) {
        c[d.id] || l.push(d);
      });
    }), a.addAll(l);
  }), this.preExecute([
    "connection.delete",
    "shape.delete"
  ], function(r) {
    var o = r.context, a = o.connection || o.shape;
    ro(a.labels, function(c) {
      n.removeShape(c, { nested: !0 });
    });
  }), this.execute("shape.delete", function(r) {
    var o = r.context, a = o.shape, c = a.labelTarget;
    c && (o.labelTargetIndex = _d(c.labels, a), o.labelTarget = c, a.labelTarget = null);
  }), this.revert("shape.delete", function(r) {
    var o = r.context, a = o.shape, c = o.labelTarget, l = o.labelTargetIndex;
    c && (pn(c.labels, a, l), a.labelTarget = c);
  });
}
Pe(zh, le);
zh.$inject = [
  "injector",
  "eventBus",
  "modeling"
];
function Fv(e) {
  return et(e, function(t) {
    return e.indexOf(t.labelTarget) === -1;
  });
}
const cD = {
  __init__: ["labelSupport"],
  labelSupport: ["type", zh]
};
var lD = 251, Hv = 1401, zv = "attach-ok";
function Vh(e, t, n, i, r) {
  le.call(this, t);
  var o = e.get("movePreview", !1);
  t.on("shape.move.start", Hv, function(a) {
    var c = a.context, l = c.shapes, u = c.validatedShapes;
    c.shapes = uD(l), c.validatedShapes = pD(u);
  }), o && t.on("shape.move.start", lD, function(a) {
    var c = a.context, l = c.shapes, u = od(l);
    z(u, function(d) {
      o.makeDraggable(c, d, !0), z(d.labels, function(f) {
        o.makeDraggable(c, f, !0);
      });
    });
  }), o && t.on("shape.move.start", function(a) {
    var c = a.context, l = c.shapes;
    if (l.length === 1) {
      var u = l[0], d = u.host;
      d && (n.addMarker(d, zv), t.once([
        "shape.move.out",
        "shape.move.cleanup"
      ], function() {
        n.removeMarker(d, zv);
      }));
    }
  }), this.preExecuted("elements.move", Hv, function(a) {
    var c = a.context, l = c.closure, u = c.shapes, d = od(u);
    z(d, function(f) {
      l.add(f, l.topLevel[f.host.id]);
    });
  }), this.postExecuted("elements.move", function(a) {
    var c = a.context, l = c.shapes, u = c.newHost, d;
    u && l.length !== 1 || (u ? d = l : d = et(l, function(f) {
      var y = f.host;
      return fD(f) && !dD(l, y);
    }), z(d, function(f) {
      r.updateAttachment(f, u);
    }));
  }), this.postExecuted("elements.move", function(a) {
    var c = a.context.shapes;
    z(c, function(l) {
      z(l.attachers, function(u) {
        z(u.outgoing.slice(), function(d) {
          var f = i.allowed("connection.reconnect", {
            connection: d,
            source: d.source,
            target: d.target
          });
          f || r.removeConnection(d);
        }), z(u.incoming.slice(), function(d) {
          var f = i.allowed("connection.reconnect", {
            connection: d,
            source: d.source,
            target: d.target
          });
          f || r.removeConnection(d);
        });
      });
    });
  }), this.postExecute("shape.create", function(a) {
    var c = a.context, l = c.shape, u = c.host;
    u && r.updateAttachment(l, u);
  }), this.postExecute("shape.replace", function(a) {
    var c = a.context, l = c.oldShape, u = c.newShape;
    ro(l.attachers, function(d) {
      var f = i.allowed("elements.move", {
        target: u,
        shapes: [d]
      });
      f === "attach" ? r.updateAttachment(d, u) : r.removeShape(d);
    }), u.attachers.length && z(u.attachers, function(d) {
      var f = gv(d, l, u);
      r.moveShape(d, f, d.parent);
    });
  }), this.postExecute("shape.resize", function(a) {
    var c = a.context, l = c.shape, u = c.oldBounds, d = c.newBounds, f = l.attachers, y = c.hints || {};
    y.attachSupport !== !1 && z(f, function(g) {
      var _ = gv(g, u, d);
      r.moveShape(g, _, g.parent), z(g.labels, function(x) {
        r.moveShape(x, _, x.parent);
      });
    });
  }), this.preExecute("shape.delete", function(a) {
    var c = a.context.shape;
    ro(c.attachers, function(l) {
      r.removeShape(l);
    }), c.host && r.updateAttachment(c, null);
  });
}
Pe(Vh, le);
Vh.$inject = [
  "injector",
  "eventBus",
  "canvas",
  "rules",
  "modeling"
];
function od(e) {
  return ql(mn(e, function(t) {
    return t.attachers || [];
  }));
}
function uD(e) {
  var t = od(e);
  return sS("id", e, t);
}
function pD(e) {
  var t = Ga(e, "id");
  return et(e, function(n) {
    for (; n; ) {
      if (n.host && t[n.host.id])
        return !1;
      n = n.parent;
    }
    return !0;
  });
}
function fD(e) {
  return !!e.host;
}
function dD(e, t) {
  return e.indexOf(t) !== -1;
}
const hD = {
  __depends__: [
    hr
  ],
  __init__: ["attachSupport"],
  attachSupport: ["type", Vh]
};
function Ni(e) {
  this._model = e;
}
Ni.$inject = ["moddle"];
Ni.prototype._needsId = function(e) {
  return rt(e, [
    "bpmn:RootElement",
    "bpmn:FlowElement",
    "bpmn:MessageFlow",
    "bpmn:DataAssociation",
    "bpmn:Artifact",
    "bpmn:Participant",
    "bpmn:Lane",
    "bpmn:LaneSet",
    "bpmn:Process",
    "bpmn:Collaboration",
    "bpmndi:BPMNShape",
    "bpmndi:BPMNEdge",
    "bpmndi:BPMNDiagram",
    "bpmndi:BPMNPlane",
    "bpmn:Property",
    "bpmn:CategoryValue"
  ]);
};
Ni.prototype._ensureId = function(e) {
  if (e.id) {
    this._model.ids.claim(e.id, e);
    return;
  }
  var t;
  A(e, "bpmn:Activity") ? t = "Activity" : A(e, "bpmn:Event") ? t = "Event" : A(e, "bpmn:Gateway") ? t = "Gateway" : rt(e, ["bpmn:SequenceFlow", "bpmn:MessageFlow"]) ? t = "Flow" : t = (e.$type || "").replace(/^[^:]*:/g, ""), t += "_", !e.id && this._needsId(e) && (e.id = this._model.ids.nextPrefixed(t, e));
};
Ni.prototype.create = function(e, t) {
  var n = this._model.create(e, t || {});
  return this._ensureId(n), n;
};
Ni.prototype.createDiLabel = function() {
  return this.create("bpmndi:BPMNLabel", {
    bounds: this.createDiBounds()
  });
};
Ni.prototype.createDiShape = function(e, t) {
  return this.create("bpmndi:BPMNShape", G({
    bpmnElement: e,
    bounds: this.createDiBounds()
  }, t));
};
Ni.prototype.createDiBounds = function(e) {
  return this.create("dc:Bounds", e);
};
Ni.prototype.createDiWaypoints = function(e) {
  var t = this;
  return mn(e, function(n) {
    return t.createDiWaypoint(n);
  });
};
Ni.prototype.createDiWaypoint = function(e) {
  return this.create("dc:Point", Ui(e, ["x", "y"]));
};
Ni.prototype.createDiEdge = function(e, t) {
  return this.create("bpmndi:BPMNEdge", G({
    bpmnElement: e,
    waypoint: this.createDiWaypoints([])
  }, t));
};
Ni.prototype.createDiPlane = function(e, t) {
  return this.create("bpmndi:BPMNPlane", G({
    bpmnElement: e
  }, t));
};
function pi(e, t, n) {
  le.call(this, e), this._bpmnFactory = t;
  var i = this;
  function r(g) {
    var _ = g.context, x = _.hints || {}, w;
    !_.cropped && x.createElementsBehavior !== !1 && (w = _.connection, w.waypoints = n.getCroppedWaypoints(w), _.cropped = !0);
  }
  this.executed([
    "connection.layout",
    "connection.create"
  ], r), this.reverted(["connection.layout"], function(g) {
    delete g.context.cropped;
  });
  function o(g) {
    var _ = g.context;
    i.updateParent(_.shape || _.connection, _.oldParent);
  }
  function a(g) {
    var _ = g.context, x = _.shape || _.connection, w = _.parent || _.newParent;
    i.updateParent(x, w);
  }
  this.executed([
    "shape.move",
    "shape.create",
    "shape.delete",
    "connection.create",
    "connection.move",
    "connection.delete"
  ], oi(o)), this.reverted([
    "shape.move",
    "shape.create",
    "shape.delete",
    "connection.create",
    "connection.move",
    "connection.delete"
  ], oi(a));
  function c(g) {
    var _ = g.context, x = _.oldRoot, w = x.children;
    z(w, function(D) {
      A(D, "bpmn:BaseElement") && i.updateParent(D);
    });
  }
  this.executed(["canvas.updateRoot"], c), this.reverted(["canvas.updateRoot"], c);
  function l(g) {
    var _ = g.context.shape;
    A(_, "bpmn:BaseElement") && i.updateBounds(_);
  }
  this.executed(["shape.move", "shape.create", "shape.resize"], oi(function(g) {
    g.context.shape.type !== "label" && l(g);
  })), this.reverted(["shape.move", "shape.create", "shape.resize"], oi(function(g) {
    g.context.shape.type !== "label" && l(g);
  })), e.on("shape.changed", function(g) {
    g.element.type === "label" && l({ context: { shape: g.element } });
  });
  function u(g) {
    i.updateConnection(g.context);
  }
  this.executed([
    "connection.create",
    "connection.move",
    "connection.delete",
    "connection.reconnect"
  ], oi(u)), this.reverted([
    "connection.create",
    "connection.move",
    "connection.delete",
    "connection.reconnect"
  ], oi(u));
  function d(g) {
    i.updateConnectionWaypoints(g.context.connection);
  }
  this.executed([
    "connection.layout",
    "connection.move",
    "connection.updateWaypoints"
  ], oi(d)), this.reverted([
    "connection.layout",
    "connection.move",
    "connection.updateWaypoints"
  ], oi(d)), this.executed("connection.reconnect", oi(function(g) {
    var _ = g.context, x = _.connection, w = _.oldSource, D = _.newSource, O = he(x), k = he(w), P = he(D);
    O.conditionExpression && !rt(P, [
      "bpmn:Activity",
      "bpmn:ExclusiveGateway",
      "bpmn:InclusiveGateway"
    ]) && (_.oldConditionExpression = O.conditionExpression, delete O.conditionExpression), w !== D && k.default === O && (_.oldDefault = k.default, delete k.default);
  })), this.reverted("connection.reconnect", oi(function(g) {
    var _ = g.context, x = _.connection, w = _.oldSource, D = _.newSource, O = he(x), k = he(w), P = he(D);
    _.oldConditionExpression && (O.conditionExpression = _.oldConditionExpression), _.oldDefault && (k.default = _.oldDefault, delete P.default);
  }));
  function f(g) {
    i.updateAttachment(g.context);
  }
  this.executed(["element.updateAttachment"], oi(f)), this.reverted(["element.updateAttachment"], oi(f)), this.executed("element.updateLabel", oi(y)), this.reverted("element.updateLabel", oi(y));
  function y(g) {
    const { element: _ } = g.context, x = ki(_), w = bt(_), D = w && w.get("label");
    Zo(_) || jl(_) || (x && !D ? w.set("label", t.create("bpmndi:BPMNLabel")) : !x && D && w.set("label", void 0));
  }
}
Pe(pi, le);
pi.$inject = [
  "eventBus",
  "bpmnFactory",
  "connectionDocking"
];
pi.prototype.updateAttachment = function(e) {
  var t = e.shape, n = t.businessObject, i = t.host;
  n.attachedToRef = i && i.businessObject;
};
pi.prototype.updateParent = function(e, t) {
  if (!vt(e) && !(A(e, "bpmn:DataStoreReference") && e.parent && A(e.parent, "bpmn:Collaboration"))) {
    var n = e.parent, i = e.businessObject, r = bt(e), o = n && n.businessObject, a = bt(n);
    A(e, "bpmn:FlowNode") && this.updateFlowNodeRefs(i, o, t && t.businessObject), A(e, "bpmn:DataOutputAssociation") && (e.source ? o = e.source.businessObject : o = null), A(e, "bpmn:DataInputAssociation") && (e.target ? o = e.target.businessObject : o = null), this.updateSemanticParent(i, o), A(e, "bpmn:DataObjectReference") && i.dataObjectRef && this.updateSemanticParent(i.dataObjectRef, o), this.updateDiParent(r, a);
  }
};
pi.prototype.updateBounds = function(e) {
  var t = bt(e), n = yD(e);
  if (n) {
    var i = Vi(n, t.get("bounds"));
    G(n, {
      x: e.x + i.x,
      y: e.y + i.y
    });
  }
  var r = vt(e) ? this._getLabel(t) : t, o = r.bounds;
  o || (o = this._bpmnFactory.createDiBounds(), r.set("bounds", o)), G(o, {
    x: e.x,
    y: e.y,
    width: e.width,
    height: e.height
  });
};
pi.prototype.updateFlowNodeRefs = function(e, t, n) {
  if (n !== t) {
    var i, r;
    A(n, "bpmn:Lane") && (i = n.get("flowNodeRef"), rn(i, e)), A(t, "bpmn:Lane") && (r = t.get("flowNodeRef"), pn(r, e));
  }
};
pi.prototype.updateDiConnection = function(e, t, n) {
  var i = bt(e), r = bt(t), o = bt(n);
  i.sourceElement && i.sourceElement.bpmnElement !== he(t) && (i.sourceElement = t && r), i.targetElement && i.targetElement.bpmnElement !== he(n) && (i.targetElement = n && o);
};
pi.prototype.updateDiParent = function(e, t) {
  if (t && !A(t, "bpmndi:BPMNPlane") && (t = t.$parent), e.$parent !== t) {
    var n = (t || e.$parent).get("planeElement");
    t ? (n.push(e), e.$parent = t) : (rn(n, e), e.$parent = null);
  }
};
function mD(e) {
  for (; e && !A(e, "bpmn:Definitions"); )
    e = e.$parent;
  return e;
}
pi.prototype.getLaneSet = function(e) {
  var t, n;
  return A(e, "bpmn:Lane") ? (t = e.childLaneSet, t || (t = this._bpmnFactory.create("bpmn:LaneSet"), e.childLaneSet = t, t.$parent = e), t) : (A(e, "bpmn:Participant") && (e = e.processRef), n = e.get("laneSets"), t = n[0], t || (t = this._bpmnFactory.create("bpmn:LaneSet"), t.$parent = e, n.push(t)), t);
};
pi.prototype.updateSemanticParent = function(e, t, n) {
  var i;
  if (e.$parent !== t && !((A(e, "bpmn:DataInput") || A(e, "bpmn:DataOutput")) && (A(t, "bpmn:Participant") && "processRef" in t && (t = t.processRef), "ioSpecification" in t && t.ioSpecification === e.$parent))) {
    if (A(e, "bpmn:Lane"))
      t && (t = this.getLaneSet(t)), i = "lanes";
    else if (A(e, "bpmn:FlowElement")) {
      if (t) {
        if (A(t, "bpmn:Participant"))
          t = t.processRef;
        else if (A(t, "bpmn:Lane"))
          do
            t = t.$parent.$parent;
          while (A(t, "bpmn:Lane"));
      }
      i = "flowElements";
    } else if (A(e, "bpmn:Artifact")) {
      for (; t && !A(t, "bpmn:Process") && !A(t, "bpmn:SubProcess") && !A(t, "bpmn:Collaboration"); )
        if (A(t, "bpmn:Participant")) {
          t = t.processRef;
          break;
        } else
          t = t.$parent;
      i = "artifacts";
    } else if (A(e, "bpmn:MessageFlow"))
      i = "messageFlows";
    else if (A(e, "bpmn:Participant")) {
      i = "participants";
      var r = e.processRef, o;
      r && (o = mD(e.$parent || t), e.$parent && (rn(o.get("rootElements"), r), r.$parent = null), t && (pn(o.get("rootElements"), r), r.$parent = o));
    } else
      A(e, "bpmn:DataOutputAssociation") ? i = "dataOutputAssociations" : A(e, "bpmn:DataInputAssociation") && (i = "dataInputAssociations");
    if (!i)
      throw new Error(`no parent for <${e.id}> in <${t.id}>`);
    var a;
    if (e.$parent && (a = e.$parent.get(i), rn(a, e)), t ? (a = t.get(i), a.push(e), e.$parent = t) : e.$parent = null, n) {
      var c = n.get(i);
      rn(a, e), t && (c || (c = [], t.set(i, c)), c.push(e));
    }
  }
};
pi.prototype.updateConnectionWaypoints = function(e) {
  var t = bt(e);
  t.set("waypoint", this._bpmnFactory.createDiWaypoints(e.waypoints));
};
pi.prototype.updateConnection = function(e) {
  var t = e.connection, n = he(t), i = t.source, r = he(i), o = t.target, a = he(t.target), c;
  if (A(n, "bpmn:DataAssociation"))
    A(n, "bpmn:DataInputAssociation") ? (n.get("sourceRef")[0] = r, c = e.parent || e.newParent || a, this.updateSemanticParent(n, a, c)) : A(n, "bpmn:DataOutputAssociation") && (c = e.parent || e.newParent || r, this.updateSemanticParent(n, r, c), n.targetRef = a);
  else {
    var l = A(n, "bpmn:SequenceFlow");
    n.sourceRef !== r && (l && (rn(n.sourceRef && n.sourceRef.get("outgoing"), n), r && r.get("outgoing") && r.get("outgoing").push(n)), n.sourceRef = r), n.targetRef !== a && (l && (rn(n.targetRef && n.targetRef.get("incoming"), n), a && a.get("incoming") && a.get("incoming").push(n)), n.targetRef = a);
  }
  this.updateConnectionWaypoints(t), this.updateDiConnection(t, i, o);
};
pi.prototype._getLabel = function(e) {
  return e.label || (e.label = this._bpmnFactory.createDiLabel()), e.label;
};
function oi(e) {
  return function(t) {
    var n = t.context, i = n.shape || n.connection || n.element;
    A(i, "bpmn:BaseElement") && e(t);
  };
}
function yD(e) {
  if (A(e, "bpmn:Activity")) {
    var t = bt(e);
    if (t) {
      var n = t.get("label");
      if (n)
        return n.get("bounds");
    }
  }
}
function bo(e, t) {
  Nr.call(this), this._bpmnFactory = e, this._moddle = t;
}
Pe(bo, Nr);
bo.$inject = [
  "bpmnFactory",
  "moddle"
];
bo.prototype._baseCreate = Nr.prototype.create;
bo.prototype.create = function(e, t) {
  if (e === "label") {
    var n = t.di || this._bpmnFactory.createDiLabel();
    return this._baseCreate(e, G({ type: "label", di: n }, Fs, t));
  }
  return this.createElement(e, t);
};
bo.prototype.createElement = function(e, t) {
  t = G({}, t || {});
  var n, i = t.businessObject, r = t.di;
  if (!i) {
    if (!t.type)
      throw new Error("no shape type specified");
    i = this._bpmnFactory.create(t.type), q_(i);
  }
  if (!vD(r)) {
    var o = G(
      {},
      r || {},
      { id: i.id + "_di" }
    );
    e === "root" ? r = this._bpmnFactory.createDiPlane(i, o) : e === "connection" ? r = this._bpmnFactory.createDiEdge(i, o) : r = this._bpmnFactory.createDiShape(i, o);
  }
  A(i, "bpmn:Group") && (t = G({
    isFrame: !0
  }, t)), t = gD(i, t, [
    "processRef",
    "isInterrupting",
    "associationDirection",
    "isForCompensation"
  ]), t.isExpanded && (t = ad(r, t, "isExpanded")), rt(i, ["bpmn:Lane", "bpmn:Participant"]) && (t = ad(r, t, "isHorizontal")), A(i, "bpmn:SubProcess") && (t.collapsed = !pt(i, r)), A(i, "bpmn:ExclusiveGateway") && (Zn(r, "isMarkerVisible") ? r.isMarkerVisible === void 0 && (r.isMarkerVisible = !1) : r.isMarkerVisible = !0), dn(t.triggeredByEvent) && (i.triggeredByEvent = t.triggeredByEvent, delete t.triggeredByEvent), dn(t.cancelActivity) && (i.cancelActivity = t.cancelActivity, delete t.cancelActivity);
  var a, c;
  return t.eventDefinitionType && (a = i.get("eventDefinitions") || [], c = this._bpmnFactory.create(t.eventDefinitionType, t.eventDefinitionAttrs), t.eventDefinitionType === "bpmn:ConditionalEventDefinition" && (c.condition = this._bpmnFactory.create("bpmn:FormalExpression")), a.push(c), c.$parent = i, i.eventDefinitions = a, delete t.eventDefinitionType), n = this.getDefaultSize(i, r), t = G({
    id: i.id
  }, n, t, {
    businessObject: i,
    di: r
  }), this._baseCreate(e, t);
};
bo.prototype.getDefaultSize = function(e, t) {
  var n = he(e);
  return t = t || bt(e), A(n, "bpmn:SubProcess") ? pt(n, t) ? { width: 350, height: 200 } : { width: 100, height: 80 } : A(n, "bpmn:Task") ? { width: 100, height: 80 } : A(n, "bpmn:Gateway") ? { width: 50, height: 50 } : A(n, "bpmn:Event") ? { width: 36, height: 36 } : A(n, "bpmn:Participant") ? pt(n, t) ? { width: 600, height: 250 } : { width: 400, height: 60 } : A(n, "bpmn:Lane") ? { width: 400, height: 100 } : A(n, "bpmn:DataObjectReference") ? { width: 36, height: 50 } : A(n, "bpmn:DataStoreReference") ? { width: 50, height: 50 } : A(n, "bpmn:TextAnnotation") ? { width: 100, height: 30 } : A(n, "bpmn:Group") ? { width: 300, height: 300 } : { width: 100, height: 80 };
};
bo.prototype.createParticipantShape = function(e) {
  return yn(e) || (e = { isExpanded: e }), e = G({ type: "bpmn:Participant" }, e || {}), e.isExpanded !== !1 && (e.processRef = this._bpmnFactory.create("bpmn:Process")), this.createShape(e);
};
function gD(e, t, n) {
  return z(n, function(i) {
    t = ad(e, t, i);
  }), t;
}
function ad(e, t, n) {
  return t[n] === void 0 ? t : (e[n] = t[n], pr(t, [n]));
}
function vD(e) {
  return rt(e, [
    "bpmndi:BPMNShape",
    "bpmndi:BPMNEdge",
    "bpmndi:BPMNDiagram",
    "bpmndi:BPMNPlane"
  ]);
}
function Qu(e, t) {
  this._modeling = e, this._canvas = t;
}
Qu.$inject = ["modeling", "canvas"];
Qu.prototype.preExecute = function(e) {
  var t = this._modeling, n = e.elements, i = e.alignment;
  z(n, function(r) {
    var o = {
      x: 0,
      y: 0
    };
    dn(i.left) ? o.x = i.left - r.x : dn(i.right) ? o.x = i.right - r.width - r.x : dn(i.center) ? o.x = i.center - Math.round(r.width / 2) - r.x : dn(i.top) ? o.y = i.top - r.y : dn(i.bottom) ? o.y = i.bottom - r.height - r.y : dn(i.middle) && (o.y = i.middle - Math.round(r.height / 2) - r.y), t.moveElements([r], o, r.parent);
  });
};
Qu.prototype.postExecute = function(e) {
};
function ep(e) {
  this._modeling = e;
}
ep.$inject = ["modeling"];
ep.prototype.preExecute = function(e) {
  var t = e.source;
  if (!t)
    throw new Error("source required");
  var n = e.target || t.parent, i = e.shape, r = e.hints || {};
  i = e.shape = this._modeling.createShape(
    i,
    e.position,
    n,
    { attach: r.attach }
  ), e.shape = i;
};
ep.prototype.postExecute = function(e) {
  var t = e.hints || {};
  _D(e.source, e.shape) || (t.connectionTarget === e.source ? this._modeling.connect(e.shape, e.source, e.connection) : this._modeling.connect(e.source, e.shape, e.connection));
};
function _D(e, t) {
  return Dr(e.outgoing, function(n) {
    return n.target === t;
  });
}
function tp(e, t) {
  this._canvas = e, this._layouter = t;
}
tp.$inject = ["canvas", "layouter"];
tp.prototype.execute = function(e) {
  var t = e.connection, n = e.source, i = e.target, r = e.parent, o = e.parentIndex, a = e.hints;
  if (!n || !i)
    throw new Error("source and target required");
  if (!r)
    throw new Error("parent required");
  return t.source = n, t.target = i, t.waypoints || (t.waypoints = this._layouter.layoutConnection(t, a)), this._canvas.addConnection(t, r, o), t;
};
tp.prototype.revert = function(e) {
  var t = e.connection;
  return this._canvas.removeConnection(t), t.source = null, t.target = null, t;
};
var Rl = Math.round;
function Wh(e) {
  this._modeling = e;
}
Wh.$inject = [
  "modeling"
];
Wh.prototype.preExecute = function(e) {
  var t = e.elements, n = e.parent, i = e.parentIndex, r = e.position, o = e.hints, a = this._modeling;
  z(t, function(f) {
    je(f.x) || (f.x = 0), je(f.y) || (f.y = 0);
  });
  var c = et(t, function(f) {
    return !f.hidden;
  }), l = nn(c);
  z(t, function(f) {
    kt(f) && (f.waypoints = mn(f.waypoints, function(y) {
      return {
        x: Rl(y.x - l.x - l.width / 2 + r.x),
        y: Rl(y.y - l.y - l.height / 2 + r.y)
      };
    })), G(f, {
      x: Rl(f.x - l.x - l.width / 2 + r.x),
      y: Rl(f.y - l.y - l.height / 2 + r.y)
    });
  });
  var u = vu(t), d = {};
  z(t, function(f) {
    if (kt(f)) {
      d[f.id] = je(i) ? a.createConnection(
        d[f.source.id],
        d[f.target.id],
        i,
        f,
        f.parent || n,
        o
      ) : a.createConnection(
        d[f.source.id],
        d[f.target.id],
        f,
        f.parent || n,
        o
      );
      return;
    }
    var y = G({}, o);
    u.indexOf(f) === -1 && (y.autoResize = !1), vt(f) && (y = pr(y, ["attach"])), d[f.id] = je(i) ? a.createShape(
      f,
      Ui(f, ["x", "y", "width", "height"]),
      f.parent || n,
      i,
      y
    ) : a.createShape(
      f,
      Ui(f, ["x", "y", "width", "height"]),
      f.parent || n,
      y
    );
  }), e.elements = hd(d);
};
var Vv = Math.round;
function xo(e) {
  this._canvas = e;
}
xo.$inject = ["canvas"];
xo.prototype.execute = function(e) {
  var t = e.shape, n = e.position, i = e.parent, r = e.parentIndex;
  if (!i)
    throw new Error("parent required");
  if (!n)
    throw new Error("position required");
  return n.width !== void 0 ? G(t, n) : G(t, {
    x: n.x - Vv(t.width / 2),
    y: n.y - Vv(t.height / 2)
  }), this._canvas.addShape(t, i, r), t;
};
xo.prototype.revert = function(e) {
  var t = e.shape;
  return this._canvas.removeShape(t), t;
};
function hc(e) {
  xo.call(this, e);
}
Pe(hc, xo);
hc.$inject = ["canvas"];
var bD = xo.prototype.execute;
hc.prototype.execute = function(e) {
  var t = e.shape;
  return ED(t), t.labelTarget = e.labelTarget, bD.call(this, e);
};
var xD = xo.prototype.revert;
hc.prototype.revert = function(e) {
  return e.shape.labelTarget = null, xD.call(this, e);
};
function ED(e) {
  ["width", "height"].forEach(function(t) {
    typeof e[t] > "u" && (e[t] = 0);
  });
}
function mc(e, t) {
  this._canvas = e, this._modeling = t;
}
mc.$inject = [
  "canvas",
  "modeling"
];
mc.prototype.preExecute = function(e) {
  var t = this._modeling, n = e.connection;
  ro(n.incoming, function(i) {
    t.removeConnection(i, { nested: !0 });
  }), ro(n.outgoing, function(i) {
    t.removeConnection(i, { nested: !0 });
  });
};
mc.prototype.execute = function(e) {
  var t = e.connection, n = t.parent;
  return e.parent = n, e.parentIndex = _d(n.children, t), e.source = t.source, e.target = t.target, this._canvas.removeConnection(t), t.source = null, t.target = null, t;
};
mc.prototype.revert = function(e) {
  var t = e.connection, n = e.parent, i = e.parentIndex;
  return t.source = e.source, t.target = e.target, pn(n.children, t, i), this._canvas.addConnection(t, n), t;
};
function Gh(e, t) {
  this._modeling = e, this._elementRegistry = t;
}
Gh.$inject = [
  "modeling",
  "elementRegistry"
];
Gh.prototype.postExecute = function(e) {
  var t = this._modeling, n = this._elementRegistry, i = e.elements;
  z(i, function(r) {
    n.get(r.id) && (r.waypoints ? t.removeConnection(r) : t.removeShape(r));
  });
};
function yc(e, t) {
  this._canvas = e, this._modeling = t;
}
yc.$inject = ["canvas", "modeling"];
yc.prototype.preExecute = function(e) {
  var t = this._modeling, n = e.shape;
  ro(n.incoming, function(i) {
    t.removeConnection(i, { nested: !0 });
  }), ro(n.outgoing, function(i) {
    t.removeConnection(i, { nested: !0 });
  }), ro(n.children, function(i) {
    kt(i) ? t.removeConnection(i, { nested: !0 }) : t.removeShape(i, { nested: !0 });
  });
};
yc.prototype.execute = function(e) {
  var t = this._canvas, n = e.shape, i = n.parent;
  return e.oldParent = i, e.oldParentIndex = _d(i.children, n), t.removeShape(n), n;
};
yc.prototype.revert = function(e) {
  var t = this._canvas, n = e.shape, i = e.oldParent, r = e.oldParentIndex;
  return pn(i.children, n, r), t.addShape(n, i), n;
};
function np(e) {
  this._modeling = e;
}
np.$inject = ["modeling"];
var Wv = {
  x: "y",
  y: "x"
};
np.prototype.preExecute = function(e) {
  var t = this._modeling, n = e.groups, i = e.axis, r = e.dimension;
  function o(w, D) {
    w.range.min = Math.min(D[i], w.range.min), w.range.max = Math.max(D[i] + D[r], w.range.max);
  }
  function a(w) {
    return w[i] + w[r] / 2;
  }
  function c(w) {
    return w.length - 1;
  }
  function l(w) {
    return w.max - w.min;
  }
  function u(w, D) {
    var O = { y: 0 };
    O[i] = w - a(D), O[i] && (O[Wv[i]] = 0, t.moveElements([D], O, D.parent));
  }
  var d = n[0], f = c(n), y = n[f], g, _, x = 0;
  z(n, function(w, D) {
    var O, k, P;
    if (w.elements.length < 2) {
      D && D !== n.length - 1 && (o(w, w.elements[0]), x += l(w.range));
      return;
    }
    O = Gi(w.elements, i), k = O[0], D === f && (k = O[c(O)]), P = a(k), w.range = null, z(O, function(N) {
      if (u(P, N), w.range === null) {
        w.range = {
          min: N[i],
          max: N[i] + N[r]
        };
        return;
      }
      o(w, N);
    }), D && D !== n.length - 1 && (x += l(w.range));
  }), _ = Math.abs(y.range.min - d.range.max), g = Math.round((_ - x) / (n.length - 1)), !(g < n.length - 1) && z(n, function(w, D) {
    var O = {}, k;
    w === d || w === y || (k = n[D - 1], w.range.max = 0, z(w.elements, function(P, N) {
      O[Wv[i]] = 0, O[i] = k.range.max - P[i] + g, w.range.min !== P[i] && (O[i] += P[i] - w.range.min), O[i] && t.moveElements([P], O, P.parent), w.range.max = Math.max(P[i] + P[r], N ? w.range.max : 0);
    }));
  });
};
np.prototype.postExecute = function(e) {
};
function ip(e, t) {
  this._layouter = e, this._canvas = t;
}
ip.$inject = ["layouter", "canvas"];
ip.prototype.execute = function(e) {
  var t = e.connection, n = t.waypoints;
  return G(e, {
    oldWaypoints: n
  }), t.waypoints = this._layouter.layoutConnection(t, e.hints), t;
};
ip.prototype.revert = function(e) {
  var t = e.connection;
  return t.waypoints = e.oldWaypoints, t;
};
function Uh() {
}
Uh.prototype.execute = function(e) {
  var t = e.connection, n = e.delta, i = e.newParent || t.parent, r = e.newParentIndex, o = t.parent;
  return e.oldParent = o, e.oldParentIndex = rn(o.children, t), pn(i.children, t, r), t.parent = i, z(t.waypoints, function(a) {
    a.x += n.x, a.y += n.y, a.original && (a.original.x += n.x, a.original.y += n.y);
  }), t;
};
Uh.prototype.revert = function(e) {
  var t = e.connection, n = t.parent, i = e.oldParent, r = e.oldParentIndex, o = e.delta;
  return rn(n.children, t), pn(i.children, t, r), t.parent = i, z(t.waypoints, function(a) {
    a.x -= o.x, a.y -= o.y, a.original && (a.original.x -= o.x, a.original.y -= o.y);
  }), t;
};
function Yh() {
  this.allShapes = {}, this.allConnections = {}, this.enclosedElements = {}, this.enclosedConnections = {}, this.topLevel = {};
}
Yh.prototype.add = function(e, t) {
  return this.addAll([e], t);
};
Yh.prototype.addAll = function(e, t) {
  var n = ZS(e, !!t, this);
  return G(this, n), this;
};
function gc(e) {
  this._modeling = e;
}
gc.prototype.moveRecursive = function(e, t, n) {
  return e ? this.moveClosure(this.getClosure(e), t, n) : [];
};
gc.prototype.moveClosure = function(e, t, n, i, r) {
  var o = this._modeling, a = e.allShapes, c = e.allConnections, l = e.enclosedConnections, u = e.topLevel, d = !1;
  r && r.parent === n && (d = !0), z(a, function(f) {
    o.moveShape(f, t, u[f.id] && !d && n, {
      recurse: !1,
      layout: !1
    });
  }), z(c, function(f) {
    var y = !!a[f.source.id], g = !!a[f.target.id];
    l[f.id] && y && g ? o.moveConnection(f, t, u[f.id] && !d && n) : o.layoutConnection(f, {
      connectionStart: y && vh(f, f.source, t),
      connectionEnd: g && _h(f, f.target, t)
    });
  });
};
gc.prototype.getClosure = function(e) {
  return new Yh().addAll(e, !0);
};
function rp(e) {
  this._helper = new gc(e);
}
rp.$inject = ["modeling"];
rp.prototype.preExecute = function(e) {
  e.closure = this._helper.getClosure(e.shapes);
};
rp.prototype.postExecute = function(e) {
  var t = e.hints, n;
  t && t.primaryShape && (n = t.primaryShape, t.oldParent = n.parent), this._helper.moveClosure(
    e.closure,
    e.delta,
    e.newParent,
    e.newHost,
    n
  );
};
function sa(e) {
  this._modeling = e, this._helper = new gc(e);
}
sa.$inject = ["modeling"];
sa.prototype.execute = function(e) {
  var t = e.shape, n = e.delta, i = e.newParent || t.parent, r = e.newParentIndex, o = t.parent;
  return e.oldBounds = Ui(t, ["x", "y", "width", "height"]), e.oldParent = o, e.oldParentIndex = rn(o.children, t), pn(i.children, t, r), G(t, {
    parent: i,
    x: t.x + n.x,
    y: t.y + n.y
  }), t;
};
sa.prototype.postExecute = function(e) {
  var t = e.shape, n = e.delta, i = e.hints, r = this._modeling;
  i.layout !== !1 && (z(t.incoming, function(o) {
    r.layoutConnection(o, {
      connectionEnd: _h(o, t, n)
    });
  }), z(t.outgoing, function(o) {
    r.layoutConnection(o, {
      connectionStart: vh(o, t, n)
    });
  })), i.recurse !== !1 && this.moveChildren(e);
};
sa.prototype.revert = function(e) {
  var t = e.shape, n = e.oldParent, i = e.oldParentIndex, r = e.delta;
  return pn(n.children, t, i), G(t, {
    parent: n,
    x: t.x - r.x,
    y: t.y - r.y
  }), t;
};
sa.prototype.moveChildren = function(e) {
  var t = e.delta, n = e.shape;
  this._helper.moveRecursive(n.children, t, null);
};
sa.prototype.getNewParent = function(e) {
  return e.newParent || e.shape.parent;
};
function vc(e) {
  this._modeling = e;
}
vc.$inject = ["modeling"];
vc.prototype.execute = function(e) {
  var t = e.newSource, n = e.newTarget, i = e.connection, r = e.dockingOrPoints;
  if (!t && !n)
    throw new Error("newSource or newTarget required");
  return nt(r) && (e.oldWaypoints = i.waypoints, i.waypoints = r), t && (e.oldSource = i.source, i.source = t), n && (e.oldTarget = i.target, i.target = n), i;
};
vc.prototype.postExecute = function(e) {
  var t = e.connection, n = e.newSource, i = e.newTarget, r = e.dockingOrPoints, o = e.hints || {}, a = {};
  o.connectionStart && (a.connectionStart = o.connectionStart), o.connectionEnd && (a.connectionEnd = o.connectionEnd), o.layoutConnection !== !1 && (n && (!i || o.docking === "source") && (a.connectionStart = a.connectionStart || Gv(nt(r) ? r[0] : r)), i && (!n || o.docking === "target") && (a.connectionEnd = a.connectionEnd || Gv(nt(r) ? r[r.length - 1] : r)), o.newWaypoints && (a.waypoints = o.newWaypoints), this._modeling.layoutConnection(t, a));
};
vc.prototype.revert = function(e) {
  var t = e.oldSource, n = e.oldTarget, i = e.oldWaypoints, r = e.connection;
  return t && (r.source = t), n && (r.target = n), i && (r.waypoints = i), r;
};
function Gv(e) {
  return e.original || e;
}
function Fr(e, t) {
  this._modeling = e, this._rules = t;
}
Fr.$inject = ["modeling", "rules"];
Fr.prototype.preExecute = function(e) {
  var t = this, n = this._modeling, i = this._rules, r = e.oldShape, o = e.newData, a = e.hints || {}, c;
  function l(_, x, w) {
    return i.allowed("connection.reconnect", {
      connection: w,
      source: _,
      target: x
    });
  }
  var u = {
    x: o.x,
    y: o.y
  }, d = {
    x: r.x,
    y: r.y,
    width: r.width,
    height: r.height
  };
  c = e.newShape = e.newShape || t.createShape(o, u, r.parent, a), r.host && n.updateAttachment(c, r.host);
  var f;
  a.moveChildren !== !1 && (f = r.children.slice(), n.moveElements(f, { x: 0, y: 0 }, c, a));
  var y = r.incoming.slice(), g = r.outgoing.slice();
  z(y, function(_) {
    var x = _.source, w = l(x, c, _);
    w && t.reconnectEnd(
      _,
      c,
      Gu(_, c, d),
      a
    );
  }), z(g, function(_) {
    var x = _.target, w = l(c, x, _);
    w && t.reconnectStart(
      _,
      c,
      Wu(_, c, d),
      a
    );
  });
};
Fr.prototype.postExecute = function(e) {
  var t = e.oldShape;
  this._modeling.removeShape(t);
};
Fr.prototype.execute = function(e) {
};
Fr.prototype.revert = function(e) {
};
Fr.prototype.createShape = function(e, t, n, i) {
  return this._modeling.createShape(e, t, n, i);
};
Fr.prototype.reconnectStart = function(e, t, n, i) {
  this._modeling.reconnectStart(e, t, n, i);
};
Fr.prototype.reconnectEnd = function(e, t, n, i) {
  this._modeling.reconnectEnd(e, t, n, i);
};
function _c(e) {
  this._modeling = e;
}
_c.$inject = ["modeling"];
_c.prototype.execute = function(e) {
  var t = e.shape, n = e.newBounds, i = e.minBounds;
  if (n.x === void 0 || n.y === void 0 || n.width === void 0 || n.height === void 0)
    throw new Error("newBounds must have {x, y, width, height} properties");
  if (i && (n.width < i.width || n.height < i.height))
    throw new Error("width and height cannot be less than minimum height and width");
  if (!i && n.width < 10 || n.height < 10)
    throw new Error("width and height cannot be less than 10px");
  return e.oldBounds = {
    width: t.width,
    height: t.height,
    x: t.x,
    y: t.y
  }, G(t, {
    width: n.width,
    height: n.height,
    x: n.x,
    y: n.y
  }), t;
};
_c.prototype.postExecute = function(e) {
  var t = this._modeling, n = e.shape, i = e.oldBounds, r = e.hints || {};
  r.layout !== !1 && (z(n.incoming, function(o) {
    t.layoutConnection(o, {
      connectionEnd: Gu(o, n, i)
    });
  }), z(n.outgoing, function(o) {
    t.layoutConnection(o, {
      connectionStart: Wu(o, n, i)
    });
  }));
};
_c.prototype.revert = function(e) {
  var t = e.shape, n = e.oldBounds;
  return G(t, {
    width: n.width,
    height: n.height,
    x: n.x,
    y: n.y
  }), t;
};
function Eo(e) {
  this._modeling = e;
}
Eo.$inject = ["modeling"];
Eo.prototype.preExecute = function(e) {
  var t = e.delta, n = e.direction, i = e.movingShapes, r = e.resizingShapes, o = e.start, a = {};
  this.moveShapes(i, t), z(r, function(c) {
    a[c.id] = SD(c);
  }), this.resizeShapes(r, t, n), this.updateConnectionWaypoints(
    ZM(i, r),
    t,
    n,
    o,
    i,
    r,
    a
  );
};
Eo.prototype.execute = function() {
};
Eo.prototype.revert = function() {
};
Eo.prototype.moveShapes = function(e, t) {
  var n = this;
  z(e, function(i) {
    n._modeling.moveShape(i, t, null, {
      autoResize: !1,
      layout: !1,
      recurse: !1
    });
  });
};
Eo.prototype.resizeShapes = function(e, t, n) {
  var i = this;
  z(e, function(r) {
    var o = JM(r, n, t);
    i._modeling.resizeShape(r, o, null, {
      attachSupport: !1,
      autoResize: !1,
      layout: !1
    });
  });
};
Eo.prototype.updateConnectionWaypoints = function(e, t, n, i, r, o, a) {
  var c = this, l = r.concat(o);
  z(e, function(u) {
    var d = u.source, f = u.target, y = wD(u), g = sE(n), _ = {};
    eo(l, d) && eo(l, f) ? (y = mn(y, function(x) {
      return Yv(x, i, n) && (x[g] = x[g] + t[g]), x.original && Yv(x.original, i, n) && (x.original[g] = x.original[g] + t[g]), x;
    }), c._modeling.updateWaypoints(u, y, {
      labelBehavior: !1
    })) : (eo(l, d) || eo(l, f)) && (eo(r, d) ? _.connectionStart = vh(u, d, t) : eo(r, f) ? _.connectionEnd = _h(u, f, t) : eo(o, d) ? _.connectionStart = Wu(
      u,
      d,
      a[d.id]
    ) : eo(o, f) && (_.connectionEnd = Gu(
      u,
      f,
      a[f.id]
    )), c._modeling.layoutConnection(u, _));
  });
};
function Uv(e) {
  return G({}, e);
}
function wD(e) {
  return mn(e.waypoints, function(t) {
    return t = Uv(t), t.original && (t.original = Uv(t.original)), t;
  });
}
function sE(e) {
  switch (e) {
    case "n":
      return "y";
    case "w":
      return "x";
    case "s":
      return "y";
    case "e":
      return "x";
  }
}
function Yv(e, t, n) {
  var i = sE(n);
  if (/e|s/.test(n))
    return e[i] > t;
  if (/n|w/.test(n))
    return e[i] < t;
}
function eo(e, t) {
  return e.indexOf(t) !== -1;
}
function SD(e) {
  return {
    x: e.x,
    y: e.y,
    height: e.height,
    width: e.width
  };
}
function op(e) {
  this._modeling = e;
}
op.$inject = ["modeling"];
op.prototype.execute = function(e) {
  var t = e.shape, n = t.children;
  e.oldChildrenVisibility = cE(n), t.collapsed = !t.collapsed;
  var i = lE(n, t.collapsed);
  return [t].concat(i);
};
op.prototype.revert = function(e) {
  var t = e.shape, n = e.oldChildrenVisibility, i = t.children, r = uE(i, n);
  return t.collapsed = !t.collapsed, [t].concat(r);
};
function cE(e) {
  var t = {};
  return z(e, function(n) {
    t[n.id] = n.hidden, n.children && (t = G({}, t, cE(n.children)));
  }), t;
}
function lE(e, t) {
  var n = [];
  return z(e, function(i) {
    i.hidden = t, n = n.concat(i), i.children && (n = n.concat(lE(i.children, i.collapsed || t)));
  }), n;
}
function uE(e, t) {
  var n = [];
  return z(e, function(i) {
    i.hidden = t[i.id], n = n.concat(i), i.children && (n = n.concat(uE(i.children, t)));
  }), n;
}
function ap(e) {
  this._modeling = e;
}
ap.$inject = ["modeling"];
ap.prototype.execute = function(e) {
  var t = e.shape, n = e.newHost, i = t.host;
  return e.oldHost = i, e.attacherIdx = pE(i, t), fE(n, t), t.host = n, t;
};
ap.prototype.revert = function(e) {
  var t = e.shape, n = e.newHost, i = e.oldHost, r = e.attacherIdx;
  return t.host = i, pE(n, t), fE(i, t, r), t;
};
function pE(e, t) {
  return rn(e && e.attachers, t);
}
function fE(e, t, n) {
  if (e) {
    var i = e.attachers;
    i || (e.attachers = i = []), pn(i, t, n);
  }
}
function Kh() {
}
Kh.prototype.execute = function(e) {
  var t = e.connection, n = e.newWaypoints;
  return e.oldWaypoints = t.waypoints, t.waypoints = n, t;
};
Kh.prototype.revert = function(e) {
  var t = e.connection, n = e.oldWaypoints;
  return t.waypoints = n, t;
};
function At(e, t, n) {
  this._eventBus = e, this._elementFactory = t, this._commandStack = n;
  var i = this;
  e.on("diagram.init", function() {
    i.registerHandlers(n);
  });
}
At.$inject = ["eventBus", "elementFactory", "commandStack"];
At.prototype.getHandlers = function() {
  return {
    "shape.append": ep,
    "shape.create": xo,
    "shape.delete": yc,
    "shape.move": sa,
    "shape.resize": _c,
    "shape.replace": Fr,
    "shape.toggleCollapse": op,
    spaceTool: Eo,
    "label.create": hc,
    "connection.create": tp,
    "connection.delete": mc,
    "connection.move": Uh,
    "connection.layout": ip,
    "connection.updateWaypoints": Kh,
    "connection.reconnect": vc,
    "elements.create": Wh,
    "elements.move": rp,
    "elements.delete": Gh,
    "elements.distribute": np,
    "elements.align": Qu,
    "element.updateAttachment": ap
  };
};
At.prototype.registerHandlers = function(e) {
  z(this.getHandlers(), function(t, n) {
    e.registerHandler(n, t);
  });
};
At.prototype.moveShape = function(e, t, n, i, r) {
  typeof i == "object" && (r = i, i = null);
  var o = {
    shape: e,
    delta: t,
    newParent: n,
    newParentIndex: i,
    hints: r || {}
  };
  this._commandStack.execute("shape.move", o);
};
At.prototype.updateAttachment = function(e, t) {
  var n = {
    shape: e,
    newHost: t
  };
  this._commandStack.execute("element.updateAttachment", n);
};
At.prototype.moveElements = function(e, t, n, i) {
  i = i || {};
  var r = i.attach, o = n, a;
  r === !0 ? (a = n, o = n.parent) : r === !1 && (a = null);
  var c = {
    shapes: e,
    delta: t,
    newParent: o,
    newHost: a,
    hints: i
  };
  this._commandStack.execute("elements.move", c);
};
At.prototype.moveConnection = function(e, t, n, i, r) {
  typeof i == "object" && (r = i, i = void 0);
  var o = {
    connection: e,
    delta: t,
    newParent: n,
    newParentIndex: i,
    hints: r || {}
  };
  this._commandStack.execute("connection.move", o);
};
At.prototype.layoutConnection = function(e, t) {
  var n = {
    connection: e,
    hints: t || {}
  };
  this._commandStack.execute("connection.layout", n);
};
At.prototype.createConnection = function(e, t, n, i, r, o) {
  typeof n == "object" && (o = r, r = i, i = n, n = void 0), i = this._create("connection", i);
  var a = {
    source: e,
    target: t,
    parent: r,
    parentIndex: n,
    connection: i,
    hints: o
  };
  return this._commandStack.execute("connection.create", a), a.connection;
};
At.prototype.createShape = function(e, t, n, i, r) {
  typeof i != "number" && (r = i, i = void 0), r = r || {};
  var o = r.attach, a, c;
  e = this._create("shape", e), o ? (a = n.parent, c = n) : a = n;
  var l = {
    position: t,
    shape: e,
    parent: a,
    parentIndex: i,
    host: c,
    hints: r
  };
  return this._commandStack.execute("shape.create", l), l.shape;
};
At.prototype.createElements = function(e, t, n, i, r) {
  nt(e) || (e = [e]), typeof i != "number" && (r = i, i = void 0), r = r || {};
  var o = {
    position: t,
    elements: e,
    parent: n,
    parentIndex: i,
    hints: r
  };
  return this._commandStack.execute("elements.create", o), o.elements;
};
At.prototype.createLabel = function(e, t, n, i) {
  n = this._create("label", n);
  var r = {
    labelTarget: e,
    position: t,
    parent: i || e.parent,
    shape: n
  };
  return this._commandStack.execute("label.create", r), r.shape;
};
At.prototype.appendShape = function(e, t, n, i, r) {
  r = r || {}, t = this._create("shape", t);
  var o = {
    source: e,
    position: n,
    target: i,
    shape: t,
    connection: r.connection,
    connectionParent: r.connectionParent,
    hints: r
  };
  return this._commandStack.execute("shape.append", o), o.shape;
};
At.prototype.removeElements = function(e) {
  var t = {
    elements: e
  };
  this._commandStack.execute("elements.delete", t);
};
At.prototype.distributeElements = function(e, t, n) {
  var i = {
    groups: e,
    axis: t,
    dimension: n
  };
  this._commandStack.execute("elements.distribute", i);
};
At.prototype.removeShape = function(e, t) {
  var n = {
    shape: e,
    hints: t || {}
  };
  this._commandStack.execute("shape.delete", n);
};
At.prototype.removeConnection = function(e, t) {
  var n = {
    connection: e,
    hints: t || {}
  };
  this._commandStack.execute("connection.delete", n);
};
At.prototype.replaceShape = function(e, t, n) {
  var i = {
    oldShape: e,
    newData: t,
    hints: n || {}
  };
  return this._commandStack.execute("shape.replace", i), i.newShape;
};
At.prototype.alignElements = function(e, t) {
  var n = {
    elements: e,
    alignment: t
  };
  this._commandStack.execute("elements.align", n);
};
At.prototype.resizeShape = function(e, t, n, i) {
  var r = {
    shape: e,
    newBounds: t,
    minBounds: n,
    hints: i
  };
  this._commandStack.execute("shape.resize", r);
};
At.prototype.createSpace = function(e, t, n, i, r) {
  var o = {
    delta: n,
    direction: i,
    movingShapes: e,
    resizingShapes: t,
    start: r
  };
  this._commandStack.execute("spaceTool", o);
};
At.prototype.updateWaypoints = function(e, t, n) {
  var i = {
    connection: e,
    newWaypoints: t,
    hints: n || {}
  };
  this._commandStack.execute("connection.updateWaypoints", i);
};
At.prototype.reconnect = function(e, t, n, i, r) {
  var o = {
    connection: e,
    newSource: t,
    newTarget: n,
    dockingOrPoints: i,
    hints: r || {}
  };
  this._commandStack.execute("connection.reconnect", o);
};
At.prototype.reconnectStart = function(e, t, n, i) {
  i || (i = {}), this.reconnect(e, t, e.target, n, G(i, {
    docking: "source"
  }));
};
At.prototype.reconnectEnd = function(e, t, n, i) {
  i || (i = {}), this.reconnect(e, e.source, t, n, G(i, {
    docking: "target"
  }));
};
At.prototype.connect = function(e, t, n, i) {
  return this.createConnection(e, t, n || {}, e.parent, i);
};
At.prototype._create = function(e, t) {
  return MR(t) ? t : this._elementFactory.create(e, t);
};
At.prototype.toggleCollapse = function(e, t) {
  var n = {
    shape: e,
    hints: t || {}
  };
  this._commandStack.execute("shape.toggleCollapse", n);
};
function bc(e) {
  this._elementRegistry = e;
}
bc.$inject = ["elementRegistry"];
bc.prototype.execute = function(e) {
  var t = e.element, n = e.moddleElement, i = e.properties;
  if (!n)
    throw new Error("<moddleElement> required");
  var r = e.changed || this._getVisualReferences(n).concat(t), o = e.oldProperties || RD(n, Zl(i));
  return dE(n, i), e.oldProperties = o, e.changed = r, r;
};
bc.prototype.revert = function(e) {
  var t = e.oldProperties, n = e.moddleElement, i = e.changed;
  return dE(n, t), i;
};
bc.prototype._getVisualReferences = function(e) {
  var t = this._elementRegistry;
  return A(e, "bpmn:DataObject") ? CD(e, t) : [];
};
function RD(e, t) {
  return li(t, function(n, i) {
    return n[i] = e.get(i), n;
  }, {});
}
function dE(e, t) {
  z(t, function(n, i) {
    e.set(i, n);
  });
}
function CD(e, t) {
  return t.filter(function(n) {
    return A(n, "bpmn:DataObjectReference") && he(n).dataObjectRef === e;
  });
}
var Ps = "default", Mr = "id", hE = "di", AD = {
  width: 0,
  height: 0
};
function xc(e, t, n, i) {
  this._elementRegistry = e, this._moddle = t, this._modeling = n, this._textRenderer = i;
}
xc.$inject = [
  "elementRegistry",
  "moddle",
  "modeling",
  "textRenderer"
];
xc.prototype.execute = function(e) {
  var t = e.element, n = [t];
  if (!t)
    throw new Error("element required");
  var i = this._elementRegistry, r = this._moddle.ids, o = t.businessObject, a = DD(e.properties), c = e.oldProperties || PD(t, a);
  return mE(a, o) && (r.unclaim(o[Mr]), i.updateId(t, a[Mr]), r.claim(a[Mr], o)), Ps in a && (a[Ps] && n.push(i.get(a[Ps].id)), o[Ps] && n.push(i.get(o[Ps].id))), yE(t, a), e.oldProperties = c, e.changed = n, n;
};
xc.prototype.postExecute = function(e) {
  var t = e.element, n = t.label, i = n && he(n).name;
  if (i) {
    var r = this._textRenderer.getExternalLabelBounds(n, i);
    this._modeling.resizeShape(n, r, AD);
  }
};
xc.prototype.revert = function(e) {
  var t = e.element, n = e.properties, i = e.oldProperties, r = t.businessObject, o = this._elementRegistry, a = this._moddle.ids;
  return yE(t, i), mE(n, r) && (a.unclaim(n[Mr]), o.updateId(t, i[Mr]), a.claim(i[Mr], r)), e.changed;
};
function mE(e, t) {
  return Mr in e && e[Mr] !== t[Mr];
}
function PD(e, t) {
  var n = Zl(t), i = e.businessObject, r = bt(e);
  return li(n, function(o, a) {
    return a !== hE ? o[a] = i.get(a) : o[a] = TD(r, Zl(t.di)), o;
  }, {});
}
function TD(e, t) {
  return li(t, function(n, i) {
    return n[i] = e && e.get(i), n;
  }, {});
}
function yE(e, t) {
  var n = e.businessObject, i = bt(e);
  z(t, function(r, o) {
    o !== hE ? n.set(o, r) : i && kD(i, r);
  });
}
function kD(e, t) {
  z(t, function(n, i) {
    e.set(i, n);
  });
}
var MD = ["default"];
function DD(e) {
  var t = G({}, e);
  return MD.forEach(function(n) {
    n in e && (t[n] = he(t[n]));
  }), t;
}
function sp(e, t) {
  this._canvas = e, this._modeling = t;
}
sp.$inject = [
  "canvas",
  "modeling"
];
sp.prototype.execute = function(e) {
  var t = this._canvas, n = e.newRoot, i = n.businessObject, r = t.getRootElement(), o = r.businessObject, a = o.$parent, c = bt(r);
  return t.setRootElement(n), t.removeRootElement(r), pn(a.rootElements, i), i.$parent = a, rn(a.rootElements, o), o.$parent = null, r.di = null, c.bpmnElement = i, n.di = c, e.oldRoot = r, [];
};
sp.prototype.revert = function(e) {
  var t = this._canvas, n = e.newRoot, i = n.businessObject, r = e.oldRoot, o = r.businessObject, a = i.$parent, c = bt(n);
  return t.setRootElement(r), t.removeRootElement(n), rn(a.rootElements, i), i.$parent = null, pn(a.rootElements, o), o.$parent = a, n.di = null, c.bpmnElement = o, r.di = c, [];
};
function qh(e, t) {
  this._modeling = e, this._spaceTool = t;
}
qh.$inject = [
  "modeling",
  "spaceTool"
];
qh.prototype.preExecute = function(e) {
  var t = this._spaceTool, n = this._modeling, i = e.shape, r = e.location, o = Ai(i), a = o === i, c = a ? i : i.parent, l = vo(c), u = An(i);
  if (u ? r === "left" ? r = "top" : r === "right" && (r = "bottom") : r === "top" ? r = "left" : r === "bottom" && (r = "right"), !l.length) {
    var d = u ? {
      x: i.x + Ci,
      y: i.y,
      width: i.width - Ci,
      height: i.height
    } : {
      x: i.x,
      y: i.y + Ci,
      width: i.width,
      height: i.height - Ci
    };
    n.createShape(
      {
        type: "bpmn:Lane",
        isHorizontal: u
      },
      d,
      c
    );
  }
  var f = [];
  ta(o, function(P) {
    return f.push(P), P.label && f.push(P.label), P === i ? [] : et(P.children, function(N) {
      return N !== i;
    });
  });
  var y, g, _, x, w;
  r === "top" ? (y = -120, g = i.y, _ = g + 10, x = "n", w = "y") : r === "left" ? (y = -120, g = i.x, _ = g + 10, x = "w", w = "x") : r === "bottom" ? (y = 120, g = i.y + i.height, _ = g - 10, x = "s", w = "y") : r === "right" && (y = 120, g = i.x + i.width, _ = g - 10, x = "e", w = "x");
  var D = t.calculateAdjustments(f, w, y, _), O = u ? { x: 0, y } : { x: y, y: 0 };
  t.makeSpace(
    D.movingShapes,
    D.resizingShapes,
    O,
    x,
    _
  );
  var k = u ? {
    x: i.x + (a ? Ci : 0),
    y: g - (r === "top" ? 120 : 0),
    width: i.width - (a ? Ci : 0),
    height: 120
  } : {
    x: g - (r === "left" ? 120 : 0),
    y: i.y + (a ? Ci : 0),
    width: 120,
    height: i.height - (a ? Ci : 0)
  };
  e.newLane = n.createShape(
    {
      type: "bpmn:Lane",
      isHorizontal: u
    },
    k,
    c
  );
};
function Xh(e) {
  this._modeling = e;
}
Xh.$inject = [
  "modeling"
];
Xh.prototype.preExecute = function(e) {
  var t = this._modeling, n = e.shape, i = e.count, r = vo(n), o = r.length;
  if (o > i)
    throw new Error(`more than <${i}> child lanes`);
  var a = An(n), c = a ? n.height : n.width, l = Math.round(c / i), u, d, f, y;
  for (y = 0; y < i; y++)
    y === i - 1 ? u = c - l * y : u = l, d = a ? {
      x: n.x + Ci,
      y: n.y + y * l,
      width: n.width - Ci,
      height: u
    } : {
      x: n.x + y * l,
      y: n.y + Ci,
      width: u,
      height: n.height - Ci
    }, y < o ? t.resizeShape(r[y], d) : (f = {
      type: "bpmn:Lane",
      isHorizontal: a
    }, t.createShape(f, d, n));
};
function Ec(e, t) {
  this._modeling = e, this._spaceTool = t;
}
Ec.$inject = [
  "modeling",
  "spaceTool"
];
Ec.prototype.preExecute = function(e) {
  var t = e.shape, n = e.newBounds, i = e.balanced;
  i !== !1 ? this.resizeBalanced(t, n) : this.resizeSpace(t, n);
};
Ec.prototype.resizeBalanced = function(e, t) {
  var n = this._modeling, i = lk(e, t);
  n.resizeShape(e, t), i.forEach(function(r) {
    n.resizeShape(r.shape, r.newBounds);
  });
};
Ec.prototype.resizeSpace = function(e, t) {
  var n = this._spaceTool, i = Le(e), r = Le(t), o = yx(r, i), a = Ai(e), c = [], l = [];
  ta(a, function(_) {
    return c.push(_), (A(_, "bpmn:Lane") || A(_, "bpmn:Participant")) && l.push(_), _.children;
  });
  var u, d, f, y, g;
  (o.bottom || o.top) && (u = o.bottom || o.top, d = e.y + (o.bottom ? e.height : 0) + (o.bottom ? -10 : 10), f = o.bottom ? "s" : "n", y = o.top > 0 || o.bottom < 0 ? -u : u, g = n.calculateAdjustments(c, "y", y, d), n.makeSpace(g.movingShapes, g.resizingShapes, { x: 0, y: u }, f)), (o.left || o.right) && (u = o.right || o.left, d = e.x + (o.right ? e.width : 0) + (o.right ? -10 : 100), f = o.right ? "e" : "w", y = o.left > 0 || o.right < 0 ? -u : u, g = n.calculateAdjustments(l, "x", y, d), n.makeSpace(g.movingShapes, g.resizingShapes, { x: u, y: 0 }, f));
};
var Ks = "flowNodeRef", Zh = "lanes";
function wc(e) {
  this._elementRegistry = e;
}
wc.$inject = [
  "elementRegistry"
];
wc.prototype._computeUpdates = function(e, t) {
  var n = [], i = [], r = {}, o = [];
  function a(d, f) {
    var y = Le(f), g = {
      x: d.x + d.width / 2,
      y: d.y + d.height / 2
    };
    return g.x > y.left && g.x < y.right && g.y > y.top && g.y < y.bottom;
  }
  function c(d) {
    n.indexOf(d) === -1 && (o.push(d), n.push(d));
  }
  function l(d) {
    var f = Ai(d);
    return r[f.id] || (r[f.id] = zu(f)), r[f.id];
  }
  function u(d) {
    if (!d.parent)
      return [];
    var f = l(d);
    return f.filter(function(y) {
      return a(d, y);
    }).map(function(y) {
      return y.businessObject;
    });
  }
  return t.forEach(function(d) {
    var f = Ai(d);
    if (!(!f || n.indexOf(f) !== -1)) {
      var y = f.children.filter(function(g) {
        return A(g, "bpmn:FlowNode");
      });
      y.forEach(c), n.push(f);
    }
  }), e.forEach(c), o.forEach(function(d) {
    var f = d.businessObject, y = f.get(Zh), g = y.slice(), _ = u(d);
    i.push({ flowNode: f, remove: g, add: _ });
  }), t.forEach(function(d) {
    var f = d.businessObject;
    d.parent || f.get(Ks).forEach(function(y) {
      i.push({ flowNode: y, remove: [f], add: [] });
    });
  }), i;
};
wc.prototype.execute = function(e) {
  var t = e.updates;
  return t || (t = e.updates = this._computeUpdates(e.flowNodeShapes, e.laneShapes)), t.forEach(function(n) {
    var i = n.flowNode, r = i.get(Zh);
    n.remove.forEach(function(o) {
      rn(r, o), rn(o.get(Ks), i);
    }), n.add.forEach(function(o) {
      pn(r, o), pn(o.get(Ks), i);
    });
  }), [];
};
wc.prototype.revert = function(e) {
  var t = e.updates;
  return t.forEach(function(n) {
    var i = n.flowNode, r = i.get(Zh);
    n.add.forEach(function(o) {
      rn(r, o), rn(o.get(Ks), i);
    }), n.remove.forEach(function(o) {
      pn(r, o), pn(o.get(Ks), i);
    });
  }), [];
};
function cp(e) {
  this._moddle = e;
}
cp.$inject = ["moddle"];
cp.prototype.execute = function(e) {
  var t = this._moddle.ids, n = e.id, i = e.element, r = e.claiming;
  return r ? t.claim(n, i) : t.unclaim(n), [];
};
cp.prototype.revert = function(e) {
  var t = this._moddle.ids, n = e.id, i = e.element, r = e.claiming;
  return r ? t.unclaim(n) : t.claim(n, i), [];
};
var OD = {
  fill: void 0,
  stroke: void 0
};
function Jh(e) {
  this._commandStack = e, this._normalizeColor = function(t) {
    if (t) {
      if (ci(t)) {
        var n = ND(t);
        if (n)
          return n;
      }
      throw new Error(`invalid color value: ${t}`);
    }
  };
}
Jh.$inject = [
  "commandStack"
];
Jh.prototype.postExecute = function(e) {
  var t = e.elements, n = e.colors || OD, i = this, r = {};
  "fill" in n && G(r, {
    "background-color": this._normalizeColor(n.fill)
  }), "stroke" in n && G(r, {
    "border-color": this._normalizeColor(n.stroke)
  }), z(t, function(o) {
    var a = kt(o) ? Ui(r, ["border-color"]) : r, c = bt(o);
    if (BD(a), vt(o))
      i._commandStack.execute("element.updateModdleProperties", {
        element: o,
        moddleElement: c.label,
        properties: {
          color: r["border-color"]
        }
      });
    else {
      if (!rt(c, ["bpmndi:BPMNEdge", "bpmndi:BPMNShape"]))
        return;
      i._commandStack.execute("element.updateProperties", {
        element: o,
        properties: {
          di: a
        }
      });
    }
  });
};
function ND(e) {
  var t = document.createElement("canvas").getContext("2d");
  return t.fillStyle = "transparent", t.fillStyle = e, /^#[0-9a-fA-F]{6}$/.test(t.fillStyle) ? t.fillStyle : null;
}
function BD(e) {
  "border-color" in e && (e.stroke = e["border-color"]), "background-color" in e && (e.fill = e["background-color"]);
}
var LD = {
  width: 0,
  height: 0
};
function gE(e, t, n) {
  function i(l, u) {
    var d = l.label || l, f = l.labelTarget || l;
    return NA(d, u), [d, f];
  }
  function r(l) {
    var u = l.element, d = u.businessObject, f = l.newLabel;
    if (!vt(u) && Zo(u) && !Su(u) && !Kv(f)) {
      var y = 7, g = Md(u);
      g = {
        x: g.x,
        y: g.y + y
      }, e.createLabel(u, g, {
        id: d.id + "_label",
        businessObject: d,
        di: u.di
      });
    }
  }
  function o(l) {
    return l.oldLabel = ki(l.element), i(l.element, l.newLabel);
  }
  function a(l) {
    return i(l.element, l.oldLabel);
  }
  function c(l) {
    var u = l.element, d = u.label || u, f = l.newLabel, y = l.newBounds, g = l.hints || {};
    if (!(!vt(d) && !A(d, "bpmn:TextAnnotation"))) {
      if (vt(d) && Kv(f)) {
        g.removeShape !== !1 && e.removeShape(d, { unsetLabel: !1 });
        return;
      }
      var _ = ki(u);
      typeof y > "u" && (y = t.getExternalLabelBounds(d, _)), y && e.resizeShape(d, y, LD);
    }
  }
  this.preExecute = r, this.execute = o, this.revert = a, this.postExecute = c;
}
gE.$inject = [
  "modeling",
  "textRenderer",
  "bpmnFactory"
];
function Kv(e) {
  return !e || !e.trim();
}
function Ln(e, t, n, i) {
  At.call(this, e, t, n), this._bpmnRules = i;
}
Pe(Ln, At);
Ln.$inject = [
  "eventBus",
  "elementFactory",
  "commandStack",
  "bpmnRules"
];
Ln.prototype.getHandlers = function() {
  var e = At.prototype.getHandlers.call(this);
  return e["element.updateModdleProperties"] = bc, e["element.updateProperties"] = xc, e["canvas.updateRoot"] = sp, e["lane.add"] = qh, e["lane.resize"] = Ec, e["lane.split"] = Xh, e["lane.updateRefs"] = wc, e["id.updateClaim"] = cp, e["element.setColor"] = Jh, e["element.updateLabel"] = gE, e;
};
Ln.prototype.updateLabel = function(e, t, n, i) {
  this._commandStack.execute("element.updateLabel", {
    element: e,
    newLabel: t,
    newBounds: n,
    hints: i || {}
  });
};
Ln.prototype.connect = function(e, t, n, i) {
  var r = this._bpmnRules;
  if (n || (n = r.canConnect(e, t)), !!n)
    return this.createConnection(e, t, n, e.parent, i);
};
Ln.prototype.updateModdleProperties = function(e, t, n) {
  this._commandStack.execute("element.updateModdleProperties", {
    element: e,
    moddleElement: t,
    properties: n
  });
};
Ln.prototype.updateProperties = function(e, t) {
  this._commandStack.execute("element.updateProperties", {
    element: e,
    properties: t
  });
};
Ln.prototype.resizeLane = function(e, t, n) {
  this._commandStack.execute("lane.resize", {
    shape: e,
    newBounds: t,
    balanced: n
  });
};
Ln.prototype.addLane = function(e, t) {
  var n = {
    shape: e,
    location: t
  };
  return this._commandStack.execute("lane.add", n), n.newLane;
};
Ln.prototype.splitLane = function(e, t) {
  this._commandStack.execute("lane.split", {
    shape: e,
    count: t
  });
};
Ln.prototype.makeCollaboration = function() {
  var e = this._create("root", {
    type: "bpmn:Collaboration"
  }), t = {
    newRoot: e
  };
  return this._commandStack.execute("canvas.updateRoot", t), e;
};
Ln.prototype.makeProcess = function() {
  var e = this._create("root", {
    type: "bpmn:Process"
  }), t = {
    newRoot: e
  };
  this._commandStack.execute("canvas.updateRoot", t);
};
Ln.prototype.updateLaneRefs = function(e, t) {
  this._commandStack.execute("lane.updateRefs", {
    flowNodeShapes: e,
    laneShapes: t
  });
};
Ln.prototype.claimId = function(e, t) {
  this._commandStack.execute("id.updateClaim", {
    id: e,
    element: t,
    claiming: !0
  });
};
Ln.prototype.unclaimId = function(e, t) {
  this._commandStack.execute("id.updateClaim", {
    id: e,
    element: t
  });
};
Ln.prototype.setColor = function(e, t) {
  e.length || (e = [e]), this._commandStack.execute("element.setColor", {
    elements: e,
    colors: t
  });
};
function vE() {
}
vE.prototype.layoutConnection = function(e, t) {
  return t = t || {}, [
    t.connectionStart || Fe(t.source || e.source),
    t.connectionEnd || Fe(t.target || e.target)
  ];
};
var Cl = 20, ID = 5, fu = Math.round, qv = 20, $D = {
  "h:h": 20,
  "v:v": 20,
  "h:v": -10,
  "v:h": -10
};
function jD(e, t) {
  return !{
    t: /top/,
    r: /right/,
    b: /bottom/,
    l: /left/,
    h: /./,
    v: /./
  }[t].test(e);
}
function FD(e, t) {
  return {
    t: /top/,
    r: /right/,
    b: /bottom/,
    l: /left/,
    h: /left|right/,
    v: /top|bottom/
  }[e].test(t);
}
function _E(e, t, n) {
  var i = Bn(t, e, ID), r = n.split(":")[0], o = fu((t.x - e.x) / 2 + e.x), a = fu((t.y - e.y) / 2 + e.y), c, l, u = FD(r, i), d = /h|r|l/.test(r), f = !1, y = !1;
  return u ? (c = d ? { x: o, y: e.y } : { x: e.x, y: a }, l = d ? "h:h" : "v:v") : (f = jD(i, r), l = d ? "h:v" : "v:h", f ? d ? (y = a === e.y, c = {
    x: e.x + Cl * (/l/.test(r) ? -1 : 1),
    y: y ? a + Cl : a
  }) : (y = o === e.x, c = {
    x: y ? o + Cl : o,
    y: e.y + Cl * (/t/.test(r) ? -1 : 1)
  }) : c = {
    x: o,
    y: a
  }), {
    waypoints: Qh(e, c, l).concat(c),
    directions: l,
    turnNextDirections: y
  };
}
function HD(e, t, n) {
  return _E(e, t, n);
}
function zD(e, t, n) {
  var i = _E(t, e, Xv(n));
  return {
    waypoints: i.waypoints.slice().reverse(),
    directions: Xv(i.directions),
    turnNextDirections: i.turnNextDirections
  };
}
function VD(e, t) {
  var n = e.directions.split(":")[1], i = t.directions.split(":")[0];
  e.turnNextDirections && (n = n == "h" ? "v" : "h"), t.turnNextDirections && (i = i == "h" ? "v" : "h");
  var r = n + ":" + i, o = Qh(
    e.waypoints[e.waypoints.length - 1],
    t.waypoints[0],
    r
  );
  return {
    waypoints: o,
    directions: r
  };
}
function Xv(e) {
  return e.split(":").reverse().join(":");
}
function WD(e, t, n) {
  var i = fu((t.x - e.x) / 2 + e.x), r = fu((t.y - e.y) / 2 + e.y);
  if (n === "h:v")
    return [{ x: t.x, y: e.y }];
  if (n === "v:h")
    return [{ x: e.x, y: t.y }];
  if (n === "h:h")
    return [
      { x: i, y: e.y },
      { x: i, y: t.y }
    ];
  if (n === "v:v")
    return [
      { x: e.x, y: r },
      { x: t.x, y: r }
    ];
  throw new Error("invalid directions: can only handle varians of [hv]:[hv]");
}
function Qh(e, t, n) {
  if (n = n || "h:h", !QD(n))
    throw new Error(
      "unknown directions: <" + n + ">: must be specified as <start>:<end> with start/end in { h,v,t,r,b,l }"
    );
  if (bE(n)) {
    var i = HD(e, t, n), r = zD(e, t, n), o = VD(i, r);
    return [].concat(
      i.waypoints,
      o.waypoints,
      r.waypoints
    );
  }
  return WD(e, t, n);
}
function GD(e, t, n) {
  var i = Qh(e, t, n);
  return i.unshift(e), i.push(t), xE(i);
}
function UD(e, t, n, i, r) {
  var o = r && r.preferredLayouts || [], a = oS(o, "straight")[0] || "h:h", c = $D[a] || 0, l = Bn(e, t, c), u = JD(l, a);
  n = n || Fe(e), i = i || Fe(t);
  var d = u.split(":"), f = Jv(n, e, d[0], e5(l)), y = Jv(i, t, d[1], l);
  return GD(f, y, u);
}
function YD(e, t, n, i, r, o) {
  nt(n) && (r = n, o = i, n = Fe(e), i = Fe(t)), o = G({ preferredLayouts: [] }, o), r = r || [];
  var a = o.preferredLayouts, c = a.indexOf("straight") !== -1, l;
  return l = c && qD(e, t, n, i, o), l || (l = o.connectionEnd && ZD(t, e, i, r), l) || (l = o.connectionStart && XD(e, t, n, r), l) ? l : !o.connectionStart && !o.connectionEnd && r && r.length ? r : UD(e, t, n, i, o);
}
function KD(e, t, n) {
  return e >= t && e <= n;
}
function Zv(e, t, n) {
  var i = {
    x: "width",
    y: "height"
  };
  return KD(t[e], n[e], n[e] + n[i[e]]);
}
function qD(e, t, n, i, r) {
  var o = {}, a, c;
  return c = Bn(e, t), /^(top|bottom|left|right)$/.test(c) ? (/top|bottom/.test(c) && (a = "x"), /left|right/.test(c) && (a = "y"), r.preserveDocking === "target" ? Zv(a, i, e) ? (o[a] = i[a], [
    {
      x: o.x !== void 0 ? o.x : n.x,
      y: o.y !== void 0 ? o.y : n.y,
      original: {
        x: o.x !== void 0 ? o.x : n.x,
        y: o.y !== void 0 ? o.y : n.y
      }
    },
    {
      x: i.x,
      y: i.y
    }
  ]) : null : Zv(a, n, t) ? (o[a] = n[a], [
    {
      x: n.x,
      y: n.y
    },
    {
      x: o.x !== void 0 ? o.x : i.x,
      y: o.y !== void 0 ? o.y : i.y,
      original: {
        x: o.x !== void 0 ? o.x : i.x,
        y: o.y !== void 0 ? o.y : i.y
      }
    }
  ]) : null) : null;
}
function XD(e, t, n, i) {
  return em(e, t, n, i);
}
function ZD(e, t, n, i) {
  var r = i.slice().reverse();
  return r = em(e, t, n, r), r ? r.reverse() : null;
}
function em(e, t, n, i) {
  function r(d) {
    return d.length < 3 ? !0 : d.length > 4 ? !1 : !!gt(d, function(f, y) {
      var g = d[y - 1];
      return g && tc(f, g) < 3;
    });
  }
  function o(d, f, y) {
    var g = Pr(f, d);
    switch (g) {
      case "v":
        return { x: y.x, y: d.y };
      case "h":
        return { x: d.x, y: y.y };
    }
    return { x: d.x, y: d.y };
  }
  function a(d, f, y) {
    var g;
    for (g = d.length - 2; g !== 0; g--)
      if (Wy(d[g], f, qv) || Wy(d[g], y, qv))
        return d.slice(g);
    return d;
  }
  if (r(i))
    return null;
  var c = i[0], l = i.slice(), u;
  return l[0] = n, l[1] = o(l[1], c, n), u = a(l, e, t), u !== l && (l = em(e, t, n, u)), l && Pr(l) ? null : l;
}
function JD(e, t) {
  if (bE(t))
    return t;
  switch (e) {
    case "intersect":
      return "t:t";
    case "top":
    case "bottom":
      return "v:v";
    case "left":
    case "right":
      return "h:h";
    default:
      return t;
  }
}
function QD(e) {
  return e && /^h|v|t|r|b|l:h|v|t|r|b|l$/.test(e);
}
function bE(e) {
  return e && /t|r|b|l/.test(e);
}
function e5(e) {
  return {
    top: "bottom",
    bottom: "top",
    left: "right",
    right: "left",
    "top-left": "bottom-right",
    "bottom-right": "top-left",
    "top-right": "bottom-left",
    "bottom-left": "top-right"
  }[e];
}
function Jv(e, t, n, i) {
  if (n === "h" && (n = /left/.test(i) ? "l" : "r"), n === "v" && (n = /top/.test(i) ? "t" : "b"), n === "t")
    return { original: e, x: e.x, y: t.y };
  if (n === "r")
    return { original: e, x: t.x + t.width, y: e.y };
  if (n === "b")
    return { original: e, x: e.x, y: t.y + t.height };
  if (n === "l")
    return { original: e, x: t.x, y: e.y };
  throw new Error("unexpected dockingDirection: <" + n + ">");
}
function xE(e) {
  return e.reduce(function(t, n, i) {
    var r = t[t.length - 1], o = e[i + 1];
    return bd(r, o, n, 0) || t.push(n), t;
  }, []);
}
var t5 = -10, n5 = 40, i5 = {
  default: ["h:h"],
  fromGateway: ["v:h"],
  toGateway: ["h:v"],
  loop: {
    fromTop: ["t:r"],
    fromRight: ["r:b"],
    fromLeft: ["l:t"],
    fromBottom: ["b:l"]
  },
  boundaryLoop: {
    alternateHorizontalSide: "b",
    alternateVerticalSide: "l",
    default: "v"
  },
  messageFlow: ["straight", "v:v"],
  subProcess: ["straight", "h:h"],
  isHorizontal: !0
}, r5 = {
  default: ["v:v"],
  fromGateway: ["h:v"],
  toGateway: ["v:h"],
  loop: {
    fromTop: ["t:l"],
    fromRight: ["r:t"],
    fromLeft: ["l:b"],
    fromBottom: ["b:r"]
  },
  boundaryLoop: {
    alternateHorizontalSide: "t",
    alternateVerticalSide: "r",
    default: "h"
  },
  messageFlow: ["straight", "h:h"],
  subProcess: ["straight", "v:v"],
  isHorizontal: !1
}, tm = {
  top: "bottom",
  "top-right": "bottom-left",
  "top-left": "bottom-right",
  right: "left",
  bottom: "top",
  "bottom-right": "top-left",
  "bottom-left": "top-right",
  left: "right"
}, Ds = {
  top: "t",
  right: "r",
  bottom: "b",
  left: "l"
};
function nm() {
}
Pe(nm, vE);
nm.prototype.layoutConnection = function(e, t) {
  t || (t = {});
  var n = t.source || e.source, i = t.target || e.target, r = t.waypoints || e.waypoints, o = t.connectionStart, a = t.connectionEnd, c, l;
  if (o || (o = Qv(r && r[0], n)), a || (a = Qv(r && r[r.length - 1], i)), (A(e, "bpmn:Association") || A(e, "bpmn:DataAssociation")) && r && !e0(n, i))
    return [].concat([o], r.slice(1, -1), [a]);
  var u = Iu(n) ? i5 : r5;
  return A(e, "bpmn:MessageFlow") ? c = a5(n, i, u) : (A(e, "bpmn:SequenceFlow") || e0(n, i)) && (n === i ? c = {
    preferredLayouts: f5(n, e, u)
  } : A(n, "bpmn:BoundaryEvent") ? c = {
    preferredLayouts: d5(n, i, a, u)
  } : qs(n) || qs(i) ? c = {
    preferredLayouts: u.subProcess,
    preserveDocking: c5(n)
  } : A(n, "bpmn:Gateway") ? c = {
    preferredLayouts: u.fromGateway
  } : A(i, "bpmn:Gateway") ? c = {
    preferredLayouts: u.toGateway
  } : c = {
    preferredLayouts: u.default
  }), c && (c = G(c, t), l = xE(YD(
    n,
    i,
    o,
    a,
    r,
    c
  ))), l || [o, a];
};
function o5(e) {
  var t = e.host;
  return Bn(Fe(e), t, t5);
}
function a5(e, t, n) {
  return {
    preferredLayouts: n.messageFlow,
    preserveDocking: s5(e, t)
  };
}
function s5(e, t) {
  return A(t, "bpmn:Participant") ? "source" : A(e, "bpmn:Participant") ? "target" : qs(t) ? "source" : qs(e) || A(t, "bpmn:Event") ? "target" : A(e, "bpmn:Event") ? "source" : null;
}
function c5(e) {
  return qs(e) ? "target" : "source";
}
function Qv(e, t) {
  return e ? e.original || e : Fe(t);
}
function e0(e, t) {
  return A(t, "bpmn:Activity") && A(e, "bpmn:BoundaryEvent") && t.businessObject.isForCompensation;
}
function qs(e) {
  return A(e, "bpmn:SubProcess") && pt(e);
}
function Go(e, t) {
  return e === t;
}
function l5(e, t) {
  return t.indexOf(e) !== -1;
}
function za(e) {
  var t = /right|left/.exec(e);
  return t && t[0];
}
function Va(e) {
  var t = /top|bottom/.exec(e);
  return t && t[0];
}
function t0(e, t) {
  return tm[e] === t;
}
function u5(e, t) {
  var n = za(e), i = tm[n];
  return t.indexOf(i) !== -1;
}
function p5(e, t) {
  var n = Va(e), i = tm[n];
  return t.indexOf(i) !== -1;
}
function EE(e) {
  return e === "right" || e === "left";
}
function f5(e, t, n) {
  var i = t.waypoints, r = i && i.length && Bn(i[0], e);
  return r === "top" ? n.loop.fromTop : r === "right" ? n.loop.fromRight : r === "left" ? n.loop.fromLeft : n.loop.fromBottom;
}
function d5(e, t, n, i) {
  var r = Fe(e), o = Fe(t), a = o5(e), c, l, u = Go(e.host, t), d = l5(a, ["top", "right", "bottom", "left"]), f = Bn(o, r, {
    x: e.width / 2 + t.width / 2,
    y: e.height / 2 + t.height / 2
  });
  return u ? h5(a, d, e, t, n, i) : (c = m5(a, f, d, i.isHorizontal), l = y5(a, f, d, i.isHorizontal), [c + ":" + l]);
}
function h5(e, t, n, i, r, o) {
  var a = t ? e : o.isHorizontal ? Va(e) : za(e), c = Ds[a], l;
  return t ? EE(e) ? l = n0("y", n, i, r) ? "h" : o.boundaryLoop.alternateHorizontalSide : l = n0("x", n, i, r) ? "v" : o.boundaryLoop.alternateVerticalSide : l = o.boundaryLoop.default, [c + ":" + l];
}
function n0(e, t, n, i) {
  var r = n5;
  return !(lf(e, i, n, r) || lf(e, i, {
    x: n.x + n.width,
    y: n.y + n.height
  }, r) || lf(e, i, Fe(t), r));
}
function lf(e, t, n, i) {
  return Math.abs(t[e] - n[e]) < i;
}
function m5(e, t, n, i) {
  if (n)
    return Ds[e];
  var r = Va(e), o = za(e), a = Va(t), c = za(t);
  if (i) {
    if (Go(r, a) || t0(o, c))
      return Ds[r];
  } else if (Go(o, c) || t0(r, a))
    return Ds[o];
  return Ds[i ? o : r];
}
function y5(e, t, n, i) {
  return n ? EE(e) ? u5(e, t) || Go(e, t) ? "h" : "v" : p5(e, t) || Go(e, t) ? "v" : "h" : i ? Go(Va(e), Va(t)) ? "h" : "v" : Go(za(e), za(t)) ? "v" : "h";
}
function i0(e) {
  return G({ original: e.point.original || e.point }, e.actual);
}
function wo(e, t) {
  this._elementRegistry = e, this._graphicsFactory = t;
}
wo.$inject = ["elementRegistry", "graphicsFactory"];
wo.prototype.getCroppedWaypoints = function(e, t, n) {
  t = t || e.source, n = n || e.target;
  var i = this.getDockingPoint(e, t, !0), r = this.getDockingPoint(e, n), o = e.waypoints.slice(i.idx + 1, r.idx);
  return o.unshift(i0(i)), o.push(i0(r)), o;
};
wo.prototype.getDockingPoint = function(e, t, n) {
  var i = e.waypoints, r, o, a;
  return r = n ? 0 : i.length - 1, o = i[r], a = this._getIntersection(t, e, n), {
    point: o,
    actual: a || o,
    idx: r
  };
};
wo.prototype._getIntersection = function(e, t, n) {
  var i = this._getShapePath(e), r = this._getConnectionPath(t);
  return Df(i, r, n);
};
wo.prototype._getConnectionPath = function(e) {
  return this._graphicsFactory.getConnectionPath(e);
};
wo.prototype._getShapePath = function(e) {
  return this._graphicsFactory.getShapePath(e);
};
wo.prototype._getGfx = function(e) {
  return this._elementRegistry.getGraphics(e);
};
const wE = {
  __init__: [
    "modeling",
    "bpmnUpdater"
  ],
  __depends__: [
    pM,
    TM,
    MM,
    DM,
    iE,
    aD,
    cD,
    hD,
    fr,
    Od,
    aE
  ],
  bpmnFactory: ["type", Ni],
  bpmnUpdater: ["type", pi],
  elementFactory: ["type", bo],
  modeling: ["type", Ln],
  layouter: ["type", nm],
  connectionDocking: ["type", wo]
}, r0 = Math.round;
function lp(e, t, n, i, r, o) {
  this._complexPreview = e, this._connectionDocking = t, this._elementFactory = n, this._eventBus = i, this._layouter = r, this._rules = o;
}
lp.prototype.create = function(e, t, n) {
  const i = this._complexPreview, r = this._connectionDocking, o = this._elementFactory, a = this._eventBus, c = this._layouter, l = this._rules, u = o.createShape(G({ type: t }, n)), d = a.fire("autoPlace", {
    source: e,
    shape: u
  });
  if (!d)
    return;
  G(u, {
    x: d.x - r0(u.width / 2),
    y: d.y - r0(u.height / 2)
  });
  const f = l.allowed("connection.create", {
    source: e,
    target: u,
    hints: {
      targetParent: e.parent
    }
  });
  let y = null;
  f && (y = o.createConnection(f), y.waypoints = c.layoutConnection(y, {
    source: e,
    target: u
  }), y.waypoints = r.getCroppedWaypoints(y, e, u)), i.create({
    created: [
      u,
      y
    ].filter((g) => !Xl(g))
  });
};
lp.prototype.cleanUp = function() {
  this._complexPreview.cleanUp();
};
lp.$inject = [
  "complexPreview",
  "connectionDocking",
  "elementFactory",
  "eventBus",
  "layouter",
  "rules"
];
const g5 = {
  __depends__: [
    Kd,
    VT,
    wE
  ],
  __init__: ["appendPreview"],
  appendPreview: ["type", lp]
};
var o0 = Math.min, a0 = Math.max;
function uf(e) {
  e.preventDefault();
}
function $s(e) {
  e.stopPropagation();
}
function v5(e) {
  return e.nodeType === Node.TEXT_NODE;
}
function _5(e) {
  return [].slice.call(e);
}
function qi(e) {
  this.container = e.container, this.parent = Bt(
    '<div class="djs-direct-editing-parent"><div class="djs-direct-editing-content" contenteditable="true"></div></div>'
  ), this.content = Tt("[contenteditable]", this.parent), this.keyHandler = e.keyHandler || function() {
  }, this.resizeHandler = e.resizeHandler || function() {
  }, this.autoResize = Jn(this.autoResize, this), this.handlePaste = Jn(this.handlePaste, this);
}
qi.prototype.create = function(e, t, n, i) {
  var r = this, o = this.parent, a = this.content, c = this.container;
  i = this.options = i || {}, t = this.style = t || {};
  var l = Ui(t, [
    "width",
    "height",
    "maxWidth",
    "maxHeight",
    "minWidth",
    "minHeight",
    "left",
    "top",
    "backgroundColor",
    "position",
    "overflow",
    "border",
    "wordWrap",
    "textAlign",
    "outline",
    "transform"
  ]);
  G(o.style, {
    width: e.width + "px",
    height: e.height + "px",
    maxWidth: e.maxWidth + "px",
    maxHeight: e.maxHeight + "px",
    minWidth: e.minWidth + "px",
    minHeight: e.minHeight + "px",
    left: e.x + "px",
    top: e.y + "px",
    backgroundColor: "#ffffff",
    position: "absolute",
    overflow: "visible",
    border: "1px solid #ccc",
    boxSizing: "border-box",
    wordWrap: "normal",
    textAlign: "center",
    outline: "none"
  }, l);
  var u = Ui(t, [
    "fontFamily",
    "fontSize",
    "fontWeight",
    "lineHeight",
    "padding",
    "paddingTop",
    "paddingRight",
    "paddingBottom",
    "paddingLeft"
  ]);
  return G(a.style, {
    boxSizing: "border-box",
    width: "100%",
    outline: "none",
    wordWrap: "break-word"
  }, u), i.centerVertically && G(a.style, {
    position: "absolute",
    top: "50%",
    transform: "translate(0, -50%)"
  }, u), a.innerText = n, Ye.bind(a, "keydown", this.keyHandler), Ye.bind(a, "mousedown", $s), Ye.bind(a, "paste", r.handlePaste), i.autoResize && Ye.bind(a, "input", this.autoResize), i.resizable && this.resizable(t), c.appendChild(o), this.setSelection(a.lastChild, a.lastChild && a.lastChild.length), o;
};
qi.prototype.handlePaste = function(e) {
  var t = this.options, n = this.style;
  e.preventDefault();
  var i;
  if (e.clipboardData ? i = e.clipboardData.getData("text/plain") : i = window.clipboardData.getData("Text"), this.insertText(i), t.autoResize) {
    var r = this.autoResize(n);
    r && this.resizeHandler(r);
  }
};
qi.prototype.insertText = function(e) {
  e = b5(e);
  var t = document.execCommand("insertText", !1, e);
  t || this._insertTextIE(e);
};
qi.prototype._insertTextIE = function(e) {
  var t = this.getSelection(), n = t.startContainer, i = t.endContainer, r = t.startOffset, o = t.endOffset, a = t.commonAncestorContainer, c = _5(a.childNodes), l, u;
  if (v5(a)) {
    var d = n.textContent;
    n.textContent = d.substring(0, r) + e + d.substring(o), l = n, u = r + e.length;
  } else if (n === this.content && i === this.content) {
    var f = document.createTextNode(e);
    this.content.insertBefore(f, c[r]), l = f, u = f.textContent.length;
  } else {
    var y = c.indexOf(n), g = c.indexOf(i);
    c.forEach(function(_, x) {
      x === y ? _.textContent = n.textContent.substring(0, r) + e + i.textContent.substring(o) : x > y && x <= g && lr(_);
    }), l = n, u = r + e.length;
  }
  l && u !== void 0 && setTimeout(function() {
    self.setSelection(l, u);
  });
};
qi.prototype.autoResize = function() {
  var e = this.parent, t = this.content, n = parseInt(this.style.fontSize) || 12;
  if (t.scrollHeight > e.offsetHeight || t.scrollHeight < e.offsetHeight - n) {
    var i = e.getBoundingClientRect(), r = t.scrollHeight;
    e.style.height = r + "px", this.resizeHandler({
      width: i.width,
      height: i.height,
      dx: 0,
      dy: r - i.height
    });
  }
};
qi.prototype.resizable = function() {
  var e = this, t = this.parent, n = this.resizeHandle, i = parseInt(this.style.minWidth) || 0, r = parseInt(this.style.minHeight) || 0, o = parseInt(this.style.maxWidth) || 1 / 0, a = parseInt(this.style.maxHeight) || 1 / 0;
  if (!n) {
    n = this.resizeHandle = Bt(
      '<div class="djs-direct-editing-resize-handle"></div>'
    );
    var c, l, u, d, f = function(_) {
      uf(_), $s(_), c = _.clientX, l = _.clientY;
      var x = t.getBoundingClientRect();
      u = x.width, d = x.height, Ye.bind(document, "mousemove", y), Ye.bind(document, "mouseup", g);
    }, y = function(_) {
      uf(_), $s(_);
      var x = o0(a0(u + _.clientX - c, i), o), w = o0(a0(d + _.clientY - l, r), a);
      t.style.width = x + "px", t.style.height = w + "px", e.resizeHandler({
        width: u,
        height: d,
        dx: _.clientX - c,
        dy: _.clientY - l
      });
    }, g = function(_) {
      uf(_), $s(_), Ye.unbind(document, "mousemove", y, !1), Ye.unbind(document, "mouseup", g, !1);
    };
    Ye.bind(n, "mousedown", f);
  }
  G(n.style, {
    position: "absolute",
    bottom: "0px",
    right: "0px",
    cursor: "nwse-resize",
    width: "0",
    height: "0",
    borderTop: (parseInt(this.style.fontSize) / 4 || 3) + "px solid transparent",
    borderRight: (parseInt(this.style.fontSize) / 4 || 3) + "px solid #ccc",
    borderBottom: (parseInt(this.style.fontSize) / 4 || 3) + "px solid #ccc",
    borderLeft: (parseInt(this.style.fontSize) / 4 || 3) + "px solid transparent"
  }), t.appendChild(n);
};
qi.prototype.destroy = function() {
  var e = this.parent, t = this.content, n = this.resizeHandle;
  t.innerText = "", e.removeAttribute("style"), t.removeAttribute("style"), Ye.unbind(t, "keydown", this.keyHandler), Ye.unbind(t, "mousedown", $s), Ye.unbind(t, "input", this.autoResize), Ye.unbind(t, "paste", this.handlePaste), n && (n.removeAttribute("style"), lr(n)), lr(e);
};
qi.prototype.getValue = function() {
  return this.content.innerText.trim();
};
qi.prototype.getSelection = function() {
  var e = window.getSelection(), t = e.getRangeAt(0);
  return t;
};
qi.prototype.setSelection = function(e, t) {
  var n = document.createRange();
  e === null ? n.selectNodeContents(this.content) : (n.setStart(e, t), n.setEnd(e, t));
  var i = window.getSelection();
  i.removeAllRanges(), i.addRange(n);
};
function b5(e) {
  return e.replace(/\r\n|\r|\n/g, `
`);
}
function Bi(e, t) {
  this._eventBus = e, this._providers = [], this._textbox = new qi({
    container: t.getContainer(),
    keyHandler: Jn(this._handleKey, this),
    resizeHandler: Jn(this._handleResize, this)
  });
}
Bi.$inject = ["eventBus", "canvas"];
Bi.prototype.registerProvider = function(e) {
  this._providers.push(e);
};
Bi.prototype.isActive = function(e) {
  return !!(this._active && (!e || this._active.element === e));
};
Bi.prototype.cancel = function() {
  this._active && (this._fire("cancel"), this.close());
};
Bi.prototype._fire = function(e, t) {
  this._eventBus.fire("directEditing." + e, t || { active: this._active });
};
Bi.prototype.close = function() {
  this._textbox.destroy(), this._fire("deactivate"), this._active = null, this.resizable = void 0;
};
Bi.prototype.complete = function() {
  var e = this._active;
  if (e) {
    var t, n = e.context.bounds, i = this.$textbox.getBoundingClientRect(), r = this.getValue(), o = e.context.text;
    (r !== o || i.height !== n.height || i.width !== n.width) && (t = this._textbox.container.getBoundingClientRect(), e.provider.update(e.element, r, e.context.text, {
      x: i.left - t.left,
      y: i.top - t.top,
      width: i.width,
      height: i.height
    })), this._fire("complete"), this.close();
  }
};
Bi.prototype.getValue = function() {
  return this._textbox.getValue();
};
Bi.prototype._handleKey = function(e) {
  e.stopPropagation();
  var t = e.keyCode || e.charCode;
  if (t === 27)
    return e.preventDefault(), this.cancel();
  if (t === 13 && !e.shiftKey)
    return e.preventDefault(), this.complete();
};
Bi.prototype._handleResize = function(e) {
  this._fire("resize", e);
};
Bi.prototype.activate = function(e) {
  this.isActive() && this.cancel();
  var t, n = gt(this._providers, function(i) {
    return (t = i.activate(e)) ? i : null;
  });
  return t && (this.$textbox = this._textbox.create(
    t.bounds,
    t.style,
    t.text,
    t.options
  ), this._active = {
    element: e,
    context: t,
    provider: n
  }, t.options && t.options.resizable && (this.resizable = !0), this._fire("activate")), !!t;
};
const SE = {
  __depends__: [
    ku
  ],
  __init__: ["directEditing"],
  directEditing: ["type", Bi]
};
function s0(e) {
  return function(t) {
    var n = t.target, i = he(e), r = i.eventDefinitions && i.eventDefinitions[0], o = i.$type === n.type, a = (r && r.$type) === n.eventDefinitionType, c = (
      // coherse to <false>
      !!n.triggeredByEvent == !!i.triggeredByEvent
    ), l = n.isExpanded === void 0 || n.isExpanded === pt(e);
    return !o || !a || !c || !l;
  };
}
var x5 = [
  {
    label: "Start event",
    actionName: "replace-with-none-start",
    className: "bpmn-icon-start-event-none",
    target: {
      type: "bpmn:StartEvent"
    }
  },
  {
    label: "Intermediate throw event",
    actionName: "replace-with-none-intermediate-throwing",
    className: "bpmn-icon-intermediate-event-none",
    target: {
      type: "bpmn:IntermediateThrowEvent"
    }
  },
  {
    label: "End event",
    actionName: "replace-with-none-end",
    className: "bpmn-icon-end-event-none",
    target: {
      type: "bpmn:EndEvent"
    }
  },
  {
    label: "Message start event",
    actionName: "replace-with-message-start",
    className: "bpmn-icon-start-event-message",
    target: {
      type: "bpmn:StartEvent",
      eventDefinitionType: "bpmn:MessageEventDefinition"
    }
  },
  {
    label: "Timer start event",
    actionName: "replace-with-timer-start",
    className: "bpmn-icon-start-event-timer",
    target: {
      type: "bpmn:StartEvent",
      eventDefinitionType: "bpmn:TimerEventDefinition"
    }
  },
  {
    label: "Conditional start event",
    actionName: "replace-with-conditional-start",
    className: "bpmn-icon-start-event-condition",
    target: {
      type: "bpmn:StartEvent",
      eventDefinitionType: "bpmn:ConditionalEventDefinition"
    }
  },
  {
    label: "Signal start event",
    actionName: "replace-with-signal-start",
    className: "bpmn-icon-start-event-signal",
    target: {
      type: "bpmn:StartEvent",
      eventDefinitionType: "bpmn:SignalEventDefinition"
    }
  }
], E5 = [
  {
    label: "Start event",
    actionName: "replace-with-none-start",
    className: "bpmn-icon-start-event-none",
    target: {
      type: "bpmn:StartEvent"
    }
  },
  {
    label: "Intermediate throw event",
    actionName: "replace-with-none-intermediate-throwing",
    className: "bpmn-icon-intermediate-event-none",
    target: {
      type: "bpmn:IntermediateThrowEvent"
    }
  },
  {
    label: "End event",
    actionName: "replace-with-none-end",
    className: "bpmn-icon-end-event-none",
    target: {
      type: "bpmn:EndEvent"
    }
  }
], w5 = [
  {
    label: "Start event",
    actionName: "replace-with-none-start",
    className: "bpmn-icon-start-event-none",
    target: {
      type: "bpmn:StartEvent"
    }
  },
  {
    label: "Intermediate throw event",
    actionName: "replace-with-none-intermediate-throw",
    className: "bpmn-icon-intermediate-event-none",
    target: {
      type: "bpmn:IntermediateThrowEvent"
    }
  },
  {
    label: "End event",
    actionName: "replace-with-none-end",
    className: "bpmn-icon-end-event-none",
    target: {
      type: "bpmn:EndEvent"
    }
  },
  {
    label: "Message intermediate catch event",
    actionName: "replace-with-message-intermediate-catch",
    className: "bpmn-icon-intermediate-event-catch-message",
    target: {
      type: "bpmn:IntermediateCatchEvent",
      eventDefinitionType: "bpmn:MessageEventDefinition"
    }
  },
  {
    label: "Message intermediate throw event",
    actionName: "replace-with-message-intermediate-throw",
    className: "bpmn-icon-intermediate-event-throw-message",
    target: {
      type: "bpmn:IntermediateThrowEvent",
      eventDefinitionType: "bpmn:MessageEventDefinition"
    }
  },
  {
    label: "Timer intermediate catch event",
    actionName: "replace-with-timer-intermediate-catch",
    className: "bpmn-icon-intermediate-event-catch-timer",
    target: {
      type: "bpmn:IntermediateCatchEvent",
      eventDefinitionType: "bpmn:TimerEventDefinition"
    }
  },
  {
    label: "Escalation intermediate throw event",
    actionName: "replace-with-escalation-intermediate-throw",
    className: "bpmn-icon-intermediate-event-throw-escalation",
    target: {
      type: "bpmn:IntermediateThrowEvent",
      eventDefinitionType: "bpmn:EscalationEventDefinition"
    }
  },
  {
    label: "Conditional intermediate catch event",
    actionName: "replace-with-conditional-intermediate-catch",
    className: "bpmn-icon-intermediate-event-catch-condition",
    target: {
      type: "bpmn:IntermediateCatchEvent",
      eventDefinitionType: "bpmn:ConditionalEventDefinition"
    }
  },
  {
    label: "Link intermediate catch event",
    actionName: "replace-with-link-intermediate-catch",
    className: "bpmn-icon-intermediate-event-catch-link",
    target: {
      type: "bpmn:IntermediateCatchEvent",
      eventDefinitionType: "bpmn:LinkEventDefinition",
      eventDefinitionAttrs: {
        name: ""
      }
    }
  },
  {
    label: "Link intermediate throw event",
    actionName: "replace-with-link-intermediate-throw",
    className: "bpmn-icon-intermediate-event-throw-link",
    target: {
      type: "bpmn:IntermediateThrowEvent",
      eventDefinitionType: "bpmn:LinkEventDefinition",
      eventDefinitionAttrs: {
        name: ""
      }
    }
  },
  {
    label: "Compensation intermediate throw event",
    actionName: "replace-with-compensation-intermediate-throw",
    className: "bpmn-icon-intermediate-event-throw-compensation",
    target: {
      type: "bpmn:IntermediateThrowEvent",
      eventDefinitionType: "bpmn:CompensateEventDefinition"
    }
  },
  {
    label: "Signal intermediate catch event",
    actionName: "replace-with-signal-intermediate-catch",
    className: "bpmn-icon-intermediate-event-catch-signal",
    target: {
      type: "bpmn:IntermediateCatchEvent",
      eventDefinitionType: "bpmn:SignalEventDefinition"
    }
  },
  {
    label: "Signal intermediate throw event",
    actionName: "replace-with-signal-intermediate-throw",
    className: "bpmn-icon-intermediate-event-throw-signal",
    target: {
      type: "bpmn:IntermediateThrowEvent",
      eventDefinitionType: "bpmn:SignalEventDefinition"
    }
  }
], S5 = [
  {
    label: "Start event",
    actionName: "replace-with-none-start",
    className: "bpmn-icon-start-event-none",
    target: {
      type: "bpmn:StartEvent"
    }
  },
  {
    label: "Intermediate throw event",
    actionName: "replace-with-none-intermediate-throw",
    className: "bpmn-icon-intermediate-event-none",
    target: {
      type: "bpmn:IntermediateThrowEvent"
    }
  },
  {
    label: "End event",
    actionName: "replace-with-none-end",
    className: "bpmn-icon-end-event-none",
    target: {
      type: "bpmn:EndEvent"
    }
  },
  {
    label: "Message end event",
    actionName: "replace-with-message-end",
    className: "bpmn-icon-end-event-message",
    target: {
      type: "bpmn:EndEvent",
      eventDefinitionType: "bpmn:MessageEventDefinition"
    }
  },
  {
    label: "Escalation end event",
    actionName: "replace-with-escalation-end",
    className: "bpmn-icon-end-event-escalation",
    target: {
      type: "bpmn:EndEvent",
      eventDefinitionType: "bpmn:EscalationEventDefinition"
    }
  },
  {
    label: "Error end event",
    actionName: "replace-with-error-end",
    className: "bpmn-icon-end-event-error",
    target: {
      type: "bpmn:EndEvent",
      eventDefinitionType: "bpmn:ErrorEventDefinition"
    }
  },
  {
    label: "Cancel end event",
    actionName: "replace-with-cancel-end",
    className: "bpmn-icon-end-event-cancel",
    target: {
      type: "bpmn:EndEvent",
      eventDefinitionType: "bpmn:CancelEventDefinition"
    }
  },
  {
    label: "Compensation end event",
    actionName: "replace-with-compensation-end",
    className: "bpmn-icon-end-event-compensation",
    target: {
      type: "bpmn:EndEvent",
      eventDefinitionType: "bpmn:CompensateEventDefinition"
    }
  },
  {
    label: "Signal end event",
    actionName: "replace-with-signal-end",
    className: "bpmn-icon-end-event-signal",
    target: {
      type: "bpmn:EndEvent",
      eventDefinitionType: "bpmn:SignalEventDefinition"
    }
  },
  {
    label: "Terminate end event",
    actionName: "replace-with-terminate-end",
    className: "bpmn-icon-end-event-terminate",
    target: {
      type: "bpmn:EndEvent",
      eventDefinitionType: "bpmn:TerminateEventDefinition"
    }
  }
], R5 = [
  {
    label: "Exclusive gateway",
    actionName: "replace-with-exclusive-gateway",
    className: "bpmn-icon-gateway-xor",
    target: {
      type: "bpmn:ExclusiveGateway"
    }
  },
  {
    label: "Parallel gateway",
    actionName: "replace-with-parallel-gateway",
    className: "bpmn-icon-gateway-parallel",
    target: {
      type: "bpmn:ParallelGateway"
    }
  },
  {
    label: "Inclusive gateway",
    actionName: "replace-with-inclusive-gateway",
    className: "bpmn-icon-gateway-or",
    target: {
      type: "bpmn:InclusiveGateway"
    }
  },
  {
    label: "Complex gateway",
    actionName: "replace-with-complex-gateway",
    className: "bpmn-icon-gateway-complex",
    target: {
      type: "bpmn:ComplexGateway"
    }
  },
  {
    label: "Event-based gateway",
    actionName: "replace-with-event-based-gateway",
    className: "bpmn-icon-gateway-eventbased",
    target: {
      type: "bpmn:EventBasedGateway",
      instantiate: !1,
      eventGatewayType: "Exclusive"
    }
  }
  // Gateways deactivated until https://github.com/bpmn-io/bpmn-js/issues/194
  // {
  //   label: 'Event based instantiating Gateway',
  //   actionName: 'replace-with-exclusive-event-based-gateway',
  //   className: 'bpmn-icon-exclusive-event-based',
  //   target: {
  //     type: 'bpmn:EventBasedGateway'
  //   },
  //   options: {
  //     businessObject: { instantiate: true, eventGatewayType: 'Exclusive' }
  //   }
  // },
  // {
  //   label: 'Parallel Event based instantiating Gateway',
  //   actionName: 'replace-with-parallel-event-based-instantiate-gateway',
  //   className: 'bpmn-icon-parallel-event-based-instantiate-gateway',
  //   target: {
  //     type: 'bpmn:EventBasedGateway'
  //   },
  //   options: {
  //     businessObject: { instantiate: true, eventGatewayType: 'Parallel' }
  //   }
  // }
], C5 = [
  {
    label: "Transaction",
    actionName: "replace-with-transaction",
    className: "bpmn-icon-transaction",
    target: {
      type: "bpmn:Transaction",
      isExpanded: !0
    }
  },
  {
    label: "Event sub-process",
    actionName: "replace-with-event-subprocess",
    className: "bpmn-icon-event-subprocess-expanded",
    target: {
      type: "bpmn:SubProcess",
      triggeredByEvent: !0,
      isExpanded: !0
    }
  },
  {
    label: "Sub-process (collapsed)",
    actionName: "replace-with-collapsed-subprocess",
    className: "bpmn-icon-subprocess-collapsed",
    target: {
      type: "bpmn:SubProcess",
      isExpanded: !1
    }
  }
], RE = [
  {
    label: "Transaction",
    actionName: "replace-with-transaction",
    className: "bpmn-icon-transaction",
    target: {
      type: "bpmn:Transaction",
      isExpanded: !0
    }
  },
  {
    label: "Sub-process",
    actionName: "replace-with-subprocess",
    className: "bpmn-icon-subprocess-expanded",
    target: {
      type: "bpmn:SubProcess",
      isExpanded: !0
    }
  },
  {
    label: "Event sub-process",
    actionName: "replace-with-event-subprocess",
    className: "bpmn-icon-event-subprocess-expanded",
    target: {
      type: "bpmn:SubProcess",
      triggeredByEvent: !0,
      isExpanded: !0
    }
  }
], A5 = RE, c0 = [
  {
    label: "Task",
    actionName: "replace-with-task",
    className: "bpmn-icon-task",
    target: {
      type: "bpmn:Task"
    }
  },
  {
    label: "User task",
    actionName: "replace-with-user-task",
    className: "bpmn-icon-user",
    target: {
      type: "bpmn:UserTask"
    }
  },
  {
    label: "Service task",
    actionName: "replace-with-service-task",
    className: "bpmn-icon-service",
    target: {
      type: "bpmn:ServiceTask"
    }
  },
  {
    label: "Send task",
    actionName: "replace-with-send-task",
    className: "bpmn-icon-send",
    target: {
      type: "bpmn:SendTask"
    }
  },
  {
    label: "Receive task",
    actionName: "replace-with-receive-task",
    className: "bpmn-icon-receive",
    target: {
      type: "bpmn:ReceiveTask"
    }
  },
  {
    label: "Manual task",
    actionName: "replace-with-manual-task",
    className: "bpmn-icon-manual",
    target: {
      type: "bpmn:ManualTask"
    }
  },
  {
    label: "Business rule task",
    actionName: "replace-with-rule-task",
    className: "bpmn-icon-business-rule",
    target: {
      type: "bpmn:BusinessRuleTask"
    }
  },
  {
    label: "Script task",
    actionName: "replace-with-script-task",
    className: "bpmn-icon-script",
    target: {
      type: "bpmn:ScriptTask"
    }
  },
  {
    label: "Call activity",
    actionName: "replace-with-call-activity",
    className: "bpmn-icon-call-activity",
    target: {
      type: "bpmn:CallActivity"
    }
  },
  {
    label: "Sub-process (collapsed)",
    actionName: "replace-with-collapsed-subprocess",
    className: "bpmn-icon-subprocess-collapsed",
    target: {
      type: "bpmn:SubProcess",
      isExpanded: !1
    }
  },
  {
    label: "Sub-process (expanded)",
    actionName: "replace-with-expanded-subprocess",
    className: "bpmn-icon-subprocess-expanded",
    target: {
      type: "bpmn:SubProcess",
      isExpanded: !0
    }
  }
], P5 = [
  {
    label: "Data store reference",
    actionName: "replace-with-data-store-reference",
    className: "bpmn-icon-data-store",
    target: {
      type: "bpmn:DataStoreReference"
    }
  }
], T5 = [
  {
    label: "Data object reference",
    actionName: "replace-with-data-object-reference",
    className: "bpmn-icon-data-object",
    target: {
      type: "bpmn:DataObjectReference"
    }
  }
], k5 = [
  {
    label: "Message boundary event",
    actionName: "replace-with-message-boundary",
    className: "bpmn-icon-intermediate-event-catch-message",
    target: {
      type: "bpmn:BoundaryEvent",
      eventDefinitionType: "bpmn:MessageEventDefinition",
      cancelActivity: !0
    }
  },
  {
    label: "Timer boundary event",
    actionName: "replace-with-timer-boundary",
    className: "bpmn-icon-intermediate-event-catch-timer",
    target: {
      type: "bpmn:BoundaryEvent",
      eventDefinitionType: "bpmn:TimerEventDefinition",
      cancelActivity: !0
    }
  },
  {
    label: "Escalation boundary event",
    actionName: "replace-with-escalation-boundary",
    className: "bpmn-icon-intermediate-event-catch-escalation",
    target: {
      type: "bpmn:BoundaryEvent",
      eventDefinitionType: "bpmn:EscalationEventDefinition",
      cancelActivity: !0
    }
  },
  {
    label: "Conditional boundary event",
    actionName: "replace-with-conditional-boundary",
    className: "bpmn-icon-intermediate-event-catch-condition",
    target: {
      type: "bpmn:BoundaryEvent",
      eventDefinitionType: "bpmn:ConditionalEventDefinition",
      cancelActivity: !0
    }
  },
  {
    label: "Error boundary event",
    actionName: "replace-with-error-boundary",
    className: "bpmn-icon-intermediate-event-catch-error",
    target: {
      type: "bpmn:BoundaryEvent",
      eventDefinitionType: "bpmn:ErrorEventDefinition",
      cancelActivity: !0
    }
  },
  {
    label: "Cancel boundary event",
    actionName: "replace-with-cancel-boundary",
    className: "bpmn-icon-intermediate-event-catch-cancel",
    target: {
      type: "bpmn:BoundaryEvent",
      eventDefinitionType: "bpmn:CancelEventDefinition",
      cancelActivity: !0
    }
  },
  {
    label: "Signal boundary event",
    actionName: "replace-with-signal-boundary",
    className: "bpmn-icon-intermediate-event-catch-signal",
    target: {
      type: "bpmn:BoundaryEvent",
      eventDefinitionType: "bpmn:SignalEventDefinition",
      cancelActivity: !0
    }
  },
  {
    label: "Compensation boundary event",
    actionName: "replace-with-compensation-boundary",
    className: "bpmn-icon-intermediate-event-catch-compensation",
    target: {
      type: "bpmn:BoundaryEvent",
      eventDefinitionType: "bpmn:CompensateEventDefinition",
      cancelActivity: !0
    }
  },
  {
    label: "Message boundary event (non-interrupting)",
    actionName: "replace-with-non-interrupting-message-boundary",
    className: "bpmn-icon-intermediate-event-catch-non-interrupting-message",
    target: {
      type: "bpmn:BoundaryEvent",
      eventDefinitionType: "bpmn:MessageEventDefinition",
      cancelActivity: !1
    }
  },
  {
    label: "Timer boundary event (non-interrupting)",
    actionName: "replace-with-non-interrupting-timer-boundary",
    className: "bpmn-icon-intermediate-event-catch-non-interrupting-timer",
    target: {
      type: "bpmn:BoundaryEvent",
      eventDefinitionType: "bpmn:TimerEventDefinition",
      cancelActivity: !1
    }
  },
  {
    label: "Escalation boundary event (non-interrupting)",
    actionName: "replace-with-non-interrupting-escalation-boundary",
    className: "bpmn-icon-intermediate-event-catch-non-interrupting-escalation",
    target: {
      type: "bpmn:BoundaryEvent",
      eventDefinitionType: "bpmn:EscalationEventDefinition",
      cancelActivity: !1
    }
  },
  {
    label: "Conditional boundary event (non-interrupting)",
    actionName: "replace-with-non-interrupting-conditional-boundary",
    className: "bpmn-icon-intermediate-event-catch-non-interrupting-condition",
    target: {
      type: "bpmn:BoundaryEvent",
      eventDefinitionType: "bpmn:ConditionalEventDefinition",
      cancelActivity: !1
    }
  },
  {
    label: "Signal boundary event (non-interrupting)",
    actionName: "replace-with-non-interrupting-signal-boundary",
    className: "bpmn-icon-intermediate-event-catch-non-interrupting-signal",
    target: {
      type: "bpmn:BoundaryEvent",
      eventDefinitionType: "bpmn:SignalEventDefinition",
      cancelActivity: !1
    }
  }
], M5 = [
  {
    label: "Message start event",
    actionName: "replace-with-message-start",
    className: "bpmn-icon-start-event-message",
    target: {
      type: "bpmn:StartEvent",
      eventDefinitionType: "bpmn:MessageEventDefinition",
      isInterrupting: !0
    }
  },
  {
    label: "Timer start event",
    actionName: "replace-with-timer-start",
    className: "bpmn-icon-start-event-timer",
    target: {
      type: "bpmn:StartEvent",
      eventDefinitionType: "bpmn:TimerEventDefinition",
      isInterrupting: !0
    }
  },
  {
    label: "Conditional start event",
    actionName: "replace-with-conditional-start",
    className: "bpmn-icon-start-event-condition",
    target: {
      type: "bpmn:StartEvent",
      eventDefinitionType: "bpmn:ConditionalEventDefinition",
      isInterrupting: !0
    }
  },
  {
    label: "Signal start event",
    actionName: "replace-with-signal-start",
    className: "bpmn-icon-start-event-signal",
    target: {
      type: "bpmn:StartEvent",
      eventDefinitionType: "bpmn:SignalEventDefinition",
      isInterrupting: !0
    }
  },
  {
    label: "Error start event",
    actionName: "replace-with-error-start",
    className: "bpmn-icon-start-event-error",
    target: {
      type: "bpmn:StartEvent",
      eventDefinitionType: "bpmn:ErrorEventDefinition",
      isInterrupting: !0
    }
  },
  {
    label: "Escalation start event",
    actionName: "replace-with-escalation-start",
    className: "bpmn-icon-start-event-escalation",
    target: {
      type: "bpmn:StartEvent",
      eventDefinitionType: "bpmn:EscalationEventDefinition",
      isInterrupting: !0
    }
  },
  {
    label: "Compensation start event",
    actionName: "replace-with-compensation-start",
    className: "bpmn-icon-start-event-compensation",
    target: {
      type: "bpmn:StartEvent",
      eventDefinitionType: "bpmn:CompensateEventDefinition",
      isInterrupting: !0
    }
  },
  {
    label: "Message start event (non-interrupting)",
    actionName: "replace-with-non-interrupting-message-start",
    className: "bpmn-icon-start-event-non-interrupting-message",
    target: {
      type: "bpmn:StartEvent",
      eventDefinitionType: "bpmn:MessageEventDefinition",
      isInterrupting: !1
    }
  },
  {
    label: "Timer start event (non-interrupting)",
    actionName: "replace-with-non-interrupting-timer-start",
    className: "bpmn-icon-start-event-non-interrupting-timer",
    target: {
      type: "bpmn:StartEvent",
      eventDefinitionType: "bpmn:TimerEventDefinition",
      isInterrupting: !1
    }
  },
  {
    label: "Conditional start event (non-interrupting)",
    actionName: "replace-with-non-interrupting-conditional-start",
    className: "bpmn-icon-start-event-non-interrupting-condition",
    target: {
      type: "bpmn:StartEvent",
      eventDefinitionType: "bpmn:ConditionalEventDefinition",
      isInterrupting: !1
    }
  },
  {
    label: "Signal start event (non-interrupting)",
    actionName: "replace-with-non-interrupting-signal-start",
    className: "bpmn-icon-start-event-non-interrupting-signal",
    target: {
      type: "bpmn:StartEvent",
      eventDefinitionType: "bpmn:SignalEventDefinition",
      isInterrupting: !1
    }
  },
  {
    label: "Escalation start event (non-interrupting)",
    actionName: "replace-with-non-interrupting-escalation-start",
    className: "bpmn-icon-start-event-non-interrupting-escalation",
    target: {
      type: "bpmn:StartEvent",
      eventDefinitionType: "bpmn:EscalationEventDefinition",
      isInterrupting: !1
    }
  }
], D5 = [
  {
    label: "Sequence flow",
    actionName: "replace-with-sequence-flow",
    className: "bpmn-icon-connection"
  },
  {
    label: "Default flow",
    actionName: "replace-with-default-flow",
    className: "bpmn-icon-default-flow"
  },
  {
    label: "Conditional flow",
    actionName: "replace-with-conditional-flow",
    className: "bpmn-icon-conditional-flow"
  }
], O5 = [
  {
    label: "Expanded pool/participant",
    actionName: "replace-with-expanded-pool",
    className: "bpmn-icon-participant",
    target: {
      type: "bpmn:Participant",
      isExpanded: !0
    }
  },
  {
    label: function(e) {
      var t = "Empty pool/participant";
      return e.children && e.children.length && (t += " (removes content)"), t;
    },
    actionName: "replace-with-collapsed-pool",
    // TODO(@janstuemmel): maybe design new icon
    className: "bpmn-icon-lane",
    target: {
      type: "bpmn:Participant",
      isExpanded: !1
    }
  }
];
const l0 = {
  "start-event-non-interrupting": `
  <svg viewBox="0 0 2048 2048" xmlns="http://www.w3.org/2000/svg">
    <g transform="translate(0 995.64)">
      <path d="m1899 28.357c21.545 567.43-598.38 1023.5-1133.6 835.92-548.09-147.21-801.57-873.95-463.59-1330 302.62-480.3 1071.7-507.54 1407.6-49.847 122.14 153.12 190.07 348.07 189.59 543.91z" fill="none" stroke="currentColor" stroke-dasharray="418.310422, 361.2328165" stroke-linecap="round" stroke-width="100"/>
    </g>
  </svg>`,
  "intermediate-event-non-interrupting": `
  <svg viewBox="0 0 2048 2048" xmlns="http://www.w3.org/2000/svg">
     <g transform="translate(0 995.64)" fill="none" stroke="currentColor" stroke-linecap="round">
        <circle cx="1024" cy="28.357" r="875" stroke-dasharray="418.310422, 361.2328165" stroke-width="100"/>
        <circle cx="1024" cy="28.357" r="685" stroke-dasharray="348.31044857,261.23283643" stroke-dashoffset="500" stroke-width="100"/>
     </g>
  </svg>`
};
function xi(e, t, n, i, r, o, a, c) {
  this._bpmnFactory = e, this._popupMenu = t, this._modeling = n, this._moddle = i, this._bpmnReplace = r, this._rules = o, this._translate = a, this._moddleCopy = c, this._register();
}
xi.$inject = [
  "bpmnFactory",
  "popupMenu",
  "modeling",
  "moddle",
  "bpmnReplace",
  "rules",
  "translate",
  "moddleCopy"
];
xi.prototype._register = function() {
  this._popupMenu.registerProvider("bpmn-replace", this);
};
xi.prototype.getPopupMenuEntries = function(e) {
  var t = e.businessObject, n = this._rules, i = [];
  if (nt(e) || !n.allowed("shape.replace", { element: e }))
    return {};
  var r = s0(e);
  return A(t, "bpmn:DataObjectReference") ? this._createEntries(e, P5) : A(t, "bpmn:DataStoreReference") && !A(e.parent, "bpmn:Collaboration") ? this._createEntries(e, T5) : A(t, "bpmn:StartEvent") && !A(t.$parent, "bpmn:SubProcess") ? (i = et(x5, r), this._createEntries(e, i)) : A(t, "bpmn:Participant") ? (i = et(O5, function(o) {
    return pt(e) !== o.target.isExpanded;
  }), this._createEntries(e, i)) : A(t, "bpmn:StartEvent") && Nn(t.$parent) ? (i = et(M5, function(o) {
    var a = o.target, c = a.isInterrupting !== !1, l = t.isInterrupting === c;
    return r(o) || !r(o) && !l;
  }), this._createEntries(e, i)) : A(t, "bpmn:StartEvent") && !Nn(t.$parent) && A(t.$parent, "bpmn:SubProcess") ? (i = et(E5, r), this._createEntries(e, i)) : A(t, "bpmn:EndEvent") ? (i = et(S5, function(o) {
    var a = o.target;
    return a.eventDefinitionType == "bpmn:CancelEventDefinition" && !A(t.$parent, "bpmn:Transaction") ? !1 : r(o);
  }), this._createEntries(e, i)) : A(t, "bpmn:BoundaryEvent") ? (i = et(k5, function(o) {
    var a = o.target;
    if (a.eventDefinitionType == "bpmn:CancelEventDefinition" && !A(t.attachedToRef, "bpmn:Transaction"))
      return !1;
    var c = a.cancelActivity !== !1, l = t.cancelActivity == c;
    return r(o) || !r(o) && !l;
  }), this._createEntries(e, i)) : A(t, "bpmn:IntermediateCatchEvent") || A(t, "bpmn:IntermediateThrowEvent") ? (i = et(w5, r), this._createEntries(e, i)) : A(t, "bpmn:Gateway") ? (i = et(R5, r), this._createEntries(e, i)) : A(t, "bpmn:Transaction") ? (i = et(RE, r), this._createEntries(e, i)) : Nn(t) && pt(e) ? (i = et(A5, r), this._createEntries(e, i)) : A(t, "bpmn:SubProcess") && pt(e) ? (i = et(C5, r), this._createEntries(e, i)) : A(t, "bpmn:AdHocSubProcess") && !pt(e) ? (i = et(c0, function(o) {
    var a = o.target, c = a.type === "bpmn:SubProcess", l = a.isExpanded === !0;
    return s0(a) && (!c || l);
  }), this._createEntries(e, i)) : A(t, "bpmn:SequenceFlow") ? this._createSequenceFlowEntries(e, D5) : A(t, "bpmn:FlowNode") ? (i = et(c0, r), A(t, "bpmn:SubProcess") && !pt(e) && (i = et(i, function(o) {
    return o.label !== "Sub-process (collapsed)";
  })), this._createEntries(e, i)) : {};
};
xi.prototype.getPopupMenuHeaderEntries = function(e) {
  var t = {};
  return A(e, "bpmn:Activity") && !Nn(e) && (t = {
    ...t,
    ...this._getLoopCharacteristicsHeaderEntries(e)
  }), A(e, "bpmn:DataObjectReference") && (t = {
    ...t,
    ...this._getCollectionHeaderEntries(e)
  }), A(e, "bpmn:Participant") && (t = {
    ...t,
    ...this._getParticipantMultiplicityHeaderEntries(e)
  }), A(e, "bpmn:SubProcess") && !A(e, "bpmn:Transaction") && !Nn(e) && (t = {
    ...t,
    ...this._getAdHocHeaderEntries(e)
  }), Cx(e) && (t = {
    ...t,
    ...this._getNonInterruptingHeaderEntries(e)
  }), t;
};
xi.prototype._createEntries = function(e, t) {
  var n = {}, i = this;
  return z(t, function(r) {
    n[r.actionName] = i._createEntry(r, e);
  }), n;
};
xi.prototype._createSequenceFlowEntries = function(e, t) {
  var n = he(e), i = {}, r = this._modeling, o = this._moddle, a = this;
  return z(t, function(c) {
    switch (c.actionName) {
      case "replace-with-default-flow":
        n.sourceRef.default !== n && (A(n.sourceRef, "bpmn:ExclusiveGateway") || A(n.sourceRef, "bpmn:InclusiveGateway") || A(n.sourceRef, "bpmn:ComplexGateway") || A(n.sourceRef, "bpmn:Activity")) && (i = {
          ...i,
          [c.actionName]: a._createEntry(c, e, function() {
            r.updateProperties(e.source, { default: n });
          })
        });
        break;
      case "replace-with-conditional-flow":
        !n.conditionExpression && A(n.sourceRef, "bpmn:Activity") && (i = {
          ...i,
          [c.actionName]: a._createEntry(c, e, function() {
            var l = o.create("bpmn:FormalExpression", { body: "" });
            r.updateProperties(e, { conditionExpression: l });
          })
        });
        break;
      default:
        A(n.sourceRef, "bpmn:Activity") && n.conditionExpression && (i = {
          ...i,
          [c.actionName]: a._createEntry(c, e, function() {
            r.updateProperties(e, { conditionExpression: void 0 });
          })
        }), (A(n.sourceRef, "bpmn:ExclusiveGateway") || A(n.sourceRef, "bpmn:InclusiveGateway") || A(n.sourceRef, "bpmn:ComplexGateway") || A(n.sourceRef, "bpmn:Activity")) && n.sourceRef.default === n && (i = {
          ...i,
          [c.actionName]: a._createEntry(c, e, function() {
            r.updateProperties(e.source, { default: void 0 });
          })
        });
    }
  }), i;
};
xi.prototype._createEntry = function(e, t, n) {
  var i = this._translate, r = this._bpmnReplace.replaceElement, o = function() {
    return r(t, e.target);
  }, a = e.label;
  return a && typeof a == "function" && (a = a(t)), n = n || o, {
    label: i(a),
    className: e.className,
    action: n
  };
};
xi.prototype._getLoopCharacteristicsHeaderEntries = function(e) {
  var t = this, n = this._translate;
  function i(u, d) {
    if (d.active) {
      t._modeling.updateProperties(e, { loopCharacteristics: void 0 });
      return;
    }
    const f = e.businessObject.get("loopCharacteristics"), y = t._moddle.create(d.options.loopCharacteristics);
    f && t._moddleCopy.copyElement(f, y), y.set("isSequential", d.options.isSequential), t._modeling.updateProperties(e, { loopCharacteristics: y });
  }
  var r = he(e), o = r.loopCharacteristics, a, c, l;
  return o && (a = o.isSequential, c = o.isSequential === void 0, l = o.isSequential !== void 0 && !o.isSequential), {
    "toggle-parallel-mi": {
      className: "bpmn-icon-parallel-mi-marker",
      title: n("Parallel multi-instance"),
      active: l,
      action: i,
      options: {
        loopCharacteristics: "bpmn:MultiInstanceLoopCharacteristics",
        isSequential: !1
      }
    },
    "toggle-sequential-mi": {
      className: "bpmn-icon-sequential-mi-marker",
      title: n("Sequential multi-instance"),
      active: a,
      action: i,
      options: {
        loopCharacteristics: "bpmn:MultiInstanceLoopCharacteristics",
        isSequential: !0
      }
    },
    "toggle-loop": {
      className: "bpmn-icon-loop-marker",
      title: n("Loop"),
      active: c,
      action: i,
      options: {
        loopCharacteristics: "bpmn:StandardLoopCharacteristics"
      }
    }
  };
};
xi.prototype._getCollectionHeaderEntries = function(e) {
  var t = this, n = this._translate, i = e.businessObject.dataObjectRef;
  if (!i)
    return {};
  function r(a, c) {
    t._modeling.updateModdleProperties(
      e,
      i,
      { isCollection: !c.active }
    );
  }
  var o = i.isCollection;
  return {
    "toggle-is-collection": {
      className: "bpmn-icon-parallel-mi-marker",
      title: n("Collection"),
      active: o,
      action: r
    }
  };
};
xi.prototype._getParticipantMultiplicityHeaderEntries = function(e) {
  var t = this, n = this._bpmnFactory, i = this._translate;
  function r(a, c) {
    var l = c.active, u;
    l || (u = n.create("bpmn:ParticipantMultiplicity")), t._modeling.updateProperties(
      e,
      { participantMultiplicity: u }
    );
  }
  var o = e.businessObject.participantMultiplicity;
  return {
    "toggle-participant-multiplicity": {
      className: "bpmn-icon-parallel-mi-marker",
      title: i("Participant multiplicity"),
      active: !!o,
      action: r
    }
  };
};
xi.prototype._getAdHocHeaderEntries = function(e) {
  var t = this._translate, n = he(e), i = A(n, "bpmn:AdHocSubProcess"), r = this._bpmnReplace.replaceElement;
  return {
    "toggle-adhoc": {
      className: "bpmn-icon-ad-hoc-marker",
      title: t("Ad-hoc"),
      active: i,
      action: function(o, a) {
        return i ? r(e, { type: "bpmn:SubProcess" }, {
          autoResize: !1,
          layoutConnection: !1
        }) : r(e, { type: "bpmn:AdHocSubProcess" }, {
          autoResize: !1,
          layoutConnection: !1
        });
      }
    }
  };
};
xi.prototype._getNonInterruptingHeaderEntries = function(e) {
  const t = this._translate, n = he(e), i = this, r = Ax(e), o = A(e, "bpmn:BoundaryEvent") ? l0["intermediate-event-non-interrupting"] : l0["start-event-non-interrupting"], a = !n[r];
  return {
    "toggle-non-interrupting": {
      imageHtml: o,
      title: t("Toggle non-interrupting"),
      active: a,
      action: function() {
        i._modeling.updateProperties(e, {
          [r]: !!a
        });
      }
    }
  };
};
const N5 = {
  __depends__: [
    Gd,
    iE,
    Kd
  ],
  __init__: [
    "replaceMenuProvider"
  ],
  replaceMenuProvider: ["type", xi]
};
function Sc(e, t, n, i, r, o, a, c, l, u, d, f, y) {
  e = e || {}, i.registerProvider(this), this._contextPad = i, this._modeling = r, this._elementFactory = o, this._connect = a, this._create = c, this._popupMenu = l, this._canvas = u, this._rules = d, this._translate = f, this._eventBus = n, this._appendPreview = y, e.autoPlace !== !1 && (this._autoPlace = t.get("autoPlace", !1)), n.on("create.end", 250, function(g) {
    var _ = g.context, x = _.shape;
    if (!(!zs(g) || !i.isOpen(x))) {
      var w = i.getEntries(x);
      w.replace && w.replace.action.click(g, x);
    }
  }), n.on("contextPad.close", function() {
    y.cleanUp();
  });
}
Sc.$inject = [
  "config.contextPad",
  "injector",
  "eventBus",
  "contextPad",
  "modeling",
  "elementFactory",
  "connect",
  "create",
  "popupMenu",
  "canvas",
  "rules",
  "translate",
  "appendPreview"
];
Sc.prototype.getMultiElementContextPadEntries = function(e) {
  var t = this._modeling, n = {};
  return this._isDeleteAllowed(e) && G(n, {
    delete: {
      group: "edit",
      className: "bpmn-icon-trash",
      title: this._translate("Delete"),
      action: {
        click: function(i, r) {
          t.removeElements(r.slice());
        }
      }
    }
  }), n;
};
Sc.prototype._isDeleteAllowed = function(e) {
  var t = this._rules.allowed("elements.delete", {
    elements: e
  });
  return nt(t) ? Wa(t, function(n) {
    return B5(t, n);
  }) : t;
};
Sc.prototype.getContextPadEntries = function(e) {
  var t = this._contextPad, n = this._modeling, i = this._elementFactory, r = this._connect, o = this._create, a = this._popupMenu, c = this._rules, l = this._autoPlace, u = this._translate, d = this._appendPreview, f = {};
  if (e.type === "label")
    return f;
  var y = e.businessObject;
  function g(P, N) {
    r.start(P, N);
  }
  function _(P, N) {
    n.removeElements([N]);
  }
  function x(P) {
    var N = 5, j = t.getPad(P).html, W = j.getBoundingClientRect(), $ = {
      x: W.left,
      y: W.bottom + N
    };
    return $;
  }
  function w(P, N, j, W) {
    function $(V, ae) {
      var ie = i.createShape(G({ type: P }, W));
      o.start(V, ie, {
        source: ae
      });
    }
    var Z = l ? function(V, ae) {
      var ie = i.createShape(G({ type: P }, W));
      l.append(ae, ie);
    } : $, X = l ? function(V, ae) {
      return d.create(ae, P, W), () => {
        d.cleanUp();
      };
    } : null;
    return {
      group: "model",
      className: N,
      title: j,
      action: {
        dragstart: $,
        click: Z,
        hover: X
      }
    };
  }
  function D(P) {
    return function(N, j) {
      n.splitLane(j, P), t.open(j, !0);
    };
  }
  if (rt(y, ["bpmn:Lane", "bpmn:Participant"]) && pt(e)) {
    var O = vo(e);
    G(f, {
      "lane-insert-above": {
        group: "lane-insert-above",
        className: "bpmn-icon-lane-insert-above",
        title: u("Add lane above"),
        action: {
          click: function(P, N) {
            n.addLane(N, "top");
          }
        }
      }
    }), O.length < 2 && ((An(e) ? e.height >= 120 : e.width >= 120) && G(f, {
      "lane-divide-two": {
        group: "lane-divide",
        className: "bpmn-icon-lane-divide-two",
        title: u("Divide into two lanes"),
        action: {
          click: D(2)
        }
      }
    }), (An(e) ? e.height >= 180 : e.width >= 180) && G(f, {
      "lane-divide-three": {
        group: "lane-divide",
        className: "bpmn-icon-lane-divide-three",
        title: u("Divide into three lanes"),
        action: {
          click: D(3)
        }
      }
    })), G(f, {
      "lane-insert-below": {
        group: "lane-insert-below",
        className: "bpmn-icon-lane-insert-below",
        title: u("Add lane below"),
        action: {
          click: function(P, N) {
            n.addLane(N, "bottom");
          }
        }
      }
    });
  }
  A(y, "bpmn:FlowNode") && (A(y, "bpmn:EventBasedGateway") ? G(f, {
    "append.receive-task": w(
      "bpmn:ReceiveTask",
      "bpmn-icon-receive-task",
      u("Append receive task")
    ),
    "append.message-intermediate-event": w(
      "bpmn:IntermediateCatchEvent",
      "bpmn-icon-intermediate-event-catch-message",
      u("Append message intermediate catch event"),
      { eventDefinitionType: "bpmn:MessageEventDefinition" }
    ),
    "append.timer-intermediate-event": w(
      "bpmn:IntermediateCatchEvent",
      "bpmn-icon-intermediate-event-catch-timer",
      u("Append timer intermediate catch event"),
      { eventDefinitionType: "bpmn:TimerEventDefinition" }
    ),
    "append.condition-intermediate-event": w(
      "bpmn:IntermediateCatchEvent",
      "bpmn-icon-intermediate-event-catch-condition",
      u("Append conditional intermediate catch event"),
      { eventDefinitionType: "bpmn:ConditionalEventDefinition" }
    ),
    "append.signal-intermediate-event": w(
      "bpmn:IntermediateCatchEvent",
      "bpmn-icon-intermediate-event-catch-signal",
      u("Append signal intermediate catch event"),
      { eventDefinitionType: "bpmn:SignalEventDefinition" }
    )
  }) : u0(y, "bpmn:BoundaryEvent", "bpmn:CompensateEventDefinition") ? G(f, {
    "append.compensation-activity": w(
      "bpmn:Task",
      "bpmn-icon-task",
      u("Append compensation activity"),
      {
        isForCompensation: !0
      }
    )
  }) : !A(y, "bpmn:EndEvent") && !y.isForCompensation && !u0(y, "bpmn:IntermediateThrowEvent", "bpmn:LinkEventDefinition") && !Nn(y) && G(f, {
    "append.end-event": w(
      "bpmn:EndEvent",
      "bpmn-icon-end-event-none",
      u("Append end event")
    ),
    "append.gateway": w(
      "bpmn:ExclusiveGateway",
      "bpmn-icon-gateway-none",
      u("Append gateway")
    ),
    "append.append-task": w(
      "bpmn:Task",
      "bpmn-icon-task",
      u("Append task")
    ),
    "append.intermediate-event": w(
      "bpmn:IntermediateThrowEvent",
      "bpmn-icon-intermediate-event-none",
      u("Append intermediate/boundary event")
    )
  })), a.isEmpty(e, "bpmn-replace") || G(f, {
    replace: {
      group: "edit",
      className: "bpmn-icon-screw-wrench",
      title: u("Change element"),
      action: {
        click: function(P, N) {
          var j = G(x(N), {
            cursor: { x: P.x, y: P.y }
          });
          a.open(N, "bpmn-replace", j, {
            title: u("Change element"),
            width: 300,
            search: !0
          });
        }
      }
    }
  }), A(y, "bpmn:SequenceFlow") && G(f, {
    "append.text-annotation": w(
      "bpmn:TextAnnotation",
      "bpmn-icon-text-annotation",
      u("Add text annotation")
    )
  }), rt(y, [
    "bpmn:FlowNode",
    "bpmn:InteractionNode",
    "bpmn:DataObjectReference",
    "bpmn:DataStoreReference"
  ]) && G(f, {
    "append.text-annotation": w(
      "bpmn:TextAnnotation",
      "bpmn-icon-text-annotation",
      u("Add text annotation")
    ),
    connect: {
      group: "connect",
      className: "bpmn-icon-connection-multi",
      title: u("Connect to other element"),
      action: {
        click: g,
        dragstart: g
      }
    }
  }), A(y, "bpmn:TextAnnotation") && G(f, {
    connect: {
      group: "connect",
      className: "bpmn-icon-connection-multi",
      title: u("Connect using association"),
      action: {
        click: g,
        dragstart: g
      }
    }
  }), rt(y, ["bpmn:DataObjectReference", "bpmn:DataStoreReference"]) && G(f, {
    connect: {
      group: "connect",
      className: "bpmn-icon-connection-multi",
      title: u("Connect using data input association"),
      action: {
        click: g,
        dragstart: g
      }
    }
  }), A(y, "bpmn:Group") && G(f, {
    "append.text-annotation": w(
      "bpmn:TextAnnotation",
      "bpmn-icon-text-annotation",
      u("Add text annotation")
    )
  });
  var k = c.allowed("elements.delete", { elements: [e] });
  return nt(k) && (k = k[0] === e), k && G(f, {
    delete: {
      group: "edit",
      className: "bpmn-icon-trash",
      title: u("Delete"),
      action: {
        click: _
      }
    }
  }), f;
};
function u0(e, t, n) {
  var i = e.$instanceOf(t), r = !1, o = e.eventDefinitions || [];
  return z(o, function(a) {
    a.$type === n && (r = !0);
  }), i && r;
}
function B5(e, t) {
  return e.indexOf(t) !== -1;
}
const L5 = {
  __depends__: [
    g5,
    SE,
    Cb,
    fr,
    Qd,
    Xu,
    N5
  ],
  __init__: ["contextPadProvider"],
  contextPadProvider: ["type", Sc]
};
var I5 = {
  horizontal: ["x", "width"],
  vertical: ["y", "height"]
}, p0 = 5;
function Hr(e, t) {
  this._modeling = e, this._filters = [], this.registerFilter(function(n) {
    var i = t.allowed("elements.distribute", { elements: n });
    return nt(i) ? i : i ? n : [];
  });
}
Hr.$inject = ["modeling", "rules"];
Hr.prototype.registerFilter = function(e) {
  if (typeof e != "function")
    throw new Error("the filter has to be a function");
  this._filters.push(e);
};
Hr.prototype.trigger = function(e, t) {
  var n = this._modeling, i, r;
  if (!(e.length < 3) && (this._setOrientation(t), r = this._filterElements(e), i = this._createGroups(r), !(i.length <= 2)))
    return n.distributeElements(i, this._axis, this._dimension), i;
};
Hr.prototype._filterElements = function(e) {
  var t = this._filters, n = this._axis, i = this._dimension, r = [].concat(e);
  return t.length ? (z(t, function(o) {
    r = o(r, n, i);
  }), r) : e;
};
Hr.prototype._createGroups = function(e) {
  var t = [], n = this, i = this._axis, r = this._dimension;
  if (!i)
    throw new Error('must have a defined "axis" and "dimension"');
  var o = Gi(e, i);
  return z(o, function(a, c) {
    var l = n._findRange(a, i, r), u, d = t[t.length - 1];
    d && n._hasIntersection(d.range, l) ? t[t.length - 1].elements.push(a) : (u = { range: l, elements: [a] }, t.push(u));
  }), t;
};
Hr.prototype._setOrientation = function(e) {
  var t = I5[e];
  this._axis = t[0], this._dimension = t[1];
};
Hr.prototype._hasIntersection = function(e, t) {
  return Math.max(e.min, e.max) >= Math.min(t.min, t.max) && Math.min(e.min, e.max) <= Math.max(t.min, t.max);
};
Hr.prototype._findRange = function(e) {
  var t = e[this._axis], n = e[this._dimension];
  return {
    min: t + p0,
    max: t + n - p0
  };
};
const $5 = {
  __init__: ["distributeElements"],
  distributeElements: ["type", Hr]
};
function up(e) {
  Di.call(this, e);
}
up.$inject = ["eventBus"];
Pe(up, Di);
up.prototype.init = function() {
  this.addRule("elements.distribute", function(e) {
    var t = e.elements;
    return t = et(t, function(n) {
      var i = rt(n, [
        "bpmn:Association",
        "bpmn:BoundaryEvent",
        "bpmn:DataInputAssociation",
        "bpmn:DataOutputAssociation",
        "bpmn:Lane",
        "bpmn:MessageFlow",
        "bpmn:SequenceFlow",
        "bpmn:TextAnnotation"
      ]);
      return !(n.labelTarget || i);
    }), t = vu(t), t.length < 3 ? !1 : t;
  });
};
var f0 = {
  horizontal: `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1800 1800">
                <polyline points="450 400 450 150 1350 150 1350 400" style="fill:none;stroke:currentColor;stroke-width:100;stroke-linejoin:round;"/>
                <rect x="150" y="450" width="600" height="1200" rx="1" style="fill:none;stroke:currentColor;stroke-width:100;"></rect>
                <rect x="1050" y="450" width="600" height="800" rx="1" style="fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;"></rect>
              </svg>`,
  vertical: `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1800 1800">
              <polyline points="400 1350 150 1350 150 450 400 450" style="fill:none;stroke:currentColor;stroke-width:100;stroke-linejoin:round;"/>
              <rect x="450" y="150" width="1200" height="600" rx="1" style="fill:none;stroke:currentColor;stroke-width:100;"></rect>
              <rect x="450" y="1050" width="800" height="600" rx="1" style="fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;"></rect>
            </svg>`
}, j5 = 900;
function Rc(e, t, n, i) {
  this._distributeElements = t, this._translate = n, this._popupMenu = e, this._rules = i, e.registerProvider("align-elements", j5, this);
}
Rc.$inject = [
  "popupMenu",
  "distributeElements",
  "translate",
  "rules"
];
Rc.prototype.getPopupMenuEntries = function(e) {
  var t = {};
  return this._isAllowed(e) && G(t, this._getEntries(e)), t;
};
Rc.prototype._isAllowed = function(e) {
  return this._rules.allowed("elements.distribute", { elements: e });
};
Rc.prototype._getEntries = function(e) {
  var t = this._distributeElements, n = this._translate, i = this._popupMenu, r = {
    "distribute-elements-horizontal": {
      group: "distribute",
      title: n("Distribute elements horizontally"),
      className: "bjs-align-elements-menu-entry",
      imageHtml: f0.horizontal,
      action: function(o, a) {
        t.trigger(e, "horizontal"), i.close();
      }
    },
    "distribute-elements-vertical": {
      group: "distribute",
      title: n("Distribute elements vertically"),
      imageHtml: f0.vertical,
      action: function(o, a) {
        t.trigger(e, "vertical"), i.close();
      }
    }
  };
  return r;
};
const F5 = {
  __depends__: [
    Gd,
    $5
  ],
  __init__: [
    "bpmnDistributeElements",
    "distributeElementsMenuProvider"
  ],
  bpmnDistributeElements: ["type", up],
  distributeElementsMenuProvider: ["type", Rc]
};
var CE = "is not a registered action", H5 = "is already registered";
function Li(e, t) {
  this._actions = {};
  var n = this;
  e.on("diagram.init", function() {
    n._registerDefaultActions(t), e.fire("editorActions.init", {
      editorActions: n
    });
  });
}
Li.$inject = [
  "eventBus",
  "injector"
];
Li.prototype._registerDefaultActions = function(e) {
  var t = e.get("commandStack", !1), n = e.get("modeling", !1), i = e.get("selection", !1), r = e.get("zoomScroll", !1), o = e.get("copyPaste", !1), a = e.get("canvas", !1), c = e.get("rules", !1), l = e.get("keyboardMove", !1), u = e.get("keyboardMoveSelection", !1);
  t && (this.register("undo", function() {
    t.undo();
  }), this.register("redo", function() {
    t.redo();
  })), o && i && this.register("copy", function() {
    var d = i.get();
    if (d.length)
      return o.copy(d);
  }), o && this.register("paste", function() {
    o.paste();
  }), r && this.register("stepZoom", function(d) {
    r.stepZoom(d.value);
  }), a && this.register("zoom", function(d) {
    a.zoom(d.value);
  }), n && i && c && this.register("removeSelection", function() {
    var d = i.get();
    if (d.length) {
      var f = c.allowed("elements.delete", { elements: d }), y;
      f !== !1 && (nt(f) ? y = f : y = d, y.length && n.removeElements(y.slice()));
    }
  }), l && this.register("moveCanvas", function(d) {
    l.moveCanvas(d);
  }), u && this.register("moveSelection", function(d) {
    u.moveSelection(d.direction, d.accelerated);
  });
};
Li.prototype.trigger = function(e, t) {
  if (!this._actions[e])
    throw im(e, CE);
  return this._actions[e](t);
};
Li.prototype.register = function(e, t) {
  var n = this;
  if (typeof e == "string")
    return this._registerAction(e, t);
  z(e, function(i, r) {
    n._registerAction(r, i);
  });
};
Li.prototype._registerAction = function(e, t) {
  if (this.isRegistered(e))
    throw im(e, H5);
  this._actions[e] = t;
};
Li.prototype.unregister = function(e) {
  if (!this.isRegistered(e))
    throw im(e, CE);
  this._actions[e] = void 0;
};
Li.prototype.getActions = function() {
  return Object.keys(this._actions);
};
Li.prototype.isRegistered = function(e) {
  return !!this._actions[e];
};
function im(e, t) {
  return new Error(e + " " + t);
}
const z5 = {
  __init__: ["editorActions"],
  editorActions: ["type", Li]
};
function pp(e) {
  e.invoke(Li, this);
}
Pe(pp, Li);
pp.$inject = [
  "injector"
];
pp.prototype._registerDefaultActions = function(e) {
  Li.prototype._registerDefaultActions.call(this, e);
  var t = e.get("canvas", !1), n = e.get("elementRegistry", !1), i = e.get("selection", !1), r = e.get("spaceTool", !1), o = e.get("lassoTool", !1), a = e.get("handTool", !1), c = e.get("globalConnect", !1), l = e.get("distributeElements", !1), u = e.get("alignElements", !1), d = e.get("directEditing", !1), f = e.get("searchPad", !1), y = e.get("modeling", !1), g = e.get("contextPad", !1);
  t && n && i && this._registerAction("selectElements", function() {
    var _ = t.getRootElement(), x = n.filter(function(w) {
      return w !== _;
    });
    return i.select(x), x;
  }), r && this._registerAction("spaceTool", function() {
    r.toggle();
  }), o && this._registerAction("lassoTool", function() {
    o.toggle();
  }), a && this._registerAction("handTool", function() {
    a.toggle();
  }), c && this._registerAction("globalConnectTool", function() {
    c.toggle();
  }), i && l && this._registerAction("distributeElements", function(_) {
    var x = i.get(), w = _.type;
    x.length && l.trigger(x, w);
  }), i && u && this._registerAction("alignElements", function(_) {
    var x = i.get(), w = [], D = _.type;
    x.length && (w = et(x, function(O) {
      return !A(O, "bpmn:Lane");
    }), u.trigger(w, D));
  }), i && y && this._registerAction("setColor", function(_) {
    var x = i.get();
    x.length && y.setColor(x, _);
  }), i && d && this._registerAction("directEditing", function() {
    var _ = i.get();
    _.length && d.activate(_[0]);
  }), f && this._registerAction("find", function() {
    f.toggle();
  }), t && y && this._registerAction("moveToOrigin", function() {
    var _ = t.getRootElement(), x, w;
    A(_, "bpmn:Collaboration") ? w = n.filter(function(D) {
      return A(D.parent, "bpmn:Collaboration");
    }) : w = n.filter(function(D) {
      return D !== _ && !A(D.parent, "bpmn:SubProcess");
    }), x = nn(w), y.moveElements(
      w,
      { x: -x.x, y: -x.y },
      _
    );
  }), i && g && this._registerAction("replaceElement", function(_) {
    g.triggerEntry("replace", "click", _);
  });
};
const V5 = {
  __depends__: [
    z5
  ],
  editorActions: ["type", pp]
};
function AE(e) {
  e.on([
    "create.init",
    "shape.move.init"
  ], function(t) {
    var n = t.context, i = t.shape;
    rt(i, [
      "bpmn:Participant",
      "bpmn:SubProcess",
      "bpmn:TextAnnotation"
    ]) && (n.gridSnappingContext || (n.gridSnappingContext = {}), n.gridSnappingContext.snapLocation = "top-left");
  });
}
AE.$inject = ["eventBus"];
var Yl = 10;
function pf(e, t, n) {
  return n || (n = "round"), Math[n](e / t) * t;
}
var W5 = 1200, G5 = 800;
function So(e, t, n) {
  var i = !n || n.active !== !1;
  this._eventBus = t;
  var r = this;
  t.on("diagram.init", G5, function() {
    r.setActive(i);
  }), t.on([
    "create.move",
    "create.end",
    "bendpoint.move.move",
    "bendpoint.move.end",
    "connect.move",
    "connect.end",
    "connectionSegment.move.move",
    "connectionSegment.move.end",
    "resize.move",
    "resize.end",
    "shape.move.move",
    "shape.move.end"
  ], W5, function(o) {
    var a = o.originalEvent;
    if (!(!r.active || a && gi(a))) {
      var c = o.context, l = c.gridSnappingContext;
      l || (l = c.gridSnappingContext = {}), ["x", "y"].forEach(function(u) {
        var d = {}, f = Y5(o, u, e);
        f && (d.offset = f);
        var y = U5(o, u);
        y && G(d, y), Fa(o, u) || r.snapEvent(o, u, d);
      });
    }
  });
}
So.prototype.snapEvent = function(e, t, n) {
  var i = this.snapValue(e[t], n);
  tn(e, t, i);
};
So.prototype.getGridSpacing = function() {
  return Yl;
};
So.prototype.snapValue = function(e, t) {
  var n = 0;
  t && t.offset && (n = t.offset), e += n, e = pf(e, Yl);
  var i, r;
  return t && t.min && (i = t.min, je(i) && (i = pf(i + n, Yl, "ceil"), e = Math.max(e, i))), t && t.max && (r = t.max, je(r) && (r = pf(r + n, Yl, "floor"), e = Math.min(e, r))), e -= n, e;
};
So.prototype.isActive = function() {
  return this.active;
};
So.prototype.setActive = function(e) {
  this.active = e, this._eventBus.fire("gridSnapping.toggle", { active: e });
};
So.prototype.toggleActive = function() {
  this.setActive(!this.active);
};
So.$inject = [
  "elementRegistry",
  "eventBus",
  "config.gridSnapping"
];
function U5(e, t) {
  var n = e.context, i = n.createConstraints, r = n.resizeConstraints || {}, o = n.gridSnappingContext, a = o.snapConstraints;
  if (a && a[t])
    return a[t];
  a || (a = o.snapConstraints = {}), a[t] || (a[t] = {});
  var c = n.direction;
  i && (Kl(t) ? (a.x.min = i.left, a.x.max = i.right) : (a.y.min = i.top, a.y.max = i.bottom));
  var l = r.min, u = r.max;
  return l && (Kl(t) ? h0(c) ? a.x.max = l.left : a.x.min = l.right : d0(c) ? a.y.max = l.top : a.y.min = l.bottom), u && (Kl(t) ? h0(c) ? a.x.min = u.left : a.x.max = u.right : d0(c) ? a.y.min = u.top : a.y.max = u.bottom), a[t];
}
function Y5(e, t, n) {
  var i = e.context, r = e.shape, o = i.gridSnappingContext, a = o.snapLocation, c = o.snapOffset;
  return c && je(c[t]) || (c || (c = o.snapOffset = {}), je(c[t]) || (c[t] = 0), !r) || (n.get(r.id) || (Kl(t) ? c[t] += r[t] + r.width / 2 : c[t] += r[t] + r.height / 2), !a) || (t === "x" ? /left/.test(a) ? c[t] -= r.width / 2 : /right/.test(a) && (c[t] += r.width / 2) : /top/.test(a) ? c[t] -= r.height / 2 : /bottom/.test(a) && (c[t] += r.height / 2)), c[t];
}
function Kl(e) {
  return e === "x";
}
function d0(e) {
  return e.indexOf("n") !== -1;
}
function h0(e) {
  return e.indexOf("w") !== -1;
}
function ca(e, t) {
  le.call(this, e), this._gridSnapping = t;
  var n = this;
  this.preExecute("shape.resize", function(i) {
    var r = i.context, o = r.hints || {}, a = o.autoResize;
    if (a) {
      var c = r.shape, l = r.newBounds;
      ci(a) ? r.newBounds = n.snapComplex(l, a) : r.newBounds = n.snapSimple(c, l);
    }
  });
}
ca.$inject = [
  "eventBus",
  "gridSnapping",
  "modeling"
];
Pe(ca, le);
ca.prototype.snapSimple = function(e, t) {
  var n = this._gridSnapping;
  return t.width = n.snapValue(t.width, {
    min: t.width
  }), t.height = n.snapValue(t.height, {
    min: t.height
  }), t.x = e.x + e.width / 2 - t.width / 2, t.y = e.y + e.height / 2 - t.height / 2, t;
};
ca.prototype.snapComplex = function(e, t) {
  return /w|e/.test(t) && (e = this.snapHorizontally(e, t)), /n|s/.test(t) && (e = this.snapVertically(e, t)), e;
};
ca.prototype.snapHorizontally = function(e, t) {
  var n = this._gridSnapping, i = /w/.test(t), r = /e/.test(t), o = {};
  return o.width = n.snapValue(e.width, {
    min: e.width
  }), r && (i ? (o.x = n.snapValue(e.x, {
    max: e.x
  }), o.width += n.snapValue(e.x - o.x, {
    min: e.x - o.x
  })) : e.x = e.x + e.width - o.width), G(e, o), e;
};
ca.prototype.snapVertically = function(e, t) {
  var n = this._gridSnapping, i = /n/.test(t), r = /s/.test(t), o = {};
  return o.height = n.snapValue(e.height, {
    min: e.height
  }), i && (r ? (o.y = n.snapValue(e.y, {
    max: e.y
  }), o.height += n.snapValue(e.y - o.y, {
    min: e.y - o.y
  })) : e.y = e.y + e.height - o.height), G(e, o), e;
};
var K5 = 2e3;
function PE(e, t) {
  e.on([
    "spaceTool.move",
    "spaceTool.end"
  ], K5, function(n) {
    var i = n.context;
    if (i.initialized) {
      var r = i.axis, o;
      r === "x" ? (o = t.snapValue(n.dx), n.x = n.x + o - n.dx, n.dx = o) : (o = t.snapValue(n.dy), n.y = n.y + o - n.dy, n.dy = o);
    }
  });
}
PE.$inject = [
  "eventBus",
  "gridSnapping"
];
const q5 = {
  __init__: [
    "gridSnappingResizeBehavior",
    "gridSnappingSpaceToolBehavior"
  ],
  gridSnappingResizeBehavior: ["type", ca],
  gridSnappingSpaceToolBehavior: ["type", PE]
}, X5 = {
  __depends__: [q5],
  __init__: ["gridSnapping"],
  gridSnapping: ["type", So]
};
var Z5 = 2e3;
function TE(e, t) {
  e.on("autoPlace", Z5, function(n) {
    var i = n.source, r = Fe(i), o = n.shape, a = Yb(i, o);
    return ["x", "y"].forEach(function(c) {
      var l = {};
      a[c] !== r[c] && (a[c] > r[c] ? l.min = a[c] : l.max = a[c], A(o, "bpmn:TextAnnotation") && (J5(c) ? l.offset = -o.width / 2 : l.offset = -o.height / 2), a[c] = t.snapValue(a[c], l));
    }), a;
  });
}
TE.$inject = [
  "eventBus",
  "gridSnapping"
];
function J5(e) {
  return e === "x";
}
var Q5 = 1750;
function kE(e, t, n) {
  t.on([
    "create.start",
    "shape.move.start"
  ], Q5, function(i) {
    var r = i.context, o = r.shape, a = e.getRootElement();
    if (!(!A(o, "bpmn:Participant") || !A(a, "bpmn:Process") || !a.children.length)) {
      var c = r.createConstraints;
      c && (o.width = n.snapValue(o.width, { min: o.width }), o.height = n.snapValue(o.height, { min: o.height }));
    }
  });
}
kE.$inject = [
  "canvas",
  "eventBus",
  "gridSnapping"
];
var e3 = 3e3;
function fp(e, t, n) {
  le.call(this, e), this._gridSnapping = t;
  var i = this;
  this.postExecuted([
    "connection.create",
    "connection.layout"
  ], e3, function(r) {
    var o = r.context, a = o.connection, c = o.hints || {}, l = a.waypoints;
    c.connectionStart || c.connectionEnd || c.createElementsBehavior === !1 || t3(l) && n.updateWaypoints(a, i.snapMiddleSegments(l));
  });
}
fp.$inject = [
  "eventBus",
  "gridSnapping",
  "modeling"
];
Pe(fp, le);
fp.prototype.snapMiddleSegments = function(e) {
  var t = this._gridSnapping, n;
  e = e.slice();
  for (var i = 1; i < e.length - 2; i++)
    n = r3(t, e[i], e[i + 1]), e[i] = n[0], e[i + 1] = n[1];
  return e;
};
function t3(e) {
  return e.length > 3;
}
function n3(e) {
  return e === "h";
}
function i3(e) {
  return e === "v";
}
function r3(e, t, n) {
  var i = Pr(t, n), r = {};
  return n3(i) && (r.y = e.snapValue(t.y)), i3(i) && (r.x = e.snapValue(t.x)), ("x" in r || "y" in r) && (t = G({}, t, r), n = G({}, n, r)), [t, n];
}
const o3 = {
  __init__: [
    "gridSnappingAutoPlaceBehavior",
    "gridSnappingParticipantBehavior",
    "gridSnappingLayoutConnectionBehavior"
  ],
  gridSnappingAutoPlaceBehavior: ["type", TE],
  gridSnappingParticipantBehavior: ["type", kE],
  gridSnappingLayoutConnectionBehavior: ["type", fp]
}, a3 = {
  __depends__: [
    X5,
    o3
  ],
  __init__: ["bpmnGridSnapping"],
  bpmnGridSnapping: ["type", AE]
};
var s3 = 30, ME = 30;
function Cc(e, t) {
  this._interactionEvents = t;
  var n = this;
  e.on([
    "interactionEvents.createHit",
    "interactionEvents.updateHit"
  ], function(i) {
    var r = i.element, o = i.gfx;
    if (A(r, "bpmn:Lane"))
      return n._createParticipantHit(r, o);
    if (A(r, "bpmn:Participant"))
      return pt(r) ? n._createParticipantHit(r, o) : n._createDefaultHit(r, o);
    if (A(r, "bpmn:SubProcess"))
      return pt(r) ? n._createSubProcessHit(r, o) : n._createDefaultHit(r, o);
  });
}
Cc.$inject = [
  "eventBus",
  "interactionEvents"
];
Cc.prototype._createDefaultHit = function(e, t) {
  return this._interactionEvents.removeHits(t), this._interactionEvents.createDefaultHit(e, t), !0;
};
Cc.prototype._createParticipantHit = function(e, t) {
  this._interactionEvents.removeHits(t), this._interactionEvents.createBoxHit(t, "no-move", {
    width: e.width,
    height: e.height
  }), this._interactionEvents.createBoxHit(t, "click-stroke", {
    width: e.width,
    height: e.height
  });
  var n = An(e) ? {
    width: s3,
    height: e.height
  } : {
    width: e.width,
    height: ME
  };
  return this._interactionEvents.createBoxHit(t, "all", n), !0;
};
Cc.prototype._createSubProcessHit = function(e, t) {
  return this._interactionEvents.removeHits(t), this._interactionEvents.createBoxHit(t, "no-move", {
    width: e.width,
    height: e.height
  }), this._interactionEvents.createBoxHit(t, "click-stroke", {
    width: e.width,
    height: e.height
  }), this._interactionEvents.createBoxHit(t, "all", {
    width: e.width,
    height: ME
  }), !0;
};
const c3 = {
  __init__: ["bpmnInteractionEvents"],
  bpmnInteractionEvents: ["type", Cc]
};
function dp(e) {
  e.invoke(Xa, this);
}
Pe(dp, Xa);
dp.$inject = [
  "injector"
];
dp.prototype.registerBindings = function(e, t) {
  Xa.prototype.registerBindings.call(this, e, t);
  function n(i, r) {
    t.isRegistered(i) && e.addListener(r);
  }
  n("selectElements", function(i) {
    var r = i.keyEvent;
    if (e.isKey(["a", "A"], r) && e.isCmd(r))
      return t.trigger("selectElements"), !0;
  }), n("find", function(i) {
    var r = i.keyEvent;
    if (e.isKey(["f", "F"], r) && e.isCmd(r))
      return t.trigger("find"), !0;
  }), n("spaceTool", function(i) {
    var r = i.keyEvent;
    if (!e.hasModifier(r) && e.isKey(["s", "S"], r))
      return t.trigger("spaceTool"), !0;
  }), n("lassoTool", function(i) {
    var r = i.keyEvent;
    if (!e.hasModifier(r) && e.isKey(["l", "L"], r))
      return t.trigger("lassoTool"), !0;
  }), n("handTool", function(i) {
    var r = i.keyEvent;
    if (!e.hasModifier(r) && e.isKey(["h", "H"], r))
      return t.trigger("handTool"), !0;
  }), n("globalConnectTool", function(i) {
    var r = i.keyEvent;
    if (!e.hasModifier(r) && e.isKey(["c", "C"], r))
      return t.trigger("globalConnectTool"), !0;
  }), n("directEditing", function(i) {
    var r = i.keyEvent;
    if (!e.hasModifier(r) && e.isKey(["e", "E"], r))
      return t.trigger("directEditing"), !0;
  }), n("replaceElement", function(i) {
    var r = i.keyEvent;
    if (!e.hasModifier(r) && e.isKey(["r", "R"], r))
      return t.trigger("replaceElement", r), !0;
  });
};
const l3 = {
  __depends__: [
    $d
  ],
  __init__: ["keyboardBindings"],
  keyboardBindings: ["type", dp]
};
var u3 = {
  moveSpeed: 1,
  moveSpeedAccelerated: 10
}, p3 = 1500, m0 = "left", y0 = "up", g0 = "right", v0 = "down", f3 = {
  ArrowLeft: m0,
  Left: m0,
  ArrowUp: y0,
  Up: y0,
  ArrowRight: g0,
  Right: g0,
  ArrowDown: v0,
  Down: v0
}, d3 = {
  left: function(e) {
    return {
      x: -e,
      y: 0
    };
  },
  up: function(e) {
    return {
      x: 0,
      y: -e
    };
  },
  right: function(e) {
    return {
      x: e,
      y: 0
    };
  },
  down: function(e) {
    return {
      x: 0,
      y: e
    };
  }
};
function DE(e, t, n, i, r) {
  var o = this;
  this._config = G({}, u3, e || {}), t.addListener(p3, function(a) {
    var c = a.keyEvent, l = f3[c.key];
    if (l && !t.isCmd(c)) {
      var u = t.isShift(c);
      return o.moveSelection(l, u), !0;
    }
  }), this.moveSelection = function(a, c) {
    var l = r.get();
    if (l.length) {
      var u = this._config[c ? "moveSpeedAccelerated" : "moveSpeed"], d = d3[a](u), f = i.allowed("elements.move", {
        shapes: l
      });
      f && n.moveElements(l, d);
    }
  };
}
DE.$inject = [
  "config.keyboardMoveSelection",
  "keyboard",
  "modeling",
  "rules",
  "selection"
];
const h3 = {
  __depends__: [
    $d,
    fr
  ],
  __init__: [
    "keyboardMoveSelection"
  ],
  keyboardMoveSelection: ["type", DE]
};
var _0 = 10;
function Ac(e, t, n, i) {
  this._dragging = i, this._rules = t;
  var r = this;
  function o(l, u) {
    var d = l.shape, f = l.direction, y = l.resizeConstraints, g;
    l.delta = u, g = tk(d, f, u), l.newBounds = ik(g, y), l.canExecute = r.canResize(l);
  }
  function a(l) {
    var u = l.resizeConstraints, d = l.minBounds;
    u === void 0 && (d === void 0 && (d = r.computeMinResizeBox(l)), l.resizeConstraints = {
      min: Le(d)
    });
  }
  function c(l) {
    var u = l.shape, d = l.canExecute, f = l.newBounds;
    if (d) {
      if (f = E_(f), !m3(u, f))
        return;
      n.resizeShape(u, f);
    }
  }
  e.on("resize.start", function(l) {
    a(l.context);
  }), e.on("resize.move", function(l) {
    var u = {
      x: l.dx,
      y: l.dy
    };
    o(l.context, u);
  }), e.on("resize.end", function(l) {
    c(l.context);
  });
}
Ac.prototype.canResize = function(e) {
  var t = this._rules, n = Ui(e, ["newBounds", "shape", "delta", "direction"]);
  return t.allowed("shape.resize", n);
};
Ac.prototype.activate = function(e, t, n) {
  var i = this._dragging, r, o;
  if (typeof n == "string" && (n = {
    direction: n
  }), r = G({ shape: t }, n), o = r.direction, !o)
    throw new Error("must provide a direction (n|w|s|e|nw|se|ne|sw)");
  i.init(e, OE(t, o), "resize", {
    autoActivate: !0,
    cursor: y3(o),
    data: {
      shape: t,
      context: r
    }
  });
};
Ac.prototype.computeMinResizeBox = function(e) {
  var t = e.shape, n = e.direction, i, r;
  return i = e.minDimensions || {
    width: _0,
    height: _0
  }, r = gx(t, e.childrenBoxPadding), rk(n, t, i, r);
};
Ac.$inject = [
  "eventBus",
  "rules",
  "modeling",
  "dragging"
];
function m3(e, t) {
  return e.x !== t.x || e.y !== t.y || e.width !== t.width || e.height !== t.height;
}
function OE(e, t) {
  var n = Fe(e), i = Le(e), r = {
    x: n.x,
    y: n.y
  };
  return t.indexOf("n") !== -1 ? r.y = i.top : t.indexOf("s") !== -1 && (r.y = i.bottom), t.indexOf("e") !== -1 ? r.x = i.right : t.indexOf("w") !== -1 && (r.x = i.left), r;
}
function y3(e) {
  var t = "resize-";
  return e === "n" || e === "s" ? t + "ns" : e === "e" || e === "w" ? t + "ew" : e === "nw" || e === "se" ? t + "nwse" : t + "nesw";
}
var b0 = "djs-resizing", x0 = "resize-not-ok", g3 = 500;
function NE(e, t, n) {
  function i(o) {
    var a = o.shape, c = o.newBounds, l = o.frame;
    l || (l = o.frame = n.addFrame(a, t.getActiveLayer()), t.addMarker(a, b0)), c.width > 5 && we(l, { x: c.x, width: c.width }), c.height > 5 && we(l, { y: c.y, height: c.height }), o.canExecute ? dt(l).remove(x0) : dt(l).add(x0);
  }
  function r(o) {
    var a = o.shape, c = o.frame;
    c && qt(o.frame), t.removeMarker(a, b0);
  }
  e.on("resize.move", g3, function(o) {
    i(o.context);
  }), e.on("resize.cleanup", function(o) {
    r(o.context);
  });
}
NE.$inject = [
  "eventBus",
  "canvas",
  "previewSupport"
];
var Al = -6, Pl = 8, Tl = 20, Ts = "djs-resizer", v3 = ["n", "w", "s", "e", "nw", "ne", "se", "sw"];
function Ro(e, t, n, i) {
  this._resize = i, this._canvas = t;
  var r = this;
  e.on("selection.changed", function(o) {
    var a = o.newSelection;
    r.removeResizers(), a.length === 1 && z(a, Jn(r.addResizer, r));
  }), e.on("shape.changed", function(o) {
    var a = o.element;
    n.isSelected(a) && (r.removeResizers(), r.addResizer(a));
  });
}
Ro.prototype.makeDraggable = function(e, t, n) {
  var i = this._resize;
  function r(o) {
    mo(o) && i.activate(o, e, n);
  }
  Ye.bind(t, "mousedown", r), Ye.bind(t, "touchstart", r);
};
Ro.prototype._createResizer = function(e, t, n, i) {
  var r = this._getResizersParent(), o = _3(i), a = Me("g");
  dt(a).add(Ts), dt(a).add(Ts + "-" + e.id), dt(a).add(Ts + "-" + i), ze(r, a);
  var c = Me("rect");
  we(c, {
    x: -Pl / 2 + o.x,
    y: -Pl / 2 + o.y,
    width: Pl,
    height: Pl
  }), dt(c).add(Ts + "-visual"), ze(a, c);
  var l = Me("rect");
  return we(l, {
    x: -Tl / 2 + o.x,
    y: -Tl / 2 + o.y,
    width: Tl,
    height: Tl
  }), dt(l).add(Ts + "-hit"), ze(a, l), Bl(a, t, n), a;
};
Ro.prototype.createResizer = function(e, t) {
  var n = OE(e, t), i = this._createResizer(e, n.x, n.y, t);
  this.makeDraggable(e, i, t);
};
Ro.prototype.addResizer = function(e) {
  var t = this;
  kt(e) || !this._resize.canResize({ shape: e }) || z(v3, function(n) {
    t.createResizer(e, n);
  });
};
Ro.prototype.removeResizers = function() {
  var e = this._getResizersParent();
  yu(e);
};
Ro.prototype._getResizersParent = function() {
  return this._canvas.getLayer("resizers");
};
Ro.$inject = [
  "eventBus",
  "canvas",
  "selection",
  "resize"
];
function _3(e) {
  var t = {
    x: 0,
    y: 0
  };
  return e.indexOf("e") !== -1 ? t.x = -Al : e.indexOf("w") !== -1 && (t.x = Al), e.indexOf("s") !== -1 ? t.y = -Al : e.indexOf("n") !== -1 && (t.y = Al), t;
}
const BE = {
  __depends__: [
    hr,
    $r,
    es
  ],
  __init__: [
    "resize",
    "resizePreview",
    "resizeHandles"
  ],
  resize: ["type", Ac],
  resizePreview: ["type", NE],
  resizeHandles: ["type", Ro]
};
var b3 = 2e3;
function Pc(e, t, n, i, r, o, a) {
  this._bpmnFactory = t, this._canvas = n, this._modeling = r, this._textRenderer = a, i.registerProvider(this), e.on("element.dblclick", function(l) {
    c(l.element, !0);
  }), e.on([
    "autoPlace.start",
    "canvas.viewbox.changing",
    "drag.init",
    "element.mousedown",
    "popupMenu.open",
    "root.set",
    "selection.changed"
  ], function() {
    i.isActive() && i.complete();
  }), e.on([
    "shape.remove",
    "connection.remove"
  ], b3, function(l) {
    i.isActive(l.element) && i.cancel();
  }), e.on(["commandStack.changed"], function(l) {
    i.isActive() && i.cancel();
  }), e.on("directEditing.activate", function(l) {
    o.removeResizers();
  }), e.on("create.end", 500, function(l) {
    var u = l.context, d = u.shape, f = l.context.canExecute, y = l.isTouch;
    y || f && (u.hints && u.hints.createElementsBehavior === !1 || c(d));
  }), e.on("autoPlace.end", 500, function(l) {
    c(l.shape);
  });
  function c(l, u) {
    (u || rt(l, ["bpmn:Task", "bpmn:TextAnnotation", "bpmn:Participant"]) || rm(l)) && i.activate(l);
  }
}
Pc.$inject = [
  "eventBus",
  "bpmnFactory",
  "canvas",
  "directEditing",
  "modeling",
  "resizeHandles",
  "textRenderer"
];
Pc.prototype.activate = function(e) {
  var t = ki(e);
  if (t !== void 0) {
    var n = {
      text: t
    }, i = this.getEditingBBox(e);
    G(n, i);
    var r = {}, o = n.style || {};
    return G(o, {
      backgroundColor: null,
      border: null
    }), (rt(e, [
      "bpmn:Task",
      "bpmn:Participant",
      "bpmn:Lane",
      "bpmn:CallActivity"
    ]) || rm(e)) && G(r, {
      centerVertically: !0
    }), Zo(e) && (G(r, {
      autoResize: !0
    }), G(o, {
      backgroundColor: "#ffffff",
      border: "1px solid #ccc"
    })), A(e, "bpmn:TextAnnotation") && (G(r, {
      resizable: !0,
      autoResize: !0
    }), G(o, {
      backgroundColor: "#ffffff",
      border: "1px solid #ccc"
    })), G(n, {
      options: r,
      style: o
    }), n;
  }
};
Pc.prototype.getEditingBBox = function(e) {
  var t = this._canvas, n = e.label || e, i = t.getAbsoluteBBox(n), r = {
    x: i.x + i.width / 2,
    y: i.y + i.height / 2
  }, o = { x: i.x, y: i.y }, a = t.zoom(), c = this._textRenderer.getDefaultStyle(), l = this._textRenderer.getExternalStyle(), u = l.fontSize * a, d = l.lineHeight, f = c.fontSize * a, y = c.lineHeight, g = {
    fontFamily: this._textRenderer.getDefaultStyle().fontFamily,
    fontWeight: this._textRenderer.getDefaultStyle().fontWeight
  };
  if (A(e, "bpmn:Lane") || w3(e)) {
    var _ = An(e), x = _ ? {
      width: i.height,
      height: 30 * a,
      x: i.x - i.height / 2 + 15 * a,
      y: r.y - 30 * a / 2
    } : {
      width: i.width,
      height: 30 * a
    };
    G(o, x), G(g, {
      fontSize: f + "px",
      lineHeight: y,
      paddingTop: 7 * a + "px",
      paddingBottom: 7 * a + "px",
      paddingLeft: 5 * a + "px",
      paddingRight: 5 * a + "px",
      transform: _ ? "rotate(-90deg)" : null
    });
  }
  if (E3(e)) {
    var w = An(e), D = w ? {
      width: i.width,
      height: i.height
    } : {
      width: i.height,
      height: i.width,
      x: r.x - i.height / 2,
      y: r.y - i.width / 2
    };
    G(o, D), G(g, {
      fontSize: f + "px",
      lineHeight: y,
      paddingTop: 7 * a + "px",
      paddingBottom: 7 * a + "px",
      paddingLeft: 5 * a + "px",
      paddingRight: 5 * a + "px",
      transform: w ? null : "rotate(-90deg)"
    });
  }
  (rt(e, ["bpmn:Task", "bpmn:CallActivity"]) || rm(e)) && (G(o, {
    width: i.width,
    height: i.height
  }), G(g, {
    fontSize: f + "px",
    lineHeight: y,
    paddingTop: 7 * a + "px",
    paddingBottom: 7 * a + "px",
    paddingLeft: 5 * a + "px",
    paddingRight: 5 * a + "px"
  })), x3(e) && (G(o, {
    width: i.width,
    x: i.x
  }), G(g, {
    fontSize: f + "px",
    lineHeight: y,
    paddingTop: 7 * a + "px",
    paddingBottom: 7 * a + "px",
    paddingLeft: 5 * a + "px",
    paddingRight: 5 * a + "px"
  }));
  var O = 90 * a, k = 7 * a, P = 4 * a;
  if (n.labelTarget && (G(o, {
    width: O,
    height: i.height + k + P,
    x: r.x - O / 2,
    y: i.y - k
  }), G(g, {
    fontSize: u + "px",
    lineHeight: d,
    paddingTop: k + "px",
    paddingBottom: P + "px"
  })), Zo(n) && !Su(n) && !vt(n)) {
    var N = Md(e), j = t.getAbsoluteBBox({
      x: N.x,
      y: N.y,
      width: 0,
      height: 0
    }), W = u + k + P;
    G(o, {
      width: O,
      height: W,
      x: j.x - O / 2,
      y: j.y - W / 2
    }), G(g, {
      fontSize: u + "px",
      lineHeight: d,
      paddingTop: k + "px",
      paddingBottom: P + "px"
    });
  }
  return A(e, "bpmn:TextAnnotation") && (G(o, {
    width: i.width,
    height: i.height,
    minWidth: 30 * a,
    minHeight: 10 * a
  }), G(g, {
    textAlign: "left",
    paddingTop: 5 * a + "px",
    paddingBottom: 7 * a + "px",
    paddingLeft: 7 * a + "px",
    paddingRight: 5 * a + "px",
    fontSize: f + "px",
    lineHeight: y
  })), { bounds: o, style: g };
};
Pc.prototype.update = function(e, t, n, i) {
  var r, o;
  A(e, "bpmn:TextAnnotation") && (o = this._canvas.getAbsoluteBBox(e), r = {
    x: e.x,
    y: e.y,
    width: e.width / o.width * i.width,
    height: e.height / o.height * i.height
  }), S3(t) && (t = null), this._modeling.updateLabel(e, t, r);
};
function rm(e) {
  return A(e, "bpmn:SubProcess") && !pt(e);
}
function x3(e) {
  return A(e, "bpmn:SubProcess") && pt(e);
}
function E3(e) {
  return A(e, "bpmn:Participant") && !pt(e);
}
function w3(e) {
  return A(e, "bpmn:Participant") && pt(e);
}
function S3(e) {
  return !e || !e.trim();
}
var E0 = "djs-element-hidden", w0 = "djs-label-hidden";
function LE(e, t, n) {
  var i = this, r = t.getDefaultLayer(), o, a, c;
  e.on("directEditing.activate", function(l) {
    var u = l.active;
    if (o = u.element.label || u.element, A(o, "bpmn:TextAnnotation")) {
      a = t.getAbsoluteBBox(o), c = Me("g");
      var d = n.getScaledPath("TEXT_ANNOTATION", {
        xScaleFactor: 1,
        yScaleFactor: 1,
        containerWidth: o.width,
        containerHeight: o.height,
        position: {
          mx: 0,
          my: 0
        }
      }), f = i.path = Me("path");
      we(f, {
        d,
        strokeWidth: 2,
        stroke: R3(o)
      }), ze(c, f), ze(r, c), Cn(c, o.x, o.y);
    }
    A(o, "bpmn:TextAnnotation") || o.labelTarget ? t.addMarker(o, E0) : (A(o, "bpmn:Task") || A(o, "bpmn:CallActivity") || A(o, "bpmn:SubProcess") || A(o, "bpmn:Participant")) && t.addMarker(o, w0);
  }), e.on("directEditing.resize", function(l) {
    if (A(o, "bpmn:TextAnnotation")) {
      var u = l.height, d = l.dy, f = Math.max(o.height / a.height * (u + d), 0), y = n.getScaledPath("TEXT_ANNOTATION", {
        xScaleFactor: 1,
        yScaleFactor: 1,
        containerWidth: o.width,
        containerHeight: f,
        position: {
          mx: 0,
          my: 0
        }
      });
      we(i.path, {
        d: y
      });
    }
  }), e.on(["directEditing.complete", "directEditing.cancel"], function(l) {
    var u = l.active;
    u && (t.removeMarker(u.element.label || u.element, E0), t.removeMarker(o, w0)), o = void 0, a = void 0, c && (qt(c), c = void 0);
  });
}
LE.$inject = [
  "eventBus",
  "canvas",
  "pathMap"
];
function R3(e, t) {
  var n = bt(e);
  return n.get("stroke") || t || "black";
}
const C3 = {
  __depends__: [
    Od,
    BE,
    SE
  ],
  __init__: [
    "labelEditingProvider",
    "labelEditingPreview"
  ],
  labelEditingProvider: ["type", Pc],
  labelEditingPreview: ["type", LE]
};
var A3 = new Dd("tt");
function P3(e) {
  var t = Bt(
    '<div class="djs-tooltip-container" />'
  );
  return Rn(t, {
    position: "absolute",
    width: "0",
    height: "0"
  }), e.insertBefore(t, e.firstChild), t;
}
function T3(e, t, n) {
  Rn(e, { left: t + "px", top: n + "px" });
}
function om(e, t) {
  e.style.display = t === !1 ? "none" : "";
}
var IE = "djs-tooltip", ff = "." + IE;
function ei(e, t) {
  this._eventBus = e, this._canvas = t, this._ids = A3, this._tooltipDefaults = {
    show: {
      minZoom: 0.7,
      maxZoom: 5
    }
  }, this._tooltips = {}, this._tooltipRoot = P3(t.getContainer());
  var n = this;
  si.bind(this._tooltipRoot, ff, "mousedown", function(i) {
    i.stopPropagation();
  }), si.bind(this._tooltipRoot, ff, "mouseover", function(i) {
    n.trigger("mouseover", i);
  }), si.bind(this._tooltipRoot, ff, "mouseout", function(i) {
    n.trigger("mouseout", i);
  }), this._init();
}
ei.$inject = ["eventBus", "canvas"];
ei.prototype.add = function(e) {
  if (!e.position)
    throw new Error("must specifiy tooltip position");
  if (!e.html)
    throw new Error("must specifiy tooltip html");
  var t = this._ids.next();
  return e = G({}, this._tooltipDefaults, e, {
    id: t
  }), this._addTooltip(e), e.timeout && this.setTimeout(e), t;
};
ei.prototype.trigger = function(e, t) {
  var n = t.delegateTarget || t.target, i = this.get(zn(n, "data-tooltip-id"));
  i && (e === "mouseover" && i.timeout && this.clearTimeout(i), e === "mouseout" && i.timeout && (i.timeout = 1e3, this.setTimeout(i)));
};
ei.prototype.get = function(e) {
  return typeof e != "string" && (e = e.id), this._tooltips[e];
};
ei.prototype.clearTimeout = function(e) {
  if (e = this.get(e), !!e) {
    var t = e.removeTimer;
    t && (clearTimeout(t), e.removeTimer = null);
  }
};
ei.prototype.setTimeout = function(e) {
  if (e = this.get(e), !!e) {
    this.clearTimeout(e);
    var t = this;
    e.removeTimer = setTimeout(function() {
      t.remove(e);
    }, e.timeout);
  }
};
ei.prototype.remove = function(e) {
  var t = this.get(e);
  t && (lr(t.html), lr(t.htmlContainer), delete t.htmlContainer, delete this._tooltips[t.id]);
};
ei.prototype.show = function() {
  om(this._tooltipRoot);
};
ei.prototype.hide = function() {
  om(this._tooltipRoot, !1);
};
ei.prototype._updateRoot = function(e) {
  var t = e.scale || 1, n = e.scale || 1, i = "matrix(" + t + ",0,0," + n + "," + -1 * e.x * t + "," + -1 * e.y * n + ")";
  this._tooltipRoot.style.transform = i, this._tooltipRoot.style["-ms-transform"] = i;
};
ei.prototype._addTooltip = function(e) {
  var t = e.id, n = e.html, i, r = this._tooltipRoot;
  n.get && n.constructor.prototype.jquery && (n = n.get(0)), ci(n) && (n = Bt(n)), i = Bt('<div data-tooltip-id="' + t + '" class="' + IE + '">'), Rn(i, { position: "absolute" }), i.appendChild(n), e.type && gn(i).add("djs-tooltip-" + e.type), e.className && gn(i).add(e.className), e.htmlContainer = i, r.appendChild(i), this._tooltips[t] = e, this._updateTooltip(e);
};
ei.prototype._updateTooltip = function(e) {
  var t = e.position, n = e.htmlContainer;
  T3(n, t.x, t.y);
};
ei.prototype._updateTooltipVisibilty = function(e) {
  z(this._tooltips, function(t) {
    var n = t.show, i = t.htmlContainer, r = !0;
    n && ((n.minZoom > e.scale || n.maxZoom < e.scale) && (r = !1), om(i, r));
  });
};
ei.prototype._init = function() {
  var e = this;
  function t(n) {
    e._updateRoot(n), e._updateTooltipVisibilty(n), e.show();
  }
  this._eventBus.on("canvas.viewbox.changing", function(n) {
    e.hide();
  }), this._eventBus.on("canvas.viewbox.changed", function(n) {
    t(n.viewbox);
  });
};
const k3 = {
  __init__: ["tooltips"],
  tooltips: ["type", ei]
};
var M3 = "flow elements must be children of pools/participants";
function $E(e, t, n) {
  function i(r, o, a) {
    t.add({
      position: {
        x: r.x + 5,
        y: r.y + 5
      },
      type: "error",
      timeout: 2e3,
      html: "<div>" + o + "</div>"
    });
  }
  e.on(["shape.move.rejected", "create.rejected"], function(r) {
    var o = r.context, a = o.shape, c = o.target;
    A(c, "bpmn:Collaboration") && A(a, "bpmn:FlowNode") && i(r, n(M3));
  });
}
$E.$inject = [
  "eventBus",
  "tooltips",
  "translate"
];
const D3 = {
  __depends__: [
    k3
  ],
  __init__: [
    "modelingFeedback"
  ],
  modelingFeedback: ["type", $E]
};
var O3 = 500, N3 = 1250, B3 = 1500, du = Math.round;
function L3(e) {
  return {
    x: e.x + du(e.width / 2),
    y: e.y + du(e.height / 2)
  };
}
function jE(e, t, n, i, r) {
  function o(c, l, u, d) {
    return r.allowed("elements.move", {
      shapes: c,
      delta: l,
      position: u,
      target: d
    });
  }
  e.on("shape.move.start", B3, function(c) {
    var l = c.context, u = c.shape, d = i.get().slice();
    d.indexOf(u) === -1 && (d = [u]), d = I3(d), G(l, {
      shapes: d,
      validatedShapes: d,
      shape: u
    });
  }), e.on("shape.move.start", N3, function(c) {
    var l = c.context, u = l.validatedShapes, d;
    if (d = l.canExecute = o(u), !d)
      return !1;
  }), e.on("shape.move.move", O3, function(c) {
    var l = c.context, u = l.validatedShapes, d = c.hover, f = { x: c.dx, y: c.dy }, y = { x: c.x, y: c.y }, g;
    if (g = o(u, f, y, d), l.delta = f, l.canExecute = g, g === null) {
      l.target = null;
      return;
    }
    l.target = d;
  }), e.on("shape.move.end", function(c) {
    var l = c.context, u = l.delta, d = l.canExecute, f = d === "attach", y = l.shapes;
    if (d === !1)
      return !1;
    u.x = du(u.x), u.y = du(u.y), !(u.x === 0 && u.y === 0) && n.moveElements(y, u, l.target, {
      primaryShape: l.shape,
      attach: f
    });
  }), e.on("element.mousedown", function(c) {
    if (mo(c)) {
      var l = Ka(c);
      if (!l)
        throw new Error("must supply DOM mousedown event");
      return a(l, c.element);
    }
  });
  function a(c, l, u, d) {
    if (yn(u) && (d = u, u = !1), !(l.waypoints || !l.parent) && !dt(c.target).has("djs-hit-no-move")) {
      var f = L3(l);
      return t.init(c, f, "shape.move", {
        cursor: "grabbing",
        autoActivate: u,
        data: {
          shape: l,
          context: d || {}
        }
      }), !0;
    }
  }
  this.start = a;
}
jE.$inject = [
  "eventBus",
  "dragging",
  "modeling",
  "selection",
  "rules"
];
function I3(e) {
  var t = Ga(e, "id");
  return et(e, function(n) {
    for (; n = n.parent; )
      if (t[n.id])
        return !1;
    return !0;
  });
}
var S0 = 499, df = "djs-dragging", R0 = "drop-ok", C0 = "drop-not-ok", A0 = "new-parent", P0 = "attach-ok";
function FE(e, t, n, i) {
  function r(l) {
    var u = o(l), d = $3(u);
    return d;
  }
  function o(l) {
    var u = ec(l, !0), d = mn(u, function(f) {
      return (f.incoming || []).concat(f.outgoing || []);
    });
    return ql(u.concat(d));
  }
  function a(l, u) {
    [P0, R0, C0, A0].forEach(function(d) {
      d === u ? t.addMarker(l, d) : t.removeMarker(l, d);
    });
  }
  function c(l, u, d) {
    i.addDragger(u, l.dragGroup), d && t.addMarker(u, df), l.allDraggedElements ? l.allDraggedElements.push(u) : l.allDraggedElements = [u];
  }
  e.on("shape.move.start", S0, function(l) {
    var u = l.context, d = u.shapes, f = u.allDraggedElements, y = r(d);
    if (!u.dragGroup) {
      var g = Me("g");
      we(g, n.cls("djs-drag-group", ["no-events"]));
      var _ = t.getActiveLayer();
      ze(_, g), u.dragGroup = g;
    }
    y.forEach(function(x) {
      i.addDragger(x, u.dragGroup);
    }), f ? f = ql([
      f,
      o(d)
    ]) : f = o(d), z(f, function(x) {
      t.addMarker(x, df);
    }), u.allDraggedElements = f, u.differentParents = j3(d);
  }), e.on("shape.move.move", S0, function(l) {
    var u = l.context, d = u.dragGroup, f = u.target, y = u.shape.parent, g = u.canExecute;
    f && (g === "attach" ? a(f, P0) : u.canExecute && y && f.id !== y.id ? a(f, A0) : a(f, u.canExecute ? R0 : C0)), Cn(d, l.dx, l.dy);
  }), e.on(["shape.move.out", "shape.move.cleanup"], function(l) {
    var u = l.context, d = u.target;
    d && a(d, null);
  }), e.on("shape.move.cleanup", function(l) {
    var u = l.context, d = u.allDraggedElements, f = u.dragGroup;
    z(d, function(y) {
      t.removeMarker(y, df);
    }), f && qt(f);
  }), this.makeDraggable = c;
}
FE.$inject = [
  "eventBus",
  "canvas",
  "styles",
  "previewSupport"
];
function $3(e) {
  var t = et(e, function(n) {
    return kt(n) ? gt(e, zi({ id: n.source.id })) && gt(e, zi({ id: n.target.id })) : !0;
  });
  return t;
}
function j3(e) {
  return aS(Ga(e, function(t) {
    return t.parent && t.parent.id;
  })) !== 1;
}
const F3 = {
  __depends__: [
    ku,
    fr,
    Bd,
    hr,
    $r,
    es
  ],
  __init__: [
    "move",
    "movePreview"
  ],
  move: ["type", jE],
  movePreview: ["type", FE]
};
var HE = ".djs-palette-toggle", zE = ".entry", H3 = HE + ", " + zE, sd = "djs-palette-", z3 = "shown", cd = "open", T0 = "two-column", V3 = 1e3;
function on(e, t) {
  this._eventBus = e, this._canvas = t;
  var n = this;
  e.on("tool-manager.update", function(i) {
    var r = i.tool;
    n.updateToolHighlight(r);
  }), e.on("i18n.changed", function() {
    n._update();
  }), e.on("diagram.init", function() {
    n._diagramInitialized = !0, n._rebuild();
  });
}
on.$inject = ["eventBus", "canvas"];
on.prototype.registerProvider = function(e, t) {
  t || (t = e, e = V3), this._eventBus.on("palette.getProviders", e, function(n) {
    n.providers.push(t);
  }), this._rebuild();
};
on.prototype.getEntries = function() {
  var e = this._getProviders();
  return e.reduce(G3, {});
};
on.prototype._rebuild = function() {
  if (this._diagramInitialized) {
    var e = this._getProviders();
    e.length && (this._container || this._init(), this._update());
  }
};
on.prototype._init = function() {
  var e = this, t = this._eventBus, n = this._getParentContainer(), i = this._container = Bt(on.HTML_MARKUP);
  n.appendChild(i), gn(n).add(sd + z3), si.bind(i, H3, "click", function(r) {
    var o = r.delegateTarget;
    if (Ba(o, HE))
      return e.toggle();
    e.trigger("click", r);
  }), Ye.bind(i, "mousedown", function(r) {
    r.stopPropagation();
  }), si.bind(i, zE, "dragstart", function(r) {
    e.trigger("dragstart", r);
  }), t.on("canvas.resized", this._layoutChanged, this), t.fire("palette.create", {
    container: i
  });
};
on.prototype._getProviders = function(e) {
  var t = this._eventBus.createEvent({
    type: "palette.getProviders",
    providers: []
  });
  return this._eventBus.fire(t), t.providers;
};
on.prototype._toggleState = function(e) {
  e = e || {};
  var t = this._getParentContainer(), n = this._container, i = this._eventBus, r, o = gn(n), a = gn(t);
  "twoColumn" in e ? r = e.twoColumn : r = this._needsCollapse(t.clientHeight, this._entries || {}), o.toggle(T0, r), a.toggle(sd + T0, r), "open" in e && (o.toggle(cd, e.open), a.toggle(sd + cd, e.open)), i.fire("palette.changed", {
    twoColumn: r,
    open: this.isOpen()
  });
};
on.prototype._update = function() {
  var e = Tt(".djs-palette-entries", this._container), t = this._entries = this.getEntries();
  mu(e), z(t, function(n, i) {
    var r = n.group || "default", o = Tt("[data-group=" + Hs(r) + "]", e);
    o || (o = Bt('<div class="group"></div>'), zn(o, "data-group", r), e.appendChild(o));
    var a = n.html || (n.separator ? '<hr class="separator" />' : '<div class="entry" draggable="true"></div>'), c = Bt(a);
    if (o.appendChild(c), !n.separator && (zn(c, "data-action", i), n.title && zn(c, "title", n.title), n.className && W3(c, n.className), n.imageUrl)) {
      var l = Bt("<img>");
      zn(l, "src", n.imageUrl), c.appendChild(l);
    }
  }), this.open();
};
on.prototype.trigger = function(e, t, n) {
  var i, r, o = t.delegateTarget || t.target;
  return o ? (i = zn(o, "data-action"), r = t.originalEvent || t, this.triggerEntry(i, e, r, n)) : t.preventDefault();
};
on.prototype.triggerEntry = function(e, t, n, i) {
  var r = this._entries, o, a;
  if (o = r[e], !!o && (a = o.action, this._eventBus.fire("palette.trigger", { entry: o, event: n }) !== !1)) {
    if (un(a)) {
      if (t === "click")
        return a(n, i);
    } else if (a[t])
      return a[t](n, i);
    n.preventDefault();
  }
};
on.prototype._layoutChanged = function() {
  this._toggleState({});
};
on.prototype._needsCollapse = function(e, t) {
  var n = 50, i = Object.keys(t).length * 46;
  return e < i + n;
};
on.prototype.close = function() {
  this._toggleState({
    open: !1,
    twoColumn: !1
  });
};
on.prototype.open = function() {
  this._toggleState({ open: !0 });
};
on.prototype.toggle = function() {
  this.isOpen() ? this.close() : this.open();
};
on.prototype.isActiveTool = function(e) {
  return e && this._activeTool === e;
};
on.prototype.updateToolHighlight = function(e) {
  var t, n;
  this._toolsContainer || (t = Tt(".djs-palette-entries", this._container), this._toolsContainer = Tt("[data-group=tools]", t)), n = this._toolsContainer, z(n.children, function(i) {
    var r = i.getAttribute("data-action");
    if (r) {
      var o = gn(i);
      r = r.replace("-tool", ""), o.contains("entry") && r === e ? o.add("highlighted-entry") : o.remove("highlighted-entry");
    }
  });
};
on.prototype.isOpen = function() {
  return gn(this._container).has(cd);
};
on.prototype._getParentContainer = function() {
  return this._canvas.getContainer();
};
on.HTML_MARKUP = '<div class="djs-palette"><div class="djs-palette-entries"></div><div class="djs-palette-toggle"></div></div>';
function W3(e, t) {
  var n = gn(e), i = nt(t) ? t : t.split(/\s+/g);
  i.forEach(function(r) {
    n.add(r);
  });
}
function G3(e, t) {
  var n = t.getPaletteEntries();
  return un(n) ? n(e) : (z(n, function(i, r) {
    e[r] = i;
  }), e);
}
const U3 = {
  __init__: ["palette"],
  palette: ["type", on]
};
var VE = "crosshair";
function la(e, t, n, i, r, o, a) {
  this._selection = r, this._dragging = n, this._mouse = a;
  var c = this, l = {
    create: function(u) {
      var d = t.getActiveLayer(), f;
      f = u.frame = Me("rect"), we(f, {
        class: "djs-lasso-overlay",
        width: 1,
        height: 1,
        x: 0,
        y: 0
      }), ze(d, f);
    },
    update: function(u) {
      var d = u.frame, f = u.bbox;
      we(d, {
        x: f.x,
        y: f.y,
        width: f.width,
        height: f.height
      });
    },
    remove: function(u) {
      u.frame && qt(u.frame);
    }
  };
  o.registerTool("lasso", {
    tool: "lasso.selection",
    dragging: "lasso"
  }), e.on("lasso.selection.end", function(u) {
    var d = u.originalEvent.target;
    !u.hover && !(d instanceof SVGElement) || e.once("lasso.selection.ended", function() {
      c.activateLasso(u.originalEvent, !0);
    });
  }), e.on("lasso.end", 0, function(u) {
    var d = u.context, f = hf(u), y = i.filter(function(_) {
      return _;
    }), g = ru(u);
    c.select(y, f, g ? d.selection : []);
  }), e.on("lasso.start", function(u) {
    var d = u.context;
    d.bbox = hf(u), l.create(d), d.selection = r.get();
  }), e.on("lasso.move", function(u) {
    var d = u.context;
    d.bbox = hf(u), l.update(d);
  }), e.on("lasso.cleanup", function(u) {
    var d = u.context;
    l.remove(d);
  }), e.on("element.mousedown", 1500, function(u) {
    if (ru(u))
      return c.activateLasso(u.originalEvent), !0;
  });
}
la.$inject = [
  "eventBus",
  "canvas",
  "dragging",
  "elementRegistry",
  "selection",
  "toolManager",
  "mouse"
];
la.prototype.activateLasso = function(e, t) {
  this._dragging.init(e, "lasso", {
    autoActivate: t,
    cursor: VE,
    data: {
      context: {}
    }
  });
};
la.prototype.activateSelection = function(e, t) {
  this._dragging.init(e, "lasso.selection", {
    trapClick: !1,
    autoActivate: t,
    cursor: VE,
    data: {
      context: {}
    },
    keepSelection: !0
  });
};
la.prototype.select = function(e, t, n = []) {
  var i = JS(e, t);
  this._selection.select([
    ...n,
    ...hd(i)
  ]);
};
la.prototype.toggle = function() {
  if (this.isActive())
    return this._dragging.cancel();
  var e = this._mouse.getLastMoveEvent();
  this.activateSelection(e, !!e);
};
la.prototype.isActive = function() {
  var e = this._dragging.context();
  return e && /^lasso/.test(e.prefix);
};
function hf(e) {
  var t = {
    x: e.x - e.dx,
    y: e.y - e.dy
  }, n = {
    x: e.x,
    y: e.y
  }, i;
  return t.x <= n.x && t.y < n.y || t.x < n.x && t.y <= n.y ? i = {
    x: t.x,
    y: t.y,
    width: n.x - t.x,
    height: n.y - t.y
  } : t.x >= n.x && t.y < n.y || t.x > n.x && t.y <= n.y ? i = {
    x: n.x,
    y: t.y,
    width: t.x - n.x,
    height: n.y - t.y
  } : t.x <= n.x && t.y > n.y || t.x < n.x && t.y >= n.y ? i = {
    x: t.x,
    y: n.y,
    width: n.x - t.x,
    height: t.y - n.y
  } : t.x >= n.x && t.y > n.y || t.x > n.x && t.y >= n.y ? i = {
    x: n.x,
    y: n.y,
    width: t.x - n.x,
    height: t.y - n.y
  } : i = {
    x: n.x,
    y: n.y,
    width: 0,
    height: 0
  }, i;
}
const Y3 = {
  __depends__: [
    Zu,
    fc
  ],
  __init__: ["lassoTool"],
  lassoTool: ["type", la]
};
var mf = 1500, WE = "grab";
function ts(e, t, n, i, r, o) {
  this._dragging = n, this._mouse = o;
  var a = this, c = i.get("keyboard", !1);
  r.registerTool("hand", {
    tool: "hand",
    dragging: "hand.move"
  }), e.on("element.mousedown", mf, function(l) {
    if (zs(l))
      return a.activateMove(l.originalEvent, !0), !1;
  }), c && c.addListener(mf, function(l) {
    if (!(!k0(l.keyEvent) || a.isActive())) {
      var u = a._mouse.getLastMoveEvent();
      a.activateMove(u, !!u);
    }
  }, "keyboard.keydown"), c && c.addListener(mf, function(l) {
    !k0(l.keyEvent) || !a.isActive() || a.toggle();
  }, "keyboard.keyup"), e.on("hand.end", function(l) {
    var u = l.originalEvent.target;
    if (!l.hover && !(u instanceof SVGElement))
      return !1;
    e.once("hand.ended", function() {
      a.activateMove(l.originalEvent, { reactivate: !0 });
    });
  }), e.on("hand.move.move", function(l) {
    var u = t.viewbox().scale;
    t.scroll({
      dx: l.dx * u,
      dy: l.dy * u
    });
  }), e.on("hand.move.end", function(l) {
    var u = l.context, d = u.reactivate;
    return !zs(l) && d && e.once("hand.move.ended", function(f) {
      a.activateHand(f.originalEvent, !0, !0);
    }), !1;
  });
}
ts.$inject = [
  "eventBus",
  "canvas",
  "dragging",
  "injector",
  "toolManager",
  "mouse"
];
ts.prototype.activateMove = function(e, t, n) {
  typeof t == "object" && (n = t, t = !1), this._dragging.init(e, "hand.move", {
    autoActivate: t,
    cursor: WE,
    data: {
      context: n || {}
    }
  });
};
ts.prototype.activateHand = function(e, t, n) {
  this._dragging.init(e, "hand", {
    trapClick: !1,
    autoActivate: t,
    cursor: WE,
    data: {
      context: {
        reactivate: n
      }
    }
  });
};
ts.prototype.toggle = function() {
  if (this.isActive())
    return this._dragging.cancel();
  var e = this._mouse.getLastMoveEvent();
  this.activateHand(e, !!e);
};
ts.prototype.isActive = function() {
  var e = this._dragging.context();
  return e ? /^(hand|hand\.move)$/.test(e.prefix) : !1;
};
function k0(e) {
  return fn("Space", e);
}
const K3 = {
  __depends__: [
    Zu,
    fc
  ],
  __init__: ["handTool"],
  handTool: ["type", ts]
};
var M0 = "connect-ok", D0 = "connect-not-ok";
function ns(e, t, n, i, r, o, a) {
  var c = this;
  this._dragging = t, this._rules = o, this._mouse = a, r.registerTool("global-connect", {
    tool: "global-connect",
    dragging: "global-connect.drag"
  }), e.on("global-connect.hover", function(l) {
    var u = l.context, d = l.hover, f = u.canStartConnect = c.canStartConnect(d);
    f !== null && (u.startTarget = d, i.addMarker(d, f ? M0 : D0));
  }), e.on(["global-connect.out", "global-connect.cleanup"], function(l) {
    var u = l.context.startTarget, d = l.context.canStartConnect;
    u && i.removeMarker(u, d ? M0 : D0);
  }), e.on(["global-connect.ended"], function(l) {
    var u = l.context, d = u.startTarget, f = {
      x: l.x,
      y: l.y
    }, y = c.canStartConnect(d);
    if (y)
      return e.once("element.out", function() {
        e.once(["connect.ended", "connect.canceled"], function() {
          e.fire("global-connect.drag.ended");
        }), n.start(null, d, f);
      }), !1;
  });
}
ns.$inject = [
  "eventBus",
  "dragging",
  "connect",
  "canvas",
  "toolManager",
  "rules",
  "mouse"
];
ns.prototype.start = function(e, t) {
  this._dragging.init(e, "global-connect", {
    autoActivate: t,
    trapClick: !1,
    data: {
      context: {}
    }
  });
};
ns.prototype.toggle = function() {
  if (this.isActive())
    return this._dragging.cancel();
  var e = this._mouse.getLastMoveEvent();
  return this.start(e, !!e);
};
ns.prototype.isActive = function() {
  var e = this._dragging.context();
  return e && /^global-connect/.test(e.prefix);
};
ns.prototype.canStartConnect = function(e) {
  return this._rules.allowed("connection.start", { source: e });
};
const q3 = {
  __depends__: [
    Qd,
    hr,
    $r,
    Zu,
    fc
  ],
  globalConnect: ["type", ns]
};
function am(e, t, n, i, r, o, a, c) {
  this._palette = e, this._create = t, this._elementFactory = n, this._spaceTool = i, this._lassoTool = r, this._handTool = o, this._globalConnect = a, this._translate = c, e.registerProvider(this);
}
am.$inject = [
  "palette",
  "create",
  "elementFactory",
  "spaceTool",
  "lassoTool",
  "handTool",
  "globalConnect",
  "translate"
];
am.prototype.getPaletteEntries = function() {
  var e = {}, t = this._create, n = this._elementFactory, i = this._spaceTool, r = this._lassoTool, o = this._handTool, a = this._globalConnect, c = this._translate;
  function l(f, y, g, _, x) {
    function w(D) {
      var O = n.createShape(G({ type: f }, x));
      t.start(D, O);
    }
    return {
      group: y,
      className: g,
      title: _,
      action: {
        dragstart: w,
        click: w
      }
    };
  }
  function u(f) {
    var y = n.createShape({
      type: "bpmn:SubProcess",
      x: 0,
      y: 0,
      isExpanded: !0
    }), g = n.createShape({
      type: "bpmn:StartEvent",
      x: 40,
      y: 82,
      parent: y
    });
    t.start(f, [y, g], {
      hints: {
        autoSelect: [y]
      }
    });
  }
  function d(f) {
    t.start(f, n.createParticipantShape());
  }
  return G(e, {
    "hand-tool": {
      group: "tools",
      className: "bpmn-icon-hand-tool",
      title: c("Activate hand tool"),
      action: {
        click: function(f) {
          o.activateHand(f);
        }
      }
    },
    "lasso-tool": {
      group: "tools",
      className: "bpmn-icon-lasso-tool",
      title: c("Activate lasso tool"),
      action: {
        click: function(f) {
          r.activateSelection(f);
        }
      }
    },
    "space-tool": {
      group: "tools",
      className: "bpmn-icon-space-tool",
      title: c("Activate create/remove space tool"),
      action: {
        click: function(f) {
          i.activateSelection(f);
        }
      }
    },
    "global-connect-tool": {
      group: "tools",
      className: "bpmn-icon-connection-multi",
      title: c("Activate global connect tool"),
      action: {
        click: function(f) {
          a.start(f);
        }
      }
    },
    "tool-separator": {
      group: "tools",
      separator: !0
    },
    "create.start-event": l(
      "bpmn:StartEvent",
      "event",
      "bpmn-icon-start-event-none",
      c("Create start event")
    ),
    "create.intermediate-event": l(
      "bpmn:IntermediateThrowEvent",
      "event",
      "bpmn-icon-intermediate-event-none",
      c("Create intermediate/boundary event")
    ),
    "create.end-event": l(
      "bpmn:EndEvent",
      "event",
      "bpmn-icon-end-event-none",
      c("Create end event")
    ),
    "create.exclusive-gateway": l(
      "bpmn:ExclusiveGateway",
      "gateway",
      "bpmn-icon-gateway-none",
      c("Create gateway")
    ),
    "create.task": l(
      "bpmn:Task",
      "activity",
      "bpmn-icon-task",
      c("Create task")
    ),
    "create.data-object": l(
      "bpmn:DataObjectReference",
      "data-object",
      "bpmn-icon-data-object",
      c("Create data object reference")
    ),
    "create.data-store": l(
      "bpmn:DataStoreReference",
      "data-store",
      "bpmn-icon-data-store",
      c("Create data store reference")
    ),
    "create.subprocess-expanded": {
      group: "activity",
      className: "bpmn-icon-subprocess-expanded",
      title: c("Create expanded sub-process"),
      action: {
        dragstart: u,
        click: u
      }
    },
    "create.participant-expanded": {
      group: "collaboration",
      className: "bpmn-icon-participant",
      title: c("Create pool/participant"),
      action: {
        dragstart: d,
        click: d
      }
    },
    "create.group": l(
      "bpmn:Group",
      "artifact",
      "bpmn-icon-group",
      c("Create group")
    )
  }), e;
};
const X3 = {
  __depends__: [
    U3,
    Xu,
    aE,
    Y3,
    K3,
    q3,
    Cu
  ],
  __init__: ["paletteProvider"],
  paletteProvider: ["type", am]
};
var Z3 = 250;
function sm(e, t, n, i, r) {
  le.call(this, e);
  function o(c) {
    var l = c.canExecute.replacements;
    z(l, function(u) {
      var d = u.oldElementId, f = {
        type: u.newElementType
      };
      if (!c.visualReplacements[d]) {
        var y = t.get(d);
        G(f, { x: y.x, y: y.y });
        var g = n.createShape(f);
        i.addShape(g, y.parent);
        var _ = Tt('[data-element-id="' + Hs(y.id) + '"]', c.dragGroup);
        _ && we(_, { display: "none" });
        var x = r.addDragger(g, c.dragGroup);
        c.visualReplacements[d] = x, i.removeShape(g);
      }
    });
  }
  function a(c) {
    var l = c.visualReplacements;
    z(l, function(u, d) {
      var f = Tt('[data-element-id="' + Hs(d) + '"]', c.dragGroup);
      f && we(f, { display: "inline" }), u.remove(), l[d] && delete l[d];
    });
  }
  e.on("shape.move.move", Z3, function(c) {
    var l = c.context, u = l.canExecute;
    l.visualReplacements || (l.visualReplacements = {}), u && u.replacements ? o(l) : a(l);
  });
}
sm.$inject = [
  "eventBus",
  "elementRegistry",
  "elementFactory",
  "canvas",
  "previewSupport"
];
Pe(sm, le);
const J3 = {
  __depends__: [
    es
  ],
  __init__: ["bpmnReplacePreview"],
  bpmnReplacePreview: ["type", sm]
};
var Q3 = 1250, yf = 40, eO = 20, tO = 10, O0 = 20, GE = ["x", "y"], nO = Math.abs;
function UE(e) {
  e.on([
    "connect.hover",
    "connect.move",
    "connect.end"
  ], Q3, function(t) {
    var n = t.context, i = n.canExecute, r = n.start, o = n.hover, a = n.source, c = n.target;
    t.originalEvent && gi(t.originalEvent) || (n.initialConnectionStart || (n.initialConnectionStart = n.connectionStart), i && o && iO(t, o, sO(o)), o && aO(i, [
      "bpmn:Association",
      "bpmn:DataInputAssociation",
      "bpmn:DataOutputAssociation",
      "bpmn:SequenceFlow"
    ]) ? (n.connectionStart = Pi(r), rt(o, ["bpmn:Event", "bpmn:Gateway"]) && N0(t, Pi(o)), rt(o, ["bpmn:Task", "bpmn:SubProcess"]) && rO(t, o), A(a, "bpmn:BoundaryEvent") && c === a.host && oO(t)) : YE(i, "bpmn:MessageFlow") ? (A(r, "bpmn:Event") && (n.connectionStart = Pi(r)), A(o, "bpmn:Event") && N0(t, Pi(o))) : n.connectionStart = n.initialConnectionStart);
  });
}
UE.$inject = ["eventBus"];
function iO(e, t, n) {
  GE.forEach(function(i) {
    var r = KE(i, t);
    e[i] < t[i] + n ? tn(e, i, t[i] + n) : e[i] > t[i] + r - n && tn(e, i, t[i] + r - n);
  });
}
function rO(e, t) {
  var n = Pi(t);
  GE.forEach(function(i) {
    cO(e, t, i) && tn(e, i, n[i]);
  });
}
function oO(e) {
  var t = e.context, n = t.source, i = t.target;
  if (!lO(t)) {
    var r = Pi(n), o = Bn(r, i, -10), a = [];
    /top|bottom/.test(o) && a.push("x"), /left|right/.test(o) && a.push("y"), a.forEach(function(c) {
      var l = e[c], u;
      nO(l - r[c]) < yf && (l > r[c] ? u = r[c] + yf : u = r[c] - yf, tn(e, c, u));
    });
  }
}
function N0(e, t) {
  tn(e, "x", t.x), tn(e, "y", t.y);
}
function YE(e, t) {
  return e && e.type === t;
}
function aO(e, t) {
  return Dr(t, function(n) {
    return YE(e, n);
  });
}
function KE(e, t) {
  return e === "x" ? t.width : t.height;
}
function sO(e) {
  return A(e, "bpmn:Task") ? tO : eO;
}
function cO(e, t, n) {
  return e[n] > t[n] + O0 && e[n] < t[n] + KE(n, t) - O0;
}
function lO(e) {
  var t = e.hover, n = e.source;
  return t && n && t === n;
}
function Co() {
  this._targets = {}, this._snapOrigins = {}, this._snapLocations = [], this._defaultSnaps = {};
}
Co.prototype.getSnapOrigin = function(e) {
  return this._snapOrigins[e];
};
Co.prototype.setSnapOrigin = function(e, t) {
  this._snapOrigins[e] = t, this._snapLocations.indexOf(e) === -1 && this._snapLocations.push(e);
};
Co.prototype.addDefaultSnap = function(e, t) {
  var n = this._defaultSnaps[e];
  n || (n = this._defaultSnaps[e] = []), n.push(t);
};
Co.prototype.getSnapLocations = function() {
  return this._snapLocations;
};
Co.prototype.setSnapLocations = function(e) {
  this._snapLocations = e;
};
Co.prototype.pointsForTarget = function(e) {
  var t = e.id || e, n = this._targets[t];
  return n || (n = this._targets[t] = new hp(), n.initDefaults(this._defaultSnaps)), n;
};
function hp() {
  this._snapValues = {};
}
hp.prototype.add = function(e, t) {
  var n = this._snapValues[e];
  n || (n = this._snapValues[e] = { x: [], y: [] }), n.x.indexOf(t.x) === -1 && n.x.push(t.x), n.y.indexOf(t.y) === -1 && n.y.push(t.y);
};
hp.prototype.snap = function(e, t, n, i) {
  var r = this._snapValues[t];
  return r && AT(e[n], r[n], i);
};
hp.prototype.initDefaults = function(e) {
  var t = this;
  z(e || {}, function(n, i) {
    z(n, function(r) {
      t.add(i, r);
    });
  });
};
var uO = 1250;
function mr(e, t, n) {
  var i = this;
  this._elementRegistry = e, t.on([
    "create.start",
    "shape.move.start"
  ], function(r) {
    i.initSnap(r);
  }), t.on([
    "create.move",
    "create.end",
    "shape.move.move",
    "shape.move.end"
  ], uO, function(r) {
    var o = r.context, a = o.shape, c = o.snapContext, l = o.target;
    if (!(r.originalEvent && gi(r.originalEvent)) && !(Fa(r) || !l)) {
      var u = c.pointsForTarget(l);
      u.initialized || (u = i.addSnapTargetPoints(u, a, l), u.initialized = !0), n.snap(r, u);
    }
  }), t.on([
    "create.cleanup",
    "shape.move.cleanup"
  ], function() {
    n.hide();
  });
}
mr.$inject = [
  "elementRegistry",
  "eventBus",
  "snapping"
];
mr.prototype.initSnap = function(e) {
  var t = this._elementRegistry, n = e.context, i = n.shape, r = n.snapContext;
  r || (r = n.snapContext = new Co());
  var o;
  t.get(i.id) ? o = Pi(i, e) : o = {
    x: e.x + Pi(i).x,
    y: e.y + Pi(i).y
  };
  var a = {
    x: o.x - i.width / 2,
    y: o.y - i.height / 2
  }, c = {
    x: o.x + i.width / 2,
    y: o.y + i.height / 2
  };
  return r.setSnapOrigin("mid", {
    x: o.x - e.x,
    y: o.y - e.y
  }), vt(i) || (r.setSnapOrigin("top-left", {
    x: a.x - e.x,
    y: a.y - e.y
  }), r.setSnapOrigin("bottom-right", {
    x: c.x - e.x,
    y: c.y - e.y
  })), r;
};
mr.prototype.addSnapTargetPoints = function(e, t, n) {
  var i = this.getSnapTargets(t, n);
  return z(i, function(r) {
    if (vt(r)) {
      vt(t) && e.add("mid", Pi(r));
      return;
    }
    if (kt(r)) {
      if (r.waypoints.length < 3)
        return;
      var o = r.waypoints.slice(1, -1);
      z(o, function(a) {
        e.add("mid", a);
      });
      return;
    }
    e.add("mid", Pi(r));
  }), !je(t.x) || !je(t.y) || this._elementRegistry.get(t.id) && e.add("mid", Pi(t)), e;
};
mr.prototype.getSnapTargets = function(e, t) {
  return lx(t).filter(function(n) {
    return !pO(n);
  });
};
function pO(e) {
  return !!e.hidden;
}
var B0 = 1500;
function is(e, t) {
  t.invoke(mr, this), e.on(["create.move", "create.end"], B0, mO), e.on([
    "create.move",
    "create.end",
    "shape.move.move",
    "shape.move.end"
  ], B0, function(n) {
    var i = n.context, r = i.canExecute, o = i.target, a = r && (r === "attach" || r.attach);
    a && !Fa(n) && fO(n, o);
  });
}
Pe(is, mr);
is.$inject = [
  "eventBus",
  "injector"
];
is.prototype.initSnap = function(e) {
  var t = mr.prototype.initSnap.call(this, e), n = e.shape, i = !!this._elementRegistry.get(n.id);
  return z(n.outgoing, function(r) {
    var o = r.waypoints[0];
    o = o.original || o, t.setSnapOrigin(r.id + "-docking", I0(o, i, e));
  }), z(n.incoming, function(r) {
    var o = r.waypoints[r.waypoints.length - 1];
    o = o.original || o, t.setSnapOrigin(r.id + "-docking", I0(o, i, e));
  }), A(n, "bpmn:Participant") && t.setSnapLocations(["top-left", "bottom-right", "mid"]), t;
};
is.prototype.addSnapTargetPoints = function(e, t, n) {
  mr.prototype.addSnapTargetPoints.call(this, e, t, n);
  var i = this.getSnapTargets(t, n);
  z(i, function(o) {
    (hO(o) || dO([t, o], "bpmn:TextAnnotation")) && (e.add("top-left", sx(o)), e.add("bottom-right", cx(o)));
  });
  var r = this._elementRegistry;
  return z(t.incoming, function(o) {
    if (r.get(t.id)) {
      L0(i, o.source) || e.add("mid", Fe(o.source));
      var a = o.waypoints[0];
      e.add(o.id + "-docking", a.original || a);
    }
  }), z(t.outgoing, function(o) {
    if (r.get(t.id)) {
      L0(i, o.target) || e.add("mid", Fe(o.target));
      var a = o.waypoints[o.waypoints.length - 1];
      e.add(o.id + "-docking", a.original || a);
    }
  }), A(n, "bpmn:SequenceFlow") && (e = this.addSnapTargetPoints(e, t, n.parent)), e;
};
is.prototype.getSnapTargets = function(e, t) {
  return mr.prototype.getSnapTargets.call(this, e, t).filter(function(n) {
    return !A(n, "bpmn:Lane");
  });
};
function fO(e, t) {
  var n = Le(t), i = Bx(e, t), r = e.context, o = r.shape, a;
  o.parent ? a = { x: 0, y: 0 } : a = Fe(o), /top/.test(i) ? tn(e, "y", n.top - a.y) : /bottom/.test(i) && tn(e, "y", n.bottom - a.y), /left/.test(i) ? tn(e, "x", n.left - a.x) : /right/.test(i) && tn(e, "x", n.right - a.x);
}
function dO(e, t) {
  return e.every(function(n) {
    return A(n, t);
  });
}
function hO(e) {
  return A(e, "bpmn:SubProcess") && pt(e) ? !0 : A(e, "bpmn:Participant");
}
function mO(e) {
  var t = e.context, n = t.createConstraints;
  if (n) {
    var i = n.top, r = n.right, o = n.bottom, a = n.left;
    (a && a >= e.x || r && r <= e.x) && tn(e, "x", e.x), (i && i >= e.y || o && o <= e.y) && tn(e, "y", e.y);
  }
}
function L0(e, t) {
  return e.indexOf(t) !== -1;
}
function I0(e, t, n) {
  return t ? {
    x: e.x - n.x,
    y: e.y - n.y
  } : {
    x: e.x,
    y: e.y
  };
}
var yO = 1250;
function Tc(e, t) {
  var n = this;
  e.on(["resize.start"], function(i) {
    n.initSnap(i);
  }), e.on([
    "resize.move",
    "resize.end"
  ], yO, function(i) {
    var r = i.context, o = r.shape, a = o.parent, c = r.direction, l = r.snapContext;
    if (!(i.originalEvent && gi(i.originalEvent)) && !Fa(i)) {
      var u = l.pointsForTarget(a);
      u.initialized || (u = n.addSnapTargetPoints(u, o, a, c), u.initialized = !0), _O(c) && tn(i, "x", i.x), bO(c) && tn(i, "y", i.y), t.snap(i, u);
    }
  }), e.on(["resize.cleanup"], function() {
    t.hide();
  });
}
Tc.prototype.initSnap = function(e) {
  var t = e.context, n = t.shape, i = t.direction, r = t.snapContext;
  r || (r = t.snapContext = new Co());
  var o = qE(n, i);
  return r.setSnapOrigin("corner", {
    x: o.x - e.x,
    y: o.y - e.y
  }), r;
};
Tc.prototype.addSnapTargetPoints = function(e, t, n, i) {
  var r = this.getSnapTargets(t, n);
  return z(r, function(o) {
    e.add("corner", cx(o)), e.add("corner", sx(o));
  }), e.add("corner", qE(t, i)), e;
};
Tc.$inject = [
  "eventBus",
  "snapping"
];
Tc.prototype.getSnapTargets = function(e, t) {
  return lx(t).filter(function(n) {
    return !gO(n, e) && !kt(n) && !vO(n) && !vt(n);
  });
};
function qE(e, t) {
  var n = Fe(e), i = Le(e), r = {
    x: n.x,
    y: n.y
  };
  return t.indexOf("n") !== -1 ? r.y = i.top : t.indexOf("s") !== -1 && (r.y = i.bottom), t.indexOf("e") !== -1 ? r.x = i.right : t.indexOf("w") !== -1 && (r.x = i.left), r;
}
function gO(e, t) {
  return e.host === t;
}
function vO(e) {
  return !!e.hidden;
}
function _O(e) {
  return e === "n" || e === "s";
}
function bO(e) {
  return e === "e" || e === "w";
}
var xO = 7, EO = 1e3;
function Ao(e) {
  this._canvas = e, this._asyncHide = o_(Jn(this.hide, this), EO);
}
Ao.$inject = ["canvas"];
Ao.prototype.snap = function(e, t) {
  var n = e.context, i = n.snapContext, r = i.getSnapLocations(), o = {
    x: Fa(e, "x"),
    y: Fa(e, "y")
  };
  z(r, function(a) {
    var c = i.getSnapOrigin(a), l = {
      x: e.x + c.x,
      y: e.y + c.y
    };
    if (z(["x", "y"], function(u) {
      var d;
      o[u] || (d = t.snap(l, a, u, xO), d !== void 0 && (o[u] = {
        value: d,
        originValue: d - c[u]
      }));
    }), o.x && o.y)
      return !1;
  }), this.showSnapLine("vertical", o.x && o.x.value), this.showSnapLine("horizontal", o.y && o.y.value), z(["x", "y"], function(a) {
    var c = o[a];
    yn(c) && tn(e, a, c.originValue);
  });
};
Ao.prototype._createLine = function(e) {
  var t = this._canvas.getLayer("snap"), n = Me("path");
  return we(n, { d: "M0,0 L0,0" }), dt(n).add("djs-snap-line"), ze(t, n), {
    update: function(i) {
      je(i) ? e === "horizontal" ? we(n, {
        d: "M-100000," + i + " L+100000," + i,
        display: ""
      }) : we(n, {
        d: "M " + i + ",-100000 L " + i + ", +100000",
        display: ""
      }) : we(n, { display: "none" });
    }
  };
};
Ao.prototype._createSnapLines = function() {
  this._snapLines = {
    horizontal: this._createLine("horizontal"),
    vertical: this._createLine("vertical")
  };
};
Ao.prototype.showSnapLine = function(e, t) {
  var n = this.getSnapLine(e);
  n && n.update(t), this._asyncHide();
};
Ao.prototype.getSnapLine = function(e) {
  return this._snapLines || this._createSnapLines(), this._snapLines[e];
};
Ao.prototype.hide = function() {
  z(this._snapLines, function(e) {
    e.update();
  });
};
const wO = {
  __init__: [
    "createMoveSnapping",
    "resizeSnapping",
    "snapping"
  ],
  createMoveSnapping: ["type", mr],
  resizeSnapping: ["type", Tc],
  snapping: ["type", Ao]
}, SO = {
  __depends__: [wO],
  __init__: [
    "connectSnapping",
    "createMoveSnapping"
  ],
  connectSnapping: ["type", UE],
  createMoveSnapping: ["type", is]
};
function $e(e, t, n, i, r) {
  this._open = !1, this._results = [], this._eventMaps = [], this._canvas = e, this._eventBus = t, this._overlays = n, this._selection = i, this._translate = r, this._container = this._getBoxHtml(), this._searchInput = Tt($e.INPUT_SELECTOR, this._container), this._resultsContainer = Tt($e.RESULTS_CONTAINER_SELECTOR, this._container), this._canvas.getContainer().appendChild(this._container), t.on(["canvas.destroy", "diagram.destroy"], this.close, this);
}
$e.$inject = [
  "canvas",
  "eventBus",
  "overlays",
  "selection",
  "translate"
];
$e.prototype._bindEvents = function() {
  var e = this;
  function t(n, i, r, o) {
    e._eventMaps.push({
      el: n,
      type: r,
      listener: si.bind(n, i, r, o)
    });
  }
  t(document, "html", "click", function(n) {
    e.close();
  }), t(this._container, $e.INPUT_SELECTOR, "click", function(n) {
    n.stopPropagation(), n.delegateTarget.focus();
  }), t(this._container, $e.RESULT_SELECTOR, "mouseover", function(n) {
    n.stopPropagation(), e._scrollToNode(n.delegateTarget), e._preselect(n.delegateTarget);
  }), t(this._container, $e.RESULT_SELECTOR, "click", function(n) {
    n.stopPropagation(), e._select(n.delegateTarget);
  }), t(this._container, $e.INPUT_SELECTOR, "keydown", function(n) {
    fn("ArrowUp", n) && n.preventDefault(), fn("ArrowDown", n) && n.preventDefault();
  }), t(this._container, $e.INPUT_SELECTOR, "keyup", function(n) {
    if (fn("Escape", n))
      return e.close();
    if (fn("Enter", n)) {
      var i = e._getCurrentResult();
      return i ? e._select(i) : e.close();
    }
    if (fn("ArrowUp", n))
      return e._scrollToDirection(!0);
    if (fn("ArrowDown", n))
      return e._scrollToDirection();
    fn(["ArrowLeft", "ArrowRight"], n) || e._search(n.delegateTarget.value);
  });
};
$e.prototype._unbindEvents = function() {
  this._eventMaps.forEach(function(e) {
    si.unbind(e.el, e.type, e.listener);
  });
};
$e.prototype._search = function(e) {
  var t = this;
  if (this._clearResults(), !(!e || e === "")) {
    var n = this._searchProvider.find(e);
    if (n.length) {
      n.forEach(function(r) {
        var o = r.element.id, a = t._createResultNode(r, o);
        t._results[o] = {
          element: r.element,
          node: a
        };
      });
      var i = Tt($e.RESULT_SELECTOR, this._resultsContainer);
      this._scrollToNode(i), this._preselect(i);
    }
  }
};
$e.prototype._scrollToDirection = function(e) {
  var t = this._getCurrentResult();
  if (t) {
    var n = e ? t.previousElementSibling : t.nextElementSibling;
    n && (this._scrollToNode(n), this._preselect(n));
  }
};
$e.prototype._scrollToNode = function(e) {
  if (!(!e || e === this._getCurrentResult())) {
    var t = e.offsetTop, n = this._resultsContainer.scrollTop, i = t - this._resultsContainer.clientHeight + e.clientHeight;
    t < n ? this._resultsContainer.scrollTop = t : n < i && (this._resultsContainer.scrollTop = i);
  }
};
$e.prototype._clearResults = function() {
  mu(this._resultsContainer), this._results = [], this._resetOverlay(), this._eventBus.fire("searchPad.cleared");
};
$e.prototype._getCurrentResult = function() {
  return Tt($e.RESULT_SELECTED_SELECTOR, this._resultsContainer);
};
$e.prototype._createResultNode = function(e, t) {
  var n = Bt($e.RESULT_HTML);
  return e.primaryTokens.length > 0 && $0(n, e.primaryTokens, $e.RESULT_PRIMARY_HTML), $0(n, e.secondaryTokens, $e.RESULT_SECONDARY_HTML), zn(n, $e.RESULT_ID_ATTRIBUTE, t), this._resultsContainer.appendChild(n), n;
};
$e.prototype.registerProvider = function(e) {
  this._searchProvider = e;
};
$e.prototype.open = function() {
  if (!this._searchProvider)
    throw new Error("no search provider registered");
  this.isOpen() || (this._bindEvents(), this._open = !0, gn(this._container).add("open"), this._searchInput.focus(), this._eventBus.fire("searchPad.opened"));
};
$e.prototype.close = function() {
  this.isOpen() && (this._unbindEvents(), this._open = !1, gn(this._container).remove("open"), this._clearResults(), this._searchInput.value = "", this._searchInput.blur(), this._resetOverlay(), this._eventBus.fire("searchPad.closed"));
};
$e.prototype.toggle = function() {
  this.isOpen() ? this.close() : this.open();
};
$e.prototype.isOpen = function() {
  return this._open;
};
$e.prototype._preselect = function(e) {
  var t = this._getCurrentResult();
  if (e !== t) {
    t && gn(t).remove($e.RESULT_SELECTED_CLASS);
    var n = zn(e, $e.RESULT_ID_ATTRIBUTE), i = this._results[n].element;
    gn(e).add($e.RESULT_SELECTED_CLASS), this._resetOverlay(i), this._canvas.scrollToElement(i, { top: 400 }), this._selection.select(i), this._eventBus.fire("searchPad.preselected", i);
  }
};
$e.prototype._select = function(e) {
  var t = zn(e, $e.RESULT_ID_ATTRIBUTE), n = this._results[t].element;
  this.close(), this._resetOverlay(), this._canvas.scrollToElement(n, { top: 400 }), this._selection.select(n), this._eventBus.fire("searchPad.selected", n);
};
$e.prototype._resetOverlay = function(e) {
  if (this._overlayId && this._overlays.remove(this._overlayId), e) {
    var t = nn(e), n = RO(t);
    this._overlayId = this._overlays.add(e, n);
  }
};
$e.prototype._getBoxHtml = function() {
  const e = Bt($e.BOX_HTML), t = Tt($e.INPUT_SELECTOR, e);
  return t && t.setAttribute("aria-label", this._translate("Search in diagram")), e;
};
function RO(e) {
  var t = 6, n = e.width + t * 2, i = e.height + t * 2, r = {
    width: n + "px",
    height: i + "px"
  }, o = Bt('<div class="' + $e.OVERLAY_CLASS + '"></div>');
  return Rn(o, r), {
    position: {
      bottom: i - t,
      right: n - t
    },
    show: !0,
    html: o
  };
}
function $0(e, t, n) {
  var i = CO(t), r = Bt(n);
  r.innerHTML = i, e.appendChild(r);
}
function CO(e) {
  var t = "";
  return e.forEach(function(n) {
    n.matched ? t += '<strong class="' + $e.RESULT_HIGHLIGHT_CLASS + '">' + If(n.matched) + "</strong>" : t += If(n.normal);
  }), t !== "" ? t : null;
}
$e.CONTAINER_SELECTOR = ".djs-search-container";
$e.INPUT_SELECTOR = ".djs-search-input input";
$e.RESULTS_CONTAINER_SELECTOR = ".djs-search-results";
$e.RESULT_SELECTOR = ".djs-search-result";
$e.RESULT_SELECTED_CLASS = "djs-search-result-selected";
$e.RESULT_SELECTED_SELECTOR = "." + $e.RESULT_SELECTED_CLASS;
$e.RESULT_ID_ATTRIBUTE = "data-result-id";
$e.RESULT_HIGHLIGHT_CLASS = "djs-search-highlight";
$e.OVERLAY_CLASS = "djs-search-overlay";
$e.BOX_HTML = '<div class="djs-search-container djs-draggable djs-scrollable"><div class="djs-search-input"><input type="text"/></div><div class="djs-search-results"></div></div>';
$e.RESULT_HTML = '<div class="djs-search-result"></div>';
$e.RESULT_PRIMARY_HTML = '<div class="djs-search-result-primary"></div>';
$e.RESULT_SECONDARY_HTML = '<p class="djs-search-result-secondary"></p>';
const AO = {
  __depends__: [
    Cu,
    Pu,
    fr
  ],
  searchPad: ["type", $e]
};
function cm(e, t, n) {
  this._elementRegistry = e, this._canvas = n, t.registerProvider(this);
}
cm.$inject = [
  "elementRegistry",
  "searchPad",
  "canvas"
];
cm.prototype.find = function(e) {
  var t = this._canvas.getRootElement(), n = this._elementRegistry.filter(function(i) {
    return !i.labelTarget;
  });
  return n = et(n, function(i) {
    return i !== t;
  }), n = mn(n, function(i) {
    return {
      primaryTokens: F0(ki(i), e),
      secondaryTokens: F0(i.id, e),
      element: i
    };
  }), n = et(n, function(i) {
    return j0(i.primaryTokens) || j0(i.secondaryTokens);
  }), n = Gi(n, function(i) {
    return ki(i.element) + i.element.id;
  }), n;
};
function j0(e) {
  var t = et(e, function(n) {
    return !!n.matched;
  });
  return t.length > 0;
}
function F0(e, t) {
  var n = [], i = e;
  if (!e)
    return n;
  e = e.toLowerCase(), t = t.toLowerCase();
  var r = e.indexOf(t);
  return r > -1 ? (r !== 0 && n.push({
    normal: i.substr(0, r)
  }), n.push({
    matched: i.substr(r, t.length)
  }), t.length + r < e.length && n.push({
    normal: i.substr(t.length + r, e.length)
  })) : n.push({
    normal: i
  }), n;
}
const PO = {
  __depends__: [
    AO
  ],
  __init__: ["bpmnSearch"],
  bpmnSearch: ["type", cm]
};
var TO = '<?xml version="1.0" encoding="UTF-8"?><bpmn:definitions xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" targetNamespace="http://bpmn.io/schema/bpmn" id="Definitions_1"><bpmn:process id="Process_1" isExecutable="false"><bpmn:startEvent id="StartEvent_1"/></bpmn:process><bpmndi:BPMNDiagram id="BPMNDiagram_1"><bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="Process_1"><bpmndi:BPMNShape id="_BPMNShape_StartEvent_2" bpmnElement="StartEvent_1"><dc:Bounds height="36.0" width="36.0" x="173.0" y="102.0"/></bpmndi:BPMNShape></bpmndi:BPMNPlane></bpmndi:BPMNDiagram></bpmn:definitions>';
function ar(e) {
  ac.call(this, e);
}
Pe(ar, ac);
ar.Viewer = yo;
ar.NavigatedViewer = Vs;
ar.prototype.createDiagram = function() {
  return this.importXML(TO);
};
ar.prototype._interactionModules = [
  // non-modeling components
  gb,
  xb,
  Sb
];
ar.prototype._modelingModules = [
  // modeling components
  FP,
  Kd,
  lT,
  iT,
  TT,
  Qd,
  BT,
  L5,
  eE,
  Xu,
  F5,
  V5,
  a3,
  c3,
  l3,
  h3,
  C3,
  wE,
  D3,
  F3,
  X3,
  J3,
  BE,
  SO,
  PO
];
ar.prototype._modules = [].concat(
  yo.prototype._modules,
  ar.prototype._interactionModules,
  ar.prototype._modelingModules
);
const kO = `<?xml version="1.0" encoding="UTF-8"?>
<bpmn:definitions xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"  
xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL"  
xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI"  
xmlns:dc="http://www.omg.org/spec/DD/20100524/DC"  
targetNamespace="http://bpmn.io/schema/bpmn"  
id="Definitions_1"> 
     <bpmn:process id="Process_1" isExecutable="false"> 
          <bpmn:startEvent id="StartEvent_1"/> 
     </bpmn:process>
     <bpmndi:BPMNDiagram id="BPMNDiagram_1"> 
          <bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="Process_1"> 
                <bpmndi:BPMNShape id="_BPMNShape_StartEvent_2" bpmnElement="StartEvent_1"> 
                    <dc:Bounds height="36.0" width="36.0" x="173.0" y="102.0"/> 
                </bpmndi:BPMNShape>
          </bpmndi:BPMNPlane>
     </bpmndi:BPMNDiagram>
</bpmn:definitions>`;
function sr(e) {
  return Object.keys(e);
}
function gf(e) {
  return e && typeof e == "object" && !Array.isArray(e);
}
function lm(e, t) {
  const n = { ...e }, i = t;
  return gf(e) && gf(t) && Object.keys(t).forEach((r) => {
    gf(i[r]) && r in e ? n[r] = lm(n[r], i[r]) : n[r] = i[r];
  }), n;
}
function MO(e) {
  return e.replace(/[A-Z]/g, (t) => `-${t.toLowerCase()}`);
}
function DO(e) {
  var t;
  return typeof e != "string" || !e.includes("var(--mantine-scale)") ? e : (t = e.match(/^calc\((.*?)\)$/)) == null ? void 0 : t[1].split("*")[0].trim();
}
function OO(e) {
  const t = DO(e);
  return typeof t == "number" ? t : typeof t == "string" ? t.includes("calc") || t.includes("var") ? t : t.includes("px") ? Number(t.replace("px", "")) : t.includes("rem") ? Number(t.replace("rem", "")) * 16 : t.includes("em") ? Number(t.replace("em", "")) * 16 : Number(t) : NaN;
}
function vf(e) {
  return e === "0rem" ? "0rem" : `calc(${e} * var(--mantine-scale))`;
}
function XE(e, { shouldScale: t = !1 } = {}) {
  function n(i) {
    if (i === 0 || i === "0")
      return `0${e}`;
    if (typeof i == "number") {
      const r = `${i / 16}${e}`;
      return t ? vf(r) : r;
    }
    if (typeof i == "string") {
      if (i === "" || i.startsWith("calc(") || i.startsWith("clamp(") || i.includes("rgba("))
        return i;
      if (i.includes(","))
        return i.split(",").map((o) => n(o)).join(",");
      if (i.includes(" "))
        return i.split(" ").map((o) => n(o)).join(" ");
      if (i.includes(e))
        return t ? vf(i) : i;
      const r = i.replace("px", "");
      if (!Number.isNaN(Number(r))) {
        const o = `${Number(r) / 16}${e}`;
        return t ? vf(o) : o;
      }
    }
    return i;
  }
  return n;
}
const de = XE("rem", { shouldScale: !0 }), H0 = XE("em");
function um(e) {
  return Object.keys(e).reduce((t, n) => (e[n] !== void 0 && (t[n] = e[n]), t), {});
}
function ZE(e) {
  return typeof e == "number" ? !0 : typeof e == "string" ? e.startsWith("calc(") || e.startsWith("var(") || e.includes(" ") && e.trim() !== "" ? !0 : /[0-9]/.test(e.trim().replace("-", "")[0]) : !1;
}
function Xs(e, t = "size", n = !0) {
  if (e !== void 0)
    return ZE(e) ? n ? de(e) : e : `var(--${t}-${e})`;
}
function NO(e) {
  return e === void 0 ? "var(--mantine-radius-default)" : Xs(e, "mantine-radius");
}
function z0(e) {
  return Xs(e, "mantine-font-size");
}
function BO(e, t) {
  try {
    return e.addEventListener("change", t), () => e.removeEventListener("change", t);
  } catch {
    return e.addListener(t), () => e.removeListener(t);
  }
}
function LO(e, t) {
  return typeof window < "u" && "matchMedia" in window ? window.matchMedia(e).matches : !1;
}
function IO(e, t, { getInitialValueInEffect: n } = {
  getInitialValueInEffect: !0
}) {
  const [i, r] = oo(
    n ? t : LO(e)
  ), o = Ko();
  return Wi(() => {
    if ("matchMedia" in window)
      return o.current = window.matchMedia(e), r(o.current.matches), BO(o.current, (a) => r(a.matches));
  }, [e]), i;
}
const JE = typeof document < "u" ? Uw : Wi;
function $O(e, t) {
  const n = Ko(!1);
  Wi(
    () => () => {
      n.current = !1;
    },
    []
  ), Wi(() => {
    if (n.current)
      return e();
    n.current = !0;
  }, t);
}
function jO(e, t) {
  return IO("(prefers-reduced-motion: reduce)", e, t);
}
const FO = {};
function HO(e) {
  const t = {};
  return e.forEach((n) => {
    Object.entries(n).forEach(([i, r]) => {
      t[i] ? t[i] = Yi(t[i], r) : t[i] = r;
    });
  }), t;
}
function pm({ theme: e, classNames: t, props: n, stylesCtx: i }) {
  const o = (Array.isArray(t) ? t : [t]).map(
    (a) => typeof a == "function" ? a(e, n, i) : a || FO
  );
  return HO(o);
}
function ld({ theme: e, styles: t, props: n, stylesCtx: i }) {
  return (Array.isArray(t) ? t : [t]).reduce((o, a) => typeof a == "function" ? { ...o, ...a(e, n, i) } : { ...o, ...a }, {});
}
const QE = n_(null);
function ua() {
  const e = dd(QE);
  if (!e)
    throw new Error("[@mantine/core] MantineProvider was not found in tree");
  return e;
}
function zO() {
  return ua().cssVariablesResolver;
}
function VO() {
  return ua().classNamesPrefix;
}
function fm() {
  return ua().getStyleNonce;
}
function WO() {
  return ua().withStaticClasses;
}
function GO() {
  return ua().headless;
}
function UO() {
  var e;
  return (e = ua().stylesTransform) == null ? void 0 : e.sx;
}
function YO() {
  var e;
  return (e = ua().stylesTransform) == null ? void 0 : e.styles;
}
function KO(e) {
  return /^#?([0-9A-F]{3}){1,2}([0-9A-F]{2})?$/i.test(e);
}
function qO(e) {
  let t = e.replace("#", "");
  if (t.length === 3) {
    const a = t.split("");
    t = [
      a[0],
      a[0],
      a[1],
      a[1],
      a[2],
      a[2]
    ].join("");
  }
  if (t.length === 8) {
    const a = parseInt(t.slice(6, 8), 16) / 255;
    return {
      r: parseInt(t.slice(0, 2), 16),
      g: parseInt(t.slice(2, 4), 16),
      b: parseInt(t.slice(4, 6), 16),
      a
    };
  }
  const n = parseInt(t, 16), i = n >> 16 & 255, r = n >> 8 & 255, o = n & 255;
  return {
    r: i,
    g: r,
    b: o,
    a: 1
  };
}
function XO(e) {
  const [t, n, i, r] = e.replace(/[^0-9,./]/g, "").split(/[/,]/).map(Number);
  return { r: t, g: n, b: i, a: r || 1 };
}
function ZO(e) {
  const t = /^hsla?\(\s*(\d+)\s*,\s*(\d+%)\s*,\s*(\d+%)\s*(,\s*(0?\.\d+|\d+(\.\d+)?))?\s*\)$/i, n = e.match(t);
  if (!n)
    return {
      r: 0,
      g: 0,
      b: 0,
      a: 1
    };
  const i = parseInt(n[1], 10), r = parseInt(n[2], 10) / 100, o = parseInt(n[3], 10) / 100, a = n[5] ? parseFloat(n[5]) : void 0, c = (1 - Math.abs(2 * o - 1)) * r, l = i / 60, u = c * (1 - Math.abs(l % 2 - 1)), d = o - c / 2;
  let f, y, g;
  return l >= 0 && l < 1 ? (f = c, y = u, g = 0) : l >= 1 && l < 2 ? (f = u, y = c, g = 0) : l >= 2 && l < 3 ? (f = 0, y = c, g = u) : l >= 3 && l < 4 ? (f = 0, y = u, g = c) : l >= 4 && l < 5 ? (f = u, y = 0, g = c) : (f = c, y = 0, g = u), {
    r: Math.round((f + d) * 255),
    g: Math.round((y + d) * 255),
    b: Math.round((g + d) * 255),
    a: a || 1
  };
}
function dm(e) {
  return KO(e) ? qO(e) : e.startsWith("rgb") ? XO(e) : e.startsWith("hsl") ? ZO(e) : {
    r: 0,
    g: 0,
    b: 0,
    a: 1
  };
}
function kl(e, t) {
  if (e.startsWith("var("))
    return `color-mix(in srgb, ${e}, black ${t * 100}%)`;
  const { r: n, g: i, b: r, a: o } = dm(e), a = 1 - t, c = (l) => Math.round(l * a);
  return `rgba(${c(n)}, ${c(i)}, ${c(r)}, ${o})`;
}
function Zs(e, t) {
  return typeof e.primaryShade == "number" ? e.primaryShade : t === "dark" ? e.primaryShade.dark : e.primaryShade.light;
}
function _f(e) {
  return e <= 0.03928 ? e / 12.92 : ((e + 0.055) / 1.055) ** 2.4;
}
function JO(e) {
  const t = e.match(/oklch\((.*?)%\s/);
  return t ? parseFloat(t[1]) : null;
}
function QO(e) {
  if (e.startsWith("oklch("))
    return (JO(e) || 0) / 100;
  const { r: t, g: n, b: i } = dm(e), r = t / 255, o = n / 255, a = i / 255, c = _f(r), l = _f(o), u = _f(a);
  return 0.2126 * c + 0.7152 * l + 0.0722 * u;
}
function ks(e, t = 0.179) {
  return e.startsWith("var(") ? !1 : QO(e) > t;
}
function kc({
  color: e,
  theme: t,
  colorScheme: n
}) {
  if (typeof e != "string")
    throw new Error(
      `[@mantine/core] Failed to parse color. Expected color to be a string, instead got ${typeof e}`
    );
  if (e === "bright")
    return {
      color: e,
      value: n === "dark" ? t.white : t.black,
      shade: void 0,
      isThemeColor: !1,
      isLight: ks(
        n === "dark" ? t.white : t.black,
        t.luminanceThreshold
      ),
      variable: "--mantine-color-bright"
    };
  if (e === "dimmed")
    return {
      color: e,
      value: n === "dark" ? t.colors.dark[2] : t.colors.gray[7],
      shade: void 0,
      isThemeColor: !1,
      isLight: ks(
        n === "dark" ? t.colors.dark[2] : t.colors.gray[6],
        t.luminanceThreshold
      ),
      variable: "--mantine-color-dimmed"
    };
  if (e === "white" || e === "black")
    return {
      color: e,
      value: e === "white" ? t.white : t.black,
      shade: void 0,
      isThemeColor: !1,
      isLight: ks(
        e === "white" ? t.white : t.black,
        t.luminanceThreshold
      ),
      variable: `--mantine-color-${e}`
    };
  const [i, r] = e.split("."), o = r ? Number(r) : void 0, a = i in t.colors;
  if (a) {
    const c = o !== void 0 ? t.colors[i][o] : t.colors[i][Zs(t, n || "light")];
    return {
      color: i,
      value: c,
      shade: o,
      isThemeColor: a,
      isLight: ks(c, t.luminanceThreshold),
      variable: r ? `--mantine-color-${i}-${o}` : `--mantine-color-${i}-filled`
    };
  }
  return {
    color: e,
    value: e,
    isThemeColor: a,
    isLight: ks(e, t.luminanceThreshold),
    shade: o,
    variable: void 0
  };
}
function ud(e, t) {
  const n = kc({ color: e || t.primaryColor, theme: t });
  return n.variable ? `var(${n.variable})` : e;
}
function V0(e, t) {
  const n = {
    from: (e == null ? void 0 : e.from) || t.defaultGradient.from,
    to: (e == null ? void 0 : e.to) || t.defaultGradient.to,
    deg: (e == null ? void 0 : e.deg) || t.defaultGradient.deg || 0
  }, i = ud(n.from, t), r = ud(n.to, t);
  return `linear-gradient(${n.deg}deg, ${i} 0%, ${r} 100%)`;
}
function Cr(e, t) {
  if (typeof e != "string" || t > 1 || t < 0)
    return "rgba(0, 0, 0, 1)";
  if (e.startsWith("var(")) {
    const o = (1 - t) * 100;
    return `color-mix(in srgb, ${e}, transparent ${o}%)`;
  }
  if (e.startsWith("oklch"))
    return e.includes("/") ? e.replace(/\/\s*[\d.]+\s*\)/, `/ ${t})`) : e.replace(")", ` / ${t})`);
  const { r: n, g: i, b: r } = dm(e);
  return `rgba(${n}, ${i}, ${r}, ${t})`;
}
const Da = Cr, eN = ({
  color: e,
  theme: t,
  variant: n,
  gradient: i,
  autoContrast: r
}) => {
  const o = kc({ color: e, theme: t }), a = typeof r == "boolean" ? r : t.autoContrast;
  if (n === "filled") {
    const c = a && o.isLight ? "var(--mantine-color-black)" : "var(--mantine-color-white)";
    return o.isThemeColor ? o.shade === void 0 ? {
      background: `var(--mantine-color-${e}-filled)`,
      hover: `var(--mantine-color-${e}-filled-hover)`,
      color: c,
      border: `${de(1)} solid transparent`
    } : {
      background: `var(--mantine-color-${o.color}-${o.shade})`,
      hover: `var(--mantine-color-${o.color}-${o.shade === 9 ? 8 : o.shade + 1})`,
      color: c,
      border: `${de(1)} solid transparent`
    } : {
      background: e,
      hover: kl(e, 0.1),
      color: c,
      border: `${de(1)} solid transparent`
    };
  }
  if (n === "light") {
    if (o.isThemeColor) {
      if (o.shade === void 0)
        return {
          background: `var(--mantine-color-${e}-light)`,
          hover: `var(--mantine-color-${e}-light-hover)`,
          color: `var(--mantine-color-${e}-light-color)`,
          border: `${de(1)} solid transparent`
        };
      const c = t.colors[o.color][o.shade];
      return {
        background: Cr(c, 0.1),
        hover: Cr(c, 0.12),
        color: `var(--mantine-color-${o.color}-${Math.min(o.shade, 6)})`,
        border: `${de(1)} solid transparent`
      };
    }
    return {
      background: Cr(e, 0.1),
      hover: Cr(e, 0.12),
      color: e,
      border: `${de(1)} solid transparent`
    };
  }
  if (n === "outline")
    return o.isThemeColor ? o.shade === void 0 ? {
      background: "transparent",
      hover: `var(--mantine-color-${e}-outline-hover)`,
      color: `var(--mantine-color-${e}-outline)`,
      border: `${de(1)} solid var(--mantine-color-${e}-outline)`
    } : {
      background: "transparent",
      hover: Cr(t.colors[o.color][o.shade], 0.05),
      color: `var(--mantine-color-${o.color}-${o.shade})`,
      border: `${de(1)} solid var(--mantine-color-${o.color}-${o.shade})`
    } : {
      background: "transparent",
      hover: Cr(e, 0.05),
      color: e,
      border: `${de(1)} solid ${e}`
    };
  if (n === "subtle") {
    if (o.isThemeColor) {
      if (o.shade === void 0)
        return {
          background: "transparent",
          hover: `var(--mantine-color-${e}-light-hover)`,
          color: `var(--mantine-color-${e}-light-color)`,
          border: `${de(1)} solid transparent`
        };
      const c = t.colors[o.color][o.shade];
      return {
        background: "transparent",
        hover: Cr(c, 0.12),
        color: `var(--mantine-color-${o.color}-${Math.min(o.shade, 6)})`,
        border: `${de(1)} solid transparent`
      };
    }
    return {
      background: "transparent",
      hover: Cr(e, 0.12),
      color: e,
      border: `${de(1)} solid transparent`
    };
  }
  return n === "transparent" ? o.isThemeColor ? o.shade === void 0 ? {
    background: "transparent",
    hover: "transparent",
    color: `var(--mantine-color-${e}-light-color)`,
    border: `${de(1)} solid transparent`
  } : {
    background: "transparent",
    hover: "transparent",
    color: `var(--mantine-color-${o.color}-${Math.min(o.shade, 6)})`,
    border: `${de(1)} solid transparent`
  } : {
    background: "transparent",
    hover: "transparent",
    color: e,
    border: `${de(1)} solid transparent`
  } : n === "white" ? o.isThemeColor ? o.shade === void 0 ? {
    background: "var(--mantine-color-white)",
    hover: kl(t.white, 0.01),
    color: `var(--mantine-color-${e}-filled)`,
    border: `${de(1)} solid transparent`
  } : {
    background: "var(--mantine-color-white)",
    hover: kl(t.white, 0.01),
    color: `var(--mantine-color-${o.color}-${o.shade})`,
    border: `${de(1)} solid transparent`
  } : {
    background: "var(--mantine-color-white)",
    hover: kl(t.white, 0.01),
    color: e,
    border: `${de(1)} solid transparent`
  } : n === "gradient" ? {
    background: V0(i, t),
    hover: V0(i, t),
    color: "var(--mantine-color-white)",
    border: "none"
  } : n === "default" ? {
    background: "var(--mantine-color-default)",
    hover: "var(--mantine-color-default-hover)",
    color: "var(--mantine-color-default-color)",
    border: `${de(1)} solid var(--mantine-color-default-border)`
  } : {};
}, tN = {
  dark: [
    "#C9C9C9",
    "#b8b8b8",
    "#828282",
    "#696969",
    "#424242",
    "#3b3b3b",
    "#2e2e2e",
    "#242424",
    "#1f1f1f",
    "#141414"
  ],
  gray: [
    "#f8f9fa",
    "#f1f3f5",
    "#e9ecef",
    "#dee2e6",
    "#ced4da",
    "#adb5bd",
    "#868e96",
    "#495057",
    "#343a40",
    "#212529"
  ],
  red: [
    "#fff5f5",
    "#ffe3e3",
    "#ffc9c9",
    "#ffa8a8",
    "#ff8787",
    "#ff6b6b",
    "#fa5252",
    "#f03e3e",
    "#e03131",
    "#c92a2a"
  ],
  pink: [
    "#fff0f6",
    "#ffdeeb",
    "#fcc2d7",
    "#faa2c1",
    "#f783ac",
    "#f06595",
    "#e64980",
    "#d6336c",
    "#c2255c",
    "#a61e4d"
  ],
  grape: [
    "#f8f0fc",
    "#f3d9fa",
    "#eebefa",
    "#e599f7",
    "#da77f2",
    "#cc5de8",
    "#be4bdb",
    "#ae3ec9",
    "#9c36b5",
    "#862e9c"
  ],
  violet: [
    "#f3f0ff",
    "#e5dbff",
    "#d0bfff",
    "#b197fc",
    "#9775fa",
    "#845ef7",
    "#7950f2",
    "#7048e8",
    "#6741d9",
    "#5f3dc4"
  ],
  indigo: [
    "#edf2ff",
    "#dbe4ff",
    "#bac8ff",
    "#91a7ff",
    "#748ffc",
    "#5c7cfa",
    "#4c6ef5",
    "#4263eb",
    "#3b5bdb",
    "#364fc7"
  ],
  blue: [
    "#e7f5ff",
    "#d0ebff",
    "#a5d8ff",
    "#74c0fc",
    "#4dabf7",
    "#339af0",
    "#228be6",
    "#1c7ed6",
    "#1971c2",
    "#1864ab"
  ],
  cyan: [
    "#e3fafc",
    "#c5f6fa",
    "#99e9f2",
    "#66d9e8",
    "#3bc9db",
    "#22b8cf",
    "#15aabf",
    "#1098ad",
    "#0c8599",
    "#0b7285"
  ],
  teal: [
    "#e6fcf5",
    "#c3fae8",
    "#96f2d7",
    "#63e6be",
    "#38d9a9",
    "#20c997",
    "#12b886",
    "#0ca678",
    "#099268",
    "#087f5b"
  ],
  green: [
    "#ebfbee",
    "#d3f9d8",
    "#b2f2bb",
    "#8ce99a",
    "#69db7c",
    "#51cf66",
    "#40c057",
    "#37b24d",
    "#2f9e44",
    "#2b8a3e"
  ],
  lime: [
    "#f4fce3",
    "#e9fac8",
    "#d8f5a2",
    "#c0eb75",
    "#a9e34b",
    "#94d82d",
    "#82c91e",
    "#74b816",
    "#66a80f",
    "#5c940d"
  ],
  yellow: [
    "#fff9db",
    "#fff3bf",
    "#ffec99",
    "#ffe066",
    "#ffd43b",
    "#fcc419",
    "#fab005",
    "#f59f00",
    "#f08c00",
    "#e67700"
  ],
  orange: [
    "#fff4e6",
    "#ffe8cc",
    "#ffd8a8",
    "#ffc078",
    "#ffa94d",
    "#ff922b",
    "#fd7e14",
    "#f76707",
    "#e8590c",
    "#d9480f"
  ]
}, W0 = "-apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica, Arial, sans-serif, Apple Color Emoji, Segoe UI Emoji", hm = {
  scale: 1,
  fontSmoothing: !0,
  focusRing: "auto",
  white: "#fff",
  black: "#000",
  colors: tN,
  primaryShade: { light: 6, dark: 8 },
  primaryColor: "blue",
  variantColorResolver: eN,
  autoContrast: !1,
  luminanceThreshold: 0.3,
  fontFamily: W0,
  fontFamilyMonospace: "ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, Liberation Mono, Courier New, monospace",
  respectReducedMotion: !1,
  cursorType: "default",
  defaultGradient: { from: "blue", to: "cyan", deg: 45 },
  defaultRadius: "sm",
  activeClassName: "mantine-active",
  focusClassName: "",
  headings: {
    fontFamily: W0,
    fontWeight: "700",
    textWrap: "wrap",
    sizes: {
      h1: { fontSize: de(34), lineHeight: "1.3" },
      h2: { fontSize: de(26), lineHeight: "1.35" },
      h3: { fontSize: de(22), lineHeight: "1.4" },
      h4: { fontSize: de(18), lineHeight: "1.45" },
      h5: { fontSize: de(16), lineHeight: "1.5" },
      h6: { fontSize: de(14), lineHeight: "1.5" }
    }
  },
  fontSizes: {
    xs: de(12),
    sm: de(14),
    md: de(16),
    lg: de(18),
    xl: de(20)
  },
  lineHeights: {
    xs: "1.4",
    sm: "1.45",
    md: "1.55",
    lg: "1.6",
    xl: "1.65"
  },
  radius: {
    xs: de(2),
    sm: de(4),
    md: de(8),
    lg: de(16),
    xl: de(32)
  },
  spacing: {
    xs: de(10),
    sm: de(12),
    md: de(16),
    lg: de(20),
    xl: de(32)
  },
  breakpoints: {
    xs: "36em",
    sm: "48em",
    md: "62em",
    lg: "75em",
    xl: "88em"
  },
  shadows: {
    xs: `0 ${de(1)} ${de(3)} rgba(0, 0, 0, 0.05), 0 ${de(1)} ${de(2)} rgba(0, 0, 0, 0.1)`,
    sm: `0 ${de(1)} ${de(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${de(10)} ${de(
      15
    )} ${de(-5)}, rgba(0, 0, 0, 0.04) 0 ${de(7)} ${de(7)} ${de(-5)}`,
    md: `0 ${de(1)} ${de(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${de(20)} ${de(
      25
    )} ${de(-5)}, rgba(0, 0, 0, 0.04) 0 ${de(10)} ${de(10)} ${de(-5)}`,
    lg: `0 ${de(1)} ${de(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${de(28)} ${de(
      23
    )} ${de(-7)}, rgba(0, 0, 0, 0.04) 0 ${de(12)} ${de(12)} ${de(-7)}`,
    xl: `0 ${de(1)} ${de(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${de(36)} ${de(
      28
    )} ${de(-7)}, rgba(0, 0, 0, 0.04) 0 ${de(17)} ${de(17)} ${de(-7)}`
  },
  other: {},
  components: {}
};
function G0(e) {
  return e === "auto" || e === "dark" || e === "light";
}
function nN({
  key: e = "mantine-color-scheme-value"
} = {}) {
  let t;
  return {
    get: (n) => {
      if (typeof window > "u")
        return n;
      try {
        const i = window.localStorage.getItem(e);
        return G0(i) ? i : n;
      } catch {
        return n;
      }
    },
    set: (n) => {
      try {
        window.localStorage.setItem(e, n);
      } catch (i) {
        console.warn(
          "[@mantine/core] Local storage color scheme manager was unable to save color scheme.",
          i
        );
      }
    },
    subscribe: (n) => {
      t = (i) => {
        i.storageArea === window.localStorage && i.key === e && G0(i.newValue) && n(i.newValue);
      }, window.addEventListener("storage", t);
    },
    unsubscribe: () => {
      window.removeEventListener("storage", t);
    },
    clear: () => {
      window.localStorage.removeItem(e);
    }
  };
}
const iN = "[@mantine/core] MantineProvider: Invalid theme.primaryColor, it accepts only key of theme.colors, learn more  https://mantine.dev/theming/colors/#primary-color", U0 = "[@mantine/core] MantineProvider: Invalid theme.primaryShade, it accepts only 0-9 integers or an object { light: 0-9, dark: 0-9 }";
function bf(e) {
  return e < 0 || e > 9 ? !1 : parseInt(e.toString(), 10) === e;
}
function Y0(e) {
  if (!(e.primaryColor in e.colors))
    throw new Error(iN);
  if (typeof e.primaryShade == "object" && (!bf(e.primaryShade.dark) || !bf(e.primaryShade.light)))
    throw new Error(U0);
  if (typeof e.primaryShade == "number" && !bf(e.primaryShade))
    throw new Error(U0);
}
function rN(e, t) {
  var i;
  if (!t)
    return Y0(e), e;
  const n = lm(e, t);
  return t.fontFamily && !((i = t.headings) != null && i.fontFamily) && (n.headings.fontFamily = t.fontFamily), Y0(n), n;
}
const mm = n_(null), oN = () => dd(mm) || hm;
function pa() {
  const e = dd(mm);
  if (!e)
    throw new Error(
      "@mantine/core: MantineProvider was not found in component tree, make sure you have it in your app"
    );
  return e;
}
function e1({
  theme: e,
  children: t,
  inherit: n = !0
}) {
  const i = oN(), r = Yw(
    () => rN(n ? i : hm, e),
    [e, i, n]
  );
  return /* @__PURE__ */ Oe.jsx(mm.Provider, { value: r, children: t });
}
e1.displayName = "@mantine/core/MantineThemeProvider";
function aN() {
  const e = pa(), t = fm(), n = sr(e.breakpoints).reduce((i, r) => {
    const o = e.breakpoints[r].includes("px"), a = OO(e.breakpoints[r]), c = o ? `${a - 0.1}px` : H0(a - 0.1), l = o ? `${a}px` : H0(a);
    return `${i}@media (max-width: ${c}) {.mantine-visible-from-${r} {display: none !important;}}@media (min-width: ${l}) {.mantine-hidden-from-${r} {display: none !important;}}`;
  }, "");
  return /* @__PURE__ */ Oe.jsx(
    "style",
    {
      "data-mantine-styles": "classes",
      nonce: t == null ? void 0 : t(),
      dangerouslySetInnerHTML: { __html: n }
    }
  );
}
function xf(e) {
  return Object.entries(e).map(([t, n]) => `${t}: ${n};`).join("");
}
function Ef(e, t) {
  return (Array.isArray(e) ? e : [e]).reduce((i, r) => `${r}{${i}}`, t);
}
function sN(e, t) {
  const n = xf(e.variables), i = n ? Ef(t, n) : "", r = xf(e.dark), o = r ? Ef(`${t}[data-mantine-color-scheme="dark"]`, r) : "", a = xf(e.light), c = a ? Ef(`${t}[data-mantine-color-scheme="light"]`, a) : "";
  return `${i}${o}${c}`;
}
function cN({ color: e, theme: t, autoContrast: n }) {
  return (typeof n == "boolean" ? n : t.autoContrast) && kc({ color: e || t.primaryColor, theme: t }).isLight ? "var(--mantine-color-black)" : "var(--mantine-color-white)";
}
function K0(e, t) {
  return cN({
    color: e.colors[e.primaryColor][Zs(e, t)],
    theme: e,
    autoContrast: null
  });
}
function Ml({
  theme: e,
  color: t,
  colorScheme: n,
  name: i = t,
  withColorValues: r = !0
}) {
  if (!e.colors[t])
    return {};
  if (n === "light") {
    const c = Zs(e, "light"), l = {
      [`--mantine-color-${i}-text`]: `var(--mantine-color-${i}-filled)`,
      [`--mantine-color-${i}-filled`]: `var(--mantine-color-${i}-${c})`,
      [`--mantine-color-${i}-filled-hover`]: `var(--mantine-color-${i}-${c === 9 ? 8 : c + 1})`,
      [`--mantine-color-${i}-light`]: Da(e.colors[t][c], 0.1),
      [`--mantine-color-${i}-light-hover`]: Da(e.colors[t][c], 0.12),
      [`--mantine-color-${i}-light-color`]: `var(--mantine-color-${i}-${c})`,
      [`--mantine-color-${i}-outline`]: `var(--mantine-color-${i}-${c})`,
      [`--mantine-color-${i}-outline-hover`]: Da(e.colors[t][c], 0.05)
    };
    return r ? {
      [`--mantine-color-${i}-0`]: e.colors[t][0],
      [`--mantine-color-${i}-1`]: e.colors[t][1],
      [`--mantine-color-${i}-2`]: e.colors[t][2],
      [`--mantine-color-${i}-3`]: e.colors[t][3],
      [`--mantine-color-${i}-4`]: e.colors[t][4],
      [`--mantine-color-${i}-5`]: e.colors[t][5],
      [`--mantine-color-${i}-6`]: e.colors[t][6],
      [`--mantine-color-${i}-7`]: e.colors[t][7],
      [`--mantine-color-${i}-8`]: e.colors[t][8],
      [`--mantine-color-${i}-9`]: e.colors[t][9],
      ...l
    } : l;
  }
  const o = Zs(e, "dark"), a = {
    [`--mantine-color-${i}-text`]: `var(--mantine-color-${i}-4)`,
    [`--mantine-color-${i}-filled`]: `var(--mantine-color-${i}-${o})`,
    [`--mantine-color-${i}-filled-hover`]: `var(--mantine-color-${i}-${o === 9 ? 8 : o + 1})`,
    [`--mantine-color-${i}-light`]: Da(
      e.colors[t][Math.max(0, o - 2)],
      0.15
    ),
    [`--mantine-color-${i}-light-hover`]: Da(
      e.colors[t][Math.max(0, o - 2)],
      0.2
    ),
    [`--mantine-color-${i}-light-color`]: `var(--mantine-color-${i}-${Math.max(o - 5, 0)})`,
    [`--mantine-color-${i}-outline`]: `var(--mantine-color-${i}-${Math.max(o - 4, 0)})`,
    [`--mantine-color-${i}-outline-hover`]: Da(
      e.colors[t][Math.max(o - 4, 0)],
      0.05
    )
  };
  return r ? {
    [`--mantine-color-${i}-0`]: e.colors[t][0],
    [`--mantine-color-${i}-1`]: e.colors[t][1],
    [`--mantine-color-${i}-2`]: e.colors[t][2],
    [`--mantine-color-${i}-3`]: e.colors[t][3],
    [`--mantine-color-${i}-4`]: e.colors[t][4],
    [`--mantine-color-${i}-5`]: e.colors[t][5],
    [`--mantine-color-${i}-6`]: e.colors[t][6],
    [`--mantine-color-${i}-7`]: e.colors[t][7],
    [`--mantine-color-${i}-8`]: e.colors[t][8],
    [`--mantine-color-${i}-9`]: e.colors[t][9],
    ...a
  } : a;
}
function lN(e) {
  return !!e && typeof e == "object" && "mantine-virtual-color" in e;
}
function Oa(e, t, n) {
  sr(t).forEach(
    (i) => Object.assign(e, { [`--mantine-${n}-${i}`]: t[i] })
  );
}
const t1 = (e) => {
  const t = Zs(e, "light"), n = e.defaultRadius in e.radius ? e.radius[e.defaultRadius] : de(e.defaultRadius), i = {
    variables: {
      "--mantine-scale": e.scale.toString(),
      "--mantine-cursor-type": e.cursorType,
      "--mantine-color-scheme": "light dark",
      "--mantine-webkit-font-smoothing": e.fontSmoothing ? "antialiased" : "unset",
      "--mantine-moz-font-smoothing": e.fontSmoothing ? "grayscale" : "unset",
      "--mantine-color-white": e.white,
      "--mantine-color-black": e.black,
      "--mantine-line-height": e.lineHeights.md,
      "--mantine-font-family": e.fontFamily,
      "--mantine-font-family-monospace": e.fontFamilyMonospace,
      "--mantine-font-family-headings": e.headings.fontFamily,
      "--mantine-heading-font-weight": e.headings.fontWeight,
      "--mantine-heading-text-wrap": e.headings.textWrap,
      "--mantine-radius-default": n,
      // Primary colors
      "--mantine-primary-color-filled": `var(--mantine-color-${e.primaryColor}-filled)`,
      "--mantine-primary-color-filled-hover": `var(--mantine-color-${e.primaryColor}-filled-hover)`,
      "--mantine-primary-color-light": `var(--mantine-color-${e.primaryColor}-light)`,
      "--mantine-primary-color-light-hover": `var(--mantine-color-${e.primaryColor}-light-hover)`,
      "--mantine-primary-color-light-color": `var(--mantine-color-${e.primaryColor}-light-color)`
    },
    light: {
      "--mantine-primary-color-contrast": K0(e, "light"),
      "--mantine-color-bright": "var(--mantine-color-black)",
      "--mantine-color-text": e.black,
      "--mantine-color-body": e.white,
      "--mantine-color-error": "var(--mantine-color-red-6)",
      "--mantine-color-placeholder": "var(--mantine-color-gray-5)",
      "--mantine-color-anchor": `var(--mantine-color-${e.primaryColor}-${t})`,
      "--mantine-color-default": "var(--mantine-color-white)",
      "--mantine-color-default-hover": "var(--mantine-color-gray-0)",
      "--mantine-color-default-color": "var(--mantine-color-black)",
      "--mantine-color-default-border": "var(--mantine-color-gray-4)",
      "--mantine-color-dimmed": "var(--mantine-color-gray-6)"
    },
    dark: {
      "--mantine-primary-color-contrast": K0(e, "dark"),
      "--mantine-color-bright": "var(--mantine-color-white)",
      "--mantine-color-text": "var(--mantine-color-dark-0)",
      "--mantine-color-body": "var(--mantine-color-dark-7)",
      "--mantine-color-error": "var(--mantine-color-red-8)",
      "--mantine-color-placeholder": "var(--mantine-color-dark-3)",
      "--mantine-color-anchor": `var(--mantine-color-${e.primaryColor}-4)`,
      "--mantine-color-default": "var(--mantine-color-dark-6)",
      "--mantine-color-default-hover": "var(--mantine-color-dark-5)",
      "--mantine-color-default-color": "var(--mantine-color-white)",
      "--mantine-color-default-border": "var(--mantine-color-dark-4)",
      "--mantine-color-dimmed": "var(--mantine-color-dark-2)"
    }
  };
  Oa(i.variables, e.breakpoints, "breakpoint"), Oa(i.variables, e.spacing, "spacing"), Oa(i.variables, e.fontSizes, "font-size"), Oa(i.variables, e.lineHeights, "line-height"), Oa(i.variables, e.shadows, "shadow"), Oa(i.variables, e.radius, "radius"), e.colors[e.primaryColor].forEach((o, a) => {
    i.variables[`--mantine-primary-color-${a}`] = `var(--mantine-color-${e.primaryColor}-${a})`;
  }), sr(e.colors).forEach((o) => {
    const a = e.colors[o];
    if (lN(a)) {
      Object.assign(
        i.light,
        Ml({
          theme: e,
          name: a.name,
          color: a.light,
          colorScheme: "light",
          withColorValues: !0
        })
      ), Object.assign(
        i.dark,
        Ml({
          theme: e,
          name: a.name,
          color: a.dark,
          colorScheme: "dark",
          withColorValues: !0
        })
      );
      return;
    }
    a.forEach((c, l) => {
      i.variables[`--mantine-color-${o}-${l}`] = c;
    }), Object.assign(
      i.light,
      Ml({
        theme: e,
        color: o,
        colorScheme: "light",
        withColorValues: !1
      })
    ), Object.assign(
      i.dark,
      Ml({
        theme: e,
        color: o,
        colorScheme: "dark",
        withColorValues: !1
      })
    );
  });
  const r = e.headings.sizes;
  return sr(r).forEach((o) => {
    i.variables[`--mantine-${o}-font-size`] = r[o].fontSize, i.variables[`--mantine-${o}-line-height`] = r[o].lineHeight, i.variables[`--mantine-${o}-font-weight`] = r[o].fontWeight || e.headings.fontWeight;
  }), i;
};
function uN({ theme: e, generator: t }) {
  const n = t1(e), i = t == null ? void 0 : t(e);
  return i ? lm(n, i) : n;
}
const wf = t1(hm);
function pN(e) {
  const t = {
    variables: {},
    light: {},
    dark: {}
  };
  return sr(e.variables).forEach((n) => {
    wf.variables[n] !== e.variables[n] && (t.variables[n] = e.variables[n]);
  }), sr(e.light).forEach((n) => {
    wf.light[n] !== e.light[n] && (t.light[n] = e.light[n]);
  }), sr(e.dark).forEach((n) => {
    wf.dark[n] !== e.dark[n] && (t.dark[n] = e.dark[n]);
  }), t;
}
function fN(e) {
  return `
  ${e}[data-mantine-color-scheme="dark"] { --mantine-color-scheme: dark; }
  ${e}[data-mantine-color-scheme="light"] { --mantine-color-scheme: light; }
`;
}
function n1({
  cssVariablesSelector: e,
  deduplicateCssVariables: t
}) {
  const n = pa(), i = fm(), r = zO(), o = uN({ theme: n, generator: r }), a = e === ":root" && t, c = a ? pN(o) : o, l = sN(c, e);
  return l ? /* @__PURE__ */ Oe.jsx(
    "style",
    {
      "data-mantine-styles": !0,
      nonce: i == null ? void 0 : i(),
      dangerouslySetInnerHTML: {
        __html: `${l}${a ? "" : fN(e)}`
      }
    }
  ) : null;
}
n1.displayName = "@mantine/CssVariables";
function dN() {
  const e = console.error;
  console.error = (...t) => {
    t.length > 1 && typeof t[0] == "string" && t[0].toLowerCase().includes("extra attributes from the server") && typeof t[1] == "string" && t[1].toLowerCase().includes("data-mantine-color-scheme") || e(...t);
  };
}
function Na(e, t) {
  var i;
  const n = e !== "auto" ? e : window.matchMedia("(prefers-color-scheme: dark)").matches ? "dark" : "light";
  (i = t()) == null || i.setAttribute("data-mantine-color-scheme", n);
}
function hN({
  manager: e,
  defaultColorScheme: t,
  getRootElement: n,
  forceColorScheme: i
}) {
  const r = Ko(), [o, a] = oo(() => e.get(t)), c = i || o, l = Ny(
    (d) => {
      i || (Na(d, n), a(d), e.set(d));
    },
    [e.set, c, i]
  ), u = Ny(() => {
    a(t), Na(t, n), e.clear();
  }, [e.clear, t]);
  return Wi(() => (e.subscribe(l), e.unsubscribe), [e.subscribe, e.unsubscribe]), JE(() => {
    Na(e.get(t), n);
  }, []), Wi(() => {
    var f;
    if (i)
      return Na(i, n), () => {
      };
    i === void 0 && Na(o, n), r.current = window.matchMedia("(prefers-color-scheme: dark)");
    const d = (y) => {
      o === "auto" && Na(y.matches ? "dark" : "light", n);
    };
    return (f = r.current) == null || f.addEventListener("change", d), () => {
      var y;
      return (y = r.current) == null ? void 0 : y.removeEventListener("change", d);
    };
  }, [o, i]), { colorScheme: c, setColorScheme: l, clearColorScheme: u };
}
function mN({
  respectReducedMotion: e,
  getRootElement: t
}) {
  JE(() => {
    var n;
    e && ((n = t()) == null || n.setAttribute("data-respect-reduced-motion", "true"));
  }, [e]);
}
dN();
function i1({
  theme: e,
  children: t,
  getStyleNonce: n,
  withStaticClasses: i = !0,
  withGlobalClasses: r = !0,
  deduplicateCssVariables: o = !0,
  withCssVariables: a = !0,
  cssVariablesSelector: c = ":root",
  classNamesPrefix: l = "mantine",
  colorSchemeManager: u = nN(),
  defaultColorScheme: d = "light",
  getRootElement: f = () => document.documentElement,
  cssVariablesResolver: y,
  forceColorScheme: g,
  stylesTransform: _
}) {
  const { colorScheme: x, setColorScheme: w, clearColorScheme: D } = hN({
    defaultColorScheme: d,
    forceColorScheme: g,
    manager: u,
    getRootElement: f
  });
  return mN({
    respectReducedMotion: (e == null ? void 0 : e.respectReducedMotion) || !1,
    getRootElement: f
  }), /* @__PURE__ */ Oe.jsx(
    QE.Provider,
    {
      value: {
        colorScheme: x,
        setColorScheme: w,
        clearColorScheme: D,
        getRootElement: f,
        classNamesPrefix: l,
        getStyleNonce: n,
        cssVariablesResolver: y,
        cssVariablesSelector: c,
        withStaticClasses: i,
        stylesTransform: _
      },
      children: /* @__PURE__ */ Oe.jsxs(e1, { theme: e, children: [
        a && /* @__PURE__ */ Oe.jsx(
          n1,
          {
            cssVariablesSelector: c,
            deduplicateCssVariables: o
          }
        ),
        r && /* @__PURE__ */ Oe.jsx(aN, {}),
        t
      ] })
    }
  );
}
i1.displayName = "@mantine/core/MantineProvider";
const yN = {
  always: "mantine-focus-always",
  auto: "mantine-focus-auto",
  never: "mantine-focus-never"
};
function gN({ theme: e, options: t, unstyled: n }) {
  return Yi(
    (t == null ? void 0 : t.focusable) && !n && (e.focusClassName || yN[e.focusRing]),
    (t == null ? void 0 : t.active) && !n && e.activeClassName
  );
}
function vN({
  selector: e,
  stylesCtx: t,
  options: n,
  props: i,
  theme: r
}) {
  return pm({
    theme: r,
    classNames: n == null ? void 0 : n.classNames,
    props: (n == null ? void 0 : n.props) || i,
    stylesCtx: t
  })[e];
}
function q0({
  selector: e,
  stylesCtx: t,
  theme: n,
  classNames: i,
  props: r
}) {
  return pm({ theme: n, classNames: i, props: r, stylesCtx: t })[e];
}
function _N({ rootSelector: e, selector: t, className: n }) {
  return e === t ? n : void 0;
}
function bN({ selector: e, classes: t, unstyled: n }) {
  return n ? void 0 : t[e];
}
function xN({
  themeName: e,
  classNamesPrefix: t,
  selector: n,
  withStaticClass: i
}) {
  return i === !1 ? [] : e.map((r) => `${t}-${r}-${n}`);
}
function EN({
  themeName: e,
  theme: t,
  selector: n,
  props: i,
  stylesCtx: r
}) {
  return e.map(
    (o) => {
      var a, c;
      return (c = pm({
        theme: t,
        classNames: (a = t.components[o]) == null ? void 0 : a.classNames,
        props: i,
        stylesCtx: r
      })) == null ? void 0 : c[n];
    }
  );
}
function wN({
  options: e,
  classes: t,
  selector: n,
  unstyled: i
}) {
  return e != null && e.variant && !i ? t[`${n}--${e.variant}`] : void 0;
}
function SN({
  theme: e,
  options: t,
  themeName: n,
  selector: i,
  classNamesPrefix: r,
  classNames: o,
  classes: a,
  unstyled: c,
  className: l,
  rootSelector: u,
  props: d,
  stylesCtx: f,
  withStaticClasses: y,
  headless: g,
  transformedStyles: _
}) {
  return Yi(
    gN({ theme: e, options: t, unstyled: c || g }),
    EN({ theme: e, themeName: n, selector: i, props: d, stylesCtx: f }),
    wN({ options: t, classes: a, selector: i, unstyled: c }),
    q0({ selector: i, stylesCtx: f, theme: e, classNames: o, props: d }),
    q0({ selector: i, stylesCtx: f, theme: e, classNames: _, props: d }),
    vN({ selector: i, stylesCtx: f, options: t, props: d, theme: e }),
    _N({ rootSelector: u, selector: i, className: l }),
    bN({ selector: i, classes: a, unstyled: c || g }),
    y && !g && xN({
      themeName: n,
      classNamesPrefix: r,
      selector: i,
      withStaticClass: t == null ? void 0 : t.withStaticClass
    }),
    t == null ? void 0 : t.className
  );
}
function RN({
  theme: e,
  themeName: t,
  props: n,
  stylesCtx: i,
  selector: r
}) {
  return t.map(
    (o) => {
      var a;
      return ld({
        theme: e,
        styles: (a = e.components[o]) == null ? void 0 : a.styles,
        props: n,
        stylesCtx: i
      })[r];
    }
  ).reduce((o, a) => ({ ...o, ...a }), {});
}
function pd({ style: e, theme: t }) {
  return Array.isArray(e) ? [...e].reduce(
    (n, i) => ({ ...n, ...pd({ style: i, theme: t }) }),
    {}
  ) : typeof e == "function" ? e(t) : e ?? {};
}
function CN(e) {
  return e.reduce((t, n) => (n && Object.keys(n).forEach((i) => {
    t[i] = { ...t[i], ...um(n[i]) };
  }), t), {});
}
function AN({
  vars: e,
  varsResolver: t,
  theme: n,
  props: i,
  stylesCtx: r,
  selector: o,
  themeName: a,
  headless: c
}) {
  var l;
  return (l = CN([
    c ? {} : t == null ? void 0 : t(n, i, r),
    ...a.map((u) => {
      var d, f, y;
      return (y = (f = (d = n.components) == null ? void 0 : d[u]) == null ? void 0 : f.vars) == null ? void 0 : y.call(f, n, i, r);
    }),
    e == null ? void 0 : e(n, i, r)
  ])) == null ? void 0 : l[o];
}
function PN({
  theme: e,
  themeName: t,
  selector: n,
  options: i,
  props: r,
  stylesCtx: o,
  rootSelector: a,
  styles: c,
  style: l,
  vars: u,
  varsResolver: d,
  headless: f,
  withStylesTransform: y
}) {
  return {
    ...!y && RN({ theme: e, themeName: t, props: r, stylesCtx: o, selector: n }),
    ...!y && ld({ theme: e, styles: c, props: r, stylesCtx: o })[n],
    ...!y && ld({ theme: e, styles: i == null ? void 0 : i.styles, props: (i == null ? void 0 : i.props) || r, stylesCtx: o })[n],
    ...AN({ theme: e, props: r, stylesCtx: o, vars: u, varsResolver: d, selector: n, themeName: t, headless: f }),
    ...a === n ? pd({ style: l, theme: e }) : null,
    ...pd({ style: i == null ? void 0 : i.style, theme: e })
  };
}
function TN({ props: e, stylesCtx: t, themeName: n }) {
  const i = pa(), r = YO();
  return {
    getTransformedStyles: (a) => r ? [
      ...a.map(
        (l) => r(l, { props: e, theme: i, ctx: t })
      ),
      ...n.map(
        (l) => {
          var u;
          return r((u = i.components[l]) == null ? void 0 : u.styles, { props: e, theme: i, ctx: t });
        }
      )
    ].filter(Boolean) : [],
    withStylesTransform: !!r
  };
}
function mp({
  name: e,
  classes: t,
  props: n,
  stylesCtx: i,
  className: r,
  style: o,
  rootSelector: a = "root",
  unstyled: c,
  classNames: l,
  styles: u,
  vars: d,
  varsResolver: f
}) {
  const y = pa(), g = VO(), _ = WO(), x = GO(), w = (Array.isArray(e) ? e : [e]).filter((k) => k), { withStylesTransform: D, getTransformedStyles: O } = TN({
    props: n,
    stylesCtx: i,
    themeName: w
  });
  return (k, P) => ({
    className: SN({
      theme: y,
      options: P,
      themeName: w,
      selector: k,
      classNamesPrefix: g,
      classNames: l,
      classes: t,
      unstyled: c,
      className: r,
      rootSelector: a,
      props: n,
      stylesCtx: i,
      withStaticClasses: _,
      headless: x,
      transformedStyles: O([P == null ? void 0 : P.styles, u])
    }),
    style: PN({
      theme: y,
      themeName: w,
      selector: k,
      options: P,
      props: n,
      stylesCtx: i,
      rootSelector: a,
      styles: u,
      style: o,
      vars: d,
      varsResolver: f,
      headless: x,
      withStylesTransform: D
    })
  });
}
function Js(e, t, n) {
  var a;
  const i = pa(), r = (a = i.components[e]) == null ? void 0 : a.defaultProps, o = typeof r == "function" ? r(i) : r;
  return { ...t, ...o, ...um(n) };
}
function X0(e) {
  return sr(e).reduce(
    (t, n) => e[n] !== void 0 ? `${t}${MO(n)}:${e[n]};` : t,
    ""
  ).trim();
}
function kN({ selector: e, styles: t, media: n }) {
  const i = t ? X0(t) : "", r = Array.isArray(n) ? n.map((o) => `@media${o.query}{${e}{${X0(o.styles)}}}`) : [];
  return `${i ? `${e}{${i}}` : ""}${r.join("")}`.trim();
}
function MN({ selector: e, styles: t, media: n }) {
  const i = fm();
  return /* @__PURE__ */ Oe.jsx(
    "style",
    {
      "data-mantine-styles": "inline",
      nonce: i == null ? void 0 : i(),
      dangerouslySetInnerHTML: { __html: kN({ selector: e, styles: t, media: n }) }
    }
  );
}
function DN(e) {
  const {
    m: t,
    mx: n,
    my: i,
    mt: r,
    mb: o,
    ml: a,
    mr: c,
    me: l,
    ms: u,
    p: d,
    px: f,
    py: y,
    pt: g,
    pb: _,
    pl: x,
    pr: w,
    pe: D,
    ps: O,
    bg: k,
    c: P,
    opacity: N,
    ff: j,
    fz: W,
    fw: $,
    lts: Z,
    ta: X,
    lh: V,
    fs: ae,
    tt: ie,
    td: Ae,
    w: Rt,
    miw: it,
    maw: Ve,
    h: Zt,
    mih: an,
    mah: Pt,
    bgsz: Kt,
    bgp: oe,
    bgr: se,
    bga: fe,
    pos: ct,
    top: Lt,
    left: Et,
    bottom: Ne,
    right: I,
    inset: E,
    display: C,
    flex: F,
    hiddenFrom: K,
    visibleFrom: ne,
    lightHidden: ke,
    darkHidden: Je,
    sx: Ee,
    ...at
  } = e;
  return { styleProps: um({
    m: t,
    mx: n,
    my: i,
    mt: r,
    mb: o,
    ml: a,
    mr: c,
    me: l,
    ms: u,
    p: d,
    px: f,
    py: y,
    pt: g,
    pb: _,
    pl: x,
    pr: w,
    pe: D,
    ps: O,
    bg: k,
    c: P,
    opacity: N,
    ff: j,
    fz: W,
    fw: $,
    lts: Z,
    ta: X,
    lh: V,
    fs: ae,
    tt: ie,
    td: Ae,
    w: Rt,
    miw: it,
    maw: Ve,
    h: Zt,
    mih: an,
    mah: Pt,
    bgsz: Kt,
    bgp: oe,
    bgr: se,
    bga: fe,
    pos: ct,
    top: Lt,
    left: Et,
    bottom: Ne,
    right: I,
    inset: E,
    display: C,
    flex: F,
    hiddenFrom: K,
    visibleFrom: ne,
    lightHidden: ke,
    darkHidden: Je,
    sx: Ee
  }), rest: at };
}
const ON = {
  m: { type: "spacing", property: "margin" },
  mt: { type: "spacing", property: "marginTop" },
  mb: { type: "spacing", property: "marginBottom" },
  ml: { type: "spacing", property: "marginLeft" },
  mr: { type: "spacing", property: "marginRight" },
  ms: { type: "spacing", property: "marginInlineStart" },
  me: { type: "spacing", property: "marginInlineEnd" },
  mx: { type: "spacing", property: "marginInline" },
  my: { type: "spacing", property: "marginBlock" },
  p: { type: "spacing", property: "padding" },
  pt: { type: "spacing", property: "paddingTop" },
  pb: { type: "spacing", property: "paddingBottom" },
  pl: { type: "spacing", property: "paddingLeft" },
  pr: { type: "spacing", property: "paddingRight" },
  ps: { type: "spacing", property: "paddingInlineStart" },
  pe: { type: "spacing", property: "paddingInlineEnd" },
  px: { type: "spacing", property: "paddingInline" },
  py: { type: "spacing", property: "paddingBlock" },
  bg: { type: "color", property: "background" },
  c: { type: "textColor", property: "color" },
  opacity: { type: "identity", property: "opacity" },
  ff: { type: "fontFamily", property: "fontFamily" },
  fz: { type: "fontSize", property: "fontSize" },
  fw: { type: "identity", property: "fontWeight" },
  lts: { type: "size", property: "letterSpacing" },
  ta: { type: "identity", property: "textAlign" },
  lh: { type: "lineHeight", property: "lineHeight" },
  fs: { type: "identity", property: "fontStyle" },
  tt: { type: "identity", property: "textTransform" },
  td: { type: "identity", property: "textDecoration" },
  w: { type: "spacing", property: "width" },
  miw: { type: "spacing", property: "minWidth" },
  maw: { type: "spacing", property: "maxWidth" },
  h: { type: "spacing", property: "height" },
  mih: { type: "spacing", property: "minHeight" },
  mah: { type: "spacing", property: "maxHeight" },
  bgsz: { type: "size", property: "backgroundSize" },
  bgp: { type: "identity", property: "backgroundPosition" },
  bgr: { type: "identity", property: "backgroundRepeat" },
  bga: { type: "identity", property: "backgroundAttachment" },
  pos: { type: "identity", property: "position" },
  top: { type: "identity", property: "top" },
  left: { type: "size", property: "left" },
  bottom: { type: "size", property: "bottom" },
  right: { type: "size", property: "right" },
  inset: { type: "size", property: "inset" },
  display: { type: "identity", property: "display" },
  flex: { type: "identity", property: "flex" }
};
function r1(e, t) {
  const n = kc({ color: e, theme: t });
  return n.color === "dimmed" ? "var(--mantine-color-dimmed)" : n.color === "bright" ? "var(--mantine-color-bright)" : n.variable ? `var(${n.variable})` : n.color;
}
function NN(e, t) {
  const n = kc({ color: e, theme: t });
  return n.isThemeColor && n.shade === void 0 ? `var(--mantine-color-${n.color}-text)` : r1(e, t);
}
const Z0 = {
  text: "var(--mantine-font-family)",
  mono: "var(--mantine-font-family-monospace)",
  monospace: "var(--mantine-font-family-monospace)",
  heading: "var(--mantine-font-family-headings)",
  headings: "var(--mantine-font-family-headings)"
};
function BN(e) {
  return typeof e == "string" && e in Z0 ? Z0[e] : e;
}
const LN = ["h1", "h2", "h3", "h4", "h5", "h6"];
function IN(e, t) {
  return typeof e == "string" && e in t.fontSizes ? `var(--mantine-font-size-${e})` : typeof e == "string" && LN.includes(e) ? `var(--mantine-${e}-font-size)` : typeof e == "number" || typeof e == "string" ? de(e) : e;
}
function $N(e) {
  return e;
}
const jN = ["h1", "h2", "h3", "h4", "h5", "h6"];
function FN(e, t) {
  return typeof e == "string" && e in t.lineHeights ? `var(--mantine-line-height-${e})` : typeof e == "string" && jN.includes(e) ? `var(--mantine-${e}-line-height)` : e;
}
function HN(e) {
  return typeof e == "number" ? de(e) : e;
}
function zN(e, t) {
  if (typeof e == "number")
    return de(e);
  if (typeof e == "string") {
    const n = e.replace("-", "");
    if (!(n in t.spacing))
      return de(e);
    const i = `--mantine-spacing-${n}`;
    return e.startsWith("-") ? `calc(var(${i}) * -1)` : `var(${i})`;
  }
  return e;
}
const Sf = {
  color: r1,
  textColor: NN,
  fontSize: IN,
  spacing: zN,
  identity: $N,
  size: HN,
  lineHeight: FN,
  fontFamily: BN
};
function J0(e) {
  return e.replace("(min-width: ", "").replace("em)", "");
}
function VN({
  media: e,
  ...t
}) {
  const i = Object.keys(e).sort((r, o) => Number(J0(r)) - Number(J0(o))).map((r) => ({ query: r, styles: e[r] }));
  return { ...t, media: i };
}
function WN(e) {
  if (typeof e != "object" || e === null)
    return !1;
  const t = Object.keys(e);
  return !(t.length === 1 && t[0] === "base");
}
function GN(e) {
  return typeof e == "object" && e !== null ? "base" in e ? e.base : void 0 : e;
}
function UN(e) {
  return typeof e == "object" && e !== null ? sr(e).filter((t) => t !== "base") : [];
}
function YN(e, t) {
  return typeof e == "object" && e !== null && t in e ? e[t] : e;
}
function KN({
  styleProps: e,
  data: t,
  theme: n
}) {
  return VN(
    sr(e).reduce(
      (i, r) => {
        if (r === "hiddenFrom" || r === "visibleFrom" || r === "sx")
          return i;
        const o = t[r], a = Array.isArray(o.property) ? o.property : [o.property], c = GN(e[r]);
        if (!WN(e[r]))
          return a.forEach((u) => {
            i.inlineStyles[u] = Sf[o.type](c, n);
          }), i;
        i.hasResponsiveStyles = !0;
        const l = UN(e[r]);
        return a.forEach((u) => {
          c && (i.styles[u] = Sf[o.type](c, n)), l.forEach((d) => {
            const f = `(min-width: ${n.breakpoints[d]})`;
            i.media[f] = {
              ...i.media[f],
              [u]: Sf[o.type](
                YN(e[r], d),
                n
              )
            };
          });
        }), i;
      },
      {
        hasResponsiveStyles: !1,
        styles: {},
        inlineStyles: {},
        media: {}
      }
    )
  );
}
function qN() {
  return `__m__-${Kw().replace(/:/g, "")}`;
}
function o1(e) {
  return e.startsWith("data-") ? e : `data-${e}`;
}
function XN(e) {
  return Object.keys(e).reduce((t, n) => {
    const i = e[n];
    return i === void 0 || i === "" || i === !1 || i === null || (t[o1(n)] = e[n]), t;
  }, {});
}
function a1(e) {
  return e ? typeof e == "string" ? { [o1(e)]: !0 } : Array.isArray(e) ? [...e].reduce(
    (t, n) => ({ ...t, ...a1(n) }),
    {}
  ) : XN(e) : null;
}
function fd(e, t) {
  return Array.isArray(e) ? [...e].reduce(
    (n, i) => ({ ...n, ...fd(i, t) }),
    {}
  ) : typeof e == "function" ? e(t) : e ?? {};
}
function ZN({
  theme: e,
  style: t,
  vars: n,
  styleProps: i
}) {
  const r = fd(t, e), o = fd(n, e);
  return { ...r, ...o, ...i };
}
const s1 = ur(
  ({
    component: e,
    style: t,
    __vars: n,
    className: i,
    variant: r,
    mod: o,
    size: a,
    hiddenFrom: c,
    visibleFrom: l,
    lightHidden: u,
    darkHidden: d,
    renderRoot: f,
    ...y
  }, g) => {
    const _ = pa(), x = e || "div", { styleProps: w, rest: D } = DN(y), O = UO(), k = O == null ? void 0 : O(w.sx), P = qN(), N = KN({
      styleProps: w,
      theme: _,
      data: ON
    }), j = {
      ref: g,
      style: ZN({
        theme: _,
        style: t,
        vars: n,
        styleProps: N.inlineStyles
      }),
      className: Yi(i, k, {
        [P]: N.hasResponsiveStyles,
        "mantine-light-hidden": u,
        "mantine-dark-hidden": d,
        [`mantine-hidden-from-${c}`]: c,
        [`mantine-visible-from-${l}`]: l
      }),
      "data-variant": r,
      "data-size": ZE(a) ? void 0 : a || void 0,
      ...a1(o),
      ...D
    };
    return /* @__PURE__ */ Oe.jsxs(Oe.Fragment, { children: [
      N.hasResponsiveStyles && /* @__PURE__ */ Oe.jsx(
        MN,
        {
          selector: `.${P}`,
          styles: N.styles,
          media: N.media
        }
      ),
      typeof f == "function" ? f(j) : /* @__PURE__ */ Oe.jsx(x, { ...j })
    ] });
  }
);
s1.displayName = "@mantine/core/Box";
const Fi = s1;
function c1(e) {
  return e;
}
function l1(e) {
  const t = ur(e);
  return t.extend = c1, t;
}
function u1(e) {
  const t = ur(e);
  return t.extend = c1, t;
}
var p1 = { root: "m_87cf2631" };
const JN = {
  __staticSelector: "UnstyledButton"
}, ym = u1(
  (e, t) => {
    const n = Js("UnstyledButton", JN, e), {
      className: i,
      component: r = "button",
      __staticSelector: o,
      unstyled: a,
      classNames: c,
      styles: l,
      style: u,
      ...d
    } = n, f = mp({
      name: o,
      props: n,
      classes: p1,
      className: i,
      style: u,
      classNames: c,
      styles: l,
      unstyled: a
    });
    return /* @__PURE__ */ Oe.jsx(
      Fi,
      {
        ...f("root", { focusable: !0 }),
        component: r,
        ref: t,
        type: r === "button" ? "button" : void 0,
        ...d
      }
    );
  }
);
ym.classes = p1;
ym.displayName = "@mantine/core/UnstyledButton";
const Ms = (e) => ({
  in: { opacity: 1, transform: "scale(1)" },
  out: { opacity: 0, transform: `scale(.9) translateY(${de(e === "bottom" ? 10 : -10)})` },
  transitionProperty: "transform, opacity"
}), Dl = {
  fade: {
    in: { opacity: 1 },
    out: { opacity: 0 },
    transitionProperty: "opacity"
  },
  "fade-up": {
    in: { opacity: 1, transform: "translateY(0)" },
    out: { opacity: 0, transform: `translateY(${de(30)}` },
    transitionProperty: "opacity, transform"
  },
  "fade-down": {
    in: { opacity: 1, transform: "translateY(0)" },
    out: { opacity: 0, transform: `translateY(${de(-30)}` },
    transitionProperty: "opacity, transform"
  },
  "fade-left": {
    in: { opacity: 1, transform: "translateX(0)" },
    out: { opacity: 0, transform: `translateX(${de(30)}` },
    transitionProperty: "opacity, transform"
  },
  "fade-right": {
    in: { opacity: 1, transform: "translateX(0)" },
    out: { opacity: 0, transform: `translateX(${de(-30)}` },
    transitionProperty: "opacity, transform"
  },
  scale: {
    in: { opacity: 1, transform: "scale(1)" },
    out: { opacity: 0, transform: "scale(0)" },
    common: { transformOrigin: "top" },
    transitionProperty: "transform, opacity"
  },
  "scale-y": {
    in: { opacity: 1, transform: "scaleY(1)" },
    out: { opacity: 0, transform: "scaleY(0)" },
    common: { transformOrigin: "top" },
    transitionProperty: "transform, opacity"
  },
  "scale-x": {
    in: { opacity: 1, transform: "scaleX(1)" },
    out: { opacity: 0, transform: "scaleX(0)" },
    common: { transformOrigin: "left" },
    transitionProperty: "transform, opacity"
  },
  "skew-up": {
    in: { opacity: 1, transform: "translateY(0) skew(0deg, 0deg)" },
    out: { opacity: 0, transform: `translateY(${de(-20)}) skew(-10deg, -5deg)` },
    common: { transformOrigin: "top" },
    transitionProperty: "transform, opacity"
  },
  "skew-down": {
    in: { opacity: 1, transform: "translateY(0) skew(0deg, 0deg)" },
    out: { opacity: 0, transform: `translateY(${de(20)}) skew(-10deg, -5deg)` },
    common: { transformOrigin: "bottom" },
    transitionProperty: "transform, opacity"
  },
  "rotate-left": {
    in: { opacity: 1, transform: "translateY(0) rotate(0deg)" },
    out: { opacity: 0, transform: `translateY(${de(20)}) rotate(-5deg)` },
    common: { transformOrigin: "bottom" },
    transitionProperty: "transform, opacity"
  },
  "rotate-right": {
    in: { opacity: 1, transform: "translateY(0) rotate(0deg)" },
    out: { opacity: 0, transform: `translateY(${de(20)}) rotate(5deg)` },
    common: { transformOrigin: "top" },
    transitionProperty: "transform, opacity"
  },
  "slide-down": {
    in: { opacity: 1, transform: "translateY(0)" },
    out: { opacity: 0, transform: "translateY(-100%)" },
    common: { transformOrigin: "top" },
    transitionProperty: "transform, opacity"
  },
  "slide-up": {
    in: { opacity: 1, transform: "translateY(0)" },
    out: { opacity: 0, transform: "translateY(100%)" },
    common: { transformOrigin: "bottom" },
    transitionProperty: "transform, opacity"
  },
  "slide-left": {
    in: { opacity: 1, transform: "translateX(0)" },
    out: { opacity: 0, transform: "translateX(100%)" },
    common: { transformOrigin: "left" },
    transitionProperty: "transform, opacity"
  },
  "slide-right": {
    in: { opacity: 1, transform: "translateX(0)" },
    out: { opacity: 0, transform: "translateX(-100%)" },
    common: { transformOrigin: "right" },
    transitionProperty: "transform, opacity"
  },
  pop: {
    ...Ms("bottom"),
    common: { transformOrigin: "center center" }
  },
  "pop-bottom-left": {
    ...Ms("bottom"),
    common: { transformOrigin: "bottom left" }
  },
  "pop-bottom-right": {
    ...Ms("bottom"),
    common: { transformOrigin: "bottom right" }
  },
  "pop-top-left": {
    ...Ms("top"),
    common: { transformOrigin: "top left" }
  },
  "pop-top-right": {
    ...Ms("top"),
    common: { transformOrigin: "top right" }
  }
}, Q0 = {
  entering: "in",
  entered: "in",
  exiting: "out",
  exited: "out",
  "pre-exiting": "out",
  "pre-entering": "out"
};
function QN({
  transition: e,
  state: t,
  duration: n,
  timingFunction: i
}) {
  const r = {
    transitionDuration: `${n}ms`,
    transitionTimingFunction: i
  };
  return typeof e == "string" ? e in Dl ? {
    transitionProperty: Dl[e].transitionProperty,
    ...r,
    ...Dl[e].common,
    ...Dl[e][Q0[t]]
  } : {} : {
    transitionProperty: e.transitionProperty,
    ...r,
    ...e.common,
    ...e[Q0[t]]
  };
}
function eB({
  duration: e,
  exitDuration: t,
  timingFunction: n,
  mounted: i,
  onEnter: r,
  onExit: o,
  onEntered: a,
  onExited: c
}) {
  const l = pa(), u = jO(), d = l.respectReducedMotion ? u : !1, [f, y] = oo(d ? 0 : e), [g, _] = oo(i ? "entered" : "exited"), x = Ko(-1), w = Ko(-1), D = (O) => {
    const k = O ? r : o, P = O ? a : c;
    window.clearTimeout(x.current);
    const N = d ? 0 : O ? e : t;
    y(N), N === 0 ? (typeof k == "function" && k(), typeof P == "function" && P(), _(O ? "entered" : "exited")) : w.current = requestAnimationFrame(() => {
      Xw.flushSync(() => {
        _(O ? "pre-entering" : "pre-exiting");
      }), w.current = requestAnimationFrame(() => {
        typeof k == "function" && k(), _(O ? "entering" : "exiting"), x.current = window.setTimeout(() => {
          typeof P == "function" && P(), _(O ? "entered" : "exited");
        }, N);
      });
    });
  };
  return $O(() => {
    D(i);
  }, [i]), Wi(
    () => () => {
      window.clearTimeout(x.current), cancelAnimationFrame(w.current);
    },
    []
  ), {
    transitionDuration: f,
    transitionStatus: g,
    transitionTimingFunction: n || "ease"
  };
}
function f1({
  keepMounted: e,
  transition: t = "fade",
  duration: n = 250,
  exitDuration: i = n,
  mounted: r,
  children: o,
  timingFunction: a = "ease",
  onExit: c,
  onEntered: l,
  onEnter: u,
  onExited: d
}) {
  const { transitionDuration: f, transitionStatus: y, transitionTimingFunction: g } = eB({
    mounted: r,
    exitDuration: i,
    duration: n,
    timingFunction: a,
    onExit: c,
    onEntered: l,
    onEnter: u,
    onExited: d
  });
  return f === 0 ? r ? /* @__PURE__ */ Oe.jsx(Oe.Fragment, { children: o({}) }) : e ? o({ display: "none" }) : null : y === "exited" ? e ? o({ display: "none" }) : null : /* @__PURE__ */ Oe.jsx(Oe.Fragment, { children: o(
    QN({
      transition: t,
      duration: f,
      state: y,
      timingFunction: g
    })
  ) });
}
f1.displayName = "@mantine/core/Transition";
var Hi = { root: "m_5ae2e3c", barsLoader: "m_7a2bd4cd", bar: "m_870bb79", "bars-loader-animation": "m_5d2b3b9d", dotsLoader: "m_4e3f22d7", dot: "m_870c4af", "loader-dots-animation": "m_aac34a1", ovalLoader: "m_b34414df", "oval-loader-animation": "m_f8e89c4b" };
const tB = ur(({ className: e, ...t }, n) => /* @__PURE__ */ Oe.jsxs(Fi, { component: "span", className: Yi(Hi.barsLoader, e), ...t, ref: n, children: [
  /* @__PURE__ */ Oe.jsx("span", { className: Hi.bar }),
  /* @__PURE__ */ Oe.jsx("span", { className: Hi.bar }),
  /* @__PURE__ */ Oe.jsx("span", { className: Hi.bar })
] })), nB = ur(({ className: e, ...t }, n) => /* @__PURE__ */ Oe.jsxs(Fi, { component: "span", className: Yi(Hi.dotsLoader, e), ...t, ref: n, children: [
  /* @__PURE__ */ Oe.jsx("span", { className: Hi.dot }),
  /* @__PURE__ */ Oe.jsx("span", { className: Hi.dot }),
  /* @__PURE__ */ Oe.jsx("span", { className: Hi.dot })
] })), iB = ur(({ className: e, ...t }, n) => /* @__PURE__ */ Oe.jsx(Fi, { component: "span", className: Yi(Hi.ovalLoader, e), ...t, ref: n })), d1 = {
  bars: tB,
  oval: iB,
  dots: nB
}, rB = {
  loaders: d1,
  type: "oval"
}, oB = (e, { size: t, color: n }) => ({
  root: {
    "--loader-size": Xs(t, "loader-size"),
    "--loader-color": n ? ud(n, e) : void 0
  }
}), yp = l1((e, t) => {
  const n = Js("Loader", rB, e), {
    size: i,
    color: r,
    type: o,
    vars: a,
    className: c,
    style: l,
    classNames: u,
    styles: d,
    unstyled: f,
    loaders: y,
    variant: g,
    children: _,
    ...x
  } = n, w = mp({
    name: "Loader",
    props: n,
    classes: Hi,
    className: c,
    style: l,
    classNames: u,
    styles: d,
    unstyled: f,
    vars: a,
    varsResolver: oB
  });
  return _ ? /* @__PURE__ */ Oe.jsx(Fi, { ...w("root"), ref: t, ...x, children: _ }) : /* @__PURE__ */ Oe.jsx(
    Fi,
    {
      ...w("root"),
      ref: t,
      component: y[o],
      variant: g,
      size: i,
      ...x
    }
  );
});
yp.defaultLoaders = d1;
yp.classes = Hi;
yp.displayName = "@mantine/core/Loader";
var gp = { root: "m_77c9d27d", inner: "m_80f1301b", label: "m_811560b9", section: "m_a74036a", loader: "m_a25b86ee", group: "m_80d6d844" };
const e_ = {
  orientation: "horizontal"
}, aB = (e, { borderWidth: t }) => ({
  group: { "--button-border-width": de(t) }
}), gm = l1((e, t) => {
  const n = Js("ButtonGroup", e_, e), {
    className: i,
    style: r,
    classNames: o,
    styles: a,
    unstyled: c,
    orientation: l,
    vars: u,
    borderWidth: d,
    variant: f,
    mod: y,
    ...g
  } = Js("ButtonGroup", e_, e), _ = mp({
    name: "ButtonGroup",
    props: n,
    classes: gp,
    className: i,
    style: r,
    classNames: o,
    styles: a,
    unstyled: c,
    vars: u,
    varsResolver: aB,
    rootSelector: "group"
  });
  return /* @__PURE__ */ Oe.jsx(
    Fi,
    {
      ..._("group"),
      ref: t,
      variant: f,
      mod: [{ "data-orientation": l }, y],
      role: "group",
      ...g
    }
  );
});
gm.classes = gp;
gm.displayName = "@mantine/core/ButtonGroup";
const sB = {
  in: { opacity: 1, transform: `translate(-50%, calc(-50% + ${de(1)}))` },
  out: { opacity: 0, transform: "translate(-50%, -200%)" },
  common: { transformOrigin: "center" },
  transitionProperty: "transform, opacity"
}, cB = {}, lB = (e, { radius: t, color: n, gradient: i, variant: r, size: o, justify: a, autoContrast: c }) => {
  const l = e.variantColorResolver({
    color: n || e.primaryColor,
    theme: e,
    gradient: i,
    variant: r || "filled",
    autoContrast: c
  });
  return {
    root: {
      "--button-justify": a,
      "--button-height": Xs(o, "button-height"),
      "--button-padding-x": Xs(o, "button-padding-x"),
      "--button-fz": o != null && o.includes("compact") ? z0(o.replace("compact-", "")) : z0(o),
      "--button-radius": t === void 0 ? void 0 : NO(t),
      "--button-bg": n || r ? l.background : void 0,
      "--button-hover": n || r ? l.hover : void 0,
      "--button-color": l.color,
      "--button-bd": n || r ? l.border : void 0,
      "--button-hover-color": n || r ? l.hoverColor : void 0
    }
  };
}, Uo = u1((e, t) => {
  const n = Js("Button", cB, e), {
    style: i,
    vars: r,
    className: o,
    color: a,
    disabled: c,
    children: l,
    leftSection: u,
    rightSection: d,
    fullWidth: f,
    variant: y,
    radius: g,
    loading: _,
    loaderProps: x,
    gradient: w,
    classNames: D,
    styles: O,
    unstyled: k,
    "data-disabled": P,
    autoContrast: N,
    mod: j,
    ...W
  } = n, $ = mp({
    name: "Button",
    props: n,
    classes: gp,
    className: o,
    style: i,
    classNames: D,
    styles: O,
    unstyled: k,
    vars: r,
    varsResolver: lB
  }), Z = !!u, X = !!d;
  return /* @__PURE__ */ Oe.jsxs(
    ym,
    {
      ref: t,
      ...$("root", { active: !c && !_ && !P }),
      unstyled: k,
      variant: y,
      disabled: c || _,
      mod: [
        {
          disabled: c || P,
          loading: _,
          block: f,
          "with-left-section": Z,
          "with-right-section": X
        },
        j
      ],
      ...W,
      children: [
        /* @__PURE__ */ Oe.jsx(f1, { mounted: !!_, transition: sB, duration: 150, children: (V) => /* @__PURE__ */ Oe.jsx(Fi, { component: "span", ...$("loader", { style: V }), "aria-hidden": !0, children: /* @__PURE__ */ Oe.jsx(
          yp,
          {
            color: "var(--button-color)",
            size: "calc(var(--button-height) / 1.8)",
            ...x
          }
        ) }) }),
        /* @__PURE__ */ Oe.jsxs("span", { ...$("inner"), children: [
          u && /* @__PURE__ */ Oe.jsx(Fi, { component: "span", ...$("section"), mod: { position: "left" }, children: u }),
          /* @__PURE__ */ Oe.jsx(Fi, { component: "span", mod: { loading: _ }, ...$("label"), children: l }),
          d && /* @__PURE__ */ Oe.jsx(Fi, { component: "span", ...$("section"), mod: { position: "right" }, children: d })
        ] })
      ]
    }
  );
});
Uo.classes = gp;
Uo.displayName = "@mantine/core/Button";
Uo.Group = gm;
/**
 * @license @tabler/icons-react v3.3.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */
var uB = {
  outline: {
    xmlns: "http://www.w3.org/2000/svg",
    width: 24,
    height: 24,
    viewBox: "0 0 24 24",
    fill: "none",
    stroke: "currentColor",
    strokeWidth: 2,
    strokeLinecap: "round",
    strokeLinejoin: "round"
  },
  filled: {
    xmlns: "http://www.w3.org/2000/svg",
    width: 24,
    height: 24,
    viewBox: "0 0 24 24",
    fill: "currentColor",
    stroke: "none"
  }
};
/**
 * @license @tabler/icons-react v3.3.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */
const vm = (e, t, n, i) => {
  const r = ur(
    ({ color: o = "currentColor", size: a = 24, stroke: c = 2, className: l, children: u, ...d }, f) => By(
      "svg",
      {
        ref: f,
        ...uB[e],
        width: a,
        height: a,
        className: ["tabler-icon", `tabler-icon-${t}`, l].join(" "),
        strokeWidth: c,
        stroke: o,
        ...d
      },
      [
        ...i.map(([y, g]) => By(y, g)),
        ...Array.isArray(u) ? u : [u]
      ]
    )
  );
  return r.displayName = `${n}`, r;
};
/**
 * @license @tabler/icons-react v3.3.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */
var pB = vm("outline", "viewfinder", "IconViewfinder", [["path", { d: "M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0", key: "svg-0" }], ["path", { d: "M12 3l0 4", key: "svg-1" }], ["path", { d: "M12 21l0 -3", key: "svg-2" }], ["path", { d: "M3 12l4 0", key: "svg-3" }], ["path", { d: "M21 12l-3 0", key: "svg-4" }], ["path", { d: "M12 12l0 .01", key: "svg-5" }]]);
/**
 * @license @tabler/icons-react v3.3.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */
var fB = vm("outline", "zoom-in", "IconZoomIn", [["path", { d: "M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0", key: "svg-0" }], ["path", { d: "M7 10l6 0", key: "svg-1" }], ["path", { d: "M10 7l0 6", key: "svg-2" }], ["path", { d: "M21 21l-6 -6", key: "svg-3" }]]);
/**
 * @license @tabler/icons-react v3.3.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */
var dB = vm("outline", "zoom-out", "IconZoomOut", [["path", { d: "M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0", key: "svg-0" }], ["path", { d: "M7 10l6 0", key: "svg-1" }], ["path", { d: "M21 21l-6 -6", key: "svg-2" }]]);
const h1 = ({
  zoomIn: e = () => {
  },
  zoomOut: t = () => {
  },
  zoomFit: n = () => {
  }
}) => /* @__PURE__ */ Oe.jsx(Oe.Fragment, { children: /* @__PURE__ */ Oe.jsxs(Uo.Group, { orientation: "vertical", style: { width: 40 }, children: [
  e && /* @__PURE__ */ Oe.jsx(Uo, { variant: "default", size: "compact-sm", onClick: e, children: /* @__PURE__ */ Oe.jsx(fB, { size: 17 }) }),
  t && /* @__PURE__ */ Oe.jsx(Uo, { variant: "default", size: "compact-sm", onClick: t, children: /* @__PURE__ */ Oe.jsx(dB, { size: 17 }) }),
  n && /* @__PURE__ */ Oe.jsx(Uo, { variant: "default", size: "compact-sm", onClick: n, children: /* @__PURE__ */ Oe.jsx(pB, { size: 17 }) })
] }) }), hB = ({
  useBpmnJsReact: e,
  xml: t = kO,
  height: n = 400,
  zoomActions: i = !0,
  onLoading: r = () => {
  },
  onError: o = () => {
  },
  onShown: a = () => {
  },
  click: c = () => {
  },
  dbclick: l = () => {
  },
  ...u
}, d) => {
  const f = Ko(null), [y, g] = oo(null);
  Wi(() => {
    const D = f.current, O = new ar({ container: D });
    return e == null || e.setBpmnModeler(O), g(O), () => y == null ? void 0 : y.destroy();
  }, []), Wi(() => {
    y == null || y.importXML(t), y == null || y.on("import.done", (D) => {
      const { error: O, warning: k } = D;
      if (O)
        return o(O);
      w(), a(k);
    }), y == null || y.on("element.click", (D) => {
      c(D);
    });
  }, [y, t]), qw(
    d,
    () => ({
      saveXml(D, O = { format: !1 }) {
        y.saveXML(O, D);
      },
      async saveXmlAsync(D, O = { format: !1 }) {
        return await y.saveXML(O, D);
      },
      importXml(D) {
        y == null || y.importXML(D);
      },
      getModeler() {
        return y;
      },
      getCanvas() {
        return y.get("canvas");
      },
      zoomIn(D = 0.1) {
        y.get("zoomScroll").stepZoom(D);
      },
      zoomOut(D = 0.1) {
        y.get("zoomScroll").stepZoom(-D);
      },
      zoomFit() {
        y.get("canvas").zoom("fit-viewport");
      },
      setColor(D, O) {
        y.get("modeling").setColor(D, O);
      },
      addMarker(D, O) {
        y.get("canvas").addMarker(D, O);
      },
      removeMarker(D, O) {
        y.get("canvas").removeMarker(D, O);
      }
    }),
    [y]
  );
  const _ = () => {
    y.get("zoomScroll").stepZoom(0.1);
  }, x = () => {
    y.get("zoomScroll").stepZoom(-0.1);
  }, w = () => {
    y.get("canvas").zoom("fit-viewport");
  };
  return /* @__PURE__ */ Oe.jsx(Oe.Fragment, { children: /* @__PURE__ */ Oe.jsxs("div", { className: "bpmn-wrapper", children: [
    /* @__PURE__ */ Oe.jsx(
      "div",
      {
        className: "bpmn-js-react-editor-container",
        ref: f,
        style: { height: n }
      }
    ),
    /* @__PURE__ */ Oe.jsx("div", { className: "actions-wrapper", children: i && /* @__PURE__ */ Oe.jsx(
      h1,
      {
        zoomIn: _,
        zoomOut: x,
        zoomFit: w
      }
    ) })
  ] }) });
}, mB = ur(hB);
var m1 = { exports: {} };
/*! bpmn-js - bpmn-navigated-viewer v17.6.0 | Copyright (c) 2014-present, camunda Services GmbH | bpmn.io/license */
(function(e, t) {
  (function(n, i) {
    e.exports = i();
  })(Zw, function() {
    function n(s, p) {
      p && (s.super_ = p, s.prototype = Object.create(p.prototype, { constructor: { value: s, enumerable: !1, writable: !0, configurable: !0 } }));
    }
    const i = Object.prototype.toString, r = Object.prototype.hasOwnProperty;
    function o(s) {
      return s === void 0;
    }
    function a(s) {
      return s !== void 0;
    }
    function c(s) {
      return i.call(s) === "[object Array]";
    }
    function l(s) {
      return i.call(s) === "[object Object]";
    }
    function u(s) {
      return i.call(s) === "[object Number]";
    }
    function d(s) {
      const p = i.call(s);
      return p === "[object Function]" || p === "[object AsyncFunction]" || p === "[object GeneratorFunction]" || p === "[object AsyncGeneratorFunction]" || p === "[object Proxy]";
    }
    function f(s) {
      return i.call(s) === "[object String]";
    }
    function y(s, p) {
      return r.call(s, p);
    }
    function g(s, p) {
      const h = P(p);
      let m;
      return x(s, function(v, b) {
        if (h(v, b))
          return m = v, !1;
      }), m;
    }
    function _(s, p) {
      const h = P(p);
      let m = [];
      return x(s, function(v, b) {
        h(v, b) && m.push(v);
      }), m;
    }
    function x(s, p) {
      let h, m;
      if (o(s))
        return;
      const v = c(s) ? j : N;
      for (let b in s)
        if (y(s, b) && (h = s[b], m = p(h, v(b)), m === !1))
          return h;
    }
    function w(s, p, h) {
      return x(s, function(m, v) {
        h = p(h, m, v);
      }), h;
    }
    function D(s, p) {
      return !!w(s, function(h, m, v) {
        return h && p(m, v);
      }, !0);
    }
    function O(s, p) {
      return !!g(s, p);
    }
    function k(s) {
      return function(p) {
        return D(s, function(h, m) {
          return p[m] === h;
        });
      };
    }
    function P(s) {
      return d(s) ? s : (p) => p === s;
    }
    function N(s) {
      return s;
    }
    function j(s) {
      return Number(s);
    }
    function W(s, p) {
      return s.bind(p);
    }
    function $(s, ...p) {
      return Object.assign(s, ...p);
    }
    var Z = 1e3;
    function X(s, p) {
      var h = this;
      p = p || Z, s.on(["render.shape", "render.connection"], p, function(m, v) {
        var b = m.type, S = v.element, M = v.gfx, B = v.attrs;
        if (h.canRender(S))
          return b === "render.shape" ? h.drawShape(M, S, B) : h.drawConnection(M, S, B);
      }), s.on(["render.getShapePath", "render.getConnectionPath"], p, function(m, v) {
        if (h.canRender(v))
          return m.type === "render.getShapePath" ? h.getShapePath(v) : h.getConnectionPath(v);
      });
    }
    function V(s, p) {
      var h = ie(s);
      return h && typeof h.$instanceOf == "function" && h.$instanceOf(p);
    }
    function ae(s, p) {
      return O(p, function(h) {
        return V(s, h);
      });
    }
    function ie(s) {
      return s && s.businessObject || s;
    }
    function Ae(s) {
      return s && s.di;
    }
    function Rt(s, p) {
      return !V(s, "bpmn:CallActivity") && (V(s, "bpmn:SubProcess") ? !(!(p = p || Ae(s)) || !V(p, "bpmndi:BPMNPlane")) || p && !!p.isExpanded : !V(s, "bpmn:Participant") || !!ie(s).processRef);
    }
    function it(s) {
      if (V(s, "bpmn:Participant") || V(s, "bpmn:Lane")) {
        var p = Ae(s).isHorizontal;
        return p === void 0 || p;
      }
    }
    function Ve(s) {
      return l(s) && y(s, "labelTarget");
    }
    X.prototype.canRender = function(s) {
    }, X.prototype.drawShape = function(s, p) {
    }, X.prototype.drawConnection = function(s, p) {
    }, X.prototype.getShapePath = function(s) {
    }, X.prototype.getConnectionPath = function(s) {
    };
    var Zt = { width: 90, height: 20 }, an = 15;
    function Pt(s) {
      var p = s.length / 2 - 1, h = s[Math.floor(p)], m = s[Math.ceil(p + 0.01)], v = function(B) {
        var q = B.length / 2 - 1, ee = B[Math.floor(q)], pe = B[Math.ceil(q + 0.01)];
        return { x: ee.x + (pe.x - ee.x) / 2, y: ee.y + (pe.y - ee.y) / 2 };
      }(s), b = Math.atan((m.y - h.y) / (m.x - h.x)), S = v.x, M = v.y;
      return Math.abs(b) < Math.PI / 2 ? M -= an : S += an, { x: S, y: M };
    }
    function Kt(s, p) {
      var h, m, v, b = s.label;
      return b && b.bounds ? (v = b.bounds, m = { width: Math.max(Zt.width, v.width), height: v.height }, h = { x: v.x + v.width / 2, y: v.y + v.height / 2 }) : (h = function(S) {
        return S.waypoints ? Pt(S.waypoints) : V(S, "bpmn:Group") ? { x: S.x + S.width / 2, y: S.y + Zt.height / 2 } : { x: S.x + S.width / 2, y: S.y + S.height + Zt.height / 2 };
      }(p), m = Zt), $({ x: h.x - m.width / 2, y: h.y - m.height / 2 }, m);
    }
    function oe(s) {
      var p = s.businessObject, h = function(m) {
        return V(m, "bpmn:FlowElement") || V(m, "bpmn:Participant") || V(m, "bpmn:Lane") || V(m, "bpmn:SequenceFlow") || V(m, "bpmn:MessageFlow") || V(m, "bpmn:DataInput") || V(m, "bpmn:DataOutput") ? "name" : V(m, "bpmn:TextAnnotation") ? "text" : V(m, "bpmn:Group") ? "categoryValueRef" : void 0;
      }(p);
      if (h)
        return h === "categoryValueRef" ? function(m) {
          var v = m.categoryValueRef;
          return v && v.value || "";
        }(p) : p[h] || "";
    }
    function se(s, p) {
      return p.appendChild(function(h, m) {
        if (h.ownerDocument !== m.ownerDocument)
          try {
            return m.ownerDocument.importNode(h, !0);
          } catch {
          }
        return h;
      }(s, p));
    }
    function fe(s, p) {
      return se(p, s), s;
    }
    var ct = 2, Lt = { "alignment-baseline": 1, "baseline-shift": 1, clip: 1, "clip-path": 1, "clip-rule": 1, color: 1, "color-interpolation": 1, "color-interpolation-filters": 1, "color-profile": 1, "color-rendering": 1, cursor: 1, direction: 1, display: 1, "dominant-baseline": 1, "enable-background": 1, fill: 1, "fill-opacity": 1, "fill-rule": 1, filter: 1, "flood-color": 1, "flood-opacity": 1, font: 1, "font-family": 1, "font-size": ct, "font-size-adjust": 1, "font-stretch": 1, "font-style": 1, "font-variant": 1, "font-weight": 1, "glyph-orientation-horizontal": 1, "glyph-orientation-vertical": 1, "image-rendering": 1, kerning: 1, "letter-spacing": 1, "lighting-color": 1, marker: 1, "marker-end": 1, "marker-mid": 1, "marker-start": 1, mask: 1, opacity: 1, overflow: 1, "pointer-events": 1, "shape-rendering": 1, "stop-color": 1, "stop-opacity": 1, stroke: 1, "stroke-dasharray": 1, "stroke-dashoffset": 1, "stroke-linecap": 1, "stroke-linejoin": 1, "stroke-miterlimit": 1, "stroke-opacity": 1, "stroke-width": ct, "text-anchor": 1, "text-decoration": 1, "text-rendering": 1, "unicode-bidi": 1, visibility: 1, "word-spacing": 1, "writing-mode": 1 };
    function Et(s, p, h) {
      var m = p.replace(/([a-z])([A-Z])/g, "$1-$2").toLowerCase(), v = Lt[m];
      v ? (v === ct && typeof h == "number" && (h = String(h) + "px"), s.style[m] = h) : s.setAttributeNS(null, p, h);
    }
    function Ne(s, p, h) {
      if (typeof p == "string") {
        if (h === void 0)
          return function(m, v) {
            return Lt[v] ? m.style[v] : m.getAttributeNS(null, v);
          }(s, p);
        Et(s, p, h);
      } else
        (function(m, v) {
          var b, S, M = Object.keys(v);
          for (b = 0; S = M[b]; b++)
            Et(m, S, v[S]);
        })(s, p);
      return s;
    }
    const I = Object.prototype.toString;
    function E(s) {
      return new C(s);
    }
    function C(s) {
      if (!s || !s.nodeType)
        throw new Error("A DOM element reference is required");
      this.el = s, this.list = s.classList;
    }
    function F(s) {
      var p = s.parentNode;
      return p && p.removeChild(s), s;
    }
    function K(s) {
      for (var p; p = s.firstChild; )
        F(p);
      return s;
    }
    C.prototype.add = function(s) {
      return this.list.add(s), this;
    }, C.prototype.remove = function(s) {
      return I.call(s) == "[object RegExp]" ? this.removeMatching(s) : (this.list.remove(s), this);
    }, C.prototype.removeMatching = function(s) {
      const p = this.array();
      for (let h = 0; h < p.length; h++)
        s.test(p[h]) && this.remove(p[h]);
      return this;
    }, C.prototype.toggle = function(s, p) {
      return p !== void 0 ? p !== this.list.toggle(s, p) && this.list.toggle(s) : this.list.toggle(s), this;
    }, C.prototype.array = function() {
      return Array.from(this.list);
    }, C.prototype.has = C.prototype.contains = function(s) {
      return this.list.contains(s);
    };
    var ne = { svg: "http://www.w3.org/2000/svg" }, ke = '<svg xmlns="' + ne.svg + '"';
    function Je(s) {
      var p = !1;
      s.substring(0, 4) === "<svg" ? s.indexOf(ne.svg) === -1 && (s = ke + s.substring(4)) : (s = ke + ">" + s + "</svg>", p = !0);
      var h = function(b) {
        var S;
        return (S = new DOMParser()).async = !1, S.parseFromString(b, "text/xml");
      }(s);
      if (!p)
        return h;
      for (var m = document.createDocumentFragment(), v = h.firstChild; v.firstChild; )
        m.appendChild(v.firstChild);
      return m;
    }
    function Ee(s, p) {
      var h;
      return s.charAt(0) === "<" ? (h = Je(s).firstChild, h = document.importNode(h, !0)) : h = document.createElementNS(ne.svg, s), p && Ne(h, p), h;
    }
    var at = null;
    function Mt() {
      return at === null && (at = Ee("svg")), at;
    }
    function ht(s, p) {
      var h, m, v = Object.keys(p);
      for (h = 0; m = v[h]; h++)
        s[m] = p[m];
      return s;
    }
    function In(s) {
      return Mt().createSVGTransform();
    }
    var Ii = /([&<>]{1})/g, _n = /([\n\r"]{1})/g, Be = { "&": "&amp;", "<": "&lt;", ">": "&gt;", '"': "'" };
    function ft(s, p) {
      return s.replace(p, function(h, m) {
        return Be[m] || m;
      });
    }
    function Po(s, p) {
      var h, m, v, b, S;
      switch (s.nodeType) {
        case 3:
          p.push(ft(s.textContent, Ii));
          break;
        case 1:
          if (p.push("<", s.tagName), s.hasAttributes())
            for (h = 0, m = (v = s.attributes).length; h < m; ++h)
              b = v.item(h), p.push(" ", b.name, '="', ft(b.value, _n), '"');
          if (s.hasChildNodes()) {
            for (p.push(">"), h = 0, m = (S = s.childNodes).length; h < m; ++h)
              Po(S.item(h), p);
            p.push("</", s.tagName, ">");
          } else
            p.push("/>");
          break;
        case 8:
          p.push("<!--", ft(s.nodeValue, Ii), "-->");
          break;
        case 4:
          p.push("<![CDATA[", s.nodeValue, "]]>");
          break;
        default:
          throw new Error("unable to handle node " + s.nodeType);
      }
      return p;
    }
    function Xi(s, p) {
      return function(h) {
        for (var m = h.firstChild, v = []; m; )
          Po(m, v), m = m.nextSibling;
        return v.join("");
      }(s);
    }
    function vp(s, p) {
      return p instanceof SVGMatrix ? s.createSVGTransformFromMatrix(p) : p;
    }
    function zr(s, p) {
      var h = s.transform.baseVal;
      return p && (Array.isArray(p) || (p = [p]), function(m, v) {
        var b, S;
        for (m.clear(), b = 0; S = v[b]; b++)
          m.appendItem(vp(m, S));
      }(h, p)), h.consolidate();
    }
    function Zi(s) {
      return s.flat().join(",").replace(/,?([A-z]),?/g, "$1");
    }
    function To(s) {
      return ["L", s.x, s.y];
    }
    function _p(s, p) {
      const h = s.length, m = [(v = s[0], ["M", v.x, v.y])];
      var v, b, S, M;
      for (let B = 1; B < h; B++) {
        const q = s[B - 1], ee = s[B], pe = s[B + 1];
        if (!pe || !p) {
          m.push(To(ee));
          continue;
        }
        const be = Math.min(p, rs(ee.x - q.x, ee.y - q.y), rs(pe.x - ee.x, pe.y - ee.y));
        if (!be) {
          m.push(To(ee));
          continue;
        }
        const Te = fa(ee, q, be), Re = fa(ee, q, 0.5 * be), Ie = fa(ee, pe, be), re = fa(ee, pe, 0.5 * be);
        m.push(To(Te)), m.push((S = re, M = Ie, ["C", (b = Re).x, b.y, S.x, S.y, M.x, M.y]));
      }
      return m;
    }
    function fa(s, p, h) {
      const m = p.x - s.x, v = p.y - s.y, b = h / rs(m, v);
      return { x: s.x + m * b, y: s.y + v * b };
    }
    function rs(s, p) {
      return Math.sqrt(Math.pow(s, 2) + Math.pow(p, 2));
    }
    function os(s, p, h) {
      u(p) && (h = p, p = null), p || (p = {});
      const m = Ee("path", p);
      return u(h) && (m.dataset.cornerRadius = String(h)), Mc(m, s);
    }
    function Mc(s, p) {
      return Ne(s, { d: Zi(_p(p, parseInt(s.dataset.cornerRadius, 10) || 0)) }), s;
    }
    var as = "hsl(225, 10%, 15%)", bp = "white";
    function ti(s, p) {
      return O(s.eventDefinitions, function(h) {
        return h.$type === p;
      });
    }
    function Qe(s, p, h) {
      var m = Ae(s);
      return h || m.get("color:background-color") || m.get("bioc:fill") || p || bp;
    }
    function _e(s, p, h) {
      var m = Ae(s);
      return h || m.get("color:border-color") || m.get("bioc:stroke") || p || as;
    }
    function yr(s, p, h, m) {
      var v = Ae(s).get("label");
      return m || v && v.get("color:color") || p || _e(s, h);
    }
    function gr(s, p = {}) {
      return { width: Gn(s, p), height: $n(s, p) };
    }
    function Gn(s, p = {}) {
      return y(p, "width") ? p.width : s.width;
    }
    function $n(s, p = {}) {
      return y(p, "height") ? p.height : s.height;
    }
    function Dc(s, p) {
      return p.forEach(function(h) {
        h && typeof h != "string" && !Array.isArray(h) && Object.keys(h).forEach(function(m) {
          if (m !== "default" && !(m in s)) {
            var v = Object.getOwnPropertyDescriptor(h, m);
            Object.defineProperty(s, m, v.get ? v : { enumerable: !0, get: function() {
              return h[m];
            } });
          }
        });
      }), Object.freeze(s);
    }
    const xp = Object.prototype.toString, Oc = Object.prototype.hasOwnProperty;
    function Nc(s, p) {
      return Oc.call(s, p);
    }
    function Bc(s, p) {
      let h, m;
      if (s === void 0)
        return;
      const v = function(b) {
        return xp.call(b) === "[object Array]";
      }(s) ? Lc : Ep;
      for (let b in s)
        if (Nc(s, b) && (h = s[b], m = p(h, v(b)), m === !1))
          return h;
    }
    function Ep(s) {
      return s;
    }
    function Lc(s) {
      return Number(s);
    }
    function kn(s, ...p) {
      const h = s.style;
      return Bc(p, function(m) {
        m && Bc(m, function(v, b) {
          h[b] = v;
        });
      }), s;
    }
    const wp = Object.prototype.toString;
    function ko(s) {
      return new Ji(s);
    }
    function Ji(s) {
      if (!s || !s.nodeType)
        throw new Error("A DOM element reference is required");
      this.el = s, this.list = s.classList;
    }
    function Ic(s) {
      for (var p; s.childNodes.length; )
        p = s.childNodes[0], s.removeChild(p);
      return s;
    }
    function H(s, p) {
      return s && typeof s.matches == "function" && s.matches(p);
    }
    function ue(s, p, h) {
      for (var m = h ? s : s.parentNode; m && m.nodeType !== document.DOCUMENT_NODE && m.nodeType !== document.DOCUMENT_FRAGMENT_NODE; ) {
        if (H(m, p))
          return m;
        m = m.parentNode;
      }
      return H(m, p) ? m : null;
    }
    Ji.prototype.add = function(s) {
      return this.list.add(s), this;
    }, Ji.prototype.remove = function(s) {
      return wp.call(s) == "[object RegExp]" ? this.removeMatching(s) : (this.list.remove(s), this);
    }, Ji.prototype.removeMatching = function(s) {
      const p = this.array();
      for (let h = 0; h < p.length; h++)
        s.test(p[h]) && this.remove(p[h]);
      return this;
    }, Ji.prototype.toggle = function(s, p) {
      return p !== void 0 ? p !== this.list.toggle(s, p) && this.list.toggle(s) : this.list.toggle(s), this;
    }, Ji.prototype.array = function() {
      return Array.from(this.list);
    }, Ji.prototype.has = Ji.prototype.contains = function(s) {
      return this.list.contains(s);
    };
    var Se, Ue, wt, Ct = {};
    function _t() {
      Se = window.addEventListener ? "addEventListener" : "attachEvent", Ue = window.removeEventListener ? "removeEventListener" : "detachEvent", wt = Se !== "addEventListener" ? "on" : "";
    }
    var Ke = Dc({ __proto__: null, bind: Ct.bind = function(s, p, h, m) {
      return Se || _t(), s[Se](wt + p, h, m || !1), h;
    }, unbind: Ct.unbind = function(s, p, h, m) {
      return Ue || _t(), s[Ue](wt + p, h, m || !1), h;
    }, default: Ct }, [Ct]), bn = ["focus", "blur"], It, Gt = { bind: function(s, p, h, m, v) {
      return bn.indexOf(h) !== -1 && (v = !0), Ke.bind(s, h, function(b) {
        var S = b.target || b.srcElement;
        b.delegateTarget = ue(S, p, !0), b.delegateTarget && m.call(s, b);
      }, v);
    }, unbind: function(s, p, h, m) {
      return bn.indexOf(p) !== -1 && (m = !0), Ke.unbind(s, p, h, m);
    } }, ni = function(s, p) {
      if (typeof s != "string")
        throw new TypeError("String expected");
      p || (p = document);
      var h = /<([\w:]+)/.exec(s);
      if (!h)
        return p.createTextNode(s);
      s = s.replace(/^\s+|\s+$/g, "");
      var m = h[1];
      if (m == "body")
        return (v = p.createElement("html")).innerHTML = s, v.removeChild(v.lastChild);
      var v, b = Object.prototype.hasOwnProperty.call(Dt, m) ? Dt[m] : Dt._default, S = b[0], M = b[1], B = b[2];
      for ((v = p.createElement("div")).innerHTML = M + s + B; S--; )
        v = v.lastChild;
      if (v.firstChild == v.lastChild)
        return v.removeChild(v.firstChild);
      for (var q = p.createDocumentFragment(); v.firstChild; )
        q.appendChild(v.removeChild(v.firstChild));
      return q;
    }, vr = !1;
    typeof document < "u" && ((It = document.createElement("div")).innerHTML = '  <link/><table></table><a href="/a">a</a><input type="checkbox"/>', vr = !It.getElementsByTagName("link").length, It = void 0);
    var Dt = { legend: [1, "<fieldset>", "</fieldset>"], tr: [2, "<table><tbody>", "</tbody></table>"], col: [2, "<table><tbody></tbody><colgroup>", "</colgroup></table>"], _default: vr ? [1, "X<div>", "</div>"] : [0, "", ""] };
    Dt.td = Dt.th = [3, "<table><tbody><tr>", "</tr></tbody></table>"], Dt.option = Dt.optgroup = [1, '<select multiple="multiple">', "</select>"], Dt.thead = Dt.tbody = Dt.colgroup = Dt.caption = Dt.tfoot = [1, "<table>", "</table>"], Dt.polyline = Dt.ellipse = Dt.polygon = Dt.circle = Dt.text = Dt.line = Dt.path = Dt.rect = Dt.g = [1, '<svg xmlns="http://www.w3.org/2000/svg" version="1.1">', "</svg>"];
    var $t = ni;
    function Un(s, p) {
      return (p = p || document).querySelector(s);
    }
    function da(s) {
      s.parentNode && s.parentNode.removeChild(s);
    }
    function ss(s, p, h, m, v) {
      var b = In();
      b.setTranslate(p, h);
      var S = In();
      S.setRotate(m || 0, 0, 0);
      var M = In();
      M.setScale(1, 1), zr(s, [b, S, M]);
    }
    function _m(s, p, h) {
      var m = In();
      m.setTranslate(p, h), zr(s, m);
    }
    var y1 = function(s, p) {
      return s(p = { exports: {} }, p.exports), p.exports;
    }(function(s) {
      var p = s.exports = function(h, m) {
        if (m || (m = 16), h === void 0 && (h = 128), h <= 0)
          return "0";
        for (var v = Math.log(Math.pow(2, h)) / Math.log(m), b = 2; v === 1 / 0; b *= 2)
          v = Math.log(Math.pow(2, h / b)) / Math.log(m) * b;
        var S = v - Math.floor(v), M = "";
        for (b = 0; b < Math.floor(v); b++)
          M = Math.floor(Math.random() * m).toString(m) + M;
        if (S) {
          var B = Math.pow(m, S);
          M = Math.floor(Math.random() * B).toString(m) + M;
        }
        var q = parseInt(M, m);
        return q !== 1 / 0 && q >= Math.pow(2, h) ? p(h, m) : M;
      };
      p.rack = function(h, m, v) {
        var b = function(M) {
          var B = 0;
          do {
            if (B++ > 10) {
              if (!v)
                throw new Error("too many ID collisions, use more bits");
              h += v;
            }
            var q = p(h, m);
          } while (Object.hasOwnProperty.call(S, q));
          return S[q] = M, q;
        }, S = b.hats = {};
        return b.get = function(M) {
          return b.hats[M];
        }, b.set = function(M, B) {
          return b.hats[M] = B, b;
        }, b.bits = h || 128, b.base = m || 16, b;
      };
    });
    function _r(s) {
      if (!(this instanceof _r))
        return new _r(s);
      s = s || [128, 36, 1], this._seed = s.length ? y1.rack(s[0], s[1], s[2]) : s;
    }
    _r.prototype.next = function(s) {
      return this._seed(s || !0);
    }, _r.prototype.nextPrefixed = function(s, p) {
      var h;
      do
        h = s + this.next(!0);
      while (this.assigned(h));
      return this.claim(h, p), h;
    }, _r.prototype.claim = function(s, p) {
      this._seed.set(s, p || !0);
    }, _r.prototype.assigned = function(s) {
      return this._seed.get(s) || !1;
    }, _r.prototype.unclaim = function(s) {
      delete this._seed.hats[s];
    }, _r.prototype.clear = function() {
      var s, p = this._seed.hats;
      for (s in p)
        this.unclaim(s);
    };
    var g1 = new _r(), ha = 0.95;
    function Mo(s, p, h, m, v, b, S) {
      X.call(this, p, S);
      var M = s && s.defaultFillColor, B = s && s.defaultStrokeColor, q = s && s.defaultLabelColor, ee = g1.next(), pe = {};
      function be(L) {
        return h.computeStyle(L, { strokeLinecap: "round", strokeLinejoin: "round", stroke: as, strokeWidth: 2, fill: "white" });
      }
      function Te(L) {
        return h.computeStyle(L, ["no-fill"], { strokeLinecap: "round", strokeLinejoin: "round", stroke: as, strokeWidth: 2 });
      }
      function Re(L, R) {
        var { ref: T = { x: 0, y: 0 }, scale: U = 1, element: Q } = R, xe = Ee("marker", { id: L, viewBox: "0 0 20 20", refX: T.x, refY: T.y, markerWidth: 20 * U, markerHeight: 20 * U, orient: "auto" });
        fe(xe, Q);
        var Ge = Un("defs", v._svg);
        Ge || (Ge = Ee("defs"), fe(v._svg, Ge)), fe(Ge, xe), pe[L] = xe;
      }
      function Ie(L) {
        return L.replace(/[^0-9a-zA-Z]+/g, "_");
      }
      function re(L, R, T) {
        var U = L + "-" + Ie(R) + "-" + Ie(T) + "-" + ee;
        return pe[U] || function(Q, xe, Ge, ut) {
          xe === "sequenceflow-end" && Re(Q, { element: Ee("path", { d: "M 1 5 L 11 10 L 1 15 Z", ...be({ fill: ut, stroke: ut, strokeWidth: 1 }) }), ref: { x: 11, y: 10 }, scale: 0.5 }), xe === "messageflow-start" && Re(Q, { element: Ee("circle", { cx: 6, cy: 6, r: 3.5, ...be({ fill: Ge, stroke: ut, strokeWidth: 1, strokeDasharray: [1e4, 1] }) }), ref: { x: 6, y: 6 } }), xe === "messageflow-end" && Re(Q, { element: Ee("path", { d: "m 1 5 l 0 -3 l 7 3 l -7 3 z", ...be({ fill: Ge, stroke: ut, strokeWidth: 1, strokeDasharray: [1e4, 1] }) }), ref: { x: 8.5, y: 5 } }), xe === "association-start" && Re(Q, { element: Ee("path", { d: "M 11 5 L 1 10 L 11 15", ...Te({ fill: "none", stroke: ut, strokeWidth: 1.5, strokeDasharray: [1e4, 1] }) }), ref: { x: 1, y: 10 }, scale: 0.5 }), xe === "association-end" && Re(Q, { element: Ee("path", { d: "M 1 5 L 11 10 L 1 15", ...Te({ fill: "none", stroke: ut, strokeWidth: 1.5, strokeDasharray: [1e4, 1] }) }), ref: { x: 11, y: 10 }, scale: 0.5 }), xe === "conditional-flow-marker" && Re(Q, { element: Ee("path", { d: "M 0 10 L 8 6 L 16 10 L 8 14 Z", ...be({ fill: Ge, stroke: ut }) }), ref: { x: -1, y: 10 }, scale: 0.5 }), xe === "conditional-default-flow-marker" && Re(Q, { element: Ee("path", { d: "M 6 4 L 10 16", ...be({ stroke: ut }) }), ref: { x: 0, y: 10 }, scale: 0.5 });
        }(U, L, R, T), "url(#" + U + ")";
      }
      function ve(L, R, T, U, Q = {}) {
        l(U) && (Q = U, U = 0), U = U || 0, Q = be(Q);
        var xe = Ee("circle", { cx: R / 2, cy: T / 2, r: Math.round((R + T) / 4 - U), ...Q });
        return fe(L, xe), xe;
      }
      function Y(L, R, T, U, Q, xe) {
        l(Q) && (xe = Q, Q = 0), Q = Q || 0, xe = be(xe);
        var Ge = Ee("rect", { x: Q, y: Q, width: R - 2 * Q, height: T - 2 * Q, rx: U, ry: U, ...xe });
        return fe(L, Ge), Ge;
      }
      function te(L, R, T, U) {
        var Q = os(R, T = Te(T), U);
        return fe(L, Q), Q;
      }
      function J(L, R, T) {
        return te(L, R, T, 5);
      }
      function ce(L, R, T) {
        T = Te(T);
        var U = Ee("path", { ...T, d: R });
        return fe(L, U), U;
      }
      function ge(L, R, T, U) {
        return ce(R, T, $({ "data-marker": L }, U));
      }
      function Ze(L) {
        return yi[L];
      }
      function We(L) {
        return function(R, T, U) {
          return Ze(L)(R, T, U);
        };
      }
      var De = function(L, R, T = {}, U) {
        return ce(L, m.getScaledPath("EVENT_MESSAGE", { xScaleFactor: 0.9, yScaleFactor: 0.9, containerWidth: R.width, containerHeight: R.height, position: { mx: 0.235, my: 0.315 } }), { fill: U ? _e(R, B, T.stroke) : Qe(R, M, T.fill), stroke: U ? Qe(R, M, T.fill) : _e(R, B, T.stroke), strokeWidth: 1 });
      }, Ft = function(L, R, T = {}) {
        var U = ve(L, R.width, R.height, 0.2 * R.height, { fill: Qe(R, M, T.fill), stroke: _e(R, B, T.stroke), strokeWidth: 2 });
        ce(L, m.getScaledPath("EVENT_TIMER_WH", { xScaleFactor: 0.75, yScaleFactor: 0.75, containerWidth: R.width, containerHeight: R.height, position: { mx: 0.5, my: 0.5 } }), { stroke: _e(R, B, T.stroke), strokeWidth: 2 });
        for (var Q = 0; Q < 12; Q++) {
          var xe = m.getScaledPath("EVENT_TIMER_LINE", { xScaleFactor: 0.75, yScaleFactor: 0.75, containerWidth: R.width, containerHeight: R.height, position: { mx: 0.5, my: 0.5 } }), Ge = R.width / 2, ut = R.height / 2;
          ce(L, xe, { strokeWidth: 1, stroke: _e(R, B, T.stroke), transform: "rotate(" + 30 * Q + "," + ut + "," + Ge + ")" });
        }
        return U;
      }, ye = function(L, R, T = {}, U) {
        return ce(L, m.getScaledPath("EVENT_ESCALATION", { xScaleFactor: 1, yScaleFactor: 1, containerWidth: R.width, containerHeight: R.height, position: { mx: 0.5, my: 0.2 } }), { fill: U ? _e(R, B, T.stroke) : Qe(R, M, T.fill), stroke: _e(R, B, T.stroke), strokeWidth: 1 });
      }, me = function(L, R, T = {}) {
        return ce(L, m.getScaledPath("EVENT_CONDITIONAL", { xScaleFactor: 1, yScaleFactor: 1, containerWidth: R.width, containerHeight: R.height, position: { mx: 0.5, my: 0.222 } }), { fill: Qe(R, M, T.fill), stroke: _e(R, B, T.stroke), strokeWidth: 1 });
      }, He = function(L, R, T = {}, U) {
        return ce(L, m.getScaledPath("EVENT_LINK", { xScaleFactor: 1, yScaleFactor: 1, containerWidth: R.width, containerHeight: R.height, position: { mx: 0.57, my: 0.263 } }), { fill: U ? _e(R, B, T.stroke) : Qe(R, M, T.fill), stroke: _e(R, B, T.stroke), strokeWidth: 1 });
      }, tt = function(L, R, T = {}, U) {
        return ce(L, m.getScaledPath("EVENT_ERROR", { xScaleFactor: 1.1, yScaleFactor: 1.1, containerWidth: R.width, containerHeight: R.height, position: { mx: 0.2, my: 0.722 } }), { fill: U ? _e(R, B, T.stroke) : Qe(R, M, T.fill), stroke: _e(R, B, T.stroke), strokeWidth: 1 });
      }, st = function(L, R, T = {}, U) {
        var Q = ce(L, m.getScaledPath("EVENT_CANCEL_45", { xScaleFactor: 1, yScaleFactor: 1, containerWidth: R.width, containerHeight: R.height, position: { mx: 0.638, my: -0.055 } }), { fill: U ? _e(R, B, T.stroke) : "none", stroke: _e(R, B, T.stroke), strokeWidth: 1 });
        return function(xe, Ge) {
          var ut = In();
          ut.setRotate(Ge, 0, 0), zr(xe, ut);
        }(Q, 45), Q;
      }, mi = function(L, R, T = {}, U) {
        return ce(L, m.getScaledPath("EVENT_COMPENSATION", { xScaleFactor: 1, yScaleFactor: 1, containerWidth: R.width, containerHeight: R.height, position: { mx: 0.22, my: 0.5 } }), { fill: U ? _e(R, B, T.stroke) : Qe(R, M, T.fill), stroke: _e(R, B, T.stroke), strokeWidth: 1 });
      }, Ot = function(L, R, T = {}, U) {
        return ce(L, m.getScaledPath("EVENT_SIGNAL", { xScaleFactor: 0.9, yScaleFactor: 0.9, containerWidth: R.width, containerHeight: R.height, position: { mx: 0.5, my: 0.2 } }), { strokeWidth: 1, fill: U ? _e(R, B, T.stroke) : Qe(R, M, T.fill), stroke: _e(R, B, T.stroke) });
      }, ji = function(L, R, T = {}, U) {
        return ce(L, m.getScaledPath("EVENT_MULTIPLE", { xScaleFactor: 1.1, yScaleFactor: 1.1, containerWidth: R.width, containerHeight: R.height, position: { mx: 0.222, my: 0.36 } }), { fill: U ? _e(R, B, T.stroke) : Qe(R, M, T.fill), strokeWidth: 1 });
      }, Si = function(L, R, T = {}) {
        return ce(L, m.getScaledPath("EVENT_PARALLEL_MULTIPLE", { xScaleFactor: 1.2, yScaleFactor: 1.2, containerWidth: R.width, containerHeight: R.height, position: { mx: 0.458, my: 0.194 } }), { fill: Qe(R, M, T.fill), stroke: _e(R, B, T.stroke), strokeWidth: 1 });
      }, En = function(L, R, T = {}) {
        return ve(L, R.width, R.height, 8, { fill: _e(R, B, T.stroke), stroke: _e(R, B, T.stroke), strokeWidth: 4 });
      };
      function qn(L, R, T = {}) {
        var U = ie(L), Q = function(xe) {
          return xe.$type === "bpmn:IntermediateThrowEvent" || xe.$type === "bpmn:EndEvent";
        }(U);
        return U.get("eventDefinitions") && U.get("eventDefinitions").length > 1 ? U.get("parallelMultiple") ? Si(R, L, T) : ji(R, L, T, Q) : ti(U, "bpmn:MessageEventDefinition") ? De(R, L, T, Q) : ti(U, "bpmn:TimerEventDefinition") ? Ft(R, L, T) : ti(U, "bpmn:ConditionalEventDefinition") ? me(R, L, T) : ti(U, "bpmn:SignalEventDefinition") ? Ot(R, L, T, Q) : ti(U, "bpmn:EscalationEventDefinition") ? ye(R, L, T, Q) : ti(U, "bpmn:LinkEventDefinition") ? He(R, L, T, Q) : ti(U, "bpmn:ErrorEventDefinition") ? tt(R, L, T, Q) : ti(U, "bpmn:CancelEventDefinition") ? st(R, L, T, Q) : ti(U, "bpmn:CompensateEventDefinition") ? mi(R, L, T, Q) : ti(U, "bpmn:TerminateEventDefinition") ? En(R, L, T) : null;
      }
      var St = { ParticipantMultiplicityMarker: function(L, R, T = {}) {
        var U = Gn(R, T), Q = $n(R, T);
        ge("participant-multiplicity", L, m.getScaledPath("MARKER_PARALLEL", { xScaleFactor: 1, yScaleFactor: 1, containerWidth: U, containerHeight: Q, position: { mx: (U / 2 - 6) / U, my: (Q - 15) / Q } }), { strokeWidth: 2, fill: Qe(R, M, T.fill), stroke: _e(R, B, T.stroke) });
      }, SubProcessMarker: function(L, R, T = {}) {
        _m(Y(L, 14, 14, 0, { strokeWidth: 1, fill: Qe(R, M, T.fill), stroke: _e(R, B, T.stroke) }), R.width / 2 - 7.5, R.height - 20), ge("sub-process", L, m.getScaledPath("MARKER_SUB_PROCESS", { xScaleFactor: 1.5, yScaleFactor: 1.5, containerWidth: R.width, containerHeight: R.height, position: { mx: (R.width / 2 - 7.5) / R.width, my: (R.height - 20) / R.height } }), { fill: Qe(R, M, T.fill), stroke: _e(R, B, T.stroke) });
      }, ParallelMarker: function(L, R, T) {
        var U = Gn(R, T), Q = $n(R, T);
        ge("parallel", L, m.getScaledPath("MARKER_PARALLEL", { xScaleFactor: 1, yScaleFactor: 1, containerWidth: U, containerHeight: Q, position: { mx: (U / 2 + T.parallel) / U, my: (Q - 20) / Q } }), { fill: Qe(R, M, T.fill), stroke: _e(R, B, T.stroke) });
      }, SequentialMarker: function(L, R, T) {
        ge("sequential", L, m.getScaledPath("MARKER_SEQUENTIAL", { xScaleFactor: 1, yScaleFactor: 1, containerWidth: R.width, containerHeight: R.height, position: { mx: (R.width / 2 + T.seq) / R.width, my: (R.height - 19) / R.height } }), { fill: Qe(R, M, T.fill), stroke: _e(R, B, T.stroke) });
      }, CompensationMarker: function(L, R, T) {
        ge("compensation", L, m.getScaledPath("MARKER_COMPENSATION", { xScaleFactor: 1, yScaleFactor: 1, containerWidth: R.width, containerHeight: R.height, position: { mx: (R.width / 2 + T.compensation) / R.width, my: (R.height - 13) / R.height } }), { strokeWidth: 1, fill: Qe(R, M, T.fill), stroke: _e(R, B, T.stroke) });
      }, LoopMarker: function(L, R, T) {
        var U = Gn(R, T), Q = $n(R, T);
        ge("loop", L, m.getScaledPath("MARKER_LOOP", { xScaleFactor: 1, yScaleFactor: 1, containerWidth: U, containerHeight: Q, position: { mx: (U / 2 + T.loop) / U, my: (Q - 7) / Q } }), { strokeWidth: 1.5, fill: "none", stroke: _e(R, B, T.stroke), strokeMiterlimit: 0.5 });
      }, AdhocMarker: function(L, R, T) {
        var U = Gn(R, T), Q = $n(R, T);
        ge("adhoc", L, m.getScaledPath("MARKER_ADHOC", { xScaleFactor: 1, yScaleFactor: 1, containerWidth: U, containerHeight: Q, position: { mx: (U / 2 + T.adhoc) / U, my: (Q - 15) / Q } }), { strokeWidth: 1, fill: _e(R, B, T.stroke), stroke: _e(R, B, T.stroke) });
      } };
      function lt(L, R, T, U) {
        St[L](R, T, U);
      }
      function Ea(L, R, T, U = {}) {
        U = { fill: U.fill, stroke: U.stroke, width: Gn(R, U), height: $n(R, U) };
        var Q = ie(R), xe = T && T.includes("SubProcessMarker");
        U = xe ? { ...U, seq: -21, parallel: -22, compensation: -42, loop: -18, adhoc: 10 } : { ...U, seq: -5, parallel: -6, compensation: -27, loop: 0, adhoc: 10 }, x(T, function(Yt) {
          lt(Yt, L, R, U);
        }), Q.get("isForCompensation") && lt("CompensationMarker", L, R, U), V(Q, "bpmn:AdHocSubProcess") && lt("AdhocMarker", L, R, U);
        var Ge = Q.get("loopCharacteristics"), ut = Ge && Ge.get("isSequential");
        Ge && (ut === void 0 && lt("LoopMarker", L, R, U), ut === !1 && lt("ParallelMarker", L, R, U), ut === !0 && lt("SequentialMarker", L, R, U));
      }
      function er(L, R, T = {}) {
        T = $({ size: { width: 100 } }, T);
        var U = b.createText(R || "", T);
        return E(U).add("djs-label"), fe(L, U), U;
      }
      function wa(L, R, T, U = {}) {
        var Q = ie(R), xe = gr({ x: R.x, y: R.y, width: R.width, height: R.height }, U);
        return er(L, Q.name, { align: T, box: xe, padding: 7, style: { fill: yr(R, q, B, U.stroke) } });
      }
      function tl(L, R, T, U = {}) {
        var Q = it(T), xe = er(L, R, { box: { height: 30, width: Q ? $n(T, U) : Gn(T, U) }, align: "center-middle", style: { fill: yr(T, q, B, U.stroke) } });
        Q && ss(xe, 0, -(-1 * $n(T, U)), 270);
      }
      function Hn(L, R, T = {}) {
        var { width: U, height: Q } = gr(R, T);
        return Y(L, U, Q, 10, { ...T, fill: Qe(R, M, T.fill), fillOpacity: ha, stroke: _e(R, B, T.stroke) });
      }
      function Dn(L, R, T = {}) {
        var U = ie(R), Q = Qe(R, M, T.fill), xe = _e(R, B, T.stroke);
        return U.get("associationDirection") !== "One" && U.get("associationDirection") !== "Both" || (T.markerEnd = re("association-end", Q, xe)), U.get("associationDirection") === "Both" && (T.markerStart = re("association-start", Q, xe)), T = mt(T, ["markerStart", "markerEnd"]), J(L, R.waypoints, { ...T, stroke: xe, strokeDasharray: "0, 5" });
      }
      function Ut(L, R, T = {}) {
        var U = Qe(R, M, T.fill), Q = _e(R, B, T.stroke), xe = ce(L, m.getScaledPath("DATA_OBJECT_PATH", { xScaleFactor: 1, yScaleFactor: 1, containerWidth: R.width, containerHeight: R.height, position: { mx: 0.474, my: 0.296 } }), { fill: U, fillOpacity: ha, stroke: Q });
        return function(Ge) {
          var ut = Ge.dataObjectRef;
          return Ge.isCollection || ut && ut.isCollection;
        }(ie(R)) && ce(L, m.getScaledPath("DATA_OBJECT_COLLECTION_PATH", { xScaleFactor: 1, yScaleFactor: 1, containerWidth: R.width, containerHeight: R.height, position: { mx: 0.33, my: (R.height - 18) / R.height } }), { strokeWidth: 2, fill: U, stroke: Q }), xe;
      }
      function ri(L, R, T = {}) {
        return ve(L, R.width, R.height, { fillOpacity: ha, ...T, fill: Qe(R, M, T.fill), stroke: _e(R, B, T.stroke) });
      }
      function wn(L, R, T = {}) {
        return function(U, Q, xe, Ge) {
          var ut = Q / 2, Yt = xe / 2, ms = [{ x: ut, y: 0 }, { x: Q, y: Yt }, { x: ut, y: xe }, { x: 0, y: Yt }].map(function(nl) {
            return nl.x + "," + nl.y;
          }).join(" ");
          Ge = be(Ge);
          var Kr = Ee("polygon", { ...Ge, points: ms });
          return fe(U, Kr), Kr;
        }(L, R.width, R.height, { fill: Qe(R, M, T.fill), fillOpacity: ha, stroke: _e(R, B, T.stroke) });
      }
      function Nt(L, R, T = {}) {
        var U = Y(L, Gn(R, T), $n(R, T), 0, { fill: Qe(R, M, T.fill), fillOpacity: T.fillOpacity || ha, stroke: _e(R, B, T.stroke), strokeWidth: 1.5 }), Q = ie(R);
        return V(Q, "bpmn:Lane") && tl(L, Q.get("name"), R, T), U;
      }
      function Sn(L, R, T = {}) {
        var U = Hn(L, R, T);
        (function(xe) {
          return xe && !!ie(xe).triggeredByEvent;
        })(R) && Ne(U, { strokeDasharray: "0, 5.5", strokeWidth: 2.5 });
        var Q = Rt(R);
        return wa(L, R, Q ? "center-top" : "center-middle", T), Ea(L, R, Q ? void 0 : ["SubProcessMarker"], T), U;
      }
      function xt(L, R, T = {}) {
        var U = Hn(L, R, T);
        return wa(L, R, "center-middle", T), Ea(L, R, void 0, T), U;
      }
      var yi = this.handlers = { "bpmn:AdHocSubProcess": function(L, R, T = {}) {
        return Sn(L, R, T = Rt(R) ? mt(T, ["fill", "stroke", "width", "height"]) : mt(T, ["fill", "stroke"]));
      }, "bpmn:Association": function(L, R, T = {}) {
        return Dn(L, R, T = mt(T, ["fill", "stroke"]));
      }, "bpmn:BoundaryEvent": function(L, R, T = {}) {
        var { renderIcon: U = !0 } = T;
        T = mt(T, ["fill", "stroke"]);
        var Q = ie(R).get("cancelActivity");
        T = { strokeWidth: 1.5, fill: Qe(R, M, T.fill), fillOpacity: 1, stroke: _e(R, B, T.stroke) }, Q || (T.strokeDasharray = "6");
        var xe = ri(L, R, T);
        return ve(L, R.width, R.height, 3, { ...T, fill: "none" }), U && qn(R, L, T), xe;
      }, "bpmn:BusinessRuleTask": function(L, R, T = {}) {
        var U = xt(L, R, T = mt(T, ["fill", "stroke"]));
        return Ne(ce(L, m.getScaledPath("TASK_TYPE_BUSINESS_RULE_MAIN", { abspos: { x: 8, y: 8 } })), { fill: Qe(R, M, T.fill), stroke: _e(R, B, T.stroke), strokeWidth: 1 }), Ne(ce(L, m.getScaledPath("TASK_TYPE_BUSINESS_RULE_HEADER", { abspos: { x: 8, y: 8 } })), { fill: _e(R, B, T.stroke), stroke: _e(R, B, T.stroke), strokeWidth: 1 }), U;
      }, "bpmn:CallActivity": function(L, R, T = {}) {
        return T = mt(T, ["fill", "stroke"]), Sn(L, R, { strokeWidth: 5, ...T });
      }, "bpmn:ComplexGateway": function(L, R, T = {}) {
        var U = wn(L, R, T = mt(T, ["fill", "stroke"]));
        return ce(L, m.getScaledPath("GATEWAY_COMPLEX", { xScaleFactor: 0.5, yScaleFactor: 0.5, containerWidth: R.width, containerHeight: R.height, position: { mx: 0.46, my: 0.26 } }), { fill: _e(R, B, T.stroke), stroke: _e(R, B, T.stroke), strokeWidth: 1 }), U;
      }, "bpmn:DataInput": function(L, R, T = {}) {
        T = mt(T, ["fill", "stroke"]);
        var U = m.getRawPath("DATA_ARROW"), Q = Ut(L, R, T);
        return ce(L, U, { fill: "none", stroke: _e(R, B, T.stroke), strokeWidth: 1 }), Q;
      }, "bpmn:DataInputAssociation": function(L, R, T = {}) {
        return T = mt(T, ["fill", "stroke"]), Dn(L, R, { ...T, markerEnd: re("association-end", Qe(R, M, T.fill), _e(R, B, T.stroke)) });
      }, "bpmn:DataObject": function(L, R, T = {}) {
        return Ut(L, R, T = mt(T, ["fill", "stroke"]));
      }, "bpmn:DataObjectReference": We("bpmn:DataObject"), "bpmn:DataOutput": function(L, R, T = {}) {
        T = mt(T, ["fill", "stroke"]);
        var U = m.getRawPath("DATA_ARROW"), Q = Ut(L, R, T);
        return ce(L, U, { strokeWidth: 1, fill: Qe(R, M, T.fill), stroke: _e(R, B, T.stroke) }), Q;
      }, "bpmn:DataOutputAssociation": function(L, R, T = {}) {
        return T = mt(T, ["fill", "stroke"]), Dn(L, R, { ...T, markerEnd: re("association-end", Qe(R, M, T.fill), _e(R, B, T.stroke)) });
      }, "bpmn:DataStoreReference": function(L, R, T = {}) {
        return T = mt(T, ["fill", "stroke"]), ce(L, m.getScaledPath("DATA_STORE", { xScaleFactor: 1, yScaleFactor: 1, containerWidth: R.width, containerHeight: R.height, position: { mx: 0, my: 0.133 } }), { fill: Qe(R, M, T.fill), fillOpacity: ha, stroke: _e(R, B, T.stroke), strokeWidth: 2 });
      }, "bpmn:EndEvent": function(L, R, T = {}) {
        var { renderIcon: U = !0 } = T;
        T = mt(T, ["fill", "stroke"]);
        var Q = ri(L, R, { ...T, strokeWidth: 4 });
        return U && qn(R, L, T), Q;
      }, "bpmn:EventBasedGateway": function(L, R, T = {}) {
        T = mt(T, ["fill", "stroke"]);
        var U = ie(R), Q = wn(L, R, T);
        ve(L, R.width, R.height, 0.2 * R.height, { fill: Qe(R, "none", T.fill), stroke: _e(R, B, T.stroke), strokeWidth: 1 });
        var xe = U.get("eventGatewayType"), Ge = !!U.get("instantiate");
        if (xe === "Parallel") {
          var ut = m.getScaledPath("GATEWAY_PARALLEL", { xScaleFactor: 0.4, yScaleFactor: 0.4, containerWidth: R.width, containerHeight: R.height, position: { mx: 0.474, my: 0.296 } });
          ce(L, ut, { fill: "none", stroke: _e(R, B, T.stroke), strokeWidth: 1 });
        } else
          xe === "Exclusive" && (Ge || ve(L, R.width, R.height, 0.26 * R.height, { fill: "none", stroke: _e(R, B, T.stroke), strokeWidth: 1 }), function() {
            var Yt = m.getScaledPath("GATEWAY_EVENT_BASED", { xScaleFactor: 0.18, yScaleFactor: 0.18, containerWidth: R.width, containerHeight: R.height, position: { mx: 0.36, my: 0.44 } });
            ce(L, Yt, { fill: "none", stroke: _e(R, B, T.stroke), strokeWidth: 2 });
          }());
        return Q;
      }, "bpmn:ExclusiveGateway": function(L, R, T = {}) {
        var U = wn(L, R, T = mt(T, ["fill", "stroke"])), Q = m.getScaledPath("GATEWAY_EXCLUSIVE", { xScaleFactor: 0.4, yScaleFactor: 0.4, containerWidth: R.width, containerHeight: R.height, position: { mx: 0.32, my: 0.3 } });
        return Ae(R).get("isMarkerVisible") && ce(L, Q, { fill: _e(R, B, T.stroke), stroke: _e(R, B, T.stroke), strokeWidth: 1 }), U;
      }, "bpmn:Gateway": function(L, R, T = {}) {
        return wn(L, R, T = mt(T, ["fill", "stroke"]));
      }, "bpmn:Group": function(L, R, T = {}) {
        return T = mt(T, ["fill", "stroke", "width", "height"]), Y(L, R.width, R.height, 10, { stroke: _e(R, B, T.stroke), strokeWidth: 1.5, strokeDasharray: "10, 6, 0, 6", fill: "none", pointerEvents: "none", width: Gn(R, T), height: $n(R, T) });
      }, "bpmn:InclusiveGateway": function(L, R, T = {}) {
        var U = wn(L, R, T = mt(T, ["fill", "stroke"]));
        return ve(L, R.width, R.height, 0.24 * R.height, { fill: Qe(R, M, T.fill), stroke: _e(R, B, T.stroke), strokeWidth: 2.5 }), U;
      }, "bpmn:IntermediateEvent": function(L, R, T = {}) {
        var { renderIcon: U = !0 } = T;
        T = mt(T, ["fill", "stroke"]);
        var Q = ri(L, R, { ...T, strokeWidth: 1.5 });
        return ve(L, R.width, R.height, 3, { fill: "none", stroke: _e(R, B, T.stroke), strokeWidth: 1.5 }), U && qn(R, L, T), Q;
      }, "bpmn:IntermediateCatchEvent": We("bpmn:IntermediateEvent"), "bpmn:IntermediateThrowEvent": We("bpmn:IntermediateEvent"), "bpmn:Lane": function(L, R, T = {}) {
        return T = mt(T, ["fill", "stroke", "width", "height"]), Nt(L, R, { ...T, fillOpacity: 0.25 });
      }, "bpmn:ManualTask": function(L, R, T = {}) {
        var U = xt(L, R, T = mt(T, ["fill", "stroke"]));
        return ce(L, m.getScaledPath("TASK_TYPE_MANUAL", { abspos: { x: 17, y: 15 } }), { fill: Qe(R, M, T.fill), stroke: _e(R, B, T.stroke), strokeWidth: 0.5 }), U;
      }, "bpmn:MessageFlow": function(L, R, T = {}) {
        T = mt(T, ["fill", "stroke"]);
        var U = ie(R), Q = Ae(R), xe = Qe(R, M, T.fill), Ge = _e(R, B, T.stroke), ut = J(L, R.waypoints, { markerEnd: re("messageflow-end", xe, Ge), markerStart: re("messageflow-start", xe, Ge), stroke: Ge, strokeDasharray: "10, 11", strokeWidth: 1.5 });
        if (U.get("messageRef")) {
          var Yt = ut.getPointAtLength(ut.getTotalLength() / 2), ms = m.getScaledPath("MESSAGE_FLOW_MARKER", { abspos: { x: Yt.x, y: Yt.y } }), Kr = { strokeWidth: 1 };
          Q.get("messageVisibleKind") === "initiating" ? (Kr.fill = xe, Kr.stroke = Ge) : (Kr.fill = Ge, Kr.stroke = xe);
          var nl = ce(L, ms, Kr), Oy = er(L, U.get("messageRef").get("name"), { align: "center-top", fitBox: !0, style: { fill: Ge } }), Ww = nl.getBBox(), Gw = Oy.getBBox();
          ss(Oy, Yt.x - Gw.width / 2, Yt.y + Ww.height / 2 + 10, 0);
        }
        return ut;
      }, "bpmn:ParallelGateway": function(L, R, T = {}) {
        var U = wn(L, R, T = mt(T, ["fill", "stroke"]));
        return ce(L, m.getScaledPath("GATEWAY_PARALLEL", { xScaleFactor: 0.6, yScaleFactor: 0.6, containerWidth: R.width, containerHeight: R.height, position: { mx: 0.46, my: 0.2 } }), { fill: _e(R, B, T.stroke), stroke: _e(R, B, T.stroke), strokeWidth: 1 }), U;
      }, "bpmn:Participant": function(L, R, T = {}) {
        var U = Nt(L, R, T = mt(T, ["fill", "stroke", "width", "height"])), Q = Rt(R), xe = it(R), Ge = ie(R), ut = Ge.get("name");
        if (Q)
          te(L, xe ? [{ x: 30, y: 0 }, { x: 30, y: $n(R, T) }] : [{ x: 0, y: 30 }, { x: Gn(R, T), y: 30 }], { stroke: _e(R, B, T.stroke), strokeWidth: 1.5 }), tl(L, ut, R, T);
        else {
          var Yt = gr(R, T);
          xe || (Yt.height = Gn(R, T), Yt.width = $n(R, T));
          var ms = er(L, ut, { box: Yt, align: "center-middle", style: { fill: yr(R, q, B, T.stroke) } });
          xe || ss(ms, 0, -(-1 * $n(R, T)), 270);
        }
        return Ge.get("participantMultiplicity") && lt("ParticipantMultiplicityMarker", L, R, T), U;
      }, "bpmn:ReceiveTask": function(L, R, T = {}) {
        T = mt(T, ["fill", "stroke"]);
        var U, Q = ie(R), xe = xt(L, R, T);
        return Q.get("instantiate") ? (ve(L, 28, 28, 4.4, { fill: Qe(R, M, T.fill), stroke: _e(R, B, T.stroke), strokeWidth: 1 }), U = m.getScaledPath("TASK_TYPE_INSTANTIATING_SEND", { abspos: { x: 7.77, y: 9.52 } })) : U = m.getScaledPath("TASK_TYPE_SEND", { xScaleFactor: 0.9, yScaleFactor: 0.9, containerWidth: 21, containerHeight: 14, position: { mx: 0.3, my: 0.4 } }), ce(L, U, { fill: Qe(R, M, T.fill), stroke: _e(R, B, T.stroke), strokeWidth: 1 }), xe;
      }, "bpmn:ScriptTask": function(L, R, T = {}) {
        var U = xt(L, R, T = mt(T, ["fill", "stroke"]));
        return ce(L, m.getScaledPath("TASK_TYPE_SCRIPT", { abspos: { x: 15, y: 20 } }), { fill: Qe(R, M, T.fill), stroke: _e(R, B, T.stroke), strokeWidth: 1 }), U;
      }, "bpmn:SendTask": function(L, R, T = {}) {
        var U = xt(L, R, T = mt(T, ["fill", "stroke"]));
        return ce(L, m.getScaledPath("TASK_TYPE_SEND", { xScaleFactor: 1, yScaleFactor: 1, containerWidth: 21, containerHeight: 14, position: { mx: 0.285, my: 0.357 } }), { fill: _e(R, B, T.stroke), stroke: Qe(R, M, T.fill), strokeWidth: 1 }), U;
      }, "bpmn:SequenceFlow": function(L, R, T = {}) {
        T = mt(T, ["fill", "stroke"]);
        var U = Qe(R, M, T.fill), Q = _e(R, B, T.stroke), xe = J(L, R.waypoints, { markerEnd: re("sequenceflow-end", U, Q), stroke: Q }), Ge = ie(R), { source: ut } = R;
        if (ut) {
          var Yt = ie(ut);
          Ge.get("conditionExpression") && V(Yt, "bpmn:Activity") && Ne(xe, { markerStart: re("conditional-flow-marker", U, Q) }), Yt.get("default") && (V(Yt, "bpmn:Gateway") || V(Yt, "bpmn:Activity")) && Yt.get("default") === Ge && Ne(xe, { markerStart: re("conditional-default-flow-marker", U, Q) });
        }
        return xe;
      }, "bpmn:ServiceTask": function(L, R, T = {}) {
        var U = xt(L, R, T = mt(T, ["fill", "stroke"]));
        return ve(L, 10, 10, { fill: Qe(R, M, T.fill), stroke: "none", transform: "translate(6, 6)" }), ce(L, m.getScaledPath("TASK_TYPE_SERVICE", { abspos: { x: 12, y: 18 } }), { fill: Qe(R, M, T.fill), stroke: _e(R, B, T.stroke), strokeWidth: 1 }), ve(L, 10, 10, { fill: Qe(R, M, T.fill), stroke: "none", transform: "translate(11, 10)" }), ce(L, m.getScaledPath("TASK_TYPE_SERVICE", { abspos: { x: 17, y: 22 } }), { fill: Qe(R, M, T.fill), stroke: _e(R, B, T.stroke), strokeWidth: 1 }), U;
      }, "bpmn:StartEvent": function(L, R, T = {}) {
        var { renderIcon: U = !0 } = T;
        T = mt(T, ["fill", "stroke"]), ie(R).get("isInterrupting") || (T = { ...T, strokeDasharray: "6" });
        var Q = ri(L, R, T);
        return U && qn(R, L, T), Q;
      }, "bpmn:SubProcess": function(L, R, T = {}) {
        return Sn(L, R, T = Rt(R) ? mt(T, ["fill", "stroke", "width", "height"]) : mt(T, ["fill", "stroke"]));
      }, "bpmn:Task": function(L, R, T = {}) {
        return xt(L, R, T = mt(T, ["fill", "stroke"]));
      }, "bpmn:TextAnnotation": function(L, R, T = {}) {
        T = mt(T, ["fill", "stroke", "width", "height"]);
        var { width: U, height: Q } = gr(R, T), xe = Y(L, U, Q, 0, 0, { fill: "none", stroke: "none" });
        return ce(L, m.getScaledPath("TEXT_ANNOTATION", { xScaleFactor: 1, yScaleFactor: 1, containerWidth: U, containerHeight: Q, position: { mx: 0, my: 0 } }), { stroke: _e(R, B, T.stroke) }), er(L, ie(R).get("text") || "", { align: "left-top", box: gr(R, T), padding: 7, style: { fill: yr(R, q, B, T.stroke) } }), xe;
      }, "bpmn:Transaction": function(L, R, T = {}) {
        T = Rt(R) ? mt(T, ["fill", "stroke", "width", "height"]) : mt(T, ["fill", "stroke"]);
        var U = Sn(L, R, { strokeWidth: 1.5, ...T }), Q = h.style(["no-fill", "no-events"], { stroke: _e(R, B, T.stroke), strokeWidth: 1.5 });
        return Rt(R) || (T = {}), Y(L, Gn(R, T), $n(R, T), 7, 3, Q), U;
      }, "bpmn:UserTask": function(L, R, T = {}) {
        var U = xt(L, R, T = mt(T, ["fill", "stroke"]));
        return ce(L, m.getScaledPath("TASK_TYPE_USER_1", { abspos: { x: 15, y: 12 } }), { fill: Qe(R, M, T.fill), stroke: _e(R, B, T.stroke), strokeWidth: 0.5 }), ce(L, m.getScaledPath("TASK_TYPE_USER_2", { abspos: { x: 15, y: 12 } }), { fill: Qe(R, M, T.fill), stroke: _e(R, B, T.stroke), strokeWidth: 0.5 }), ce(L, m.getScaledPath("TASK_TYPE_USER_3", { abspos: { x: 15, y: 12 } }), { fill: _e(R, B, T.stroke), stroke: _e(R, B, T.stroke), strokeWidth: 0.5 }), U;
      }, label: function(L, R, T = {}) {
        return function(U, Q, xe = {}) {
          var Ge = { width: 90, height: 30, x: Q.width / 2 + Q.x, y: Q.height / 2 + Q.y };
          return er(U, oe(Q), { box: Ge, fitBox: !0, style: $({}, b.getExternalStyle(), { fill: yr(Q, q, B, xe.stroke) }) });
        }(L, R, T);
      } };
      this._drawPath = ce, this._renderer = Ze;
    }
    function mt(s, p = []) {
      return p.reduce((h, m) => (s[m] && (h[m] = s[m]), h), {});
    }
    n(Mo, X), Mo.$inject = ["config.bpmnRenderer", "eventBus", "styles", "pathMap", "canvas", "textRenderer"], Mo.prototype.canRender = function(s) {
      return V(s, "bpmn:BaseElement");
    }, Mo.prototype.drawShape = function(s, p, h = {}) {
      var { type: m } = p;
      return this._renderer(m)(s, p, h);
    }, Mo.prototype.drawConnection = function(s, p, h = {}) {
      var { type: m } = p;
      return this._renderer(m)(s, p, h);
    }, Mo.prototype.getShapePath = function(s) {
      return V(s, "bpmn:Event") ? (h = (p = s).x + p.width / 2, m = p.y + p.height / 2, v = p.width / 2, Zi([["M", h, m], ["m", 0, -v], ["a", v, v, 0, 1, 1, 0, 2 * v], ["a", v, v, 0, 1, 1, 0, -2 * v], ["z"]])) : V(s, "bpmn:Activity") ? function(b, S) {
        var M = b.x, B = b.y, q = b.width, ee = b.height;
        return Zi([["M", M + S, B], ["l", q - 2 * S, 0], ["a", S, S, 0, 0, 1, S, S], ["l", 0, ee - 2 * S], ["a", S, S, 0, 0, 1, -S, S], ["l", 2 * S - q, 0], ["a", S, S, 0, 0, 1, -S, -S], ["l", 0, 2 * S - ee], ["a", S, S, 0, 0, 1, S, -S], ["z"]]);
      }(s, 10) : V(s, "bpmn:Gateway") ? function(b) {
        var S = b.width / 2, M = b.height / 2;
        return Zi([["M", b.x + S, b.y], ["l", S, M], ["l", -S, M], ["l", -S, -M], ["z"]]);
      }(s) : function(b) {
        var S = b.x, M = b.y, B = b.width;
        return Zi([["M", S, M], ["l", B, 0], ["l", 0, b.height], ["l", -B, 0], ["z"]]);
      }(s);
      var p, h, m, v;
    };
    var v1 = 0, _1 = { width: 150, height: 50 };
    function b1(s, p) {
      var h;
      p.textContent = s;
      try {
        var m, v = s === "";
        return p.textContent = v ? "dummy" : s, m = { width: (h = p.getBBox()).width + 2 * h.x, height: h.height }, v && (m.width = 0), m;
      } catch {
        return { width: 0, height: 0 };
      }
    }
    function x1(s, p, h) {
      for (var m, v = s.shift(), b = v; ; ) {
        if ((m = b1(b, h)).width = b ? m.width : 0, b === " " || b === "" || m.width < Math.round(p) || b.length < 2)
          return E1(s, b, v, m);
        b = w1(b, m.width, p);
      }
    }
    function E1(s, p, h, m) {
      if (p.length < h.length) {
        var v = h.slice(p.length).trim();
        s.unshift(v);
      }
      return { width: m.width, height: m.height, text: p };
    }
    var bm = "";
    function w1(s, p, h) {
      var m = Math.max(s.length * (h / p), 1), v = function(b, S) {
        var M, B = b.split(/(\s|-|\u00AD)/g), q = [], ee = 0;
        if (B.length > 1)
          for (; M = B.shift(); ) {
            if (!(M.length + ee < S)) {
              M !== "-" && M !== bm || q.pop();
              break;
            }
            q.push(M), ee += M.length;
          }
        var pe = q[q.length - 1];
        return pe && pe === bm && (q[q.length - 1] = "-"), q.join("");
      }(s, m);
      return v || (v = s.slice(0, Math.max(Math.round(m - 1), 1))), v;
    }
    function $c(s) {
      this._config = $({}, { size: _1, padding: v1, style: {}, align: "center-top" }, s || {});
    }
    $c.prototype.createText = function(s, p) {
      return this.layoutText(s, p).element;
    }, $c.prototype.getDimensions = function(s, p) {
      return this.layoutText(s, p).dimensions;
    }, $c.prototype.layoutText = function(s, p) {
      var h = $({}, this._config.size, p.box), m = $({}, this._config.style, p.style), v = function(re) {
        var ve = re.split("-");
        return { horizontal: ve[0] || "center", vertical: ve[1] || "top" };
      }(p.align || this._config.align), b = function(re) {
        return l(re) ? $({ top: 0, left: 0, right: 0, bottom: 0 }, re) : { top: re, left: re, right: re, bottom: re };
      }(p.padding !== void 0 ? p.padding : this._config.padding), S = p.fitBox || !1, M = function(re) {
        if ("fontSize" in re && "lineHeight" in re)
          return re.lineHeight * parseInt(re.fontSize, 10);
      }(m), B = s.split(/\u00AD?\r?\n/), q = [], ee = h.width - b.left - b.right, pe = Ee("text");
      for (Ne(pe, { x: 0, y: 0 }), Ne(pe, m), fe(function() {
        var re = document.getElementById("helper-svg");
        return re || (Ne(re = Ee("svg"), { id: "helper-svg" }), kn(re, { visibility: "hidden", position: "fixed", width: 0, height: 0 }), document.body.appendChild(re)), re;
      }(), pe); B.length; )
        q.push(x1(B, ee, pe));
      v.vertical === "middle" && (b.top = b.bottom = 0);
      var be = w(q, function(re, ve, Y) {
        return re + (M || ve.height);
      }, 0) + b.top + b.bottom, Te = w(q, function(re, ve, Y) {
        return ve.width > re ? ve.width : re;
      }, 0), Re = b.top;
      v.vertical === "middle" && (Re += (h.height - be) / 2), Re -= (M || q[0].height) / 4;
      var Ie = Ee("text");
      return Ne(Ie, m), x(q, function(re) {
        var ve;
        switch (Re += M || re.height, v.horizontal) {
          case "left":
            ve = b.left;
            break;
          case "right":
            ve = (S ? Te : ee) - b.right - re.width;
            break;
          default:
            ve = Math.max(((S ? Te : ee) - re.width) / 2 + b.left, 0);
        }
        var Y = Ee("tspan");
        Ne(Y, { x: ve, y: Re }), Y.textContent = re.text, fe(Ie, Y);
      }), F(pe), { dimensions: { width: Te, height: be }, element: Ie };
    };
    function xm(s) {
      var p = $({ fontFamily: "Arial, sans-serif", fontSize: 12, fontWeight: "normal", lineHeight: 1.2 }, s && s.defaultStyle || {}), h = parseInt(p.fontSize, 10) - 1, m = $({}, p, { fontSize: h }, s && s.externalStyle || {}), v = new $c({ style: p });
      this.getExternalLabelBounds = function(b, S) {
        var M = v.getDimensions(S, { box: { width: 90, height: 30 }, style: m });
        return { x: Math.round(b.x + b.width / 2 - M.width / 2), y: Math.round(b.y), width: Math.ceil(M.width), height: Math.ceil(M.height) };
      }, this.getTextAnnotationBounds = function(b, S) {
        var M = v.getDimensions(S, { box: b, style: p, align: "left-top", padding: 5 });
        return { x: b.x, y: b.y, width: b.width, height: Math.max(30, Math.round(M.height)) };
      }, this.createText = function(b, S) {
        return v.createText(b, S || {});
      }, this.getDefaultStyle = function() {
        return p;
      }, this.getExternalStyle = function() {
        return m;
      };
    }
    xm.$inject = ["config.textRenderer"];
    var S1 = /\{([^{}]+)\}/g, R1 = /(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g, C1 = { __init__: ["bpmnRenderer"], bpmnRenderer: ["type", Mo], textRenderer: ["type", xm], pathMap: ["type", function() {
      this.pathMap = { EVENT_MESSAGE: { d: "m {mx},{my} l 0,{e.y1} l {e.x1},0 l 0,-{e.y1} z l {e.x0},{e.y0} l {e.x0},-{e.y0}", height: 36, width: 36, heightElements: [6, 14], widthElements: [10.5, 21] }, EVENT_SIGNAL: { d: "M {mx},{my} l {e.x0},{e.y0} l -{e.x1},0 Z", height: 36, width: 36, heightElements: [18], widthElements: [10, 20] }, EVENT_ESCALATION: { d: "M {mx},{my} l {e.x0},{e.y0} l -{e.x0},-{e.y1} l -{e.x0},{e.y1} Z", height: 36, width: 36, heightElements: [20, 7], widthElements: [8] }, EVENT_CONDITIONAL: { d: "M {e.x0},{e.y0} l {e.x1},0 l 0,{e.y2} l -{e.x1},0 Z M {e.x2},{e.y3} l {e.x0},0 M {e.x2},{e.y4} l {e.x0},0 M {e.x2},{e.y5} l {e.x0},0 M {e.x2},{e.y6} l {e.x0},0 M {e.x2},{e.y7} l {e.x0},0 M {e.x2},{e.y8} l {e.x0},0 ", height: 36, width: 36, heightElements: [8.5, 14.5, 18, 11.5, 14.5, 17.5, 20.5, 23.5, 26.5], widthElements: [10.5, 14.5, 12.5] }, EVENT_LINK: { d: "m {mx},{my} 0,{e.y0} -{e.x1},0 0,{e.y1} {e.x1},0 0,{e.y0} {e.x0},-{e.y2} -{e.x0},-{e.y2} z", height: 36, width: 36, heightElements: [4.4375, 6.75, 7.8125], widthElements: [9.84375, 13.5] }, EVENT_ERROR: { d: "m {mx},{my} {e.x0},-{e.y0} {e.x1},-{e.y1} {e.x2},{e.y2} {e.x3},-{e.y3} -{e.x4},{e.y4} -{e.x5},-{e.y5} z", height: 36, width: 36, heightElements: [0.023, 8.737, 8.151, 16.564, 10.591, 8.714], widthElements: [0.085, 6.672, 6.97, 4.273, 5.337, 6.636] }, EVENT_CANCEL_45: { d: "m {mx},{my} -{e.x1},0 0,{e.x0} {e.x1},0 0,{e.y1} {e.x0},0 0,-{e.y1} {e.x1},0 0,-{e.y0} -{e.x1},0 0,-{e.y1} -{e.x0},0 z", height: 36, width: 36, heightElements: [4.75, 8.5], widthElements: [4.75, 8.5] }, EVENT_COMPENSATION: { d: "m {mx},{my} {e.x0},-{e.y0} 0,{e.y1} z m {e.x1},-{e.y2} {e.x2},-{e.y3} 0,{e.y1} -{e.x2},-{e.y3} z", height: 36, width: 36, heightElements: [6.5, 13, 0.4, 6.1], widthElements: [9, 9.3, 8.7] }, EVENT_TIMER_WH: { d: "M {mx},{my} l {e.x0},-{e.y0} m -{e.x0},{e.y0} l {e.x1},{e.y1} ", height: 36, width: 36, heightElements: [10, 2], widthElements: [3, 7] }, EVENT_TIMER_LINE: { d: "M {mx},{my} m {e.x0},{e.y0} l -{e.x1},{e.y1} ", height: 36, width: 36, heightElements: [10, 3], widthElements: [0, 0] }, EVENT_MULTIPLE: { d: "m {mx},{my} {e.x1},-{e.y0} {e.x1},{e.y0} -{e.x0},{e.y1} -{e.x2},0 z", height: 36, width: 36, heightElements: [6.28099, 12.56199], widthElements: [3.1405, 9.42149, 12.56198] }, EVENT_PARALLEL_MULTIPLE: { d: "m {mx},{my} {e.x0},0 0,{e.y1} {e.x1},0 0,{e.y0} -{e.x1},0 0,{e.y1} -{e.x0},0 0,-{e.y1} -{e.x1},0 0,-{e.y0} {e.x1},0 z", height: 36, width: 36, heightElements: [2.56228, 7.68683], widthElements: [2.56228, 7.68683] }, GATEWAY_EXCLUSIVE: { d: "m {mx},{my} {e.x0},{e.y0} {e.x1},{e.y0} {e.x2},0 {e.x4},{e.y2} {e.x4},{e.y1} {e.x2},0 {e.x1},{e.y3} {e.x0},{e.y3} {e.x3},0 {e.x5},{e.y1} {e.x5},{e.y2} {e.x3},0 z", height: 17.5, width: 17.5, heightElements: [8.5, 6.5312, -6.5312, -8.5], widthElements: [6.5, -6.5, 3, -3, 5, -5] }, GATEWAY_PARALLEL: { d: "m {mx},{my} 0,{e.y1} -{e.x1},0 0,{e.y0} {e.x1},0 0,{e.y1} {e.x0},0 0,-{e.y1} {e.x1},0 0,-{e.y0} -{e.x1},0 0,-{e.y1} -{e.x0},0 z", height: 30, width: 30, heightElements: [5, 12.5], widthElements: [5, 12.5] }, GATEWAY_EVENT_BASED: { d: "m {mx},{my} {e.x0},{e.y0} {e.x0},{e.y1} {e.x1},{e.y2} {e.x2},0 z", height: 11, width: 11, heightElements: [-6, 6, 12, -12], widthElements: [9, -3, -12] }, GATEWAY_COMPLEX: { d: "m {mx},{my} 0,{e.y0} -{e.x0},-{e.y1} -{e.x1},{e.y2} {e.x0},{e.y1} -{e.x2},0 0,{e.y3} {e.x2},0  -{e.x0},{e.y1} l {e.x1},{e.y2} {e.x0},-{e.y1} 0,{e.y0} {e.x3},0 0,-{e.y0} {e.x0},{e.y1} {e.x1},-{e.y2} -{e.x0},-{e.y1} {e.x2},0 0,-{e.y3} -{e.x2},0 {e.x0},-{e.y1} -{e.x1},-{e.y2} -{e.x0},{e.y1} 0,-{e.y0} -{e.x3},0 z", height: 17.125, width: 17.125, heightElements: [4.875, 3.4375, 2.125, 3], widthElements: [3.4375, 2.125, 4.875, 3] }, DATA_OBJECT_PATH: { d: "m 0,0 {e.x1},0 {e.x0},{e.y0} 0,{e.y1} -{e.x2},0 0,-{e.y2} {e.x1},0 0,{e.y0} {e.x0},0", height: 61, width: 51, heightElements: [10, 50, 60], widthElements: [10, 40, 50, 60] }, DATA_OBJECT_COLLECTION_PATH: { d: "m{mx},{my} m 3,2 l 0,10 m 3,-10 l 0,10 m 3,-10 l 0,10", height: 10, width: 10, heightElements: [], widthElements: [] }, DATA_ARROW: { d: "m 5,9 9,0 0,-3 5,5 -5,5 0,-3 -9,0 z", height: 61, width: 51, heightElements: [], widthElements: [] }, DATA_STORE: { d: "m  {mx},{my} l  0,{e.y2} c  {e.x0},{e.y1} {e.x1},{e.y1}  {e.x2},0 l  0,-{e.y2} c -{e.x0},-{e.y1} -{e.x1},-{e.y1} -{e.x2},0c  {e.x0},{e.y1} {e.x1},{e.y1}  {e.x2},0 m  -{e.x2},{e.y0}c  {e.x0},{e.y1} {e.x1},{e.y1} {e.x2},0m  -{e.x2},{e.y0}c  {e.x0},{e.y1} {e.x1},{e.y1}  {e.x2},0", height: 61, width: 61, heightElements: [7, 10, 45], widthElements: [2, 58, 60] }, TEXT_ANNOTATION: { d: "m {mx}, {my} m 10,0 l -10,0 l 0,{e.y0} l 10,0", height: 30, width: 10, heightElements: [30], widthElements: [10] }, MARKER_SUB_PROCESS: { d: "m{mx},{my} m 7,2 l 0,10 m -5,-5 l 10,0", height: 10, width: 10, heightElements: [], widthElements: [] }, MARKER_PARALLEL: { d: "m{mx},{my} m 3,2 l 0,10 m 3,-10 l 0,10 m 3,-10 l 0,10", height: 10, width: 10, heightElements: [], widthElements: [] }, MARKER_SEQUENTIAL: { d: "m{mx},{my} m 0,3 l 10,0 m -10,3 l 10,0 m -10,3 l 10,0", height: 10, width: 10, heightElements: [], widthElements: [] }, MARKER_COMPENSATION: { d: "m {mx},{my} 7,-5 0,10 z m 7.1,-0.3 6.9,-4.7 0,10 -6.9,-4.7 z", height: 10, width: 21, heightElements: [], widthElements: [] }, MARKER_LOOP: { d: "m {mx},{my} c 3.526979,0 6.386161,-2.829858 6.386161,-6.320661 0,-3.490806 -2.859182,-6.320661 -6.386161,-6.320661 -3.526978,0 -6.38616,2.829855 -6.38616,6.320661 0,1.745402 0.714797,3.325567 1.870463,4.469381 0.577834,0.571908 1.265885,1.034728 2.029916,1.35457 l -0.718163,-3.909793 m 0.718163,3.909793 -3.885211,0.802902", height: 13.9, width: 13.7, heightElements: [], widthElements: [] }, MARKER_ADHOC: { d: "m {mx},{my} m 0.84461,2.64411 c 1.05533,-1.23780996 2.64337,-2.07882 4.29653,-1.97997996 2.05163,0.0805 3.85579,1.15803 5.76082,1.79107 1.06385,0.34139996 2.24454,0.1438 3.18759,-0.43767 0.61743,-0.33642 1.2775,-0.64078 1.7542,-1.17511 0,0.56023 0,1.12046 0,1.6807 -0.98706,0.96237996 -2.29792,1.62393996 -3.6918,1.66181996 -1.24459,0.0927 -2.46671,-0.2491 -3.59505,-0.74812 -1.35789,-0.55965 -2.75133,-1.33436996 -4.27027,-1.18121996 -1.37741,0.14601 -2.41842,1.13685996 -3.44288,1.96782996 z", height: 4, width: 15, heightElements: [], widthElements: [] }, TASK_TYPE_SEND: { d: "m {mx},{my} l 0,{e.y1} l {e.x1},0 l 0,-{e.y1} z l {e.x0},{e.y0} l {e.x0},-{e.y0}", height: 14, width: 21, heightElements: [6, 14], widthElements: [10.5, 21] }, TASK_TYPE_SCRIPT: { d: "m {mx},{my} c 9.966553,-6.27276 -8.000926,-7.91932 2.968968,-14.938 l -8.802728,0 c -10.969894,7.01868 6.997585,8.66524 -2.968967,14.938 z m -7,-12 l 5,0 m -4.5,3 l 4.5,0 m -3,3 l 5,0m -4,3 l 5,0", height: 15, width: 12.6, heightElements: [6, 14], widthElements: [10.5, 21] }, TASK_TYPE_USER_1: { d: "m {mx},{my} c 0.909,-0.845 1.594,-2.049 1.594,-3.385 0,-2.554 -1.805,-4.62199999 -4.357,-4.62199999 -2.55199998,0 -4.28799998,2.06799999 -4.28799998,4.62199999 0,1.348 0.974,2.562 1.89599998,3.405 -0.52899998,0.187 -5.669,2.097 -5.794,4.7560005 v 6.718 h 17 v -6.718 c 0,-2.2980005 -5.5279996,-4.5950005 -6.0509996,-4.7760005 zm -8,6 l 0,5.5 m 11,0 l 0,-5" }, TASK_TYPE_USER_2: { d: "m {mx},{my} m 2.162,1.009 c 0,2.4470005 -2.158,4.4310005 -4.821,4.4310005 -2.66499998,0 -4.822,-1.981 -4.822,-4.4310005 " }, TASK_TYPE_USER_3: { d: "m {mx},{my} m -6.9,-3.80 c 0,0 2.25099998,-2.358 4.27399998,-1.177 2.024,1.181 4.221,1.537 4.124,0.965 -0.098,-0.57 -0.117,-3.79099999 -4.191,-4.13599999 -3.57499998,0.001 -4.20799998,3.36699999 -4.20699998,4.34799999 z" }, TASK_TYPE_MANUAL: { d: "m {mx},{my} c 0.234,-0.01 5.604,0.008 8.029,0.004 0.808,0 1.271,-0.172 1.417,-0.752 0.227,-0.898 -0.334,-1.314 -1.338,-1.316 -2.467,-0.01 -7.886,-0.004 -8.108,-0.004 -0.014,-0.079 0.016,-0.533 0,-0.61 0.195,-0.042 8.507,0.006 9.616,0.002 0.877,-0.007 1.35,-0.438 1.353,-1.208 0.003,-0.768 -0.479,-1.09 -1.35,-1.091 -2.968,-0.002 -9.619,-0.013 -9.619,-0.013 v -0.591 c 0,0 5.052,-0.016 7.225,-0.016 0.888,-0.002 1.354,-0.416 1.351,-1.193 -0.006,-0.761 -0.492,-1.196 -1.361,-1.196 -3.473,-0.005 -10.86,-0.003 -11.0829995,-0.003 -0.022,-0.047 -0.045,-0.094 -0.069,-0.139 0.3939995,-0.319 2.0409995,-1.626 2.4149995,-2.017 0.469,-0.4870005 0.519,-1.1650005 0.162,-1.6040005 -0.414,-0.511 -0.973,-0.5 -1.48,-0.236 -1.4609995,0.764 -6.5999995,3.6430005 -7.7329995,4.2710005 -0.9,0.499 -1.516,1.253 -1.882,2.19 -0.37000002,0.95 -0.17,2.01 -0.166,2.979 0.004,0.718 -0.27300002,1.345 -0.055,2.063 0.629,2.087 2.425,3.312 4.859,3.318 4.6179995,0.014 9.2379995,-0.139 13.8569995,-0.158 0.755,-0.004 1.171,-0.301 1.182,-1.033 0.012,-0.754 -0.423,-0.969 -1.183,-0.973 -1.778,-0.01 -5.824,-0.004 -6.04,-0.004 10e-4,-0.084 0.003,-0.586 10e-4,-0.67 z" }, TASK_TYPE_INSTANTIATING_SEND: { d: "m {mx},{my} l 0,8.4 l 12.6,0 l 0,-8.4 z l 6.3,3.6 l 6.3,-3.6" }, TASK_TYPE_SERVICE: { d: "m {mx},{my} v -1.71335 c 0.352326,-0.0705 0.703932,-0.17838 1.047628,-0.32133 0.344416,-0.14465 0.665822,-0.32133 0.966377,-0.52145 l 1.19431,1.18005 1.567487,-1.57688 -1.195028,-1.18014 c 0.403376,-0.61394 0.683079,-1.29908 0.825447,-2.01824 l 1.622133,-0.01 v -2.2196 l -1.636514,0.01 c -0.07333,-0.35153 -0.178319,-0.70024 -0.323564,-1.04372 -0.145244,-0.34406 -0.321407,-0.6644 -0.522735,-0.96217 l 1.131035,-1.13631 -1.583305,-1.56293 -1.129598,1.13589 c -0.614052,-0.40108 -1.302883,-0.68093 -2.022633,-0.82247 l 0.0093,-1.61852 h -2.241173 l 0.0042,1.63124 c -0.353763,0.0736 -0.705369,0.17977 -1.049785,0.32371 -0.344415,0.14437 -0.665102,0.32092 -0.9635006,0.52046 l -1.1698628,-1.15823 -1.5667691,1.5792 1.1684265,1.15669 c -0.4026573,0.61283 -0.68308,1.29797 -0.8247287,2.01713 l -1.6588041,0.003 v 2.22174 l 1.6724648,-0.006 c 0.073327,0.35077 0.1797598,0.70243 0.3242851,1.04472 0.1452428,0.34448 0.3214064,0.6644 0.5227339,0.96066 l -1.1993431,1.19723 1.5840256,1.56011 1.1964668,-1.19348 c 0.6140517,0.40346 1.3028827,0.68232 2.0233517,0.82331 l 7.19e-4,1.69892 h 2.226848 z m 0.221462,-3.9957 c -1.788948,0.7502 -3.8576,-0.0928 -4.6097055,-1.87438 -0.7521065,-1.78321 0.090598,-3.84627 1.8802645,-4.59604 1.78823,-0.74936 3.856881,0.0929 4.608987,1.87437 0.752106,1.78165 -0.0906,3.84612 -1.879546,4.59605 z" }, TASK_TYPE_SERVICE_FILL: { d: "m {mx},{my} c -1.788948,0.7502 -3.8576,-0.0928 -4.6097055,-1.87438 -0.7521065,-1.78321 0.090598,-3.84627 1.8802645,-4.59604 1.78823,-0.74936 3.856881,0.0929 4.608987,1.87437 0.752106,1.78165 -0.0906,3.84612 -1.879546,4.59605 z" }, TASK_TYPE_BUSINESS_RULE_HEADER: { d: "m {mx},{my} 0,4 20,0 0,-4 z" }, TASK_TYPE_BUSINESS_RULE_MAIN: { d: "m {mx},{my} 0,12 20,0 0,-12 zm 0,8 l 20,0 m -13,-4 l 0,8" }, MESSAGE_FLOW_MARKER: { d: "m {mx},{my} m -10.5 ,-7 l 0,14 l 21,0 l 0,-14 z l 10.5,6 l 10.5,-6" } }, this.getRawPath = function(s) {
        return this.pathMap[s].d;
      }, this.getScaledPath = function(s, p) {
        var h, m, v = this.pathMap[s];
        p.abspos ? (h = p.abspos.x, m = p.abspos.y) : (h = p.containerWidth * p.position.mx, m = p.containerHeight * p.position.my);
        var b = {};
        if (p.position) {
          for (var S = p.containerHeight / v.height * p.yScaleFactor, M = p.containerWidth / v.width * p.xScaleFactor, B = 0; B < v.heightElements.length; B++)
            b["y" + B] = v.heightElements[B] * S;
          for (var q = 0; q < v.widthElements.length; q++)
            b["x" + q] = v.widthElements[q] * M;
        }
        var ee, pe, be = (ee = v.d, pe = { mx: h, my: m, e: b }, String(ee).replace(S1, function(Te, Re) {
          return function(Ie, re, ve) {
            var Y = ve;
            return re.replace(R1, function(te, J, ce, ge, Ze) {
              J = J || ge, Y && (J in Y && (Y = Y[J]), typeof Y == "function" && Ze && (Y = Y()));
            }), Y = (Y == null || Y == ve ? Ie : Y) + "";
          }(Te, Re, pe);
        }));
        return be;
      };
    }] }, Em = { translate: ["value", function(s, p) {
      return p = p || {}, s.replace(/{([^}]+)}/g, function(h, m) {
        return p[m] || "{" + m + "}";
      });
    }] };
    function Sp(s) {
      return { top: s.y, right: s.x + (s.width || 0), bottom: s.y + (s.height || 0), left: s.x };
    }
    function A1(s) {
      return p = { x: s.x + (s.width || 0) / 2, y: s.y + (s.height || 0) / 2 }, { x: Math.round(p.x), y: Math.round(p.y) };
      var p;
    }
    function P1(s) {
      for (var p = s.waypoints, h = p.reduce(function(B, q, ee) {
        var pe, be, Te = p[ee - 1];
        if (Te) {
          var Re = B[B.length - 1], Ie = Re && Re.endLength || 0, re = (pe = Te, be = q, Math.sqrt(Math.pow(pe.x - be.x, 2) + Math.pow(pe.y - be.y, 2)));
          B.push({ start: Te, end: q, startLength: Ie, endLength: Ie + re, length: re });
        }
        return B;
      }, []), m = h.reduce(function(B, q) {
        return B + q.length;
      }, 0), v = m / 2, b = 0, S = h[b]; S.endLength < v; )
        S = h[++b];
      var M = (v - S.startLength) / S.length;
      return { x: S.start.x + (S.end.x - S.start.x) * M, y: S.start.y + (S.end.y - S.start.y) * M };
    }
    function Rp(s) {
      return l(p = s) && y(p, "waypoints") ? P1(s) : A1(s);
      var p;
    }
    function Mn(s) {
      return s ? "<" + s.$type + (s.id ? ' id="' + s.id : "") + '" />' : "<null>";
    }
    function jc(s, p, h) {
      return $({ id: s.id, type: s.$type, businessObject: s, di: p }, h);
    }
    function T1(s, p, h) {
      var m = s.waypoint;
      return !m || m.length < 2 ? [Rp(p), Rp(h)] : m.map(function(v) {
        return { x: v.x, y: v.y };
      });
    }
    function wm(s, p, h) {
      return new Error(`element ${Mn(p)} referenced by ${Mn(s)}#${h} not yet drawn`);
    }
    function br(s, p, h, m, v) {
      this._eventBus = s, this._canvas = p, this._elementFactory = h, this._elementRegistry = m, this._textRenderer = v;
    }
    br.$inject = ["eventBus", "canvas", "elementFactory", "elementRegistry", "textRenderer"], br.prototype.add = function(s, p, h) {
      var m, v, b, S, M, B, q;
      if (V(p, "bpmndi:BPMNPlane")) {
        var ee = V(s, "bpmn:SubProcess") ? { id: s.id + "_plane" } : {};
        m = this._elementFactory.createRoot(jc(s, p, ee)), this._canvas.addRootElement(m);
      } else if (V(p, "bpmndi:BPMNShape")) {
        var pe = !Rt(s, p), be = function(re) {
          return V(re, "bpmn:Group");
        }(s);
        v = h && (h.hidden || h.collapsed);
        var Te = p.bounds;
        m = this._elementFactory.createShape(jc(s, p, { collapsed: pe, hidden: v, x: Math.round(Te.x), y: Math.round(Te.y), width: Math.round(Te.width), height: Math.round(Te.height), isFrame: be })), V(s, "bpmn:BoundaryEvent") && this._attachBoundary(s, m), V(s, "bpmn:Lane") && (b = 0), V(s, "bpmn:DataStoreReference") && (S = h, M = Rp(Te), B = M.x, q = M.y, B >= S.x && B <= S.x + S.width && q >= S.y && q <= S.y + S.height || (h = this._canvas.findRoot(h))), this._canvas.addShape(m, h, b);
      } else {
        if (!V(p, "bpmndi:BPMNEdge"))
          throw new Error(`unknown di ${Mn(p)} for element ${Mn(s)}`);
        var Re = this._getSource(s), Ie = this._getTarget(s);
        v = h && (h.hidden || h.collapsed), m = this._elementFactory.createConnection(jc(s, p, { hidden: v, source: Re, target: Ie, waypoints: T1(p, Re, Ie) })), V(s, "bpmn:DataAssociation") && (h = this._canvas.findRoot(h)), this._canvas.addConnection(m, h, b);
      }
      return function(re) {
        return V(re, "bpmn:Event") || V(re, "bpmn:Gateway") || V(re, "bpmn:DataStoreReference") || V(re, "bpmn:DataObjectReference") || V(re, "bpmn:DataInput") || V(re, "bpmn:DataOutput") || V(re, "bpmn:SequenceFlow") || V(re, "bpmn:MessageFlow") || V(re, "bpmn:Group");
      }(s) && oe(m) && this.addLabel(s, p, m), this._eventBus.fire("bpmnElement.added", { element: m }), m;
    }, br.prototype._attachBoundary = function(s, p) {
      var h = s.attachedToRef;
      if (!h)
        throw new Error(`missing ${Mn(s)}#attachedToRef`);
      var m = this._elementRegistry.get(h.id), v = m && m.attachers;
      if (!m)
        throw wm(s, h, "attachedToRef");
      p.host = m, v || (m.attachers = v = []), v.indexOf(p) === -1 && v.push(p);
    }, br.prototype.addLabel = function(s, p, h) {
      var m, v, b;
      return m = Kt(p, h), (v = oe(h)) && (m = this._textRenderer.getExternalLabelBounds(m, v)), b = this._elementFactory.createLabel(jc(s, p, { id: s.id + "_label", labelTarget: h, type: "label", hidden: h.hidden || !oe(h), x: Math.round(m.x), y: Math.round(m.y), width: Math.round(m.width), height: Math.round(m.height) })), this._canvas.addShape(b, h.parent);
    }, br.prototype._getConnectedElement = function(s, p) {
      var h, m, v = s.$type;
      if (m = s[p + "Ref"], p === "source" && v === "bpmn:DataInputAssociation" && (m = m && m[0]), (p === "source" && v === "bpmn:DataOutputAssociation" || p === "target" && v === "bpmn:DataInputAssociation") && (m = s.$parent), h = m && this._getElement(m))
        return h;
      throw m ? wm(s, m, p + "Ref") : new Error(`${Mn(s)}#${p} Ref not specified`);
    }, br.prototype._getSource = function(s) {
      return this._getConnectedElement(s, "source");
    }, br.prototype._getTarget = function(s) {
      return this._getConnectedElement(s, "target");
    }, br.prototype._getElement = function(s) {
      return this._elementRegistry.get(s.id);
    };
    var k1 = { __depends__: [C1, { __depends__: [Em], bpmnImporter: ["type", br] }] };
    function Do(s, p) {
      var h, m, v, b;
      return p = !!p, c(s) || (s = [s]), x(s, function(S) {
        var M = S;
        S.waypoints && !p && (M = Do(S.waypoints, !0));
        var B = M.x, q = M.y, ee = M.height || 0, pe = M.width || 0;
        (B < h || h === void 0) && (h = B), (q < m || m === void 0) && (m = q), (B + pe > v || v === void 0) && (v = B + pe), (q + ee > b || b === void 0) && (b = q + ee);
      }), { x: h, y: m, height: b - m, width: v - h };
    }
    function Sm(s) {
      return "waypoints" in s ? "connection" : "x" in s ? "shape" : "root";
    }
    function Rm(s) {
      return !(!s || !s.isFrame);
    }
    function Cm(s) {
      this._counter = 0, this._prefix = (s ? s + "-" : "") + Math.floor(1e9 * Math.random()) + "-";
    }
    Cm.prototype.next = function() {
      return this._prefix + ++this._counter;
    };
    var M1 = new Cm("ov");
    function hn(s, p, h, m) {
      var v, b;
      this._eventBus = p, this._canvas = h, this._elementRegistry = m, this._ids = M1, this._overlayDefaults = $({ show: null, scale: !0 }, s && s.defaults), this._overlays = {}, this._overlayContainers = [], this._overlayRoot = (v = h.getContainer(), kn(b = $t('<div class="djs-overlay-container" />'), { position: "absolute", width: 0, height: 0 }), v.insertBefore(b, v.firstChild), b), this._init();
    }
    function Am(s, p, h) {
      kn(s, { left: p + "px", top: h + "px" });
    }
    function Fc(s, p) {
      s.style.display = p === !1 ? "none" : "";
    }
    function Pm(s, p) {
      s.style["transform-origin"] = "top left", ["", "-ms-", "-webkit-"].forEach(function(h) {
        s.style[h + "transform"] = p;
      });
    }
    hn.$inject = ["config.overlays", "eventBus", "canvas", "elementRegistry"], hn.prototype.get = function(s) {
      if (f(s) && (s = { id: s }), f(s.element) && (s.element = this._elementRegistry.get(s.element)), s.element) {
        var p = this._getOverlayContainer(s.element, !0);
        return p ? s.type ? _(p.overlays, k({ type: s.type })) : p.overlays.slice() : [];
      }
      return s.type ? _(this._overlays, k({ type: s.type })) : s.id ? this._overlays[s.id] : null;
    }, hn.prototype.add = function(s, p, h) {
      if (l(p) && (h = p, p = null), s.id || (s = this._elementRegistry.get(s)), !h.position)
        throw new Error("must specifiy overlay position");
      if (!h.html)
        throw new Error("must specifiy overlay html");
      if (!s)
        throw new Error("invalid element specified");
      var m = this._ids.next();
      return h = $({}, this._overlayDefaults, h, { id: m, type: p, element: s, html: h.html }), this._addOverlay(h), m;
    }, hn.prototype.remove = function(s) {
      var p = this.get(s) || [];
      c(p) || (p = [p]);
      var h = this;
      x(p, function(m) {
        var v = h._getOverlayContainer(m.element, !0);
        if (m && (da(m.html), da(m.htmlContainer), delete m.htmlContainer, delete m.element, delete h._overlays[m.id]), v) {
          var b = v.overlays.indexOf(m);
          b !== -1 && v.overlays.splice(b, 1);
        }
      });
    }, hn.prototype.isShown = function() {
      return this._overlayRoot.style.display !== "none";
    }, hn.prototype.show = function() {
      Fc(this._overlayRoot);
    }, hn.prototype.hide = function() {
      Fc(this._overlayRoot, !1);
    }, hn.prototype.clear = function() {
      this._overlays = {}, this._overlayContainers = [], Ic(this._overlayRoot);
    }, hn.prototype._updateOverlayContainer = function(s) {
      var p = s.element, h = s.html, m = p.x, v = p.y;
      if (p.waypoints) {
        var b = Do(p);
        m = b.x, v = b.y;
      }
      Am(h, m, v), function(S, M, B) {
        arguments.length == 2 ? S.getAttribute(M) : B === null ? S.removeAttribute(M) : S.setAttribute(M, B);
      }(s.html, "data-container-id", p.id);
    }, hn.prototype._updateOverlay = function(s) {
      var p, h, m = s.position, v = s.htmlContainer, b = s.element, S = m.left, M = m.top;
      m.right !== void 0 && (p = b.waypoints ? Do(b).width : b.width, S = -1 * m.right + p), m.bottom !== void 0 && (h = b.waypoints ? Do(b).height : b.height, M = -1 * m.bottom + h), Am(v, S || 0, M || 0), this._updateOverlayVisibilty(s, this._canvas.viewbox());
    }, hn.prototype._createOverlayContainer = function(s) {
      var p = $t('<div class="djs-overlays" />');
      kn(p, { position: "absolute" }), this._overlayRoot.appendChild(p);
      var h = { html: p, element: s, overlays: [] };
      return this._updateOverlayContainer(h), this._overlayContainers.push(h), h;
    }, hn.prototype._updateRoot = function(s) {
      var p = s.scale || 1, h = "matrix(" + [p, 0, 0, p, -1 * s.x * p, -1 * s.y * p].join(",") + ")";
      Pm(this._overlayRoot, h);
    }, hn.prototype._getOverlayContainer = function(s, p) {
      var h = g(this._overlayContainers, function(m) {
        return m.element === s;
      });
      return h || p ? h : this._createOverlayContainer(s);
    }, hn.prototype._addOverlay = function(s) {
      var p, h, m = s.id, v = s.element, b = s.html;
      b.get && b.constructor.prototype.jquery && (b = b.get(0)), f(b) && (b = $t(b)), h = this._getOverlayContainer(v), kn(p = $t('<div class="djs-overlay" data-overlay-id="' + m + '">'), { position: "absolute" }), p.appendChild(b), s.type && ko(p).add("djs-overlay-" + s.type), Fc(p, this._canvas.findRoot(v) === this._canvas.getRootElement()), s.htmlContainer = p, h.overlays.push(s), h.html.appendChild(p), this._overlays[m] = s, this._updateOverlay(s), this._updateOverlayVisibilty(s, this._canvas.viewbox());
    }, hn.prototype._updateOverlayVisibilty = function(s, p) {
      var h = s.show, m = this._canvas.findRoot(s.element), v = h && h.minZoom, b = h && h.maxZoom, S = s.htmlContainer, M = !0;
      (m !== this._canvas.getRootElement() || h && (a(v) && v > p.scale || a(b) && b < p.scale)) && (M = !1), Fc(S, M), this._updateOverlayScale(s, p);
    }, hn.prototype._updateOverlayScale = function(s, p) {
      var h, m, v, b = s.scale, S = s.htmlContainer, M = "";
      b !== !0 && (b === !1 ? (h = 1, m = 1) : (h = b.min, m = b.max), a(h) && p.scale < h && (v = (1 / p.scale || 1) * h), a(m) && p.scale > m && (v = (1 / p.scale || 1) * m)), a(v) && (M = "scale(" + v + "," + v + ")"), Pm(S, M);
    }, hn.prototype._updateOverlaysVisibilty = function(s) {
      var p = this;
      x(this._overlays, function(h) {
        p._updateOverlayVisibilty(h, s);
      });
    }, hn.prototype._init = function() {
      var s = this._eventBus, p = this;
      s.on("canvas.viewbox.changing", function(h) {
        p.hide();
      }), s.on("canvas.viewbox.changed", function(h) {
        var m;
        m = h.viewbox, p._updateRoot(m), p._updateOverlaysVisibilty(m), p.show();
      }), s.on(["shape.remove", "connection.remove"], function(h) {
        var m = h.element;
        x(p.get({ element: m }), function(S) {
          p.remove(S.id);
        });
        var v = p._getOverlayContainer(m);
        if (v) {
          da(v.html);
          var b = p._overlayContainers.indexOf(v);
          b !== -1 && p._overlayContainers.splice(b, 1);
        }
      }), s.on("element.changed", 500, function(h) {
        var m = h.element, v = p._getOverlayContainer(m, !0);
        v && (x(v.overlays, function(b) {
          p._updateOverlay(b);
        }), p._updateOverlayContainer(v));
      }), s.on("element.marker.update", function(h) {
        var m = p._getOverlayContainer(h.element, !0);
        m && ko(m.html)[h.add ? "add" : "remove"](h.marker);
      }), s.on("root.set", function() {
        p._updateOverlaysVisibilty(p._canvas.viewbox());
      }), s.on("diagram.clear", this.clear, this);
    };
    var Tm = { __init__: ["overlays"], overlays: ["type", hn] };
    function km(s, p, h, m) {
      s.on("element.changed", function(v) {
        var b = v.element;
        (b.parent || b === p.getRootElement()) && (v.gfx = h.getGraphics(b)), v.gfx && s.fire(Sm(b) + ".changed", v);
      }), s.on("elements.changed", function(v) {
        var b = v.elements;
        b.forEach(function(S) {
          s.fire("element.changed", { element: S });
        }), m.updateContainments(b);
      }), s.on("shape.changed", function(v) {
        m.update("shape", v.element, v.gfx);
      }), s.on("connection.changed", function(v) {
        m.update("connection", v.element, v.gfx);
      });
    }
    km.$inject = ["eventBus", "canvas", "elementRegistry", "graphicsFactory"];
    var D1 = { __init__: ["changeSupport"], changeSupport: ["type", km] };
    function Yn(s) {
      this._eventBus = s;
    }
    function xr(s) {
      return function(p, h, m, v, b) {
        (d(p) || u(p)) && (b = v, v = m, m = h, h = p, p = null), this.on(p, s, h, m, v, b);
      };
    }
    function Cp(s, p) {
      p.invoke(Yn, this), this.executed(function(h) {
        var m = h.context;
        m.rootElement ? s.setRootElement(m.rootElement) : m.rootElement = s.getRootElement();
      }), this.revert(function(h) {
        var m = h.context;
        m.rootElement && s.setRootElement(m.rootElement);
      });
    }
    Yn.$inject = ["eventBus"], Yn.prototype.on = function(s, p, h, m, v, b) {
      if ((d(p) || u(p)) && (b = v, v = m, m = h, h = p, p = null), d(h) && (b = v, v = m, m = h, h = 1e3), l(v) && (b = v, v = !1), !d(m))
        throw new Error("handlerFn must be a function");
      c(s) || (s = [s]);
      var S = this._eventBus;
      x(s, function(M) {
        var B = ["commandStack", M, p].filter(function(q) {
          return q;
        }).join(".");
        S.on(B, h, v ? /* @__PURE__ */ function(q, ee) {
          return function(pe) {
            return q.call(ee || null, pe.context, pe.command, pe);
          };
        }(m, b) : m, b);
      });
    }, Yn.prototype.canExecute = xr("canExecute"), Yn.prototype.preExecute = xr("preExecute"), Yn.prototype.preExecuted = xr("preExecuted"), Yn.prototype.execute = xr("execute"), Yn.prototype.executed = xr("executed"), Yn.prototype.postExecute = xr("postExecute"), Yn.prototype.postExecuted = xr("postExecuted"), Yn.prototype.revert = xr("revert"), Yn.prototype.reverted = xr("reverted"), n(Cp, Yn), Cp.$inject = ["canvas", "injector"];
    var O1 = { __init__: ["rootElementsBehavior"], rootElementsBehavior: ["type", Cp] }, N1 = { "&": "&amp;", "<": "&lt;", ">": "&gt;", '"': "&quot;", "'": "&#39;" }, B1 = "_plane";
    function Ap(s) {
      var p = s.id;
      return V(s, "bpmn:SubProcess") ? function(h) {
        return h + B1;
      }(p) : p;
    }
    function Mm(s, p, h) {
      var m = $t('<ul class="bjs-breadcrumbs"></ul>'), v = h.getContainer(), b = ko(v);
      v.appendChild(m);
      var S = [];
      function M(B) {
        B && (S = function(pe) {
          for (var be = ie(pe), Te = [], Re = be; Re; Re = Re.$parent)
            (V(Re, "bpmn:SubProcess") || V(Re, "bpmn:Process")) && Te.push(Re);
          return Te.reverse();
        }(B));
        var q = S.map(function(pe) {
          var be, Te = (be = "" + (be = pe.name || pe.id)) && be.replace(/[&<>"']/g, function(ve) {
            return N1[ve];
          }), Re = $t('<li><span class="bjs-crumb"><a title="' + Te + '">' + Te + "</a></span></li>"), Ie = h.findRoot(Ap(pe)) || h.findRoot(pe.id);
          if (!Ie && V(pe, "bpmn:Process")) {
            var re = p.find(function(ve) {
              var Y = ie(ve);
              return Y && Y.get("processRef") && Y.get("processRef") === pe;
            });
            Ie = h.findRoot(re.id);
          }
          return Re.addEventListener("click", function() {
            h.setRootElement(Ie);
          }), Re;
        });
        m.innerHTML = "";
        var ee = q.length > 1;
        b.toggle("bjs-breadcrumbs-shown", ee), q.forEach(function(pe) {
          m.appendChild(pe);
        });
      }
      s.on("element.changed", function(B) {
        var q = ie(B.element);
        g(S, function(ee) {
          return ee === q;
        }) && M();
      }), s.on("root.set", function(B) {
        M(B.element);
      });
    }
    function Dm(s, p) {
      var h = null, m = new L1();
      s.on("root.set", function(v) {
        var b = v.element, S = p.viewbox(), M = m.get(b);
        if (m.set(h, { x: S.x, y: S.y, zoom: S.scale }), h = b, !V(b, "bpmn:Collaboration") || M) {
          M = M || { x: 0, y: 0, zoom: 1 };
          var B = (S.x - M.x) * S.scale, q = (S.y - M.y) * S.scale;
          B === 0 && q === 0 || p.scroll({ dx: B, dy: q }), M.zoom !== S.scale && p.zoom(M.zoom, { x: 0, y: 0 });
        }
      }), s.on("diagram.clear", function() {
        m.clear(), h = null;
      });
    }
    function L1() {
      this._entries = [], this.set = function(s, p) {
        var h = !1;
        for (var m in this._entries)
          if (this._entries[m][0] === s) {
            this._entries[m][1] = p, h = !0;
            break;
          }
        h || this._entries.push([s, p]);
      }, this.get = function(s) {
        for (var p in this._entries)
          if (this._entries[p][0] === s)
            return this._entries[p][1];
        return null;
      }, this.clear = function() {
        this._entries.length = 0;
      }, this.remove = function(s) {
        var p = -1;
        for (var h in this._entries)
          if (this._entries[h][0] === s) {
            p = h;
            break;
          }
        p !== -1 && this._entries.splice(p, 1);
      };
    }
    Mm.$inject = ["eventBus", "elementRegistry", "canvas"], Dm.$inject = ["eventBus", "canvas"];
    var I1 = 180, $1 = 160;
    function Oo(s, p) {
      this._eventBus = s, this._moddle = p;
      var h = this;
      s.on("import.render.start", 1500, function(m, v) {
        h._handleImport(v.definitions);
      });
    }
    function Om(s) {
      return V(s, "bpmndi:BPMNDiagram") ? s : Om(s.$parent);
    }
    Oo.prototype._handleImport = function(s) {
      if (s.diagrams) {
        var p = this;
        this._definitions = s, this._processToDiagramMap = {}, s.diagrams.forEach(function(m) {
          m.plane && m.plane.bpmnElement && (p._processToDiagramMap[m.plane.bpmnElement.id] = m);
        });
        var h = [];
        s.diagrams.forEach(function(m) {
          var v = p._createNewDiagrams(m.plane);
          Array.prototype.push.apply(h, v);
        }), h.forEach(function(m) {
          p._movePlaneElementsToOrigin(m.plane);
        });
      }
    }, Oo.prototype._createNewDiagrams = function(s) {
      var p = this, h = [], m = [];
      s.get("planeElement").forEach(function(b) {
        var S = b.bpmnElement;
        if (S) {
          var M = S.$parent;
          V(S, "bpmn:SubProcess") && !b.isExpanded && h.push(S), function(B, q) {
            var ee = B.$parent;
            return !(!V(ee, "bpmn:SubProcess") || ee === q.bpmnElement || ae(B, ["bpmn:DataInputAssociation", "bpmn:DataOutputAssociation"]));
          }(S, s) && m.push({ diElement: b, parent: M });
        }
      });
      var v = [];
      return h.forEach(function(b) {
        if (!p._processToDiagramMap[b.id]) {
          var S = p._createDiagram(b);
          p._processToDiagramMap[b.id] = S, v.push(S);
        }
      }), m.forEach(function(b) {
        for (var S = b.diElement, M = b.parent; M && h.indexOf(M) === -1; )
          M = M.$parent;
        if (M) {
          var B = p._processToDiagramMap[M.id];
          p._moveToDiPlane(S, B.plane);
        }
      }), v;
    }, Oo.prototype._movePlaneElementsToOrigin = function(s) {
      var p = s.get("planeElement"), h = function(b) {
        var S = { top: 1 / 0, right: -1 / 0, bottom: -1 / 0, left: 1 / 0 };
        return b.planeElement.forEach(function(M) {
          if (M.bounds) {
            var B = Sp(M.bounds);
            S.top = Math.min(B.top, S.top), S.left = Math.min(B.left, S.left);
          }
        }), function(M) {
          return { x: M.left, y: M.top, width: M.right - M.left, height: M.bottom - M.top };
        }(S);
      }(s), m = h.x - I1, v = h.y - $1;
      p.forEach(function(b) {
        b.waypoint ? b.waypoint.forEach(function(S) {
          S.x = S.x - m, S.y = S.y - v;
        }) : b.bounds && (b.bounds.x = b.bounds.x - m, b.bounds.y = b.bounds.y - v);
      });
    }, Oo.prototype._moveToDiPlane = function(s, p) {
      var h = Om(s).plane.get("planeElement");
      h.splice(h.indexOf(s), 1), p.get("planeElement").push(s);
    }, Oo.prototype._createDiagram = function(s) {
      var p = this._moddle.create("bpmndi:BPMNPlane", { bpmnElement: s }), h = this._moddle.create("bpmndi:BPMNDiagram", { plane: p });
      return p.$parent = h, p.bpmnElement = s, h.$parent = this._definitions, this._definitions.diagrams.push(h), h;
    }, Oo.$inject = ["eventBus", "moddle"];
    var Hc = 250;
    function Vr(s, p, h, m) {
      Yn.call(this, p), this._canvas = s, this._eventBus = p, this._elementRegistry = h, this._overlays = m;
      var v = this;
      this.executed("shape.toggleCollapse", Hc, function(b) {
        var S = b.shape;
        v._canDrillDown(S) ? v._addOverlay(S) : v._removeOverlay(S);
      }, !0), this.reverted("shape.toggleCollapse", Hc, function(b) {
        var S = b.shape;
        v._canDrillDown(S) ? v._addOverlay(S) : v._removeOverlay(S);
      }, !0), this.executed(["shape.create", "shape.move", "shape.delete"], Hc, function(b) {
        var S = b.oldParent, M = b.newParent || b.parent, B = b.shape;
        v._canDrillDown(B) && v._addOverlay(B), v._updateDrilldownOverlay(S), v._updateDrilldownOverlay(M), v._updateDrilldownOverlay(B);
      }, !0), this.reverted(["shape.create", "shape.move", "shape.delete"], Hc, function(b) {
        var S = b.oldParent, M = b.newParent || b.parent, B = b.shape;
        v._canDrillDown(B) && v._addOverlay(B), v._updateDrilldownOverlay(S), v._updateDrilldownOverlay(M), v._updateDrilldownOverlay(B);
      }, !0), p.on("import.render.complete", function() {
        h.filter(function(b) {
          return v._canDrillDown(b);
        }).map(function(b) {
          v._addOverlay(b);
        });
      });
    }
    n(Vr, Yn), Vr.prototype._updateDrilldownOverlay = function(s) {
      var p = this._canvas;
      if (s) {
        var h = p.findRoot(s);
        h && this._updateOverlayVisibility(h);
      }
    }, Vr.prototype._canDrillDown = function(s) {
      var p = this._canvas;
      return V(s, "bpmn:SubProcess") && p.findRoot(Ap(s));
    }, Vr.prototype._updateOverlayVisibility = function(s) {
      var p = this._overlays, h = ie(s), m = p.get({ element: h.id, type: "drilldown" })[0];
      if (m) {
        var v = h && h.get("flowElements") && h.get("flowElements").length;
        ko(m.html).toggle("bjs-drilldown-empty", !v);
      }
    }, Vr.prototype._addOverlay = function(s) {
      var p = this._canvas, h = this._overlays;
      h.get({ element: s, type: "drilldown" }).length && this._removeOverlay(s);
      var m = $t('<button class="bjs-drilldown"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4.81801948,3.50735931 L10.4996894,9.1896894 L10.5,4 L12,4 L12,12 L4,12 L4,10.5 L9.6896894,10.4996894 L3.75735931,4.56801948 C3.46446609,4.27512627 3.46446609,3.80025253 3.75735931,3.50735931 C4.05025253,3.21446609 4.52512627,3.21446609 4.81801948,3.50735931 Z"/></svg></button>');
      m.addEventListener("click", function() {
        p.setRootElement(p.findRoot(Ap(s)));
      }), h.add(s, "drilldown", { position: { bottom: -7, right: -8 }, html: m }), this._updateOverlayVisibility(s);
    }, Vr.prototype._removeOverlay = function(s) {
      this._overlays.remove({ element: s, type: "drilldown" });
    }, Vr.$inject = ["canvas", "eventBus", "elementRegistry", "overlays"];
    var j1 = { __depends__: [Tm, D1, O1], __init__: ["drilldownBreadcrumbs", "drilldownOverlayBehavior", "drilldownCentering", "subprocessCompatibility"], drilldownBreadcrumbs: ["type", Mm], drilldownCentering: ["type", Dm], drilldownOverlayBehavior: ["type", Vr], subprocessCompatibility: ["type", Oo] };
    function No(s, p) {
      this._eventBus = s, this.offset = 5;
      var h = p.cls("djs-outline", ["no-fill"]), m = this;
      function v(b) {
        var S = Ee("rect");
        return Ne(S, $({ x: 0, y: 0, rx: 4, width: 100, height: 100 }, h)), S;
      }
      s.on(["shape.added", "shape.changed"], 500, function(b) {
        var S = b.element, M = b.gfx, B = Un(".djs-outline", M);
        B || fe(M, B = m.getOutline(S) || v()), m.updateShapeOutline(B, S);
      }), s.on(["connection.added", "connection.changed"], function(b) {
        var S = b.element, M = b.gfx, B = Un(".djs-outline", M);
        B || fe(M, B = v()), m.updateConnectionOutline(B, S);
      });
    }
    No.prototype.updateShapeOutline = function(s, p) {
      var h = !1, m = this._getProviders();
      m.length && x(m, function(v) {
        h = h || v.updateOutline(p, s);
      }), h || Ne(s, { x: -this.offset, y: -this.offset, width: p.width + 2 * this.offset, height: p.height + 2 * this.offset });
    }, No.prototype.updateConnectionOutline = function(s, p) {
      var h = Do(p);
      Ne(s, { x: h.x - this.offset, y: h.y - this.offset, width: h.width + 2 * this.offset, height: h.height + 2 * this.offset });
    }, No.prototype.registerProvider = function(s, p) {
      p || (p = s, s = 1e3), this._eventBus.on("outline.getProviders", s, function(h) {
        h.providers.push(p);
      });
    }, No.prototype._getProviders = function() {
      var s = this._eventBus.createEvent({ type: "outline.getProviders", providers: [] });
      return this._eventBus.fire(s), s.providers;
    }, No.prototype.getOutline = function(s) {
      var p;
      return x(this._getProviders(), function(h) {
        d(h.getOutline) && (p = p || h.getOutline(s));
      }), p;
    }, No.$inject = ["eventBus", "styles", "elementRegistry"];
    var Nm = { __init__: ["outline"], outline: ["type", No] };
    const F1 = { width: 36, height: 50 }, H1 = { width: 50, height: 50 };
    function Bm(s, p, h) {
      return Ee("path", { d: s, strokeWidth: 2, transform: `translate(${p.x}, ${p.y})`, ...h });
    }
    function zc(s, p) {
      this._styles = p, s.registerProvider(this);
    }
    function Lm(s, p) {
      var h;
      return p === "bpmn:DataObjectReference" ? h = F1 : p === "bpmn:DataStoreReference" && (h = H1), s.width === h.width && s.height === h.height;
    }
    zc.$inject = ["outline", "styles"], zc.prototype.getOutline = function(s) {
      const p = this._styles.cls("djs-outline", ["no-fill"]);
      var h;
      if (!Ve(s))
        return V(s, "bpmn:Gateway") ? ($((h = Ee("rect")).style, { "transform-box": "fill-box", transform: "rotate(45deg)", "transform-origin": "center" }), Ne(h, $({ x: 2, y: 2, rx: 4, width: s.width - 4, height: s.height - 4 }, p))) : ae(s, ["bpmn:Task", "bpmn:SubProcess", "bpmn:Group"]) ? Ne(h = Ee("rect"), $({ x: -5, y: -5, rx: 14, width: s.width + 10, height: s.height + 10 }, p)) : V(s, "bpmn:EndEvent") ? Ne(h = Ee("circle"), $({ cx: s.width / 2, cy: s.height / 2, r: s.width / 2 + 5 + 1 }, p)) : V(s, "bpmn:Event") ? Ne(h = Ee("circle"), $({ cx: s.width / 2, cy: s.height / 2, r: s.width / 2 + 5 }, p)) : V(s, "bpmn:DataObjectReference") && Lm(s, "bpmn:DataObjectReference") ? h = Bm("M44.7648 11.3263L36.9892 2.64074C36.0451 1.58628 34.5651 0.988708 33.1904 0.988708H5.98667C3.22688 0.988708 0.989624 3.34892 0.989624 6.26039V55.0235C0.989624 57.9349 3.22688 60.2952 5.98667 60.2952H40.966C43.7257 60.2952 45.963 57.9349 45.963 55.0235V14.9459C45.963 13.5998 45.6407 12.3048 44.7648 11.3263Z", { x: -6, y: -6 }, p) : V(s, "bpmn:DataStoreReference") && Lm(s, "bpmn:DataStoreReference") && (h = Bm("M1.03845 48.1347C1.03845 49.3511 1.07295 50.758 1.38342 52.064C1.69949 53.3938 2.32428 54.7154 3.56383 55.6428C6.02533 57.4841 10.1161 58.7685 14.8212 59.6067C19.5772 60.4538 25.1388 60.8738 30.6831 60.8738C36.2276 60.8738 41.7891 60.4538 46.545 59.6067C51.2504 58.7687 55.3412 57.4842 57.8028 55.6429C59.0424 54.7156 59.6673 53.3938 59.9834 52.064C60.2938 50.7579 60.3285 49.351 60.3285 48.1344V13.8415C60.3285 12.6249 60.2938 11.218 59.9834 9.91171C59.6673 8.58194 59.0423 7.2602 57.8027 6.33294C55.341 4.49168 51.2503 3.20723 46.545 2.36914C41.7891 1.522 36.2276 1.10204 30.6831 1.10205C25.1388 1.10206 19.5772 1.52206 14.8213 2.36923C10.1162 3.20734 6.02543 4.49183 3.5639 6.33314C2.32433 7.26038 1.69951 8.58206 1.38343 9.91181C1.07295 11.2179 1.03845 12.6247 1.03845 13.8411V48.1347Z", { x: -6, y: -6 }, p)), h;
    }, zc.prototype.updateOutline = function(s, p) {
      if (!Ve(s))
        return ae(s, ["bpmn:SubProcess", "bpmn:Group"]) ? (Ne(p, { width: s.width + 10, height: s.height + 10 }), !0) : !!ae(s, ["bpmn:Event", "bpmn:Gateway", "bpmn:DataStoreReference", "bpmn:DataObjectReference"]);
    };
    var z1 = { __depends__: [Nm], __init__: ["outlineProvider"], outlineProvider: ["type", zc] };
    function Im(s) {
      return s.originalEvent || s.srcEvent;
    }
    function $m(s) {
      return s.pointers && s.pointers.length && (s = s.pointers[0]), s.touches && s.touches.length && (s = s.touches[0]), s ? { x: s.clientX, y: s.clientY } : null;
    }
    function jm(s, p) {
      return (Im(s) || s).button === p;
    }
    function Vc(s) {
      return jm(s, 0);
    }
    function V1(s) {
      return !0;
    }
    function Wc(s) {
      return Vc(s) || function(p) {
        return jm(p, 1);
      }(s);
    }
    function Fm(s, p, h) {
      var m = this;
      function v(Y, te, J) {
        var ce, ge;
        (function(Ze, We) {
          var De = B[Ze] || Vc;
          return !De(We);
        })(Y, te) || (J ? ge = p.getGraphics(J) : (ce = te.delegateTarget || te.target) && (ge = ce, J = p.get(ge)), ge && J && s.fire(Y, { element: J, gfx: ge, originalEvent: te }) === !1 && (te.stopPropagation(), te.preventDefault()));
      }
      var b = {};
      function S(Y) {
        return b[Y];
      }
      var M = { click: "element.click", contextmenu: "element.contextmenu", dblclick: "element.dblclick", mousedown: "element.mousedown", mousemove: "element.mousemove", mouseover: "element.hover", mouseout: "element.out", mouseup: "element.mouseup" }, B = { "element.contextmenu": V1, "element.mousedown": Wc, "element.mouseup": Wc, "element.click": Wc, "element.dblclick": Wc }, q = "svg, .djs-element";
      function ee(Y, te, J, ce) {
        var ge = b[J] = function(Ze) {
          v(J, Ze);
        };
        ce && (B[J] = ce), ge.$delegate = Gt.bind(Y, q, te, ge);
      }
      function pe(Y, te, J) {
        var ce = S(J);
        ce && Gt.unbind(Y, te, ce.$delegate);
      }
      s.on("canvas.destroy", function(Y) {
        var te;
        te = Y.svg, x(M, function(J, ce) {
          pe(te, ce, J);
        });
      }), s.on("canvas.init", function(Y) {
        var te;
        te = Y.svg, x(M, function(J, ce) {
          ee(te, ce, J);
        });
      }), s.on(["shape.added", "connection.added"], function(Y) {
        var te = Y.element, J = Y.gfx;
        s.fire("interactionEvents.createHit", { element: te, gfx: J });
      }), s.on(["shape.changed", "connection.changed"], 500, function(Y) {
        var te = Y.element, J = Y.gfx;
        s.fire("interactionEvents.updateHit", { element: te, gfx: J });
      }), s.on("interactionEvents.createHit", 500, function(Y) {
        var te = Y.element, J = Y.gfx;
        m.createDefaultHit(te, J);
      }), s.on("interactionEvents.updateHit", function(Y) {
        var te = Y.element, J = Y.gfx;
        m.updateDefaultHit(te, J);
      });
      var be = Ie("djs-hit djs-hit-stroke"), Te = Ie("djs-hit djs-hit-click-stroke"), Re = { all: Ie("djs-hit djs-hit-all"), "click-stroke": Te, stroke: be, "no-move": Ie("djs-hit djs-hit-no-move") };
      function Ie(Y, te) {
        return te = $({ stroke: "white", strokeWidth: 15 }, te || {}), h.cls(Y, ["no-fill", "no-border"], te);
      }
      function re(Y, te) {
        var J = Re[te];
        if (!J)
          throw new Error("invalid hit type <" + te + ">");
        return Ne(Y, J), Y;
      }
      function ve(Y, te) {
        fe(Y, te);
      }
      this.removeHits = function(Y) {
        var te;
        x((te = ".djs-hit", (Y || document).querySelectorAll(te)), F);
      }, this.createDefaultHit = function(Y, te) {
        var J, ce = Y.waypoints, ge = Y.isFrame;
        return ce ? this.createWaypointsHit(te, ce) : (J = ge ? "stroke" : "all", this.createBoxHit(te, J, { width: Y.width, height: Y.height }));
      }, this.createWaypointsHit = function(Y, te) {
        var J = os(te);
        return re(J, "stroke"), ve(Y, J), J;
      }, this.createBoxHit = function(Y, te, J) {
        J = $({ x: 0, y: 0 }, J);
        var ce = Ee("rect");
        return re(ce, te), Ne(ce, J), ve(Y, ce), ce;
      }, this.updateDefaultHit = function(Y, te) {
        var J = Un(".djs-hit", te);
        if (J)
          return Y.waypoints ? Mc(J, Y.waypoints) : Ne(J, { width: Y.width, height: Y.height }), J;
      }, this.fire = v, this.triggerMouseEvent = function(Y, te, J) {
        var ce = M[Y];
        if (!ce)
          throw new Error("unmapped DOM event name <" + Y + ">");
        return v(ce, te, J);
      }, this.mouseHandler = S, this.registerEvent = ee, this.unregisterEvent = pe;
    }
    Fm.$inject = ["eventBus", "elementRegistry", "styles"];
    var W1 = { __init__: ["interactionEvents"], interactionEvents: ["type", Fm] };
    function ma(s, p) {
      this._eventBus = s, this._canvas = p, this._selectedElements = [];
      var h = this;
      s.on(["shape.remove", "connection.remove"], function(m) {
        var v = m.element;
        h.deselect(v);
      }), s.on(["diagram.clear", "root.set"], function(m) {
        h.select(null);
      });
    }
    ma.$inject = ["eventBus", "canvas"], ma.prototype.deselect = function(s) {
      var p = this._selectedElements, h = p.indexOf(s);
      if (h !== -1) {
        var m = p.slice();
        p.splice(h, 1), this._eventBus.fire("selection.changed", { oldSelection: m, newSelection: p });
      }
    }, ma.prototype.get = function() {
      return this._selectedElements;
    }, ma.prototype.isSelected = function(s) {
      return this._selectedElements.indexOf(s) !== -1;
    }, ma.prototype.select = function(s, p) {
      var h = this._selectedElements, m = h.slice();
      c(s) || (s = s ? [s] : []);
      var v = this._canvas, b = v.getRootElement();
      s = s.filter(function(S) {
        var M = v.findRoot(S);
        return b === M;
      }), p ? x(s, function(S) {
        h.indexOf(S) === -1 && h.push(S);
      }) : this._selectedElements = h = s.slice(), this._eventBus.fire("selection.changed", { oldSelection: m, newSelection: h });
    };
    var Hm = "hover", zm = "selected";
    function Pp(s, p, h) {
      this._canvas = s;
      var m = this;
      function v(S, M) {
        s.addMarker(S, M);
      }
      function b(S, M) {
        s.removeMarker(S, M);
      }
      this._multiSelectionBox = null, p.on("element.hover", function(S) {
        v(S.element, Hm);
      }), p.on("element.out", function(S) {
        b(S.element, Hm);
      }), p.on("selection.changed", function(S) {
        var M = S.oldSelection, B = S.newSelection;
        x(M, function(q) {
          B.indexOf(q) === -1 && b(q, zm);
        }), x(B, function(q) {
          M.indexOf(q) === -1 && v(q, zm);
        }), m._updateSelectionOutline(B);
      }), p.on("element.changed", function(S) {
        h.isSelected(S.element) && m._updateSelectionOutline(h.get());
      });
    }
    function Vm(s, p, h, m) {
      s.on("create.end", 500, function(v) {
        var b = v.context, S = b.canExecute, M = b.elements, B = (b.hints || {}).autoSelect;
        if (S) {
          if (B === !1)
            return;
          c(B) ? p.select(B) : p.select(M.filter(G1));
        }
      }), s.on("connect.end", 500, function(v) {
        var b = v.context.connection;
        b && p.select(b);
      }), s.on("shape.move.end", 500, function(v) {
        var b = v.previousSelection || [], S = m.get(v.context.shape.id);
        g(b, function(M) {
          return S.id === M.id;
        }) || p.select(S);
      }), s.on("element.click", function(v) {
        if (Vc(v)) {
          var b = v.element;
          b === h.getRootElement() && (b = null);
          var S = p.isSelected(b), M = p.get().length > 1, B = function(q) {
            var ee = Im(q) || q;
            return Vc(q) && ee.shiftKey;
          }(v);
          if (S && M)
            return B ? p.deselect(b) : p.select(b);
          S ? p.deselect(b) : p.select(b, B);
        }
      });
    }
    function G1(s) {
      return !s.hidden;
    }
    Pp.$inject = ["canvas", "eventBus", "selection"], Pp.prototype._updateSelectionOutline = function(s) {
      var p = this._canvas.getLayer("selectionOutline");
      K(p);
      var h = s.length > 1;
      if (E(this._canvas.getContainer())[h ? "add" : "remove"]("djs-multi-select"), h) {
        var m = function(b) {
          return { x: b.x - 6, y: b.y - 6, width: b.width + 12, height: b.height + 12 };
        }(Do(s)), v = Ee("rect");
        Ne(v, $({ rx: 3 }, m)), E(v).add("djs-selection-outline"), fe(p, v);
      }
    }, Vm.$inject = ["eventBus", "selection", "canvas", "elementRegistry"];
    var U1 = { __init__: ["selectionVisuals", "selectionBehavior"], __depends__: [W1, Nm], selection: ["type", ma], selectionVisuals: ["type", Pp], selectionBehavior: ["type", Vm] };
    const Y1 = /^class[ {]/;
    function Tp(s) {
      return Array.isArray(s);
    }
    function kp(s, p) {
      return Object.prototype.hasOwnProperty.call(s, p);
    }
    function Gc(...s) {
      s.length === 1 && Tp(s[0]) && (s = s[0]);
      const p = (s = [...s]).pop();
      return p.$inject = s, p;
    }
    const K1 = /constructor\s*[^(]*\(\s*([^)]*)\)/m, q1 = /^(?:async\s+)?(?:function\s*[^(]*)?(?:\(\s*([^)]*)\)|(\w+))/m, X1 = /\/\*([^*]*)\*\//m;
    function Z1(s) {
      if (typeof s != "function")
        throw new Error(`Cannot annotate "${s}". Expected a function!`);
      const p = s.toString().match(function(m) {
        return Y1.test(m.toString());
      }(s) ? K1 : q1);
      if (!p)
        return [];
      const h = p[1] || p[2];
      return h && h.split(",").map((m) => {
        const v = m.match(X1);
        return (v && v[1] || m).trim();
      }) || [];
    }
    function Wm(s, p) {
      const h = p || { get: function(Y, te) {
        if (m.push(Y), te === !1)
          return null;
        throw M(`No provider for "${Y}"!`);
      } }, m = [], v = this._providers = Object.create(h._providers || null), b = this._instances = /* @__PURE__ */ Object.create(null), S = b.injector = this, M = function(Y) {
        const te = m.join(" -> ");
        return m.length = 0, new Error(te ? `${Y} (Resolving: ${te})` : Y);
      };
      function B(Y, te) {
        if (!v[Y] && Y.includes(".")) {
          const J = Y.split(".");
          let ce = B(J.shift());
          for (; J.length; )
            ce = ce[J.shift()];
          return ce;
        }
        if (kp(b, Y))
          return b[Y];
        if (kp(v, Y)) {
          if (m.indexOf(Y) !== -1)
            throw m.push(Y), M("Cannot resolve circular dependency!");
          return m.push(Y), b[Y] = v[Y][0](v[Y][1]), m.pop(), b[Y];
        }
        return h.get(Y, te);
      }
      function q(Y, te) {
        if (te === void 0 && (te = {}), typeof Y != "function") {
          if (!Tp(Y))
            throw M(`Cannot invoke "${Y}". Expected a function!`);
          Y = Gc(Y.slice());
        }
        return { fn: Y, dependencies: (Y.$inject || Z1(Y)).map((J) => kp(te, J) ? te[J] : B(J)) };
      }
      function ee(Y) {
        const { fn: te, dependencies: J } = q(Y);
        return new (Function.prototype.bind.call(te, null, ...J))();
      }
      function pe(Y, te, J) {
        const { fn: ce, dependencies: ge } = q(Y, J);
        return ce.apply(te, ge);
      }
      function be(Y) {
        return Gc((te) => Y.get(te));
      }
      function Te(Y, te) {
        if (te && te.length) {
          const J = /* @__PURE__ */ Object.create(null), ce = /* @__PURE__ */ Object.create(null), ge = [], Ze = [], We = [];
          let De, Ft, ye, me;
          for (let He in v)
            De = v[He], te.indexOf(He) !== -1 && (De[2] === "private" ? (Ft = ge.indexOf(De[3]), Ft === -1 ? (ye = De[3].createChild([], te), me = be(ye), ge.push(De[3]), Ze.push(ye), We.push(me), J[He] = [me, He, "private", ye]) : J[He] = [We[Ft], He, "private", Ze[Ft]]) : J[He] = [De[2], De[1]], ce[He] = !0), De[2] !== "factory" && De[2] !== "type" || !De[1].$scope || te.forEach((tt) => {
              De[1].$scope.indexOf(tt) !== -1 && (J[He] = [De[2], De[1]], ce[tt] = !0);
            });
          te.forEach((He) => {
            if (!ce[He])
              throw new Error('No provider for "' + He + '". Cannot use provider from the parent!');
          }), Y.unshift(J);
        }
        return new Wm(Y, S);
      }
      const Re = { factory: pe, type: ee, value: function(Y) {
        return Y;
      } };
      function Ie(Y, te) {
        const J = Y.__init__ || [];
        return function() {
          J.forEach((ce) => {
            typeof ce == "string" ? te.get(ce) : te.invoke(ce);
          });
        };
      }
      function re(Y) {
        const te = Y.__exports__;
        if (te) {
          const J = Y.__modules__, ce = Object.keys(Y).reduce((De, Ft) => (Ft !== "__exports__" && Ft !== "__modules__" && Ft !== "__init__" && Ft !== "__depends__" && (De[Ft] = Y[Ft]), De), /* @__PURE__ */ Object.create(null)), ge = Te((J || []).concat(ce)), Ze = Gc(function(De) {
            return ge.get(De);
          });
          te.forEach(function(De) {
            v[De] = [Ze, De, "private", ge];
          });
          const We = (Y.__init__ || []).slice();
          return We.unshift(function() {
            ge.init();
          }), Ie(Y = Object.assign({}, Y, { __init__: We }), ge);
        }
        return Object.keys(Y).forEach(function(J) {
          if (J === "__init__" || J === "__depends__")
            return;
          const ce = Y[J];
          if (ce[2] === "private")
            return void (v[J] = ce);
          const ge = ce[0], Ze = ce[1];
          v[J] = [Re[ge], J1(ge, Ze), ge];
        }), Ie(Y, S);
      }
      function ve(Y, te) {
        return Y.indexOf(te) !== -1 || (Y = (te.__depends__ || []).reduce(ve, Y)).indexOf(te) !== -1 ? Y : Y.concat(te);
      }
      this.get = B, this.invoke = pe, this.instantiate = ee, this.createChild = Te, this.init = function(Y) {
        const te = Y.reduce(ve, []).map(re);
        let J = !1;
        return function() {
          J || (J = !0, te.forEach((ce) => ce()));
        };
      }(s);
    }
    function J1(s, p) {
      return s !== "value" && Tp(p) && (p = Gc(p.slice())), p;
    }
    function Wr(s, p) {
      X.call(this, s, 1), this.CONNECTION_STYLE = p.style(["no-fill"], { strokeWidth: 5, stroke: "fuchsia" }), this.SHAPE_STYLE = p.style({ fill: "white", stroke: "fuchsia", strokeWidth: 2 }), this.FRAME_STYLE = p.style(["no-fill"], { stroke: "fuchsia", strokeDasharray: 4, strokeWidth: 2 });
    }
    n(Wr, X), Wr.prototype.canRender = function() {
      return !0;
    }, Wr.prototype.drawShape = function(s, p, h) {
      var m = Ee("rect");
      return Ne(m, { x: 0, y: 0, width: p.width || 0, height: p.height || 0 }), Rm(p) ? Ne(m, $({}, this.FRAME_STYLE, h || {})) : Ne(m, $({}, this.SHAPE_STYLE, h || {})), fe(s, m), m;
    }, Wr.prototype.drawConnection = function(s, p, h) {
      var m = os(p.waypoints, $({}, this.CONNECTION_STYLE, h || {}));
      return fe(s, m), m;
    }, Wr.prototype.getShapePath = function(s) {
      var p = s.x, h = s.y, m = s.width;
      return Zi([["M", p, h], ["l", m, 0], ["l", 0, s.height], ["l", -m, 0], ["z"]]);
    }, Wr.prototype.getConnectionPath = function(s) {
      var p, h, m = s.waypoints, v = [];
      for (p = 0; h = m[p]; p++)
        h = h.original || h, v.push([p === 0 ? "M" : "L", h.x, h.y]);
      return Zi(v);
    }, Wr.$inject = ["eventBus", "styles"];
    var Q1 = { __init__: ["defaultRenderer"], defaultRenderer: ["type", Wr], styles: ["type", function() {
      var s = { "no-fill": { fill: "none" }, "no-border": { strokeOpacity: 0 }, "no-events": { pointerEvents: "none" } }, p = this;
      this.cls = function(h, m, v) {
        return $(this.style(m, v), { class: h });
      }, this.style = function(h, m) {
        c(h) || m || (m = h, h = []);
        var v = w(h, function(b, S) {
          return $(b, s[S] || {});
        }, {});
        return m ? $(v, m) : v;
      }, this.computeStyle = function(h, m, v) {
        return c(m) || (v = m, m = []), p.style(m || [], $({}, v, h || {}));
      };
    }] };
    function Uc(s, p) {
      return Math.round(s * p) / p;
    }
    function Gm(s) {
      return u(s) ? s + "px" : s;
    }
    function Um(s, p, h) {
      const m = Ee("g");
      E(m).add(p);
      const v = h !== void 0 ? h : s.childNodes.length - 1;
      return s.insertBefore(m, s.childNodes[v] || null), m;
    }
    const ew = { shape: ["x", "y", "width", "height"], connection: ["waypoints"] };
    function qe(s, p, h, m) {
      this._eventBus = p, this._elementRegistry = m, this._graphicsFactory = h, this._rootsIdx = 0, this._layers = {}, this._planes = [], this._rootElement = null, this._init(s || {});
    }
    function Ym(s, p) {
      const h = "matrix(" + p.a + "," + p.b + "," + p.c + "," + p.d + "," + p.e + "," + p.f + ")";
      s.setAttribute("transform", h);
    }
    qe.$inject = ["config.canvas", "eventBus", "graphicsFactory", "elementRegistry"], qe.prototype._init = function(s) {
      const p = this._eventBus, h = this._container = function(b) {
        const S = (b = $({}, { width: "100%", height: "100%" }, b)).container || document.body, M = document.createElement("div");
        return M.setAttribute("class", "djs-container djs-parent"), kn(M, { position: "relative", overflow: "hidden", width: Gm(b.width), height: Gm(b.height) }), S.appendChild(M), M;
      }(s), m = this._svg = Ee("svg");
      Ne(m, { width: "100%", height: "100%" }), fe(h, m);
      const v = this._viewport = Um(m, "viewport");
      s.deferUpdate && (this._viewboxChanged = function(b, S) {
        let M, B, q, ee;
        function pe(Ie) {
          let re = Date.now(), ve = Ie ? 0 : ee + S - re;
          if (ve > 0)
            return be(ve);
          b.apply(q, B), Te();
        }
        function be(Ie) {
          M = setTimeout(pe, Ie);
        }
        function Te() {
          M && clearTimeout(M), M = ee = B = q = void 0;
        }
        function Re(...Ie) {
          ee = Date.now(), B = Ie, q = this, M || be(S);
        }
        return Re.flush = function() {
          M && pe(!0), Te();
        }, Re.cancel = Te, Re;
      }(W(this._viewboxChanged, this), 300)), p.on("diagram.init", () => {
        p.fire("canvas.init", { svg: m, viewport: v });
      }), p.on(["shape.added", "connection.added", "shape.removed", "connection.removed", "elements.changed", "root.set"], () => {
        delete this._cachedViewbox;
      }), p.on("diagram.destroy", 500, this._destroy, this), p.on("diagram.clear", 500, this._clear, this);
    }, qe.prototype._destroy = function() {
      this._eventBus.fire("canvas.destroy", { svg: this._svg, viewport: this._viewport });
      const s = this._container.parentNode;
      s && s.removeChild(this._container), delete this._svg, delete this._container, delete this._layers, delete this._planes, delete this._rootElement, delete this._viewport;
    }, qe.prototype._clear = function() {
      this._elementRegistry.getAll().forEach((s) => {
        const p = Sm(s);
        p === "root" ? this.removeRootElement(s) : this._removeElement(s, p);
      }), this._planes = [], this._rootElement = null, delete this._cachedViewbox;
    }, qe.prototype.getDefaultLayer = function() {
      return this.getLayer("base", 0);
    }, qe.prototype.getLayer = function(s, p) {
      if (!s)
        throw new Error("must specify a name");
      let h = this._layers[s];
      if (h || (h = this._layers[s] = this._createLayer(s, p)), p !== void 0 && h.index !== p)
        throw new Error("layer <" + s + "> already created at index <" + p + ">");
      return h.group;
    }, qe.prototype._getChildIndex = function(s) {
      return w(this._layers, function(p, h) {
        return h.visible && s >= h.index && p++, p;
      }, 0);
    }, qe.prototype._createLayer = function(s, p) {
      p === void 0 && (p = 1);
      const h = this._getChildIndex(p);
      return { group: Um(this._viewport, "layer-" + s, h), index: p, visible: !0 };
    }, qe.prototype.showLayer = function(s) {
      if (!s)
        throw new Error("must specify a name");
      const p = this._layers[s];
      if (!p)
        throw new Error("layer <" + s + "> does not exist");
      const h = this._viewport, m = p.group, v = p.index;
      if (p.visible)
        return m;
      const b = this._getChildIndex(v);
      return h.insertBefore(m, h.childNodes[b] || null), p.visible = !0, m;
    }, qe.prototype.hideLayer = function(s) {
      if (!s)
        throw new Error("must specify a name");
      const p = this._layers[s];
      if (!p)
        throw new Error("layer <" + s + "> does not exist");
      const h = p.group;
      return p.visible && (F(h), p.visible = !1), h;
    }, qe.prototype._removeLayer = function(s) {
      const p = this._layers[s];
      p && (delete this._layers[s], F(p.group));
    }, qe.prototype.getActiveLayer = function() {
      const s = this._findPlaneForRoot(this.getRootElement());
      return s ? s.layer : null;
    }, qe.prototype.findRoot = function(s) {
      return typeof s == "string" && (s = this._elementRegistry.get(s)), s ? (this._findPlaneForRoot(function(h) {
        for (; h.parent; )
          h = h.parent;
        return h;
      }(s)) || {}).rootElement : void 0;
    }, qe.prototype.getRootElements = function() {
      return this._planes.map(function(s) {
        return s.rootElement;
      });
    }, qe.prototype._findPlaneForRoot = function(s) {
      return g(this._planes, function(p) {
        return p.rootElement === s;
      });
    }, qe.prototype.getContainer = function() {
      return this._container;
    }, qe.prototype._updateMarker = function(s, p, h) {
      let m;
      s.id || (s = this._elementRegistry.get(s)), m = this._elementRegistry._elements[s.id], m && (x([m.gfx, m.secondaryGfx], function(v) {
        v && (h ? E(v).add(p) : E(v).remove(p));
      }), this._eventBus.fire("element.marker.update", { element: s, gfx: m.gfx, marker: p, add: !!h }));
    }, qe.prototype.addMarker = function(s, p) {
      this._updateMarker(s, p, !0);
    }, qe.prototype.removeMarker = function(s, p) {
      this._updateMarker(s, p, !1);
    }, qe.prototype.hasMarker = function(s, p) {
      return s.id || (s = this._elementRegistry.get(s)), E(this.getGraphics(s)).has(p);
    }, qe.prototype.toggleMarker = function(s, p) {
      this.hasMarker(s, p) ? this.removeMarker(s, p) : this.addMarker(s, p);
    }, qe.prototype.getRootElement = function() {
      const s = this._rootElement;
      return s || this._planes.length ? s : this.setRootElement(this.addRootElement(null));
    }, qe.prototype.addRootElement = function(s) {
      const p = this._rootsIdx++;
      s || (s = { id: "__implicitroot_" + p, children: [], isImplicit: !0 });
      const h = s.layer = "root-" + p;
      this._ensureValid("root", s);
      const m = this.getLayer(h, 0);
      return this.hideLayer(h), this._addRoot(s, m), this._planes.push({ rootElement: s, layer: m }), s;
    }, qe.prototype.removeRootElement = function(s) {
      if (typeof s == "string" && (s = this._elementRegistry.get(s)), this._findPlaneForRoot(s))
        return this._removeRoot(s), this._removeLayer(s.layer), this._planes = this._planes.filter(function(p) {
          return p.rootElement !== s;
        }), this._rootElement === s && (this._rootElement = null), s;
    }, qe.prototype.setRootElement = function(s) {
      if (s === this._rootElement)
        return s;
      let p;
      if (!s)
        throw new Error("rootElement required");
      return p = this._findPlaneForRoot(s), p || (s = this.addRootElement(s)), this._setRoot(s), s;
    }, qe.prototype._removeRoot = function(s) {
      const p = this._elementRegistry, h = this._eventBus;
      h.fire("root.remove", { element: s }), h.fire("root.removed", { element: s }), p.remove(s);
    }, qe.prototype._addRoot = function(s, p) {
      const h = this._elementRegistry, m = this._eventBus;
      m.fire("root.add", { element: s }), h.add(s, p), m.fire("root.added", { element: s, gfx: p });
    }, qe.prototype._setRoot = function(s, p) {
      const h = this._rootElement;
      h && (this._elementRegistry.updateGraphics(h, null, !0), this.hideLayer(h.layer)), s && (p || (p = this._findPlaneForRoot(s).layer), this._elementRegistry.updateGraphics(s, this._svg, !0), this.showLayer(s.layer)), this._rootElement = s, this._eventBus.fire("root.set", { element: s });
    }, qe.prototype._ensureValid = function(s, p) {
      if (!p.id)
        throw new Error("element must have an id");
      if (this._elementRegistry.get(p.id))
        throw new Error("element <" + p.id + "> already exists");
      const h = ew[s];
      if (!D(h, function(v) {
        return p[v] !== void 0;
      }))
        throw new Error("must supply { " + h.join(", ") + " } with " + s);
    }, qe.prototype._setParent = function(s, p, h) {
      (function(m, v, b) {
        if (m && v) {
          typeof b != "number" && (b = -1);
          var S = m.indexOf(v);
          if (S !== -1) {
            if (S === b || b === -1)
              return;
            m.splice(S, 1);
          }
          b !== -1 ? m.splice(b, 0, v) : m.push(v);
        }
      })(p.children, s, h), s.parent = p;
    }, qe.prototype._addElement = function(s, p, h, m) {
      h = h || this.getRootElement();
      const v = this._eventBus, b = this._graphicsFactory;
      this._ensureValid(s, p), v.fire(s + ".add", { element: p, parent: h }), this._setParent(p, h, m);
      const S = b.create(s, p, m);
      return this._elementRegistry.add(p, S), b.update(s, p, S), v.fire(s + ".added", { element: p, gfx: S }), p;
    }, qe.prototype.addShape = function(s, p, h) {
      return this._addElement("shape", s, p, h);
    }, qe.prototype.addConnection = function(s, p, h) {
      return this._addElement("connection", s, p, h);
    }, qe.prototype._removeElement = function(s, p) {
      const h = this._elementRegistry, m = this._graphicsFactory, v = this._eventBus;
      if (s = h.get(s.id || s))
        return v.fire(p + ".remove", { element: s }), m.remove(s), function(b, S) {
          if (!b || !S)
            return -1;
          var M = b.indexOf(S);
          M !== -1 && b.splice(M, 1);
        }(s.parent && s.parent.children, s), s.parent = null, v.fire(p + ".removed", { element: s }), h.remove(s), s;
    }, qe.prototype.removeShape = function(s) {
      return this._removeElement(s, "shape");
    }, qe.prototype.removeConnection = function(s) {
      return this._removeElement(s, "connection");
    }, qe.prototype.getGraphics = function(s, p) {
      return this._elementRegistry.getGraphics(s, p);
    }, qe.prototype._changeViewbox = function(s) {
      this._eventBus.fire("canvas.viewbox.changing"), s.apply(this), this._cachedViewbox = null, this._viewboxChanged();
    }, qe.prototype._viewboxChanged = function() {
      this._eventBus.fire("canvas.viewbox.changed", { viewbox: this.viewbox() });
    }, qe.prototype.viewbox = function(s) {
      if (s === void 0 && this._cachedViewbox)
        return this._cachedViewbox;
      const p = this._viewport, h = this.getSize();
      let m, v, b, S, M, B, q;
      return s ? (this._changeViewbox(function() {
        M = Math.min(h.width / s.width, h.height / s.height);
        const ee = this._svg.createSVGMatrix().scale(M).translate(-s.x, -s.y);
        zr(p, ee);
      }), s) : (b = this._rootElement ? this.getActiveLayer() : null, m = b && b.getBBox() || {}, S = zr(p), v = S ? S.matrix : function(ee, pe, be, Te, Re, Ie) {
        var re = Mt().createSVGMatrix();
        switch (arguments.length) {
          case 0:
            return re;
          case 1:
            return ht(re, ee);
          case 6:
            return ht(re, { a: ee, b: pe, c: be, d: Te, e: Re, f: Ie });
        }
      }(), M = Uc(v.a, 1e3), B = Uc(-v.e || 0, 1e3), q = Uc(-v.f || 0, 1e3), s = this._cachedViewbox = { x: B ? B / M : 0, y: q ? q / M : 0, width: h.width / M, height: h.height / M, scale: M, inner: { width: m.width || 0, height: m.height || 0, x: m.x || 0, y: m.y || 0 }, outer: h });
    }, qe.prototype.scroll = function(s) {
      const p = this._viewport;
      let h = p.getCTM();
      return s && this._changeViewbox(function() {
        s = $({ dx: 0, dy: 0 }, s || {}), h = this._svg.createSVGMatrix().translate(s.dx, s.dy).multiply(h), Ym(p, h);
      }), { x: h.e, y: h.f };
    }, qe.prototype.scrollToElement = function(s, p) {
      let h = 100;
      typeof s == "string" && (s = this._elementRegistry.get(s));
      const m = this.findRoot(s);
      if (m !== this.getRootElement() && this.setRootElement(m), m === s)
        return;
      p || (p = {}), typeof p == "number" && (h = p), p = { top: p.top || h, right: p.right || h, bottom: p.bottom || h, left: p.left || h };
      const v = Do(s), b = Sp(v), S = this.viewbox(), M = this.zoom();
      let B, q;
      S.y += p.top / M, S.x += p.left / M, S.width -= (p.right + p.left) / M, S.height -= (p.bottom + p.top) / M;
      const ee = Sp(S);
      if (v.width < S.width && v.height < S.height) {
        const pe = Math.max(0, b.right - ee.right), be = Math.min(0, b.left - ee.left), Te = Math.max(0, b.bottom - ee.bottom), Re = Math.min(0, b.top - ee.top);
        B = pe || be, q = Te || Re;
      } else
        B = v.x - S.x, q = v.y - S.y;
      this.scroll({ dx: -B * M, dy: -q * M });
    }, qe.prototype.zoom = function(s, p) {
      if (!s)
        return this.viewbox(s).scale;
      if (s === "fit-viewport")
        return this._fitViewport(p);
      let h, m;
      return this._changeViewbox(function() {
        typeof p != "object" && (h = this.viewbox().outer, p = { x: h.width / 2, y: h.height / 2 }), m = this._setZoom(s, p);
      }), Uc(m.a, 1e3);
    }, qe.prototype._fitViewport = function(s) {
      const p = this.viewbox(), h = p.outer, m = p.inner;
      let v, b;
      return m.x >= 0 && m.y >= 0 && m.x + m.width <= h.width && m.y + m.height <= h.height && !s ? b = { x: 0, y: 0, width: Math.max(m.width + m.x, h.width), height: Math.max(m.height + m.y, h.height) } : (v = Math.min(1, h.width / m.width, h.height / m.height), b = { x: m.x + (s ? m.width / 2 - h.width / v / 2 : 0), y: m.y + (s ? m.height / 2 - h.height / v / 2 : 0), width: h.width / v, height: h.height / v }), this.viewbox(b), this.viewbox(!1).scale;
    }, qe.prototype._setZoom = function(s, p) {
      const h = this._svg, m = this._viewport, v = h.createSVGMatrix(), b = h.createSVGPoint();
      let S, M, B, q, ee;
      B = m.getCTM();
      const pe = B.a;
      return p ? (S = $(b, p), M = S.matrixTransform(B.inverse()), q = v.translate(M.x, M.y).scale(1 / pe * s).translate(-M.x, -M.y), ee = B.multiply(q)) : ee = v.scale(s), Ym(this._viewport, ee), ee;
    }, qe.prototype.getSize = function() {
      return { width: this._container.clientWidth, height: this._container.clientHeight };
    }, qe.prototype.getAbsoluteBBox = function(s) {
      const p = this.viewbox();
      let h;
      return s.waypoints ? h = this.getGraphics(s).getBBox() : h = s, { x: h.x * p.scale - p.x * p.scale, y: h.y * p.scale - p.y * p.scale, width: h.width * p.scale, height: h.height * p.scale };
    }, qe.prototype.resized = function() {
      delete this._cachedViewbox, this._eventBus.fire("canvas.resized");
    };
    var ya = "data-element-id";
    function fi(s) {
      this._elements = {}, this._eventBus = s;
    }
    function Km(s, p, h) {
      var m = function(v, b, S, M) {
        var B = S.inverse;
        return Object.defineProperty(v, "remove", { value: function(q) {
          var ee = this.indexOf(q);
          return ee !== -1 && (this.splice(ee, 1), b.unset(q, B, M)), q;
        } }), Object.defineProperty(v, "contains", { value: function(q) {
          return this.indexOf(q) !== -1;
        } }), Object.defineProperty(v, "add", { value: function(q, ee) {
          var pe = this.indexOf(q);
          if (ee === void 0) {
            if (pe !== -1)
              return;
            ee = this.length;
          }
          pe !== -1 && this.splice(pe, 1), this.splice(ee, 0, q), pe === -1 && b.set(q, B, M);
        } }), Object.defineProperty(v, "__refs_collection", { value: !0 }), v;
      }(h[p.name] || [], s, p, h);
      Object.defineProperty(h, p.name, { enumerable: p.enumerable, value: m }), m.length && m.forEach(function(v) {
        s.set(v, p.inverse, h);
      });
    }
    function Ei(s, p) {
      if (!(this instanceof Ei))
        return new Ei(s, p);
      s.inverse = p, p.inverse = s, this.props = {}, this.props[s.name] = s, this.props[p.name] = p;
    }
    fi.$inject = ["eventBus"], fi.prototype.add = function(s, p, h) {
      var m = s.id;
      this._validateId(m), Ne(p, ya, m), h && Ne(h, ya, m), this._elements[m] = { element: s, gfx: p, secondaryGfx: h };
    }, fi.prototype.remove = function(s) {
      var p = this._elements, h = s.id || s, m = h && p[h];
      m && (Ne(m.gfx, ya, ""), m.secondaryGfx && Ne(m.secondaryGfx, ya, ""), delete p[h]);
    }, fi.prototype.updateId = function(s, p) {
      this._validateId(p), typeof s == "string" && (s = this.get(s)), this._eventBus.fire("element.updateId", { element: s, newId: p });
      var h = this.getGraphics(s), m = this.getGraphics(s, !0);
      this.remove(s), s.id = p, this.add(s, h, m);
    }, fi.prototype.updateGraphics = function(s, p, h) {
      var m = s.id || s, v = this._elements[m];
      return h ? v.secondaryGfx = p : v.gfx = p, p && Ne(p, ya, m), p;
    }, fi.prototype.get = function(s) {
      var p;
      p = typeof s == "string" ? s : s && Ne(s, ya);
      var h = this._elements[p];
      return h && h.element;
    }, fi.prototype.filter = function(s) {
      var p = [];
      return this.forEach(function(h, m) {
        s(h, m) && p.push(h);
      }), p;
    }, fi.prototype.find = function(s) {
      for (var p = this._elements, h = Object.keys(p), m = 0; m < h.length; m++) {
        var v = p[h[m]], b = v.element;
        if (s(b, v.gfx))
          return b;
      }
    }, fi.prototype.getAll = function() {
      return this.filter(function(s) {
        return s;
      });
    }, fi.prototype.forEach = function(s) {
      var p = this._elements;
      Object.keys(p).forEach(function(h) {
        var m = p[h], v = m.element, b = m.gfx;
        return s(v, b);
      });
    }, fi.prototype.getGraphics = function(s, p) {
      var h = s.id || s, m = this._elements[h];
      return m && (p ? m.secondaryGfx : m.gfx);
    }, fi.prototype._validateId = function(s) {
      if (!s)
        throw new Error("element must have an id");
      if (this._elements[s])
        throw new Error("element with id " + s + " already added");
    }, Ei.prototype.bind = function(s, p) {
      if (typeof p == "string") {
        if (!this.props[p])
          throw new Error("no property <" + p + "> in ref");
        p = this.props[p];
      }
      p.collection ? Km(this, p, s) : function(h, m, v) {
        var b = m.inverse, S = v[m.name];
        Object.defineProperty(v, m.name, { configurable: m.configurable, enumerable: m.enumerable, get: function() {
          return S;
        }, set: function(M) {
          if (M !== S) {
            var B = S;
            S = null, B && h.unset(B, b, v), S = M, h.set(S, b, v);
          }
        } });
      }(this, p, s);
    }, Ei.prototype.ensureRefsCollection = function(s, p) {
      var h = s[p.name];
      return function(m) {
        return m.__refs_collection === !0;
      }(h) || Km(this, p, s), h;
    }, Ei.prototype.ensureBound = function(s, p) {
      (function(h, m) {
        return Object.prototype.hasOwnProperty.call(h, m.name || m);
      })(s, p) || this.bind(s, p);
    }, Ei.prototype.unset = function(s, p, h) {
      s && (this.ensureBound(s, p), p.collection ? this.ensureRefsCollection(s, p).remove(h) : s[p.name] = void 0);
    }, Ei.prototype.set = function(s, p, h) {
      s && (this.ensureBound(s, p), p.collection ? this.ensureRefsCollection(s, p).add(h) : s[p.name] = h);
    };
    var Mp = new Ei({ name: "children", enumerable: !0, collection: !0 }, { name: "parent" }), qm = new Ei({ name: "labels", enumerable: !0, collection: !0 }, { name: "labelTarget" }), Xm = new Ei({ name: "attachers", collection: !0 }, { name: "host" }), Zm = new Ei({ name: "outgoing", collection: !0 }, { name: "source" }), Jm = new Ei({ name: "incoming", collection: !0 }, { name: "target" });
    function cs() {
      Object.defineProperty(this, "businessObject", { writable: !0 }), Object.defineProperty(this, "label", { get: function() {
        return this.labels[0];
      }, set: function(s) {
        var p = this.label, h = this.labels;
        !s && p ? h.remove(p) : h.add(s, 0);
      } }), Mp.bind(this, "parent"), qm.bind(this, "labels"), Zm.bind(this, "outgoing"), Jm.bind(this, "incoming");
    }
    function ls() {
      cs.call(this), Mp.bind(this, "children"), Xm.bind(this, "host"), Xm.bind(this, "attachers");
    }
    function Qm() {
      cs.call(this), Mp.bind(this, "children");
    }
    function ey() {
      ls.call(this), qm.bind(this, "labelTarget");
    }
    function ty() {
      cs.call(this), Zm.bind(this, "source"), Jm.bind(this, "target");
    }
    n(ls, cs), n(Qm, ls), n(ey, ls), n(ty, cs);
    var tw = { connection: ty, shape: ls, label: ey, root: Qm };
    function ga() {
      this._uid = 12;
    }
    ga.prototype.createRoot = function(s) {
      return this.create("root", s);
    }, ga.prototype.createLabel = function(s) {
      return this.create("label", s);
    }, ga.prototype.createShape = function(s) {
      return this.create("shape", s);
    }, ga.prototype.createConnection = function(s) {
      return this.create("connection", s);
    }, ga.prototype.create = function(s, p) {
      return (p = $({}, p || {})).id || (p.id = s + "_" + this._uid++), function(h, m) {
        var v = tw[h];
        if (!v)
          throw new Error("unknown type: <" + h + ">");
        return $(new v(), m);
      }(s, p);
    };
    var Yc = "__fn", nw = Array.prototype.slice;
    function ii() {
      this._listeners = {}, this.on("diagram.destroy", 1, this._destroy, this);
    }
    function us() {
    }
    function di(s, p) {
      this._eventBus = s, this._elementRegistry = p;
    }
    function ny(s, p, h) {
      var m = h || p.firstChild;
      s !== m && p.insertBefore(s, m);
    }
    ii.prototype.on = function(s, p, h, m) {
      if (s = c(s) ? s : [s], d(p) && (m = h, h = p, p = 1e3), !u(p))
        throw new Error("priority must be a number");
      var v = h;
      m && ((v = W(h, m))[Yc] = h[Yc] || h);
      var b = this;
      s.forEach(function(S) {
        b._addListener(S, { priority: p, callback: v, next: null });
      });
    }, ii.prototype.once = function(s, p, h, m) {
      var v = this;
      if (d(p) && (m = h, h = p, p = 1e3), !u(p))
        throw new Error("priority must be a number");
      function b() {
        b.__isTomb = !0;
        var S = h.apply(m, arguments);
        return v.off(s, b), S;
      }
      b[Yc] = h, this.on(s, p, b);
    }, ii.prototype.off = function(s, p) {
      s = c(s) ? s : [s];
      var h = this;
      s.forEach(function(m) {
        h._removeListener(m, p);
      });
    }, ii.prototype.createEvent = function(s) {
      var p = new us();
      return p.init(s), p;
    }, ii.prototype.fire = function(s, p) {
      var h, m, v, b;
      if (b = nw.call(arguments), typeof s == "object" && (s = (p = s).type), !s)
        throw new Error("no event type specified");
      if (m = this._listeners[s]) {
        h = p instanceof us ? p : this.createEvent(p), b[0] = h;
        var S = h.type;
        s !== S && (h.type = s);
        try {
          v = this._invokeListeners(h, b, m);
        } finally {
          s !== S && (h.type = S);
        }
        return v === void 0 && h.defaultPrevented && (v = !1), v;
      }
    }, ii.prototype.handleError = function(s) {
      return this.fire("error", { error: s }) === !1;
    }, ii.prototype._destroy = function() {
      this._listeners = {};
    }, ii.prototype._invokeListeners = function(s, p, h) {
      for (var m; h && !s.cancelBubble; )
        m = this._invokeListener(s, p, h), h = h.next;
      return m;
    }, ii.prototype._invokeListener = function(s, p, h) {
      var m;
      if (h.callback.__isTomb)
        return m;
      try {
        m = function(v, b) {
          return v.apply(null, b);
        }(h.callback, p), m !== void 0 && (s.returnValue = m, s.stopPropagation()), m === !1 && s.preventDefault();
      } catch (v) {
        if (!this.handleError(v))
          throw console.error("unhandled error in event listener", v), v;
      }
      return m;
    }, ii.prototype._addListener = function(s, p) {
      var h, m = this._getListeners(s);
      if (m) {
        for (; m; ) {
          if (m.priority < p.priority)
            return p.next = m, void (h ? h.next = p : this._setListeners(s, p));
          h = m, m = m.next;
        }
        h.next = p;
      } else
        this._setListeners(s, p);
    }, ii.prototype._getListeners = function(s) {
      return this._listeners[s];
    }, ii.prototype._setListeners = function(s, p) {
      this._listeners[s] = p;
    }, ii.prototype._removeListener = function(s, p) {
      var h, m, v, b = this._getListeners(s);
      if (p)
        for (; b; )
          h = b.next, (v = b.callback) !== p && v[Yc] !== p || (m ? m.next = h : this._setListeners(s, h)), m = b, b = h;
      else
        this._setListeners(s, null);
    }, us.prototype.stopPropagation = function() {
      this.cancelBubble = !0;
    }, us.prototype.preventDefault = function() {
      this.defaultPrevented = !0;
    }, us.prototype.init = function(s) {
      $(this, s || {});
    }, di.$inject = ["eventBus", "elementRegistry"], di.prototype._getChildrenContainer = function(s) {
      var p, h = this._elementRegistry.getGraphics(s);
      return s.parent ? (p = function(m) {
        return m.parentNode.childNodes[1];
      }(h), p || (E(p = Ee("g")).add("djs-children"), fe(h.parentNode, p))) : p = h, p;
    }, di.prototype._clear = function(s) {
      var p = function(h) {
        return h.childNodes[0];
      }(s);
      return Ic(p), p;
    }, di.prototype._createContainer = function(s, p, h, m) {
      var v = Ee("g");
      E(v).add("djs-group"), h !== void 0 ? ny(v, p, p.childNodes[h]) : fe(p, v);
      var b = Ee("g");
      E(b).add("djs-element"), E(b).add("djs-" + s), m && E(b).add("djs-frame"), fe(v, b);
      var S = Ee("g");
      return E(S).add("djs-visual"), fe(b, S), b;
    }, di.prototype.create = function(s, p, h) {
      var m = this._getChildrenContainer(p.parent);
      return this._createContainer(s, m, h, Rm(p));
    }, di.prototype.updateContainments = function(s) {
      var p, h = this, m = this._elementRegistry;
      p = w(s, function(v, b) {
        return b.parent && (v[b.parent.id] = b.parent), v;
      }, {}), x(p, function(v) {
        var b = v.children;
        if (b) {
          var S = h._getChildrenContainer(v);
          x(b.slice().reverse(), function(M) {
            ny(m.getGraphics(M).parentNode, S);
          });
        }
      });
    }, di.prototype.drawShape = function(s, p, h = {}) {
      return this._eventBus.fire("render.shape", { gfx: s, element: p, attrs: h });
    }, di.prototype.getShapePath = function(s) {
      return this._eventBus.fire("render.getShapePath", s);
    }, di.prototype.drawConnection = function(s, p, h = {}) {
      return this._eventBus.fire("render.connection", { gfx: s, element: p, attrs: h });
    }, di.prototype.getConnectionPath = function(s) {
      return this._eventBus.fire("render.getConnectionPath", s);
    }, di.prototype.update = function(s, p, h) {
      if (p.parent) {
        var m = this._clear(h);
        if (s === "shape")
          this.drawShape(m, p), _m(h, p.x, p.y);
        else {
          if (s !== "connection")
            throw new Error("unknown type: " + s);
          this.drawConnection(m, p);
        }
        p.hidden ? Ne(h, "display", "none") : Ne(h, "display", "block");
      }
    }, di.prototype.remove = function(s) {
      F(this._elementRegistry.getGraphics(s).parentNode);
    };
    var iw = { __depends__: [Q1], __init__: ["canvas"], canvas: ["type", qe], elementRegistry: ["type", fi], elementFactory: ["type", ga], eventBus: ["type", ii], graphicsFactory: ["type", di] };
    function rw(s) {
      return function(p) {
        var h = new Wm(p);
        return h.init(), h;
      }([{ config: ["value", s = s || {}] }, iw].concat(s.modules || []));
    }
    function Gr(s, p) {
      this._injector = p || rw(s), this.get("eventBus").fire("diagram.init");
    }
    function Dp() {
    }
    function iy(s, p) {
      this.model = s, this.properties = p;
    }
    Gr.prototype.get = function(s, p) {
      return this._injector.get(s, p);
    }, Gr.prototype.invoke = function(s, p, h) {
      return this._injector.invoke(s, p, h);
    }, Gr.prototype.destroy = function() {
      this.get("eventBus").fire("diagram.destroy");
    }, Gr.prototype.clear = function() {
      this.get("eventBus").fire("diagram.clear");
    }, Dp.prototype.get = function(s) {
      return this.$model.properties.get(this, s);
    }, Dp.prototype.set = function(s, p) {
      this.$model.properties.set(this, s, p);
    }, iy.prototype.createType = function(s) {
      var p = this.model, h = this.properties, m = Object.create(Dp.prototype);
      x(s.properties, function(S) {
        S.isMany || S.default === void 0 || (m[S.name] = S.default);
      }), h.defineModel(m, p), h.defineDescriptor(m, s);
      var v = s.ns.name;
      function b(S) {
        h.define(this, "$type", { value: v, enumerable: !0 }), h.define(this, "$attrs", { value: {} }), h.define(this, "$parent", { writable: !0 }), x(S, W(function(M, B) {
          this.set(B, M);
        }, this));
      }
      return b.prototype = m, b.hasType = m.$instanceOf = this.model.hasType, h.defineModel(b, p), h.defineDescriptor(b, s), b;
    };
    var ow = { String: !0, Boolean: !0, Integer: !0, Real: !0, Element: !0 }, ry = { String: function(s) {
      return s;
    }, Boolean: function(s) {
      return s === "true";
    }, Integer: function(s) {
      return parseInt(s, 10);
    }, Real: function(s) {
      return parseFloat(s);
    } };
    function Op(s, p) {
      var h = ry[s];
      return h ? h(p) : p;
    }
    function Np(s) {
      return !!ow[s];
    }
    function oy(s) {
      return !!ry[s];
    }
    function jn(s, p) {
      var h, m, v = s.split(/:/);
      if (v.length === 1)
        h = s, m = p;
      else {
        if (v.length !== 2)
          throw new Error("expected <prefix:localName> or <localName>, got " + s);
        h = v[1], m = v[0];
      }
      return { name: s = (m ? m + ":" : "") + h, prefix: m, localName: h };
    }
    function hi(s) {
      this.ns = s, this.name = s.name, this.allTypes = [], this.allTypesByName = {}, this.properties = [], this.propertiesByName = {};
    }
    function Ur(s, p) {
      this.packageMap = {}, this.typeMap = {}, this.packages = [], this.properties = p, x(s, W(this.registerPackage, this));
    }
    function ay(s, p, h) {
      var m = p[h];
      if (m in s)
        throw new Error("package with " + h + " <" + m + "> already defined");
    }
    function Bo(s) {
      this.model = s;
    }
    function sy(s, p, h) {
      Object.defineProperty(s, p.name, { enumerable: !p.isReference, writable: !0, value: h, configurable: !0 });
    }
    function Bp(s) {
      return s.replace(/^:/, "");
    }
    function wi(s, p = {}) {
      this.properties = new Bo(this), this.factory = new iy(this, this.properties), this.registry = new Ur(s, this.properties), this.typeCache = {}, this.config = p;
    }
    hi.prototype.build = function() {
      return function(s, p) {
        let h = {}, m = Object(s);
        return x(p, function(v) {
          v in m && (h[v] = s[v]);
        }), h;
      }(this, ["ns", "name", "allTypes", "allTypesByName", "properties", "propertiesByName", "bodyProperty", "idProperty"]);
    }, hi.prototype.addProperty = function(s, p, h) {
      typeof p == "boolean" && (h = p, p = void 0), this.addNamedProperty(s, h !== !1);
      var m = this.properties;
      p !== void 0 ? m.splice(p, 0, s) : m.push(s);
    }, hi.prototype.replaceProperty = function(s, p, h) {
      var m = s.ns, v = this.properties, b = this.propertiesByName, S = s.name !== p.name;
      if (s.isId) {
        if (!p.isId)
          throw new Error("property <" + p.ns.name + "> must be id property to refine <" + s.ns.name + ">");
        this.setIdProperty(p, !1);
      }
      if (s.isBody) {
        if (!p.isBody)
          throw new Error("property <" + p.ns.name + "> must be body property to refine <" + s.ns.name + ">");
        this.setBodyProperty(p, !1);
      }
      var M = v.indexOf(s);
      if (M === -1)
        throw new Error("property <" + m.name + "> not found in property list");
      v.splice(M, 1), this.addProperty(p, h ? void 0 : M, S), b[m.name] = b[m.localName] = p;
    }, hi.prototype.redefineProperty = function(s, p, h) {
      var m = s.ns.prefix, v = p.split("#"), b = jn(v[0], m), S = jn(v[1], b.prefix).name, M = this.propertiesByName[S];
      if (!M)
        throw new Error("refined property <" + S + "> not found");
      this.replaceProperty(M, s, h), delete s.redefines;
    }, hi.prototype.addNamedProperty = function(s, p) {
      var h = s.ns, m = this.propertiesByName;
      p && (this.assertNotDefined(s, h.name), this.assertNotDefined(s, h.localName)), m[h.name] = m[h.localName] = s;
    }, hi.prototype.removeNamedProperty = function(s) {
      var p = s.ns, h = this.propertiesByName;
      delete h[p.name], delete h[p.localName];
    }, hi.prototype.setBodyProperty = function(s, p) {
      if (p && this.bodyProperty)
        throw new Error("body property defined multiple times (<" + this.bodyProperty.ns.name + ">, <" + s.ns.name + ">)");
      this.bodyProperty = s;
    }, hi.prototype.setIdProperty = function(s, p) {
      if (p && this.idProperty)
        throw new Error("id property defined multiple times (<" + this.idProperty.ns.name + ">, <" + s.ns.name + ">)");
      this.idProperty = s;
    }, hi.prototype.assertNotTrait = function(s) {
      if ((s.extends || []).length)
        throw new Error(`cannot create <${s.name}> extending <${s.extends}>`);
    }, hi.prototype.assertNotDefined = function(s, p) {
      var h = s.name, m = this.propertiesByName[h];
      if (m)
        throw new Error("property <" + h + "> already defined; override of <" + m.definedBy.ns.name + "#" + m.ns.name + "> by <" + s.definedBy.ns.name + "#" + s.ns.name + "> not allowed without redefines");
    }, hi.prototype.hasProperty = function(s) {
      return this.propertiesByName[s];
    }, hi.prototype.addTrait = function(s, p) {
      p && this.assertNotTrait(s);
      var h = this.allTypesByName, m = this.allTypes, v = s.name;
      v in h || (x(s.properties, W(function(b) {
        b = $({}, b, { name: b.ns.localName, inherited: p }), Object.defineProperty(b, "definedBy", { value: s });
        var S = b.replaces, M = b.redefines;
        S || M ? this.redefineProperty(b, S || M, S) : (b.isBody && this.setBodyProperty(b), b.isId && this.setIdProperty(b), this.addProperty(b));
      }, this)), m.push(s), h[v] = s);
    }, Ur.prototype.getPackage = function(s) {
      return this.packageMap[s];
    }, Ur.prototype.getPackages = function() {
      return this.packages;
    }, Ur.prototype.registerPackage = function(s) {
      s = $({}, s);
      var p = this.packageMap;
      ay(p, s, "prefix"), ay(p, s, "uri"), x(s.types, W(function(h) {
        this.registerType(h, s);
      }, this)), p[s.uri] = p[s.prefix] = s, this.packages.push(s);
    }, Ur.prototype.registerType = function(s, p) {
      var h = jn((s = $({}, s, { superClass: (s.superClass || []).slice(), extends: (s.extends || []).slice(), properties: (s.properties || []).slice(), meta: $(s.meta || {}) })).name, p.prefix), m = h.name, v = {};
      x(s.properties, W(function(b) {
        var S = jn(b.name, h.prefix), M = S.name;
        Np(b.type) || (b.type = jn(b.type, S.prefix).name), $(b, { ns: S, name: M }), v[M] = b;
      }, this)), $(s, { ns: h, name: m, propertiesByName: v }), x(s.extends, W(function(b) {
        var S = jn(b, h.prefix), M = this.typeMap[S.name];
        M.traits = M.traits || [], M.traits.push(m);
      }, this)), this.definePackage(s, p), this.typeMap[m] = s;
    }, Ur.prototype.mapTypes = function(s, p, h) {
      var m = Np(s.name) ? { name: s.name } : this.typeMap[s.name], v = this;
      function b(M, B) {
        var q = jn(M, Np(M) ? "" : s.prefix);
        v.mapTypes(q, p, B);
      }
      function S(M) {
        return b(M, !0);
      }
      if (!m)
        throw new Error("unknown type <" + s.name + ">");
      x(m.superClass, h ? S : function(M) {
        return b(M, !1);
      }), p(m, !h), x(m.traits, S);
    }, Ur.prototype.getEffectiveDescriptor = function(s) {
      var p = jn(s), h = new hi(p);
      this.mapTypes(p, function(v, b) {
        h.addTrait(v, b);
      });
      var m = h.build();
      return this.definePackage(m, m.allTypes[m.allTypes.length - 1].$pkg), m;
    }, Ur.prototype.definePackage = function(s, p) {
      this.properties.define(s, "$pkg", { value: p });
    }, Bo.prototype.set = function(s, p, h) {
      if (!f(p) || !p.length)
        throw new TypeError("property name must be a non-empty string");
      var m = this.getProperty(s, p), v = m && m.name;
      h === void 0 ? m ? delete s[v] : delete s.$attrs[Bp(p)] : m ? v in s ? s[v] = h : sy(s, m, h) : s.$attrs[Bp(p)] = h;
    }, Bo.prototype.get = function(s, p) {
      var h = this.getProperty(s, p);
      if (!h)
        return s.$attrs[Bp(p)];
      var m = h.name;
      return !s[m] && h.isMany && sy(s, h, []), s[m];
    }, Bo.prototype.define = function(s, p, h) {
      if (!h.writable) {
        var m = h.value;
        delete (h = $({}, h, { get: function() {
          return m;
        } })).value;
      }
      Object.defineProperty(s, p, h);
    }, Bo.prototype.defineDescriptor = function(s, p) {
      this.define(s, "$descriptor", { value: p });
    }, Bo.prototype.defineModel = function(s, p) {
      this.define(s, "$model", { value: p });
    }, Bo.prototype.getProperty = function(s, p) {
      var h = this.model, m = h.getPropertyDescriptor(s, p);
      if (m)
        return m;
      if (p.includes(":"))
        return null;
      const v = h.config.strict;
      if (v !== void 0) {
        const b = new TypeError(`unknown property <${p}> on <${s.$type}>`);
        if (v)
          throw b;
        typeof console < "u" && console.warn(b);
      }
      return null;
    }, wi.prototype.create = function(s, p) {
      var h = this.getType(s);
      if (!h)
        throw new Error("unknown type <" + s + ">");
      return new h(p);
    }, wi.prototype.getType = function(s) {
      var p = this.typeCache, h = f(s) ? s : s.ns.name, m = p[h];
      return m || (s = this.registry.getEffectiveDescriptor(h), m = p[h] = this.factory.createType(s)), m;
    }, wi.prototype.createAny = function(s, p, h) {
      var m = jn(s), v = { $type: s, $instanceOf: function(S) {
        return S === this.$type;
      }, get: function(S) {
        return this[S];
      }, set: function(S, M) {
        (function(B, q, ee) {
          let pe = B;
          x(q, function(be, Te) {
            if (typeof be != "number" && typeof be != "string")
              throw new Error("illegal key type: " + typeof be + ". Key should be of type number or string.");
            if (be === "constructor")
              throw new Error("illegal key: constructor");
            if (be === "__proto__")
              throw new Error("illegal key: __proto__");
            let Re = q[Te + 1], Ie = pe[be];
            a(Re) && Ie == null && (Ie = pe[be] = isNaN(+Re) ? {} : []), o(Re) ? o(ee) ? delete pe[be] : pe[be] = ee : pe = Ie;
          });
        })(this, [S], M);
      } }, b = { name: s, isGeneric: !0, ns: { prefix: m.prefix, localName: m.localName, uri: p } };
      return this.properties.defineDescriptor(v, b), this.properties.defineModel(v, this), this.properties.define(v, "get", { enumerable: !1, writable: !0 }), this.properties.define(v, "set", { enumerable: !1, writable: !0 }), this.properties.define(v, "$parent", { enumerable: !1, writable: !0 }), this.properties.define(v, "$instanceOf", { enumerable: !1, writable: !0 }), x(h, function(S, M) {
        l(S) && S.value !== void 0 ? v[S.name] = S.value : v[M] = S;
      }), v;
    }, wi.prototype.getPackage = function(s) {
      return this.registry.getPackage(s);
    }, wi.prototype.getPackages = function() {
      return this.registry.getPackages();
    }, wi.prototype.getElementDescriptor = function(s) {
      return s.$descriptor;
    }, wi.prototype.hasType = function(s, p) {
      return p === void 0 && (p = s, s = this), p in s.$model.getElementDescriptor(s).allTypesByName;
    }, wi.prototype.getPropertyDescriptor = function(s, p) {
      return this.getElementDescriptor(s).propertiesByName[p];
    }, wi.prototype.getTypeDescriptor = function(s) {
      return this.registry.typeMap[s];
    };
    var aw = String.fromCharCode, sw = Object.prototype.hasOwnProperty, cw = /&#(\d+);|&#x([0-9a-f]+);|&(\w+);/gi, ps = { amp: "&", apos: "'", gt: ">", lt: "<", quot: '"' };
    function lw(s, p, h, m) {
      return m ? sw.call(ps, m) ? ps[m] : "&" + m + ";" : aw(p || parseInt(h, 16));
    }
    function Lo(s) {
      return s.length > 3 && s.indexOf("&") !== -1 ? s.replace(cw, lw) : s;
    }
    Object.keys(ps).forEach(function(s) {
      ps[s.toUpperCase()] = ps[s];
    });
    var cy = "xsi:type", ly = "non-whitespace outside of root node";
    function va(s) {
      return new Error(s);
    }
    function uy(s) {
      return "missing namespace for prefix <" + s + ">";
    }
    function Kc(s) {
      return { get: s, enumerable: !0 };
    }
    function uw(s) {
      var p, h = {};
      for (p in s)
        h[p] = s[p];
      return h;
    }
    function Lp(s) {
      return s + "$uri";
    }
    function py() {
      return { line: 0, column: 0 };
    }
    function pw(s) {
      throw s;
    }
    function fy(s) {
      if (!this)
        return new fy(s);
      var p, h, m, v, b, S, M, B, q, ee = s && s.proxy, pe = pw, be = py, Te = !1, Re = !1, Ie = null, re = !1;
      function ve(te) {
        te instanceof Error || (te = va(te)), Ie = te, pe(te, be);
      }
      function Y(te) {
        b && (te instanceof Error || (te = va(te)), b(te, be));
      }
      this.on = function(te, J) {
        if (typeof J != "function")
          throw va("required args <name, cb>");
        switch (te) {
          case "openTag":
            h = J;
            break;
          case "text":
            p = J;
            break;
          case "closeTag":
            m = J;
            break;
          case "error":
            pe = J;
            break;
          case "warn":
            b = J;
            break;
          case "cdata":
            v = J;
            break;
          case "attention":
            B = J;
            break;
          case "question":
            M = J;
            break;
          case "comment":
            S = J;
            break;
          default:
            throw va("unsupported event: " + te);
        }
        return this;
      }, this.ns = function(te) {
        if (te === void 0 && (te = {}), typeof te != "object")
          throw va("required args <nsMap={}>");
        var J, ce = {};
        for (J in te)
          ce[J] = te[J];
        return ce["http://www.w3.org/2001/XMLSchema-instance"] = "xsi", Re = !0, q = ce, this;
      }, this.parse = function(te) {
        if (typeof te != "string")
          throw va("required args <xml=string>");
        return Ie = null, function(J) {
          var ce, ge, Ze, We, De, Ft, ye, me, He, tt, st, mi = Re ? [] : null, Ot = Re ? function(Hn) {
            var Dn, Ut, ri = {};
            for (Dn in Hn)
              ri[Ut = Hn[Dn]] = Ut, ri[Lp(Ut)] = Dn;
            return ri;
          }(q) : null, ji = [], Si = 0, En = !1, qn = !1, St = 0, lt = 0, Ea = "", er = 0;
          function wa() {
            if (st !== null)
              return st;
            var Hn, Dn, Ut, ri, wn, Nt, Sn, xt, yi, L, R, T = Re && Ot.xmlns, U = Re && Te ? [] : null, Q = er, xe = Ea, Ge = xe.length, ut = {}, Yt = {};
            e:
              for (; Q < Ge; Q++)
                if (yi = !1, !((L = xe.charCodeAt(Q)) === 32 || L < 14 && L > 8)) {
                  for ((L < 65 || L > 122 || L > 90 && L < 97) && L !== 95 && L !== 58 && (Y("illegal first char attribute name"), yi = !0), R = Q + 1; R < Ge; R++)
                    if (!((L = xe.charCodeAt(R)) > 96 && L < 123 || L > 64 && L < 91 || L > 47 && L < 59 || L === 46 || L === 45 || L === 95)) {
                      if (L === 32 || L < 14 && L > 8) {
                        Y("missing attribute value"), Q = R;
                        continue e;
                      }
                      if (L === 61)
                        break;
                      Y("illegal attribute name char"), yi = !0;
                    }
                  if ((xt = xe.substring(Q, R)) === "xmlns:xmlns" && (Y("illegal declaration of xmlns"), yi = !0), (L = xe.charCodeAt(R + 1)) === 34)
                    (R = xe.indexOf('"', Q = R + 2)) === -1 && (R = xe.indexOf("'", Q)) !== -1 && (Y("attribute value quote missmatch"), yi = !0);
                  else if (L === 39)
                    (R = xe.indexOf("'", Q = R + 2)) === -1 && (R = xe.indexOf('"', Q)) !== -1 && (Y("attribute value quote missmatch"), yi = !0);
                  else
                    for (Y("missing attribute value quotes"), yi = !0, R += 1; R < Ge && !((L = xe.charCodeAt(R + 1)) === 32 || L < 14 && L > 8); R++)
                      ;
                  for (R === -1 && (Y("missing closing quotes"), R = Ge, yi = !0), yi || (Nt = xe.substring(Q, R)), Q = R; R + 1 < Ge && !((L = xe.charCodeAt(R + 1)) === 32 || L < 14 && L > 8); R++)
                    Q === R && (Y("illegal character after attribute end"), yi = !0);
                  if (Q = R + 1, !yi)
                    if (xt in Yt)
                      Y("attribute <" + xt + "> already defined");
                    else if (Yt[xt] = !0, Re)
                      if (Te) {
                        if ((wn = xt === "xmlns" ? "xmlns" : xt.charCodeAt(0) === 120 && xt.substr(0, 6) === "xmlns:" ? xt.substr(6) : null) !== null) {
                          if (Hn = Lo(Nt), Dn = Lp(wn), !(Sn = q[Hn])) {
                            if (wn === "xmlns" || Dn in Ot && Ot[Dn] !== Hn)
                              do
                                Sn = "ns" + Si++;
                              while (Ot[Sn] !== void 0);
                            else
                              Sn = wn;
                            q[Hn] = Sn;
                          }
                          Ot[wn] !== Sn && (ri || (Ot = uw(Ot), ri = !0), Ot[wn] = Sn, wn === "xmlns" && (Ot[Lp(Sn)] = Hn, T = Sn), Ot[Dn] = Hn), ut[xt] = Nt;
                          continue;
                        }
                        U.push(xt, Nt);
                      } else
                        (L = xt.indexOf(":")) !== -1 ? (Ut = Ot[xt.substring(0, L)]) ? ((xt = T === Ut ? xt.substr(L + 1) : Ut + xt.substr(L)) === cy && ((L = Nt.indexOf(":")) !== -1 ? (Ut = Nt.substring(0, L), Nt = (Ut = Ot[Ut] || Ut) + Nt.substring(L)) : Nt = T + ":" + Nt), ut[xt] = Nt) : Y(uy(xt.substring(0, L))) : ut[xt] = Nt;
                    else
                      ut[xt] = Nt;
                }
            if (Te)
              for (Q = 0, Ge = U.length; Q < Ge; Q++) {
                if (xt = U[Q++], Nt = U[Q], (L = xt.indexOf(":")) !== -1) {
                  if (!(Ut = Ot[xt.substring(0, L)])) {
                    Y(uy(xt.substring(0, L)));
                    continue;
                  }
                  (xt = T === Ut ? xt.substr(L + 1) : Ut + xt.substr(L)) === cy && ((L = Nt.indexOf(":")) !== -1 ? (Ut = Nt.substring(0, L), Nt = (Ut = Ot[Ut] || Ut) + Nt.substring(L)) : Nt = T + ":" + Nt);
                }
                ut[xt] = Nt;
              }
            return st = ut;
          }
          function tl() {
            for (var Hn, Dn, Ut = /(\r\n|\r|\n)/g, ri = 0, wn = 0, Nt = 0, Sn = lt; St >= Nt && (Hn = Ut.exec(J)) && !((Sn = Hn[0].length + Hn.index) > St); )
              ri += 1, Nt = Sn;
            return St == -1 ? (wn = Sn, Dn = J.substring(lt)) : lt === 0 ? Dn = J.substring(lt, St) : (wn = St - Nt, Dn = lt == -1 ? J.substring(St) : J.substring(St, lt + 1)), { data: Dn, line: ri, column: wn };
          }
          for (be = tl, ee && (tt = Object.create({}, { name: Kc(function() {
            return me;
          }), originalName: Kc(function() {
            return He;
          }), attrs: Kc(wa), ns: Kc(function() {
            return Ot;
          }) })); lt !== -1; ) {
            if ((St = J.charCodeAt(lt) === 60 ? lt : J.indexOf("<", lt)) === -1)
              return ji.length ? ve("unexpected end of file") : lt === 0 ? ve("missing start tag") : void (lt < J.length && J.substring(lt).trim() && Y(ly));
            if (lt !== St) {
              if (ji.length) {
                if (p && (p(J.substring(lt, St), Lo, be), re))
                  return;
              } else if (J.substring(lt, St).trim() && (Y(ly), re))
                return;
            }
            if ((De = J.charCodeAt(St + 1)) === 33) {
              if ((We = J.charCodeAt(St + 2)) === 91 && J.substr(St + 3, 6) === "CDATA[") {
                if ((lt = J.indexOf("]]>", St)) === -1)
                  return ve("unclosed cdata");
                if (v && (v(J.substring(St + 9, lt), be), re))
                  return;
                lt += 3;
                continue;
              }
              if (We === 45 && J.charCodeAt(St + 3) === 45) {
                if ((lt = J.indexOf("-->", St)) === -1)
                  return ve("unclosed comment");
                if (S && (S(J.substring(St + 4, lt), Lo, be), re))
                  return;
                lt += 3;
                continue;
              }
            }
            if (De !== 63) {
              for (ge = St + 1; ; ge++) {
                if (Ft = J.charCodeAt(ge), isNaN(Ft))
                  return lt = -1, ve("unclosed tag");
                if (Ft === 34)
                  ge = (We = J.indexOf('"', ge + 1)) !== -1 ? We : ge;
                else if (Ft === 39)
                  ge = (We = J.indexOf("'", ge + 1)) !== -1 ? We : ge;
                else if (Ft === 62) {
                  lt = ge;
                  break;
                }
              }
              if (De !== 33) {
                if (st = {}, De === 47) {
                  if (En = !1, qn = !0, !ji.length)
                    return ve("missing open tag");
                  if (ge = me = ji.pop(), We = St + 2 + ge.length, J.substring(St + 2, We) !== ge)
                    return ve("closing tag mismatch");
                  for (; We < lt; We++)
                    if (!((De = J.charCodeAt(We)) === 32 || De > 8 && De < 14))
                      return ve("close tag");
                } else {
                  if (J.charCodeAt(lt - 1) === 47 ? (ge = me = J.substring(St + 1, lt - 1), En = !0, qn = !0) : (ge = me = J.substring(St + 1, lt), En = !0, qn = !1), !(De > 96 && De < 123 || De > 64 && De < 91 || De === 95 || De === 58))
                    return ve("illegal first char nodeName");
                  for (We = 1, Ze = ge.length; We < Ze; We++)
                    if (!((De = ge.charCodeAt(We)) > 96 && De < 123 || De > 64 && De < 91 || De > 47 && De < 59 || De === 45 || De === 95 || De == 46)) {
                      if (De === 32 || De < 14 && De > 8) {
                        me = ge.substring(0, We), st = null;
                        break;
                      }
                      return ve("invalid nodeName");
                    }
                  qn || ji.push(me);
                }
                if (Re) {
                  if (ce = Ot, En && (qn || mi.push(ce), st === null && (Te = ge.indexOf("xmlns", We) !== -1) && (er = We, Ea = ge, wa(), Te = !1)), He = me, (De = me.indexOf(":")) !== -1) {
                    if (!(ye = Ot[me.substring(0, De)]))
                      return ve("missing namespace on <" + He + ">");
                    me = me.substr(De + 1);
                  } else
                    ye = Ot.xmlns;
                  ye && (me = ye + ":" + me);
                }
                if (En && (er = We, Ea = ge, h && (ee ? h(tt, Lo, qn, be) : h(me, wa, Lo, qn, be), re)))
                  return;
                if (qn) {
                  if (m && (m(ee ? tt : me, Lo, En, be), re))
                    return;
                  Re && (Ot = En ? ce : mi.pop());
                }
                lt += 1;
              } else {
                if (B && (B(J.substring(St, lt + 1), Lo, be), re))
                  return;
                lt += 1;
              }
            } else {
              if ((lt = J.indexOf("?>", St)) === -1)
                return ve("unclosed question");
              if (M && (M(J.substring(St, lt + 2), be), re))
                return;
              lt += 2;
            }
          }
        }(te), be = py, re = !1, Ie;
      }, this.stop = function() {
        re = !0;
      };
    }
    function dy(s) {
      return s.xml && s.xml.tagAlias === "lowerCase";
    }
    var fw = { xsi: "http://www.w3.org/2001/XMLSchema-instance", xml: "http://www.w3.org/XML/1998/namespace" }, qc = "xsi:type";
    function hy(s) {
      return s.xml && s.xml.serialize;
    }
    function my(s) {
      return hy(s) === qc;
    }
    function yy(s, p) {
      return dy(p) ? s.prefix + ":" + ((h = s.localName).charAt(0).toUpperCase() + h.slice(1)) : s.name;
      var h;
    }
    function Yr(s) {
      return new Error(s);
    }
    function Er(s) {
      return s.$descriptor;
    }
    function dw(s) {
      $(this, s), this.elementsById = {}, this.references = [], this.warnings = [], this.addReference = function(p) {
        this.references.push(p);
      }, this.addElement = function(p) {
        if (!p)
          throw Yr("expected element");
        var h, m = this.elementsById, v = Er(p).idProperty;
        if (v && (h = p.get(v.name))) {
          if (!/^([a-z][\w-.]*:)?[a-z_][\w-.]*$/i.test(h))
            throw new Error("illegal ID <" + h + ">");
          if (m[h])
            throw Yr("duplicate ID <" + h + ">");
          m[h] = p;
        }
      }, this.addWarning = function(p) {
        this.warnings.push(p);
      };
    }
    function fs() {
    }
    function Ip() {
    }
    function _a() {
    }
    function ds(s, p) {
      this.property = s, this.context = p;
    }
    function $p(s, p) {
      this.element = p, this.propertyDesc = s;
    }
    function Xc() {
    }
    function Fn(s, p, h) {
      this.model = s, this.type = s.getType(p), this.context = h;
    }
    function jp(s, p, h) {
      Fn.call(this, s, p, h);
    }
    function ba(s, p, h) {
      this.model = s, this.context = h;
    }
    function Fp(s) {
      s instanceof wi && (s = { model: s }), $(this, { lax: !1 }, s);
    }
    fs.prototype.handleEnd = function() {
    }, fs.prototype.handleText = function() {
    }, fs.prototype.handleNode = function() {
    }, Ip.prototype = Object.create(fs.prototype), Ip.prototype.handleNode = function() {
      return this;
    }, _a.prototype = Object.create(fs.prototype), _a.prototype.handleText = function(s) {
      this.body = (this.body || "") + s;
    }, ds.prototype = Object.create(_a.prototype), ds.prototype.handleNode = function(s) {
      if (this.element)
        throw Yr("expected no sub nodes");
      return this.element = this.createReference(s), this;
    }, ds.prototype.handleEnd = function() {
      this.element.id = this.body;
    }, ds.prototype.createReference = function(s) {
      return { property: this.property.ns.name, id: "" };
    }, $p.prototype = Object.create(_a.prototype), $p.prototype.handleEnd = function() {
      var s = this.body || "", p = this.element, h = this.propertyDesc;
      s = Op(h.type, s), h.isMany ? p.get(h.name).push(s) : p.set(h.name, s);
    }, Xc.prototype = Object.create(_a.prototype), Xc.prototype.handleNode = function(s) {
      var p = this, h = this.element;
      return h ? p = this.handleChild(s) : (h = this.element = this.createElement(s), this.context.addElement(h)), p;
    }, Fn.prototype = Object.create(Xc.prototype), Fn.prototype.addReference = function(s) {
      this.context.addReference(s);
    }, Fn.prototype.handleText = function(s) {
      if (!Er(this.element).bodyProperty)
        throw Yr("unexpected body text <" + s + ">");
      _a.prototype.handleText.call(this, s);
    }, Fn.prototype.handleEnd = function() {
      var s = this.body, p = this.element, h = Er(p).bodyProperty;
      h && s !== void 0 && (s = Op(h.type, s), p.set(h.name, s));
    }, Fn.prototype.createElement = function(s) {
      var p, h = s.attributes, m = this.type, v = Er(m), b = this.context, S = new m({}), M = this.model;
      return x(h, function(B, q) {
        var ee = v.propertiesByName[q];
        ee && ee.isReference ? ee.isMany ? x(B.split(" "), function(pe) {
          b.addReference({ element: S, property: ee.ns.name, id: pe });
        }) : b.addReference({ element: S, property: ee.ns.name, id: B }) : (ee ? B = Op(ee.type, B) : q !== "xmlns" && (p = jn(q, v.ns.prefix), M.getPackage(p.prefix) && b.addWarning({ message: "unknown attribute <" + q + ">", element: S, property: q, value: B })), S.set(q, B));
      }), S;
    }, Fn.prototype.getPropertyForNode = function(s) {
      var p, h, m = jn(s.name), v = this.type, b = this.model, S = Er(v), M = m.name, B = S.propertiesByName[M];
      if (B && !B.isAttr)
        return my(B) && (p = s.attributes[qc]) ? (p = function(ee, pe) {
          var be = jn(ee);
          return function(Te, Re) {
            var Ie = Te.name, re = Te.localName, ve = Re.xml && Re.xml.typePrefix;
            return ve && re.indexOf(ve) === 0 ? Te.prefix + ":" + re.slice(ve.length) : Ie;
          }(be, pe.getPackage(be.prefix));
        }(p, b), $({}, B, { effectiveType: Er(h = b.getType(p)).name })) : B;
      var q = b.getPackage(m.prefix);
      if (q) {
        if (p = yy(m, q), h = b.getType(p), B = g(S.properties, function(ee) {
          return !ee.isVirtual && !ee.isReference && !ee.isAttribute && h.hasType(ee.type);
        }))
          return $({}, B, { effectiveType: Er(h).name });
      } else if (B = g(S.properties, function(ee) {
        return !ee.isReference && !ee.isAttribute && ee.type === "Element";
      }))
        return B;
      throw Yr("unrecognized element <" + m.name + ">");
    }, Fn.prototype.toString = function() {
      return "ElementDescriptor[" + Er(this.type).name + "]";
    }, Fn.prototype.valueHandler = function(s, p) {
      return new $p(s, p);
    }, Fn.prototype.referenceHandler = function(s) {
      return new ds(s, this.context);
    }, Fn.prototype.handler = function(s) {
      return s === "Element" ? new ba(this.model, s, this.context) : new Fn(this.model, s, this.context);
    }, Fn.prototype.handleChild = function(s) {
      var p, h, m, v;
      if (p = this.getPropertyForNode(s), m = this.element, oy(h = p.effectiveType || p.type))
        return this.valueHandler(p, m);
      var b = (v = p.isReference ? this.referenceHandler(p).handleNode(s) : this.handler(h).handleNode(s)).element;
      return b !== void 0 && (p.isMany ? m.get(p.name).push(b) : m.set(p.name, b), p.isReference ? ($(b, { element: m }), this.context.addReference(b)) : b.$parent = m), v;
    }, jp.prototype = Object.create(Fn.prototype), jp.prototype.createElement = function(s) {
      var p = s.name, h = jn(p), m = this.model, v = this.type, b = m.getPackage(h.prefix), S = b && yy(h, b) || p;
      if (!v.hasType(S))
        throw Yr("unexpected element <" + s.originalName + ">");
      return Fn.prototype.createElement.call(this, s);
    }, ba.prototype = Object.create(Xc.prototype), ba.prototype.createElement = function(s) {
      var p = s.name, h = jn(p).prefix, m = s.ns[h + "$uri"], v = s.attributes;
      return this.model.createAny(p, m, v);
    }, ba.prototype.handleChild = function(s) {
      var p = new ba(this.model, "Element", this.context).handleNode(s), h = this.element, m = p.element;
      return m !== void 0 && ((h.$children = h.$children || []).push(m), m.$parent = h), p;
    }, ba.prototype.handleEnd = function() {
      this.body && (this.element.$body = this.body);
    }, Fp.prototype.fromXML = function(s, p, h) {
      var m = p.rootHandler;
      p instanceof Fn ? (m = p, p = {}) : typeof p == "string" ? (m = this.handler(p), p = {}) : typeof m == "string" && (m = this.handler(m));
      var v = this.model, b = this.lax, S = new dw($({}, p, { rootHandler: m })), M = new fy({ proxy: !0 }), B = function() {
        var re = [];
        return Object.defineProperty(re, "peek", { value: function() {
          return this[this.length - 1];
        } }), re;
      }();
      function q(re, ve, Y) {
        var te = ve(), J = te.line, ce = te.column, ge = te.data;
        ge.charAt(0) === "<" && ge.indexOf(" ") !== -1 && (ge = ge.slice(0, ge.indexOf(" ")) + ">");
        var Ze = "unparsable content " + (ge ? ge + " " : "") + `detected
	line: ` + J + `
	column: ` + ce + `
	nested error: ` + re.message;
        if (Y)
          return S.addWarning({ message: Ze, error: re }), !0;
        throw Yr(Ze);
      }
      function ee(re, ve) {
        return q(re, ve, !0);
      }
      m.context = S, B.push(m);
      var pe = /^<\?xml /i, be = / encoding="([^"]+)"/i, Te = /^utf-8$/i;
      function Re(re, ve) {
        try {
          B.peek().handleText(re);
        } catch (Y) {
          ee(Y, ve);
        }
      }
      var Ie = v.getPackages().reduce(function(re, ve) {
        return re[ve.uri] = ve.prefix, re;
      }, { "http://www.w3.org/XML/1998/namespace": "xml" });
      return M.ns(Ie).on("openTag", function(re, ve, Y, te) {
        var J = re.attrs || {}, ce = Object.keys(J).reduce(function(ge, Ze) {
          var We = ve(J[Ze]);
          return ge[Ze] = We, ge;
        }, {});
        (function(ge, Ze) {
          var We = B.peek();
          try {
            B.push(We.handleNode(ge));
          } catch (De) {
            q(De, Ze, b) && B.push(new Ip());
          }
        })({ name: re.name, originalName: re.originalName, attributes: ce, ns: re.ns }, te);
      }).on("question", function(re) {
        if (pe.test(re)) {
          var ve = be.exec(re), Y = ve && ve[1];
          Y && !Te.test(Y) && S.addWarning({ message: "unsupported document encoding <" + Y + ">, falling back to UTF-8" });
        }
      }).on("closeTag", function() {
        B.pop().handleEnd();
      }).on("cdata", Re).on("text", function(re, ve, Y) {
        (function(te, J) {
          te.trim() && Re(te, J);
        })(ve(re), Y);
      }).on("error", q).on("warn", ee), new Promise(function(re, ve) {
        var Y;
        try {
          M.parse(s), function() {
            var Ze, We, De = S.elementsById, Ft = S.references;
            for (Ze = 0; We = Ft[Ze]; Ze++) {
              var ye = We.element, me = De[We.id], He = Er(ye).propertiesByName[We.property];
              if (me || S.addWarning({ message: "unresolved reference <" + We.id + ">", element: We.element, property: We.property, value: We.id }), He.isMany) {
                var tt = ye.get(He.name), st = tt.indexOf(We);
                st === -1 && (st = tt.length), me ? tt[st] = me : tt.splice(st, 1);
              } else
                ye.set(He.name, me);
            }
          }();
        } catch (Ze) {
          Y = Ze;
        }
        var te = m.element;
        Y || te || (Y = Yr("failed to parse document as <" + m.type.$descriptor.name + ">"));
        var J = S.warnings, ce = S.references, ge = S.elementsById;
        return Y ? (Y.warnings = J, ve(Y)) : re({ rootElement: te, elementsById: ge, references: ce, warnings: J });
      });
    }, Fp.prototype.handler = function(s) {
      return new jp(this.model, s);
    };
    var hw = /<|>|'|"|&|\n\r|\n/g, gy = /<|>|&/g;
    function mw(s) {
      var p = {}, h = {}, m = {}, v = [], b = [];
      this.byUri = function(S) {
        return h[S] || s && s.byUri(S);
      }, this.add = function(S, M) {
        h[S.uri] = S, M ? v.push(S) : b.push(S), this.mapPrefix(S.prefix, S.uri);
      }, this.uriByPrefix = function(S) {
        return p[S || "xmlns"];
      }, this.mapPrefix = function(S, M) {
        p[S || "xmlns"] = M;
      }, this.getNSKey = function(S) {
        return S.prefix !== void 0 ? S.uri + "|" + S.prefix : S.uri;
      }, this.logUsed = function(S) {
        var M = S.uri, B = this.getNSKey(S);
        m[B] = this.byUri(M), s && s.logUsed(S);
      }, this.getUsed = function(S) {
        var M = this;
        return [].concat(v, b).filter(function(B) {
          var q = M.getNSKey(B);
          return m[q];
        });
      };
    }
    function yw(s, p) {
      return dy(p) ? (h = s).charAt(0).toLowerCase() + h.slice(1) : s;
      var h;
    }
    function vy(s, p) {
      s.super_ = p, s.prototype = Object.create(p.prototype, { constructor: { value: s, enumerable: !1, writable: !0, configurable: !0 } });
    }
    function _y(s) {
      return f(s) ? s : (s.prefix ? s.prefix + ":" : "") + s.localName;
    }
    var gw = { "\n": "#10", "\n\r": "#10", '"': "#34", "'": "#39", "<": "#60", ">": "#62", "&": "#38" }, vw = { "<": "lt", ">": "gt", "&": "amp" };
    function by(s, p, h) {
      return (s = f(s) ? s : "" + s).replace(p, function(m) {
        return "&" + h[m] + ";";
      });
    }
    function Hp(s) {
      this.tagName = s;
    }
    function Io() {
    }
    function zp(s) {
      this.tagName = s;
    }
    function jt(s, p) {
      this.body = [], this.attrs = [], this.parent = s, this.propertyDescriptor = p;
    }
    function Zc(s, p) {
      jt.call(this, s, p);
    }
    function _w() {
      this.value = "", this.write = function(s) {
        this.value += s;
      };
    }
    function bw(s, p) {
      var h = [""];
      this.append = function(m) {
        return s.write(m), this;
      }, this.appendNewLine = function() {
        return p && s.write(`
`), this;
      }, this.appendIndent = function() {
        return p && s.write(h.join("  ")), this;
      }, this.indent = function() {
        return h.push(""), this;
      }, this.unindent = function() {
        return h.pop(), this;
      };
    }
    function xw(s) {
      return s = $({ format: !1, preamble: !0 }, s || {}), { toXML: function(p, h) {
        var m = h || new _w(), v = new bw(m, s.format);
        if (s.preamble && v.append(`<?xml version="1.0" encoding="UTF-8"?>
`), new jt().build(p).serializeTo(v), !h)
          return m.value;
      } };
    }
    function Jc(s, p) {
      wi.call(this, s, p);
    }
    Hp.prototype.build = function(s) {
      return this.element = s, this;
    }, Hp.prototype.serializeTo = function(s) {
      s.appendIndent().append("<" + this.tagName + ">" + this.element.id + "</" + this.tagName + ">").appendNewLine();
    }, Io.prototype.serializeValue = Io.prototype.serializeTo = function(s) {
      s.append(this.escape ? by(this.value, gy, vw) : this.value);
    }, Io.prototype.build = function(s, p) {
      return this.value = p, s.type === "String" && p.search(gy) !== -1 && (this.escape = !0), this;
    }, vy(zp, Io), zp.prototype.serializeTo = function(s) {
      s.appendIndent().append("<" + this.tagName + ">"), this.serializeValue(s), s.append("</" + this.tagName + ">").appendNewLine();
    }, jt.prototype.build = function(s) {
      this.element = s;
      var p, h, m = s.$descriptor, v = this.propertyDescriptor, b = m.isGeneric;
      return p = b ? this.parseGeneric(s) : this.parseNsAttributes(s), this.ns = v ? this.nsPropertyTagName(v) : this.nsTagName(m), this.tagName = this.addTagName(this.ns), b || (h = function(S) {
        return _(S.$descriptor.properties, function(M) {
          var B = M.name;
          if (M.isVirtual || !y(S, B))
            return !1;
          var q = S[B];
          return q !== M.default && q !== null && (!M.isMany || q.length);
        });
      }(s), this.parseAttributes(_(h, function(S) {
        return S.isAttr;
      })), this.parseContainments(function(S) {
        return _(S, function(M) {
          return !M.isAttr;
        });
      }(h))), this.parseGenericAttributes(s, p), this;
    }, jt.prototype.nsTagName = function(s) {
      return function(p, h) {
        return h.isGeneric ? $({ localName: h.ns.localName }, p) : $({ localName: yw(h.ns.localName, h.$pkg) }, p);
      }(this.logNamespaceUsed(s.ns), s);
    }, jt.prototype.nsPropertyTagName = function(s) {
      return function(p, h) {
        return $({ localName: h.ns.localName }, p);
      }(this.logNamespaceUsed(s.ns), s);
    }, jt.prototype.isLocalNs = function(s) {
      return s.uri === this.ns.uri;
    }, jt.prototype.nsAttributeName = function(s) {
      var p;
      if (p = f(s) ? jn(s) : s.ns, s.inherited)
        return { localName: p.localName };
      var h = this.logNamespaceUsed(p);
      return this.getNamespaces().logUsed(h), this.isLocalNs(h) ? { localName: p.localName } : $({ localName: p.localName }, h);
    }, jt.prototype.parseGeneric = function(s) {
      var p = this, h = this.body, m = [];
      return x(s, function(v, b) {
        b === "$body" ? h.push(new Io().build({ type: "String" }, v)) : b === "$children" ? x(v, function(S) {
          h.push(new jt(p).build(S));
        }) : b.indexOf("$") !== 0 && p.parseNsAttribute(s, b, v) && m.push({ name: b, value: v });
      }), m;
    }, jt.prototype.parseNsAttribute = function(s, p, h) {
      var m, v = s.$model, b = jn(p);
      if (b.prefix === "xmlns" && (m = { prefix: b.localName, uri: h }), b.prefix || b.localName !== "xmlns" || (m = { uri: h }), !m)
        return { name: p, value: h };
      if (v && v.getPackage(h))
        this.logNamespace(m, !0, !0);
      else {
        var S = this.logNamespaceUsed(m, !0);
        this.getNamespaces().logUsed(S);
      }
    }, jt.prototype.parseNsAttributes = function(s, p) {
      var h = this, m = s.$attrs, v = [];
      return x(m, function(b, S) {
        var M = h.parseNsAttribute(s, S, b);
        M && v.push(M);
      }), v;
    }, jt.prototype.parseGenericAttributes = function(s, p) {
      var h = this;
      x(p, function(m) {
        if (m.name !== qc)
          try {
            h.addAttribute(h.nsAttributeName(m.name), m.value);
          } catch (v) {
            console.warn("missing namespace information for ", m.name, "=", m.value, "on", s, v);
          }
      });
    }, jt.prototype.parseContainments = function(s) {
      var p = this, h = this.body, m = this.element;
      x(s, function(v) {
        var b = m.get(v.name), S = v.isReference;
        if (v.isMany || (b = [b]), v.isBody)
          h.push(new Io().build(v, b[0]));
        else if (oy(v.type))
          x(b, function(q) {
            h.push(new zp(p.addTagName(p.nsPropertyTagName(v))).build(v, q));
          });
        else if (S)
          x(b, function(q) {
            h.push(new Hp(p.addTagName(p.nsPropertyTagName(v))).build(q));
          });
        else {
          var M = my(v), B = function(q) {
            return hy(q) === "property";
          }(v);
          x(b, function(q) {
            var ee;
            ee = M ? new Zc(p, v) : B ? new jt(p, v) : new jt(p), h.push(ee.build(q));
          });
        }
      });
    }, jt.prototype.getNamespaces = function(s) {
      var p, h = this.namespaces, m = this.parent;
      return h || (p = m && m.getNamespaces(), s || !p ? this.namespaces = h = new mw(p) : h = p), h;
    }, jt.prototype.logNamespace = function(s, p, h) {
      var m = this.getNamespaces(h), v = s.uri, b = s.prefix;
      return m.byUri(v) && !h || m.add(s, p), m.mapPrefix(b, v), s;
    }, jt.prototype.logNamespaceUsed = function(s, p) {
      var h, m, v, b = this.element.$model, S = this.getNamespaces(p), M = s.prefix, B = s.uri;
      if (!M && !B)
        return { localName: s.localName };
      if (v = fw[M] || b && (b.getPackage(M) || {}).uri, !(B = B || v || S.uriByPrefix(M)))
        throw new Error("no namespace uri given for prefix <" + M + ">");
      if (!(s = S.byUri(B))) {
        for (h = M, m = 1; S.uriByPrefix(h); )
          h = M + "_" + m++;
        s = this.logNamespace({ prefix: h, uri: B }, v === B);
      }
      return M && S.mapPrefix(M, B), s;
    }, jt.prototype.parseAttributes = function(s) {
      var p = this, h = this.element;
      x(s, function(m) {
        var v = h.get(m.name);
        if (m.isReference)
          if (m.isMany) {
            var b = [];
            x(v, function(S) {
              b.push(S.id);
            }), v = b.join(" ");
          } else
            v = v.id;
        p.addAttribute(p.nsAttributeName(m), v);
      });
    }, jt.prototype.addTagName = function(s) {
      var p = this.logNamespaceUsed(s);
      return this.getNamespaces().logUsed(p), _y(s);
    }, jt.prototype.addAttribute = function(s, p) {
      var h = this.attrs;
      f(p) && (p = by(p, hw, gw));
      var m = function(b, S) {
        const M = P(S);
        let B = c(b) ? -1 : void 0;
        return x(b, function(q, ee) {
          if (M(q, ee))
            return B = ee, !1;
        }), B;
      }(h, function(b) {
        return b.name.localName === s.localName && b.name.uri === s.uri && b.name.prefix === s.prefix;
      }), v = { name: s, value: p };
      m !== -1 ? h.splice(m, 1, v) : h.push(v);
    }, jt.prototype.serializeAttributes = function(s) {
      var p = this.attrs, h = this.namespaces;
      h && (p = function(m) {
        return m.getUsed().filter(function(v) {
          return v.prefix !== "xml";
        }).map(function(v) {
          return { name: "xmlns" + (v.prefix ? ":" + v.prefix : ""), value: v.uri };
        });
      }(h).concat(p)), x(p, function(m) {
        s.append(" ").append(_y(m.name)).append('="').append(m.value).append('"');
      });
    }, jt.prototype.serializeTo = function(s) {
      var p = this.body[0], h = p && p.constructor !== Io;
      s.appendIndent().append("<" + this.tagName), this.serializeAttributes(s), s.append(p ? ">" : " />"), p && (h && s.appendNewLine().indent(), x(this.body, function(m) {
        m.serializeTo(s);
      }), h && s.unindent().appendIndent(), s.append("</" + this.tagName + ">")), s.appendNewLine();
    }, vy(Zc, jt), Zc.prototype.parseNsAttributes = function(s) {
      var p = jt.prototype.parseNsAttributes.call(this, s), h = s.$descriptor;
      if (h.name === this.propertyDescriptor.type)
        return p;
      var m = this.typeNs = this.nsTagName(h);
      this.getNamespaces().logUsed(this.typeNs);
      var v = s.$model.getPackage(m.uri), b = v.xml && v.xml.typePrefix || "";
      return this.addAttribute(this.nsAttributeName(qc), (m.prefix ? m.prefix + ":" : "") + b + h.ns.localName), p;
    }, Zc.prototype.isLocalNs = function(s) {
      return s.uri === (this.typeNs || this.ns).uri;
    }, Jc.prototype = Object.create(wi.prototype), Jc.prototype.fromXML = function(s, p, h) {
      f(p) || (h = p, p = "bpmn:Definitions");
      var m = new Fp($({ model: this, lax: !0 }, h)), v = m.handler(p);
      return m.fromXML(s, v);
    }, Jc.prototype.toXML = function(s, p) {
      var h = new xw(p);
      return new Promise(function(m, v) {
        try {
          return m({ xml: h.toXML(s) });
        } catch (b) {
          return v(b);
        }
      });
    };
    var Ew = { bpmn: { name: "BPMN20", uri: "http://www.omg.org/spec/BPMN/20100524/MODEL", prefix: "bpmn", associations: [], types: [{ name: "Interface", superClass: ["RootElement"], properties: [{ name: "name", isAttr: !0, type: "String" }, { name: "operations", type: "Operation", isMany: !0 }, { name: "implementationRef", isAttr: !0, type: "String" }] }, { name: "Operation", superClass: ["BaseElement"], properties: [{ name: "name", isAttr: !0, type: "String" }, { name: "inMessageRef", type: "Message", isReference: !0 }, { name: "outMessageRef", type: "Message", isReference: !0 }, { name: "errorRef", type: "Error", isMany: !0, isReference: !0 }, { name: "implementationRef", isAttr: !0, type: "String" }] }, { name: "EndPoint", superClass: ["RootElement"] }, { name: "Auditing", superClass: ["BaseElement"] }, { name: "GlobalTask", superClass: ["CallableElement"], properties: [{ name: "resources", type: "ResourceRole", isMany: !0 }] }, { name: "Monitoring", superClass: ["BaseElement"] }, { name: "Performer", superClass: ["ResourceRole"] }, { name: "Process", superClass: ["FlowElementsContainer", "CallableElement"], properties: [{ name: "processType", type: "ProcessType", isAttr: !0 }, { name: "isClosed", isAttr: !0, type: "Boolean" }, { name: "auditing", type: "Auditing" }, { name: "monitoring", type: "Monitoring" }, { name: "properties", type: "Property", isMany: !0 }, { name: "laneSets", isMany: !0, replaces: "FlowElementsContainer#laneSets", type: "LaneSet" }, { name: "flowElements", isMany: !0, replaces: "FlowElementsContainer#flowElements", type: "FlowElement" }, { name: "artifacts", type: "Artifact", isMany: !0 }, { name: "resources", type: "ResourceRole", isMany: !0 }, { name: "correlationSubscriptions", type: "CorrelationSubscription", isMany: !0 }, { name: "supports", type: "Process", isMany: !0, isReference: !0 }, { name: "definitionalCollaborationRef", type: "Collaboration", isAttr: !0, isReference: !0 }, { name: "isExecutable", isAttr: !0, type: "Boolean" }] }, { name: "LaneSet", superClass: ["BaseElement"], properties: [{ name: "lanes", type: "Lane", isMany: !0 }, { name: "name", isAttr: !0, type: "String" }] }, { name: "Lane", superClass: ["BaseElement"], properties: [{ name: "name", isAttr: !0, type: "String" }, { name: "partitionElementRef", type: "BaseElement", isAttr: !0, isReference: !0 }, { name: "partitionElement", type: "BaseElement" }, { name: "flowNodeRef", type: "FlowNode", isMany: !0, isReference: !0 }, { name: "childLaneSet", type: "LaneSet", xml: { serialize: "xsi:type" } }] }, { name: "GlobalManualTask", superClass: ["GlobalTask"] }, { name: "ManualTask", superClass: ["Task"] }, { name: "UserTask", superClass: ["Task"], properties: [{ name: "renderings", type: "Rendering", isMany: !0 }, { name: "implementation", isAttr: !0, type: "String" }] }, { name: "Rendering", superClass: ["BaseElement"] }, { name: "HumanPerformer", superClass: ["Performer"] }, { name: "PotentialOwner", superClass: ["HumanPerformer"] }, { name: "GlobalUserTask", superClass: ["GlobalTask"], properties: [{ name: "implementation", isAttr: !0, type: "String" }, { name: "renderings", type: "Rendering", isMany: !0 }] }, { name: "Gateway", isAbstract: !0, superClass: ["FlowNode"], properties: [{ name: "gatewayDirection", type: "GatewayDirection", default: "Unspecified", isAttr: !0 }] }, { name: "EventBasedGateway", superClass: ["Gateway"], properties: [{ name: "instantiate", default: !1, isAttr: !0, type: "Boolean" }, { name: "eventGatewayType", type: "EventBasedGatewayType", isAttr: !0, default: "Exclusive" }] }, { name: "ComplexGateway", superClass: ["Gateway"], properties: [{ name: "activationCondition", type: "Expression", xml: { serialize: "xsi:type" } }, { name: "default", type: "SequenceFlow", isAttr: !0, isReference: !0 }] }, { name: "ExclusiveGateway", superClass: ["Gateway"], properties: [{ name: "default", type: "SequenceFlow", isAttr: !0, isReference: !0 }] }, { name: "InclusiveGateway", superClass: ["Gateway"], properties: [{ name: "default", type: "SequenceFlow", isAttr: !0, isReference: !0 }] }, { name: "ParallelGateway", superClass: ["Gateway"] }, { name: "RootElement", isAbstract: !0, superClass: ["BaseElement"] }, { name: "Relationship", superClass: ["BaseElement"], properties: [{ name: "type", isAttr: !0, type: "String" }, { name: "direction", type: "RelationshipDirection", isAttr: !0 }, { name: "source", isMany: !0, isReference: !0, type: "Element" }, { name: "target", isMany: !0, isReference: !0, type: "Element" }] }, { name: "BaseElement", isAbstract: !0, properties: [{ name: "id", isAttr: !0, type: "String", isId: !0 }, { name: "documentation", type: "Documentation", isMany: !0 }, { name: "extensionDefinitions", type: "ExtensionDefinition", isMany: !0, isReference: !0 }, { name: "extensionElements", type: "ExtensionElements" }] }, { name: "Extension", properties: [{ name: "mustUnderstand", default: !1, isAttr: !0, type: "Boolean" }, { name: "definition", type: "ExtensionDefinition", isAttr: !0, isReference: !0 }] }, { name: "ExtensionDefinition", properties: [{ name: "name", isAttr: !0, type: "String" }, { name: "extensionAttributeDefinitions", type: "ExtensionAttributeDefinition", isMany: !0 }] }, { name: "ExtensionAttributeDefinition", properties: [{ name: "name", isAttr: !0, type: "String" }, { name: "type", isAttr: !0, type: "String" }, { name: "isReference", default: !1, isAttr: !0, type: "Boolean" }, { name: "extensionDefinition", type: "ExtensionDefinition", isAttr: !0, isReference: !0 }] }, { name: "ExtensionElements", properties: [{ name: "valueRef", isAttr: !0, isReference: !0, type: "Element" }, { name: "values", type: "Element", isMany: !0 }, { name: "extensionAttributeDefinition", type: "ExtensionAttributeDefinition", isAttr: !0, isReference: !0 }] }, { name: "Documentation", superClass: ["BaseElement"], properties: [{ name: "text", type: "String", isBody: !0 }, { name: "textFormat", default: "text/plain", isAttr: !0, type: "String" }] }, { name: "Event", isAbstract: !0, superClass: ["FlowNode", "InteractionNode"], properties: [{ name: "properties", type: "Property", isMany: !0 }] }, { name: "IntermediateCatchEvent", superClass: ["CatchEvent"] }, { name: "IntermediateThrowEvent", superClass: ["ThrowEvent"] }, { name: "EndEvent", superClass: ["ThrowEvent"] }, { name: "StartEvent", superClass: ["CatchEvent"], properties: [{ name: "isInterrupting", default: !0, isAttr: !0, type: "Boolean" }] }, { name: "ThrowEvent", isAbstract: !0, superClass: ["Event"], properties: [{ name: "dataInputs", type: "DataInput", isMany: !0 }, { name: "dataInputAssociations", type: "DataInputAssociation", isMany: !0 }, { name: "inputSet", type: "InputSet" }, { name: "eventDefinitions", type: "EventDefinition", isMany: !0 }, { name: "eventDefinitionRef", type: "EventDefinition", isMany: !0, isReference: !0 }] }, { name: "CatchEvent", isAbstract: !0, superClass: ["Event"], properties: [{ name: "parallelMultiple", isAttr: !0, type: "Boolean", default: !1 }, { name: "dataOutputs", type: "DataOutput", isMany: !0 }, { name: "dataOutputAssociations", type: "DataOutputAssociation", isMany: !0 }, { name: "outputSet", type: "OutputSet" }, { name: "eventDefinitions", type: "EventDefinition", isMany: !0 }, { name: "eventDefinitionRef", type: "EventDefinition", isMany: !0, isReference: !0 }] }, { name: "BoundaryEvent", superClass: ["CatchEvent"], properties: [{ name: "cancelActivity", default: !0, isAttr: !0, type: "Boolean" }, { name: "attachedToRef", type: "Activity", isAttr: !0, isReference: !0 }] }, { name: "EventDefinition", isAbstract: !0, superClass: ["RootElement"] }, { name: "CancelEventDefinition", superClass: ["EventDefinition"] }, { name: "ErrorEventDefinition", superClass: ["EventDefinition"], properties: [{ name: "errorRef", type: "Error", isAttr: !0, isReference: !0 }] }, { name: "TerminateEventDefinition", superClass: ["EventDefinition"] }, { name: "EscalationEventDefinition", superClass: ["EventDefinition"], properties: [{ name: "escalationRef", type: "Escalation", isAttr: !0, isReference: !0 }] }, { name: "Escalation", properties: [{ name: "structureRef", type: "ItemDefinition", isAttr: !0, isReference: !0 }, { name: "name", isAttr: !0, type: "String" }, { name: "escalationCode", isAttr: !0, type: "String" }], superClass: ["RootElement"] }, { name: "CompensateEventDefinition", superClass: ["EventDefinition"], properties: [{ name: "waitForCompletion", isAttr: !0, type: "Boolean", default: !0 }, { name: "activityRef", type: "Activity", isAttr: !0, isReference: !0 }] }, { name: "TimerEventDefinition", superClass: ["EventDefinition"], properties: [{ name: "timeDate", type: "Expression", xml: { serialize: "xsi:type" } }, { name: "timeCycle", type: "Expression", xml: { serialize: "xsi:type" } }, { name: "timeDuration", type: "Expression", xml: { serialize: "xsi:type" } }] }, { name: "LinkEventDefinition", superClass: ["EventDefinition"], properties: [{ name: "name", isAttr: !0, type: "String" }, { name: "target", type: "LinkEventDefinition", isReference: !0 }, { name: "source", type: "LinkEventDefinition", isMany: !0, isReference: !0 }] }, { name: "MessageEventDefinition", superClass: ["EventDefinition"], properties: [{ name: "messageRef", type: "Message", isAttr: !0, isReference: !0 }, { name: "operationRef", type: "Operation", isAttr: !0, isReference: !0 }] }, { name: "ConditionalEventDefinition", superClass: ["EventDefinition"], properties: [{ name: "condition", type: "Expression", xml: { serialize: "xsi:type" } }] }, { name: "SignalEventDefinition", superClass: ["EventDefinition"], properties: [{ name: "signalRef", type: "Signal", isAttr: !0, isReference: !0 }] }, { name: "Signal", superClass: ["RootElement"], properties: [{ name: "structureRef", type: "ItemDefinition", isAttr: !0, isReference: !0 }, { name: "name", isAttr: !0, type: "String" }] }, { name: "ImplicitThrowEvent", superClass: ["ThrowEvent"] }, { name: "DataState", superClass: ["BaseElement"], properties: [{ name: "name", isAttr: !0, type: "String" }] }, { name: "ItemAwareElement", superClass: ["BaseElement"], properties: [{ name: "itemSubjectRef", type: "ItemDefinition", isAttr: !0, isReference: !0 }, { name: "dataState", type: "DataState" }] }, { name: "DataAssociation", superClass: ["BaseElement"], properties: [{ name: "sourceRef", type: "ItemAwareElement", isMany: !0, isReference: !0 }, { name: "targetRef", type: "ItemAwareElement", isReference: !0 }, { name: "transformation", type: "FormalExpression", xml: { serialize: "property" } }, { name: "assignment", type: "Assignment", isMany: !0 }] }, { name: "DataInput", superClass: ["ItemAwareElement"], properties: [{ name: "name", isAttr: !0, type: "String" }, { name: "isCollection", default: !1, isAttr: !0, type: "Boolean" }, { name: "inputSetRef", type: "InputSet", isMany: !0, isVirtual: !0, isReference: !0 }, { name: "inputSetWithOptional", type: "InputSet", isMany: !0, isVirtual: !0, isReference: !0 }, { name: "inputSetWithWhileExecuting", type: "InputSet", isMany: !0, isVirtual: !0, isReference: !0 }] }, { name: "DataOutput", superClass: ["ItemAwareElement"], properties: [{ name: "name", isAttr: !0, type: "String" }, { name: "isCollection", default: !1, isAttr: !0, type: "Boolean" }, { name: "outputSetRef", type: "OutputSet", isMany: !0, isVirtual: !0, isReference: !0 }, { name: "outputSetWithOptional", type: "OutputSet", isMany: !0, isVirtual: !0, isReference: !0 }, { name: "outputSetWithWhileExecuting", type: "OutputSet", isMany: !0, isVirtual: !0, isReference: !0 }] }, { name: "InputSet", superClass: ["BaseElement"], properties: [{ name: "name", isAttr: !0, type: "String" }, { name: "dataInputRefs", type: "DataInput", isMany: !0, isReference: !0 }, { name: "optionalInputRefs", type: "DataInput", isMany: !0, isReference: !0 }, { name: "whileExecutingInputRefs", type: "DataInput", isMany: !0, isReference: !0 }, { name: "outputSetRefs", type: "OutputSet", isMany: !0, isReference: !0 }] }, { name: "OutputSet", superClass: ["BaseElement"], properties: [{ name: "dataOutputRefs", type: "DataOutput", isMany: !0, isReference: !0 }, { name: "name", isAttr: !0, type: "String" }, { name: "inputSetRefs", type: "InputSet", isMany: !0, isReference: !0 }, { name: "optionalOutputRefs", type: "DataOutput", isMany: !0, isReference: !0 }, { name: "whileExecutingOutputRefs", type: "DataOutput", isMany: !0, isReference: !0 }] }, { name: "Property", superClass: ["ItemAwareElement"], properties: [{ name: "name", isAttr: !0, type: "String" }] }, { name: "DataInputAssociation", superClass: ["DataAssociation"] }, { name: "DataOutputAssociation", superClass: ["DataAssociation"] }, { name: "InputOutputSpecification", superClass: ["BaseElement"], properties: [{ name: "dataInputs", type: "DataInput", isMany: !0 }, { name: "dataOutputs", type: "DataOutput", isMany: !0 }, { name: "inputSets", type: "InputSet", isMany: !0 }, { name: "outputSets", type: "OutputSet", isMany: !0 }] }, { name: "DataObject", superClass: ["FlowElement", "ItemAwareElement"], properties: [{ name: "isCollection", default: !1, isAttr: !0, type: "Boolean" }] }, { name: "InputOutputBinding", properties: [{ name: "inputDataRef", type: "InputSet", isAttr: !0, isReference: !0 }, { name: "outputDataRef", type: "OutputSet", isAttr: !0, isReference: !0 }, { name: "operationRef", type: "Operation", isAttr: !0, isReference: !0 }] }, { name: "Assignment", superClass: ["BaseElement"], properties: [{ name: "from", type: "Expression", xml: { serialize: "xsi:type" } }, { name: "to", type: "Expression", xml: { serialize: "xsi:type" } }] }, { name: "DataStore", superClass: ["RootElement", "ItemAwareElement"], properties: [{ name: "name", isAttr: !0, type: "String" }, { name: "capacity", isAttr: !0, type: "Integer" }, { name: "isUnlimited", default: !0, isAttr: !0, type: "Boolean" }] }, { name: "DataStoreReference", superClass: ["ItemAwareElement", "FlowElement"], properties: [{ name: "dataStoreRef", type: "DataStore", isAttr: !0, isReference: !0 }] }, { name: "DataObjectReference", superClass: ["ItemAwareElement", "FlowElement"], properties: [{ name: "dataObjectRef", type: "DataObject", isAttr: !0, isReference: !0 }] }, { name: "ConversationLink", superClass: ["BaseElement"], properties: [{ name: "sourceRef", type: "InteractionNode", isAttr: !0, isReference: !0 }, { name: "targetRef", type: "InteractionNode", isAttr: !0, isReference: !0 }, { name: "name", isAttr: !0, type: "String" }] }, { name: "ConversationAssociation", superClass: ["BaseElement"], properties: [{ name: "innerConversationNodeRef", type: "ConversationNode", isAttr: !0, isReference: !0 }, { name: "outerConversationNodeRef", type: "ConversationNode", isAttr: !0, isReference: !0 }] }, { name: "CallConversation", superClass: ["ConversationNode"], properties: [{ name: "calledCollaborationRef", type: "Collaboration", isAttr: !0, isReference: !0 }, { name: "participantAssociations", type: "ParticipantAssociation", isMany: !0 }] }, { name: "Conversation", superClass: ["ConversationNode"] }, { name: "SubConversation", superClass: ["ConversationNode"], properties: [{ name: "conversationNodes", type: "ConversationNode", isMany: !0 }] }, { name: "ConversationNode", isAbstract: !0, superClass: ["InteractionNode", "BaseElement"], properties: [{ name: "name", isAttr: !0, type: "String" }, { name: "participantRef", type: "Participant", isMany: !0, isReference: !0 }, { name: "messageFlowRefs", type: "MessageFlow", isMany: !0, isReference: !0 }, { name: "correlationKeys", type: "CorrelationKey", isMany: !0 }] }, { name: "GlobalConversation", superClass: ["Collaboration"] }, { name: "PartnerEntity", superClass: ["RootElement"], properties: [{ name: "name", isAttr: !0, type: "String" }, { name: "participantRef", type: "Participant", isMany: !0, isReference: !0 }] }, { name: "PartnerRole", superClass: ["RootElement"], properties: [{ name: "name", isAttr: !0, type: "String" }, { name: "participantRef", type: "Participant", isMany: !0, isReference: !0 }] }, { name: "CorrelationProperty", superClass: ["RootElement"], properties: [{ name: "correlationPropertyRetrievalExpression", type: "CorrelationPropertyRetrievalExpression", isMany: !0 }, { name: "name", isAttr: !0, type: "String" }, { name: "type", type: "ItemDefinition", isAttr: !0, isReference: !0 }] }, { name: "Error", superClass: ["RootElement"], properties: [{ name: "structureRef", type: "ItemDefinition", isAttr: !0, isReference: !0 }, { name: "name", isAttr: !0, type: "String" }, { name: "errorCode", isAttr: !0, type: "String" }] }, { name: "CorrelationKey", superClass: ["BaseElement"], properties: [{ name: "correlationPropertyRef", type: "CorrelationProperty", isMany: !0, isReference: !0 }, { name: "name", isAttr: !0, type: "String" }] }, { name: "Expression", superClass: ["BaseElement"], isAbstract: !1, properties: [{ name: "body", isBody: !0, type: "String" }] }, { name: "FormalExpression", superClass: ["Expression"], properties: [{ name: "language", isAttr: !0, type: "String" }, { name: "evaluatesToTypeRef", type: "ItemDefinition", isAttr: !0, isReference: !0 }] }, { name: "Message", superClass: ["RootElement"], properties: [{ name: "name", isAttr: !0, type: "String" }, { name: "itemRef", type: "ItemDefinition", isAttr: !0, isReference: !0 }] }, { name: "ItemDefinition", superClass: ["RootElement"], properties: [{ name: "itemKind", type: "ItemKind", isAttr: !0 }, { name: "structureRef", isAttr: !0, type: "String" }, { name: "isCollection", default: !1, isAttr: !0, type: "Boolean" }, { name: "import", type: "Import", isAttr: !0, isReference: !0 }] }, { name: "FlowElement", isAbstract: !0, superClass: ["BaseElement"], properties: [{ name: "name", isAttr: !0, type: "String" }, { name: "auditing", type: "Auditing" }, { name: "monitoring", type: "Monitoring" }, { name: "categoryValueRef", type: "CategoryValue", isMany: !0, isReference: !0 }] }, { name: "SequenceFlow", superClass: ["FlowElement"], properties: [{ name: "isImmediate", isAttr: !0, type: "Boolean" }, { name: "conditionExpression", type: "Expression", xml: { serialize: "xsi:type" } }, { name: "sourceRef", type: "FlowNode", isAttr: !0, isReference: !0 }, { name: "targetRef", type: "FlowNode", isAttr: !0, isReference: !0 }] }, { name: "FlowElementsContainer", isAbstract: !0, superClass: ["BaseElement"], properties: [{ name: "laneSets", type: "LaneSet", isMany: !0 }, { name: "flowElements", type: "FlowElement", isMany: !0 }] }, { name: "CallableElement", isAbstract: !0, superClass: ["RootElement"], properties: [{ name: "name", isAttr: !0, type: "String" }, { name: "ioSpecification", type: "InputOutputSpecification", xml: { serialize: "property" } }, { name: "supportedInterfaceRef", type: "Interface", isMany: !0, isReference: !0 }, { name: "ioBinding", type: "InputOutputBinding", isMany: !0, xml: { serialize: "property" } }] }, { name: "FlowNode", isAbstract: !0, superClass: ["FlowElement"], properties: [{ name: "incoming", type: "SequenceFlow", isMany: !0, isReference: !0 }, { name: "outgoing", type: "SequenceFlow", isMany: !0, isReference: !0 }, { name: "lanes", type: "Lane", isMany: !0, isVirtual: !0, isReference: !0 }] }, { name: "CorrelationPropertyRetrievalExpression", superClass: ["BaseElement"], properties: [{ name: "messagePath", type: "FormalExpression" }, { name: "messageRef", type: "Message", isAttr: !0, isReference: !0 }] }, { name: "CorrelationPropertyBinding", superClass: ["BaseElement"], properties: [{ name: "dataPath", type: "FormalExpression" }, { name: "correlationPropertyRef", type: "CorrelationProperty", isAttr: !0, isReference: !0 }] }, { name: "Resource", superClass: ["RootElement"], properties: [{ name: "name", isAttr: !0, type: "String" }, { name: "resourceParameters", type: "ResourceParameter", isMany: !0 }] }, { name: "ResourceParameter", superClass: ["BaseElement"], properties: [{ name: "name", isAttr: !0, type: "String" }, { name: "isRequired", isAttr: !0, type: "Boolean" }, { name: "type", type: "ItemDefinition", isAttr: !0, isReference: !0 }] }, { name: "CorrelationSubscription", superClass: ["BaseElement"], properties: [{ name: "correlationKeyRef", type: "CorrelationKey", isAttr: !0, isReference: !0 }, { name: "correlationPropertyBinding", type: "CorrelationPropertyBinding", isMany: !0 }] }, { name: "MessageFlow", superClass: ["BaseElement"], properties: [{ name: "name", isAttr: !0, type: "String" }, { name: "sourceRef", type: "InteractionNode", isAttr: !0, isReference: !0 }, { name: "targetRef", type: "InteractionNode", isAttr: !0, isReference: !0 }, { name: "messageRef", type: "Message", isAttr: !0, isReference: !0 }] }, { name: "MessageFlowAssociation", superClass: ["BaseElement"], properties: [{ name: "innerMessageFlowRef", type: "MessageFlow", isAttr: !0, isReference: !0 }, { name: "outerMessageFlowRef", type: "MessageFlow", isAttr: !0, isReference: !0 }] }, { name: "InteractionNode", isAbstract: !0, properties: [{ name: "incomingConversationLinks", type: "ConversationLink", isMany: !0, isVirtual: !0, isReference: !0 }, { name: "outgoingConversationLinks", type: "ConversationLink", isMany: !0, isVirtual: !0, isReference: !0 }] }, { name: "Participant", superClass: ["InteractionNode", "BaseElement"], properties: [{ name: "name", isAttr: !0, type: "String" }, { name: "interfaceRef", type: "Interface", isMany: !0, isReference: !0 }, { name: "participantMultiplicity", type: "ParticipantMultiplicity" }, { name: "endPointRefs", type: "EndPoint", isMany: !0, isReference: !0 }, { name: "processRef", type: "Process", isAttr: !0, isReference: !0 }] }, { name: "ParticipantAssociation", superClass: ["BaseElement"], properties: [{ name: "innerParticipantRef", type: "Participant", isAttr: !0, isReference: !0 }, { name: "outerParticipantRef", type: "Participant", isAttr: !0, isReference: !0 }] }, { name: "ParticipantMultiplicity", properties: [{ name: "minimum", default: 0, isAttr: !0, type: "Integer" }, { name: "maximum", default: 1, isAttr: !0, type: "Integer" }], superClass: ["BaseElement"] }, { name: "Collaboration", superClass: ["RootElement"], properties: [{ name: "name", isAttr: !0, type: "String" }, { name: "isClosed", isAttr: !0, type: "Boolean" }, { name: "participants", type: "Participant", isMany: !0 }, { name: "messageFlows", type: "MessageFlow", isMany: !0 }, { name: "artifacts", type: "Artifact", isMany: !0 }, { name: "conversations", type: "ConversationNode", isMany: !0 }, { name: "conversationAssociations", type: "ConversationAssociation" }, { name: "participantAssociations", type: "ParticipantAssociation", isMany: !0 }, { name: "messageFlowAssociations", type: "MessageFlowAssociation", isMany: !0 }, { name: "correlationKeys", type: "CorrelationKey", isMany: !0 }, { name: "choreographyRef", type: "Choreography", isMany: !0, isReference: !0 }, { name: "conversationLinks", type: "ConversationLink", isMany: !0 }] }, { name: "ChoreographyActivity", isAbstract: !0, superClass: ["FlowNode"], properties: [{ name: "participantRef", type: "Participant", isMany: !0, isReference: !0 }, { name: "initiatingParticipantRef", type: "Participant", isAttr: !0, isReference: !0 }, { name: "correlationKeys", type: "CorrelationKey", isMany: !0 }, { name: "loopType", type: "ChoreographyLoopType", default: "None", isAttr: !0 }] }, { name: "CallChoreography", superClass: ["ChoreographyActivity"], properties: [{ name: "calledChoreographyRef", type: "Choreography", isAttr: !0, isReference: !0 }, { name: "participantAssociations", type: "ParticipantAssociation", isMany: !0 }] }, { name: "SubChoreography", superClass: ["ChoreographyActivity", "FlowElementsContainer"], properties: [{ name: "artifacts", type: "Artifact", isMany: !0 }] }, { name: "ChoreographyTask", superClass: ["ChoreographyActivity"], properties: [{ name: "messageFlowRef", type: "MessageFlow", isMany: !0, isReference: !0 }] }, { name: "Choreography", superClass: ["Collaboration", "FlowElementsContainer"] }, { name: "GlobalChoreographyTask", superClass: ["Choreography"], properties: [{ name: "initiatingParticipantRef", type: "Participant", isAttr: !0, isReference: !0 }] }, { name: "TextAnnotation", superClass: ["Artifact"], properties: [{ name: "text", type: "String" }, { name: "textFormat", default: "text/plain", isAttr: !0, type: "String" }] }, { name: "Group", superClass: ["Artifact"], properties: [{ name: "categoryValueRef", type: "CategoryValue", isAttr: !0, isReference: !0 }] }, { name: "Association", superClass: ["Artifact"], properties: [{ name: "associationDirection", type: "AssociationDirection", isAttr: !0 }, { name: "sourceRef", type: "BaseElement", isAttr: !0, isReference: !0 }, { name: "targetRef", type: "BaseElement", isAttr: !0, isReference: !0 }] }, { name: "Category", superClass: ["RootElement"], properties: [{ name: "categoryValue", type: "CategoryValue", isMany: !0 }, { name: "name", isAttr: !0, type: "String" }] }, { name: "Artifact", isAbstract: !0, superClass: ["BaseElement"] }, { name: "CategoryValue", superClass: ["BaseElement"], properties: [{ name: "categorizedFlowElements", type: "FlowElement", isMany: !0, isVirtual: !0, isReference: !0 }, { name: "value", isAttr: !0, type: "String" }] }, { name: "Activity", isAbstract: !0, superClass: ["FlowNode"], properties: [{ name: "isForCompensation", default: !1, isAttr: !0, type: "Boolean" }, { name: "default", type: "SequenceFlow", isAttr: !0, isReference: !0 }, { name: "ioSpecification", type: "InputOutputSpecification", xml: { serialize: "property" } }, { name: "boundaryEventRefs", type: "BoundaryEvent", isMany: !0, isReference: !0 }, { name: "properties", type: "Property", isMany: !0 }, { name: "dataInputAssociations", type: "DataInputAssociation", isMany: !0 }, { name: "dataOutputAssociations", type: "DataOutputAssociation", isMany: !0 }, { name: "startQuantity", default: 1, isAttr: !0, type: "Integer" }, { name: "resources", type: "ResourceRole", isMany: !0 }, { name: "completionQuantity", default: 1, isAttr: !0, type: "Integer" }, { name: "loopCharacteristics", type: "LoopCharacteristics" }] }, { name: "ServiceTask", superClass: ["Task"], properties: [{ name: "implementation", isAttr: !0, type: "String" }, { name: "operationRef", type: "Operation", isAttr: !0, isReference: !0 }] }, { name: "SubProcess", superClass: ["Activity", "FlowElementsContainer", "InteractionNode"], properties: [{ name: "triggeredByEvent", default: !1, isAttr: !0, type: "Boolean" }, { name: "artifacts", type: "Artifact", isMany: !0 }] }, { name: "LoopCharacteristics", isAbstract: !0, superClass: ["BaseElement"] }, { name: "MultiInstanceLoopCharacteristics", superClass: ["LoopCharacteristics"], properties: [{ name: "isSequential", default: !1, isAttr: !0, type: "Boolean" }, { name: "behavior", type: "MultiInstanceBehavior", default: "All", isAttr: !0 }, { name: "loopCardinality", type: "Expression", xml: { serialize: "xsi:type" } }, { name: "loopDataInputRef", type: "ItemAwareElement", isReference: !0 }, { name: "loopDataOutputRef", type: "ItemAwareElement", isReference: !0 }, { name: "inputDataItem", type: "DataInput", xml: { serialize: "property" } }, { name: "outputDataItem", type: "DataOutput", xml: { serialize: "property" } }, { name: "complexBehaviorDefinition", type: "ComplexBehaviorDefinition", isMany: !0 }, { name: "completionCondition", type: "Expression", xml: { serialize: "xsi:type" } }, { name: "oneBehaviorEventRef", type: "EventDefinition", isAttr: !0, isReference: !0 }, { name: "noneBehaviorEventRef", type: "EventDefinition", isAttr: !0, isReference: !0 }] }, { name: "StandardLoopCharacteristics", superClass: ["LoopCharacteristics"], properties: [{ name: "testBefore", default: !1, isAttr: !0, type: "Boolean" }, { name: "loopCondition", type: "Expression", xml: { serialize: "xsi:type" } }, { name: "loopMaximum", type: "Integer", isAttr: !0 }] }, { name: "CallActivity", superClass: ["Activity", "InteractionNode"], properties: [{ name: "calledElement", type: "String", isAttr: !0 }] }, { name: "Task", superClass: ["Activity", "InteractionNode"] }, { name: "SendTask", superClass: ["Task"], properties: [{ name: "implementation", isAttr: !0, type: "String" }, { name: "operationRef", type: "Operation", isAttr: !0, isReference: !0 }, { name: "messageRef", type: "Message", isAttr: !0, isReference: !0 }] }, { name: "ReceiveTask", superClass: ["Task"], properties: [{ name: "implementation", isAttr: !0, type: "String" }, { name: "instantiate", default: !1, isAttr: !0, type: "Boolean" }, { name: "operationRef", type: "Operation", isAttr: !0, isReference: !0 }, { name: "messageRef", type: "Message", isAttr: !0, isReference: !0 }] }, { name: "ScriptTask", superClass: ["Task"], properties: [{ name: "scriptFormat", isAttr: !0, type: "String" }, { name: "script", type: "String" }] }, { name: "BusinessRuleTask", superClass: ["Task"], properties: [{ name: "implementation", isAttr: !0, type: "String" }] }, { name: "AdHocSubProcess", superClass: ["SubProcess"], properties: [{ name: "completionCondition", type: "Expression", xml: { serialize: "xsi:type" } }, { name: "ordering", type: "AdHocOrdering", isAttr: !0 }, { name: "cancelRemainingInstances", default: !0, isAttr: !0, type: "Boolean" }] }, { name: "Transaction", superClass: ["SubProcess"], properties: [{ name: "protocol", isAttr: !0, type: "String" }, { name: "method", isAttr: !0, type: "String" }] }, { name: "GlobalScriptTask", superClass: ["GlobalTask"], properties: [{ name: "scriptLanguage", isAttr: !0, type: "String" }, { name: "script", isAttr: !0, type: "String" }] }, { name: "GlobalBusinessRuleTask", superClass: ["GlobalTask"], properties: [{ name: "implementation", isAttr: !0, type: "String" }] }, { name: "ComplexBehaviorDefinition", superClass: ["BaseElement"], properties: [{ name: "condition", type: "FormalExpression" }, { name: "event", type: "ImplicitThrowEvent" }] }, { name: "ResourceRole", superClass: ["BaseElement"], properties: [{ name: "resourceRef", type: "Resource", isReference: !0 }, { name: "resourceParameterBindings", type: "ResourceParameterBinding", isMany: !0 }, { name: "resourceAssignmentExpression", type: "ResourceAssignmentExpression" }, { name: "name", isAttr: !0, type: "String" }] }, { name: "ResourceParameterBinding", properties: [{ name: "expression", type: "Expression", xml: { serialize: "xsi:type" } }, { name: "parameterRef", type: "ResourceParameter", isAttr: !0, isReference: !0 }], superClass: ["BaseElement"] }, { name: "ResourceAssignmentExpression", properties: [{ name: "expression", type: "Expression", xml: { serialize: "xsi:type" } }], superClass: ["BaseElement"] }, { name: "Import", properties: [{ name: "importType", isAttr: !0, type: "String" }, { name: "location", isAttr: !0, type: "String" }, { name: "namespace", isAttr: !0, type: "String" }] }, { name: "Definitions", superClass: ["BaseElement"], properties: [{ name: "name", isAttr: !0, type: "String" }, { name: "targetNamespace", isAttr: !0, type: "String" }, { name: "expressionLanguage", default: "http://www.w3.org/1999/XPath", isAttr: !0, type: "String" }, { name: "typeLanguage", default: "http://www.w3.org/2001/XMLSchema", isAttr: !0, type: "String" }, { name: "imports", type: "Import", isMany: !0 }, { name: "extensions", type: "Extension", isMany: !0 }, { name: "rootElements", type: "RootElement", isMany: !0 }, { name: "diagrams", isMany: !0, type: "bpmndi:BPMNDiagram" }, { name: "exporter", isAttr: !0, type: "String" }, { name: "relationships", type: "Relationship", isMany: !0 }, { name: "exporterVersion", isAttr: !0, type: "String" }] }], enumerations: [{ name: "ProcessType", literalValues: [{ name: "None" }, { name: "Public" }, { name: "Private" }] }, { name: "GatewayDirection", literalValues: [{ name: "Unspecified" }, { name: "Converging" }, { name: "Diverging" }, { name: "Mixed" }] }, { name: "EventBasedGatewayType", literalValues: [{ name: "Parallel" }, { name: "Exclusive" }] }, { name: "RelationshipDirection", literalValues: [{ name: "None" }, { name: "Forward" }, { name: "Backward" }, { name: "Both" }] }, { name: "ItemKind", literalValues: [{ name: "Physical" }, { name: "Information" }] }, { name: "ChoreographyLoopType", literalValues: [{ name: "None" }, { name: "Standard" }, { name: "MultiInstanceSequential" }, { name: "MultiInstanceParallel" }] }, { name: "AssociationDirection", literalValues: [{ name: "None" }, { name: "One" }, { name: "Both" }] }, { name: "MultiInstanceBehavior", literalValues: [{ name: "None" }, { name: "One" }, { name: "All" }, { name: "Complex" }] }, { name: "AdHocOrdering", literalValues: [{ name: "Parallel" }, { name: "Sequential" }] }], xml: { tagAlias: "lowerCase", typePrefix: "t" } }, bpmndi: { name: "BPMNDI", uri: "http://www.omg.org/spec/BPMN/20100524/DI", prefix: "bpmndi", types: [{ name: "BPMNDiagram", properties: [{ name: "plane", type: "BPMNPlane", redefines: "di:Diagram#rootElement" }, { name: "labelStyle", type: "BPMNLabelStyle", isMany: !0 }], superClass: ["di:Diagram"] }, { name: "BPMNPlane", properties: [{ name: "bpmnElement", isAttr: !0, isReference: !0, type: "bpmn:BaseElement", redefines: "di:DiagramElement#modelElement" }], superClass: ["di:Plane"] }, { name: "BPMNShape", properties: [{ name: "bpmnElement", isAttr: !0, isReference: !0, type: "bpmn:BaseElement", redefines: "di:DiagramElement#modelElement" }, { name: "isHorizontal", isAttr: !0, type: "Boolean" }, { name: "isExpanded", isAttr: !0, type: "Boolean" }, { name: "isMarkerVisible", isAttr: !0, type: "Boolean" }, { name: "label", type: "BPMNLabel" }, { name: "isMessageVisible", isAttr: !0, type: "Boolean" }, { name: "participantBandKind", type: "ParticipantBandKind", isAttr: !0 }, { name: "choreographyActivityShape", type: "BPMNShape", isAttr: !0, isReference: !0 }], superClass: ["di:LabeledShape"] }, { name: "BPMNEdge", properties: [{ name: "label", type: "BPMNLabel" }, { name: "bpmnElement", isAttr: !0, isReference: !0, type: "bpmn:BaseElement", redefines: "di:DiagramElement#modelElement" }, { name: "sourceElement", isAttr: !0, isReference: !0, type: "di:DiagramElement", redefines: "di:Edge#source" }, { name: "targetElement", isAttr: !0, isReference: !0, type: "di:DiagramElement", redefines: "di:Edge#target" }, { name: "messageVisibleKind", type: "MessageVisibleKind", isAttr: !0, default: "initiating" }], superClass: ["di:LabeledEdge"] }, { name: "BPMNLabel", properties: [{ name: "labelStyle", type: "BPMNLabelStyle", isAttr: !0, isReference: !0, redefines: "di:DiagramElement#style" }], superClass: ["di:Label"] }, { name: "BPMNLabelStyle", properties: [{ name: "font", type: "dc:Font" }], superClass: ["di:Style"] }], enumerations: [{ name: "ParticipantBandKind", literalValues: [{ name: "top_initiating" }, { name: "middle_initiating" }, { name: "bottom_initiating" }, { name: "top_non_initiating" }, { name: "middle_non_initiating" }, { name: "bottom_non_initiating" }] }, { name: "MessageVisibleKind", literalValues: [{ name: "initiating" }, { name: "non_initiating" }] }], associations: [] }, dc: { name: "DC", uri: "http://www.omg.org/spec/DD/20100524/DC", prefix: "dc", types: [{ name: "Boolean" }, { name: "Integer" }, { name: "Real" }, { name: "String" }, { name: "Font", properties: [{ name: "name", type: "String", isAttr: !0 }, { name: "size", type: "Real", isAttr: !0 }, { name: "isBold", type: "Boolean", isAttr: !0 }, { name: "isItalic", type: "Boolean", isAttr: !0 }, { name: "isUnderline", type: "Boolean", isAttr: !0 }, { name: "isStrikeThrough", type: "Boolean", isAttr: !0 }] }, { name: "Point", properties: [{ name: "x", type: "Real", default: "0", isAttr: !0 }, { name: "y", type: "Real", default: "0", isAttr: !0 }] }, { name: "Bounds", properties: [{ name: "x", type: "Real", default: "0", isAttr: !0 }, { name: "y", type: "Real", default: "0", isAttr: !0 }, { name: "width", type: "Real", isAttr: !0 }, { name: "height", type: "Real", isAttr: !0 }] }], associations: [] }, di: { name: "DI", uri: "http://www.omg.org/spec/DD/20100524/DI", prefix: "di", types: [{ name: "DiagramElement", isAbstract: !0, properties: [{ name: "id", isAttr: !0, isId: !0, type: "String" }, { name: "extension", type: "Extension" }, { name: "owningDiagram", type: "Diagram", isReadOnly: !0, isVirtual: !0, isReference: !0 }, { name: "owningElement", type: "DiagramElement", isReadOnly: !0, isVirtual: !0, isReference: !0 }, { name: "modelElement", isReadOnly: !0, isVirtual: !0, isReference: !0, type: "Element" }, { name: "style", type: "Style", isReadOnly: !0, isVirtual: !0, isReference: !0 }, { name: "ownedElement", type: "DiagramElement", isReadOnly: !0, isMany: !0, isVirtual: !0 }] }, { name: "Node", isAbstract: !0, superClass: ["DiagramElement"] }, { name: "Edge", isAbstract: !0, superClass: ["DiagramElement"], properties: [{ name: "source", type: "DiagramElement", isReadOnly: !0, isVirtual: !0, isReference: !0 }, { name: "target", type: "DiagramElement", isReadOnly: !0, isVirtual: !0, isReference: !0 }, { name: "waypoint", isUnique: !1, isMany: !0, type: "dc:Point", xml: { serialize: "xsi:type" } }] }, { name: "Diagram", isAbstract: !0, properties: [{ name: "id", isAttr: !0, isId: !0, type: "String" }, { name: "rootElement", type: "DiagramElement", isReadOnly: !0, isVirtual: !0 }, { name: "name", isAttr: !0, type: "String" }, { name: "documentation", isAttr: !0, type: "String" }, { name: "resolution", isAttr: !0, type: "Real" }, { name: "ownedStyle", type: "Style", isReadOnly: !0, isMany: !0, isVirtual: !0 }] }, { name: "Shape", isAbstract: !0, superClass: ["Node"], properties: [{ name: "bounds", type: "dc:Bounds" }] }, { name: "Plane", isAbstract: !0, superClass: ["Node"], properties: [{ name: "planeElement", type: "DiagramElement", subsettedProperty: "DiagramElement-ownedElement", isMany: !0 }] }, { name: "LabeledEdge", isAbstract: !0, superClass: ["Edge"], properties: [{ name: "ownedLabel", type: "Label", isReadOnly: !0, subsettedProperty: "DiagramElement-ownedElement", isMany: !0, isVirtual: !0 }] }, { name: "LabeledShape", isAbstract: !0, superClass: ["Shape"], properties: [{ name: "ownedLabel", type: "Label", isReadOnly: !0, subsettedProperty: "DiagramElement-ownedElement", isMany: !0, isVirtual: !0 }] }, { name: "Label", isAbstract: !0, superClass: ["Node"], properties: [{ name: "bounds", type: "dc:Bounds" }] }, { name: "Style", isAbstract: !0, properties: [{ name: "id", isAttr: !0, isId: !0, type: "String" }] }, { name: "Extension", properties: [{ name: "values", isMany: !0, type: "Element" }] }], associations: [], xml: { tagAlias: "lowerCase" } }, bioc: { name: "bpmn.io colors for BPMN", uri: "http://bpmn.io/schema/bpmn/biocolor/1.0", prefix: "bioc", types: [{ name: "ColoredShape", extends: ["bpmndi:BPMNShape"], properties: [{ name: "stroke", isAttr: !0, type: "String" }, { name: "fill", isAttr: !0, type: "String" }] }, { name: "ColoredEdge", extends: ["bpmndi:BPMNEdge"], properties: [{ name: "stroke", isAttr: !0, type: "String" }, { name: "fill", isAttr: !0, type: "String" }] }], enumerations: [], associations: [] }, color: { name: "BPMN in Color", uri: "http://www.omg.org/spec/BPMN/non-normative/color/1.0", prefix: "color", types: [{ name: "ColoredLabel", extends: ["bpmndi:BPMNLabel"], properties: [{ name: "color", isAttr: !0, type: "String" }] }, { name: "ColoredShape", extends: ["bpmndi:BPMNShape"], properties: [{ name: "background-color", isAttr: !0, type: "String" }, { name: "border-color", isAttr: !0, type: "String" }] }, { name: "ColoredEdge", extends: ["bpmndi:BPMNEdge"], properties: [{ name: "border-color", isAttr: !0, type: "String" }] }], enumerations: [], associations: [] } };
    function ww(s, p) {
      return new Jc($({}, Ew, s), p);
    }
    var Sw = "Tried to access di from the businessObject. The di is available through the diagram element only. For more information, see https://github.com/bpmn-io/bpmn-js/issues/1472";
    function Kn(s, p) {
      return s.$instanceOf(p);
    }
    function Rw(s) {
      var p = {}, h = [], m = {};
      function v(ye, me) {
        return function(He) {
          ye(He, me);
        };
      }
      function b(ye) {
        p[ye.id] = ye;
      }
      function S(ye, me) {
        try {
          var He = m[ye.id] && function(tt, st) {
            if (tt.gfx)
              throw new Error(`already rendered ${Mn(tt)}`);
            return s.element(tt, m[tt.id], st);
          }(ye, me);
          return b(ye), He;
        } catch (tt) {
          M(tt.message, { element: ye, error: tt }), console.error(`failed to import ${Mn(ye)}`, tt);
        }
      }
      function M(ye, me) {
        s.error(ye, me);
      }
      var B = this.registerDi = function(ye) {
        var me, He = ye.bpmnElement;
        He ? m[He.id] ? M(`multiple DI elements defined for ${Mn(He)}`, { element: He }) : (m[He.id] = ye, y(me = He, "di") || Object.defineProperty(me, "di", { enumerable: !1, get: function() {
          throw new Error(Sw);
        } })) : M(`no bpmnElement referenced in ${Mn(ye)}`, { element: ye });
      };
      function q(ye) {
        var me;
        me = ye.plane, B(me), x(me.planeElement, ee);
      }
      function ee(ye) {
        B(ye);
      }
      this.handleDefinitions = function(ye, me) {
        var He = ye.diagrams;
        if (me && He.indexOf(me) === -1)
          throw new Error("diagram not part of <bpmn:Definitions />");
        if (!me && He && He.length && (me = He[0]), !me)
          throw new Error("no diagram to display");
        m = {}, q(me);
        var tt = me.plane;
        if (!tt)
          throw new Error(`no plane for ${Mn(me)}`);
        var st = tt.bpmnElement;
        if (!st) {
          if (st = function(Si) {
            return g(Si.rootElements, function(En) {
              return Kn(En, "bpmn:Process") || Kn(En, "bpmn:Collaboration");
            });
          }(ye), !st)
            throw new Error("no process or collaboration to display");
          M(`correcting missing bpmnElement on ${Mn(tt)} to ${Mn(st)}`), tt.bpmnElement = st, B(tt);
        }
        var mi, Ot, ji = function(Si, En) {
          return s.root(Si, m[Si.id], En);
        }(st, tt);
        if (Kn(st, "bpmn:Process") || Kn(st, "bpmn:SubProcess"))
          be(st, ji);
        else {
          if (!Kn(st, "bpmn:Collaboration"))
            throw new Error(`unsupported bpmnElement for ${Mn(tt)}: ${Mn(st)}`);
          Ot = ji, x((mi = st).participants, v(Ft, Ot)), Y(mi.artifacts, Ot), h.push(function() {
            (function(Si, En) {
              x(Si, v(Te, En));
            })(mi.messageFlows, Ot);
          }), function(Si, En) {
            var qn = _(Si, function(St) {
              return !p[St.id] && Kn(St, "bpmn:Process") && St.laneSets;
            });
            qn.forEach(v(be, En));
          }(ye.rootElements, ji);
        }
        pe(h);
      };
      var pe = this.handleDeferred = function() {
        for (; h.length; )
          h.shift()();
      };
      function be(ye, me) {
        De(ye, me), te(ye.ioSpecification, me), Y(ye.artifacts, me), b(ye);
      }
      function Te(ye, me) {
        S(ye, me);
      }
      function Re(ye, me) {
        S(ye, me);
      }
      function Ie(ye, me) {
        S(ye, me);
      }
      function re(ye, me) {
        S(ye, me);
      }
      function ve(ye, me) {
        S(ye, me);
      }
      function Y(ye, me) {
        x(ye, function(He) {
          Kn(He, "bpmn:Association") ? h.push(function() {
            ve(He, me);
          }) : ve(He, me);
        });
      }
      function te(ye, me) {
        ye && (x(ye.dataInputs, v(Ie, me)), x(ye.dataOutputs, v(re, me)));
      }
      var J = this.handleSubProcess = function(ye, me) {
        De(ye, me), Y(ye.artifacts, me);
      };
      function ce(ye, me) {
        var He = S(ye, me);
        Kn(ye, "bpmn:SubProcess") && J(ye, He || me), Kn(ye, "bpmn:Activity") && te(ye.ioSpecification, me), h.push(function() {
          x(ye.dataInputAssociations, v(Re, me)), x(ye.dataOutputAssociations, v(Re, me));
        });
      }
      function ge(ye, me) {
        S(ye, me);
      }
      function Ze(ye, me) {
        h.push(function() {
          var He = S(ye, me);
          ye.childLaneSet && We(ye.childLaneSet, He || me), function(tt) {
            x(tt.flowNodeRef, function(st) {
              var mi = st.get("lanes");
              mi && mi.push(tt);
            });
          }(ye);
        });
      }
      function We(ye, me) {
        x(ye.lanes, v(Ze, me));
      }
      function De(ye, me) {
        (function(He, tt) {
          x(He, function(st) {
            Kn(st, "bpmn:SequenceFlow") ? h.push(function() {
              (function(mi, Ot) {
                S(mi, Ot);
              })(st, tt);
            }) : Kn(st, "bpmn:BoundaryEvent") ? h.unshift(function() {
              ce(st, tt);
            }) : Kn(st, "bpmn:FlowNode") ? ce(st, tt) : Kn(st, "bpmn:DataObject") || (Kn(st, "bpmn:DataStoreReference") || Kn(st, "bpmn:DataObjectReference") ? ge(st, tt) : M(`unrecognized flowElement ${Mn(st)} in context ${Mn(tt && tt.businessObject)}`, { element: st, context: tt }));
          });
        })(ye.flowElements, me), ye.laneSets && function(He, tt) {
          x(He, v(We, tt));
        }(ye.laneSets, me);
      }
      function Ft(ye, me) {
        var He = S(ye, me), tt = ye.processRef;
        tt && be(tt, He || me);
      }
    }
    function Cw(s, p, h) {
      var m, v, b, S = [];
      function M(B, q) {
        var ee = new Rw({ root: function(Te, Re) {
          return m.add(Te, Re);
        }, element: function(Te, Re, Ie) {
          return m.add(Te, Re, Ie);
        }, error: function(Te, Re) {
          S.push({ message: Te, context: Re });
        } });
        q = q || B.diagrams && B.diagrams[0];
        var pe = function(Te, Re) {
          if (Re) {
            var Ie, re = Re.plane.bpmnElement, ve = re;
            V(re, "bpmn:Process") || V(re, "bpmn:Collaboration") || (ve = function(ge) {
              for (var Ze = ge; Ze; ) {
                if (V(Ze, "bpmn:Process"))
                  return Ze;
                Ze = Ze.$parent;
              }
            }(re)), Ie = V(ve, "bpmn:Collaboration") ? ve : g(Te.rootElements, function(ge) {
              if (V(ge, "bpmn:Collaboration"))
                return g(ge.participants, function(Ze) {
                  return Ze.processRef === ve;
                });
            });
            var Y = [ve];
            Ie && (Y = function(ge, Ze) {
              let We = [];
              return x(ge, function(De, Ft) {
                We.push(Ze(De, Ft));
              }), We;
            }(Ie.participants, function(ge) {
              return ge.processRef;
            })).push(Ie);
            var te = xy(Y), J = [Re], ce = [re];
            return x(Te.diagrams, function(ge) {
              var Ze = ge.plane.bpmnElement;
              te.indexOf(Ze) !== -1 && ce.indexOf(Ze) === -1 && (J.push(ge), ce.push(Ze));
            }), J;
          }
        }(B, q);
        if (!pe)
          throw new Error("no diagram to display");
        x(pe, function(Te) {
          ee.handleDefinitions(B, Te);
        });
        var be = q.plane.bpmnElement.id;
        b.setRootElement(b.findRoot(be + "_plane") || b.findRoot(be));
      }
      return new Promise(function(B, q) {
        try {
          return m = s.get("bpmnImporter"), v = s.get("eventBus"), b = s.get("canvas"), v.fire("import.render.start", { definitions: p }), M(p, h), v.fire("import.render.complete", { error: void 0, warnings: S }), B({ warnings: S });
        } catch (ee) {
          return ee.warnings = S, q(ee);
        }
      });
    }
    function xy(s) {
      var p = [];
      return x(s, function(h) {
        h && (p.push(h), p = p.concat(xy(h.flowElements)));
      }), p;
    }
    var wr, Ey = '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 14.02 5.57" width="53" height="21"><path fill="currentColor" d="M1.88.92v.14c0 .41-.13.68-.4.8.33.14.46.44.46.86v.33c0 .61-.33.95-.95.95H0V0h.95c.65 0 .93.3.93.92zM.63.57v1.06h.24c.24 0 .38-.1.38-.43V.98c0-.28-.1-.4-.32-.4zm0 1.63v1.22h.36c.2 0 .32-.1.32-.39v-.35c0-.37-.12-.48-.4-.48H.63zM4.18.99v.52c0 .64-.31.98-.94.98h-.3V4h-.62V0h.92c.63 0 .94.35.94.99zM2.94.57v1.35h.3c.2 0 .3-.09.3-.37v-.6c0-.29-.1-.38-.3-.38h-.3zm2.89 2.27L6.25 0h.88v4h-.6V1.12L6.1 3.99h-.6l-.46-2.82v2.82h-.55V0h.87zM8.14 1.1V4h-.56V0h.79L9 2.4V0h.56v4h-.64zm2.49 2.29v.6h-.6v-.6zM12.12 1c0-.63.33-1 .95-1 .61 0 .95.37.95 1v2.04c0 .64-.34 1-.95 1-.62 0-.95-.37-.95-1zm.62 2.08c0 .28.13.39.33.39s.32-.1.32-.4V.98c0-.29-.12-.4-.32-.4s-.33.11-.33.4z"/><path fill="currentColor" d="M0 4.53h14.02v1.04H0zM11.08 0h.63v.62h-.63zm.63 4V1h-.63v2.98z"/></svg>', wy = { verticalAlign: "middle" }, Sy = { color: "#404040" }, Aw = { zIndex: "1001", position: "fixed", top: "0", left: "0", right: "0", bottom: "0" }, Pw = { width: "100%", height: "100%", background: "rgba(40,40,40,0.2)" }, Tw = { position: "absolute", left: "50%", top: "40%", transform: "translate(-50%)", width: "260px", padding: "10px", background: "white", boxShadow: "0 1px 4px rgba(0,0,0,0.3)", fontFamily: "Helvetica, Arial, sans-serif", fontSize: "14px", display: "flex", lineHeight: "1.3" }, kw = '<div class="bjs-powered-by-lightbox"><div class="backdrop"></div><div class="notice"><a href="https://bpmn.io" target="_blank" rel="noopener" class="link">' + Ey + '</a><span>Web-based tooling for BPMN, DMN and forms powered by <a href="https://bpmn.io" target="_blank" rel="noopener">bpmn.io</a>.</span></div></div>';
    function Mw() {
      wr || (kn(wr = $t(kw), Aw), kn(Un("svg", wr), wy), kn(Un(".backdrop", wr), Pw), kn(Un(".notice", wr), Tw), kn(Un(".link", wr), Sy, { margin: "15px 20px 15px 10px", alignSelf: "center" }), Gt.bind(wr, ".backdrop", "click", function(s) {
        document.body.removeChild(wr);
      })), document.body.appendChild(wr);
    }
    function Jt(s) {
      s = $({}, Dw, s), this._moddle = this._createModdle(s), this._container = this._createContainer(s), /**
         * Adds the project logo to the diagram container as
         * required by the bpmn.io license.
         *
         * @see http://bpmn.io/license
         *
         * @param {Element} container
         */
      function(p) {
        const h = $t('<a href="http://bpmn.io" target="_blank" class="bjs-powered-by" title="Powered by bpmn.io" >' + Ey + "</a>");
        kn(Un("svg", h), wy), kn(h, Sy, { position: "absolute", bottom: "15px", right: "15px", zIndex: "100" }), p.appendChild(h), Ke.bind(h, "click", function(m) {
          Mw(), m.preventDefault();
        });
      }(this._container), this._init(this._container, this._moddle, s);
    }
    function Qc(s, p) {
      return s.warnings = p, s;
    }
    n(Jt, Gr), Jt.prototype.importXML = async function(s, p) {
      const h = this;
      let m = [];
      try {
        let b;
        s = this._emit("import.parse.start", { xml: s }) || s;
        try {
          b = await this._moddle.fromXML(s, "bpmn:Definitions");
        } catch (pe) {
          throw this._emit("import.parse.complete", { error: pe }), pe;
        }
        let S = b.rootElement;
        const M = b.references, B = b.warnings, q = b.elementsById;
        m = m.concat(B), S = this._emit("import.parse.complete", (v = { error: null, definitions: S, elementsById: q, references: M, warnings: m }, h.get("eventBus").createEvent(v))) || S;
        const ee = await this.importDefinitions(S, p);
        return m = m.concat(ee.warnings), this._emit("import.done", { error: null, warnings: m }), { warnings: m };
      } catch (b) {
        let S = b;
        throw m = m.concat(S.warnings || []), Qc(S, m), S = function(M) {
          const B = /unparsable content <([^>]+)> detected([\s\S]*)$/.exec(M.message);
          return B && (M.message = "unparsable content <" + B[1] + "> detected; this may indicate an invalid BPMN 2.0 diagram file" + B[2]), M;
        }(S), this._emit("import.done", { error: S, warnings: S.warnings }), S;
      }
      var v;
    }, Jt.prototype.importDefinitions = async function(s, p) {
      return this._setDefinitions(s), { warnings: (await this.open(p)).warnings };
    }, Jt.prototype.open = async function(s) {
      const p = this._definitions;
      let h = s;
      if (!p) {
        const v = new Error("no XML imported");
        throw Qc(v, []), v;
      }
      if (typeof s == "string" && (h = function(v, b) {
        return b && g(v.diagrams, function(S) {
          return S.id === b;
        }) || null;
      }(p, s), !h)) {
        const v = new Error("BPMNDiagram <" + s + "> not found");
        throw Qc(v, []), v;
      }
      try {
        this.clear();
      } catch (v) {
        throw Qc(v, []), v;
      }
      const { warnings: m } = await Cw(this, p, h);
      return { warnings: m };
    }, Jt.prototype.saveXML = async function(s) {
      s = s || {};
      let p, h, m = this._definitions;
      try {
        if (!m)
          throw new Error("no definitions loaded");
        m = this._emit("saveXML.start", { definitions: m }) || m, h = (await this._moddle.toXML(m, s)).xml, h = this._emit("saveXML.serialized", { xml: h }) || h;
      } catch (b) {
        p = b;
      }
      const v = p ? { error: p } : { xml: h };
      if (this._emit("saveXML.done", v), p)
        throw p;
      return v;
    }, Jt.prototype.saveSVG = async function() {
      let s, p;
      this._emit("saveSVG.start");
      try {
        const h = this.get("canvas"), m = h.getActiveLayer(), v = Un("defs", h._svg), b = Xi(m), S = v ? "<defs>" + Xi(v) + "</defs>" : "", M = m.getBBox();
        s = `<?xml version="1.0" encoding="utf-8"?>
<!-- created with bpmn-js / http://bpmn.io -->
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="` + M.width + '" height="' + M.height + '" viewBox="' + M.x + " " + M.y + " " + M.width + " " + M.height + '" version="1.1">' + S + b + "</svg>";
      } catch (h) {
        p = h;
      }
      if (this._emit("saveSVG.done", { error: p, svg: s }), p)
        throw p;
      return { svg: s };
    }, Jt.prototype._setDefinitions = function(s) {
      this._definitions = s;
    }, Jt.prototype.getModules = function() {
      return this._modules;
    }, Jt.prototype.clear = function() {
      this.getDefinitions() && Gr.prototype.clear.call(this);
    }, Jt.prototype.destroy = function() {
      Gr.prototype.destroy.call(this), da(this._container);
    }, Jt.prototype.on = function(s, p, h, m) {
      return this.get("eventBus").on(s, p, h, m);
    }, Jt.prototype.off = function(s, p) {
      this.get("eventBus").off(s, p);
    }, Jt.prototype.attachTo = function(s) {
      if (!s)
        throw new Error("parentNode required");
      this.detach(), s.get && s.constructor.prototype.jquery && (s = s.get(0)), typeof s == "string" && (s = Un(s)), s.appendChild(this._container), this._emit("attach", {}), this.get("canvas").resized();
    }, Jt.prototype.getDefinitions = function() {
      return this._definitions;
    }, Jt.prototype.detach = function() {
      const s = this._container, p = s.parentNode;
      p && (this._emit("detach", {}), p.removeChild(s));
    }, Jt.prototype._init = function(s, p, h) {
      const m = h.modules || this.getModules(h), v = h.additionalModules || [], b = [].concat([{ bpmnjs: ["value", this], moddle: ["value", p] }], m, v), S = $(function(M, B) {
        let q = {};
        return x(Object(M), function(ee, pe) {
          B.indexOf(pe) === -1 && (q[pe] = ee);
        }), q;
      }(h, ["additionalModules"]), { canvas: $({}, h.canvas, { container: s }), modules: b });
      Gr.call(this, S), h && h.container && this.attachTo(h.container);
    }, Jt.prototype._emit = function(s, p) {
      return this.get("eventBus").fire(s, p);
    }, Jt.prototype._createContainer = function(s) {
      const p = $t('<div class="bjs-container"></div>');
      return kn(p, { width: Ry(s.width), height: Ry(s.height), position: s.position }), p;
    }, Jt.prototype._createModdle = function(s) {
      return new ww($({}, this._moddleExtensions, s.moddleExtensions));
    }, Jt.prototype._modules = [];
    const Dw = { width: "100%", height: "100%", position: "relative" };
    function Ry(s) {
      return s + (u(s) ? "px" : "");
    }
    function xa(s) {
      Jt.call(this, s);
    }
    n(xa, Jt), xa.prototype._modules = [k1, j1, z1, Tm, U1, Em], xa.prototype._moddleExtensions = {};
    var Ow = ["c", "C"], Nw = ["v", "V"], Bw = ["y", "Y"], Cy = ["z", "Z"];
    function Sr(s) {
      return !s.altKey && (s.ctrlKey || s.metaKey);
    }
    function $i(s, p) {
      return (s = c(s) ? s : [s]).indexOf(p.key) !== -1 || s.indexOf(p.code) !== -1;
    }
    function Vp(s) {
      return s.shiftKey;
    }
    var el = "keyboard.keydown", Ay = "input-handle-modified-keys";
    function xn(s, p) {
      var h = this;
      this._config = s || {}, this._eventBus = p, this._keydownHandler = this._keydownHandler.bind(this), this._keyupHandler = this._keyupHandler.bind(this), p.on("diagram.destroy", function() {
        h._fire("destroy"), h.unbind();
      }), p.on("diagram.init", function() {
        h._fire("init");
      }), p.on("attach", function() {
        s && s.bindTo && h.bind(s.bindTo);
      }), p.on("detach", function() {
        h.unbind();
      });
    }
    xn.$inject = ["config.keyboard", "eventBus"], xn.prototype._keydownHandler = function(s) {
      this._keyHandler(s, el);
    }, xn.prototype._keyupHandler = function(s) {
      this._keyHandler(s, "keyboard.keyup");
    }, xn.prototype._keyHandler = function(s, p) {
      if (!this._isEventIgnored(s)) {
        var h = { keyEvent: s };
        this._eventBus.fire(p || el, h) && s.preventDefault();
      }
    }, xn.prototype._isEventIgnored = function(s) {
      return !!s.defaultPrevented || ((p = s.target) && (H(p, "input, textarea") || p.contentEditable === "true") || function(h) {
        return h && H(h, "button, input[type=submit], input[type=button], a[href], [aria-role=button]");
      }(s.target) && $i([" ", "Enter"], s)) && this._isModifiedKeyIgnored(s);
      var p;
    }, xn.prototype._isModifiedKeyIgnored = function(s) {
      return !Sr(s) || this._getAllowedModifiers(s.target).indexOf(s.key) === -1;
    }, xn.prototype._getAllowedModifiers = function(s) {
      var p = ue(s, "[" + Ay + "]", !0);
      return !p || this._node && !this._node.contains(p) ? [] : p.getAttribute(Ay).split(",");
    }, xn.prototype.bind = function(s) {
      this.unbind(), this._node = s, Ke.bind(s, "keydown", this._keydownHandler), Ke.bind(s, "keyup", this._keyupHandler), this._fire("bind");
    }, xn.prototype.getBinding = function() {
      return this._node;
    }, xn.prototype.unbind = function() {
      var s = this._node;
      s && (this._fire("unbind"), Ke.unbind(s, "keydown", this._keydownHandler), Ke.unbind(s, "keyup", this._keyupHandler)), this._node = null;
    }, xn.prototype._fire = function(s) {
      this._eventBus.fire("keyboard." + s, { node: this._node });
    }, xn.prototype.addListener = function(s, p, h) {
      d(s) && (h = p, p = s, s = 1e3), this._eventBus.on(h || el, s, p);
    }, xn.prototype.removeListener = function(s, p) {
      this._eventBus.off(p || el, s);
    }, xn.prototype.hasModifier = function(s) {
      return s.ctrlKey || s.metaKey || s.shiftKey || s.altKey;
    }, xn.prototype.isCmd = Sr, xn.prototype.isShift = Vp, xn.prototype.isKey = $i;
    function Wp(s, p) {
      var h = this;
      s.on("editorActions.init", 500, function(m) {
        var v = m.editorActions;
        h.registerBindings(p, v);
      });
    }
    Wp.$inject = ["eventBus", "keyboard"], Wp.prototype.registerBindings = function(s, p) {
      function h(m, v) {
        p.isRegistered(m) && s.addListener(v);
      }
      h("undo", function(m) {
        if (function(v) {
          return Sr(v) && !Vp(v) && $i(Cy, v);
        }(m.keyEvent))
          return p.trigger("undo"), !0;
      }), h("redo", function(m) {
        if (function(v) {
          return Sr(v) && ($i(Bw, v) || $i(Cy, v) && Vp(v));
        }(m.keyEvent))
          return p.trigger("redo"), !0;
      }), h("copy", function(m) {
        if (function(v) {
          return Sr(v) && $i(Ow, v);
        }(m.keyEvent))
          return p.trigger("copy"), !0;
      }), h("paste", function(m) {
        if (function(v) {
          return Sr(v) && $i(Nw, v);
        }(m.keyEvent))
          return p.trigger("paste"), !0;
      }), h("stepZoom", function(m) {
        var v = m.keyEvent;
        if ($i(["+", "Add", "="], v) && Sr(v))
          return p.trigger("stepZoom", { value: 1 }), !0;
      }), h("stepZoom", function(m) {
        var v = m.keyEvent;
        if ($i(["-", "Subtract"], v) && Sr(v))
          return p.trigger("stepZoom", { value: -1 }), !0;
      }), h("zoom", function(m) {
        var v = m.keyEvent;
        if ($i("0", v) && Sr(v))
          return p.trigger("zoom", { value: 1 }), !0;
      }), h("removeSelection", function(m) {
        if ($i(["Backspace", "Delete", "Del"], m.keyEvent))
          return p.trigger("removeSelection"), !0;
      });
    };
    var Lw = { __init__: ["keyboard", "keyboardBindings"], keyboard: ["type", xn], keyboardBindings: ["type", Wp] }, Iw = { moveSpeed: 50, moveSpeedAccelerated: 200 };
    function Py(s, p, h) {
      var m = this;
      this._config = $({}, Iw, s || {}), p.addListener(function(v) {
        var b = v.keyEvent, S = m._config;
        if (p.isCmd(b) && p.isKey(["ArrowLeft", "Left", "ArrowUp", "Up", "ArrowDown", "Down", "ArrowRight", "Right"], b)) {
          var M, B = p.isShift(b) ? S.moveSpeedAccelerated : S.moveSpeed;
          switch (b.key) {
            case "ArrowLeft":
            case "Left":
              M = "left";
              break;
            case "ArrowUp":
            case "Up":
              M = "up";
              break;
            case "ArrowRight":
            case "Right":
              M = "right";
              break;
            case "ArrowDown":
            case "Down":
              M = "down";
          }
          return m.moveCanvas({ speed: B, direction: M }), !0;
        }
      }), this.moveCanvas = function(v) {
        var b = 0, S = 0, M = v.speed / Math.min(Math.sqrt(h.viewbox().scale), 1);
        switch (v.direction) {
          case "left":
            b = M;
            break;
          case "up":
            S = M;
            break;
          case "right":
            b = -M;
            break;
          case "down":
            S = -M;
        }
        h.scroll({ dx: b, dy: S });
      };
    }
    Py.$inject = ["config.keyboardMove", "keyboard", "canvas"];
    var $w = { __depends__: [Lw], __init__: ["keyboardMove"], keyboardMove: ["type", Py] }, jw = /^djs-cursor-.*$/;
    function Ty(s) {
      var p = ko(document.body);
      p.removeMatching(jw), s && p.add("djs-cursor-" + s);
    }
    var Fw = 5e3;
    function ky(s, p) {
      return { x: s.x - p.x, y: s.y - p.y };
    }
    function My(s, p) {
      var h;
      function m(b) {
        var S, M = h.start, B = h.button, q = $m(b), ee = ky(q, M);
        !h.dragging && (S = ee, Math.sqrt(Math.pow(S.x, 2) + Math.pow(S.y, 2)) > 15) && (h.dragging = !0, B === 0 && function(pe, be) {
          function Te() {
            return !1;
          }
          be = be || "element.click", pe.once(be, Fw, Te);
        }(s), Ty("grab")), h.dragging && (ee = ky(q, h.last || h.start), p.scroll({ dx: ee.x, dy: ee.y }), h.last = q), b.preventDefault();
      }
      function v(b) {
        Ke.unbind(document, "mousemove", m), Ke.unbind(document, "mouseup", v), h = null, Ty(null);
      }
      s.on("element.mousedown", 500, function(b) {
        return function(S) {
          if (!ue(S.target, ".djs-draggable")) {
            var M = S.button;
            if (!(M >= 2 || S.ctrlKey || S.shiftKey || S.altKey))
              return h = { button: M, start: $m(S) }, Ke.bind(document, "mousemove", m), Ke.bind(document, "mouseup", v), !0;
          }
        }(b.originalEvent);
      }), this.isActive = function() {
        return !!h;
      };
    }
    My.$inject = ["eventBus", "canvas"];
    var Hw = { __init__: ["moveCanvas"], moveCanvas: ["type", My] };
    function Gp(s) {
      return Math.log(s) / Math.log(10);
    }
    function Dy(s, p) {
      var h = Gp(s.min), m = Gp(s.max);
      return (Math.abs(h) + Math.abs(m)) / p;
    }
    var zw = Math.sign || function(s) {
      return s >= 0 ? 1 : -1;
    }, Up = { min: 0.2, max: 4 };
    function Qi(s, p, h) {
      s = s || {}, this._enabled = !1, this._canvas = h, this._container = h._container, this._handleWheel = W(this._handleWheel, this), this._totalDelta = 0, this._scale = s.scale || 0.75;
      var m = this;
      p.on("canvas.init", function(v) {
        m._init(s.enabled !== !1);
      });
    }
    Qi.$inject = ["config.zoomScroll", "eventBus", "canvas"], Qi.prototype.scroll = function(s) {
      this._canvas.scroll(s);
    }, Qi.prototype.reset = function() {
      this._canvas.zoom("fit-viewport");
    }, Qi.prototype.zoom = function(s, p) {
      var h = Dy(Up, 20);
      this._totalDelta += s, Math.abs(this._totalDelta) > 0.1 && (this._zoom(s, p, h), this._totalDelta = 0);
    }, Qi.prototype._handleWheel = function(s) {
      if (!ue(s.target, ".djs-scrollable", !0)) {
        var p = this._container;
        s.preventDefault();
        var h, m = s.ctrlKey || /mac/i.test(navigator.platform) && s.metaKey, v = s.shiftKey, b = -1 * this._scale;
        if (b *= m ? s.deltaMode === 0 ? 0.02 : 0.32 : s.deltaMode === 0 ? 1 : 16, m) {
          var S = p.getBoundingClientRect(), M = { x: s.clientX - S.left, y: s.clientY - S.top };
          h = Math.sqrt(Math.pow(s.deltaY, 2) + Math.pow(s.deltaX, 2)) * zw(s.deltaY) * b, this.zoom(h, M);
        } else
          h = v ? { dx: b * s.deltaY, dy: 0 } : { dx: b * s.deltaX, dy: b * s.deltaY }, this.scroll(h);
      }
    }, Qi.prototype.stepZoom = function(s, p) {
      var h = Dy(Up, 10);
      this._zoom(s, p, h);
    }, Qi.prototype._zoom = function(s, p, h) {
      var m = this._canvas, v = s > 0 ? 1 : -1, b = Gp(m.zoom()), S = Math.round(b / h) * h;
      S += h * v;
      var M, B, q = Math.pow(10, S);
      m.zoom((M = Up, B = q, Math.max(M.min, Math.min(M.max, B))), p);
    }, Qi.prototype.toggle = function(s) {
      var p = this._container, h = this._handleWheel, m = this._enabled;
      return s === void 0 && (s = !m), m !== s && Ke[s ? "bind" : "unbind"](p, "wheel", h, !1), this._enabled = s, s;
    }, Qi.prototype._init = function(s) {
      this.toggle(s);
    };
    var Vw = { __init__: ["zoomScroll"], zoomScroll: ["type", Qi] };
    function hs(s) {
      xa.call(this, s);
    }
    return n(hs, xa), hs.prototype._navigationModules = [$w, Hw, Vw], hs.prototype._modules = [].concat(xa.prototype._modules, hs.prototype._navigationModules), hs;
  });
})(m1);
var yB = m1.exports;
const gB = /* @__PURE__ */ Jw(yB), vB = ({
  xml: e,
  height: t = 300,
  zoomActions: n = !0,
  onLoading: i = () => {
  },
  onError: r = () => {
  },
  onShown: o = () => {
  },
  ...a
}, c) => {
  const l = Ko(null), [u, d] = oo();
  Wi(() => {
    const _ = l.current;
    return d(new gB({ container: _ })), () => u == null ? void 0 : u.destroy();
  }, []), Wi(() => {
    u == null || u.importXML(e), u == null || u.get("canvas").zoom("fit-viewport"), u == null || u.on("import.done", (_) => {
      const { error: x, warning: w } = _;
      if (x)
        return r(x);
      g(), o(w);
    });
  }, [u, e]);
  const f = () => {
    u.get("zoomScroll").stepZoom(0.1);
  }, y = () => {
    u.get("zoomScroll").stepZoom(-0.1);
  }, g = () => {
    u.get("canvas").zoom("fit-viewport");
  };
  return /* @__PURE__ */ Oe.jsx(Oe.Fragment, { children: /* @__PURE__ */ Oe.jsxs("div", { className: "bpmn-wrapper", children: [
    /* @__PURE__ */ Oe.jsx(
      "div",
      {
        className: "bpmn-js-react-view-container",
        ref: l,
        style: { height: t }
      }
    ),
    /* @__PURE__ */ Oe.jsx("div", { className: "actions-wrapper", children: n && /* @__PURE__ */ Oe.jsx(
      h1,
      {
        zoomIn: f,
        zoomOut: y,
        zoomFit: g
      }
    ) })
  ] }) });
}, _B = ur(vB), bB = ({ mode: e = "view", xml: t, useBpmnJsReact: n, ...i }, r) => {
  const o = {
    /** Put your mantine theme override here */
  };
  return /* @__PURE__ */ Oe.jsx(Oe.Fragment, { children: /* @__PURE__ */ Oe.jsxs(i1, { theme: o, children: [
    e == "edit" && /* @__PURE__ */ Oe.jsx(mB, { ...i, xml: t, ref: r, useBpmnJsReact: n }),
    e == "view" && /* @__PURE__ */ Oe.jsx(_B, { xml: t, ...i, ref: r, useBpmnJsReact: n })
  ] }) });
}, SB = ur(bB);
export {
  SB as BpmnJsReact,
  wB as useBpmnJsReact
};
//# sourceMappingURL=bpmn-js-react.es.js.map
