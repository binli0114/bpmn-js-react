import n_, { useState as Mr, useRef as Yo, useEffect as Wi, useLayoutEffect as Kw, createContext as i_, useContext as hd, useMemo as qw, useCallback as By, useId as Xw, forwardRef as lr, createElement as Ly, useImperativeHandle as Zw } from "react";
import Jw from "react-dom";
const AB = () => {
  Mr("");
  const [e, t] = Mr(null), n = () => e == null ? void 0 : e.get("canvas"), i = (A) => e == null ? void 0 : e.importXML(A), r = async (A = { format: !1 }) => e == null ? void 0 : e.saveXML(A), o = () => e == null ? void 0 : e.get("elementRegistry").getAll(), a = (A) => e == null ? void 0 : e.get("elementRegistry").get(A), c = (A = 0.1) => {
    var D;
    (D = e == null ? void 0 : e.get("zoomScroll")) == null || D.zoom(A);
  }, l = (A = 0.1) => {
    var D;
    (D = e == null ? void 0 : e.get("zoomScroll")) == null || D.zoom(-A);
  }, u = () => {
    var A;
    (A = e == null ? void 0 : e.get("zoomScroll")) == null || A.zoom("fit-viewport");
  }, d = () => {
    const A = e == null ? void 0 : e.get("canvas");
    A == null || A.zoom("fit-viewport");
  }, f = (A, D) => {
    e.get("canvas").addMarker(A, D);
  }, y = (A, D) => {
    e == null || e.get("canvas").removeMarker(A, D);
  }, g = (A, D) => {
    e.get("modeling").setColor(A, D);
  }, _ = () => e == null ? void 0 : e.get("elementRegistry"), x = (A) => {
    var D;
    return (D = _()) == null ? void 0 : D.get(A).businessObject;
  };
  return {
    bpmnModeler: e,
    setBpmnModeler: t,
    importXml: i,
    saveXml: r,
    // saveXmlAsync,
    getCanvas: n,
    getElements: o,
    getElementById: a,
    getBusinessObject: x,
    zoomIn: c,
    zoomOut: l,
    zoomFit: u,
    setStyle: d,
    setColor: g,
    addMarker: f,
    removeMarker: y,
    getAttribute: (A, D) => x(A).$attrs[D],
    setAttribute: (A, D, j) => {
      e.get("modeling").updateProperties(a(A), { [D]: j });
    },
    getIncoming: (A) => x(A).incoming,
    getOutgoing: (A) => x(A).outgoing
  };
};
var Qw = typeof globalThis < "u" ? globalThis : typeof window < "u" ? window : typeof global < "u" ? global : typeof self < "u" ? self : {};
function eS(e) {
  return e && e.__esModule && Object.prototype.hasOwnProperty.call(e, "default") ? e.default : e;
}
var Cf = { exports: {} }, ys = {};
/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
var Iy;
function tS() {
  if (Iy)
    return ys;
  Iy = 1;
  var e = n_, t = Symbol.for("react.element"), n = Symbol.for("react.fragment"), i = Object.prototype.hasOwnProperty, r = e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner, o = { key: !0, ref: !0, __self: !0, __source: !0 };
  function a(c, l, u) {
    var d, f = {}, y = null, g = null;
    u !== void 0 && (y = "" + u), l.key !== void 0 && (y = "" + l.key), l.ref !== void 0 && (g = l.ref);
    for (d in l)
      i.call(l, d) && !o.hasOwnProperty(d) && (f[d] = l[d]);
    if (c && c.defaultProps)
      for (d in l = c.defaultProps, l)
        f[d] === void 0 && (f[d] = l[d]);
    return { $$typeof: t, type: c, key: y, ref: g, props: f, _owner: r.current };
  }
  return ys.Fragment = n, ys.jsx = a, ys.jsxs = a, ys;
}
var gs = {};
/**
 * @license React
 * react-jsx-runtime.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
var $y;
function nS() {
  return $y || ($y = 1, process.env.NODE_ENV !== "production" && function() {
    var e = n_, t = Symbol.for("react.element"), n = Symbol.for("react.portal"), i = Symbol.for("react.fragment"), r = Symbol.for("react.strict_mode"), o = Symbol.for("react.profiler"), a = Symbol.for("react.provider"), c = Symbol.for("react.context"), l = Symbol.for("react.forward_ref"), u = Symbol.for("react.suspense"), d = Symbol.for("react.suspense_list"), f = Symbol.for("react.memo"), y = Symbol.for("react.lazy"), g = Symbol.for("react.offscreen"), _ = Symbol.iterator, x = "@@iterator";
    function w(H) {
      if (H === null || typeof H != "object")
        return null;
      var ue = _ && H[_] || H[x];
      return typeof ue == "function" ? ue : null;
    }
    var B = e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;
    function N(H) {
      {
        for (var ue = arguments.length, Se = new Array(ue > 1 ? ue - 1 : 0), Ue = 1; Ue < ue; Ue++)
          Se[Ue - 1] = arguments[Ue];
        k("error", H, Se);
      }
    }
    function k(H, ue, Se) {
      {
        var Ue = B.ReactDebugCurrentFrame, wt = Ue.getStackAddendum();
        wt !== "" && (ue += "%s", Se = Se.concat([wt]));
        var Ct = Se.map(function(_t) {
          return String(_t);
        });
        Ct.unshift("Warning: " + ue), Function.prototype.apply.call(console[H], console, Ct);
      }
    }
    var A = !1, D = !1, j = !1, W = !1, $ = !1, Z;
    Z = Symbol.for("react.module.reference");
    function X(H) {
      return !!(typeof H == "string" || typeof H == "function" || H === i || H === o || $ || H === r || H === u || H === d || W || H === g || A || D || j || typeof H == "object" && H !== null && (H.$$typeof === y || H.$$typeof === f || H.$$typeof === a || H.$$typeof === c || H.$$typeof === l || // This needs to include all possible module reference object
      // types supported by any Flight configuration anywhere since
      // we don't know which Flight build this will end up being used
      // with.
      H.$$typeof === Z || H.getModuleId !== void 0));
    }
    function V(H, ue, Se) {
      var Ue = H.displayName;
      if (Ue)
        return Ue;
      var wt = ue.displayName || ue.name || "";
      return wt !== "" ? Se + "(" + wt + ")" : Se;
    }
    function ae(H) {
      return H.displayName || "Context";
    }
    function ie(H) {
      if (H == null)
        return null;
      if (typeof H.tag == "number" && N("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."), typeof H == "function")
        return H.displayName || H.name || null;
      if (typeof H == "string")
        return H;
      switch (H) {
        case i:
          return "Fragment";
        case n:
          return "Portal";
        case o:
          return "Profiler";
        case r:
          return "StrictMode";
        case u:
          return "Suspense";
        case d:
          return "SuspenseList";
      }
      if (typeof H == "object")
        switch (H.$$typeof) {
          case c:
            var ue = H;
            return ae(ue) + ".Consumer";
          case a:
            var Se = H;
            return ae(Se._context) + ".Provider";
          case l:
            return V(H, H.render, "ForwardRef");
          case f:
            var Ue = H.displayName || null;
            return Ue !== null ? Ue : ie(H.type) || "Memo";
          case y: {
            var wt = H, Ct = wt._payload, _t = wt._init;
            try {
              return ie(_t(Ct));
            } catch {
              return null;
            }
          }
        }
      return null;
    }
    var Ae = Object.assign, Rt = 0, it, Ve, Zt, sn, Pt, Kt, oe;
    function se() {
    }
    se.__reactDisabledLog = !0;
    function fe() {
      {
        if (Rt === 0) {
          it = console.log, Ve = console.info, Zt = console.warn, sn = console.error, Pt = console.group, Kt = console.groupCollapsed, oe = console.groupEnd;
          var H = {
            configurable: !0,
            enumerable: !0,
            value: se,
            writable: !0
          };
          Object.defineProperties(console, {
            info: H,
            log: H,
            warn: H,
            error: H,
            group: H,
            groupCollapsed: H,
            groupEnd: H
          });
        }
        Rt++;
      }
    }
    function ct() {
      {
        if (Rt--, Rt === 0) {
          var H = {
            configurable: !0,
            enumerable: !0,
            writable: !0
          };
          Object.defineProperties(console, {
            log: Ae({}, H, {
              value: it
            }),
            info: Ae({}, H, {
              value: Ve
            }),
            warn: Ae({}, H, {
              value: Zt
            }),
            error: Ae({}, H, {
              value: sn
            }),
            group: Ae({}, H, {
              value: Pt
            }),
            groupCollapsed: Ae({}, H, {
              value: Kt
            }),
            groupEnd: Ae({}, H, {
              value: oe
            })
          });
        }
        Rt < 0 && N("disabledDepth fell below zero. This is a bug in React. Please file an issue.");
      }
    }
    var Lt = B.ReactCurrentDispatcher, Et;
    function Ne(H, ue, Se) {
      {
        if (Et === void 0)
          try {
            throw Error();
          } catch (wt) {
            var Ue = wt.stack.trim().match(/\n( *(at )?)/);
            Et = Ue && Ue[1] || "";
          }
        return `
` + Et + H;
      }
    }
    var I = !1, E;
    {
      var C = typeof WeakMap == "function" ? WeakMap : Map;
      E = new C();
    }
    function F(H, ue) {
      if (!H || I)
        return "";
      {
        var Se = E.get(H);
        if (Se !== void 0)
          return Se;
      }
      var Ue;
      I = !0;
      var wt = Error.prepareStackTrace;
      Error.prepareStackTrace = void 0;
      var Ct;
      Ct = Lt.current, Lt.current = null, fe();
      try {
        if (ue) {
          var _t = function() {
            throw Error();
          };
          if (Object.defineProperty(_t.prototype, "props", {
            set: function() {
              throw Error();
            }
          }), typeof Reflect == "object" && Reflect.construct) {
            try {
              Reflect.construct(_t, []);
            } catch ($t) {
              Ue = $t;
            }
            Reflect.construct(H, [], _t);
          } else {
            try {
              _t.call();
            } catch ($t) {
              Ue = $t;
            }
            H.call(_t.prototype);
          }
        } else {
          try {
            throw Error();
          } catch ($t) {
            Ue = $t;
          }
          H();
        }
      } catch ($t) {
        if ($t && Ue && typeof $t.stack == "string") {
          for (var qe = $t.stack.split(`
`), xn = Ue.stack.split(`
`), It = qe.length - 1, Gt = xn.length - 1; It >= 1 && Gt >= 0 && qe[It] !== xn[Gt]; )
            Gt--;
          for (; It >= 1 && Gt >= 0; It--, Gt--)
            if (qe[It] !== xn[Gt]) {
              if (It !== 1 || Gt !== 1)
                do
                  if (It--, Gt--, Gt < 0 || qe[It] !== xn[Gt]) {
                    var ni = `
` + qe[It].replace(" at new ", " at ");
                    return H.displayName && ni.includes("<anonymous>") && (ni = ni.replace("<anonymous>", H.displayName)), typeof H == "function" && E.set(H, ni), ni;
                  }
                while (It >= 1 && Gt >= 0);
              break;
            }
        }
      } finally {
        I = !1, Lt.current = Ct, ct(), Error.prepareStackTrace = wt;
      }
      var gr = H ? H.displayName || H.name : "", Dt = gr ? Ne(gr) : "";
      return typeof H == "function" && E.set(H, Dt), Dt;
    }
    function K(H, ue, Se) {
      return F(H, !1);
    }
    function ne(H) {
      var ue = H.prototype;
      return !!(ue && ue.isReactComponent);
    }
    function ke(H, ue, Se) {
      if (H == null)
        return "";
      if (typeof H == "function")
        return F(H, ne(H));
      if (typeof H == "string")
        return Ne(H);
      switch (H) {
        case u:
          return Ne("Suspense");
        case d:
          return Ne("SuspenseList");
      }
      if (typeof H == "object")
        switch (H.$$typeof) {
          case l:
            return K(H.render);
          case f:
            return ke(H.type, ue, Se);
          case y: {
            var Ue = H, wt = Ue._payload, Ct = Ue._init;
            try {
              return ke(Ct(wt), ue, Se);
            } catch {
            }
          }
        }
      return "";
    }
    var Qe = Object.prototype.hasOwnProperty, Ee = {}, at = B.ReactDebugCurrentFrame;
    function Mt(H) {
      if (H) {
        var ue = H._owner, Se = ke(H.type, H._source, ue ? ue.type : null);
        at.setExtraStackFrame(Se);
      } else
        at.setExtraStackFrame(null);
    }
    function ht(H, ue, Se, Ue, wt) {
      {
        var Ct = Function.call.bind(Qe);
        for (var _t in H)
          if (Ct(H, _t)) {
            var qe = void 0;
            try {
              if (typeof H[_t] != "function") {
                var xn = Error((Ue || "React class") + ": " + Se + " type `" + _t + "` is invalid; it must be a function, usually from the `prop-types` package, but received `" + typeof H[_t] + "`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");
                throw xn.name = "Invariant Violation", xn;
              }
              qe = H[_t](ue, _t, Ue, Se, null, "SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED");
            } catch (It) {
              qe = It;
            }
            qe && !(qe instanceof Error) && (Mt(wt), N("%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).", Ue || "React class", Se, _t, typeof qe), Mt(null)), qe instanceof Error && !(qe.message in Ee) && (Ee[qe.message] = !0, Mt(wt), N("Failed %s type: %s", Se, qe.message), Mt(null));
          }
      }
    }
    var $n = Array.isArray;
    function Ii(H) {
      return $n(H);
    }
    function bn(H) {
      {
        var ue = typeof Symbol == "function" && Symbol.toStringTag, Se = ue && H[Symbol.toStringTag] || H.constructor.name || "Object";
        return Se;
      }
    }
    function Be(H) {
      try {
        return ft(H), !1;
      } catch {
        return !0;
      }
    }
    function ft(H) {
      return "" + H;
    }
    function Ao(H) {
      if (Be(H))
        return N("The provided key is an unsupported type %s. This value must be coerced to a string before before using it here.", bn(H)), ft(H);
    }
    var qi = B.ReactCurrentOwner, _p = {
      key: !0,
      ref: !0,
      __self: !0,
      __source: !0
    }, Hr, Xi, Po;
    Po = {};
    function bp(H) {
      if (Qe.call(H, "ref")) {
        var ue = Object.getOwnPropertyDescriptor(H, "ref").get;
        if (ue && ue.isReactWarning)
          return !1;
      }
      return H.ref !== void 0;
    }
    function da(H) {
      if (Qe.call(H, "key")) {
        var ue = Object.getOwnPropertyDescriptor(H, "key").get;
        if (ue && ue.isReactWarning)
          return !1;
      }
      return H.key !== void 0;
    }
    function rs(H, ue) {
      if (typeof H.ref == "string" && qi.current && ue && qi.current.stateNode !== ue) {
        var Se = ie(qi.current.type);
        Po[Se] || (N('Component "%s" contains the string ref "%s". Support for string refs will be removed in a future major release. This case cannot be automatically converted to an arrow function. We ask you to manually fix this case by using useRef() or createRef() instead. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-string-ref', ie(qi.current.type), H.ref), Po[Se] = !0);
      }
    }
    function os(H, ue) {
      {
        var Se = function() {
          Hr || (Hr = !0, N("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)", ue));
        };
        Se.isReactWarning = !0, Object.defineProperty(H, "key", {
          get: Se,
          configurable: !0
        });
      }
    }
    function Mc(H, ue) {
      {
        var Se = function() {
          Xi || (Xi = !0, N("%s: `ref` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)", ue));
        };
        Se.isReactWarning = !0, Object.defineProperty(H, "ref", {
          get: Se,
          configurable: !0
        });
      }
    }
    var as = function(H, ue, Se, Ue, wt, Ct, _t) {
      var qe = {
        // This tag allows us to uniquely identify this as a React Element
        $$typeof: t,
        // Built-in properties that belong on the element
        type: H,
        key: ue,
        ref: Se,
        props: _t,
        // Record the component responsible for creating this element.
        _owner: Ct
      };
      return qe._store = {}, Object.defineProperty(qe._store, "validated", {
        configurable: !1,
        enumerable: !1,
        writable: !0,
        value: !1
      }), Object.defineProperty(qe, "_self", {
        configurable: !1,
        enumerable: !1,
        writable: !1,
        value: Ue
      }), Object.defineProperty(qe, "_source", {
        configurable: !1,
        enumerable: !1,
        writable: !1,
        value: wt
      }), Object.freeze && (Object.freeze(qe.props), Object.freeze(qe)), qe;
    };
    function xp(H, ue, Se, Ue, wt) {
      {
        var Ct, _t = {}, qe = null, xn = null;
        Se !== void 0 && (Ao(Se), qe = "" + Se), da(ue) && (Ao(ue.key), qe = "" + ue.key), bp(ue) && (xn = ue.ref, rs(ue, wt));
        for (Ct in ue)
          Qe.call(ue, Ct) && !_p.hasOwnProperty(Ct) && (_t[Ct] = ue[Ct]);
        if (H && H.defaultProps) {
          var It = H.defaultProps;
          for (Ct in It)
            _t[Ct] === void 0 && (_t[Ct] = It[Ct]);
        }
        if (qe || xn) {
          var Gt = typeof H == "function" ? H.displayName || H.name || "Unknown" : H;
          qe && os(_t, Gt), xn && Mc(_t, Gt);
        }
        return as(H, qe, xn, wt, Ue, qi.current, _t);
      }
    }
    var ti = B.ReactCurrentOwner, et = B.ReactDebugCurrentFrame;
    function _e(H) {
      if (H) {
        var ue = H._owner, Se = ke(H.type, H._source, ue ? ue.type : null);
        et.setExtraStackFrame(Se);
      } else
        et.setExtraStackFrame(null);
    }
    var mr;
    mr = !1;
    function yr(H) {
      return typeof H == "object" && H !== null && H.$$typeof === t;
    }
    function Un() {
      {
        if (ti.current) {
          var H = ie(ti.current.type);
          if (H)
            return `

Check the render method of \`` + H + "`.";
        }
        return "";
      }
    }
    function jn(H) {
      return "";
    }
    var Dc = {};
    function Ep(H) {
      {
        var ue = Un();
        if (!ue) {
          var Se = typeof H == "string" ? H : H.displayName || H.name;
          Se && (ue = `

Check the top-level render call using <` + Se + ">.");
        }
        return ue;
      }
    }
    function Oc(H, ue) {
      {
        if (!H._store || H._store.validated || H.key != null)
          return;
        H._store.validated = !0;
        var Se = Ep(ue);
        if (Dc[Se])
          return;
        Dc[Se] = !0;
        var Ue = "";
        H && H._owner && H._owner !== ti.current && (Ue = " It was passed a child from " + ie(H._owner.type) + "."), _e(H), N('Each child in a list should have a unique "key" prop.%s%s See https://reactjs.org/link/warning-keys for more information.', Se, Ue), _e(null);
      }
    }
    function Nc(H, ue) {
      {
        if (typeof H != "object")
          return;
        if (Ii(H))
          for (var Se = 0; Se < H.length; Se++) {
            var Ue = H[Se];
            yr(Ue) && Oc(Ue, ue);
          }
        else if (yr(H))
          H._store && (H._store.validated = !0);
        else if (H) {
          var wt = w(H);
          if (typeof wt == "function" && wt !== H.entries)
            for (var Ct = wt.call(H), _t; !(_t = Ct.next()).done; )
              yr(_t.value) && Oc(_t.value, ue);
        }
      }
    }
    function Bc(H) {
      {
        var ue = H.type;
        if (ue == null || typeof ue == "string")
          return;
        var Se;
        if (typeof ue == "function")
          Se = ue.propTypes;
        else if (typeof ue == "object" && (ue.$$typeof === l || // Note: Memo only checks outer props here.
        // Inner props are checked in the reconciler.
        ue.$$typeof === f))
          Se = ue.propTypes;
        else
          return;
        if (Se) {
          var Ue = ie(ue);
          ht(Se, H.props, "prop", Ue, H);
        } else if (ue.PropTypes !== void 0 && !mr) {
          mr = !0;
          var wt = ie(ue);
          N("Component %s declared `PropTypes` instead of `propTypes`. Did you misspell the property assignment?", wt || "Unknown");
        }
        typeof ue.getDefaultProps == "function" && !ue.getDefaultProps.isReactClassApproved && N("getDefaultProps is only used on classic React.createClass definitions. Use a static property named `defaultProps` instead.");
      }
    }
    function wp(H) {
      {
        for (var ue = Object.keys(H.props), Se = 0; Se < ue.length; Se++) {
          var Ue = ue[Se];
          if (Ue !== "children" && Ue !== "key") {
            _e(H), N("Invalid prop `%s` supplied to `React.Fragment`. React.Fragment can only have `key` and `children` props.", Ue), _e(null);
            break;
          }
        }
        H.ref !== null && (_e(H), N("Invalid attribute `ref` supplied to `React.Fragment`."), _e(null));
      }
    }
    var Lc = {};
    function Mn(H, ue, Se, Ue, wt, Ct) {
      {
        var _t = X(H);
        if (!_t) {
          var qe = "";
          (H === void 0 || typeof H == "object" && H !== null && Object.keys(H).length === 0) && (qe += " You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.");
          var xn = jn();
          xn ? qe += xn : qe += Un();
          var It;
          H === null ? It = "null" : Ii(H) ? It = "array" : H !== void 0 && H.$$typeof === t ? (It = "<" + (ie(H.type) || "Unknown") + " />", qe = " Did you accidentally export a JSX literal instead of a component?") : It = typeof H, N("React.jsx: type is invalid -- expected a string (for built-in components) or a class/function (for composite components) but got: %s.%s", It, qe);
        }
        var Gt = xp(H, ue, Se, wt, Ct);
        if (Gt == null)
          return Gt;
        if (_t) {
          var ni = ue.children;
          if (ni !== void 0)
            if (Ue)
              if (Ii(ni)) {
                for (var gr = 0; gr < ni.length; gr++)
                  Nc(ni[gr], H);
                Object.freeze && Object.freeze(ni);
              } else
                N("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");
            else
              Nc(ni, H);
        }
        if (Qe.call(ue, "key")) {
          var Dt = ie(H), $t = Object.keys(ue).filter(function(ss) {
            return ss !== "key";
          }), Yn = $t.length > 0 ? "{key: someKey, " + $t.join(": ..., ") + ": ...}" : "{key: someKey}";
          if (!Lc[Dt + Yn]) {
            var ha = $t.length > 0 ? "{" + $t.join(": ..., ") + ": ...}" : "{}";
            N(`A props object containing a "key" prop is being spread into JSX:
  let props = %s;
  <%s {...props} />
React keys must be passed directly to JSX without using spread:
  let props = %s;
  <%s key={someKey} {...props} />`, Yn, Dt, ha, Dt), Lc[Dt + Yn] = !0;
          }
        }
        return H === i ? wp(Gt) : Bc(Gt), Gt;
      }
    }
    function Sp(H, ue, Se) {
      return Mn(H, ue, Se, !0);
    }
    function To(H, ue, Se) {
      return Mn(H, ue, Se, !1);
    }
    var Zi = To, Ic = Sp;
    gs.Fragment = i, gs.jsx = Zi, gs.jsxs = Ic;
  }()), gs;
}
process.env.NODE_ENV === "production" ? Cf.exports = tS() : Cf.exports = nS();
var De = Cf.exports;
function Pe(e, t) {
  t && (e.super_ = t, e.prototype = Object.create(t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }));
}
function iS(e, t) {
  return t = { exports: {} }, e(t, t.exports), t.exports;
}
var rS = iS(function(e) {
  var t = e.exports = function(n, i) {
    if (i || (i = 16), n === void 0 && (n = 128), n <= 0)
      return "0";
    for (var r = Math.log(Math.pow(2, n)) / Math.log(i), o = 2; r === 1 / 0; o *= 2)
      r = Math.log(Math.pow(2, n / o)) / Math.log(i) * o;
    for (var a = r - Math.floor(r), c = "", o = 0; o < Math.floor(r); o++) {
      var l = Math.floor(Math.random() * i).toString(i);
      c = l + c;
    }
    if (a) {
      var u = Math.pow(i, a), l = Math.floor(Math.random() * u).toString(i);
      c = l + c;
    }
    var d = parseInt(c, i);
    return d !== 1 / 0 && d >= Math.pow(2, n) ? t(n, i) : c;
  };
  t.rack = function(n, i, r) {
    var o = function(c) {
      var l = 0;
      do {
        if (l++ > 10)
          if (r)
            n += r;
          else
            throw new Error("too many ID collisions, use more bits");
        var u = t(n, i);
      } while (Object.hasOwnProperty.call(a, u));
      return a[u] = c, u;
    }, a = o.hats = {};
    return o.get = function(c) {
      return o.hats[c];
    }, o.set = function(c, l) {
      return o.hats[c] = l, o;
    }, o.bits = n || 128, o.base = i || 16, o;
  };
});
function sr(e) {
  if (!(this instanceof sr))
    return new sr(e);
  e = e || [128, 36, 1], this._seed = e.length ? rS.rack(e[0], e[1], e[2]) : e;
}
sr.prototype.next = function(e) {
  return this._seed(e || !0);
};
sr.prototype.nextPrefixed = function(e, t) {
  var n;
  do
    n = e + this.next(!0);
  while (this.assigned(n));
  return this.claim(n, t), n;
};
sr.prototype.claim = function(e, t) {
  this._seed.set(e, t || !0);
};
sr.prototype.assigned = function(e) {
  return this._seed.get(e) || !1;
};
sr.prototype.unclaim = function(e) {
  delete this._seed.hats[e];
};
sr.prototype.clear = function() {
  var e = this._seed.hats, t;
  for (t in e)
    this.unclaim(t);
};
function ql(e) {
  return Array.prototype.concat.apply([], e);
}
const Qs = Object.prototype.toString, oS = Object.prototype.hasOwnProperty;
function Ko(e) {
  return e === void 0;
}
function yn(e) {
  return e !== void 0;
}
function Xl(e) {
  return e == null;
}
function Ke(e) {
  return Qs.call(e) === "[object Array]";
}
function vn(e) {
  return Qs.call(e) === "[object Object]";
}
function je(e) {
  return Qs.call(e) === "[object Number]";
}
function fn(e) {
  const t = Qs.call(e);
  return t === "[object Function]" || t === "[object AsyncFunction]" || t === "[object GeneratorFunction]" || t === "[object AsyncGeneratorFunction]" || t === "[object Proxy]";
}
function ci(e) {
  return Qs.call(e) === "[object String]";
}
function aS(e) {
  if (!Ke(e))
    throw new Error("must supply array");
}
function Jn(e, t) {
  return oS.call(e, t);
}
function gt(e, t) {
  const n = mu(t);
  let i;
  return z(e, function(r, o) {
    if (n(r, o))
      return i = r, !1;
  }), i;
}
function r_(e, t) {
  const n = mu(t);
  let i = Ke(e) ? -1 : void 0;
  return z(e, function(r, o) {
    if (n(r, o))
      return i = o, !1;
  }), i;
}
function tt(e, t) {
  const n = mu(t);
  let i = [];
  return z(e, function(r, o) {
    n(r, o) && i.push(r);
  }), i;
}
function z(e, t) {
  let n, i;
  if (Ko(e))
    return;
  const r = Ke(e) ? pS : uS;
  for (let o in e)
    if (Jn(e, o) && (n = e[o], i = t(n, r(o)), i === !1))
      return n;
}
function sS(e, t) {
  if (Ko(e))
    return [];
  aS(e);
  const n = mu(t);
  return e.filter(function(i, r) {
    return !n(i, r);
  });
}
function li(e, t, n) {
  return z(e, function(i, r) {
    n = t(n, i, r);
  }), n;
}
function Qo(e, t) {
  return !!li(e, function(n, i, r) {
    return n && t(i, r);
  }, !0);
}
function so(e, t) {
  return !!gt(e, t);
}
function gn(e, t) {
  let n = [];
  return z(e, function(i, r) {
    n.push(t(i, r));
  }), n;
}
function Zl(e) {
  return e && Object.keys(e) || [];
}
function cS(e) {
  return Zl(e).length;
}
function md(e) {
  return gn(e, (t) => t);
}
function Ga(e, t, n = {}) {
  return t = yd(t), z(e, function(i) {
    let r = t(i) || "_", o = n[r];
    o || (o = n[r] = []), o.push(i);
  }), n;
}
function o_(e, ...t) {
  e = yd(e);
  let n = {};
  return z(t, (r) => Ga(r, e, n)), gn(n, function(r, o) {
    return r[0];
  });
}
const lS = o_;
function Gi(e, t) {
  t = yd(t);
  let n = [];
  return z(e, function(i, r) {
    let o = t(i, r), a = {
      d: o,
      v: i
    };
    for (var c = 0; c < n.length; c++) {
      let { d: l } = n[c];
      if (o < l) {
        n.splice(c, 0, a);
        return;
      }
    }
    n.push(a);
  }), gn(n, (i) => i.v);
}
function zi(e) {
  return function(t) {
    return Qo(e, function(n, i) {
      return t[i] === n;
    });
  };
}
function yd(e) {
  return fn(e) ? e : (t) => t[e];
}
function mu(e) {
  return fn(e) ? e : (t) => t === e;
}
function uS(e) {
  return e;
}
function pS(e) {
  return Number(e);
}
function a_(e, t) {
  let n, i, r, o;
  function a(f) {
    let y = Date.now(), g = f ? 0 : o + t - y;
    if (g > 0)
      return c(g);
    e.apply(r, i), l();
  }
  function c(f) {
    n = setTimeout(a, f);
  }
  function l() {
    n && clearTimeout(n), n = o = i = r = void 0;
  }
  function u() {
    n && a(!0), l();
  }
  function d(...f) {
    o = Date.now(), i = f, r = this, n || c(t);
  }
  return d.flush = u, d.cancel = l, d;
}
function Qn(e, t) {
  return e.bind(t);
}
function U(e, ...t) {
  return Object.assign(e, ...t);
}
function fS(e, t, n) {
  let i = e;
  return z(t, function(r, o) {
    if (typeof r != "number" && typeof r != "string")
      throw new Error("illegal key type: " + typeof r + ". Key should be of type number or string.");
    if (r === "constructor")
      throw new Error("illegal key: constructor");
    if (r === "__proto__")
      throw new Error("illegal key: __proto__");
    let a = t[o + 1], c = i[r];
    yn(a) && Xl(c) && (c = i[r] = isNaN(+a) ? {} : []), Ko(a) ? Ko(n) ? delete i[r] : i[r] = n : i = c;
  }), e;
}
function Ui(e, t) {
  let n = {}, i = Object(e);
  return z(t, function(r) {
    r in i && (n[r] = e[r]);
  }), n;
}
function ur(e, t) {
  let n = {}, i = Object(e);
  return z(i, function(r, o) {
    t.indexOf(o) === -1 && (n[o] = r);
  }), n;
}
function dS(e, t) {
  return t.forEach(function(n) {
    n && typeof n != "string" && !Array.isArray(n) && Object.keys(n).forEach(function(i) {
      if (i !== "default" && !(i in e)) {
        var r = Object.getOwnPropertyDescriptor(n, i);
        Object.defineProperty(e, i, r.get ? r : {
          enumerable: !0,
          get: function() {
            return n[i];
          }
        });
      }
    });
  }), Object.freeze(e);
}
const hS = Object.prototype.toString, mS = Object.prototype.hasOwnProperty;
function yS(e) {
  return e === void 0;
}
function gS(e) {
  return hS.call(e) === "[object Array]";
}
function vS(e, t) {
  return mS.call(e, t);
}
function jy(e, t) {
  let n, i;
  if (yS(e))
    return;
  const r = gS(e) ? bS : _S;
  for (let o in e)
    if (vS(e, o) && (n = e[o], i = t(n, r(o)), i === !1))
      return n;
}
function _S(e) {
  return e;
}
function bS(e) {
  return Number(e);
}
function Cn(e, ...t) {
  const n = e.style;
  return jy(t, function(i) {
    i && jy(i, function(r, o) {
      n[o] = r;
    });
  }), e;
}
function Vn(e, t, n) {
  return arguments.length == 2 ? e.getAttribute(t) : n === null ? e.removeAttribute(t) : (e.setAttribute(t, n), e);
}
const xS = Object.prototype.toString;
function rn(e) {
  return new ro(e);
}
function ro(e) {
  if (!e || !e.nodeType)
    throw new Error("A DOM element reference is required");
  this.el = e, this.list = e.classList;
}
ro.prototype.add = function(e) {
  return this.list.add(e), this;
};
ro.prototype.remove = function(e) {
  return xS.call(e) == "[object RegExp]" ? this.removeMatching(e) : (this.list.remove(e), this);
};
ro.prototype.removeMatching = function(e) {
  const t = this.array();
  for (let n = 0; n < t.length; n++)
    e.test(t[n]) && this.remove(t[n]);
  return this;
};
ro.prototype.toggle = function(e, t) {
  return typeof t < "u" ? t !== this.list.toggle(e, t) && this.list.toggle(e) : this.list.toggle(e), this;
};
ro.prototype.array = function() {
  return Array.from(this.list);
};
ro.prototype.has = ro.prototype.contains = function(e) {
  return this.list.contains(e);
};
function yu(e) {
  for (var t; e.childNodes.length; )
    t = e.childNodes[0], e.removeChild(t);
  return e;
}
function La(e, t) {
  return e && typeof e.matches == "function" && e.matches(t);
}
function co(e, t, n) {
  for (var i = n ? e : e.parentNode; i && i.nodeType !== document.DOCUMENT_NODE && i.nodeType !== document.DOCUMENT_FRAGMENT_NODE; ) {
    if (La(i, t))
      return i;
    i = i.parentNode;
  }
  return La(i, t) ? i : null;
}
var Jl = {}, Ql, Af, gd;
function s_() {
  Ql = window.addEventListener ? "addEventListener" : "attachEvent", Af = window.removeEventListener ? "removeEventListener" : "detachEvent", gd = Ql !== "addEventListener" ? "on" : "";
}
var ES = Jl.bind = function(e, t, n, i) {
  return Ql || s_(), e[Ql](gd + t, n, i || !1), n;
}, wS = Jl.unbind = function(e, t, n, i) {
  return Af || s_(), e[Af](gd + t, n, i || !1), n;
}, Ye = /* @__PURE__ */ dS({
  __proto__: null,
  bind: ES,
  unbind: wS,
  default: Jl
}, [Jl]), c_ = ["focus", "blur"];
function SS(e, t, n, i, r) {
  return c_.indexOf(n) !== -1 && (r = !0), Ye.bind(e, n, function(o) {
    var a = o.target || o.srcElement;
    o.delegateTarget = co(a, t, !0), o.delegateTarget && i.call(e, o);
  }, r);
}
function RS(e, t, n, i) {
  return c_.indexOf(t) !== -1 && (i = !0), Ye.unbind(e, t, n, i);
}
var si = {
  bind: SS,
  unbind: RS
}, CS = AS, l_ = !1, il;
typeof document < "u" && (il = document.createElement("div"), il.innerHTML = '  <link/><table></table><a href="/a">a</a><input type="checkbox"/>', l_ = !il.getElementsByTagName("link").length, il = void 0);
var ln = {
  legend: [1, "<fieldset>", "</fieldset>"],
  tr: [2, "<table><tbody>", "</tbody></table>"],
  col: [2, "<table><tbody></tbody><colgroup>", "</colgroup></table>"],
  // for script/link/style tags to work in IE6-8, you have to wrap
  // in a div with a non-whitespace character in front, ha!
  _default: l_ ? [1, "X<div>", "</div>"] : [0, "", ""]
};
ln.td = ln.th = [3, "<table><tbody><tr>", "</tr></tbody></table>"];
ln.option = ln.optgroup = [1, '<select multiple="multiple">', "</select>"];
ln.thead = ln.tbody = ln.colgroup = ln.caption = ln.tfoot = [1, "<table>", "</table>"];
ln.polyline = ln.ellipse = ln.polygon = ln.circle = ln.text = ln.line = ln.path = ln.rect = ln.g = [1, '<svg xmlns="http://www.w3.org/2000/svg" version="1.1">', "</svg>"];
function AS(e, t) {
  if (typeof e != "string")
    throw new TypeError("String expected");
  t || (t = document);
  var n = /<([\w:]+)/.exec(e);
  if (!n)
    return t.createTextNode(e);
  e = e.replace(/^\s+|\s+$/g, "");
  var i = n[1];
  if (i == "body") {
    var l = t.createElement("html");
    return l.innerHTML = e, l.removeChild(l.lastChild);
  }
  var r = Object.prototype.hasOwnProperty.call(ln, i) ? ln[i] : ln._default, o = r[0], a = r[1], c = r[2], l = t.createElement("div");
  for (l.innerHTML = a + e + c; o--; )
    l = l.lastChild;
  if (l.firstChild == l.lastChild)
    return l.removeChild(l.firstChild);
  for (var u = t.createDocumentFragment(); l.firstChild; )
    u.appendChild(l.removeChild(l.firstChild));
  return u;
}
var Ot = CS;
function Tt(e, t) {
  return t = t || document, t.querySelector(e);
}
function Pf(e, t) {
  return t = t || document, t.querySelectorAll(e);
}
function cr(e) {
  e.parentNode && e.parentNode.removeChild(e);
}
function PS(e, t) {
  if (e.ownerDocument !== t.ownerDocument)
    try {
      return t.ownerDocument.importNode(e, !0);
    } catch {
    }
  return e;
}
function TS(e, t) {
  return t.appendChild(PS(e, t));
}
function ze(e, t) {
  return TS(t, e), e;
}
var Tf = 2, u_ = {
  "alignment-baseline": 1,
  "baseline-shift": 1,
  clip: 1,
  "clip-path": 1,
  "clip-rule": 1,
  color: 1,
  "color-interpolation": 1,
  "color-interpolation-filters": 1,
  "color-profile": 1,
  "color-rendering": 1,
  cursor: 1,
  direction: 1,
  display: 1,
  "dominant-baseline": 1,
  "enable-background": 1,
  fill: 1,
  "fill-opacity": 1,
  "fill-rule": 1,
  filter: 1,
  "flood-color": 1,
  "flood-opacity": 1,
  font: 1,
  "font-family": 1,
  "font-size": Tf,
  "font-size-adjust": 1,
  "font-stretch": 1,
  "font-style": 1,
  "font-variant": 1,
  "font-weight": 1,
  "glyph-orientation-horizontal": 1,
  "glyph-orientation-vertical": 1,
  "image-rendering": 1,
  kerning: 1,
  "letter-spacing": 1,
  "lighting-color": 1,
  marker: 1,
  "marker-end": 1,
  "marker-mid": 1,
  "marker-start": 1,
  mask: 1,
  opacity: 1,
  overflow: 1,
  "pointer-events": 1,
  "shape-rendering": 1,
  "stop-color": 1,
  "stop-opacity": 1,
  stroke: 1,
  "stroke-dasharray": 1,
  "stroke-dashoffset": 1,
  "stroke-linecap": 1,
  "stroke-linejoin": 1,
  "stroke-miterlimit": 1,
  "stroke-opacity": 1,
  "stroke-width": Tf,
  "text-anchor": 1,
  "text-decoration": 1,
  "text-rendering": 1,
  "unicode-bidi": 1,
  visibility: 1,
  "word-spacing": 1,
  "writing-mode": 1
};
function kS(e, t) {
  return u_[t] ? e.style[t] : e.getAttributeNS(null, t);
}
function p_(e, t, n) {
  var i = t.replace(/([a-z])([A-Z])/g, "$1-$2").toLowerCase(), r = u_[i];
  r ? (r === Tf && typeof n == "number" && (n = String(n) + "px"), e.style[i] = n) : e.setAttributeNS(null, t, n);
}
function MS(e, t) {
  var n = Object.keys(t), i, r;
  for (i = 0, r; r = n[i]; i++)
    p_(e, r, t[r]);
}
function we(e, t, n) {
  if (typeof t == "string")
    if (n !== void 0)
      p_(e, t, n);
    else
      return kS(e, t);
  else
    MS(e, t);
  return e;
}
const DS = Object.prototype.toString;
function dt(e) {
  return new oo(e);
}
function oo(e) {
  if (!e || !e.nodeType)
    throw new Error("A DOM element reference is required");
  this.el = e, this.list = e.classList;
}
oo.prototype.add = function(e) {
  return this.list.add(e), this;
};
oo.prototype.remove = function(e) {
  return DS.call(e) == "[object RegExp]" ? this.removeMatching(e) : (this.list.remove(e), this);
};
oo.prototype.removeMatching = function(e) {
  const t = this.array();
  for (let n = 0; n < t.length; n++)
    e.test(t[n]) && this.remove(t[n]);
  return this;
};
oo.prototype.toggle = function(e, t) {
  return typeof t < "u" ? t !== this.list.toggle(e, t) && this.list.toggle(e) : this.list.toggle(e), this;
};
oo.prototype.array = function() {
  return Array.from(this.list);
};
oo.prototype.has = oo.prototype.contains = function(e) {
  return this.list.contains(e);
};
function qt(e) {
  var t = e.parentNode;
  return t && t.removeChild(e), e;
}
function gu(e) {
  for (var t; t = e.firstChild; )
    qt(t);
  return e;
}
function f_(e) {
  return e.cloneNode(!0);
}
var vd = {
  svg: "http://www.w3.org/2000/svg"
}, Fy = '<svg xmlns="' + vd.svg + '"';
function OS(e) {
  var t = !1;
  e.substring(0, 4) === "<svg" ? e.indexOf(vd.svg) === -1 && (e = Fy + e.substring(4)) : (e = Fy + ">" + e + "</svg>", t = !0);
  var n = NS(e);
  if (!t)
    return n;
  for (var i = document.createDocumentFragment(), r = n.firstChild; r.firstChild; )
    i.appendChild(r.firstChild);
  return i;
}
function NS(e) {
  var t;
  return t = new DOMParser(), t.async = !1, t.parseFromString(e, "text/xml");
}
function Me(e, t) {
  var n;
  return e.charAt(0) === "<" ? (n = OS(e).firstChild, n = document.importNode(n, !0)) : n = document.createElementNS(vd.svg, e), t && we(n, t), n;
}
var Kp = null;
function d_() {
  return Kp === null && (Kp = Me("svg")), Kp;
}
function Hy(e, t) {
  var n, i, r = Object.keys(t);
  for (n = 0; i = r[n]; n++)
    e[i] = t[i];
  return e;
}
function BS(e, t, n, i, r, o) {
  var a = d_().createSVGMatrix();
  switch (arguments.length) {
    case 0:
      return a;
    case 1:
      return Hy(a, e);
    case 6:
      return Hy(a, {
        a: e,
        b: t,
        c: n,
        d: i,
        e: r,
        f: o
      });
  }
}
function Os(e) {
  return d_().createSVGTransform();
}
var zy = /([&<>]{1})/g, LS = /([\n\r"]{1})/g, IS = {
  "&": "&amp;",
  "<": "&lt;",
  ">": "&gt;",
  '"': "'"
};
function qp(e, t) {
  function n(i, r) {
    return IS[r] || r;
  }
  return e.replace(t, n);
}
function h_(e, t) {
  var n, i, r, o, a;
  switch (e.nodeType) {
    case 3:
      t.push(qp(e.textContent, zy));
      break;
    case 1:
      if (t.push("<", e.tagName), e.hasAttributes())
        for (r = e.attributes, n = 0, i = r.length; n < i; ++n)
          o = r.item(n), t.push(" ", o.name, '="', qp(o.value, LS), '"');
      if (e.hasChildNodes()) {
        for (t.push(">"), a = e.childNodes, n = 0, i = a.length; n < i; ++n)
          h_(a.item(n), t);
        t.push("</", e.tagName, ">");
      } else
        t.push("/>");
      break;
    case 8:
      t.push("<!--", qp(e.nodeValue, zy), "-->");
      break;
    case 4:
      t.push("<![CDATA[", e.nodeValue, "]]>");
      break;
    default:
      throw new Error("unable to handle node " + e.nodeType);
  }
  return t;
}
function $S(e) {
  for (var t = e.firstChild, n = []; t; )
    h_(t, n), t = t.nextSibling;
  return n.join("");
}
function Vy(e, t) {
  return $S(e);
}
function jS(e, t) {
  return t instanceof SVGMatrix ? e.createSVGTransformFromMatrix(t) : t;
}
function FS(e, t) {
  var n, i;
  for (e.clear(), n = 0; i = t[n]; n++)
    e.appendItem(jS(e, i));
}
function js(e, t) {
  var n = e.transform.baseVal;
  return t && (Array.isArray(t) || (t = [t]), FS(n, t)), n.consolidate();
}
const HS = /^class[ {]/;
function zS(e) {
  return HS.test(e.toString());
}
function _d(e) {
  return Array.isArray(e);
}
function Xp(e, t) {
  return Object.prototype.hasOwnProperty.call(e, t);
}
function Ol(...e) {
  e.length === 1 && _d(e[0]) && (e = e[0]), e = [...e];
  const t = e.pop();
  return t.$inject = e, t;
}
const VS = /constructor\s*[^(]*\(\s*([^)]*)\)/m, WS = /^(?:async\s+)?(?:function\s*[^(]*)?(?:\(\s*([^)]*)\)|(\w+))/m, GS = /\/\*([^*]*)\*\//m;
function US(e) {
  if (typeof e != "function")
    throw new Error(`Cannot annotate "${e}". Expected a function!`);
  const t = e.toString().match(zS(e) ? VS : WS);
  if (!t)
    return [];
  const n = t[1] || t[2];
  return n && n.split(",").map((i) => {
    const r = i.match(GS);
    return (r && r[1] || i).trim();
  }) || [];
}
function m_(e, t) {
  const n = t || /** @type InjectorContext */
  {
    get: function(k, A) {
      if (i.push(k), A === !1)
        return null;
      throw c(`No provider for "${k}"!`);
    }
  }, i = [], r = this._providers = Object.create(n._providers || null), o = this._instances = /* @__PURE__ */ Object.create(null), a = o.injector = this, c = function(k) {
    const A = i.join(" -> ");
    return i.length = 0, new Error(A ? `${k} (Resolving: ${A})` : k);
  };
  function l(k, A) {
    if (!r[k] && k.includes(".")) {
      const D = k.split(".");
      let j = l(
        /** @type { string } */
        D.shift()
      );
      for (; D.length; )
        j = j[
          /** @type { string } */
          D.shift()
        ];
      return j;
    }
    if (Xp(o, k))
      return o[k];
    if (Xp(r, k)) {
      if (i.indexOf(k) !== -1)
        throw i.push(k), c("Cannot resolve circular dependency!");
      return i.push(k), o[k] = r[k][0](r[k][1]), i.pop(), o[k];
    }
    return n.get(k, A);
  }
  function u(k, A) {
    if (typeof A > "u" && (A = {}), typeof k != "function")
      if (_d(k))
        k = Ol(k.slice());
      else
        throw c(`Cannot invoke "${k}". Expected a function!`);
    const j = (k.$inject || US(k)).map((W) => Xp(A, W) ? A[W] : l(W));
    return {
      fn: k,
      dependencies: j
    };
  }
  function d(k) {
    const {
      fn: A,
      dependencies: D
    } = u(k), j = Function.prototype.bind.call(A, null, ...D);
    return new j();
  }
  function f(k, A, D) {
    const {
      fn: j,
      dependencies: W
    } = u(k, D);
    return j.apply(A, W);
  }
  function y(k) {
    return Ol((A) => k.get(A));
  }
  function g(k, A) {
    if (A && A.length) {
      const D = /* @__PURE__ */ Object.create(null), j = /* @__PURE__ */ Object.create(null), W = [], $ = [], Z = [];
      let X, V, ae, ie;
      for (let Ae in r)
        X = r[Ae], A.indexOf(Ae) !== -1 && (X[2] === "private" ? (V = W.indexOf(X[3]), V === -1 ? (ae = X[3].createChild([], A), ie = y(ae), W.push(X[3]), $.push(ae), Z.push(ie), D[Ae] = [ie, Ae, "private", ae]) : D[Ae] = [Z[V], Ae, "private", $[V]]) : D[Ae] = [X[2], X[1]], j[Ae] = !0), (X[2] === "factory" || X[2] === "type") && X[1].$scope && A.forEach((Rt) => {
          X[1].$scope.indexOf(Rt) !== -1 && (D[Ae] = [X[2], X[1]], j[Rt] = !0);
        });
      A.forEach((Ae) => {
        if (!j[Ae])
          throw new Error('No provider for "' + Ae + '". Cannot use provider from the parent!');
      }), k.unshift(D);
    }
    return new m_(k, a);
  }
  const _ = {
    factory: f,
    type: d,
    value: function(k) {
      return k;
    }
  };
  function x(k, A) {
    const D = k.__init__ || [];
    return function() {
      D.forEach((j) => {
        typeof j == "string" ? A.get(j) : A.invoke(j);
      });
    };
  }
  function w(k) {
    const A = k.__exports__;
    if (A) {
      const D = k.__modules__, j = Object.keys(k).reduce((V, ae) => (ae !== "__exports__" && ae !== "__modules__" && ae !== "__init__" && ae !== "__depends__" && (V[ae] = k[ae]), V), /* @__PURE__ */ Object.create(null)), W = (D || []).concat(j), $ = g(W), Z = Ol(function(V) {
        return $.get(V);
      });
      A.forEach(function(V) {
        r[V] = [Z, V, "private", $];
      });
      const X = (k.__init__ || []).slice();
      return X.unshift(function() {
        $.init();
      }), k = Object.assign({}, k, {
        __init__: X
      }), x(k, $);
    }
    return Object.keys(k).forEach(function(D) {
      if (D === "__init__" || D === "__depends__")
        return;
      const j = (
        /** @type { TypedDeclaration } */
        k[D]
      );
      if (j[2] === "private") {
        r[D] = j;
        return;
      }
      const W = j[0], $ = j[1];
      r[D] = [_[W], YS(W, $), W];
    }), x(k, a);
  }
  function B(k, A) {
    return k.indexOf(A) !== -1 || (k = (A.__depends__ || []).reduce(B, k), k.indexOf(A) !== -1) ? k : k.concat(A);
  }
  function N(k) {
    const A = k.reduce(B, []).map(w);
    let D = !1;
    return function() {
      D || (D = !0, A.forEach((j) => j()));
    };
  }
  this.get = l, this.invoke = f, this.instantiate = d, this.createChild = g, this.init = N(e);
}
function YS(e, t) {
  return e !== "value" && _d(t) && (t = Ol(t.slice())), t;
}
var KS = 1e3;
function Dr(e, t) {
  var n = this;
  t = t || KS, e.on(["render.shape", "render.connection"], t, function(i, r) {
    var o = i.type, a = r.element, c = r.gfx, l = r.attrs;
    if (n.canRender(a))
      return o === "render.shape" ? n.drawShape(c, a, l) : n.drawConnection(c, a, l);
  }), e.on(["render.getShapePath", "render.getConnectionPath"], t, function(i, r) {
    if (n.canRender(r))
      return i.type === "render.getShapePath" ? n.getShapePath(r) : n.getConnectionPath(r);
  });
}
Dr.prototype.canRender = function(e) {
};
Dr.prototype.drawShape = function(e, t) {
};
Dr.prototype.drawConnection = function(e, t) {
};
Dr.prototype.getShapePath = function(e) {
};
Dr.prototype.getConnectionPath = function(e) {
};
function ea(e) {
  return e.flat().join(",").replace(/,?([A-z]),?/g, "$1");
}
function qS(e) {
  return ["M", e.x, e.y];
}
function Zp(e) {
  return ["L", e.x, e.y];
}
function XS(e, t, n) {
  return ["C", e.x, e.y, t.x, t.y, n.x, n.y];
}
function ZS(e, t) {
  const n = e.length, i = [qS(e[0])];
  for (let r = 1; r < n; r++) {
    const o = e[r - 1], a = e[r], c = e[r + 1];
    if (!c || !t) {
      i.push(Zp(a));
      continue;
    }
    const l = Math.min(
      t,
      kf(a.x - o.x, a.y - o.y),
      kf(c.x - a.x, c.y - a.y)
    );
    if (!l) {
      i.push(Zp(a));
      continue;
    }
    const u = rl(a, o, l), d = rl(a, o, l * 0.5), f = rl(a, c, l), y = rl(a, c, l * 0.5);
    i.push(Zp(u)), i.push(XS(d, y, f));
  }
  return i;
}
function rl(e, t, n) {
  const i = t.x - e.x, r = t.y - e.y, o = kf(i, r), a = n / o;
  return {
    x: e.x + i * a,
    y: e.y + r * a
  };
}
function kf(e, t) {
  return Math.sqrt(Math.pow(e, 2) + Math.pow(t, 2));
}
function vu(e, t, n) {
  je(t) && (n = t, t = null), t || (t = {});
  const i = Me("path", t);
  return je(n) && (i.dataset.cornerRadius = String(n)), y_(i, e);
}
function y_(e, t) {
  const n = parseInt(e.dataset.cornerRadius, 10) || 0;
  return we(e, {
    d: ea(ZS(t, n))
  }), e;
}
function _u(e) {
  return tt(e, function(t) {
    return !gt(e, function(n) {
      return n !== t && g_(t, n);
    });
  });
}
function g_(e, t) {
  if (t) {
    if (e === t)
      return t;
    if (e.parent)
      return g_(e.parent, t);
  }
}
function Wy(e, t, n) {
  var i = !n || e.indexOf(t) === -1;
  return i && e.push(t), i;
}
function ta(e, t, n) {
  n = n || 0, Ke(e) || (e = [e]), z(e, function(i, r) {
    var o = t(i, r, n);
    Ke(o) && o.length && ta(o, t, n + 1);
  });
}
function JS(e, t, n) {
  var i = [], r = [];
  return ta(e, function(o, a, c) {
    Wy(i, o, t);
    var l = o.children;
    if (l && Wy(r, l, t))
      return l;
  }), i;
}
function ec(e, t) {
  return JS(e, !t);
}
function QS(e, t, n) {
  Ko(t) && (t = !0), vn(t) && (n = t, t = !0), n = n || {};
  var i = vs(n.allShapes), r = vs(n.allConnections), o = vs(n.enclosedElements), a = vs(n.enclosedConnections), c = vs(
    n.topLevel,
    t && Ga(e, function(d) {
      return d.id;
    })
  );
  function l(d) {
    c[d.source.id] && c[d.target.id] && (c[d.id] = [d]), i[d.source.id] && i[d.target.id] && (a[d.id] = o[d.id] = d), r[d.id] = d;
  }
  function u(d) {
    if (o[d.id] = d, d.waypoints)
      a[d.id] = r[d.id] = d;
    else
      return i[d.id] = d, z(d.incoming, l), z(d.outgoing, l), d.children;
  }
  return ta(e, u), {
    allShapes: i,
    allConnections: r,
    topLevel: c,
    enclosedConnections: a,
    enclosedElements: o
  };
}
function pn(e, t) {
  t = !!t, Ke(e) || (e = [e]);
  var n, i, r, o;
  return z(e, function(a) {
    var c = a;
    a.waypoints && !t && (c = pn(a.waypoints, !0));
    var l = c.x, u = c.y, d = c.height || 0, f = c.width || 0;
    (l < n || n === void 0) && (n = l), (u < i || i === void 0) && (i = u), (l + f > r || r === void 0) && (r = l + f), (u + d > o || o === void 0) && (o = u + d);
  }), {
    x: n,
    y: i,
    height: o - i,
    width: r - n
  };
}
function eR(e, t) {
  var n = {};
  return z(e, function(i) {
    var r = i;
    r.waypoints && (r = pn(r)), !je(t.y) && r.x > t.x && (n[i.id] = i), !je(t.x) && r.y > t.y && (n[i.id] = i), r.x > t.x && r.y > t.y && (je(t.width) && je(t.height) && r.width + r.x < t.width + t.x && r.height + r.y < t.height + t.y || !je(t.width) || !je(t.height)) && (n[i.id] = i);
  }), n;
}
function v_(e) {
  return "waypoints" in e ? "connection" : "x" in e ? "shape" : "root";
}
function __(e) {
  return !!(e && e.isFrame);
}
function vs(e, t) {
  return U({}, e || {}, t || {});
}
var tR = 1;
function lo(e, t) {
  Dr.call(this, e, tR), this.CONNECTION_STYLE = t.style(["no-fill"], { strokeWidth: 5, stroke: "fuchsia" }), this.SHAPE_STYLE = t.style({ fill: "white", stroke: "fuchsia", strokeWidth: 2 }), this.FRAME_STYLE = t.style(["no-fill"], { stroke: "fuchsia", strokeDasharray: 4, strokeWidth: 2 });
}
Pe(lo, Dr);
lo.prototype.canRender = function() {
  return !0;
};
lo.prototype.drawShape = function(t, n, i) {
  var r = Me("rect");
  return we(r, {
    x: 0,
    y: 0,
    width: n.width || 0,
    height: n.height || 0
  }), __(n) ? we(r, U({}, this.FRAME_STYLE, i || {})) : we(r, U({}, this.SHAPE_STYLE, i || {})), ze(t, r), r;
};
lo.prototype.drawConnection = function(t, n, i) {
  var r = vu(n.waypoints, U({}, this.CONNECTION_STYLE, i || {}));
  return ze(t, r), r;
};
lo.prototype.getShapePath = function(t) {
  var n = t.x, i = t.y, r = t.width, o = t.height, a = [
    ["M", n, i],
    ["l", r, 0],
    ["l", 0, o],
    ["l", -r, 0],
    ["z"]
  ];
  return ea(a);
};
lo.prototype.getConnectionPath = function(t) {
  var n = t.waypoints, i, r, o = [];
  for (i = 0; r = n[i]; i++)
    r = r.original || r, o.push([i === 0 ? "M" : "L", r.x, r.y]);
  return ea(o);
};
lo.$inject = ["eventBus", "styles"];
function nR() {
  var e = {
    "no-fill": {
      fill: "none"
    },
    "no-border": {
      strokeOpacity: 0
    },
    "no-events": {
      pointerEvents: "none"
    }
  }, t = this;
  this.cls = function(n, i, r) {
    var o = this.style(i, r);
    return U(o, { class: n });
  }, this.style = function(n, i) {
    !Ke(n) && !i && (i = n, n = []);
    var r = li(n, function(o, a) {
      return U(o, e[a] || {});
    }, {});
    return i ? U(r, i) : r;
  }, this.computeStyle = function(n, i, r) {
    return Ke(i) || (r = i, i = []), t.style(i || [], U({}, r, n || {}));
  };
}
const iR = {
  __init__: ["defaultRenderer"],
  defaultRenderer: ["type", lo],
  styles: ["type", nR]
};
function nn(e, t) {
  if (!e || !t)
    return -1;
  var n = e.indexOf(t);
  return n !== -1 && e.splice(n, 1), n;
}
function dn(e, t, n) {
  if (!(!e || !t)) {
    typeof n != "number" && (n = -1);
    var i = e.indexOf(t);
    if (i !== -1) {
      if (i === n)
        return;
      if (n !== -1)
        e.splice(i, 1);
      else
        return;
    }
    n !== -1 ? e.splice(n, 0, t) : e.push(t);
  }
}
function bd(e, t) {
  return !e || !t ? -1 : e.indexOf(t);
}
function tc(e, t) {
  return !e || !t ? -1 : Math.sqrt(
    Math.pow(e.x - t.x, 2) + Math.pow(e.y - t.y, 2)
  );
}
function xd(e, t, n, i) {
  if (typeof i > "u" && (i = 5), !e || !t || !n)
    return !1;
  var r = (t.x - e.x) * (n.y - e.y) - (t.y - e.y) * (n.x - e.x), o = tc(e, t);
  return Math.abs(r / o) <= i;
}
var rR = 2;
function Ar(e, t) {
  var n = Array.from(arguments).flat();
  const i = {
    x: "v",
    y: "h"
  };
  for (const [r, o] of Object.entries(i))
    if (oR(r, n))
      return o;
  return !1;
}
function oR(e, t) {
  const n = t[0];
  return Qo(t, function(i) {
    return Math.abs(n[e] - i[e]) <= rR;
  });
}
function Gy(e, t, n) {
  return n = n || 0, e.x > t.x - n && e.y > t.y - n && e.x < t.x + t.width + n && e.y < t.y + t.height + n;
}
function Mf(e, t) {
  return {
    x: Math.round(e.x + (t.x - e.x) / 2),
    y: Math.round(e.y + (t.y - e.y) / 2)
  };
}
var aR = /,?([a-z]),?/gi, Uy = parseFloat, Qt = Math, Kr = Qt.PI, tr = Qt.min, nr = Qt.max, Yy = Qt.pow, to = Qt.abs, sR = /([a-z])[\s,]*((-?\d*\.?\d*(?:e[-+]?\d+)?[\s]*,?[\s]*)+)/ig, cR = /(-?\d*\.?\d*(?:e[-+]?\d+)?)[\s]*,?[\s]*/ig, eu = Array.isArray || function(e) {
  return e instanceof Array;
};
function Ed(e, t) {
  return Object.prototype.hasOwnProperty.call(e, t);
}
function Ns(e) {
  if (typeof e == "function" || Object(e) !== e)
    return e;
  var t = new e.constructor();
  for (var n in e)
    Ed(e, n) && (t[n] = Ns(e[n]));
  return t;
}
function lR(e, t) {
  for (var n = 0, i = e.length; n < i; n++)
    if (e[n] === t)
      return e.push(e.splice(n, 1)[0]);
}
function uR(e) {
  function t() {
    var n = Array.prototype.slice.call(arguments, 0), i = n.join(""), r = t.cache = t.cache || {}, o = t.count = t.count || [];
    return Ed(r, i) ? (lR(o, i), r[i]) : (o.length >= 1e3 && delete r[o.shift()], o.push(i), r[i] = e(...arguments), r[i]);
  }
  return t;
}
function pR(e) {
  if (!e)
    return null;
  var t = Ia(e);
  if (t.arr)
    return Ns(t.arr);
  var n = { a: 7, c: 6, h: 1, l: 2, m: 2, q: 4, s: 4, t: 2, v: 1, z: 0 }, i = [];
  return eu(e) && eu(e[0]) && (i = Ns(e)), i.length || String(e).replace(sR, function(r, o, a) {
    var c = [], l = o.toLowerCase();
    for (a.replace(cR, function(u, d) {
      d && c.push(+d);
    }), l == "m" && c.length > 2 && (i.push([o, ...c.splice(0, 2)]), l = "l", o = o == "m" ? "l" : "L"); c.length >= n[l] && (i.push([o, ...c.splice(0, n[l])]), !!n[l]); )
      ;
  }), i.toString = Ia.toString, t.arr = Ns(i), i;
}
function Ia(e) {
  var t = Ia.ps = Ia.ps || {};
  return t[e] ? t[e].sleep = 100 : t[e] = {
    sleep: 100
  }, setTimeout(function() {
    for (var n in t)
      Ed(t, n) && n != e && (t[n].sleep--, !t[n].sleep && delete t[n]);
  }), t[e];
}
function Df(e, t, n, i) {
  return arguments.length === 1 && (t = e.y, n = e.width, i = e.height, e = e.x), {
    x: e,
    y: t,
    width: n,
    height: i,
    x2: e + n,
    y2: t + i
  };
}
function b_() {
  return this.join(",").replace(aR, "$1");
}
function tu(e) {
  var t = Ns(e);
  return t.toString = b_, t;
}
function Ky(e, t, n, i, r, o, a, c, l) {
  var u = 1 - l, d = Yy(u, 3), f = Yy(u, 2), y = l * l, g = y * l, _ = d * e + f * 3 * l * n + u * 3 * l * l * r + g * a, x = d * t + f * 3 * l * i + u * 3 * l * l * o + g * c;
  return {
    x: nu(_),
    y: nu(x)
  };
}
function qy(e) {
  var t = yR(...e);
  return Df(
    t.x0,
    t.y0,
    t.x1 - t.x0,
    t.y1 - t.y0
  );
}
function qr(e, t, n) {
  return t >= e.x && t <= e.x + e.width && n >= e.y && n <= e.y + e.height;
}
function fR(e, t) {
  return e = Df(e), t = Df(t), qr(t, e.x, e.y) || qr(t, e.x2, e.y) || qr(t, e.x, e.y2) || qr(t, e.x2, e.y2) || qr(e, t.x, t.y) || qr(e, t.x2, t.y) || qr(e, t.x, t.y2) || qr(e, t.x2, t.y2) || (e.x < t.x2 && e.x > t.x || t.x < e.x2 && t.x > e.x) && (e.y < t.y2 && e.y > t.y || t.y < e.y2 && t.y > e.y);
}
function Xy(e, t, n, i, r) {
  var o = -3 * t + 9 * n - 9 * i + 3 * r, a = e * o + 6 * t - 12 * n + 6 * i;
  return e * a - 3 * t + 3 * n;
}
function Zy(e, t, n, i, r, o, a, c, l) {
  l == null && (l = 1), l = l > 1 ? 1 : l < 0 ? 0 : l;
  for (var u = l / 2, d = 12, f = [-0.1252, 0.1252, -0.3678, 0.3678, -0.5873, 0.5873, -0.7699, 0.7699, -0.9041, 0.9041, -0.9816, 0.9816], y = [0.2491, 0.2491, 0.2335, 0.2335, 0.2032, 0.2032, 0.1601, 0.1601, 0.1069, 0.1069, 0.0472, 0.0472], g = 0, _ = 0; _ < d; _++) {
    var x = u * f[_] + u, w = Xy(x, e, n, r, a), B = Xy(x, t, i, o, c), N = w * w + B * B;
    g += y[_] * Qt.sqrt(N);
  }
  return u * g;
}
function dR(e, t, n, i, r, o, a, c) {
  if (!(nr(e, n) < tr(r, a) || tr(e, n) > nr(r, a) || nr(t, i) < tr(o, c) || tr(t, i) > nr(o, c))) {
    var l = (e * i - t * n) * (r - a) - (e - n) * (r * c - o * a), u = (e * i - t * n) * (o - c) - (t - i) * (r * c - o * a), d = (e - n) * (o - c) - (t - i) * (r - a);
    if (d) {
      var f = nu(l / d), y = nu(u / d), g = +f.toFixed(2), _ = +y.toFixed(2);
      if (!(g < +tr(e, n).toFixed(2) || g > +nr(e, n).toFixed(2) || g < +tr(r, a).toFixed(2) || g > +nr(r, a).toFixed(2) || _ < +tr(t, i).toFixed(2) || _ > +nr(t, i).toFixed(2) || _ < +tr(o, c).toFixed(2) || _ > +nr(o, c).toFixed(2)))
        return { x: f, y };
    }
  }
}
function nu(e) {
  return Math.round(e * 1e11) / 1e11;
}
function hR(e, t, n) {
  var i = qy(e), r = qy(t);
  if (!fR(i, r))
    return n ? 0 : [];
  for (var o = Zy(...e), a = Zy(...t), c = Jy(e) ? 1 : ~~(o / 5) || 1, l = Jy(t) ? 1 : ~~(a / 5) || 1, u = [], d = [], f = {}, y = n ? 0 : [], g = 0; g < c + 1; g++) {
    var _ = Ky(...e, g / c);
    u.push({ x: _.x, y: _.y, t: g / c });
  }
  for (g = 0; g < l + 1; g++)
    _ = Ky(...t, g / l), d.push({ x: _.x, y: _.y, t: g / l });
  for (g = 0; g < c; g++)
    for (var x = 0; x < l; x++) {
      var w = u[g], B = u[g + 1], N = d[x], k = d[x + 1], A = to(B.x - w.x) < 0.01 ? "y" : "x", D = to(k.x - N.x) < 0.01 ? "y" : "x", j = dR(w.x, w.y, B.x, B.y, N.x, N.y, k.x, k.y), W;
      if (j) {
        if (W = j.x.toFixed(9) + "#" + j.y.toFixed(9), f[W])
          continue;
        f[W] = !0;
        var $ = w.t + to((j[A] - w[A]) / (B[A] - w[A])) * (B.t - w.t), Z = N.t + to((j[D] - N[D]) / (k[D] - N[D])) * (k.t - N.t);
        $ >= 0 && $ <= 1 && Z >= 0 && Z <= 1 && (n ? y++ : y.push({
          x: j.x,
          y: j.y,
          t1: $,
          t2: Z
        }));
      }
    }
  return y;
}
function x_(e, t, n) {
  e = eg(e), t = eg(t);
  for (var i, r, o, a, c, l, u, d, f, y, g = n ? 0 : [], _ = 0, x = e.length; _ < x; _++) {
    var w = e[_];
    if (w[0] == "M")
      i = c = w[1], r = l = w[2];
    else {
      w[0] == "C" ? (f = [i, r, ...w.slice(1)], i = f[6], r = f[7]) : (f = [i, r, i, r, c, l, c, l], i = c, r = l);
      for (var B = 0, N = t.length; B < N; B++) {
        var k = t[B];
        if (k[0] == "M")
          o = u = k[1], a = d = k[2];
        else {
          k[0] == "C" ? (y = [o, a, ...k.slice(1)], o = y[6], a = y[7]) : (y = [o, a, o, a, u, d, u, d], o = u, a = d);
          var A = hR(f, y, n);
          if (n)
            g += A;
          else {
            for (var D = 0, j = A.length; D < j; D++)
              A[D].segment1 = _, A[D].segment2 = B, A[D].bez1 = f, A[D].bez2 = y;
            g = g.concat(A);
          }
        }
      }
    }
  }
  return g;
}
function mR(e) {
  var t = Ia(e);
  if (t.abs)
    return tu(t.abs);
  if ((!eu(e) || !eu(e && e[0])) && (e = pR(e)), !e || !e.length)
    return [["M", 0, 0]];
  var n = [], i = 0, r = 0, o = 0, a = 0, c = 0, l;
  e[0][0] == "M" && (i = +e[0][1], r = +e[0][2], o = i, a = r, c++, n[0] = ["M", i, r]);
  for (var u, d, f = c, y = e.length; f < y; f++) {
    if (n.push(u = []), d = e[f], l = d[0], l != l.toUpperCase())
      switch (u[0] = l.toUpperCase(), u[0]) {
        case "A":
          u[1] = d[1], u[2] = d[2], u[3] = d[3], u[4] = d[4], u[5] = d[5], u[6] = +d[6] + i, u[7] = +d[7] + r;
          break;
        case "V":
          u[1] = +d[1] + r;
          break;
        case "H":
          u[1] = +d[1] + i;
          break;
        case "M":
          o = +d[1] + i, a = +d[2] + r;
        default:
          for (var g = 1, _ = d.length; g < _; g++)
            u[g] = +d[g] + (g % 2 ? i : r);
      }
    else
      for (var x = 0, w = d.length; x < w; x++)
        u[x] = d[x];
    switch (l = l.toUpperCase(), u[0]) {
      case "Z":
        i = +o, r = +a;
        break;
      case "H":
        i = u[1];
        break;
      case "V":
        r = u[1];
        break;
      case "M":
        o = u[u.length - 2], a = u[u.length - 1];
      default:
        i = u[u.length - 2], r = u[u.length - 1];
    }
  }
  return n.toString = b_, t.abs = tu(n), n;
}
function Jy(e) {
  return e[0] === e[2] && e[1] === e[3] && e[4] === e[6] && e[5] === e[7];
}
function ol(e, t, n, i) {
  return [
    e,
    t,
    n,
    i,
    n,
    i
  ];
}
function Qy(e, t, n, i, r, o) {
  var a = 0.3333333333333333, c = 2 / 3;
  return [
    a * e + c * n,
    a * t + c * i,
    a * r + c * n,
    a * o + c * i,
    r,
    o
  ];
}
function E_(e, t, n, i, r, o, a, c, l, u) {
  var d = Kr * 120 / 180, f = Kr / 180 * (+r || 0), y = [], g, _ = uR(function(Et, Ne, I) {
    var E = Et * Qt.cos(I) - Ne * Qt.sin(I), C = Et * Qt.sin(I) + Ne * Qt.cos(I);
    return { x: E, y: C };
  });
  if (u)
    W = u[0], $ = u[1], D = u[2], j = u[3];
  else {
    g = _(e, t, -f), e = g.x, t = g.y, g = _(c, l, -f), c = g.x, l = g.y;
    var x = (e - c) / 2, w = (t - l) / 2, B = x * x / (n * n) + w * w / (i * i);
    B > 1 && (B = Qt.sqrt(B), n = B * n, i = B * i);
    var N = n * n, k = i * i, A = (o == a ? -1 : 1) * Qt.sqrt(to((N * k - N * w * w - k * x * x) / (N * w * w + k * x * x))), D = A * n * w / i + (e + c) / 2, j = A * -i * x / n + (t + l) / 2, W = Qt.asin(((t - j) / i).toFixed(9)), $ = Qt.asin(((l - j) / i).toFixed(9));
    W = e < D ? Kr - W : W, $ = c < D ? Kr - $ : $, W < 0 && (W = Kr * 2 + W), $ < 0 && ($ = Kr * 2 + $), a && W > $ && (W = W - Kr * 2), !a && $ > W && ($ = $ - Kr * 2);
  }
  var Z = $ - W;
  if (to(Z) > d) {
    var X = $, V = c, ae = l;
    $ = W + d * (a && $ > W ? 1 : -1), c = D + n * Qt.cos($), l = j + i * Qt.sin($), y = E_(c, l, n, i, r, 0, a, V, ae, [$, X, D, j]);
  }
  Z = $ - W;
  var ie = Qt.cos(W), Ae = Qt.sin(W), Rt = Qt.cos($), it = Qt.sin($), Ve = Qt.tan(Z / 4), Zt = 4 / 3 * n * Ve, sn = 4 / 3 * i * Ve, Pt = [e, t], Kt = [e + Zt * Ae, t - sn * ie], oe = [c + Zt * it, l - sn * Rt], se = [c, l];
  if (Kt[0] = 2 * Pt[0] - Kt[0], Kt[1] = 2 * Pt[1] - Kt[1], u)
    return [Kt, oe, se].concat(y);
  y = [Kt, oe, se].concat(y).join().split(",");
  for (var fe = [], ct = 0, Lt = y.length; ct < Lt; ct++)
    fe[ct] = ct % 2 ? _(y[ct - 1], y[ct], f).y : _(y[ct], y[ct + 1], f).x;
  return fe;
}
function yR(e, t, n, i, r, o, a, c) {
  for (var l = [], u = [[], []], d, f, y, g, _, x, w, B, N = 0; N < 2; ++N) {
    if (N == 0 ? (f = 6 * e - 12 * n + 6 * r, d = -3 * e + 9 * n - 9 * r + 3 * a, y = 3 * n - 3 * e) : (f = 6 * t - 12 * i + 6 * o, d = -3 * t + 9 * i - 9 * o + 3 * c, y = 3 * i - 3 * t), to(d) < 1e-12) {
      if (to(f) < 1e-12)
        continue;
      g = -y / f, 0 < g && g < 1 && l.push(g);
      continue;
    }
    w = f * f - 4 * y * d, B = Qt.sqrt(w), !(w < 0) && (_ = (-f + B) / (2 * d), 0 < _ && _ < 1 && l.push(_), x = (-f - B) / (2 * d), 0 < x && x < 1 && l.push(x));
  }
  for (var k = l.length, A = k, D; k--; )
    g = l[k], D = 1 - g, u[0][k] = D * D * D * e + 3 * D * D * g * n + 3 * D * g * g * r + g * g * g * a, u[1][k] = D * D * D * t + 3 * D * D * g * i + 3 * D * g * g * o + g * g * g * c;
  return u[0][A] = e, u[1][A] = t, u[0][A + 1] = a, u[1][A + 1] = c, u[0].length = u[1].length = A + 2, {
    x0: tr(...u[0]),
    y0: tr(...u[1]),
    x1: nr(...u[0]),
    y1: nr(...u[1])
  };
}
function eg(e) {
  var t = Ia(e);
  if (t.curve)
    return tu(t.curve);
  for (var n = mR(e), i = { x: 0, y: 0, bx: 0, by: 0, X: 0, Y: 0, qx: null, qy: null }, r = function(g, _, x) {
    var w, B;
    if (!g)
      return ["C", _.x, _.y, _.x, _.y, _.x, _.y];
    switch (!(g[0] in { T: 1, Q: 1 }) && (_.qx = _.qy = null), g[0]) {
      case "M":
        _.X = g[1], _.Y = g[2];
        break;
      case "A":
        g = ["C", ...E_(_.x, _.y, ...g.slice(1))];
        break;
      case "S":
        x == "C" || x == "S" ? (w = _.x * 2 - _.bx, B = _.y * 2 - _.by) : (w = _.x, B = _.y), g = ["C", w, B, ...g.slice(1)];
        break;
      case "T":
        x == "Q" || x == "T" ? (_.qx = _.x * 2 - _.qx, _.qy = _.y * 2 - _.qy) : (_.qx = _.x, _.qy = _.y), g = ["C", ...Qy(_.x, _.y, _.qx, _.qy, g[1], g[2])];
        break;
      case "Q":
        _.qx = g[1], _.qy = g[2], g = ["C", ...Qy(_.x, _.y, g[1], g[2], g[3], g[4])];
        break;
      case "L":
        g = ["C", ...ol(_.x, _.y, g[1], g[2])];
        break;
      case "H":
        g = ["C", ...ol(_.x, _.y, g[1], _.y)];
        break;
      case "V":
        g = ["C", ...ol(_.x, _.y, _.x, g[1])];
        break;
      case "Z":
        g = ["C", ...ol(_.x, _.y, _.X, _.Y)];
        break;
    }
    return g;
  }, o = function(g, _) {
    if (g[_].length > 7) {
      g[_].shift();
      for (var x = g[_]; x.length; )
        a[_] = "A", g.splice(_++, 0, ["C", ...x.splice(0, 6)]);
      g.splice(_, 1), d = n.length;
    }
  }, a = [], c = "", l = "", u = 0, d = n.length; u < d; u++) {
    n[u] && (c = n[u][0]), c != "C" && (a[u] = c, u && (l = a[u - 1])), n[u] = r(n[u], i, l), a[u] != "A" && c == "C" && (a[u] = "C"), o(n, u);
    var f = n[u], y = f.length;
    i.x = f[y - 2], i.y = f[y - 1], i.bx = Uy(f[y - 4]) || i.x, i.by = Uy(f[y - 3]) || i.y;
  }
  return t.curve = tu(n), n;
}
function kt(e) {
  return vn(e) && Jn(e, "waypoints");
}
function vt(e) {
  return vn(e) && Jn(e, "labelTarget");
}
function w_(e) {
  return {
    x: Math.round(e.x),
    y: Math.round(e.y),
    width: Math.round(e.width),
    height: Math.round(e.height)
  };
}
function Pr(e) {
  return {
    x: Math.round(e.x),
    y: Math.round(e.y)
  };
}
function Le(e) {
  return {
    top: e.y,
    right: e.x + (e.width || 0),
    bottom: e.y + (e.height || 0),
    left: e.x
  };
}
function bu(e) {
  return {
    x: e.left,
    y: e.top,
    width: e.right - e.left,
    height: e.bottom - e.top
  };
}
function gR(e) {
  return Pr({
    x: e.x + (e.width || 0) / 2,
    y: e.y + (e.height || 0) / 2
  });
}
function vR(e) {
  for (var t = e.waypoints, n = t.reduce(function(u, d, f) {
    var y = t[f - 1];
    if (y) {
      var g = u[u.length - 1], _ = g && g.endLength || 0, x = xR(y, d);
      u.push({
        start: y,
        end: d,
        startLength: _,
        endLength: _ + x,
        length: x
      });
    }
    return u;
  }, []), i = n.reduce(function(u, d) {
    return u + d.length;
  }, 0), r = i / 2, o = 0, a = n[o]; a.endLength < r; )
    a = n[++o];
  var c = (r - a.startLength) / a.length, l = {
    x: a.start.x + (a.end.x - a.start.x) * c,
    y: a.start.y + (a.end.y - a.start.y) * c
  };
  return l;
}
function Fe(e) {
  return kt(e) ? vR(e) : gR(e);
}
function Ln(e, t, n) {
  n = n || 0, vn(n) || (n = { x: n, y: n });
  var i = Le(e), r = Le(t), o = i.bottom + n.y <= r.top, a = i.left - n.x >= r.right, c = i.top - n.y >= r.bottom, l = i.right + n.x <= r.left, u = o ? "top" : c ? "bottom" : null, d = l ? "left" : a ? "right" : null;
  return d && u ? u + "-" + d : d || u || "intersect";
}
function Of(e, t, n) {
  var i = _R(e, t);
  return i.length === 1 || i.length === 2 && tc(i[0], i[1]) < 1 ? Pr(i[0]) : i.length > 1 ? (i = Gi(i, function(r) {
    var o = Math.floor(r.t2 * 100) || 1;
    return o = 100 - o, o = (o < 10 ? "0" : "") + o, r.segment2 + "#" + o;
  }), Pr(i[n ? 0 : i.length - 1])) : null;
}
function _R(e, t) {
  return x_(e, t);
}
function bR(e) {
  e = e.slice();
  for (var t = 0, n, i, r; e[t]; )
    n = e[t], i = e[t - 1], r = e[t + 1], tc(n, r) === 0 || xd(i, r, n) ? e.splice(t, 1) : t++;
  return e;
}
function xR(e, t) {
  return Math.sqrt(Math.pow(e.x - t.x, 2) + Math.pow(e.y - t.y, 2));
}
function Nl(e, t) {
  return Math.round(e * t) / t;
}
function tg(e) {
  return je(e) ? e + "px" : e;
}
function ER(e) {
  for (; e.parent; )
    e = e.parent;
  return e;
}
function wR(e) {
  e = U({}, { width: "100%", height: "100%" }, e);
  const t = e.container || document.body, n = document.createElement("div");
  return n.setAttribute("class", "djs-container djs-parent"), Cn(n, {
    position: "relative",
    overflow: "hidden",
    width: tg(e.width),
    height: tg(e.height)
  }), t.appendChild(n), n;
}
function S_(e, t, n) {
  const i = Me("g");
  dt(i).add(t);
  const r = n !== void 0 ? n : e.childNodes.length - 1;
  return e.insertBefore(i, e.childNodes[r] || null), i;
}
const SR = "base", R_ = 0, RR = 1, CR = {
  shape: ["x", "y", "width", "height"],
  connection: ["waypoints"]
};
function Ze(e, t, n, i) {
  this._eventBus = t, this._elementRegistry = i, this._graphicsFactory = n, this._rootsIdx = 0, this._layers = {}, this._planes = [], this._rootElement = null, this._init(e || {});
}
Ze.$inject = [
  "config.canvas",
  "eventBus",
  "graphicsFactory",
  "elementRegistry"
];
Ze.prototype._init = function(e) {
  const t = this._eventBus, n = this._container = wR(e), i = this._svg = Me("svg");
  we(i, { width: "100%", height: "100%" }), ze(n, i);
  const r = this._viewport = S_(i, "viewport");
  e.deferUpdate && (this._viewboxChanged = a_(Qn(this._viewboxChanged, this), 300)), t.on("diagram.init", () => {
    t.fire("canvas.init", {
      svg: i,
      viewport: r
    });
  }), t.on([
    "shape.added",
    "connection.added",
    "shape.removed",
    "connection.removed",
    "elements.changed",
    "root.set"
  ], () => {
    delete this._cachedViewbox;
  }), t.on("diagram.destroy", 500, this._destroy, this), t.on("diagram.clear", 500, this._clear, this);
};
Ze.prototype._destroy = function() {
  this._eventBus.fire("canvas.destroy", {
    svg: this._svg,
    viewport: this._viewport
  });
  const e = this._container.parentNode;
  e && e.removeChild(this._container), delete this._svg, delete this._container, delete this._layers, delete this._planes, delete this._rootElement, delete this._viewport;
};
Ze.prototype._clear = function() {
  this._elementRegistry.getAll().forEach((t) => {
    const n = v_(t);
    n === "root" ? this.removeRootElement(t) : this._removeElement(t, n);
  }), this._planes = [], this._rootElement = null, delete this._cachedViewbox;
};
Ze.prototype.getDefaultLayer = function() {
  return this.getLayer(SR, R_);
};
Ze.prototype.getLayer = function(e, t) {
  if (!e)
    throw new Error("must specify a name");
  let n = this._layers[e];
  if (n || (n = this._layers[e] = this._createLayer(e, t)), typeof t < "u" && n.index !== t)
    throw new Error("layer <" + e + "> already created at index <" + t + ">");
  return n.group;
};
Ze.prototype._getChildIndex = function(e) {
  return li(this._layers, function(t, n) {
    return n.visible && e >= n.index && t++, t;
  }, 0);
};
Ze.prototype._createLayer = function(e, t) {
  typeof t > "u" && (t = RR);
  const n = this._getChildIndex(t);
  return {
    group: S_(this._viewport, "layer-" + e, n),
    index: t,
    visible: !0
  };
};
Ze.prototype.showLayer = function(e) {
  if (!e)
    throw new Error("must specify a name");
  const t = this._layers[e];
  if (!t)
    throw new Error("layer <" + e + "> does not exist");
  const n = this._viewport, i = t.group, r = t.index;
  if (t.visible)
    return i;
  const o = this._getChildIndex(r);
  return n.insertBefore(i, n.childNodes[o] || null), t.visible = !0, i;
};
Ze.prototype.hideLayer = function(e) {
  if (!e)
    throw new Error("must specify a name");
  const t = this._layers[e];
  if (!t)
    throw new Error("layer <" + e + "> does not exist");
  const n = t.group;
  return t.visible && (qt(n), t.visible = !1), n;
};
Ze.prototype._removeLayer = function(e) {
  const t = this._layers[e];
  t && (delete this._layers[e], qt(t.group));
};
Ze.prototype.getActiveLayer = function() {
  const e = this._findPlaneForRoot(this.getRootElement());
  return e ? e.layer : null;
};
Ze.prototype.findRoot = function(e) {
  return typeof e == "string" && (e = this._elementRegistry.get(e)), e ? (this._findPlaneForRoot(
    ER(e)
  ) || {}).rootElement : void 0;
};
Ze.prototype.getRootElements = function() {
  return this._planes.map(function(e) {
    return e.rootElement;
  });
};
Ze.prototype._findPlaneForRoot = function(e) {
  return gt(this._planes, function(t) {
    return t.rootElement === e;
  });
};
Ze.prototype.getContainer = function() {
  return this._container;
};
Ze.prototype._updateMarker = function(e, t, n) {
  let i;
  e.id || (e = this._elementRegistry.get(e)), i = this._elementRegistry._elements[e.id], i && (z([i.gfx, i.secondaryGfx], function(r) {
    r && (n ? dt(r).add(t) : dt(r).remove(t));
  }), this._eventBus.fire("element.marker.update", { element: e, gfx: i.gfx, marker: t, add: !!n }));
};
Ze.prototype.addMarker = function(e, t) {
  this._updateMarker(e, t, !0);
};
Ze.prototype.removeMarker = function(e, t) {
  this._updateMarker(e, t, !1);
};
Ze.prototype.hasMarker = function(e, t) {
  e.id || (e = this._elementRegistry.get(e));
  const n = this.getGraphics(e);
  return dt(n).has(t);
};
Ze.prototype.toggleMarker = function(e, t) {
  this.hasMarker(e, t) ? this.removeMarker(e, t) : this.addMarker(e, t);
};
Ze.prototype.getRootElement = function() {
  const e = this._rootElement;
  return e || this._planes.length ? e : this.setRootElement(this.addRootElement(null));
};
Ze.prototype.addRootElement = function(e) {
  const t = this._rootsIdx++;
  e || (e = {
    id: "__implicitroot_" + t,
    children: [],
    isImplicit: !0
  });
  const n = e.layer = "root-" + t;
  this._ensureValid("root", e);
  const i = this.getLayer(n, R_);
  return this.hideLayer(n), this._addRoot(e, i), this._planes.push({
    rootElement: e,
    layer: i
  }), e;
};
Ze.prototype.removeRootElement = function(e) {
  if (typeof e == "string" && (e = this._elementRegistry.get(e)), !!this._findPlaneForRoot(e))
    return this._removeRoot(e), this._removeLayer(e.layer), this._planes = this._planes.filter(function(n) {
      return n.rootElement !== e;
    }), this._rootElement === e && (this._rootElement = null), e;
};
Ze.prototype.setRootElement = function(e) {
  if (e === this._rootElement)
    return e;
  let t;
  if (!e)
    throw new Error("rootElement required");
  return t = this._findPlaneForRoot(e), t || (e = this.addRootElement(e)), this._setRoot(e), e;
};
Ze.prototype._removeRoot = function(e) {
  const t = this._elementRegistry, n = this._eventBus;
  n.fire("root.remove", { element: e }), n.fire("root.removed", { element: e }), t.remove(e);
};
Ze.prototype._addRoot = function(e, t) {
  const n = this._elementRegistry, i = this._eventBus;
  i.fire("root.add", { element: e }), n.add(e, t), i.fire("root.added", { element: e, gfx: t });
};
Ze.prototype._setRoot = function(e, t) {
  const n = this._rootElement;
  n && (this._elementRegistry.updateGraphics(n, null, !0), this.hideLayer(n.layer)), e && (t || (t = this._findPlaneForRoot(e).layer), this._elementRegistry.updateGraphics(e, this._svg, !0), this.showLayer(e.layer)), this._rootElement = e, this._eventBus.fire("root.set", { element: e });
};
Ze.prototype._ensureValid = function(e, t) {
  if (!t.id)
    throw new Error("element must have an id");
  if (this._elementRegistry.get(t.id))
    throw new Error("element <" + t.id + "> already exists");
  const n = CR[e];
  if (!Qo(n, function(r) {
    return typeof t[r] < "u";
  }))
    throw new Error(
      "must supply { " + n.join(", ") + " } with " + e
    );
};
Ze.prototype._setParent = function(e, t, n) {
  dn(t.children, e, n), e.parent = t;
};
Ze.prototype._addElement = function(e, t, n, i) {
  n = n || this.getRootElement();
  const r = this._eventBus, o = this._graphicsFactory;
  this._ensureValid(e, t), r.fire(e + ".add", { element: t, parent: n }), this._setParent(t, n, i);
  const a = o.create(e, t, i);
  return this._elementRegistry.add(t, a), o.update(e, t, a), r.fire(e + ".added", { element: t, gfx: a }), t;
};
Ze.prototype.addShape = function(e, t, n) {
  return this._addElement("shape", e, t, n);
};
Ze.prototype.addConnection = function(e, t, n) {
  return this._addElement("connection", e, t, n);
};
Ze.prototype._removeElement = function(e, t) {
  const n = this._elementRegistry, i = this._graphicsFactory, r = this._eventBus;
  if (e = n.get(e.id || e), !!e)
    return r.fire(t + ".remove", { element: e }), i.remove(e), nn(e.parent && e.parent.children, e), e.parent = null, r.fire(t + ".removed", { element: e }), n.remove(e), e;
};
Ze.prototype.removeShape = function(e) {
  return this._removeElement(e, "shape");
};
Ze.prototype.removeConnection = function(e) {
  return this._removeElement(e, "connection");
};
Ze.prototype.getGraphics = function(e, t) {
  return this._elementRegistry.getGraphics(e, t);
};
Ze.prototype._changeViewbox = function(e) {
  this._eventBus.fire("canvas.viewbox.changing"), e.apply(this), this._cachedViewbox = null, this._viewboxChanged();
};
Ze.prototype._viewboxChanged = function() {
  this._eventBus.fire("canvas.viewbox.changed", { viewbox: this.viewbox() });
};
Ze.prototype.viewbox = function(e) {
  if (e === void 0 && this._cachedViewbox)
    return this._cachedViewbox;
  const t = this._viewport, n = this.getSize();
  let i, r, o, a, c, l, u;
  if (e)
    this._changeViewbox(function() {
      c = Math.min(n.width / e.width, n.height / e.height);
      const d = this._svg.createSVGMatrix().scale(c).translate(-e.x, -e.y);
      js(t, d);
    });
  else
    return o = this._rootElement ? this.getActiveLayer() : null, i = o && o.getBBox() || {}, a = js(t), r = a ? a.matrix : BS(), c = Nl(r.a, 1e3), l = Nl(-r.e || 0, 1e3), u = Nl(-r.f || 0, 1e3), e = this._cachedViewbox = {
      x: l ? l / c : 0,
      y: u ? u / c : 0,
      width: n.width / c,
      height: n.height / c,
      scale: c,
      inner: {
        width: i.width || 0,
        height: i.height || 0,
        x: i.x || 0,
        y: i.y || 0
      },
      outer: n
    }, e;
  return e;
};
Ze.prototype.scroll = function(e) {
  const t = this._viewport;
  let n = t.getCTM();
  return e && this._changeViewbox(function() {
    e = U({ dx: 0, dy: 0 }, e || {}), n = this._svg.createSVGMatrix().translate(e.dx, e.dy).multiply(n), C_(t, n);
  }), { x: n.e, y: n.f };
};
Ze.prototype.scrollToElement = function(e, t) {
  let n = 100;
  typeof e == "string" && (e = this._elementRegistry.get(e));
  const i = this.findRoot(e);
  if (i !== this.getRootElement() && this.setRootElement(i), i === e)
    return;
  t || (t = {}), typeof t == "number" && (n = t), t = {
    top: t.top || n,
    right: t.right || n,
    bottom: t.bottom || n,
    left: t.left || n
  };
  const r = pn(e), o = Le(r), a = this.viewbox(), c = this.zoom();
  let l, u;
  a.y += t.top / c, a.x += t.left / c, a.width -= (t.right + t.left) / c, a.height -= (t.bottom + t.top) / c;
  const d = Le(a);
  if (!(r.width < a.width && r.height < a.height))
    l = r.x - a.x, u = r.y - a.y;
  else {
    const y = Math.max(0, o.right - d.right), g = Math.min(0, o.left - d.left), _ = Math.max(0, o.bottom - d.bottom), x = Math.min(0, o.top - d.top);
    l = y || g, u = _ || x;
  }
  this.scroll({ dx: -l * c, dy: -u * c });
};
Ze.prototype.zoom = function(e, t) {
  if (!e)
    return this.viewbox(e).scale;
  if (e === "fit-viewport")
    return this._fitViewport(t);
  let n, i;
  return this._changeViewbox(function() {
    typeof t != "object" && (n = this.viewbox().outer, t = {
      x: n.width / 2,
      y: n.height / 2
    }), i = this._setZoom(e, t);
  }), Nl(i.a, 1e3);
};
function C_(e, t) {
  const n = "matrix(" + t.a + "," + t.b + "," + t.c + "," + t.d + "," + t.e + "," + t.f + ")";
  e.setAttribute("transform", n);
}
Ze.prototype._fitViewport = function(e) {
  const t = this.viewbox(), n = t.outer, i = t.inner;
  let r, o;
  return i.x >= 0 && i.y >= 0 && i.x + i.width <= n.width && i.y + i.height <= n.height && !e ? o = {
    x: 0,
    y: 0,
    width: Math.max(i.width + i.x, n.width),
    height: Math.max(i.height + i.y, n.height)
  } : (r = Math.min(1, n.width / i.width, n.height / i.height), o = {
    x: i.x + (e ? i.width / 2 - n.width / r / 2 : 0),
    y: i.y + (e ? i.height / 2 - n.height / r / 2 : 0),
    width: n.width / r,
    height: n.height / r
  }), this.viewbox(o), this.viewbox(!1).scale;
};
Ze.prototype._setZoom = function(e, t) {
  const n = this._svg, i = this._viewport, r = n.createSVGMatrix(), o = n.createSVGPoint();
  let a, c, l, u, d;
  l = i.getCTM();
  const f = l.a;
  return t ? (a = U(o, t), c = a.matrixTransform(l.inverse()), u = r.translate(c.x, c.y).scale(1 / f * e).translate(-c.x, -c.y), d = l.multiply(u)) : d = r.scale(e), C_(this._viewport, d), d;
};
Ze.prototype.getSize = function() {
  return {
    width: this._container.clientWidth,
    height: this._container.clientHeight
  };
};
Ze.prototype.getAbsoluteBBox = function(e) {
  const t = this.viewbox();
  let n;
  e.waypoints ? n = this.getGraphics(e).getBBox() : n = e;
  const i = n.x * t.scale - t.x * t.scale, r = n.y * t.scale - t.y * t.scale, o = n.width * t.scale, a = n.height * t.scale;
  return {
    x: i,
    y: r,
    width: o,
    height: a
  };
};
Ze.prototype.resized = function() {
  delete this._cachedViewbox, this._eventBus.fire("canvas.resized");
};
var $a = "data-element-id";
function vi(e) {
  this._elements = {}, this._eventBus = e;
}
vi.$inject = ["eventBus"];
vi.prototype.add = function(e, t, n) {
  var i = e.id;
  this._validateId(i), we(t, $a, i), n && we(n, $a, i), this._elements[i] = { element: e, gfx: t, secondaryGfx: n };
};
vi.prototype.remove = function(e) {
  var t = this._elements, n = e.id || e, i = n && t[n];
  i && (we(i.gfx, $a, ""), i.secondaryGfx && we(i.secondaryGfx, $a, ""), delete t[n]);
};
vi.prototype.updateId = function(e, t) {
  this._validateId(t), typeof e == "string" && (e = this.get(e)), this._eventBus.fire("element.updateId", {
    element: e,
    newId: t
  });
  var n = this.getGraphics(e), i = this.getGraphics(e, !0);
  this.remove(e), e.id = t, this.add(e, n, i);
};
vi.prototype.updateGraphics = function(e, t, n) {
  var i = e.id || e, r = this._elements[i];
  return n ? r.secondaryGfx = t : r.gfx = t, t && we(t, $a, i), t;
};
vi.prototype.get = function(e) {
  var t;
  typeof e == "string" ? t = e : t = e && we(e, $a);
  var n = this._elements[t];
  return n && n.element;
};
vi.prototype.filter = function(e) {
  var t = [];
  return this.forEach(function(n, i) {
    e(n, i) && t.push(n);
  }), t;
};
vi.prototype.find = function(e) {
  for (var t = this._elements, n = Object.keys(t), i = 0; i < n.length; i++) {
    var r = n[i], o = t[r], a = o.element, c = o.gfx;
    if (e(a, c))
      return a;
  }
};
vi.prototype.getAll = function() {
  return this.filter(function(e) {
    return e;
  });
};
vi.prototype.forEach = function(e) {
  var t = this._elements;
  Object.keys(t).forEach(function(n) {
    var i = t[n], r = i.element, o = i.gfx;
    return e(r, o);
  });
};
vi.prototype.getGraphics = function(e, t) {
  var n = e.id || e, i = this._elements[n];
  return i && (t ? i.secondaryGfx : i.gfx);
};
vi.prototype._validateId = function(e) {
  if (!e)
    throw new Error("element must have an id");
  if (this._elements[e])
    throw new Error("element with id " + e + " already added");
};
function AR(e, t, n, i) {
  var r = n.inverse;
  return Object.defineProperty(e, "remove", {
    value: function(o) {
      var a = this.indexOf(o);
      return a !== -1 && (this.splice(a, 1), t.unset(o, r, i)), o;
    }
  }), Object.defineProperty(e, "contains", {
    value: function(o) {
      return this.indexOf(o) !== -1;
    }
  }), Object.defineProperty(e, "add", {
    value: function(o, a) {
      var c = this.indexOf(o);
      if (typeof a > "u") {
        if (c !== -1)
          return;
        a = this.length;
      }
      c !== -1 && this.splice(c, 1), this.splice(a, 0, o), c === -1 && t.set(o, r, i);
    }
  }), Object.defineProperty(e, "__refs_collection", {
    value: !0
  }), e;
}
function PR(e) {
  return e.__refs_collection === !0;
}
function TR(e, t) {
  return Object.prototype.hasOwnProperty.call(e, t.name || t);
}
function A_(e, t, n) {
  var i = AR(n[t.name] || [], e, t, n);
  Object.defineProperty(n, t.name, {
    enumerable: t.enumerable,
    value: i
  }), i.length && i.forEach(function(r) {
    e.set(r, t.inverse, n);
  });
}
function kR(e, t, n) {
  var i = t.inverse, r = n[t.name];
  Object.defineProperty(n, t.name, {
    configurable: t.configurable,
    enumerable: t.enumerable,
    get: function() {
      return r;
    },
    set: function(o) {
      if (o !== r) {
        var a = r;
        r = null, a && e.unset(a, i, n), r = o, e.set(r, i, n);
      }
    }
  });
}
function Ti(e, t) {
  if (!(this instanceof Ti))
    return new Ti(e, t);
  e.inverse = t, t.inverse = e, this.props = {}, this.props[e.name] = e, this.props[t.name] = t;
}
Ti.prototype.bind = function(e, t) {
  if (typeof t == "string") {
    if (!this.props[t])
      throw new Error("no property <" + t + "> in ref");
    t = this.props[t];
  }
  t.collection ? A_(this, t, e) : kR(this, t, e);
};
Ti.prototype.ensureRefsCollection = function(e, t) {
  var n = e[t.name];
  return PR(n) || A_(this, t, e), n;
};
Ti.prototype.ensureBound = function(e, t) {
  TR(e, t) || this.bind(e, t);
};
Ti.prototype.unset = function(e, t, n) {
  e && (this.ensureBound(e, t), t.collection ? this.ensureRefsCollection(e, t).remove(n) : e[t.name] = void 0);
};
Ti.prototype.set = function(e, t, n) {
  e && (this.ensureBound(e, t), t.collection ? this.ensureRefsCollection(e, t).add(n) : e[t.name] = n);
};
var wd = new Ti({ name: "children", enumerable: !0, collection: !0 }, { name: "parent" }), P_ = new Ti({ name: "labels", enumerable: !0, collection: !0 }, { name: "labelTarget" }), ng = new Ti({ name: "attachers", collection: !0 }, { name: "host" }), T_ = new Ti({ name: "outgoing", collection: !0 }, { name: "source" }), k_ = new Ti({ name: "incoming", collection: !0 }, { name: "target" });
function Ua() {
  Object.defineProperty(this, "businessObject", {
    writable: !0
  }), Object.defineProperty(this, "label", {
    get: function() {
      return this.labels[0];
    },
    set: function(e) {
      var t = this.label, n = this.labels;
      !e && t ? n.remove(t) : n.add(e, 0);
    }
  }), wd.bind(this, "parent"), P_.bind(this, "labels"), T_.bind(this, "outgoing"), k_.bind(this, "incoming");
}
function nc() {
  Ua.call(this), wd.bind(this, "children"), ng.bind(this, "host"), ng.bind(this, "attachers");
}
Pe(nc, Ua);
function M_() {
  Ua.call(this), wd.bind(this, "children");
}
Pe(M_, nc);
function D_() {
  nc.call(this), P_.bind(this, "labelTarget");
}
Pe(D_, nc);
function O_() {
  Ua.call(this), T_.bind(this, "source"), k_.bind(this, "target");
}
Pe(O_, Ua);
var MR = {
  connection: O_,
  shape: nc,
  label: D_,
  root: M_
};
function DR(e, t) {
  var n = MR[e];
  if (!n)
    throw new Error("unknown type: <" + e + ">");
  return U(new n(), t);
}
function OR(e) {
  return e instanceof Ua;
}
function Or() {
  this._uid = 12;
}
Or.prototype.createRoot = function(e) {
  return this.create("root", e);
};
Or.prototype.createLabel = function(e) {
  return this.create("label", e);
};
Or.prototype.createShape = function(e) {
  return this.create("shape", e);
};
Or.prototype.createConnection = function(e) {
  return this.create("connection", e);
};
Or.prototype.create = function(e, t) {
  return t = U({}, t || {}), t.id || (t.id = e + "_" + this._uid++), DR(e, t);
};
var iu = "__fn", N_ = 1e3, NR = Array.prototype.slice;
function ui() {
  this._listeners = {}, this.on("diagram.destroy", 1, this._destroy, this);
}
ui.prototype.on = function(e, t, n, i) {
  if (e = Ke(e) ? e : [e], fn(t) && (i = n, n = t, t = N_), !je(t))
    throw new Error("priority must be a number");
  var r = n;
  i && (r = Qn(n, i), r[iu] = n[iu] || n);
  var o = this;
  e.forEach(function(a) {
    o._addListener(a, {
      priority: t,
      callback: r,
      next: null
    });
  });
};
ui.prototype.once = function(e, t, n, i) {
  var r = this;
  if (fn(t) && (i = n, n = t, t = N_), !je(t))
    throw new Error("priority must be a number");
  function o() {
    o.__isTomb = !0;
    var a = n.apply(i, arguments);
    return r.off(e, o), a;
  }
  o[iu] = n, this.on(e, t, o);
};
ui.prototype.off = function(e, t) {
  e = Ke(e) ? e : [e];
  var n = this;
  e.forEach(function(i) {
    n._removeListener(i, t);
  });
};
ui.prototype.createEvent = function(e) {
  var t = new ic();
  return t.init(e), t;
};
ui.prototype.fire = function(e, t) {
  var n, i, r, o;
  if (o = NR.call(arguments), typeof e == "object" && (t = e, e = t.type), !e)
    throw new Error("no event type specified");
  if (i = this._listeners[e], !!i) {
    t instanceof ic ? n = t : n = this.createEvent(t), o[0] = n;
    var a = n.type;
    e !== a && (n.type = e);
    try {
      r = this._invokeListeners(n, o, i);
    } finally {
      e !== a && (n.type = a);
    }
    return r === void 0 && n.defaultPrevented && (r = !1), r;
  }
};
ui.prototype.handleError = function(e) {
  return this.fire("error", { error: e }) === !1;
};
ui.prototype._destroy = function() {
  this._listeners = {};
};
ui.prototype._invokeListeners = function(e, t, n) {
  for (var i; n && !e.cancelBubble; )
    i = this._invokeListener(e, t, n), n = n.next;
  return i;
};
ui.prototype._invokeListener = function(e, t, n) {
  var i;
  if (n.callback.__isTomb)
    return i;
  try {
    i = BR(n.callback, t), i !== void 0 && (e.returnValue = i, e.stopPropagation()), i === !1 && e.preventDefault();
  } catch (r) {
    if (!this.handleError(r))
      throw console.error("unhandled error in event listener", r), r;
  }
  return i;
};
ui.prototype._addListener = function(e, t) {
  var n = this._getListeners(e), i;
  if (!n) {
    this._setListeners(e, t);
    return;
  }
  for (; n; ) {
    if (n.priority < t.priority) {
      t.next = n, i ? i.next = t : this._setListeners(e, t);
      return;
    }
    i = n, n = n.next;
  }
  i.next = t;
};
ui.prototype._getListeners = function(e) {
  return this._listeners[e];
};
ui.prototype._setListeners = function(e, t) {
  this._listeners[e] = t;
};
ui.prototype._removeListener = function(e, t) {
  var n = this._getListeners(e), i, r, o;
  if (!t) {
    this._setListeners(e, null);
    return;
  }
  for (; n; )
    i = n.next, o = n.callback, (o === t || o[iu] === t) && (r ? r.next = i : this._setListeners(e, i)), r = n, n = i;
};
function ic() {
}
ic.prototype.stopPropagation = function() {
  this.cancelBubble = !0;
};
ic.prototype.preventDefault = function() {
  this.defaultPrevented = !0;
};
ic.prototype.init = function(e) {
  U(this, e || {});
};
function BR(e, t) {
  return e.apply(null, t);
}
function Uo(e) {
  return e.childNodes[0];
}
function LR(e) {
  return e.parentNode.childNodes[1];
}
function Bl(e, t, n, i, r) {
  var o = Os();
  o.setTranslate(t, n);
  var a = Os();
  a.setRotate(i || 0, 0, 0);
  var c = Os();
  c.setScale(1, 1), js(e, [o, a, c]);
}
function An(e, t, n) {
  var i = Os();
  i.setTranslate(t, n), js(e, i);
}
function B_(e, t) {
  var n = Os();
  n.setRotate(t, 0, 0), js(e, n);
}
function _i(e, t) {
  this._eventBus = e, this._elementRegistry = t;
}
_i.$inject = ["eventBus", "elementRegistry"];
_i.prototype._getChildrenContainer = function(e) {
  var t = this._elementRegistry.getGraphics(e), n;
  return e.parent ? (n = LR(t), n || (n = Me("g"), dt(n).add("djs-children"), ze(t.parentNode, n))) : n = t, n;
};
_i.prototype._clear = function(e) {
  var t = Uo(e);
  return yu(t), t;
};
_i.prototype._createContainer = function(e, t, n, i) {
  var r = Me("g");
  dt(r).add("djs-group"), typeof n < "u" ? L_(r, t, t.childNodes[n]) : ze(t, r);
  var o = Me("g");
  dt(o).add("djs-element"), dt(o).add("djs-" + e), i && dt(o).add("djs-frame"), ze(r, o);
  var a = Me("g");
  return dt(a).add("djs-visual"), ze(o, a), o;
};
_i.prototype.create = function(e, t, n) {
  var i = this._getChildrenContainer(t.parent);
  return this._createContainer(e, i, n, __(t));
};
_i.prototype.updateContainments = function(e) {
  var t = this, n = this._elementRegistry, i;
  i = li(e, function(r, o) {
    return o.parent && (r[o.parent.id] = o.parent), r;
  }, {}), z(i, function(r) {
    var o = r.children;
    if (o) {
      var a = t._getChildrenContainer(r);
      z(o.slice().reverse(), function(c) {
        var l = n.getGraphics(c);
        L_(l.parentNode, a);
      });
    }
  });
};
_i.prototype.drawShape = function(e, t, n = {}) {
  var i = this._eventBus;
  return i.fire("render.shape", { gfx: e, element: t, attrs: n });
};
_i.prototype.getShapePath = function(e) {
  var t = this._eventBus;
  return t.fire("render.getShapePath", e);
};
_i.prototype.drawConnection = function(e, t, n = {}) {
  var i = this._eventBus;
  return i.fire("render.connection", { gfx: e, element: t, attrs: n });
};
_i.prototype.getConnectionPath = function(e) {
  var t = this._eventBus;
  return t.fire("render.getConnectionPath", e);
};
_i.prototype.update = function(e, t, n) {
  if (t.parent) {
    var i = this._clear(n);
    if (e === "shape")
      this.drawShape(i, t), An(n, t.x, t.y);
    else if (e === "connection")
      this.drawConnection(i, t);
    else
      throw new Error("unknown type: " + e);
    t.hidden ? we(n, "display", "none") : we(n, "display", "block");
  }
};
_i.prototype.remove = function(e) {
  var t = this._elementRegistry.getGraphics(e);
  qt(t.parentNode);
};
function L_(e, t, n) {
  var i = n || t.firstChild;
  e !== i && t.insertBefore(e, i);
}
const IR = {
  __depends__: [iR],
  __init__: ["canvas"],
  canvas: ["type", Ze],
  elementRegistry: ["type", vi],
  elementFactory: ["type", Or],
  eventBus: ["type", ui],
  graphicsFactory: ["type", _i]
};
function $R(e) {
  var t = new m_(e);
  return t.init(), t;
}
function jR(e) {
  e = e || {};
  var t = {
    config: ["value", e]
  }, n = [t, IR].concat(e.modules || []);
  return $R(n);
}
function uo(e, t) {
  this._injector = t || jR(e), this.get("eventBus").fire("diagram.init");
}
uo.prototype.get = function(e, t) {
  return this._injector.get(e, t);
};
uo.prototype.invoke = function(e, t, n) {
  return this._injector.invoke(e, t, n);
};
uo.prototype.destroy = function() {
  this.get("eventBus").fire("diagram.destroy");
};
uo.prototype.clear = function() {
  this.get("eventBus").fire("diagram.clear");
};
function Sd() {
}
Sd.prototype.get = function(e) {
  return this.$model.properties.get(this, e);
};
Sd.prototype.set = function(e, t) {
  this.$model.properties.set(this, e, t);
};
function I_(e, t) {
  this.model = e, this.properties = t;
}
I_.prototype.createType = function(e) {
  var t = this.model, n = this.properties, i = Object.create(Sd.prototype);
  z(e.properties, function(a) {
    !a.isMany && a.default !== void 0 && (i[a.name] = a.default);
  }), n.defineModel(i, t), n.defineDescriptor(i, e);
  var r = e.ns.name;
  function o(a) {
    n.define(this, "$type", { value: r, enumerable: !0 }), n.define(this, "$attrs", { value: {} }), n.define(this, "$parent", { writable: !0 }), z(a, Qn(function(c, l) {
      this.set(l, c);
    }, this));
  }
  return o.prototype = i, o.hasType = i.$instanceOf = this.model.hasType, n.defineModel(o, t), n.defineDescriptor(o, e), o;
};
var FR = {
  String: !0,
  Boolean: !0,
  Integer: !0,
  Real: !0,
  Element: !0
}, $_ = {
  String: function(e) {
    return e;
  },
  Boolean: function(e) {
    return e === "true";
  },
  Integer: function(e) {
    return parseInt(e, 10);
  },
  Real: function(e) {
    return parseFloat(e);
  }
};
function Rd(e, t) {
  var n = $_[e];
  return n ? n(t) : t;
}
function Nf(e) {
  return !!FR[e];
}
function j_(e) {
  return !!$_[e];
}
function Wn(e, t) {
  var n = e.split(/:/), i, r;
  if (n.length === 1)
    i = e, r = t;
  else if (n.length === 2)
    i = n[1], r = n[0];
  else
    throw new Error("expected <prefix:localName> or <localName>, got " + e);
  return e = (r ? r + ":" : "") + i, {
    name: e,
    prefix: r,
    localName: i
  };
}
function bi(e) {
  this.ns = e, this.name = e.name, this.allTypes = [], this.allTypesByName = {}, this.properties = [], this.propertiesByName = {};
}
bi.prototype.build = function() {
  return Ui(this, [
    "ns",
    "name",
    "allTypes",
    "allTypesByName",
    "properties",
    "propertiesByName",
    "bodyProperty",
    "idProperty"
  ]);
};
bi.prototype.addProperty = function(e, t, n) {
  typeof t == "boolean" && (n = t, t = void 0), this.addNamedProperty(e, n !== !1);
  var i = this.properties;
  t !== void 0 ? i.splice(t, 0, e) : i.push(e);
};
bi.prototype.replaceProperty = function(e, t, n) {
  var i = e.ns, r = this.properties, o = this.propertiesByName, a = e.name !== t.name;
  if (e.isId) {
    if (!t.isId)
      throw new Error(
        "property <" + t.ns.name + "> must be id property to refine <" + e.ns.name + ">"
      );
    this.setIdProperty(t, !1);
  }
  if (e.isBody) {
    if (!t.isBody)
      throw new Error(
        "property <" + t.ns.name + "> must be body property to refine <" + e.ns.name + ">"
      );
    this.setBodyProperty(t, !1);
  }
  var c = r.indexOf(e);
  if (c === -1)
    throw new Error("property <" + i.name + "> not found in property list");
  r.splice(c, 1), this.addProperty(t, n ? void 0 : c, a), o[i.name] = o[i.localName] = t;
};
bi.prototype.redefineProperty = function(e, t, n) {
  var i = e.ns.prefix, r = t.split("#"), o = Wn(r[0], i), a = Wn(r[1], o.prefix).name, c = this.propertiesByName[a];
  if (c)
    this.replaceProperty(c, e, n);
  else
    throw new Error("refined property <" + a + "> not found");
  delete e.redefines;
};
bi.prototype.addNamedProperty = function(e, t) {
  var n = e.ns, i = this.propertiesByName;
  t && (this.assertNotDefined(e, n.name), this.assertNotDefined(e, n.localName)), i[n.name] = i[n.localName] = e;
};
bi.prototype.removeNamedProperty = function(e) {
  var t = e.ns, n = this.propertiesByName;
  delete n[t.name], delete n[t.localName];
};
bi.prototype.setBodyProperty = function(e, t) {
  if (t && this.bodyProperty)
    throw new Error(
      "body property defined multiple times (<" + this.bodyProperty.ns.name + ">, <" + e.ns.name + ">)"
    );
  this.bodyProperty = e;
};
bi.prototype.setIdProperty = function(e, t) {
  if (t && this.idProperty)
    throw new Error(
      "id property defined multiple times (<" + this.idProperty.ns.name + ">, <" + e.ns.name + ">)"
    );
  this.idProperty = e;
};
bi.prototype.assertNotTrait = function(e) {
  if ((e.extends || []).length)
    throw new Error(
      `cannot create <${e.name}> extending <${e.extends}>`
    );
};
bi.prototype.assertNotDefined = function(e, t) {
  var n = e.name, i = this.propertiesByName[n];
  if (i)
    throw new Error(
      "property <" + n + "> already defined; override of <" + i.definedBy.ns.name + "#" + i.ns.name + "> by <" + e.definedBy.ns.name + "#" + e.ns.name + "> not allowed without redefines"
    );
};
bi.prototype.hasProperty = function(e) {
  return this.propertiesByName[e];
};
bi.prototype.addTrait = function(e, t) {
  t && this.assertNotTrait(e);
  var n = this.allTypesByName, i = this.allTypes, r = e.name;
  r in n || (z(e.properties, Qn(function(o) {
    o = U({}, o, {
      name: o.ns.localName,
      inherited: t
    }), Object.defineProperty(o, "definedBy", {
      value: e
    });
    var a = o.replaces, c = o.redefines;
    a || c ? this.redefineProperty(o, a || c, a) : (o.isBody && this.setBodyProperty(o), o.isId && this.setIdProperty(o), this.addProperty(o));
  }, this)), i.push(e), n[r] = e);
};
function po(e, t) {
  this.packageMap = {}, this.typeMap = {}, this.packages = [], this.properties = t, z(e, Qn(this.registerPackage, this));
}
po.prototype.getPackage = function(e) {
  return this.packageMap[e];
};
po.prototype.getPackages = function() {
  return this.packages;
};
po.prototype.registerPackage = function(e) {
  e = U({}, e);
  var t = this.packageMap;
  ig(t, e, "prefix"), ig(t, e, "uri"), z(e.types, Qn(function(n) {
    this.registerType(n, e);
  }, this)), t[e.uri] = t[e.prefix] = e, this.packages.push(e);
};
po.prototype.registerType = function(e, t) {
  e = U({}, e, {
    superClass: (e.superClass || []).slice(),
    extends: (e.extends || []).slice(),
    properties: (e.properties || []).slice(),
    meta: U(e.meta || {})
  });
  var n = Wn(e.name, t.prefix), i = n.name, r = {};
  z(e.properties, Qn(function(o) {
    var a = Wn(o.name, n.prefix), c = a.name;
    Nf(o.type) || (o.type = Wn(o.type, a.prefix).name), U(o, {
      ns: a,
      name: c
    }), r[c] = o;
  }, this)), U(e, {
    ns: n,
    name: i,
    propertiesByName: r
  }), z(e.extends, Qn(function(o) {
    var a = Wn(o, n.prefix), c = this.typeMap[a.name];
    c.traits = c.traits || [], c.traits.push(i);
  }, this)), this.definePackage(e, t), this.typeMap[i] = e;
};
po.prototype.mapTypes = function(e, t, n) {
  var i = Nf(e.name) ? { name: e.name } : this.typeMap[e.name], r = this;
  function o(l, u) {
    var d = Wn(l, Nf(l) ? "" : e.prefix);
    r.mapTypes(d, t, u);
  }
  function a(l) {
    return o(l, !0);
  }
  function c(l) {
    return o(l, !1);
  }
  if (!i)
    throw new Error("unknown type <" + e.name + ">");
  z(i.superClass, n ? a : c), t(i, !n), z(i.traits, a);
};
po.prototype.getEffectiveDescriptor = function(e) {
  var t = Wn(e), n = new bi(t);
  this.mapTypes(t, function(r, o) {
    n.addTrait(r, o);
  });
  var i = n.build();
  return this.definePackage(i, i.allTypes[i.allTypes.length - 1].$pkg), i;
};
po.prototype.definePackage = function(e, t) {
  this.properties.define(e, "$pkg", { value: t });
};
function ig(e, t, n) {
  var i = t[n];
  if (i in e)
    throw new Error("package with " + n + " <" + i + "> already defined");
}
function na(e) {
  this.model = e;
}
na.prototype.set = function(e, t, n) {
  if (!ci(t) || !t.length)
    throw new TypeError("property name must be a non-empty string");
  var i = this.getProperty(e, t), r = i && i.name;
  HR(n) ? i ? delete e[r] : delete e.$attrs[Bf(t)] : i ? r in e ? e[r] = n : F_(e, i, n) : e.$attrs[Bf(t)] = n;
};
na.prototype.get = function(e, t) {
  var n = this.getProperty(e, t);
  if (!n)
    return e.$attrs[Bf(t)];
  var i = n.name;
  return !e[i] && n.isMany && F_(e, n, []), e[i];
};
na.prototype.define = function(e, t, n) {
  if (!n.writable) {
    var i = n.value;
    n = U({}, n, {
      get: function() {
        return i;
      }
    }), delete n.value;
  }
  Object.defineProperty(e, t, n);
};
na.prototype.defineDescriptor = function(e, t) {
  this.define(e, "$descriptor", { value: t });
};
na.prototype.defineModel = function(e, t) {
  this.define(e, "$model", { value: t });
};
na.prototype.getProperty = function(e, t) {
  var n = this.model, i = n.getPropertyDescriptor(e, t);
  if (i)
    return i;
  if (t.includes(":"))
    return null;
  const r = n.config.strict;
  if (typeof r < "u") {
    const o = new TypeError(`unknown property <${t}> on <${e.$type}>`);
    if (r)
      throw o;
    typeof console < "u" && console.warn(o);
  }
  return null;
};
function HR(e) {
  return typeof e > "u";
}
function F_(e, t, n) {
  Object.defineProperty(e, t.name, {
    enumerable: !t.isReference,
    writable: !0,
    value: n,
    configurable: !0
  });
}
function Bf(e) {
  return e.replace(/^:/, "");
}
function Mi(e, t = {}) {
  this.properties = new na(this), this.factory = new I_(this, this.properties), this.registry = new po(e, this.properties), this.typeCache = {}, this.config = t;
}
Mi.prototype.create = function(e, t) {
  var n = this.getType(e);
  if (!n)
    throw new Error("unknown type <" + e + ">");
  return new n(t);
};
Mi.prototype.getType = function(e) {
  var t = this.typeCache, n = ci(e) ? e : e.ns.name, i = t[n];
  return i || (e = this.registry.getEffectiveDescriptor(n), i = t[n] = this.factory.createType(e)), i;
};
Mi.prototype.createAny = function(e, t, n) {
  var i = Wn(e), r = {
    $type: e,
    $instanceOf: function(a) {
      return a === this.$type;
    },
    get: function(a) {
      return this[a];
    },
    set: function(a, c) {
      fS(this, [a], c);
    }
  }, o = {
    name: e,
    isGeneric: !0,
    ns: {
      prefix: i.prefix,
      localName: i.localName,
      uri: t
    }
  };
  return this.properties.defineDescriptor(r, o), this.properties.defineModel(r, this), this.properties.define(r, "get", { enumerable: !1, writable: !0 }), this.properties.define(r, "set", { enumerable: !1, writable: !0 }), this.properties.define(r, "$parent", { enumerable: !1, writable: !0 }), this.properties.define(r, "$instanceOf", { enumerable: !1, writable: !0 }), z(n, function(a, c) {
    vn(a) && a.value !== void 0 ? r[a.name] = a.value : r[c] = a;
  }), r;
};
Mi.prototype.getPackage = function(e) {
  return this.registry.getPackage(e);
};
Mi.prototype.getPackages = function() {
  return this.registry.getPackages();
};
Mi.prototype.getElementDescriptor = function(e) {
  return e.$descriptor;
};
Mi.prototype.hasType = function(e, t) {
  t === void 0 && (t = e, e = this);
  var n = e.$model.getElementDescriptor(e);
  return t in n.allTypesByName;
};
Mi.prototype.getPropertyDescriptor = function(e, t) {
  return this.getElementDescriptor(e).propertiesByName[t];
};
Mi.prototype.getTypeDescriptor = function(e) {
  return this.registry.typeMap[e];
};
var rg = String.fromCharCode, zR = Object.prototype.hasOwnProperty, VR = /&#(\d+);|&#x([0-9a-f]+);|&(\w+);/ig, Bs = {
  amp: "&",
  apos: "'",
  gt: ">",
  lt: "<",
  quot: '"'
};
Object.keys(Bs).forEach(function(e) {
  Bs[e.toUpperCase()] = Bs[e];
});
function WR(e, t, n, i) {
  return i ? zR.call(Bs, i) ? Bs[i] : "&" + i + ";" : rg(t || parseInt(n, 16));
}
function Io(e) {
  return e.length > 3 && e.indexOf("&") !== -1 ? e.replace(VR, WR) : e;
}
var GR = "http://www.w3.org/2001/XMLSchema-instance", UR = "xsi", og = "xsi:type", ag = "non-whitespace outside of root node";
function Ra(e) {
  return new Error(e);
}
function sg(e) {
  return "missing namespace for prefix <" + e + ">";
}
function al(e) {
  return {
    get: e,
    enumerable: !0
  };
}
function YR(e) {
  var t = {}, n;
  for (n in e)
    t[n] = e[n];
  return t;
}
function Lf(e) {
  return e + "$uri";
}
function KR(e) {
  var t = {}, n, i;
  for (n in e)
    i = e[n], t[i] = i, t[Lf(i)] = n;
  return t;
}
function cg() {
  return { line: 0, column: 0 };
}
function qR(e) {
  throw e;
}
function H_(e) {
  if (!this)
    return new H_(e);
  var t = e && e.proxy, n, i, r, o, a = qR, c, l, u, d, f = cg, y = !1, g = !1, _ = null, x = !1, w;
  function B(A) {
    A instanceof Error || (A = Ra(A)), _ = A, a(A, f);
  }
  function N(A) {
    c && (A instanceof Error || (A = Ra(A)), c(A, f));
  }
  this.on = function(A, D) {
    if (typeof D != "function")
      throw Ra("required args <name, cb>");
    switch (A) {
      case "openTag":
        i = D;
        break;
      case "text":
        n = D;
        break;
      case "closeTag":
        r = D;
        break;
      case "error":
        a = D;
        break;
      case "warn":
        c = D;
        break;
      case "cdata":
        o = D;
        break;
      case "attention":
        d = D;
        break;
      case "question":
        u = D;
        break;
      case "comment":
        l = D;
        break;
      default:
        throw Ra("unsupported event: " + A);
    }
    return this;
  }, this.ns = function(A) {
    if (typeof A > "u" && (A = {}), typeof A != "object")
      throw Ra("required args <nsMap={}>");
    var D = {}, j;
    for (j in A)
      D[j] = A[j];
    return D[GR] = UR, g = !0, w = D, this;
  }, this.parse = function(A) {
    if (typeof A != "string")
      throw Ra("required args <xml=string>");
    return _ = null, k(A), f = cg, x = !1, _;
  }, this.stop = function() {
    x = !0;
  };
  function k(A) {
    var D = g ? [] : null, j = g ? KR(w) : null, W, $ = [], Z = 0, X = !1, V = !1, ae = 0, ie = 0, Ae, Rt, it, Ve, Zt, sn, Pt, Kt, oe, se = "", fe = 0, ct;
    function Lt() {
      if (ct !== null)
        return ct;
      var Ne, I, E, C = g && j.xmlns, F = g && y ? [] : null, K = fe, ne = se, ke = ne.length, Qe, Ee, at, Mt, ht, $n = {}, Ii = {}, bn, Be, ft;
      e:
        for (; K < ke; K++)
          if (bn = !1, Be = ne.charCodeAt(K), !(Be === 32 || Be < 14 && Be > 8)) {
            for ((Be < 65 || Be > 122 || Be > 90 && Be < 97) && Be !== 95 && Be !== 58 && (N("illegal first char attribute name"), bn = !0), ft = K + 1; ft < ke; ft++)
              if (Be = ne.charCodeAt(ft), !(Be > 96 && Be < 123 || Be > 64 && Be < 91 || Be > 47 && Be < 59 || Be === 46 || // '.'
              Be === 45 || // '-'
              Be === 95)) {
                if (Be === 32 || Be < 14 && Be > 8) {
                  N("missing attribute value"), K = ft;
                  continue e;
                }
                if (Be === 61)
                  break;
                N("illegal attribute name char"), bn = !0;
              }
            if (ht = ne.substring(K, ft), ht === "xmlns:xmlns" && (N("illegal declaration of xmlns"), bn = !0), Be = ne.charCodeAt(ft + 1), Be === 34)
              ft = ne.indexOf('"', K = ft + 2), ft === -1 && (ft = ne.indexOf("'", K), ft !== -1 && (N("attribute value quote missmatch"), bn = !0));
            else if (Be === 39)
              ft = ne.indexOf("'", K = ft + 2), ft === -1 && (ft = ne.indexOf('"', K), ft !== -1 && (N("attribute value quote missmatch"), bn = !0));
            else
              for (N("missing attribute value quotes"), bn = !0, ft = ft + 1; ft < ke && (Be = ne.charCodeAt(ft + 1), !(Be === 32 || Be < 14 && Be > 8)); ft++)
                ;
            for (ft === -1 && (N("missing closing quotes"), ft = ke, bn = !0), bn || (at = ne.substring(K, ft)), K = ft; ft + 1 < ke && (Be = ne.charCodeAt(ft + 1), !(Be === 32 || Be < 14 && Be > 8)); ft++)
              K === ft && (N("illegal character after attribute end"), bn = !0);
            if (K = ft + 1, bn)
              continue e;
            if (ht in Ii) {
              N("attribute <" + ht + "> already defined");
              continue;
            }
            if (Ii[ht] = !0, !g) {
              $n[ht] = at;
              continue;
            }
            if (y) {
              if (Ee = ht === "xmlns" ? "xmlns" : ht.charCodeAt(0) === 120 && ht.substr(0, 6) === "xmlns:" ? ht.substr(6) : null, Ee !== null) {
                if (Ne = Io(at), I = Lf(Ee), Mt = w[Ne], !Mt) {
                  if (Ee === "xmlns" || I in j && j[I] !== Ne)
                    do
                      Mt = "ns" + Z++;
                    while (typeof j[Mt] < "u");
                  else
                    Mt = Ee;
                  w[Ne] = Mt;
                }
                j[Ee] !== Mt && (Qe || (j = YR(j), Qe = !0), j[Ee] = Mt, Ee === "xmlns" && (j[Lf(Mt)] = Ne, C = Mt), j[I] = Ne), $n[ht] = at;
                continue;
              }
              F.push(ht, at);
              continue;
            }
            if (Be = ht.indexOf(":"), Be === -1) {
              $n[ht] = at;
              continue;
            }
            if (!(E = j[ht.substring(0, Be)])) {
              N(sg(ht.substring(0, Be)));
              continue;
            }
            ht = C === E ? ht.substr(Be + 1) : E + ht.substr(Be), ht === og && (Be = at.indexOf(":"), Be !== -1 ? (E = at.substring(0, Be), E = j[E] || E, at = E + at.substring(Be)) : at = C + ":" + at), $n[ht] = at;
          }
      if (y)
        for (K = 0, ke = F.length; K < ke; K++) {
          if (ht = F[K++], at = F[K], Be = ht.indexOf(":"), Be !== -1) {
            if (!(E = j[ht.substring(0, Be)])) {
              N(sg(ht.substring(0, Be)));
              continue;
            }
            ht = C === E ? ht.substr(Be + 1) : E + ht.substr(Be), ht === og && (Be = at.indexOf(":"), Be !== -1 ? (E = at.substring(0, Be), E = j[E] || E, at = E + at.substring(Be)) : at = C + ":" + at);
          }
          $n[ht] = at;
        }
      return ct = $n;
    }
    function Et() {
      for (var Ne = /(\r\n|\r|\n)/g, I = 0, E = 0, C = 0, F = ie, K, ne; ae >= C && (K = Ne.exec(A), !(!K || (F = K[0].length + K.index, F > ae))); )
        I += 1, C = F;
      return ae == -1 ? (E = F, ne = A.substring(ie)) : ie === 0 ? ne = A.substring(ie, ae) : (E = ae - C, ne = ie == -1 ? A.substring(ae) : A.substring(ae, ie + 1)), {
        data: ne,
        line: I,
        column: E
      };
    }
    for (f = Et, t && (oe = Object.create({}, {
      name: al(function() {
        return Pt;
      }),
      originalName: al(function() {
        return Kt;
      }),
      attrs: al(Lt),
      ns: al(function() {
        return j;
      })
    })); ie !== -1; ) {
      if (A.charCodeAt(ie) === 60 ? ae = ie : ae = A.indexOf("<", ie), ae === -1) {
        if ($.length)
          return B("unexpected end of file");
        if (ie === 0)
          return B("missing start tag");
        ie < A.length && A.substring(ie).trim() && N(ag);
        return;
      }
      if (ie !== ae) {
        if ($.length) {
          if (n && (n(A.substring(ie, ae), Io, f), x))
            return;
        } else if (A.substring(ie, ae).trim() && (N(ag), x))
          return;
      }
      if (Ve = A.charCodeAt(ae + 1), Ve === 33) {
        if (it = A.charCodeAt(ae + 2), it === 91 && A.substr(ae + 3, 6) === "CDATA[") {
          if (ie = A.indexOf("]]>", ae), ie === -1)
            return B("unclosed cdata");
          if (o && (o(A.substring(ae + 9, ie), f), x))
            return;
          ie += 3;
          continue;
        }
        if (it === 45 && A.charCodeAt(ae + 3) === 45) {
          if (ie = A.indexOf("-->", ae), ie === -1)
            return B("unclosed comment");
          if (l && (l(A.substring(ae + 4, ie), Io, f), x))
            return;
          ie += 3;
          continue;
        }
      }
      if (Ve === 63) {
        if (ie = A.indexOf("?>", ae), ie === -1)
          return B("unclosed question");
        if (u && (u(A.substring(ae, ie + 2), f), x))
          return;
        ie += 2;
        continue;
      }
      for (Ae = ae + 1; ; Ae++) {
        if (Zt = A.charCodeAt(Ae), isNaN(Zt))
          return ie = -1, B("unclosed tag");
        if (Zt === 34)
          it = A.indexOf('"', Ae + 1), Ae = it !== -1 ? it : Ae;
        else if (Zt === 39)
          it = A.indexOf("'", Ae + 1), Ae = it !== -1 ? it : Ae;
        else if (Zt === 62) {
          ie = Ae;
          break;
        }
      }
      if (Ve === 33) {
        if (d && (d(A.substring(ae, ie + 1), Io, f), x))
          return;
        ie += 1;
        continue;
      }
      if (ct = {}, Ve === 47) {
        if (X = !1, V = !0, !$.length)
          return B("missing open tag");
        if (Ae = Pt = $.pop(), it = ae + 2 + Ae.length, A.substring(ae + 2, it) !== Ae)
          return B("closing tag mismatch");
        for (; it < ie; it++)
          if (Ve = A.charCodeAt(it), !(Ve === 32 || Ve > 8 && Ve < 14))
            return B("close tag");
      } else {
        if (A.charCodeAt(ie - 1) === 47 ? (Ae = Pt = A.substring(ae + 1, ie - 1), X = !0, V = !0) : (Ae = Pt = A.substring(ae + 1, ie), X = !0, V = !1), !(Ve > 96 && Ve < 123 || Ve > 64 && Ve < 91 || Ve === 95 || Ve === 58))
          return B("illegal first char nodeName");
        for (it = 1, Rt = Ae.length; it < Rt; it++)
          if (Ve = Ae.charCodeAt(it), !(Ve > 96 && Ve < 123 || Ve > 64 && Ve < 91 || Ve > 47 && Ve < 59 || Ve === 45 || Ve === 95 || Ve == 46)) {
            if (Ve === 32 || Ve < 14 && Ve > 8) {
              Pt = Ae.substring(0, it), ct = null;
              break;
            }
            return B("invalid nodeName");
          }
        V || $.push(Pt);
      }
      if (g) {
        if (W = j, X && (V || D.push(W), ct === null && (y = Ae.indexOf("xmlns", it) !== -1) && (fe = it, se = Ae, Lt(), y = !1)), Kt = Pt, Ve = Pt.indexOf(":"), Ve !== -1) {
          if (sn = j[Pt.substring(0, Ve)], !sn)
            return B("missing namespace on <" + Kt + ">");
          Pt = Pt.substr(Ve + 1);
        } else
          sn = j.xmlns;
        sn && (Pt = sn + ":" + Pt);
      }
      if (X && (fe = it, se = Ae, i && (t ? i(oe, Io, V, f) : i(Pt, Lt, Io, V, f), x)))
        return;
      if (V) {
        if (r && (r(t ? oe : Pt, Io, X, f), x))
          return;
        g && (X ? j = W : j = D.pop());
      }
      ie += 1;
    }
  }
}
function z_(e) {
  return e.xml && e.xml.tagAlias === "lowerCase";
}
var XR = {
  xsi: "http://www.w3.org/2001/XMLSchema-instance",
  xml: "http://www.w3.org/XML/1998/namespace"
}, xu = "xsi:type";
function V_(e) {
  return e.xml && e.xml.serialize;
}
function W_(e) {
  return V_(e) === xu;
}
function ZR(e) {
  return V_(e) === "property";
}
function JR(e) {
  return e.charAt(0).toUpperCase() + e.slice(1);
}
function G_(e, t) {
  return z_(t) ? e.prefix + ":" + JR(e.localName) : e.name;
}
function QR(e, t) {
  var n = e.name, i = e.localName, r = t.xml && t.xml.typePrefix;
  return r && i.indexOf(r) === 0 ? e.prefix + ":" + i.slice(r.length) : n;
}
function eC(e, t) {
  var n = Wn(e), i = t.getPackage(n.prefix);
  return QR(n, i);
}
function ao(e) {
  return new Error(e);
}
function Tr(e) {
  return e.$descriptor;
}
function tC(e) {
  U(this, e), this.elementsById = {}, this.references = [], this.warnings = [], this.addReference = function(t) {
    this.references.push(t);
  }, this.addElement = function(t) {
    if (!t)
      throw ao("expected element");
    var n = this.elementsById, i = Tr(t), r = i.idProperty, o;
    if (r && (o = t.get(r.name), o)) {
      if (!/^([a-z][\w-.]*:)?[a-z_][\w-.]*$/i.test(o))
        throw new Error("illegal ID <" + o + ">");
      if (n[o])
        throw ao("duplicate ID <" + o + ">");
      n[o] = t;
    }
  }, this.addWarning = function(t) {
    this.warnings.push(t);
  };
}
function rc() {
}
rc.prototype.handleEnd = function() {
};
rc.prototype.handleText = function() {
};
rc.prototype.handleNode = function() {
};
function Cd() {
}
Cd.prototype = Object.create(rc.prototype);
Cd.prototype.handleNode = function() {
  return this;
};
function Ya() {
}
Ya.prototype = Object.create(rc.prototype);
Ya.prototype.handleText = function(e) {
  this.body = (this.body || "") + e;
};
function oc(e, t) {
  this.property = e, this.context = t;
}
oc.prototype = Object.create(Ya.prototype);
oc.prototype.handleNode = function(e) {
  if (this.element)
    throw ao("expected no sub nodes");
  return this.element = this.createReference(e), this;
};
oc.prototype.handleEnd = function() {
  this.element.id = this.body;
};
oc.prototype.createReference = function(e) {
  return {
    property: this.property.ns.name,
    id: ""
  };
};
function Ad(e, t) {
  this.element = t, this.propertyDesc = e;
}
Ad.prototype = Object.create(Ya.prototype);
Ad.prototype.handleEnd = function() {
  var e = this.body || "", t = this.element, n = this.propertyDesc;
  e = Rd(n.type, e), n.isMany ? t.get(n.name).push(e) : t.set(n.name, e);
};
function Eu() {
}
Eu.prototype = Object.create(Ya.prototype);
Eu.prototype.handleNode = function(e) {
  var t = this, n = this.element;
  return n ? t = this.handleChild(e) : (n = this.element = this.createElement(e), this.context.addElement(n)), t;
};
function Gn(e, t, n) {
  this.model = e, this.type = e.getType(t), this.context = n;
}
Gn.prototype = Object.create(Eu.prototype);
Gn.prototype.addReference = function(e) {
  this.context.addReference(e);
};
Gn.prototype.handleText = function(e) {
  var t = this.element, n = Tr(t), i = n.bodyProperty;
  if (!i)
    throw ao("unexpected body text <" + e + ">");
  Ya.prototype.handleText.call(this, e);
};
Gn.prototype.handleEnd = function() {
  var e = this.body, t = this.element, n = Tr(t), i = n.bodyProperty;
  i && e !== void 0 && (e = Rd(i.type, e), t.set(i.name, e));
};
Gn.prototype.createElement = function(e) {
  var t = e.attributes, n = this.type, i = Tr(n), r = this.context, o = new n({}), a = this.model, c;
  return z(t, function(l, u) {
    var d = i.propertiesByName[u], f;
    d && d.isReference ? d.isMany ? (f = l.split(" "), z(f, function(y) {
      r.addReference({
        element: o,
        property: d.ns.name,
        id: y
      });
    })) : r.addReference({
      element: o,
      property: d.ns.name,
      id: l
    }) : (d ? l = Rd(d.type, l) : u !== "xmlns" && (c = Wn(u, i.ns.prefix), a.getPackage(c.prefix) && r.addWarning({
      message: "unknown attribute <" + u + ">",
      element: o,
      property: u,
      value: l
    })), o.set(u, l));
  }), o;
};
Gn.prototype.getPropertyForNode = function(e) {
  var t = e.name, n = Wn(t), i = this.type, r = this.model, o = Tr(i), a = n.name, c = o.propertiesByName[a], l, u;
  if (c && !c.isAttr)
    return W_(c) && (l = e.attributes[xu], l) ? (l = eC(l, r), u = r.getType(l), U({}, c, {
      effectiveType: Tr(u).name
    })) : c;
  var d = r.getPackage(n.prefix);
  if (d) {
    if (l = G_(n, d), u = r.getType(l), c = gt(o.properties, function(f) {
      return !f.isVirtual && !f.isReference && !f.isAttribute && u.hasType(f.type);
    }), c)
      return U({}, c, {
        effectiveType: Tr(u).name
      });
  } else if (c = gt(o.properties, function(f) {
    return !f.isReference && !f.isAttribute && f.type === "Element";
  }), c)
    return c;
  throw ao("unrecognized element <" + n.name + ">");
};
Gn.prototype.toString = function() {
  return "ElementDescriptor[" + Tr(this.type).name + "]";
};
Gn.prototype.valueHandler = function(e, t) {
  return new Ad(e, t);
};
Gn.prototype.referenceHandler = function(e) {
  return new oc(e, this.context);
};
Gn.prototype.handler = function(e) {
  return e === "Element" ? new ja(this.model, e, this.context) : new Gn(this.model, e, this.context);
};
Gn.prototype.handleChild = function(e) {
  var t, n, i, r;
  if (t = this.getPropertyForNode(e), i = this.element, n = t.effectiveType || t.type, j_(n))
    return this.valueHandler(t, i);
  t.isReference ? r = this.referenceHandler(t).handleNode(e) : r = this.handler(n).handleNode(e);
  var o = r.element;
  return o !== void 0 && (t.isMany ? i.get(t.name).push(o) : i.set(t.name, o), t.isReference ? (U(o, {
    element: i
  }), this.context.addReference(o)) : o.$parent = i), r;
};
function Pd(e, t, n) {
  Gn.call(this, e, t, n);
}
Pd.prototype = Object.create(Gn.prototype);
Pd.prototype.createElement = function(e) {
  var t = e.name, n = Wn(t), i = this.model, r = this.type, o = i.getPackage(n.prefix), a = o && G_(n, o) || t;
  if (!r.hasType(a))
    throw ao("unexpected element <" + e.originalName + ">");
  return Gn.prototype.createElement.call(this, e);
};
function ja(e, t, n) {
  this.model = e, this.context = n;
}
ja.prototype = Object.create(Eu.prototype);
ja.prototype.createElement = function(e) {
  var t = e.name, n = Wn(t), i = n.prefix, r = e.ns[i + "$uri"], o = e.attributes;
  return this.model.createAny(t, r, o);
};
ja.prototype.handleChild = function(e) {
  var t = new ja(this.model, "Element", this.context).handleNode(e), n = this.element, i = t.element, r;
  return i !== void 0 && (r = n.$children = n.$children || [], r.push(i), i.$parent = n), t;
};
ja.prototype.handleEnd = function() {
  this.body && (this.element.$body = this.body);
};
function Td(e) {
  e instanceof Mi && (e = {
    model: e
  }), U(this, { lax: !1 }, e);
}
Td.prototype.fromXML = function(e, t, n) {
  var i = t.rootHandler;
  t instanceof Gn ? (i = t, t = {}) : typeof t == "string" ? (i = this.handler(t), t = {}) : typeof i == "string" && (i = this.handler(i));
  var r = this.model, o = this.lax, a = new tC(U({}, t, { rootHandler: i })), c = new H_({ proxy: !0 }), l = nC();
  i.context = a, l.push(i);
  function u(D, j, W) {
    var $ = j(), Z = $.line, X = $.column, V = $.data;
    V.charAt(0) === "<" && V.indexOf(" ") !== -1 && (V = V.slice(0, V.indexOf(" ")) + ">");
    var ae = "unparsable content " + (V ? V + " " : "") + `detected
	line: ` + Z + `
	column: ` + X + `
	nested error: ` + D.message;
    if (W)
      return a.addWarning({
        message: ae,
        error: D
      }), !0;
    throw ao(ae);
  }
  function d(D, j) {
    return u(D, j, !0);
  }
  function f() {
    var D = a.elementsById, j = a.references, W, $;
    for (W = 0; $ = j[W]; W++) {
      var Z = $.element, X = D[$.id], V = Tr(Z).propertiesByName[$.property];
      if (X || a.addWarning({
        message: "unresolved reference <" + $.id + ">",
        element: $.element,
        property: $.property,
        value: $.id
      }), V.isMany) {
        var ae = Z.get(V.name), ie = ae.indexOf($);
        ie === -1 && (ie = ae.length), X ? ae[ie] = X : ae.splice(ie, 1);
      } else
        Z.set(V.name, X);
    }
  }
  function y() {
    l.pop().handleEnd();
  }
  var g = /^<\?xml /i, _ = / encoding="([^"]+)"/i, x = /^utf-8$/i;
  function w(D) {
    if (g.test(D)) {
      var j = _.exec(D), W = j && j[1];
      !W || x.test(W) || a.addWarning({
        message: "unsupported document encoding <" + W + ">, falling back to UTF-8"
      });
    }
  }
  function B(D, j) {
    var W = l.peek();
    try {
      l.push(W.handleNode(D));
    } catch ($) {
      u($, j, o) && l.push(new Cd());
    }
  }
  function N(D, j) {
    try {
      l.peek().handleText(D);
    } catch (W) {
      d(W, j);
    }
  }
  function k(D, j) {
    D.trim() && N(D, j);
  }
  var A = r.getPackages().reduce(function(D, j) {
    return D[j.uri] = j.prefix, D;
  }, {
    "http://www.w3.org/XML/1998/namespace": "xml"
    // add default xml ns
  });
  return c.ns(A).on("openTag", function(D, j, W, $) {
    var Z = D.attrs || {}, X = Object.keys(Z).reduce(function(ae, ie) {
      var Ae = j(Z[ie]);
      return ae[ie] = Ae, ae;
    }, {}), V = {
      name: D.name,
      originalName: D.originalName,
      attributes: X,
      ns: D.ns
    };
    B(V, $);
  }).on("question", w).on("closeTag", y).on("cdata", N).on("text", function(D, j, W) {
    k(j(D), W);
  }).on("error", u).on("warn", d), new Promise(function(D, j) {
    var W;
    try {
      c.parse(e), f();
    } catch (ae) {
      W = ae;
    }
    var $ = i.element;
    !W && !$ && (W = ao("failed to parse document as <" + i.type.$descriptor.name + ">"));
    var Z = a.warnings, X = a.references, V = a.elementsById;
    return W ? (W.warnings = Z, j(W)) : D({
      rootElement: $,
      elementsById: V,
      references: X,
      warnings: Z
    });
  });
};
Td.prototype.handler = function(e) {
  return new Pd(this.model, e);
};
function nC() {
  var e = [];
  return Object.defineProperty(e, "peek", {
    value: function() {
      return this[this.length - 1];
    }
  }), e;
}
var iC = `<?xml version="1.0" encoding="UTF-8"?>
`, rC = /<|>|'|"|&|\n\r|\n/g, U_ = /<|>|&/g;
function oC(e) {
  var t = {}, n = {}, i = {}, r = [], o = [];
  this.byUri = function(a) {
    return n[a] || e && e.byUri(a);
  }, this.add = function(a, c) {
    n[a.uri] = a, c ? r.push(a) : o.push(a), this.mapPrefix(a.prefix, a.uri);
  }, this.uriByPrefix = function(a) {
    return t[a || "xmlns"];
  }, this.mapPrefix = function(a, c) {
    t[a || "xmlns"] = c;
  }, this.getNSKey = function(a) {
    return a.prefix !== void 0 ? a.uri + "|" + a.prefix : a.uri;
  }, this.logUsed = function(a) {
    var c = a.uri, l = this.getNSKey(a);
    i[l] = this.byUri(c), e && e.logUsed(a);
  }, this.getUsed = function(a) {
    function c(d) {
      var f = l.getNSKey(d);
      return i[f];
    }
    var l = this, u = [].concat(r, o);
    return u.filter(c);
  };
}
function aC(e) {
  return e.charAt(0).toLowerCase() + e.slice(1);
}
function sC(e, t) {
  return z_(t) ? aC(e) : e;
}
function Y_(e, t) {
  e.super_ = t, e.prototype = Object.create(t.prototype, {
    constructor: {
      value: e,
      enumerable: !1,
      writable: !0,
      configurable: !0
    }
  });
}
function K_(e) {
  return ci(e) ? e : (e.prefix ? e.prefix + ":" : "") + e.localName;
}
function cC(e) {
  return e.getUsed().filter(function(t) {
    return t.prefix !== "xml";
  }).map(function(t) {
    var n = "xmlns" + (t.prefix ? ":" + t.prefix : "");
    return { name: n, value: t.uri };
  });
}
function lC(e, t) {
  return t.isGeneric ? U({ localName: t.ns.localName }, e) : U({ localName: sC(t.ns.localName, t.$pkg) }, e);
}
function uC(e, t) {
  return U({ localName: t.ns.localName }, e);
}
function pC(e) {
  var t = e.$descriptor;
  return tt(t.properties, function(n) {
    var i = n.name;
    if (n.isVirtual || !Jn(e, i))
      return !1;
    var r = e[i];
    return r === n.default || r === null ? !1 : n.isMany ? r.length : !0;
  });
}
var fC = {
  "\n": "#10",
  "\n\r": "#10",
  '"': "#34",
  "'": "#39",
  "<": "#60",
  ">": "#62",
  "&": "#38"
}, dC = {
  "<": "lt",
  ">": "gt",
  "&": "amp"
};
function q_(e, t, n) {
  return e = ci(e) ? e : "" + e, e.replace(t, function(i) {
    return "&" + n[i] + ";";
  });
}
function hC(e) {
  return q_(e, rC, fC);
}
function mC(e) {
  return q_(e, U_, dC);
}
function yC(e) {
  return tt(e, function(t) {
    return t.isAttr;
  });
}
function gC(e) {
  return tt(e, function(t) {
    return !t.isAttr;
  });
}
function kd(e) {
  this.tagName = e;
}
kd.prototype.build = function(e) {
  return this.element = e, this;
};
kd.prototype.serializeTo = function(e) {
  e.appendIndent().append("<" + this.tagName + ">" + this.element.id + "</" + this.tagName + ">").appendNewLine();
};
function qo() {
}
qo.prototype.serializeValue = qo.prototype.serializeTo = function(e) {
  e.append(
    this.escape ? mC(this.value) : this.value
  );
};
qo.prototype.build = function(e, t) {
  return this.value = t, e.type === "String" && t.search(U_) !== -1 && (this.escape = !0), this;
};
function Md(e) {
  this.tagName = e;
}
Y_(Md, qo);
Md.prototype.serializeTo = function(e) {
  e.appendIndent().append("<" + this.tagName + ">"), this.serializeValue(e), e.append("</" + this.tagName + ">").appendNewLine();
};
function Ht(e, t) {
  this.body = [], this.attrs = [], this.parent = e, this.propertyDescriptor = t;
}
Ht.prototype.build = function(e) {
  this.element = e;
  var t = e.$descriptor, n = this.propertyDescriptor, i, r, o = t.isGeneric;
  return o ? i = this.parseGeneric(e) : i = this.parseNsAttributes(e), n ? this.ns = this.nsPropertyTagName(n) : this.ns = this.nsTagName(t), this.tagName = this.addTagName(this.ns), o || (r = pC(e), this.parseAttributes(yC(r)), this.parseContainments(gC(r))), this.parseGenericAttributes(e, i), this;
};
Ht.prototype.nsTagName = function(e) {
  var t = this.logNamespaceUsed(e.ns);
  return lC(t, e);
};
Ht.prototype.nsPropertyTagName = function(e) {
  var t = this.logNamespaceUsed(e.ns);
  return uC(t, e);
};
Ht.prototype.isLocalNs = function(e) {
  return e.uri === this.ns.uri;
};
Ht.prototype.nsAttributeName = function(e) {
  var t;
  if (ci(e) ? t = Wn(e) : t = e.ns, e.inherited)
    return { localName: t.localName };
  var n = this.logNamespaceUsed(t);
  return this.getNamespaces().logUsed(n), this.isLocalNs(n) ? { localName: t.localName } : U({ localName: t.localName }, n);
};
Ht.prototype.parseGeneric = function(e) {
  var t = this, n = this.body, i = [];
  return z(e, function(r, o) {
    var a;
    o === "$body" ? n.push(new qo().build({ type: "String" }, r)) : o === "$children" ? z(r, function(c) {
      n.push(new Ht(t).build(c));
    }) : o.indexOf("$") !== 0 && (a = t.parseNsAttribute(e, o, r), a && i.push({ name: o, value: r }));
  }), i;
};
Ht.prototype.parseNsAttribute = function(e, t, n) {
  var i = e.$model, r = Wn(t), o;
  if (r.prefix === "xmlns" && (o = { prefix: r.localName, uri: n }), !r.prefix && r.localName === "xmlns" && (o = { uri: n }), !o)
    return {
      name: t,
      value: n
    };
  if (i && i.getPackage(n))
    this.logNamespace(o, !0, !0);
  else {
    var a = this.logNamespaceUsed(o, !0);
    this.getNamespaces().logUsed(a);
  }
};
Ht.prototype.parseNsAttributes = function(e, t) {
  var n = this, i = e.$attrs, r = [];
  return z(i, function(o, a) {
    var c = n.parseNsAttribute(e, a, o);
    c && r.push(c);
  }), r;
};
Ht.prototype.parseGenericAttributes = function(e, t) {
  var n = this;
  z(t, function(i) {
    if (i.name !== xu)
      try {
        n.addAttribute(n.nsAttributeName(i.name), i.value);
      } catch (r) {
        console.warn(
          "missing namespace information for ",
          i.name,
          "=",
          i.value,
          "on",
          e,
          r
        );
      }
  });
};
Ht.prototype.parseContainments = function(e) {
  var t = this, n = this.body, i = this.element;
  z(e, function(r) {
    var o = i.get(r.name), a = r.isReference, c = r.isMany;
    if (c || (o = [o]), r.isBody)
      n.push(new qo().build(r, o[0]));
    else if (j_(r.type))
      z(o, function(d) {
        n.push(new Md(t.addTagName(t.nsPropertyTagName(r))).build(r, d));
      });
    else if (a)
      z(o, function(d) {
        n.push(new kd(t.addTagName(t.nsPropertyTagName(r))).build(d));
      });
    else {
      var l = W_(r), u = ZR(r);
      z(o, function(d) {
        var f;
        l ? f = new wu(t, r) : u ? f = new Ht(t, r) : f = new Ht(t), n.push(f.build(d));
      });
    }
  });
};
Ht.prototype.getNamespaces = function(e) {
  var t = this.namespaces, n = this.parent, i;
  return t || (i = n && n.getNamespaces(), e || !i ? this.namespaces = t = new oC(i) : t = i), t;
};
Ht.prototype.logNamespace = function(e, t, n) {
  var i = this.getNamespaces(n), r = e.uri, o = e.prefix, a = i.byUri(r);
  return (!a || n) && i.add(e, t), i.mapPrefix(o, r), e;
};
Ht.prototype.logNamespaceUsed = function(e, t) {
  var n = this.element, i = n.$model, r = this.getNamespaces(t), o = e.prefix, a = e.uri, c, l, u;
  if (!o && !a)
    return { localName: e.localName };
  if (u = XR[o] || i && (i.getPackage(o) || {}).uri, a = a || u || r.uriByPrefix(o), !a)
    throw new Error("no namespace uri given for prefix <" + o + ">");
  if (e = r.byUri(a), !e) {
    for (c = o, l = 1; r.uriByPrefix(c); )
      c = o + "_" + l++;
    e = this.logNamespace({ prefix: c, uri: a }, u === a);
  }
  return o && r.mapPrefix(o, a), e;
};
Ht.prototype.parseAttributes = function(e) {
  var t = this, n = this.element;
  z(e, function(i) {
    var r = n.get(i.name);
    if (i.isReference)
      if (!i.isMany)
        r = r.id;
      else {
        var o = [];
        z(r, function(a) {
          o.push(a.id);
        }), r = o.join(" ");
      }
    t.addAttribute(t.nsAttributeName(i), r);
  });
};
Ht.prototype.addTagName = function(e) {
  var t = this.logNamespaceUsed(e);
  return this.getNamespaces().logUsed(t), K_(e);
};
Ht.prototype.addAttribute = function(e, t) {
  var n = this.attrs;
  ci(t) && (t = hC(t));
  var i = r_(n, function(o) {
    return o.name.localName === e.localName && o.name.uri === e.uri && o.name.prefix === e.prefix;
  }), r = { name: e, value: t };
  i !== -1 ? n.splice(i, 1, r) : n.push(r);
};
Ht.prototype.serializeAttributes = function(e) {
  var t = this.attrs, n = this.namespaces;
  n && (t = cC(n).concat(t)), z(t, function(i) {
    e.append(" ").append(K_(i.name)).append('="').append(i.value).append('"');
  });
};
Ht.prototype.serializeTo = function(e) {
  var t = this.body[0], n = t && t.constructor !== qo;
  e.appendIndent().append("<" + this.tagName), this.serializeAttributes(e), e.append(t ? ">" : " />"), t && (n && e.appendNewLine().indent(), z(this.body, function(i) {
    i.serializeTo(e);
  }), n && e.unindent().appendIndent(), e.append("</" + this.tagName + ">")), e.appendNewLine();
};
function wu(e, t) {
  Ht.call(this, e, t);
}
Y_(wu, Ht);
wu.prototype.parseNsAttributes = function(e) {
  var t = Ht.prototype.parseNsAttributes.call(this, e), n = e.$descriptor;
  if (n.name === this.propertyDescriptor.type)
    return t;
  var i = this.typeNs = this.nsTagName(n);
  this.getNamespaces().logUsed(this.typeNs);
  var r = e.$model.getPackage(i.uri), o = r.xml && r.xml.typePrefix || "";
  return this.addAttribute(
    this.nsAttributeName(xu),
    (i.prefix ? i.prefix + ":" : "") + o + n.ns.localName
  ), t;
};
wu.prototype.isLocalNs = function(e) {
  return e.uri === (this.typeNs || this.ns).uri;
};
function vC() {
  this.value = "", this.write = function(e) {
    this.value += e;
  };
}
function _C(e, t) {
  var n = [""];
  this.append = function(i) {
    return e.write(i), this;
  }, this.appendNewLine = function() {
    return t && e.write(`
`), this;
  }, this.appendIndent = function() {
    return t && e.write(n.join("  ")), this;
  }, this.indent = function() {
    return n.push(""), this;
  }, this.unindent = function() {
    return n.pop(), this;
  };
}
function bC(e) {
  e = U({ format: !1, preamble: !0 }, e || {});
  function t(n, i) {
    var r = i || new vC(), o = new _C(r, e.format);
    if (e.preamble && o.append(iC), new Ht().build(n).serializeTo(o), !i)
      return r.value;
  }
  return {
    toXML: t
  };
}
function Su(e, t) {
  Mi.call(this, e, t);
}
Su.prototype = Object.create(Mi.prototype);
Su.prototype.fromXML = function(e, t, n) {
  ci(t) || (n = t, t = "bpmn:Definitions");
  var i = new Td(U({ model: this, lax: !0 }, n)), r = i.handler(t);
  return i.fromXML(e, r);
};
Su.prototype.toXML = function(e, t) {
  var n = new bC(t);
  return new Promise(function(i, r) {
    try {
      var o = n.toXML(e);
      return i({
        xml: o
      });
    } catch (a) {
      return r(a);
    }
  });
};
var xC = "BPMN20", EC = "http://www.omg.org/spec/BPMN/20100524/MODEL", wC = "bpmn", SC = [], RC = [
  {
    name: "Interface",
    superClass: [
      "RootElement"
    ],
    properties: [
      {
        name: "name",
        isAttr: !0,
        type: "String"
      },
      {
        name: "operations",
        type: "Operation",
        isMany: !0
      },
      {
        name: "implementationRef",
        isAttr: !0,
        type: "String"
      }
    ]
  },
  {
    name: "Operation",
    superClass: [
      "BaseElement"
    ],
    properties: [
      {
        name: "name",
        isAttr: !0,
        type: "String"
      },
      {
        name: "inMessageRef",
        type: "Message",
        isReference: !0
      },
      {
        name: "outMessageRef",
        type: "Message",
        isReference: !0
      },
      {
        name: "errorRef",
        type: "Error",
        isMany: !0,
        isReference: !0
      },
      {
        name: "implementationRef",
        isAttr: !0,
        type: "String"
      }
    ]
  },
  {
    name: "EndPoint",
    superClass: [
      "RootElement"
    ]
  },
  {
    name: "Auditing",
    superClass: [
      "BaseElement"
    ]
  },
  {
    name: "GlobalTask",
    superClass: [
      "CallableElement"
    ],
    properties: [
      {
        name: "resources",
        type: "ResourceRole",
        isMany: !0
      }
    ]
  },
  {
    name: "Monitoring",
    superClass: [
      "BaseElement"
    ]
  },
  {
    name: "Performer",
    superClass: [
      "ResourceRole"
    ]
  },
  {
    name: "Process",
    superClass: [
      "FlowElementsContainer",
      "CallableElement"
    ],
    properties: [
      {
        name: "processType",
        type: "ProcessType",
        isAttr: !0
      },
      {
        name: "isClosed",
        isAttr: !0,
        type: "Boolean"
      },
      {
        name: "auditing",
        type: "Auditing"
      },
      {
        name: "monitoring",
        type: "Monitoring"
      },
      {
        name: "properties",
        type: "Property",
        isMany: !0
      },
      {
        name: "laneSets",
        isMany: !0,
        replaces: "FlowElementsContainer#laneSets",
        type: "LaneSet"
      },
      {
        name: "flowElements",
        isMany: !0,
        replaces: "FlowElementsContainer#flowElements",
        type: "FlowElement"
      },
      {
        name: "artifacts",
        type: "Artifact",
        isMany: !0
      },
      {
        name: "resources",
        type: "ResourceRole",
        isMany: !0
      },
      {
        name: "correlationSubscriptions",
        type: "CorrelationSubscription",
        isMany: !0
      },
      {
        name: "supports",
        type: "Process",
        isMany: !0,
        isReference: !0
      },
      {
        name: "definitionalCollaborationRef",
        type: "Collaboration",
        isAttr: !0,
        isReference: !0
      },
      {
        name: "isExecutable",
        isAttr: !0,
        type: "Boolean"
      }
    ]
  },
  {
    name: "LaneSet",
    superClass: [
      "BaseElement"
    ],
    properties: [
      {
        name: "lanes",
        type: "Lane",
        isMany: !0
      },
      {
        name: "name",
        isAttr: !0,
        type: "String"
      }
    ]
  },
  {
    name: "Lane",
    superClass: [
      "BaseElement"
    ],
    properties: [
      {
        name: "name",
        isAttr: !0,
        type: "String"
      },
      {
        name: "partitionElementRef",
        type: "BaseElement",
        isAttr: !0,
        isReference: !0
      },
      {
        name: "partitionElement",
        type: "BaseElement"
      },
      {
        name: "flowNodeRef",
        type: "FlowNode",
        isMany: !0,
        isReference: !0
      },
      {
        name: "childLaneSet",
        type: "LaneSet",
        xml: {
          serialize: "xsi:type"
        }
      }
    ]
  },
  {
    name: "GlobalManualTask",
    superClass: [
      "GlobalTask"
    ]
  },
  {
    name: "ManualTask",
    superClass: [
      "Task"
    ]
  },
  {
    name: "UserTask",
    superClass: [
      "Task"
    ],
    properties: [
      {
        name: "renderings",
        type: "Rendering",
        isMany: !0
      },
      {
        name: "implementation",
        isAttr: !0,
        type: "String"
      }
    ]
  },
  {
    name: "Rendering",
    superClass: [
      "BaseElement"
    ]
  },
  {
    name: "HumanPerformer",
    superClass: [
      "Performer"
    ]
  },
  {
    name: "PotentialOwner",
    superClass: [
      "HumanPerformer"
    ]
  },
  {
    name: "GlobalUserTask",
    superClass: [
      "GlobalTask"
    ],
    properties: [
      {
        name: "implementation",
        isAttr: !0,
        type: "String"
      },
      {
        name: "renderings",
        type: "Rendering",
        isMany: !0
      }
    ]
  },
  {
    name: "Gateway",
    isAbstract: !0,
    superClass: [
      "FlowNode"
    ],
    properties: [
      {
        name: "gatewayDirection",
        type: "GatewayDirection",
        default: "Unspecified",
        isAttr: !0
      }
    ]
  },
  {
    name: "EventBasedGateway",
    superClass: [
      "Gateway"
    ],
    properties: [
      {
        name: "instantiate",
        default: !1,
        isAttr: !0,
        type: "Boolean"
      },
      {
        name: "eventGatewayType",
        type: "EventBasedGatewayType",
        isAttr: !0,
        default: "Exclusive"
      }
    ]
  },
  {
    name: "ComplexGateway",
    superClass: [
      "Gateway"
    ],
    properties: [
      {
        name: "activationCondition",
        type: "Expression",
        xml: {
          serialize: "xsi:type"
        }
      },
      {
        name: "default",
        type: "SequenceFlow",
        isAttr: !0,
        isReference: !0
      }
    ]
  },
  {
    name: "ExclusiveGateway",
    superClass: [
      "Gateway"
    ],
    properties: [
      {
        name: "default",
        type: "SequenceFlow",
        isAttr: !0,
        isReference: !0
      }
    ]
  },
  {
    name: "InclusiveGateway",
    superClass: [
      "Gateway"
    ],
    properties: [
      {
        name: "default",
        type: "SequenceFlow",
        isAttr: !0,
        isReference: !0
      }
    ]
  },
  {
    name: "ParallelGateway",
    superClass: [
      "Gateway"
    ]
  },
  {
    name: "RootElement",
    isAbstract: !0,
    superClass: [
      "BaseElement"
    ]
  },
  {
    name: "Relationship",
    superClass: [
      "BaseElement"
    ],
    properties: [
      {
        name: "type",
        isAttr: !0,
        type: "String"
      },
      {
        name: "direction",
        type: "RelationshipDirection",
        isAttr: !0
      },
      {
        name: "source",
        isMany: !0,
        isReference: !0,
        type: "Element"
      },
      {
        name: "target",
        isMany: !0,
        isReference: !0,
        type: "Element"
      }
    ]
  },
  {
    name: "BaseElement",
    isAbstract: !0,
    properties: [
      {
        name: "id",
        isAttr: !0,
        type: "String",
        isId: !0
      },
      {
        name: "documentation",
        type: "Documentation",
        isMany: !0
      },
      {
        name: "extensionDefinitions",
        type: "ExtensionDefinition",
        isMany: !0,
        isReference: !0
      },
      {
        name: "extensionElements",
        type: "ExtensionElements"
      }
    ]
  },
  {
    name: "Extension",
    properties: [
      {
        name: "mustUnderstand",
        default: !1,
        isAttr: !0,
        type: "Boolean"
      },
      {
        name: "definition",
        type: "ExtensionDefinition",
        isAttr: !0,
        isReference: !0
      }
    ]
  },
  {
    name: "ExtensionDefinition",
    properties: [
      {
        name: "name",
        isAttr: !0,
        type: "String"
      },
      {
        name: "extensionAttributeDefinitions",
        type: "ExtensionAttributeDefinition",
        isMany: !0
      }
    ]
  },
  {
    name: "ExtensionAttributeDefinition",
    properties: [
      {
        name: "name",
        isAttr: !0,
        type: "String"
      },
      {
        name: "type",
        isAttr: !0,
        type: "String"
      },
      {
        name: "isReference",
        default: !1,
        isAttr: !0,
        type: "Boolean"
      },
      {
        name: "extensionDefinition",
        type: "ExtensionDefinition",
        isAttr: !0,
        isReference: !0
      }
    ]
  },
  {
    name: "ExtensionElements",
    properties: [
      {
        name: "valueRef",
        isAttr: !0,
        isReference: !0,
        type: "Element"
      },
      {
        name: "values",
        type: "Element",
        isMany: !0
      },
      {
        name: "extensionAttributeDefinition",
        type: "ExtensionAttributeDefinition",
        isAttr: !0,
        isReference: !0
      }
    ]
  },
  {
    name: "Documentation",
    superClass: [
      "BaseElement"
    ],
    properties: [
      {
        name: "text",
        type: "String",
        isBody: !0
      },
      {
        name: "textFormat",
        default: "text/plain",
        isAttr: !0,
        type: "String"
      }
    ]
  },
  {
    name: "Event",
    isAbstract: !0,
    superClass: [
      "FlowNode",
      "InteractionNode"
    ],
    properties: [
      {
        name: "properties",
        type: "Property",
        isMany: !0
      }
    ]
  },
  {
    name: "IntermediateCatchEvent",
    superClass: [
      "CatchEvent"
    ]
  },
  {
    name: "IntermediateThrowEvent",
    superClass: [
      "ThrowEvent"
    ]
  },
  {
    name: "EndEvent",
    superClass: [
      "ThrowEvent"
    ]
  },
  {
    name: "StartEvent",
    superClass: [
      "CatchEvent"
    ],
    properties: [
      {
        name: "isInterrupting",
        default: !0,
        isAttr: !0,
        type: "Boolean"
      }
    ]
  },
  {
    name: "ThrowEvent",
    isAbstract: !0,
    superClass: [
      "Event"
    ],
    properties: [
      {
        name: "dataInputs",
        type: "DataInput",
        isMany: !0
      },
      {
        name: "dataInputAssociations",
        type: "DataInputAssociation",
        isMany: !0
      },
      {
        name: "inputSet",
        type: "InputSet"
      },
      {
        name: "eventDefinitions",
        type: "EventDefinition",
        isMany: !0
      },
      {
        name: "eventDefinitionRef",
        type: "EventDefinition",
        isMany: !0,
        isReference: !0
      }
    ]
  },
  {
    name: "CatchEvent",
    isAbstract: !0,
    superClass: [
      "Event"
    ],
    properties: [
      {
        name: "parallelMultiple",
        isAttr: !0,
        type: "Boolean",
        default: !1
      },
      {
        name: "dataOutputs",
        type: "DataOutput",
        isMany: !0
      },
      {
        name: "dataOutputAssociations",
        type: "DataOutputAssociation",
        isMany: !0
      },
      {
        name: "outputSet",
        type: "OutputSet"
      },
      {
        name: "eventDefinitions",
        type: "EventDefinition",
        isMany: !0
      },
      {
        name: "eventDefinitionRef",
        type: "EventDefinition",
        isMany: !0,
        isReference: !0
      }
    ]
  },
  {
    name: "BoundaryEvent",
    superClass: [
      "CatchEvent"
    ],
    properties: [
      {
        name: "cancelActivity",
        default: !0,
        isAttr: !0,
        type: "Boolean"
      },
      {
        name: "attachedToRef",
        type: "Activity",
        isAttr: !0,
        isReference: !0
      }
    ]
  },
  {
    name: "EventDefinition",
    isAbstract: !0,
    superClass: [
      "RootElement"
    ]
  },
  {
    name: "CancelEventDefinition",
    superClass: [
      "EventDefinition"
    ]
  },
  {
    name: "ErrorEventDefinition",
    superClass: [
      "EventDefinition"
    ],
    properties: [
      {
        name: "errorRef",
        type: "Error",
        isAttr: !0,
        isReference: !0
      }
    ]
  },
  {
    name: "TerminateEventDefinition",
    superClass: [
      "EventDefinition"
    ]
  },
  {
    name: "EscalationEventDefinition",
    superClass: [
      "EventDefinition"
    ],
    properties: [
      {
        name: "escalationRef",
        type: "Escalation",
        isAttr: !0,
        isReference: !0
      }
    ]
  },
  {
    name: "Escalation",
    properties: [
      {
        name: "structureRef",
        type: "ItemDefinition",
        isAttr: !0,
        isReference: !0
      },
      {
        name: "name",
        isAttr: !0,
        type: "String"
      },
      {
        name: "escalationCode",
        isAttr: !0,
        type: "String"
      }
    ],
    superClass: [
      "RootElement"
    ]
  },
  {
    name: "CompensateEventDefinition",
    superClass: [
      "EventDefinition"
    ],
    properties: [
      {
        name: "waitForCompletion",
        isAttr: !0,
        type: "Boolean",
        default: !0
      },
      {
        name: "activityRef",
        type: "Activity",
        isAttr: !0,
        isReference: !0
      }
    ]
  },
  {
    name: "TimerEventDefinition",
    superClass: [
      "EventDefinition"
    ],
    properties: [
      {
        name: "timeDate",
        type: "Expression",
        xml: {
          serialize: "xsi:type"
        }
      },
      {
        name: "timeCycle",
        type: "Expression",
        xml: {
          serialize: "xsi:type"
        }
      },
      {
        name: "timeDuration",
        type: "Expression",
        xml: {
          serialize: "xsi:type"
        }
      }
    ]
  },
  {
    name: "LinkEventDefinition",
    superClass: [
      "EventDefinition"
    ],
    properties: [
      {
        name: "name",
        isAttr: !0,
        type: "String"
      },
      {
        name: "target",
        type: "LinkEventDefinition",
        isReference: !0
      },
      {
        name: "source",
        type: "LinkEventDefinition",
        isMany: !0,
        isReference: !0
      }
    ]
  },
  {
    name: "MessageEventDefinition",
    superClass: [
      "EventDefinition"
    ],
    properties: [
      {
        name: "messageRef",
        type: "Message",
        isAttr: !0,
        isReference: !0
      },
      {
        name: "operationRef",
        type: "Operation",
        isAttr: !0,
        isReference: !0
      }
    ]
  },
  {
    name: "ConditionalEventDefinition",
    superClass: [
      "EventDefinition"
    ],
    properties: [
      {
        name: "condition",
        type: "Expression",
        xml: {
          serialize: "xsi:type"
        }
      }
    ]
  },
  {
    name: "SignalEventDefinition",
    superClass: [
      "EventDefinition"
    ],
    properties: [
      {
        name: "signalRef",
        type: "Signal",
        isAttr: !0,
        isReference: !0
      }
    ]
  },
  {
    name: "Signal",
    superClass: [
      "RootElement"
    ],
    properties: [
      {
        name: "structureRef",
        type: "ItemDefinition",
        isAttr: !0,
        isReference: !0
      },
      {
        name: "name",
        isAttr: !0,
        type: "String"
      }
    ]
  },
  {
    name: "ImplicitThrowEvent",
    superClass: [
      "ThrowEvent"
    ]
  },
  {
    name: "DataState",
    superClass: [
      "BaseElement"
    ],
    properties: [
      {
        name: "name",
        isAttr: !0,
        type: "String"
      }
    ]
  },
  {
    name: "ItemAwareElement",
    superClass: [
      "BaseElement"
    ],
    properties: [
      {
        name: "itemSubjectRef",
        type: "ItemDefinition",
        isAttr: !0,
        isReference: !0
      },
      {
        name: "dataState",
        type: "DataState"
      }
    ]
  },
  {
    name: "DataAssociation",
    superClass: [
      "BaseElement"
    ],
    properties: [
      {
        name: "sourceRef",
        type: "ItemAwareElement",
        isMany: !0,
        isReference: !0
      },
      {
        name: "targetRef",
        type: "ItemAwareElement",
        isReference: !0
      },
      {
        name: "transformation",
        type: "FormalExpression",
        xml: {
          serialize: "property"
        }
      },
      {
        name: "assignment",
        type: "Assignment",
        isMany: !0
      }
    ]
  },
  {
    name: "DataInput",
    superClass: [
      "ItemAwareElement"
    ],
    properties: [
      {
        name: "name",
        isAttr: !0,
        type: "String"
      },
      {
        name: "isCollection",
        default: !1,
        isAttr: !0,
        type: "Boolean"
      },
      {
        name: "inputSetRef",
        type: "InputSet",
        isMany: !0,
        isVirtual: !0,
        isReference: !0
      },
      {
        name: "inputSetWithOptional",
        type: "InputSet",
        isMany: !0,
        isVirtual: !0,
        isReference: !0
      },
      {
        name: "inputSetWithWhileExecuting",
        type: "InputSet",
        isMany: !0,
        isVirtual: !0,
        isReference: !0
      }
    ]
  },
  {
    name: "DataOutput",
    superClass: [
      "ItemAwareElement"
    ],
    properties: [
      {
        name: "name",
        isAttr: !0,
        type: "String"
      },
      {
        name: "isCollection",
        default: !1,
        isAttr: !0,
        type: "Boolean"
      },
      {
        name: "outputSetRef",
        type: "OutputSet",
        isMany: !0,
        isVirtual: !0,
        isReference: !0
      },
      {
        name: "outputSetWithOptional",
        type: "OutputSet",
        isMany: !0,
        isVirtual: !0,
        isReference: !0
      },
      {
        name: "outputSetWithWhileExecuting",
        type: "OutputSet",
        isMany: !0,
        isVirtual: !0,
        isReference: !0
      }
    ]
  },
  {
    name: "InputSet",
    superClass: [
      "BaseElement"
    ],
    properties: [
      {
        name: "name",
        isAttr: !0,
        type: "String"
      },
      {
        name: "dataInputRefs",
        type: "DataInput",
        isMany: !0,
        isReference: !0
      },
      {
        name: "optionalInputRefs",
        type: "DataInput",
        isMany: !0,
        isReference: !0
      },
      {
        name: "whileExecutingInputRefs",
        type: "DataInput",
        isMany: !0,
        isReference: !0
      },
      {
        name: "outputSetRefs",
        type: "OutputSet",
        isMany: !0,
        isReference: !0
      }
    ]
  },
  {
    name: "OutputSet",
    superClass: [
      "BaseElement"
    ],
    properties: [
      {
        name: "dataOutputRefs",
        type: "DataOutput",
        isMany: !0,
        isReference: !0
      },
      {
        name: "name",
        isAttr: !0,
        type: "String"
      },
      {
        name: "inputSetRefs",
        type: "InputSet",
        isMany: !0,
        isReference: !0
      },
      {
        name: "optionalOutputRefs",
        type: "DataOutput",
        isMany: !0,
        isReference: !0
      },
      {
        name: "whileExecutingOutputRefs",
        type: "DataOutput",
        isMany: !0,
        isReference: !0
      }
    ]
  },
  {
    name: "Property",
    superClass: [
      "ItemAwareElement"
    ],
    properties: [
      {
        name: "name",
        isAttr: !0,
        type: "String"
      }
    ]
  },
  {
    name: "DataInputAssociation",
    superClass: [
      "DataAssociation"
    ]
  },
  {
    name: "DataOutputAssociation",
    superClass: [
      "DataAssociation"
    ]
  },
  {
    name: "InputOutputSpecification",
    superClass: [
      "BaseElement"
    ],
    properties: [
      {
        name: "dataInputs",
        type: "DataInput",
        isMany: !0
      },
      {
        name: "dataOutputs",
        type: "DataOutput",
        isMany: !0
      },
      {
        name: "inputSets",
        type: "InputSet",
        isMany: !0
      },
      {
        name: "outputSets",
        type: "OutputSet",
        isMany: !0
      }
    ]
  },
  {
    name: "DataObject",
    superClass: [
      "FlowElement",
      "ItemAwareElement"
    ],
    properties: [
      {
        name: "isCollection",
        default: !1,
        isAttr: !0,
        type: "Boolean"
      }
    ]
  },
  {
    name: "InputOutputBinding",
    properties: [
      {
        name: "inputDataRef",
        type: "InputSet",
        isAttr: !0,
        isReference: !0
      },
      {
        name: "outputDataRef",
        type: "OutputSet",
        isAttr: !0,
        isReference: !0
      },
      {
        name: "operationRef",
        type: "Operation",
        isAttr: !0,
        isReference: !0
      }
    ]
  },
  {
    name: "Assignment",
    superClass: [
      "BaseElement"
    ],
    properties: [
      {
        name: "from",
        type: "Expression",
        xml: {
          serialize: "xsi:type"
        }
      },
      {
        name: "to",
        type: "Expression",
        xml: {
          serialize: "xsi:type"
        }
      }
    ]
  },
  {
    name: "DataStore",
    superClass: [
      "RootElement",
      "ItemAwareElement"
    ],
    properties: [
      {
        name: "name",
        isAttr: !0,
        type: "String"
      },
      {
        name: "capacity",
        isAttr: !0,
        type: "Integer"
      },
      {
        name: "isUnlimited",
        default: !0,
        isAttr: !0,
        type: "Boolean"
      }
    ]
  },
  {
    name: "DataStoreReference",
    superClass: [
      "ItemAwareElement",
      "FlowElement"
    ],
    properties: [
      {
        name: "dataStoreRef",
        type: "DataStore",
        isAttr: !0,
        isReference: !0
      }
    ]
  },
  {
    name: "DataObjectReference",
    superClass: [
      "ItemAwareElement",
      "FlowElement"
    ],
    properties: [
      {
        name: "dataObjectRef",
        type: "DataObject",
        isAttr: !0,
        isReference: !0
      }
    ]
  },
  {
    name: "ConversationLink",
    superClass: [
      "BaseElement"
    ],
    properties: [
      {
        name: "sourceRef",
        type: "InteractionNode",
        isAttr: !0,
        isReference: !0
      },
      {
        name: "targetRef",
        type: "InteractionNode",
        isAttr: !0,
        isReference: !0
      },
      {
        name: "name",
        isAttr: !0,
        type: "String"
      }
    ]
  },
  {
    name: "ConversationAssociation",
    superClass: [
      "BaseElement"
    ],
    properties: [
      {
        name: "innerConversationNodeRef",
        type: "ConversationNode",
        isAttr: !0,
        isReference: !0
      },
      {
        name: "outerConversationNodeRef",
        type: "ConversationNode",
        isAttr: !0,
        isReference: !0
      }
    ]
  },
  {
    name: "CallConversation",
    superClass: [
      "ConversationNode"
    ],
    properties: [
      {
        name: "calledCollaborationRef",
        type: "Collaboration",
        isAttr: !0,
        isReference: !0
      },
      {
        name: "participantAssociations",
        type: "ParticipantAssociation",
        isMany: !0
      }
    ]
  },
  {
    name: "Conversation",
    superClass: [
      "ConversationNode"
    ]
  },
  {
    name: "SubConversation",
    superClass: [
      "ConversationNode"
    ],
    properties: [
      {
        name: "conversationNodes",
        type: "ConversationNode",
        isMany: !0
      }
    ]
  },
  {
    name: "ConversationNode",
    isAbstract: !0,
    superClass: [
      "InteractionNode",
      "BaseElement"
    ],
    properties: [
      {
        name: "name",
        isAttr: !0,
        type: "String"
      },
      {
        name: "participantRef",
        type: "Participant",
        isMany: !0,
        isReference: !0
      },
      {
        name: "messageFlowRefs",
        type: "MessageFlow",
        isMany: !0,
        isReference: !0
      },
      {
        name: "correlationKeys",
        type: "CorrelationKey",
        isMany: !0
      }
    ]
  },
  {
    name: "GlobalConversation",
    superClass: [
      "Collaboration"
    ]
  },
  {
    name: "PartnerEntity",
    superClass: [
      "RootElement"
    ],
    properties: [
      {
        name: "name",
        isAttr: !0,
        type: "String"
      },
      {
        name: "participantRef",
        type: "Participant",
        isMany: !0,
        isReference: !0
      }
    ]
  },
  {
    name: "PartnerRole",
    superClass: [
      "RootElement"
    ],
    properties: [
      {
        name: "name",
        isAttr: !0,
        type: "String"
      },
      {
        name: "participantRef",
        type: "Participant",
        isMany: !0,
        isReference: !0
      }
    ]
  },
  {
    name: "CorrelationProperty",
    superClass: [
      "RootElement"
    ],
    properties: [
      {
        name: "correlationPropertyRetrievalExpression",
        type: "CorrelationPropertyRetrievalExpression",
        isMany: !0
      },
      {
        name: "name",
        isAttr: !0,
        type: "String"
      },
      {
        name: "type",
        type: "ItemDefinition",
        isAttr: !0,
        isReference: !0
      }
    ]
  },
  {
    name: "Error",
    superClass: [
      "RootElement"
    ],
    properties: [
      {
        name: "structureRef",
        type: "ItemDefinition",
        isAttr: !0,
        isReference: !0
      },
      {
        name: "name",
        isAttr: !0,
        type: "String"
      },
      {
        name: "errorCode",
        isAttr: !0,
        type: "String"
      }
    ]
  },
  {
    name: "CorrelationKey",
    superClass: [
      "BaseElement"
    ],
    properties: [
      {
        name: "correlationPropertyRef",
        type: "CorrelationProperty",
        isMany: !0,
        isReference: !0
      },
      {
        name: "name",
        isAttr: !0,
        type: "String"
      }
    ]
  },
  {
    name: "Expression",
    superClass: [
      "BaseElement"
    ],
    isAbstract: !1,
    properties: [
      {
        name: "body",
        isBody: !0,
        type: "String"
      }
    ]
  },
  {
    name: "FormalExpression",
    superClass: [
      "Expression"
    ],
    properties: [
      {
        name: "language",
        isAttr: !0,
        type: "String"
      },
      {
        name: "evaluatesToTypeRef",
        type: "ItemDefinition",
        isAttr: !0,
        isReference: !0
      }
    ]
  },
  {
    name: "Message",
    superClass: [
      "RootElement"
    ],
    properties: [
      {
        name: "name",
        isAttr: !0,
        type: "String"
      },
      {
        name: "itemRef",
        type: "ItemDefinition",
        isAttr: !0,
        isReference: !0
      }
    ]
  },
  {
    name: "ItemDefinition",
    superClass: [
      "RootElement"
    ],
    properties: [
      {
        name: "itemKind",
        type: "ItemKind",
        isAttr: !0
      },
      {
        name: "structureRef",
        isAttr: !0,
        type: "String"
      },
      {
        name: "isCollection",
        default: !1,
        isAttr: !0,
        type: "Boolean"
      },
      {
        name: "import",
        type: "Import",
        isAttr: !0,
        isReference: !0
      }
    ]
  },
  {
    name: "FlowElement",
    isAbstract: !0,
    superClass: [
      "BaseElement"
    ],
    properties: [
      {
        name: "name",
        isAttr: !0,
        type: "String"
      },
      {
        name: "auditing",
        type: "Auditing"
      },
      {
        name: "monitoring",
        type: "Monitoring"
      },
      {
        name: "categoryValueRef",
        type: "CategoryValue",
        isMany: !0,
        isReference: !0
      }
    ]
  },
  {
    name: "SequenceFlow",
    superClass: [
      "FlowElement"
    ],
    properties: [
      {
        name: "isImmediate",
        isAttr: !0,
        type: "Boolean"
      },
      {
        name: "conditionExpression",
        type: "Expression",
        xml: {
          serialize: "xsi:type"
        }
      },
      {
        name: "sourceRef",
        type: "FlowNode",
        isAttr: !0,
        isReference: !0
      },
      {
        name: "targetRef",
        type: "FlowNode",
        isAttr: !0,
        isReference: !0
      }
    ]
  },
  {
    name: "FlowElementsContainer",
    isAbstract: !0,
    superClass: [
      "BaseElement"
    ],
    properties: [
      {
        name: "laneSets",
        type: "LaneSet",
        isMany: !0
      },
      {
        name: "flowElements",
        type: "FlowElement",
        isMany: !0
      }
    ]
  },
  {
    name: "CallableElement",
    isAbstract: !0,
    superClass: [
      "RootElement"
    ],
    properties: [
      {
        name: "name",
        isAttr: !0,
        type: "String"
      },
      {
        name: "ioSpecification",
        type: "InputOutputSpecification",
        xml: {
          serialize: "property"
        }
      },
      {
        name: "supportedInterfaceRef",
        type: "Interface",
        isMany: !0,
        isReference: !0
      },
      {
        name: "ioBinding",
        type: "InputOutputBinding",
        isMany: !0,
        xml: {
          serialize: "property"
        }
      }
    ]
  },
  {
    name: "FlowNode",
    isAbstract: !0,
    superClass: [
      "FlowElement"
    ],
    properties: [
      {
        name: "incoming",
        type: "SequenceFlow",
        isMany: !0,
        isReference: !0
      },
      {
        name: "outgoing",
        type: "SequenceFlow",
        isMany: !0,
        isReference: !0
      },
      {
        name: "lanes",
        type: "Lane",
        isMany: !0,
        isVirtual: !0,
        isReference: !0
      }
    ]
  },
  {
    name: "CorrelationPropertyRetrievalExpression",
    superClass: [
      "BaseElement"
    ],
    properties: [
      {
        name: "messagePath",
        type: "FormalExpression"
      },
      {
        name: "messageRef",
        type: "Message",
        isAttr: !0,
        isReference: !0
      }
    ]
  },
  {
    name: "CorrelationPropertyBinding",
    superClass: [
      "BaseElement"
    ],
    properties: [
      {
        name: "dataPath",
        type: "FormalExpression"
      },
      {
        name: "correlationPropertyRef",
        type: "CorrelationProperty",
        isAttr: !0,
        isReference: !0
      }
    ]
  },
  {
    name: "Resource",
    superClass: [
      "RootElement"
    ],
    properties: [
      {
        name: "name",
        isAttr: !0,
        type: "String"
      },
      {
        name: "resourceParameters",
        type: "ResourceParameter",
        isMany: !0
      }
    ]
  },
  {
    name: "ResourceParameter",
    superClass: [
      "BaseElement"
    ],
    properties: [
      {
        name: "name",
        isAttr: !0,
        type: "String"
      },
      {
        name: "isRequired",
        isAttr: !0,
        type: "Boolean"
      },
      {
        name: "type",
        type: "ItemDefinition",
        isAttr: !0,
        isReference: !0
      }
    ]
  },
  {
    name: "CorrelationSubscription",
    superClass: [
      "BaseElement"
    ],
    properties: [
      {
        name: "correlationKeyRef",
        type: "CorrelationKey",
        isAttr: !0,
        isReference: !0
      },
      {
        name: "correlationPropertyBinding",
        type: "CorrelationPropertyBinding",
        isMany: !0
      }
    ]
  },
  {
    name: "MessageFlow",
    superClass: [
      "BaseElement"
    ],
    properties: [
      {
        name: "name",
        isAttr: !0,
        type: "String"
      },
      {
        name: "sourceRef",
        type: "InteractionNode",
        isAttr: !0,
        isReference: !0
      },
      {
        name: "targetRef",
        type: "InteractionNode",
        isAttr: !0,
        isReference: !0
      },
      {
        name: "messageRef",
        type: "Message",
        isAttr: !0,
        isReference: !0
      }
    ]
  },
  {
    name: "MessageFlowAssociation",
    superClass: [
      "BaseElement"
    ],
    properties: [
      {
        name: "innerMessageFlowRef",
        type: "MessageFlow",
        isAttr: !0,
        isReference: !0
      },
      {
        name: "outerMessageFlowRef",
        type: "MessageFlow",
        isAttr: !0,
        isReference: !0
      }
    ]
  },
  {
    name: "InteractionNode",
    isAbstract: !0,
    properties: [
      {
        name: "incomingConversationLinks",
        type: "ConversationLink",
        isMany: !0,
        isVirtual: !0,
        isReference: !0
      },
      {
        name: "outgoingConversationLinks",
        type: "ConversationLink",
        isMany: !0,
        isVirtual: !0,
        isReference: !0
      }
    ]
  },
  {
    name: "Participant",
    superClass: [
      "InteractionNode",
      "BaseElement"
    ],
    properties: [
      {
        name: "name",
        isAttr: !0,
        type: "String"
      },
      {
        name: "interfaceRef",
        type: "Interface",
        isMany: !0,
        isReference: !0
      },
      {
        name: "participantMultiplicity",
        type: "ParticipantMultiplicity"
      },
      {
        name: "endPointRefs",
        type: "EndPoint",
        isMany: !0,
        isReference: !0
      },
      {
        name: "processRef",
        type: "Process",
        isAttr: !0,
        isReference: !0
      }
    ]
  },
  {
    name: "ParticipantAssociation",
    superClass: [
      "BaseElement"
    ],
    properties: [
      {
        name: "innerParticipantRef",
        type: "Participant",
        isAttr: !0,
        isReference: !0
      },
      {
        name: "outerParticipantRef",
        type: "Participant",
        isAttr: !0,
        isReference: !0
      }
    ]
  },
  {
    name: "ParticipantMultiplicity",
    properties: [
      {
        name: "minimum",
        default: 0,
        isAttr: !0,
        type: "Integer"
      },
      {
        name: "maximum",
        default: 1,
        isAttr: !0,
        type: "Integer"
      }
    ],
    superClass: [
      "BaseElement"
    ]
  },
  {
    name: "Collaboration",
    superClass: [
      "RootElement"
    ],
    properties: [
      {
        name: "name",
        isAttr: !0,
        type: "String"
      },
      {
        name: "isClosed",
        isAttr: !0,
        type: "Boolean"
      },
      {
        name: "participants",
        type: "Participant",
        isMany: !0
      },
      {
        name: "messageFlows",
        type: "MessageFlow",
        isMany: !0
      },
      {
        name: "artifacts",
        type: "Artifact",
        isMany: !0
      },
      {
        name: "conversations",
        type: "ConversationNode",
        isMany: !0
      },
      {
        name: "conversationAssociations",
        type: "ConversationAssociation"
      },
      {
        name: "participantAssociations",
        type: "ParticipantAssociation",
        isMany: !0
      },
      {
        name: "messageFlowAssociations",
        type: "MessageFlowAssociation",
        isMany: !0
      },
      {
        name: "correlationKeys",
        type: "CorrelationKey",
        isMany: !0
      },
      {
        name: "choreographyRef",
        type: "Choreography",
        isMany: !0,
        isReference: !0
      },
      {
        name: "conversationLinks",
        type: "ConversationLink",
        isMany: !0
      }
    ]
  },
  {
    name: "ChoreographyActivity",
    isAbstract: !0,
    superClass: [
      "FlowNode"
    ],
    properties: [
      {
        name: "participantRef",
        type: "Participant",
        isMany: !0,
        isReference: !0
      },
      {
        name: "initiatingParticipantRef",
        type: "Participant",
        isAttr: !0,
        isReference: !0
      },
      {
        name: "correlationKeys",
        type: "CorrelationKey",
        isMany: !0
      },
      {
        name: "loopType",
        type: "ChoreographyLoopType",
        default: "None",
        isAttr: !0
      }
    ]
  },
  {
    name: "CallChoreography",
    superClass: [
      "ChoreographyActivity"
    ],
    properties: [
      {
        name: "calledChoreographyRef",
        type: "Choreography",
        isAttr: !0,
        isReference: !0
      },
      {
        name: "participantAssociations",
        type: "ParticipantAssociation",
        isMany: !0
      }
    ]
  },
  {
    name: "SubChoreography",
    superClass: [
      "ChoreographyActivity",
      "FlowElementsContainer"
    ],
    properties: [
      {
        name: "artifacts",
        type: "Artifact",
        isMany: !0
      }
    ]
  },
  {
    name: "ChoreographyTask",
    superClass: [
      "ChoreographyActivity"
    ],
    properties: [
      {
        name: "messageFlowRef",
        type: "MessageFlow",
        isMany: !0,
        isReference: !0
      }
    ]
  },
  {
    name: "Choreography",
    superClass: [
      "Collaboration",
      "FlowElementsContainer"
    ]
  },
  {
    name: "GlobalChoreographyTask",
    superClass: [
      "Choreography"
    ],
    properties: [
      {
        name: "initiatingParticipantRef",
        type: "Participant",
        isAttr: !0,
        isReference: !0
      }
    ]
  },
  {
    name: "TextAnnotation",
    superClass: [
      "Artifact"
    ],
    properties: [
      {
        name: "text",
        type: "String"
      },
      {
        name: "textFormat",
        default: "text/plain",
        isAttr: !0,
        type: "String"
      }
    ]
  },
  {
    name: "Group",
    superClass: [
      "Artifact"
    ],
    properties: [
      {
        name: "categoryValueRef",
        type: "CategoryValue",
        isAttr: !0,
        isReference: !0
      }
    ]
  },
  {
    name: "Association",
    superClass: [
      "Artifact"
    ],
    properties: [
      {
        name: "associationDirection",
        type: "AssociationDirection",
        isAttr: !0
      },
      {
        name: "sourceRef",
        type: "BaseElement",
        isAttr: !0,
        isReference: !0
      },
      {
        name: "targetRef",
        type: "BaseElement",
        isAttr: !0,
        isReference: !0
      }
    ]
  },
  {
    name: "Category",
    superClass: [
      "RootElement"
    ],
    properties: [
      {
        name: "categoryValue",
        type: "CategoryValue",
        isMany: !0
      },
      {
        name: "name",
        isAttr: !0,
        type: "String"
      }
    ]
  },
  {
    name: "Artifact",
    isAbstract: !0,
    superClass: [
      "BaseElement"
    ]
  },
  {
    name: "CategoryValue",
    superClass: [
      "BaseElement"
    ],
    properties: [
      {
        name: "categorizedFlowElements",
        type: "FlowElement",
        isMany: !0,
        isVirtual: !0,
        isReference: !0
      },
      {
        name: "value",
        isAttr: !0,
        type: "String"
      }
    ]
  },
  {
    name: "Activity",
    isAbstract: !0,
    superClass: [
      "FlowNode"
    ],
    properties: [
      {
        name: "isForCompensation",
        default: !1,
        isAttr: !0,
        type: "Boolean"
      },
      {
        name: "default",
        type: "SequenceFlow",
        isAttr: !0,
        isReference: !0
      },
      {
        name: "ioSpecification",
        type: "InputOutputSpecification",
        xml: {
          serialize: "property"
        }
      },
      {
        name: "boundaryEventRefs",
        type: "BoundaryEvent",
        isMany: !0,
        isReference: !0
      },
      {
        name: "properties",
        type: "Property",
        isMany: !0
      },
      {
        name: "dataInputAssociations",
        type: "DataInputAssociation",
        isMany: !0
      },
      {
        name: "dataOutputAssociations",
        type: "DataOutputAssociation",
        isMany: !0
      },
      {
        name: "startQuantity",
        default: 1,
        isAttr: !0,
        type: "Integer"
      },
      {
        name: "resources",
        type: "ResourceRole",
        isMany: !0
      },
      {
        name: "completionQuantity",
        default: 1,
        isAttr: !0,
        type: "Integer"
      },
      {
        name: "loopCharacteristics",
        type: "LoopCharacteristics"
      }
    ]
  },
  {
    name: "ServiceTask",
    superClass: [
      "Task"
    ],
    properties: [
      {
        name: "implementation",
        isAttr: !0,
        type: "String"
      },
      {
        name: "operationRef",
        type: "Operation",
        isAttr: !0,
        isReference: !0
      }
    ]
  },
  {
    name: "SubProcess",
    superClass: [
      "Activity",
      "FlowElementsContainer",
      "InteractionNode"
    ],
    properties: [
      {
        name: "triggeredByEvent",
        default: !1,
        isAttr: !0,
        type: "Boolean"
      },
      {
        name: "artifacts",
        type: "Artifact",
        isMany: !0
      }
    ]
  },
  {
    name: "LoopCharacteristics",
    isAbstract: !0,
    superClass: [
      "BaseElement"
    ]
  },
  {
    name: "MultiInstanceLoopCharacteristics",
    superClass: [
      "LoopCharacteristics"
    ],
    properties: [
      {
        name: "isSequential",
        default: !1,
        isAttr: !0,
        type: "Boolean"
      },
      {
        name: "behavior",
        type: "MultiInstanceBehavior",
        default: "All",
        isAttr: !0
      },
      {
        name: "loopCardinality",
        type: "Expression",
        xml: {
          serialize: "xsi:type"
        }
      },
      {
        name: "loopDataInputRef",
        type: "ItemAwareElement",
        isReference: !0
      },
      {
        name: "loopDataOutputRef",
        type: "ItemAwareElement",
        isReference: !0
      },
      {
        name: "inputDataItem",
        type: "DataInput",
        xml: {
          serialize: "property"
        }
      },
      {
        name: "outputDataItem",
        type: "DataOutput",
        xml: {
          serialize: "property"
        }
      },
      {
        name: "complexBehaviorDefinition",
        type: "ComplexBehaviorDefinition",
        isMany: !0
      },
      {
        name: "completionCondition",
        type: "Expression",
        xml: {
          serialize: "xsi:type"
        }
      },
      {
        name: "oneBehaviorEventRef",
        type: "EventDefinition",
        isAttr: !0,
        isReference: !0
      },
      {
        name: "noneBehaviorEventRef",
        type: "EventDefinition",
        isAttr: !0,
        isReference: !0
      }
    ]
  },
  {
    name: "StandardLoopCharacteristics",
    superClass: [
      "LoopCharacteristics"
    ],
    properties: [
      {
        name: "testBefore",
        default: !1,
        isAttr: !0,
        type: "Boolean"
      },
      {
        name: "loopCondition",
        type: "Expression",
        xml: {
          serialize: "xsi:type"
        }
      },
      {
        name: "loopMaximum",
        type: "Integer",
        isAttr: !0
      }
    ]
  },
  {
    name: "CallActivity",
    superClass: [
      "Activity",
      "InteractionNode"
    ],
    properties: [
      {
        name: "calledElement",
        type: "String",
        isAttr: !0
      }
    ]
  },
  {
    name: "Task",
    superClass: [
      "Activity",
      "InteractionNode"
    ]
  },
  {
    name: "SendTask",
    superClass: [
      "Task"
    ],
    properties: [
      {
        name: "implementation",
        isAttr: !0,
        type: "String"
      },
      {
        name: "operationRef",
        type: "Operation",
        isAttr: !0,
        isReference: !0
      },
      {
        name: "messageRef",
        type: "Message",
        isAttr: !0,
        isReference: !0
      }
    ]
  },
  {
    name: "ReceiveTask",
    superClass: [
      "Task"
    ],
    properties: [
      {
        name: "implementation",
        isAttr: !0,
        type: "String"
      },
      {
        name: "instantiate",
        default: !1,
        isAttr: !0,
        type: "Boolean"
      },
      {
        name: "operationRef",
        type: "Operation",
        isAttr: !0,
        isReference: !0
      },
      {
        name: "messageRef",
        type: "Message",
        isAttr: !0,
        isReference: !0
      }
    ]
  },
  {
    name: "ScriptTask",
    superClass: [
      "Task"
    ],
    properties: [
      {
        name: "scriptFormat",
        isAttr: !0,
        type: "String"
      },
      {
        name: "script",
        type: "String"
      }
    ]
  },
  {
    name: "BusinessRuleTask",
    superClass: [
      "Task"
    ],
    properties: [
      {
        name: "implementation",
        isAttr: !0,
        type: "String"
      }
    ]
  },
  {
    name: "AdHocSubProcess",
    superClass: [
      "SubProcess"
    ],
    properties: [
      {
        name: "completionCondition",
        type: "Expression",
        xml: {
          serialize: "xsi:type"
        }
      },
      {
        name: "ordering",
        type: "AdHocOrdering",
        isAttr: !0
      },
      {
        name: "cancelRemainingInstances",
        default: !0,
        isAttr: !0,
        type: "Boolean"
      }
    ]
  },
  {
    name: "Transaction",
    superClass: [
      "SubProcess"
    ],
    properties: [
      {
        name: "protocol",
        isAttr: !0,
        type: "String"
      },
      {
        name: "method",
        isAttr: !0,
        type: "String"
      }
    ]
  },
  {
    name: "GlobalScriptTask",
    superClass: [
      "GlobalTask"
    ],
    properties: [
      {
        name: "scriptLanguage",
        isAttr: !0,
        type: "String"
      },
      {
        name: "script",
        isAttr: !0,
        type: "String"
      }
    ]
  },
  {
    name: "GlobalBusinessRuleTask",
    superClass: [
      "GlobalTask"
    ],
    properties: [
      {
        name: "implementation",
        isAttr: !0,
        type: "String"
      }
    ]
  },
  {
    name: "ComplexBehaviorDefinition",
    superClass: [
      "BaseElement"
    ],
    properties: [
      {
        name: "condition",
        type: "FormalExpression"
      },
      {
        name: "event",
        type: "ImplicitThrowEvent"
      }
    ]
  },
  {
    name: "ResourceRole",
    superClass: [
      "BaseElement"
    ],
    properties: [
      {
        name: "resourceRef",
        type: "Resource",
        isReference: !0
      },
      {
        name: "resourceParameterBindings",
        type: "ResourceParameterBinding",
        isMany: !0
      },
      {
        name: "resourceAssignmentExpression",
        type: "ResourceAssignmentExpression"
      },
      {
        name: "name",
        isAttr: !0,
        type: "String"
      }
    ]
  },
  {
    name: "ResourceParameterBinding",
    properties: [
      {
        name: "expression",
        type: "Expression",
        xml: {
          serialize: "xsi:type"
        }
      },
      {
        name: "parameterRef",
        type: "ResourceParameter",
        isAttr: !0,
        isReference: !0
      }
    ],
    superClass: [
      "BaseElement"
    ]
  },
  {
    name: "ResourceAssignmentExpression",
    properties: [
      {
        name: "expression",
        type: "Expression",
        xml: {
          serialize: "xsi:type"
        }
      }
    ],
    superClass: [
      "BaseElement"
    ]
  },
  {
    name: "Import",
    properties: [
      {
        name: "importType",
        isAttr: !0,
        type: "String"
      },
      {
        name: "location",
        isAttr: !0,
        type: "String"
      },
      {
        name: "namespace",
        isAttr: !0,
        type: "String"
      }
    ]
  },
  {
    name: "Definitions",
    superClass: [
      "BaseElement"
    ],
    properties: [
      {
        name: "name",
        isAttr: !0,
        type: "String"
      },
      {
        name: "targetNamespace",
        isAttr: !0,
        type: "String"
      },
      {
        name: "expressionLanguage",
        default: "http://www.w3.org/1999/XPath",
        isAttr: !0,
        type: "String"
      },
      {
        name: "typeLanguage",
        default: "http://www.w3.org/2001/XMLSchema",
        isAttr: !0,
        type: "String"
      },
      {
        name: "imports",
        type: "Import",
        isMany: !0
      },
      {
        name: "extensions",
        type: "Extension",
        isMany: !0
      },
      {
        name: "rootElements",
        type: "RootElement",
        isMany: !0
      },
      {
        name: "diagrams",
        isMany: !0,
        type: "bpmndi:BPMNDiagram"
      },
      {
        name: "exporter",
        isAttr: !0,
        type: "String"
      },
      {
        name: "relationships",
        type: "Relationship",
        isMany: !0
      },
      {
        name: "exporterVersion",
        isAttr: !0,
        type: "String"
      }
    ]
  }
], CC = [
  {
    name: "ProcessType",
    literalValues: [
      {
        name: "None"
      },
      {
        name: "Public"
      },
      {
        name: "Private"
      }
    ]
  },
  {
    name: "GatewayDirection",
    literalValues: [
      {
        name: "Unspecified"
      },
      {
        name: "Converging"
      },
      {
        name: "Diverging"
      },
      {
        name: "Mixed"
      }
    ]
  },
  {
    name: "EventBasedGatewayType",
    literalValues: [
      {
        name: "Parallel"
      },
      {
        name: "Exclusive"
      }
    ]
  },
  {
    name: "RelationshipDirection",
    literalValues: [
      {
        name: "None"
      },
      {
        name: "Forward"
      },
      {
        name: "Backward"
      },
      {
        name: "Both"
      }
    ]
  },
  {
    name: "ItemKind",
    literalValues: [
      {
        name: "Physical"
      },
      {
        name: "Information"
      }
    ]
  },
  {
    name: "ChoreographyLoopType",
    literalValues: [
      {
        name: "None"
      },
      {
        name: "Standard"
      },
      {
        name: "MultiInstanceSequential"
      },
      {
        name: "MultiInstanceParallel"
      }
    ]
  },
  {
    name: "AssociationDirection",
    literalValues: [
      {
        name: "None"
      },
      {
        name: "One"
      },
      {
        name: "Both"
      }
    ]
  },
  {
    name: "MultiInstanceBehavior",
    literalValues: [
      {
        name: "None"
      },
      {
        name: "One"
      },
      {
        name: "All"
      },
      {
        name: "Complex"
      }
    ]
  },
  {
    name: "AdHocOrdering",
    literalValues: [
      {
        name: "Parallel"
      },
      {
        name: "Sequential"
      }
    ]
  }
], AC = {
  tagAlias: "lowerCase",
  typePrefix: "t"
}, PC = {
  name: xC,
  uri: EC,
  prefix: wC,
  associations: SC,
  types: RC,
  enumerations: CC,
  xml: AC
}, TC = "BPMNDI", kC = "http://www.omg.org/spec/BPMN/20100524/DI", MC = "bpmndi", DC = [
  {
    name: "BPMNDiagram",
    properties: [
      {
        name: "plane",
        type: "BPMNPlane",
        redefines: "di:Diagram#rootElement"
      },
      {
        name: "labelStyle",
        type: "BPMNLabelStyle",
        isMany: !0
      }
    ],
    superClass: [
      "di:Diagram"
    ]
  },
  {
    name: "BPMNPlane",
    properties: [
      {
        name: "bpmnElement",
        isAttr: !0,
        isReference: !0,
        type: "bpmn:BaseElement",
        redefines: "di:DiagramElement#modelElement"
      }
    ],
    superClass: [
      "di:Plane"
    ]
  },
  {
    name: "BPMNShape",
    properties: [
      {
        name: "bpmnElement",
        isAttr: !0,
        isReference: !0,
        type: "bpmn:BaseElement",
        redefines: "di:DiagramElement#modelElement"
      },
      {
        name: "isHorizontal",
        isAttr: !0,
        type: "Boolean"
      },
      {
        name: "isExpanded",
        isAttr: !0,
        type: "Boolean"
      },
      {
        name: "isMarkerVisible",
        isAttr: !0,
        type: "Boolean"
      },
      {
        name: "label",
        type: "BPMNLabel"
      },
      {
        name: "isMessageVisible",
        isAttr: !0,
        type: "Boolean"
      },
      {
        name: "participantBandKind",
        type: "ParticipantBandKind",
        isAttr: !0
      },
      {
        name: "choreographyActivityShape",
        type: "BPMNShape",
        isAttr: !0,
        isReference: !0
      }
    ],
    superClass: [
      "di:LabeledShape"
    ]
  },
  {
    name: "BPMNEdge",
    properties: [
      {
        name: "label",
        type: "BPMNLabel"
      },
      {
        name: "bpmnElement",
        isAttr: !0,
        isReference: !0,
        type: "bpmn:BaseElement",
        redefines: "di:DiagramElement#modelElement"
      },
      {
        name: "sourceElement",
        isAttr: !0,
        isReference: !0,
        type: "di:DiagramElement",
        redefines: "di:Edge#source"
      },
      {
        name: "targetElement",
        isAttr: !0,
        isReference: !0,
        type: "di:DiagramElement",
        redefines: "di:Edge#target"
      },
      {
        name: "messageVisibleKind",
        type: "MessageVisibleKind",
        isAttr: !0,
        default: "initiating"
      }
    ],
    superClass: [
      "di:LabeledEdge"
    ]
  },
  {
    name: "BPMNLabel",
    properties: [
      {
        name: "labelStyle",
        type: "BPMNLabelStyle",
        isAttr: !0,
        isReference: !0,
        redefines: "di:DiagramElement#style"
      }
    ],
    superClass: [
      "di:Label"
    ]
  },
  {
    name: "BPMNLabelStyle",
    properties: [
      {
        name: "font",
        type: "dc:Font"
      }
    ],
    superClass: [
      "di:Style"
    ]
  }
], OC = [
  {
    name: "ParticipantBandKind",
    literalValues: [
      {
        name: "top_initiating"
      },
      {
        name: "middle_initiating"
      },
      {
        name: "bottom_initiating"
      },
      {
        name: "top_non_initiating"
      },
      {
        name: "middle_non_initiating"
      },
      {
        name: "bottom_non_initiating"
      }
    ]
  },
  {
    name: "MessageVisibleKind",
    literalValues: [
      {
        name: "initiating"
      },
      {
        name: "non_initiating"
      }
    ]
  }
], NC = [], BC = {
  name: TC,
  uri: kC,
  prefix: MC,
  types: DC,
  enumerations: OC,
  associations: NC
}, LC = "DC", IC = "http://www.omg.org/spec/DD/20100524/DC", $C = "dc", jC = [
  {
    name: "Boolean"
  },
  {
    name: "Integer"
  },
  {
    name: "Real"
  },
  {
    name: "String"
  },
  {
    name: "Font",
    properties: [
      {
        name: "name",
        type: "String",
        isAttr: !0
      },
      {
        name: "size",
        type: "Real",
        isAttr: !0
      },
      {
        name: "isBold",
        type: "Boolean",
        isAttr: !0
      },
      {
        name: "isItalic",
        type: "Boolean",
        isAttr: !0
      },
      {
        name: "isUnderline",
        type: "Boolean",
        isAttr: !0
      },
      {
        name: "isStrikeThrough",
        type: "Boolean",
        isAttr: !0
      }
    ]
  },
  {
    name: "Point",
    properties: [
      {
        name: "x",
        type: "Real",
        default: "0",
        isAttr: !0
      },
      {
        name: "y",
        type: "Real",
        default: "0",
        isAttr: !0
      }
    ]
  },
  {
    name: "Bounds",
    properties: [
      {
        name: "x",
        type: "Real",
        default: "0",
        isAttr: !0
      },
      {
        name: "y",
        type: "Real",
        default: "0",
        isAttr: !0
      },
      {
        name: "width",
        type: "Real",
        isAttr: !0
      },
      {
        name: "height",
        type: "Real",
        isAttr: !0
      }
    ]
  }
], FC = [], HC = {
  name: LC,
  uri: IC,
  prefix: $C,
  types: jC,
  associations: FC
}, zC = "DI", VC = "http://www.omg.org/spec/DD/20100524/DI", WC = "di", GC = [
  {
    name: "DiagramElement",
    isAbstract: !0,
    properties: [
      {
        name: "id",
        isAttr: !0,
        isId: !0,
        type: "String"
      },
      {
        name: "extension",
        type: "Extension"
      },
      {
        name: "owningDiagram",
        type: "Diagram",
        isReadOnly: !0,
        isVirtual: !0,
        isReference: !0
      },
      {
        name: "owningElement",
        type: "DiagramElement",
        isReadOnly: !0,
        isVirtual: !0,
        isReference: !0
      },
      {
        name: "modelElement",
        isReadOnly: !0,
        isVirtual: !0,
        isReference: !0,
        type: "Element"
      },
      {
        name: "style",
        type: "Style",
        isReadOnly: !0,
        isVirtual: !0,
        isReference: !0
      },
      {
        name: "ownedElement",
        type: "DiagramElement",
        isReadOnly: !0,
        isMany: !0,
        isVirtual: !0
      }
    ]
  },
  {
    name: "Node",
    isAbstract: !0,
    superClass: [
      "DiagramElement"
    ]
  },
  {
    name: "Edge",
    isAbstract: !0,
    superClass: [
      "DiagramElement"
    ],
    properties: [
      {
        name: "source",
        type: "DiagramElement",
        isReadOnly: !0,
        isVirtual: !0,
        isReference: !0
      },
      {
        name: "target",
        type: "DiagramElement",
        isReadOnly: !0,
        isVirtual: !0,
        isReference: !0
      },
      {
        name: "waypoint",
        isUnique: !1,
        isMany: !0,
        type: "dc:Point",
        xml: {
          serialize: "xsi:type"
        }
      }
    ]
  },
  {
    name: "Diagram",
    isAbstract: !0,
    properties: [
      {
        name: "id",
        isAttr: !0,
        isId: !0,
        type: "String"
      },
      {
        name: "rootElement",
        type: "DiagramElement",
        isReadOnly: !0,
        isVirtual: !0
      },
      {
        name: "name",
        isAttr: !0,
        type: "String"
      },
      {
        name: "documentation",
        isAttr: !0,
        type: "String"
      },
      {
        name: "resolution",
        isAttr: !0,
        type: "Real"
      },
      {
        name: "ownedStyle",
        type: "Style",
        isReadOnly: !0,
        isMany: !0,
        isVirtual: !0
      }
    ]
  },
  {
    name: "Shape",
    isAbstract: !0,
    superClass: [
      "Node"
    ],
    properties: [
      {
        name: "bounds",
        type: "dc:Bounds"
      }
    ]
  },
  {
    name: "Plane",
    isAbstract: !0,
    superClass: [
      "Node"
    ],
    properties: [
      {
        name: "planeElement",
        type: "DiagramElement",
        subsettedProperty: "DiagramElement-ownedElement",
        isMany: !0
      }
    ]
  },
  {
    name: "LabeledEdge",
    isAbstract: !0,
    superClass: [
      "Edge"
    ],
    properties: [
      {
        name: "ownedLabel",
        type: "Label",
        isReadOnly: !0,
        subsettedProperty: "DiagramElement-ownedElement",
        isMany: !0,
        isVirtual: !0
      }
    ]
  },
  {
    name: "LabeledShape",
    isAbstract: !0,
    superClass: [
      "Shape"
    ],
    properties: [
      {
        name: "ownedLabel",
        type: "Label",
        isReadOnly: !0,
        subsettedProperty: "DiagramElement-ownedElement",
        isMany: !0,
        isVirtual: !0
      }
    ]
  },
  {
    name: "Label",
    isAbstract: !0,
    superClass: [
      "Node"
    ],
    properties: [
      {
        name: "bounds",
        type: "dc:Bounds"
      }
    ]
  },
  {
    name: "Style",
    isAbstract: !0,
    properties: [
      {
        name: "id",
        isAttr: !0,
        isId: !0,
        type: "String"
      }
    ]
  },
  {
    name: "Extension",
    properties: [
      {
        name: "values",
        isMany: !0,
        type: "Element"
      }
    ]
  }
], UC = [], YC = {
  tagAlias: "lowerCase"
}, KC = {
  name: zC,
  uri: VC,
  prefix: WC,
  types: GC,
  associations: UC,
  xml: YC
}, qC = "bpmn.io colors for BPMN", XC = "http://bpmn.io/schema/bpmn/biocolor/1.0", ZC = "bioc", JC = [
  {
    name: "ColoredShape",
    extends: [
      "bpmndi:BPMNShape"
    ],
    properties: [
      {
        name: "stroke",
        isAttr: !0,
        type: "String"
      },
      {
        name: "fill",
        isAttr: !0,
        type: "String"
      }
    ]
  },
  {
    name: "ColoredEdge",
    extends: [
      "bpmndi:BPMNEdge"
    ],
    properties: [
      {
        name: "stroke",
        isAttr: !0,
        type: "String"
      },
      {
        name: "fill",
        isAttr: !0,
        type: "String"
      }
    ]
  }
], QC = [], eA = [], tA = {
  name: qC,
  uri: XC,
  prefix: ZC,
  types: JC,
  enumerations: QC,
  associations: eA
}, nA = "BPMN in Color", iA = "http://www.omg.org/spec/BPMN/non-normative/color/1.0", rA = "color", oA = [
  {
    name: "ColoredLabel",
    extends: [
      "bpmndi:BPMNLabel"
    ],
    properties: [
      {
        name: "color",
        isAttr: !0,
        type: "String"
      }
    ]
  },
  {
    name: "ColoredShape",
    extends: [
      "bpmndi:BPMNShape"
    ],
    properties: [
      {
        name: "background-color",
        isAttr: !0,
        type: "String"
      },
      {
        name: "border-color",
        isAttr: !0,
        type: "String"
      }
    ]
  },
  {
    name: "ColoredEdge",
    extends: [
      "bpmndi:BPMNEdge"
    ],
    properties: [
      {
        name: "border-color",
        isAttr: !0,
        type: "String"
      }
    ]
  }
], aA = [], sA = [], cA = {
  name: nA,
  uri: iA,
  prefix: rA,
  types: oA,
  enumerations: aA,
  associations: sA
}, lA = {
  bpmn: PC,
  bpmndi: BC,
  dc: HC,
  di: KC,
  bioc: tA,
  color: cA
};
function uA(e, t) {
  var n = U({}, lA, e);
  return new Su(n, t);
}
function Nn(e) {
  return e ? "<" + e.$type + (e.id ? ' id="' + e.id : "") + '" />' : "<null>";
}
var pA = "Tried to access di from the businessObject. The di is available through the diagram element only. For more information, see https://github.com/bpmn-io/bpmn-js/issues/1472";
function X_(e) {
  Jn(e, "di") || Object.defineProperty(e, "di", {
    enumerable: !1,
    get: function() {
      throw new Error(pA);
    }
  });
}
function Zn(e, t) {
  return e.$instanceOf(t);
}
function fA(e) {
  return gt(e.rootElements, function(t) {
    return Zn(t, "bpmn:Process") || Zn(t, "bpmn:Collaboration");
  });
}
function dA(e) {
  var t = {}, n = [], i = {};
  function r(oe, se) {
    return function(fe) {
      oe(fe, se);
    };
  }
  function o(oe) {
    t[oe.id] = oe;
  }
  function a(oe) {
    return t[oe.id];
  }
  function c(oe, se) {
    var fe = oe.gfx;
    if (fe)
      throw new Error(
        `already rendered ${Nn(oe)}`
      );
    return e.element(oe, i[oe.id], se);
  }
  function l(oe, se) {
    return e.root(oe, i[oe.id], se);
  }
  function u(oe, se) {
    try {
      var fe = i[oe.id] && c(oe, se);
      return o(oe), fe;
    } catch (ct) {
      d(ct.message, { element: oe, error: ct }), console.error(`failed to import ${Nn(oe)}`, ct);
    }
  }
  function d(oe, se) {
    e.error(oe, se);
  }
  var f = this.registerDi = function(se) {
    var fe = se.bpmnElement;
    fe ? i[fe.id] ? d(
      `multiple DI elements defined for ${Nn(fe)}`,
      { element: fe }
    ) : (i[fe.id] = se, X_(fe)) : d(
      `no bpmnElement referenced in ${Nn(se)}`,
      { element: se }
    );
  };
  function y(oe) {
    g(oe.plane);
  }
  function g(oe) {
    f(oe), z(oe.planeElement, _);
  }
  function _(oe) {
    f(oe);
  }
  this.handleDefinitions = function(se, fe) {
    var ct = se.diagrams;
    if (fe && ct.indexOf(fe) === -1)
      throw new Error("diagram not part of <bpmn:Definitions />");
    if (!fe && ct && ct.length && (fe = ct[0]), !fe)
      throw new Error("no diagram to display");
    i = {}, y(fe);
    var Lt = fe.plane;
    if (!Lt)
      throw new Error(
        `no plane for ${Nn(fe)}`
      );
    var Et = Lt.bpmnElement;
    if (!Et)
      if (Et = fA(se), Et)
        d(
          `correcting missing bpmnElement on ${Nn(Lt)} to ${Nn(Et)}`
        ), Lt.bpmnElement = Et, f(Lt);
      else
        throw new Error("no process or collaboration to display");
    var Ne = l(Et, Lt);
    if (Zn(Et, "bpmn:Process") || Zn(Et, "bpmn:SubProcess"))
      w(Et, Ne);
    else if (Zn(Et, "bpmn:Collaboration"))
      Pt(Et, Ne), B(se.rootElements, Ne);
    else
      throw new Error(
        `unsupported bpmnElement for ${Nn(Lt)}: ${Nn(Et)}`
      );
    x(n);
  };
  var x = this.handleDeferred = function() {
    for (var se; n.length; )
      se = n.shift(), se();
  };
  function w(oe, se) {
    Ve(oe, se), Z(oe.ioSpecification, se), $(oe.artifacts, se), o(oe);
  }
  function B(oe, se) {
    var fe = tt(oe, function(ct) {
      return !a(ct) && Zn(ct, "bpmn:Process") && ct.laneSets;
    });
    fe.forEach(r(w, se));
  }
  function N(oe, se) {
    u(oe, se);
  }
  function k(oe, se) {
    z(oe, r(N, se));
  }
  function A(oe, se) {
    u(oe, se);
  }
  function D(oe, se) {
    u(oe, se);
  }
  function j(oe, se) {
    u(oe, se);
  }
  function W(oe, se) {
    u(oe, se);
  }
  function $(oe, se) {
    z(oe, function(fe) {
      Zn(fe, "bpmn:Association") ? n.push(function() {
        W(fe, se);
      }) : W(fe, se);
    });
  }
  function Z(oe, se) {
    oe && (z(oe.dataInputs, r(D, se)), z(oe.dataOutputs, r(j, se)));
  }
  var X = this.handleSubProcess = function(se, fe) {
    Ve(se, fe), $(se.artifacts, fe);
  };
  function V(oe, se) {
    var fe = u(oe, se);
    Zn(oe, "bpmn:SubProcess") && X(oe, fe || se), Zn(oe, "bpmn:Activity") && Z(oe.ioSpecification, se), n.push(function() {
      z(oe.dataInputAssociations, r(A, se)), z(oe.dataOutputAssociations, r(A, se));
    });
  }
  function ae(oe, se) {
    u(oe, se);
  }
  function ie(oe, se) {
    u(oe, se);
  }
  function Ae(oe, se) {
    n.push(function() {
      var fe = u(oe, se);
      oe.childLaneSet && Rt(oe.childLaneSet, fe || se), Kt(oe);
    });
  }
  function Rt(oe, se) {
    z(oe.lanes, r(Ae, se));
  }
  function it(oe, se) {
    z(oe, r(Rt, se));
  }
  function Ve(oe, se) {
    Zt(oe.flowElements, se), oe.laneSets && it(oe.laneSets, se);
  }
  function Zt(oe, se) {
    z(oe, function(fe) {
      Zn(fe, "bpmn:SequenceFlow") ? n.push(function() {
        ae(fe, se);
      }) : Zn(fe, "bpmn:BoundaryEvent") ? n.unshift(function() {
        V(fe, se);
      }) : Zn(fe, "bpmn:FlowNode") ? V(fe, se) : Zn(fe, "bpmn:DataObject") || (Zn(fe, "bpmn:DataStoreReference") || Zn(fe, "bpmn:DataObjectReference") ? ie(fe, se) : d(
        `unrecognized flowElement ${Nn(fe)} in context ${Nn(se && se.businessObject)}`,
        {
          element: fe,
          context: se
        }
      ));
    });
  }
  function sn(oe, se) {
    var fe = u(oe, se), ct = oe.processRef;
    ct && w(ct, fe || se);
  }
  function Pt(oe, se) {
    z(oe.participants, r(sn, se)), $(oe.artifacts, se), n.push(function() {
      k(oe.messageFlows, se);
    });
  }
  function Kt(oe) {
    z(oe.flowNodeRef, function(se) {
      var fe = se.get("lanes");
      fe && fe.push(oe);
    });
  }
}
function P(e, t) {
  var n = he(e);
  return n && typeof n.$instanceOf == "function" && n.$instanceOf(t);
}
function rt(e, t) {
  return so(t, function(n) {
    return P(e, n);
  });
}
function he(e) {
  return e && e.businessObject || e;
}
function bt(e) {
  return e && e.di;
}
function hA(e, t, n) {
  var i, r, o, a, c = [];
  function l(u, d) {
    var f = {
      root: function(x, w) {
        return i.add(x, w);
      },
      element: function(x, w, B) {
        return i.add(x, w, B);
      },
      error: function(x, w) {
        c.push({ message: x, context: w });
      }
    }, y = new dA(f);
    d = d || u.diagrams && u.diagrams[0];
    var g = mA(u, d);
    if (!g)
      throw new Error("no diagram to display");
    z(g, function(x) {
      y.handleDefinitions(u, x);
    });
    var _ = d.plane.bpmnElement.id;
    o.setRootElement(
      o.findRoot(_ + "_plane") || o.findRoot(_)
    );
  }
  return new Promise(function(u, d) {
    try {
      return i = e.get("bpmnImporter"), r = e.get("eventBus"), o = e.get("canvas"), r.fire("import.render.start", { definitions: t }), l(t, n), r.fire("import.render.complete", {
        error: a,
        warnings: c
      }), u({ warnings: c });
    } catch (f) {
      return f.warnings = c, d(f);
    }
  });
}
function mA(e, t) {
  if (t) {
    var n = t.plane.bpmnElement, i = n;
    !P(n, "bpmn:Process") && !P(n, "bpmn:Collaboration") && (i = yA(n));
    var r;
    P(i, "bpmn:Collaboration") ? r = i : r = gt(e.rootElements, function(u) {
      if (P(u, "bpmn:Collaboration"))
        return gt(u.participants, function(d) {
          return d.processRef === i;
        });
    });
    var o = [i];
    r && (o = gn(r.participants, function(u) {
      return u.processRef;
    }), o.push(r));
    var a = Z_(o), c = [t], l = [n];
    return z(e.diagrams, function(u) {
      var d = u.plane.bpmnElement;
      a.indexOf(d) !== -1 && l.indexOf(d) === -1 && (c.push(u), l.push(d));
    }), c;
  }
}
function Z_(e) {
  var t = [];
  return z(e, function(n) {
    n && (t.push(n), t = t.concat(Z_(n.flowElements)));
  }), t;
}
function yA(e) {
  for (var t = e; t; ) {
    if (P(t, "bpmn:Process"))
      return t;
    t = t.$parent;
  }
}
var gA = '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 14.02 5.57" width="53" height="21"><path fill="currentColor" d="M1.88.92v.14c0 .41-.13.68-.4.8.33.14.46.44.46.86v.33c0 .61-.33.95-.95.95H0V0h.95c.65 0 .93.3.93.92zM.63.57v1.06h.24c.24 0 .38-.1.38-.43V.98c0-.28-.1-.4-.32-.4zm0 1.63v1.22h.36c.2 0 .32-.1.32-.39v-.35c0-.37-.12-.48-.4-.48H.63zM4.18.99v.52c0 .64-.31.98-.94.98h-.3V4h-.62V0h.92c.63 0 .94.35.94.99zM2.94.57v1.35h.3c.2 0 .3-.09.3-.37v-.6c0-.29-.1-.38-.3-.38h-.3zm2.89 2.27L6.25 0h.88v4h-.6V1.12L6.1 3.99h-.6l-.46-2.82v2.82h-.55V0h.87zM8.14 1.1V4h-.56V0h.79L9 2.4V0h.56v4h-.64zm2.49 2.29v.6h-.6v-.6zM12.12 1c0-.63.33-1 .95-1 .61 0 .95.37.95 1v2.04c0 .64-.34 1-.95 1-.62 0-.95-.37-.95-1zm.62 2.08c0 .28.13.39.33.39s.32-.1.32-.4V.98c0-.29-.12-.4-.32-.4s-.33.11-.33.4z"/><path fill="currentColor" d="M0 4.53h14.02v1.04H0zM11.08 0h.63v.62h-.63zm.63 4V1h-.63v2.98z"/></svg>', J_ = gA, Q_ = {
  verticalAlign: "middle"
}, eb = {
  color: "#404040"
}, vA = {
  zIndex: "1001",
  position: "fixed",
  top: "0",
  left: "0",
  right: "0",
  bottom: "0"
}, _A = {
  width: "100%",
  height: "100%",
  background: "rgba(40,40,40,0.2)"
}, bA = {
  position: "absolute",
  left: "50%",
  top: "40%",
  transform: "translate(-50%)",
  width: "260px",
  padding: "10px",
  background: "white",
  boxShadow: "0 1px 4px rgba(0,0,0,0.3)",
  fontFamily: "Helvetica, Arial, sans-serif",
  fontSize: "14px",
  display: "flex",
  lineHeight: "1.3"
}, xA = '<div class="bjs-powered-by-lightbox"><div class="backdrop"></div><div class="notice"><a href="https://bpmn.io" target="_blank" rel="noopener" class="link">' + J_ + '</a><span>Web-based tooling for BPMN, DMN and forms powered by <a href="https://bpmn.io" target="_blank" rel="noopener">bpmn.io</a>.</span></div></div>', ir;
function EA() {
  ir = Ot(xA), Cn(ir, vA), Cn(Tt("svg", ir), Q_), Cn(Tt(".backdrop", ir), _A), Cn(Tt(".notice", ir), bA), Cn(Tt(".link", ir), eb, {
    margin: "15px 20px 15px 10px",
    alignSelf: "center"
  });
}
function wA() {
  ir || (EA(), si.bind(ir, ".backdrop", "click", function(e) {
    document.body.removeChild(ir);
  })), document.body.appendChild(ir);
}
function zt(e) {
  e = U({}, RA, e), this._moddle = this._createModdle(e), this._container = this._createContainer(e), AA(this._container), this._init(this._container, this._moddle, e);
}
Pe(zt, uo);
zt.prototype.importXML = async function(t, n) {
  const i = this;
  function r(a) {
    return i.get("eventBus").createEvent(a);
  }
  let o = [];
  try {
    t = this._emit("import.parse.start", { xml: t }) || t;
    let a;
    try {
      a = await this._moddle.fromXML(t, "bpmn:Definitions");
    } catch (y) {
      throw this._emit("import.parse.complete", {
        error: y
      }), y;
    }
    let c = a.rootElement;
    const l = a.references, u = a.warnings, d = a.elementsById;
    o = o.concat(u), c = this._emit("import.parse.complete", r({
      error: null,
      definitions: c,
      elementsById: d,
      references: l,
      warnings: o
    })) || c;
    const f = await this.importDefinitions(c, n);
    return o = o.concat(f.warnings), this._emit("import.done", { error: null, warnings: o }), { warnings: o };
  } catch (a) {
    let c = a;
    throw o = o.concat(c.warnings || []), Ll(c, o), c = SA(c), this._emit("import.done", { error: c, warnings: c.warnings }), c;
  }
};
zt.prototype.importDefinitions = async function(t, n) {
  return this._setDefinitions(t), { warnings: (await this.open(n)).warnings };
};
zt.prototype.open = async function(t) {
  const n = this._definitions;
  let i = t;
  if (!n) {
    const o = new Error("no XML imported");
    throw Ll(o, []), o;
  }
  if (typeof t == "string" && (i = CA(n, t), !i)) {
    const o = new Error("BPMNDiagram <" + t + "> not found");
    throw Ll(o, []), o;
  }
  try {
    this.clear();
  } catch (o) {
    throw Ll(o, []), o;
  }
  const { warnings: r } = await hA(this, n, i);
  return { warnings: r };
};
zt.prototype.saveXML = async function(t) {
  t = t || {};
  let n = this._definitions, i, r;
  try {
    if (!n)
      throw new Error("no definitions loaded");
    n = this._emit("saveXML.start", {
      definitions: n
    }) || n, r = (await this._moddle.toXML(n, t)).xml, r = this._emit("saveXML.serialized", {
      xml: r
    }) || r;
  } catch (a) {
    i = a;
  }
  const o = i ? { error: i } : { xml: r };
  if (this._emit("saveXML.done", o), i)
    throw i;
  return o;
};
zt.prototype.saveSVG = async function() {
  this._emit("saveSVG.start");
  let t, n;
  try {
    const i = this.get("canvas"), r = i.getActiveLayer(), o = Tt("defs", i._svg), a = Vy(r), c = o ? "<defs>" + Vy(o) + "</defs>" : "", l = r.getBBox();
    t = `<?xml version="1.0" encoding="utf-8"?>
<!-- created with bpmn-js / http://bpmn.io -->
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="` + l.width + '" height="' + l.height + '" viewBox="' + l.x + " " + l.y + " " + l.width + " " + l.height + '" version="1.1">' + c + a + "</svg>";
  } catch (i) {
    n = i;
  }
  if (this._emit("saveSVG.done", {
    error: n,
    svg: t
  }), n)
    throw n;
  return { svg: t };
};
zt.prototype._setDefinitions = function(e) {
  this._definitions = e;
};
zt.prototype.getModules = function() {
  return this._modules;
};
zt.prototype.clear = function() {
  this.getDefinitions() && uo.prototype.clear.call(this);
};
zt.prototype.destroy = function() {
  uo.prototype.destroy.call(this), cr(this._container);
};
zt.prototype.on = function(e, t, n, i) {
  return this.get("eventBus").on(e, t, n, i);
};
zt.prototype.off = function(e, t) {
  this.get("eventBus").off(e, t);
};
zt.prototype.attachTo = function(e) {
  if (!e)
    throw new Error("parentNode required");
  this.detach(), e.get && e.constructor.prototype.jquery && (e = e.get(0)), typeof e == "string" && (e = Tt(e)), e.appendChild(this._container), this._emit("attach", {}), this.get("canvas").resized();
};
zt.prototype.getDefinitions = function() {
  return this._definitions;
};
zt.prototype.detach = function() {
  const e = this._container, t = e.parentNode;
  t && (this._emit("detach", {}), t.removeChild(e));
};
zt.prototype._init = function(e, t, n) {
  const i = n.modules || this.getModules(n), r = n.additionalModules || [], o = [
    {
      bpmnjs: ["value", this],
      moddle: ["value", t]
    }
  ], a = [].concat(o, i, r), c = U(ur(n, ["additionalModules"]), {
    canvas: U({}, n.canvas, { container: e }),
    modules: a
  });
  uo.call(this, c), n && n.container && this.attachTo(n.container);
};
zt.prototype._emit = function(e, t) {
  return this.get("eventBus").fire(e, t);
};
zt.prototype._createContainer = function(e) {
  const t = Ot('<div class="bjs-container"></div>');
  return Cn(t, {
    width: lg(e.width),
    height: lg(e.height),
    position: e.position
  }), t;
};
zt.prototype._createModdle = function(e) {
  const t = U({}, this._moddleExtensions, e.moddleExtensions);
  return new uA(t);
};
zt.prototype._modules = [];
function Ll(e, t) {
  return e.warnings = t, e;
}
function SA(e) {
  const n = /unparsable content <([^>]+)> detected([\s\S]*)$/.exec(e.message);
  return n && (e.message = "unparsable content <" + n[1] + "> detected; this may indicate an invalid BPMN 2.0 diagram file" + n[2]), e;
}
const RA = {
  width: "100%",
  height: "100%",
  position: "relative"
};
function lg(e) {
  return e + (je(e) ? "px" : "");
}
function CA(e, t) {
  return t && gt(e.diagrams, function(n) {
    return n.id === t;
  }) || null;
}
function AA(e) {
  const n = '<a href="http://bpmn.io" target="_blank" class="bjs-powered-by" title="Powered by bpmn.io" >' + J_ + "</a>", i = Ot(n);
  Cn(Tt("svg", i), Q_), Cn(i, eb, {
    position: "absolute",
    bottom: "15px",
    right: "15px",
    zIndex: "100"
  }), e.appendChild(i), Ye.bind(i, "click", function(r) {
    wA(), r.preventDefault();
  });
}
function ac(e) {
  zt.call(this, e), this.on("import.parse.complete", function(t) {
    t.error || this._collectIds(t.definitions, t.elementsById);
  }, this), this.on("diagram.destroy", function() {
    this.get("moddle").ids.clear();
  }, this);
}
Pe(ac, zt);
ac.prototype._createModdle = function(e) {
  var t = zt.prototype._createModdle.call(this, e);
  return t.ids = new sr([32, 36, 1]), t;
};
ac.prototype._collectIds = function(e, t) {
  var n = e.$model, i = n.ids, r;
  i.clear();
  for (r in t)
    i.claim(r, t[r]);
};
function pt(e, t) {
  return P(e, "bpmn:CallActivity") ? !1 : P(e, "bpmn:SubProcess") ? (t = t || bt(e), t && P(t, "bpmndi:BPMNPlane") ? !0 : t && !!t.isExpanded) : P(e, "bpmn:Participant") ? !!he(e).processRef : !0;
}
function Pn(e) {
  if (!(!P(e, "bpmn:Participant") && !P(e, "bpmn:Lane"))) {
    var t = bt(e).isHorizontal;
    return t === void 0 ? !0 : t;
  }
}
function PA(e) {
  return e && he(e).isInterrupting !== !1;
}
function Bn(e) {
  return e && !!he(e).triggeredByEvent;
}
function sc(e, t) {
  var n = he(e).eventDefinitions;
  return so(n, function(i) {
    return P(i, t);
  });
}
function TA(e) {
  return sc(e, "bpmn:ErrorEventDefinition");
}
function kA(e) {
  return sc(e, "bpmn:EscalationEventDefinition");
}
function MA(e) {
  return sc(e, "bpmn:CompensateEventDefinition");
}
var Fs = {
  width: 90,
  height: 20
}, ug = 15;
function Xo(e) {
  return P(e, "bpmn:Event") || P(e, "bpmn:Gateway") || P(e, "bpmn:DataStoreReference") || P(e, "bpmn:DataObjectReference") || P(e, "bpmn:DataInput") || P(e, "bpmn:DataOutput") || P(e, "bpmn:SequenceFlow") || P(e, "bpmn:MessageFlow") || P(e, "bpmn:Group");
}
function Ru(e) {
  return vt(e.label);
}
function DA(e) {
  var t = e.length / 2 - 1, n = e[Math.floor(t)], i = e[Math.ceil(t + 0.01)], r = OA(e), o = Math.atan((i.y - n.y) / (i.x - n.x)), a = r.x, c = r.y;
  return Math.abs(o) < Math.PI / 2 ? c -= ug : a += ug, { x: a, y: c };
}
function OA(e) {
  var t = e.length / 2 - 1, n = e[Math.floor(t)], i = e[Math.ceil(t + 0.01)];
  return {
    x: n.x + (i.x - n.x) / 2,
    y: n.y + (i.y - n.y) / 2
  };
}
function Dd(e) {
  return e.waypoints ? DA(e.waypoints) : P(e, "bpmn:Group") ? {
    x: e.x + e.width / 2,
    y: e.y + Fs.height / 2
  } : {
    x: e.x + e.width / 2,
    y: e.y + e.height + Fs.height / 2
  };
}
function NA(e, t) {
  var n, i, r, o = e.label;
  return o && o.bounds ? (r = o.bounds, i = {
    width: Math.max(Fs.width, r.width),
    height: r.height
  }, n = {
    x: r.x + r.width / 2,
    y: r.y + r.height / 2
  }) : (n = Dd(t), i = Fs), U({
    x: n.x - i.width / 2,
    y: n.y - i.height / 2
  }, i);
}
function tb(e) {
  if (P(e, "bpmn:FlowElement") || P(e, "bpmn:Participant") || P(e, "bpmn:Lane") || P(e, "bpmn:SequenceFlow") || P(e, "bpmn:MessageFlow") || P(e, "bpmn:DataInput") || P(e, "bpmn:DataOutput"))
    return "name";
  if (P(e, "bpmn:TextAnnotation"))
    return "text";
  if (P(e, "bpmn:Group"))
    return "categoryValueRef";
}
function BA(e) {
  var t = e.categoryValueRef;
  return t && t.value || "";
}
function ki(e) {
  var t = e.businessObject, n = tb(t);
  if (n)
    return n === "categoryValueRef" ? BA(t) : t[n] || "";
}
function LA(e, t) {
  var n = e.businessObject, i = tb(n);
  return i && (i === "categoryValueRef" ? n.categoryValueRef.value = t : n[i] = t), e;
}
var If = "hsl(225, 10%, 15%)", IA = "white";
function er(e, t) {
  return so(e.eventDefinitions, function(n) {
    return n.$type === t;
  });
}
function $A(e) {
  return e.$type === "bpmn:IntermediateThrowEvent" || e.$type === "bpmn:EndEvent";
}
function jA(e) {
  var t = e.dataObjectRef;
  return e.isCollection || t && t.isCollection;
}
function ot(e, t, n) {
  var i = bt(e);
  return n || i.get("color:background-color") || i.get("bioc:fill") || t || IA;
}
function Ce(e, t, n) {
  var i = bt(e);
  return n || i.get("color:border-color") || i.get("bioc:stroke") || t || If;
}
function _s(e, t, n, i) {
  var r = bt(e), o = r.get("label");
  return i || o && o.get("color:color") || t || Ce(e, n);
}
function FA(e) {
  var t = e.x + e.width / 2, n = e.y + e.height / 2, i = e.width / 2, r = [
    ["M", t, n],
    ["m", 0, -i],
    ["a", i, i, 0, 1, 1, 0, 2 * i],
    ["a", i, i, 0, 1, 1, 0, -2 * i],
    ["z"]
  ];
  return ea(r);
}
function HA(e, t) {
  var n = e.x, i = e.y, r = e.width, o = e.height, a = [
    ["M", n + t, i],
    ["l", r - t * 2, 0],
    ["a", t, t, 0, 0, 1, t, t],
    ["l", 0, o - t * 2],
    ["a", t, t, 0, 0, 1, -t, t],
    ["l", t * 2 - r, 0],
    ["a", t, t, 0, 0, 1, -t, -t],
    ["l", 0, t * 2 - o],
    ["a", t, t, 0, 0, 1, t, -t],
    ["z"]
  ];
  return ea(a);
}
function zA(e) {
  var t = e.width, n = e.height, i = e.x, r = e.y, o = t / 2, a = n / 2, c = [
    ["M", i + o, r],
    ["l", o, a],
    ["l", -o, a],
    ["l", -o, -a],
    ["z"]
  ];
  return ea(c);
}
function VA(e) {
  var t = e.x, n = e.y, i = e.width, r = e.height, o = [
    ["M", t, n],
    ["l", i, 0],
    ["l", 0, r],
    ["l", -i, 0],
    ["z"]
  ];
  return ea(o);
}
function bs(e, t = {}) {
  return {
    width: Ri(e, t),
    height: ai(e, t)
  };
}
function Ri(e, t = {}) {
  return Jn(t, "width") ? t.width : e.width;
}
function ai(e, t = {}) {
  return Jn(t, "height") ? t.height : e.height;
}
var WA = new sr(), GA = 10, sl = 3, UA = 1.5, Il = 10, Ca = 0.95, YA = 1, KA = 0.25;
function ia(e, t, n, i, r, o, a) {
  Dr.call(this, t, a);
  var c = e && e.defaultFillColor, l = e && e.defaultStrokeColor, u = e && e.defaultLabelColor, d = WA.next(), f = {};
  function y(I) {
    return n.computeStyle(I, {
      strokeLinecap: "round",
      strokeLinejoin: "round",
      stroke: If,
      strokeWidth: 2,
      fill: "white"
    });
  }
  function g(I) {
    return n.computeStyle(I, ["no-fill"], {
      strokeLinecap: "round",
      strokeLinejoin: "round",
      stroke: If,
      strokeWidth: 2
    });
  }
  function _(I, E) {
    var {
      ref: C = { x: 0, y: 0 },
      scale: F = 1,
      element: K
    } = E, ne = Me("marker", {
      id: I,
      viewBox: "0 0 20 20",
      refX: C.x,
      refY: C.y,
      markerWidth: 20 * F,
      markerHeight: 20 * F,
      orient: "auto"
    });
    ze(ne, K);
    var ke = Tt("defs", r._svg);
    ke || (ke = Me("defs"), ze(r._svg, ke)), ze(ke, ne), f[I] = ne;
  }
  function x(I) {
    return I.replace(/[^0-9a-zA-Z]+/g, "_");
  }
  function w(I, E, C) {
    var F = I + "-" + x(E) + "-" + x(C) + "-" + d;
    return f[F] || B(F, I, E, C), "url(#" + F + ")";
  }
  function B(I, E, C, F) {
    if (E === "sequenceflow-end") {
      var K = Me("path", {
        d: "M 1 5 L 11 10 L 1 15 Z",
        ...y({
          fill: F,
          stroke: F,
          strokeWidth: 1
        })
      });
      _(I, {
        element: K,
        ref: { x: 11, y: 10 },
        scale: 0.5
      });
    }
    if (E === "messageflow-start") {
      var ne = Me("circle", {
        cx: 6,
        cy: 6,
        r: 3.5,
        ...y({
          fill: C,
          stroke: F,
          strokeWidth: 1,
          // fix for safari / chrome / firefox bug not correctly
          // resetting stroke dash array
          strokeDasharray: [1e4, 1]
        })
      });
      _(I, {
        element: ne,
        ref: { x: 6, y: 6 }
      });
    }
    if (E === "messageflow-end") {
      var ke = Me("path", {
        d: "m 1 5 l 0 -3 l 7 3 l -7 3 z",
        ...y({
          fill: C,
          stroke: F,
          strokeWidth: 1,
          // fix for safari / chrome / firefox bug not correctly
          // resetting stroke dash array
          strokeDasharray: [1e4, 1]
        })
      });
      _(I, {
        element: ke,
        ref: { x: 8.5, y: 5 }
      });
    }
    if (E === "association-start") {
      var Qe = Me("path", {
        d: "M 11 5 L 1 10 L 11 15",
        ...g({
          fill: "none",
          stroke: F,
          strokeWidth: 1.5,
          // fix for safari / chrome / firefox bug not correctly
          // resetting stroke dash array
          strokeDasharray: [1e4, 1]
        })
      });
      _(I, {
        element: Qe,
        ref: { x: 1, y: 10 },
        scale: 0.5
      });
    }
    if (E === "association-end") {
      var Ee = Me("path", {
        d: "M 1 5 L 11 10 L 1 15",
        ...g({
          fill: "none",
          stroke: F,
          strokeWidth: 1.5,
          // fix for safari / chrome / firefox bug not correctly
          // resetting stroke dash array
          strokeDasharray: [1e4, 1]
        })
      });
      _(I, {
        element: Ee,
        ref: { x: 11, y: 10 },
        scale: 0.5
      });
    }
    if (E === "conditional-flow-marker") {
      var at = Me("path", {
        d: "M 0 10 L 8 6 L 16 10 L 8 14 Z",
        ...y({
          fill: C,
          stroke: F
        })
      });
      _(I, {
        element: at,
        ref: { x: -1, y: 10 },
        scale: 0.5
      });
    }
    if (E === "conditional-default-flow-marker") {
      var Mt = Me("path", {
        d: "M 6 4 L 10 16",
        ...y({
          stroke: F
        })
      });
      _(I, {
        element: Mt,
        ref: { x: 0, y: 10 },
        scale: 0.5
      });
    }
  }
  function N(I, E, C, F, K = {}) {
    vn(F) && (K = F, F = 0), F = F || 0, K = y(K);
    var ne = E / 2, ke = C / 2, Qe = Me("circle", {
      cx: ne,
      cy: ke,
      r: Math.round((E + C) / 4 - F),
      ...K
    });
    return ze(I, Qe), Qe;
  }
  function k(I, E, C, F, K, ne) {
    vn(K) && (ne = K, K = 0), K = K || 0, ne = y(ne);
    var ke = Me("rect", {
      x: K,
      y: K,
      width: E - K * 2,
      height: C - K * 2,
      rx: F,
      ry: F,
      ...ne
    });
    return ze(I, ke), ke;
  }
  function A(I, E, C, F) {
    var K = E / 2, ne = C / 2, ke = [
      { x: K, y: 0 },
      { x: E, y: ne },
      { x: K, y: C },
      { x: 0, y: ne }
    ], Qe = ke.map(function(at) {
      return at.x + "," + at.y;
    }).join(" ");
    F = y(F);
    var Ee = Me("polygon", {
      ...F,
      points: Qe
    });
    return ze(I, Ee), Ee;
  }
  function D(I, E, C, F) {
    C = g(C);
    var K = vu(E, C, F);
    return ze(I, K), K;
  }
  function j(I, E, C) {
    return D(I, E, C, 5);
  }
  function W(I, E, C) {
    C = g(C);
    var F = Me("path", {
      ...C,
      d: E
    });
    return ze(I, F), F;
  }
  function $(I, E, C, F) {
    return W(E, C, U({ "data-marker": I }, F));
  }
  function Z(I) {
    return Ne[I];
  }
  function X(I) {
    return function(E, C, F) {
      return Z(I)(E, C, F);
    };
  }
  var V = {
    "bpmn:MessageEventDefinition": function(I, E, C = {}, F) {
      var K = i.getScaledPath("EVENT_MESSAGE", {
        xScaleFactor: 0.9,
        yScaleFactor: 0.9,
        containerWidth: E.width,
        containerHeight: E.height,
        position: {
          mx: 0.235,
          my: 0.315
        }
      }), ne = F ? Ce(E, l, C.stroke) : ot(E, c, C.fill), ke = F ? ot(E, c, C.fill) : Ce(E, l, C.stroke), Qe = W(I, K, {
        fill: ne,
        stroke: ke,
        strokeWidth: 1
      });
      return Qe;
    },
    "bpmn:TimerEventDefinition": function(I, E, C = {}) {
      var F = N(I, E.width, E.height, 0.2 * E.height, {
        fill: ot(E, c, C.fill),
        stroke: Ce(E, l, C.stroke),
        strokeWidth: 2
      }), K = i.getScaledPath("EVENT_TIMER_WH", {
        xScaleFactor: 0.75,
        yScaleFactor: 0.75,
        containerWidth: E.width,
        containerHeight: E.height,
        position: {
          mx: 0.5,
          my: 0.5
        }
      });
      W(I, K, {
        stroke: Ce(E, l, C.stroke),
        strokeWidth: 2
      });
      for (var ne = 0; ne < 12; ne++) {
        var ke = i.getScaledPath("EVENT_TIMER_LINE", {
          xScaleFactor: 0.75,
          yScaleFactor: 0.75,
          containerWidth: E.width,
          containerHeight: E.height,
          position: {
            mx: 0.5,
            my: 0.5
          }
        }), Qe = E.width / 2, Ee = E.height / 2;
        W(I, ke, {
          strokeWidth: 1,
          stroke: Ce(E, l, C.stroke),
          transform: "rotate(" + ne * 30 + "," + Ee + "," + Qe + ")"
        });
      }
      return F;
    },
    "bpmn:EscalationEventDefinition": function(I, E, C = {}, F) {
      var K = i.getScaledPath("EVENT_ESCALATION", {
        xScaleFactor: 1,
        yScaleFactor: 1,
        containerWidth: E.width,
        containerHeight: E.height,
        position: {
          mx: 0.5,
          my: 0.2
        }
      }), ne = F ? Ce(E, l, C.stroke) : ot(E, c, C.fill);
      return W(I, K, {
        fill: ne,
        stroke: Ce(E, l, C.stroke),
        strokeWidth: 1
      });
    },
    "bpmn:ConditionalEventDefinition": function(I, E, C = {}) {
      var F = i.getScaledPath("EVENT_CONDITIONAL", {
        xScaleFactor: 1,
        yScaleFactor: 1,
        containerWidth: E.width,
        containerHeight: E.height,
        position: {
          mx: 0.5,
          my: 0.222
        }
      });
      return W(I, F, {
        fill: ot(E, c, C.fill),
        stroke: Ce(E, l, C.stroke),
        strokeWidth: 1
      });
    },
    "bpmn:LinkEventDefinition": function(I, E, C = {}, F) {
      var K = i.getScaledPath("EVENT_LINK", {
        xScaleFactor: 1,
        yScaleFactor: 1,
        containerWidth: E.width,
        containerHeight: E.height,
        position: {
          mx: 0.57,
          my: 0.263
        }
      }), ne = F ? Ce(E, l, C.stroke) : ot(E, c, C.fill);
      return W(I, K, {
        fill: ne,
        stroke: Ce(E, l, C.stroke),
        strokeWidth: 1
      });
    },
    "bpmn:ErrorEventDefinition": function(I, E, C = {}, F) {
      var K = i.getScaledPath("EVENT_ERROR", {
        xScaleFactor: 1.1,
        yScaleFactor: 1.1,
        containerWidth: E.width,
        containerHeight: E.height,
        position: {
          mx: 0.2,
          my: 0.722
        }
      }), ne = F ? Ce(E, l, C.stroke) : ot(E, c, C.fill);
      return W(I, K, {
        fill: ne,
        stroke: Ce(E, l, C.stroke),
        strokeWidth: 1
      });
    },
    "bpmn:CancelEventDefinition": function(I, E, C = {}, F) {
      var K = i.getScaledPath("EVENT_CANCEL_45", {
        xScaleFactor: 1,
        yScaleFactor: 1,
        containerWidth: E.width,
        containerHeight: E.height,
        position: {
          mx: 0.638,
          my: -0.055
        }
      }), ne = F ? Ce(E, l, C.stroke) : "none", ke = W(I, K, {
        fill: ne,
        stroke: Ce(E, l, C.stroke),
        strokeWidth: 1
      });
      return B_(ke, 45), ke;
    },
    "bpmn:CompensateEventDefinition": function(I, E, C = {}, F) {
      var K = i.getScaledPath("EVENT_COMPENSATION", {
        xScaleFactor: 1,
        yScaleFactor: 1,
        containerWidth: E.width,
        containerHeight: E.height,
        position: {
          mx: 0.22,
          my: 0.5
        }
      }), ne = F ? Ce(E, l, C.stroke) : ot(E, c, C.fill);
      return W(I, K, {
        fill: ne,
        stroke: Ce(E, l, C.stroke),
        strokeWidth: 1
      });
    },
    "bpmn:SignalEventDefinition": function(I, E, C = {}, F) {
      var K = i.getScaledPath("EVENT_SIGNAL", {
        xScaleFactor: 0.9,
        yScaleFactor: 0.9,
        containerWidth: E.width,
        containerHeight: E.height,
        position: {
          mx: 0.5,
          my: 0.2
        }
      }), ne = F ? Ce(E, l, C.stroke) : ot(E, c, C.fill);
      return W(I, K, {
        strokeWidth: 1,
        fill: ne,
        stroke: Ce(E, l, C.stroke)
      });
    },
    "bpmn:MultipleEventDefinition": function(I, E, C = {}, F) {
      var K = i.getScaledPath("EVENT_MULTIPLE", {
        xScaleFactor: 1.1,
        yScaleFactor: 1.1,
        containerWidth: E.width,
        containerHeight: E.height,
        position: {
          mx: 0.222,
          my: 0.36
        }
      }), ne = F ? Ce(E, l, C.stroke) : ot(E, c, C.fill);
      return W(I, K, {
        fill: ne,
        strokeWidth: 1
      });
    },
    "bpmn:ParallelMultipleEventDefinition": function(I, E, C = {}) {
      var F = i.getScaledPath("EVENT_PARALLEL_MULTIPLE", {
        xScaleFactor: 1.2,
        yScaleFactor: 1.2,
        containerWidth: E.width,
        containerHeight: E.height,
        position: {
          mx: 0.458,
          my: 0.194
        }
      });
      return W(I, F, {
        fill: ot(E, c, C.fill),
        stroke: Ce(E, l, C.stroke),
        strokeWidth: 1
      });
    },
    "bpmn:TerminateEventDefinition": function(I, E, C = {}) {
      var F = N(I, E.width, E.height, 8, {
        fill: Ce(E, l, C.stroke),
        stroke: Ce(E, l, C.stroke),
        strokeWidth: 4
      });
      return F;
    }
  };
  function ae(I, E, C = {}) {
    var F = he(I), K = $A(F);
    return F.get("eventDefinitions") && F.get("eventDefinitions").length > 1 ? F.get("parallelMultiple") ? V["bpmn:ParallelMultipleEventDefinition"](E, I, C, K) : V["bpmn:MultipleEventDefinition"](E, I, C, K) : er(F, "bpmn:MessageEventDefinition") ? V["bpmn:MessageEventDefinition"](E, I, C, K) : er(F, "bpmn:TimerEventDefinition") ? V["bpmn:TimerEventDefinition"](E, I, C, K) : er(F, "bpmn:ConditionalEventDefinition") ? V["bpmn:ConditionalEventDefinition"](E, I, C, K) : er(F, "bpmn:SignalEventDefinition") ? V["bpmn:SignalEventDefinition"](E, I, C, K) : er(F, "bpmn:EscalationEventDefinition") ? V["bpmn:EscalationEventDefinition"](E, I, C, K) : er(F, "bpmn:LinkEventDefinition") ? V["bpmn:LinkEventDefinition"](E, I, C, K) : er(F, "bpmn:ErrorEventDefinition") ? V["bpmn:ErrorEventDefinition"](E, I, C, K) : er(F, "bpmn:CancelEventDefinition") ? V["bpmn:CancelEventDefinition"](E, I, C, K) : er(F, "bpmn:CompensateEventDefinition") ? V["bpmn:CompensateEventDefinition"](E, I, C, K) : er(F, "bpmn:TerminateEventDefinition") ? V["bpmn:TerminateEventDefinition"](E, I, C, K) : null;
  }
  var ie = {
    ParticipantMultiplicityMarker: function(I, E, C = {}) {
      var F = Ri(E, C), K = ai(E, C), ne = i.getScaledPath("MARKER_PARALLEL", {
        xScaleFactor: 1,
        yScaleFactor: 1,
        containerWidth: F,
        containerHeight: K,
        position: {
          mx: (F / 2 - 6) / F,
          my: (K - 15) / K
        }
      });
      $("participant-multiplicity", I, ne, {
        strokeWidth: 2,
        fill: ot(E, c, C.fill),
        stroke: Ce(E, l, C.stroke)
      });
    },
    SubProcessMarker: function(I, E, C = {}) {
      var F = k(I, 14, 14, 0, {
        strokeWidth: 1,
        fill: ot(E, c, C.fill),
        stroke: Ce(E, l, C.stroke)
      });
      An(F, E.width / 2 - 7.5, E.height - 20);
      var K = i.getScaledPath("MARKER_SUB_PROCESS", {
        xScaleFactor: 1.5,
        yScaleFactor: 1.5,
        containerWidth: E.width,
        containerHeight: E.height,
        position: {
          mx: (E.width / 2 - 7.5) / E.width,
          my: (E.height - 20) / E.height
        }
      });
      $("sub-process", I, K, {
        fill: ot(E, c, C.fill),
        stroke: Ce(E, l, C.stroke)
      });
    },
    ParallelMarker: function(I, E, C) {
      var F = Ri(E, C), K = ai(E, C), ne = i.getScaledPath("MARKER_PARALLEL", {
        xScaleFactor: 1,
        yScaleFactor: 1,
        containerWidth: F,
        containerHeight: K,
        position: {
          mx: (F / 2 + C.parallel) / F,
          my: (K - 20) / K
        }
      });
      $("parallel", I, ne, {
        fill: ot(E, c, C.fill),
        stroke: Ce(E, l, C.stroke)
      });
    },
    SequentialMarker: function(I, E, C) {
      var F = i.getScaledPath("MARKER_SEQUENTIAL", {
        xScaleFactor: 1,
        yScaleFactor: 1,
        containerWidth: E.width,
        containerHeight: E.height,
        position: {
          mx: (E.width / 2 + C.seq) / E.width,
          my: (E.height - 19) / E.height
        }
      });
      $("sequential", I, F, {
        fill: ot(E, c, C.fill),
        stroke: Ce(E, l, C.stroke)
      });
    },
    CompensationMarker: function(I, E, C) {
      var F = i.getScaledPath("MARKER_COMPENSATION", {
        xScaleFactor: 1,
        yScaleFactor: 1,
        containerWidth: E.width,
        containerHeight: E.height,
        position: {
          mx: (E.width / 2 + C.compensation) / E.width,
          my: (E.height - 13) / E.height
        }
      });
      $("compensation", I, F, {
        strokeWidth: 1,
        fill: ot(E, c, C.fill),
        stroke: Ce(E, l, C.stroke)
      });
    },
    LoopMarker: function(I, E, C) {
      var F = Ri(E, C), K = ai(E, C), ne = i.getScaledPath("MARKER_LOOP", {
        xScaleFactor: 1,
        yScaleFactor: 1,
        containerWidth: F,
        containerHeight: K,
        position: {
          mx: (F / 2 + C.loop) / F,
          my: (K - 7) / K
        }
      });
      $("loop", I, ne, {
        strokeWidth: 1.5,
        fill: "none",
        stroke: Ce(E, l, C.stroke),
        strokeMiterlimit: 0.5
      });
    },
    AdhocMarker: function(I, E, C) {
      var F = Ri(E, C), K = ai(E, C), ne = i.getScaledPath("MARKER_ADHOC", {
        xScaleFactor: 1,
        yScaleFactor: 1,
        containerWidth: F,
        containerHeight: K,
        position: {
          mx: (F / 2 + C.adhoc) / F,
          my: (K - 15) / K
        }
      });
      $("adhoc", I, ne, {
        strokeWidth: 1,
        fill: Ce(E, l, C.stroke),
        stroke: Ce(E, l, C.stroke)
      });
    }
  };
  function Ae(I, E, C, F) {
    ie[I](E, C, F);
  }
  function Rt(I, E, C, F = {}) {
    F = {
      fill: F.fill,
      stroke: F.stroke,
      width: Ri(E, F),
      height: ai(E, F)
    };
    var K = he(E), ne = C && C.includes("SubProcessMarker");
    ne ? F = {
      ...F,
      seq: -21,
      parallel: -22,
      compensation: -42,
      loop: -18,
      adhoc: 10
    } : F = {
      ...F,
      seq: -5,
      parallel: -6,
      compensation: -27,
      loop: 0,
      adhoc: 10
    }, z(C, function(Ee) {
      Ae(Ee, I, E, F);
    }), K.get("isForCompensation") && Ae("CompensationMarker", I, E, F), P(K, "bpmn:AdHocSubProcess") && Ae("AdhocMarker", I, E, F);
    var ke = K.get("loopCharacteristics"), Qe = ke && ke.get("isSequential");
    ke && (Qe === void 0 && Ae("LoopMarker", I, E, F), Qe === !1 && Ae("ParallelMarker", I, E, F), Qe === !0 && Ae("SequentialMarker", I, E, F));
  }
  function it(I, E, C = {}) {
    C = U({
      size: {
        width: 100
      }
    }, C);
    var F = o.createText(E || "", C);
    return dt(F).add("djs-label"), ze(I, F), F;
  }
  function Ve(I, E, C, F = {}) {
    var K = he(E), ne = bs({
      x: E.x,
      y: E.y,
      width: E.width,
      height: E.height
    }, F);
    return it(I, K.name, {
      align: C,
      box: ne,
      padding: 7,
      style: {
        fill: _s(E, u, l, F.stroke)
      }
    });
  }
  function Zt(I, E, C = {}) {
    var F = {
      width: 90,
      height: 30,
      x: E.width / 2 + E.x,
      y: E.height / 2 + E.y
    };
    return it(I, ki(E), {
      box: F,
      fitBox: !0,
      style: U(
        {},
        o.getExternalStyle(),
        {
          fill: _s(E, u, l, C.stroke)
        }
      )
    });
  }
  function sn(I, E, C, F = {}) {
    var K = Pn(C), ne = it(I, E, {
      box: {
        height: 30,
        width: K ? ai(C, F) : Ri(C, F)
      },
      align: "center-middle",
      style: {
        fill: _s(C, u, l, F.stroke)
      }
    });
    if (K) {
      var ke = -1 * ai(C, F);
      Bl(ne, 0, -ke, 270);
    }
  }
  function Pt(I, E, C = {}) {
    var {
      width: F,
      height: K
    } = bs(E, C);
    return k(I, F, K, Il, {
      ...C,
      fill: ot(E, c, C.fill),
      fillOpacity: Ca,
      stroke: Ce(E, l, C.stroke)
    });
  }
  function Kt(I, E, C = {}) {
    var F = he(E), K = ot(E, c, C.fill), ne = Ce(E, l, C.stroke);
    return (F.get("associationDirection") === "One" || F.get("associationDirection") === "Both") && (C.markerEnd = w("association-end", K, ne)), F.get("associationDirection") === "Both" && (C.markerStart = w("association-start", K, ne)), C = yt(C, [
      "markerStart",
      "markerEnd"
    ]), j(I, E.waypoints, {
      ...C,
      stroke: ne,
      strokeDasharray: "0, 5"
    });
  }
  function oe(I, E, C = {}) {
    var F = ot(E, c, C.fill), K = Ce(E, l, C.stroke), ne = i.getScaledPath("DATA_OBJECT_PATH", {
      xScaleFactor: 1,
      yScaleFactor: 1,
      containerWidth: E.width,
      containerHeight: E.height,
      position: {
        mx: 0.474,
        my: 0.296
      }
    }), ke = W(I, ne, {
      fill: F,
      fillOpacity: Ca,
      stroke: K
    }), Qe = he(E);
    if (jA(Qe)) {
      var Ee = i.getScaledPath("DATA_OBJECT_COLLECTION_PATH", {
        xScaleFactor: 1,
        yScaleFactor: 1,
        containerWidth: E.width,
        containerHeight: E.height,
        position: {
          mx: 0.33,
          my: (E.height - 18) / E.height
        }
      });
      W(I, Ee, {
        strokeWidth: 2,
        fill: F,
        stroke: K
      });
    }
    return ke;
  }
  function se(I, E, C = {}) {
    return N(I, E.width, E.height, {
      fillOpacity: Ca,
      ...C,
      fill: ot(E, c, C.fill),
      stroke: Ce(E, l, C.stroke)
    });
  }
  function fe(I, E, C = {}) {
    return A(I, E.width, E.height, {
      fill: ot(E, c, C.fill),
      fillOpacity: Ca,
      stroke: Ce(E, l, C.stroke)
    });
  }
  function ct(I, E, C = {}) {
    var F = k(I, Ri(E, C), ai(E, C), 0, {
      fill: ot(E, c, C.fill),
      fillOpacity: C.fillOpacity || Ca,
      stroke: Ce(E, l, C.stroke),
      strokeWidth: 1.5
    }), K = he(E);
    if (P(K, "bpmn:Lane")) {
      var ne = K.get("name");
      sn(I, ne, E, C);
    }
    return F;
  }
  function Lt(I, E, C = {}) {
    var F = Pt(I, E, C);
    Bn(E) && we(F, {
      strokeDasharray: "0, 5.5",
      strokeWidth: 2.5
    });
    var K = pt(E);
    return Ve(I, E, K ? "center-top" : "center-middle", C), K ? Rt(I, E, void 0, C) : Rt(I, E, ["SubProcessMarker"], C), F;
  }
  function Et(I, E, C = {}) {
    var F = Pt(I, E, C);
    return Ve(I, E, "center-middle", C), Rt(I, E, void 0, C), F;
  }
  var Ne = this.handlers = {
    "bpmn:AdHocSubProcess": function(I, E, C = {}) {
      return pt(E) ? C = yt(C, [
        "fill",
        "stroke",
        "width",
        "height"
      ]) : C = yt(C, [
        "fill",
        "stroke"
      ]), Lt(I, E, C);
    },
    "bpmn:Association": function(I, E, C = {}) {
      return C = yt(C, [
        "fill",
        "stroke"
      ]), Kt(I, E, C);
    },
    "bpmn:BoundaryEvent": function(I, E, C = {}) {
      var { renderIcon: F = !0 } = C;
      C = yt(C, [
        "fill",
        "stroke"
      ]);
      var K = he(E), ne = K.get("cancelActivity");
      C = {
        strokeWidth: 1.5,
        fill: ot(E, c, C.fill),
        fillOpacity: YA,
        stroke: Ce(E, l, C.stroke)
      }, ne || (C.strokeDasharray = "6");
      var ke = se(I, E, C);
      return N(I, E.width, E.height, sl, {
        ...C,
        fill: "none"
      }), F && ae(E, I, C), ke;
    },
    "bpmn:BusinessRuleTask": function(I, E, C = {}) {
      C = yt(C, [
        "fill",
        "stroke"
      ]);
      var F = Et(I, E, C), K = i.getScaledPath("TASK_TYPE_BUSINESS_RULE_MAIN", {
        abspos: {
          x: 8,
          y: 8
        }
      }), ne = W(I, K);
      we(ne, {
        fill: ot(E, c, C.fill),
        stroke: Ce(E, l, C.stroke),
        strokeWidth: 1
      });
      var ke = i.getScaledPath("TASK_TYPE_BUSINESS_RULE_HEADER", {
        abspos: {
          x: 8,
          y: 8
        }
      }), Qe = W(I, ke);
      return we(Qe, {
        fill: Ce(E, l, C.stroke),
        stroke: Ce(E, l, C.stroke),
        strokeWidth: 1
      }), F;
    },
    "bpmn:CallActivity": function(I, E, C = {}) {
      return C = yt(C, [
        "fill",
        "stroke"
      ]), Lt(I, E, {
        strokeWidth: 5,
        ...C
      });
    },
    "bpmn:ComplexGateway": function(I, E, C = {}) {
      C = yt(C, [
        "fill",
        "stroke"
      ]);
      var F = fe(I, E, C), K = i.getScaledPath("GATEWAY_COMPLEX", {
        xScaleFactor: 0.5,
        yScaleFactor: 0.5,
        containerWidth: E.width,
        containerHeight: E.height,
        position: {
          mx: 0.46,
          my: 0.26
        }
      });
      return W(I, K, {
        fill: Ce(E, l, C.stroke),
        stroke: Ce(E, l, C.stroke),
        strokeWidth: 1
      }), F;
    },
    "bpmn:DataInput": function(I, E, C = {}) {
      C = yt(C, [
        "fill",
        "stroke"
      ]);
      var F = i.getRawPath("DATA_ARROW"), K = oe(I, E, C);
      return W(I, F, {
        fill: "none",
        stroke: Ce(E, l, C.stroke),
        strokeWidth: 1
      }), K;
    },
    "bpmn:DataInputAssociation": function(I, E, C = {}) {
      return C = yt(C, [
        "fill",
        "stroke"
      ]), Kt(I, E, {
        ...C,
        markerEnd: w("association-end", ot(E, c, C.fill), Ce(E, l, C.stroke))
      });
    },
    "bpmn:DataObject": function(I, E, C = {}) {
      return C = yt(C, [
        "fill",
        "stroke"
      ]), oe(I, E, C);
    },
    "bpmn:DataObjectReference": X("bpmn:DataObject"),
    "bpmn:DataOutput": function(I, E, C = {}) {
      C = yt(C, [
        "fill",
        "stroke"
      ]);
      var F = i.getRawPath("DATA_ARROW"), K = oe(I, E, C);
      return W(I, F, {
        strokeWidth: 1,
        fill: ot(E, c, C.fill),
        stroke: Ce(E, l, C.stroke)
      }), K;
    },
    "bpmn:DataOutputAssociation": function(I, E, C = {}) {
      return C = yt(C, [
        "fill",
        "stroke"
      ]), Kt(I, E, {
        ...C,
        markerEnd: w("association-end", ot(E, c, C.fill), Ce(E, l, C.stroke))
      });
    },
    "bpmn:DataStoreReference": function(I, E, C = {}) {
      C = yt(C, [
        "fill",
        "stroke"
      ]);
      var F = i.getScaledPath("DATA_STORE", {
        xScaleFactor: 1,
        yScaleFactor: 1,
        containerWidth: E.width,
        containerHeight: E.height,
        position: {
          mx: 0,
          my: 0.133
        }
      });
      return W(I, F, {
        fill: ot(E, c, C.fill),
        fillOpacity: Ca,
        stroke: Ce(E, l, C.stroke),
        strokeWidth: 2
      });
    },
    "bpmn:EndEvent": function(I, E, C = {}) {
      var { renderIcon: F = !0 } = C;
      C = yt(C, [
        "fill",
        "stroke"
      ]);
      var K = se(I, E, {
        ...C,
        strokeWidth: 4
      });
      return F && ae(E, I, C), K;
    },
    "bpmn:EventBasedGateway": function(I, E, C = {}) {
      C = yt(C, [
        "fill",
        "stroke"
      ]);
      var F = he(E), K = fe(I, E, C);
      N(I, E.width, E.height, E.height * 0.2, {
        fill: ot(E, "none", C.fill),
        stroke: Ce(E, l, C.stroke),
        strokeWidth: 1
      });
      var ne = F.get("eventGatewayType"), ke = !!F.get("instantiate");
      function Qe() {
        var at = i.getScaledPath("GATEWAY_EVENT_BASED", {
          xScaleFactor: 0.18,
          yScaleFactor: 0.18,
          containerWidth: E.width,
          containerHeight: E.height,
          position: {
            mx: 0.36,
            my: 0.44
          }
        });
        W(I, at, {
          fill: "none",
          stroke: Ce(E, l, C.stroke),
          strokeWidth: 2
        });
      }
      if (ne === "Parallel") {
        var Ee = i.getScaledPath("GATEWAY_PARALLEL", {
          xScaleFactor: 0.4,
          yScaleFactor: 0.4,
          containerWidth: E.width,
          containerHeight: E.height,
          position: {
            mx: 0.474,
            my: 0.296
          }
        });
        W(I, Ee, {
          fill: "none",
          stroke: Ce(E, l, C.stroke),
          strokeWidth: 1
        });
      } else
        ne === "Exclusive" && (ke || N(I, E.width, E.height, E.height * 0.26, {
          fill: "none",
          stroke: Ce(E, l, C.stroke),
          strokeWidth: 1
        }), Qe());
      return K;
    },
    "bpmn:ExclusiveGateway": function(I, E, C = {}) {
      C = yt(C, [
        "fill",
        "stroke"
      ]);
      var F = fe(I, E, C), K = i.getScaledPath("GATEWAY_EXCLUSIVE", {
        xScaleFactor: 0.4,
        yScaleFactor: 0.4,
        containerWidth: E.width,
        containerHeight: E.height,
        position: {
          mx: 0.32,
          my: 0.3
        }
      }), ne = bt(E);
      return ne.get("isMarkerVisible") && W(I, K, {
        fill: Ce(E, l, C.stroke),
        stroke: Ce(E, l, C.stroke),
        strokeWidth: 1
      }), F;
    },
    "bpmn:Gateway": function(I, E, C = {}) {
      return C = yt(C, [
        "fill",
        "stroke"
      ]), fe(I, E, C);
    },
    "bpmn:Group": function(I, E, C = {}) {
      return C = yt(C, [
        "fill",
        "stroke",
        "width",
        "height"
      ]), k(I, E.width, E.height, Il, {
        stroke: Ce(E, l, C.stroke),
        strokeWidth: 1.5,
        strokeDasharray: "10, 6, 0, 6",
        fill: "none",
        pointerEvents: "none",
        width: Ri(E, C),
        height: ai(E, C)
      });
    },
    "bpmn:InclusiveGateway": function(I, E, C = {}) {
      C = yt(C, [
        "fill",
        "stroke"
      ]);
      var F = fe(I, E, C);
      return N(I, E.width, E.height, E.height * 0.24, {
        fill: ot(E, c, C.fill),
        stroke: Ce(E, l, C.stroke),
        strokeWidth: 2.5
      }), F;
    },
    "bpmn:IntermediateEvent": function(I, E, C = {}) {
      var { renderIcon: F = !0 } = C;
      C = yt(C, [
        "fill",
        "stroke"
      ]);
      var K = se(I, E, {
        ...C,
        strokeWidth: 1.5
      });
      return N(I, E.width, E.height, sl, {
        fill: "none",
        stroke: Ce(E, l, C.stroke),
        strokeWidth: 1.5
      }), F && ae(E, I, C), K;
    },
    "bpmn:IntermediateCatchEvent": X("bpmn:IntermediateEvent"),
    "bpmn:IntermediateThrowEvent": X("bpmn:IntermediateEvent"),
    "bpmn:Lane": function(I, E, C = {}) {
      return C = yt(C, [
        "fill",
        "stroke",
        "width",
        "height"
      ]), ct(I, E, {
        ...C,
        fillOpacity: KA
      });
    },
    "bpmn:ManualTask": function(I, E, C = {}) {
      C = yt(C, [
        "fill",
        "stroke"
      ]);
      var F = Et(I, E, C), K = i.getScaledPath("TASK_TYPE_MANUAL", {
        abspos: {
          x: 17,
          y: 15
        }
      });
      return W(I, K, {
        fill: ot(E, c, C.fill),
        stroke: Ce(E, l, C.stroke),
        strokeWidth: 0.5
      }), F;
    },
    "bpmn:MessageFlow": function(I, E, C = {}) {
      C = yt(C, [
        "fill",
        "stroke"
      ]);
      var F = he(E), K = bt(E), ne = ot(E, c, C.fill), ke = Ce(E, l, C.stroke), Qe = j(I, E.waypoints, {
        markerEnd: w("messageflow-end", ne, ke),
        markerStart: w("messageflow-start", ne, ke),
        stroke: ke,
        strokeDasharray: "10, 11",
        strokeWidth: 1.5
      });
      if (F.get("messageRef")) {
        var Ee = Qe.getPointAtLength(Qe.getTotalLength() / 2), at = i.getScaledPath("MESSAGE_FLOW_MARKER", {
          abspos: {
            x: Ee.x,
            y: Ee.y
          }
        }), Mt = {
          strokeWidth: 1
        };
        K.get("messageVisibleKind") === "initiating" ? (Mt.fill = ne, Mt.stroke = ke) : (Mt.fill = ke, Mt.stroke = ne);
        var ht = W(I, at, Mt), $n = F.get("messageRef"), Ii = $n.get("name"), bn = it(I, Ii, {
          align: "center-top",
          fitBox: !0,
          style: {
            fill: ke
          }
        }), Be = ht.getBBox(), ft = bn.getBBox(), Ao = Ee.x - ft.width / 2, qi = Ee.y + Be.height / 2 + GA;
        Bl(bn, Ao, qi, 0);
      }
      return Qe;
    },
    "bpmn:ParallelGateway": function(I, E, C = {}) {
      C = yt(C, [
        "fill",
        "stroke"
      ]);
      var F = fe(I, E, C), K = i.getScaledPath("GATEWAY_PARALLEL", {
        xScaleFactor: 0.6,
        yScaleFactor: 0.6,
        containerWidth: E.width,
        containerHeight: E.height,
        position: {
          mx: 0.46,
          my: 0.2
        }
      });
      return W(I, K, {
        fill: Ce(E, l, C.stroke),
        stroke: Ce(E, l, C.stroke),
        strokeWidth: 1
      }), F;
    },
    "bpmn:Participant": function(I, E, C = {}) {
      C = yt(C, [
        "fill",
        "stroke",
        "width",
        "height"
      ]);
      var F = ct(I, E, C), K = pt(E), ne = Pn(E), ke = he(E), Qe = ke.get("name");
      if (K) {
        var Ee = ne ? [
          {
            x: 30,
            y: 0
          },
          {
            x: 30,
            y: ai(E, C)
          }
        ] : [
          {
            x: 0,
            y: 30
          },
          {
            x: Ri(E, C),
            y: 30
          }
        ];
        D(I, Ee, {
          stroke: Ce(E, l, C.stroke),
          strokeWidth: UA
        }), sn(I, Qe, E, C);
      } else {
        var at = bs(E, C);
        ne || (at.height = Ri(E, C), at.width = ai(E, C));
        var Mt = it(I, Qe, {
          box: at,
          align: "center-middle",
          style: {
            fill: _s(E, u, l, C.stroke)
          }
        });
        if (!ne) {
          var ht = -1 * ai(E, C);
          Bl(Mt, 0, -ht, 270);
        }
      }
      return ke.get("participantMultiplicity") && Ae("ParticipantMultiplicityMarker", I, E, C), F;
    },
    "bpmn:ReceiveTask": function(I, E, C = {}) {
      C = yt(C, [
        "fill",
        "stroke"
      ]);
      var F = he(E), K = Et(I, E, C), ne;
      return F.get("instantiate") ? (N(I, 28, 28, 20 * 0.22, {
        fill: ot(E, c, C.fill),
        stroke: Ce(E, l, C.stroke),
        strokeWidth: 1
      }), ne = i.getScaledPath("TASK_TYPE_INSTANTIATING_SEND", {
        abspos: {
          x: 7.77,
          y: 9.52
        }
      })) : ne = i.getScaledPath("TASK_TYPE_SEND", {
        xScaleFactor: 0.9,
        yScaleFactor: 0.9,
        containerWidth: 21,
        containerHeight: 14,
        position: {
          mx: 0.3,
          my: 0.4
        }
      }), W(I, ne, {
        fill: ot(E, c, C.fill),
        stroke: Ce(E, l, C.stroke),
        strokeWidth: 1
      }), K;
    },
    "bpmn:ScriptTask": function(I, E, C = {}) {
      C = yt(C, [
        "fill",
        "stroke"
      ]);
      var F = Et(I, E, C), K = i.getScaledPath("TASK_TYPE_SCRIPT", {
        abspos: {
          x: 15,
          y: 20
        }
      });
      return W(I, K, {
        fill: ot(E, c, C.fill),
        stroke: Ce(E, l, C.stroke),
        strokeWidth: 1
      }), F;
    },
    "bpmn:SendTask": function(I, E, C = {}) {
      C = yt(C, [
        "fill",
        "stroke"
      ]);
      var F = Et(I, E, C), K = i.getScaledPath("TASK_TYPE_SEND", {
        xScaleFactor: 1,
        yScaleFactor: 1,
        containerWidth: 21,
        containerHeight: 14,
        position: {
          mx: 0.285,
          my: 0.357
        }
      });
      return W(I, K, {
        fill: Ce(E, l, C.stroke),
        stroke: ot(E, c, C.fill),
        strokeWidth: 1
      }), F;
    },
    "bpmn:SequenceFlow": function(I, E, C = {}) {
      C = yt(C, [
        "fill",
        "stroke"
      ]);
      var F = ot(E, c, C.fill), K = Ce(E, l, C.stroke), ne = j(I, E.waypoints, {
        markerEnd: w("sequenceflow-end", F, K),
        stroke: K
      }), ke = he(E), { source: Qe } = E;
      if (Qe) {
        var Ee = he(Qe);
        ke.get("conditionExpression") && P(Ee, "bpmn:Activity") && we(ne, {
          markerStart: w("conditional-flow-marker", F, K)
        }), Ee.get("default") && (P(Ee, "bpmn:Gateway") || P(Ee, "bpmn:Activity")) && Ee.get("default") === ke && we(ne, {
          markerStart: w("conditional-default-flow-marker", F, K)
        });
      }
      return ne;
    },
    "bpmn:ServiceTask": function(I, E, C = {}) {
      C = yt(C, [
        "fill",
        "stroke"
      ]);
      var F = Et(I, E, C);
      N(I, 10, 10, {
        fill: ot(E, c, C.fill),
        stroke: "none",
        transform: "translate(6, 6)"
      });
      var K = i.getScaledPath("TASK_TYPE_SERVICE", {
        abspos: {
          x: 12,
          y: 18
        }
      });
      W(I, K, {
        fill: ot(E, c, C.fill),
        stroke: Ce(E, l, C.stroke),
        strokeWidth: 1
      }), N(I, 10, 10, {
        fill: ot(E, c, C.fill),
        stroke: "none",
        transform: "translate(11, 10)"
      });
      var ne = i.getScaledPath("TASK_TYPE_SERVICE", {
        abspos: {
          x: 17,
          y: 22
        }
      });
      return W(I, ne, {
        fill: ot(E, c, C.fill),
        stroke: Ce(E, l, C.stroke),
        strokeWidth: 1
      }), F;
    },
    "bpmn:StartEvent": function(I, E, C = {}) {
      var { renderIcon: F = !0 } = C;
      C = yt(C, [
        "fill",
        "stroke"
      ]);
      var K = he(E);
      K.get("isInterrupting") || (C = {
        ...C,
        strokeDasharray: "6"
      });
      var ne = se(I, E, C);
      return F && ae(E, I, C), ne;
    },
    "bpmn:SubProcess": function(I, E, C = {}) {
      return pt(E) ? C = yt(C, [
        "fill",
        "stroke",
        "width",
        "height"
      ]) : C = yt(C, [
        "fill",
        "stroke"
      ]), Lt(I, E, C);
    },
    "bpmn:Task": function(I, E, C = {}) {
      return C = yt(C, [
        "fill",
        "stroke"
      ]), Et(I, E, C);
    },
    "bpmn:TextAnnotation": function(I, E, C = {}) {
      C = yt(C, [
        "fill",
        "stroke",
        "width",
        "height"
      ]);
      var {
        width: F,
        height: K
      } = bs(E, C), ne = k(I, F, K, 0, 0, {
        fill: "none",
        stroke: "none"
      }), ke = i.getScaledPath("TEXT_ANNOTATION", {
        xScaleFactor: 1,
        yScaleFactor: 1,
        containerWidth: F,
        containerHeight: K,
        position: {
          mx: 0,
          my: 0
        }
      });
      W(I, ke, {
        stroke: Ce(E, l, C.stroke)
      });
      var Qe = he(E), Ee = Qe.get("text") || "";
      return it(I, Ee, {
        align: "left-top",
        box: bs(E, C),
        padding: 7,
        style: {
          fill: _s(E, u, l, C.stroke)
        }
      }), ne;
    },
    "bpmn:Transaction": function(I, E, C = {}) {
      pt(E) ? C = yt(C, [
        "fill",
        "stroke",
        "width",
        "height"
      ]) : C = yt(C, [
        "fill",
        "stroke"
      ]);
      var F = Lt(I, E, {
        strokeWidth: 1.5,
        ...C
      }), K = n.style(["no-fill", "no-events"], {
        stroke: Ce(E, l, C.stroke),
        strokeWidth: 1.5
      }), ne = pt(E);
      return ne || (C = {}), k(
        I,
        Ri(E, C),
        ai(E, C),
        Il - sl,
        sl,
        K
      ), F;
    },
    "bpmn:UserTask": function(I, E, C = {}) {
      C = yt(C, [
        "fill",
        "stroke"
      ]);
      var F = Et(I, E, C), K = 15, ne = 12, ke = i.getScaledPath("TASK_TYPE_USER_1", {
        abspos: {
          x: K,
          y: ne
        }
      });
      W(I, ke, {
        fill: ot(E, c, C.fill),
        stroke: Ce(E, l, C.stroke),
        strokeWidth: 0.5
      });
      var Qe = i.getScaledPath("TASK_TYPE_USER_2", {
        abspos: {
          x: K,
          y: ne
        }
      });
      W(I, Qe, {
        fill: ot(E, c, C.fill),
        stroke: Ce(E, l, C.stroke),
        strokeWidth: 0.5
      });
      var Ee = i.getScaledPath("TASK_TYPE_USER_3", {
        abspos: {
          x: K,
          y: ne
        }
      });
      return W(I, Ee, {
        fill: Ce(E, l, C.stroke),
        stroke: Ce(E, l, C.stroke),
        strokeWidth: 0.5
      }), F;
    },
    label: function(I, E, C = {}) {
      return Zt(I, E, C);
    }
  };
  this._drawPath = W, this._renderer = Z;
}
Pe(ia, Dr);
ia.$inject = [
  "config.bpmnRenderer",
  "eventBus",
  "styles",
  "pathMap",
  "canvas",
  "textRenderer"
];
ia.prototype.canRender = function(e) {
  return P(e, "bpmn:BaseElement");
};
ia.prototype.drawShape = function(e, t, n = {}) {
  var { type: i } = t, r = this._renderer(i);
  return r(e, t, n);
};
ia.prototype.drawConnection = function(e, t, n = {}) {
  var { type: i } = t, r = this._renderer(i);
  return r(e, t, n);
};
ia.prototype.getShapePath = function(e) {
  return P(e, "bpmn:Event") ? FA(e) : P(e, "bpmn:Activity") ? HA(e, Il) : P(e, "bpmn:Gateway") ? zA(e) : VA(e);
};
function yt(e, t = []) {
  return t.reduce((n, i) => (e[i] && (n[i] = e[i]), n), {});
}
var qA = 0, XA = {
  width: 150,
  height: 50
};
function ZA(e) {
  var t = e.split("-");
  return {
    horizontal: t[0] || "center",
    vertical: t[1] || "top"
  };
}
function JA(e) {
  return vn(e) ? U({ top: 0, left: 0, right: 0, bottom: 0 }, e) : {
    top: e,
    left: e,
    right: e,
    bottom: e
  };
}
function QA(e, t) {
  t.textContent = e;
  var n;
  try {
    var i, r = e === "";
    return t.textContent = r ? "dummy" : e, n = t.getBBox(), i = {
      width: n.width + n.x * 2,
      height: n.height
    }, r && (i.width = 0), i;
  } catch {
    return { width: 0, height: 0 };
  }
}
function e2(e, t, n) {
  for (var i = e.shift(), r = i, o; ; ) {
    if (o = QA(r, n), o.width = r ? o.width : 0, r === " " || r === "" || o.width < Math.round(t) || r.length < 2)
      return t2(e, r, i, o);
    r = i2(r, o.width, t);
  }
}
function t2(e, t, n, i) {
  if (t.length < n.length) {
    var r = n.slice(t.length).trim();
    e.unshift(r);
  }
  return {
    width: i.width,
    height: i.height,
    text: t
  };
}
var pg = "";
function n2(e, t) {
  var n = e.split(/(\s|-|\u00AD)/g), i, r = [], o = 0;
  if (n.length > 1)
    for (; i = n.shift(); )
      if (i.length + o < t)
        r.push(i), o += i.length;
      else {
        (i === "-" || i === pg) && r.pop();
        break;
      }
  var a = r[r.length - 1];
  return a && a === pg && (r[r.length - 1] = "-"), r.join("");
}
function i2(e, t, n) {
  var i = Math.max(e.length * (n / t), 1), r = n2(e, i);
  return r || (r = e.slice(0, Math.max(Math.round(i - 1), 1))), r;
}
function r2() {
  var e = document.getElementById("helper-svg");
  return e || (e = Me("svg"), we(e, {
    id: "helper-svg"
  }), Cn(e, {
    visibility: "hidden",
    position: "fixed",
    width: 0,
    height: 0
  }), document.body.appendChild(e)), e;
}
function Cu(e) {
  this._config = U({}, {
    size: XA,
    padding: qA,
    style: {},
    align: "center-top"
  }, e || {});
}
Cu.prototype.createText = function(e, t) {
  return this.layoutText(e, t).element;
};
Cu.prototype.getDimensions = function(e, t) {
  return this.layoutText(e, t).dimensions;
};
Cu.prototype.layoutText = function(e, t) {
  var n = U({}, this._config.size, t.box), i = U({}, this._config.style, t.style), r = ZA(t.align || this._config.align), o = JA(t.padding !== void 0 ? t.padding : this._config.padding), a = t.fitBox || !1, c = o2(i), l = e.split(/\u00AD?\r?\n/), u = [], d = n.width - o.left - o.right, f = Me("text");
  we(f, { x: 0, y: 0 }), we(f, i);
  var y = r2();
  for (ze(y, f); l.length; )
    u.push(e2(l, d, f));
  r.vertical === "middle" && (o.top = o.bottom = 0);
  var g = li(u, function(N, k, A) {
    return N + (c || k.height);
  }, 0) + o.top + o.bottom, _ = li(u, function(N, k, A) {
    return k.width > N ? k.width : N;
  }, 0), x = o.top;
  r.vertical === "middle" && (x += (n.height - g) / 2), x -= (c || u[0].height) / 4;
  var w = Me("text");
  we(w, i), z(u, function(N) {
    var k;
    switch (x += c || N.height, r.horizontal) {
      case "left":
        k = o.left;
        break;
      case "right":
        k = (a ? _ : d) - o.right - N.width;
        break;
      default:
        k = Math.max(((a ? _ : d) - N.width) / 2 + o.left, 0);
    }
    var A = Me("tspan");
    we(A, { x: k, y: x }), A.textContent = N.text, ze(w, A);
  }), qt(f);
  var B = {
    width: _,
    height: g
  };
  return {
    dimensions: B,
    element: w
  };
};
function o2(e) {
  if ("fontSize" in e && "lineHeight" in e)
    return e.lineHeight * parseInt(e.fontSize, 10);
}
var a2 = 12, s2 = 1.2, c2 = 30;
function nb(e) {
  var t = U({
    fontFamily: "Arial, sans-serif",
    fontSize: a2,
    fontWeight: "normal",
    lineHeight: s2
  }, e && e.defaultStyle || {}), n = parseInt(t.fontSize, 10) - 1, i = U({}, t, {
    fontSize: n
  }, e && e.externalStyle || {}), r = new Cu({
    style: t
  });
  this.getExternalLabelBounds = function(o, a) {
    var c = r.getDimensions(a, {
      box: {
        width: 90,
        height: 30
      },
      style: i
    });
    return {
      x: Math.round(o.x + o.width / 2 - c.width / 2),
      y: Math.round(o.y),
      width: Math.ceil(c.width),
      height: Math.ceil(c.height)
    };
  }, this.getTextAnnotationBounds = function(o, a) {
    var c = r.getDimensions(a, {
      box: o,
      style: t,
      align: "left-top",
      padding: 5
    });
    return {
      x: o.x,
      y: o.y,
      width: o.width,
      height: Math.max(c2, Math.round(c.height))
    };
  }, this.createText = function(o, a) {
    return r.createText(o, a || {});
  }, this.getDefaultStyle = function() {
    return t;
  }, this.getExternalStyle = function() {
    return i;
  };
}
nb.$inject = [
  "config.textRenderer"
];
function l2() {
  this.pathMap = {
    EVENT_MESSAGE: {
      d: "m {mx},{my} l 0,{e.y1} l {e.x1},0 l 0,-{e.y1} z l {e.x0},{e.y0} l {e.x0},-{e.y0}",
      height: 36,
      width: 36,
      heightElements: [6, 14],
      widthElements: [10.5, 21]
    },
    EVENT_SIGNAL: {
      d: "M {mx},{my} l {e.x0},{e.y0} l -{e.x1},0 Z",
      height: 36,
      width: 36,
      heightElements: [18],
      widthElements: [10, 20]
    },
    EVENT_ESCALATION: {
      d: "M {mx},{my} l {e.x0},{e.y0} l -{e.x0},-{e.y1} l -{e.x0},{e.y1} Z",
      height: 36,
      width: 36,
      heightElements: [20, 7],
      widthElements: [8]
    },
    EVENT_CONDITIONAL: {
      d: "M {e.x0},{e.y0} l {e.x1},0 l 0,{e.y2} l -{e.x1},0 Z M {e.x2},{e.y3} l {e.x0},0 M {e.x2},{e.y4} l {e.x0},0 M {e.x2},{e.y5} l {e.x0},0 M {e.x2},{e.y6} l {e.x0},0 M {e.x2},{e.y7} l {e.x0},0 M {e.x2},{e.y8} l {e.x0},0 ",
      height: 36,
      width: 36,
      heightElements: [8.5, 14.5, 18, 11.5, 14.5, 17.5, 20.5, 23.5, 26.5],
      widthElements: [10.5, 14.5, 12.5]
    },
    EVENT_LINK: {
      d: "m {mx},{my} 0,{e.y0} -{e.x1},0 0,{e.y1} {e.x1},0 0,{e.y0} {e.x0},-{e.y2} -{e.x0},-{e.y2} z",
      height: 36,
      width: 36,
      heightElements: [4.4375, 6.75, 7.8125],
      widthElements: [9.84375, 13.5]
    },
    EVENT_ERROR: {
      d: "m {mx},{my} {e.x0},-{e.y0} {e.x1},-{e.y1} {e.x2},{e.y2} {e.x3},-{e.y3} -{e.x4},{e.y4} -{e.x5},-{e.y5} z",
      height: 36,
      width: 36,
      heightElements: [0.023, 8.737, 8.151, 16.564, 10.591, 8.714],
      widthElements: [0.085, 6.672, 6.97, 4.273, 5.337, 6.636]
    },
    EVENT_CANCEL_45: {
      d: "m {mx},{my} -{e.x1},0 0,{e.x0} {e.x1},0 0,{e.y1} {e.x0},0 0,-{e.y1} {e.x1},0 0,-{e.y0} -{e.x1},0 0,-{e.y1} -{e.x0},0 z",
      height: 36,
      width: 36,
      heightElements: [4.75, 8.5],
      widthElements: [4.75, 8.5]
    },
    EVENT_COMPENSATION: {
      d: "m {mx},{my} {e.x0},-{e.y0} 0,{e.y1} z m {e.x1},-{e.y2} {e.x2},-{e.y3} 0,{e.y1} -{e.x2},-{e.y3} z",
      height: 36,
      width: 36,
      heightElements: [6.5, 13, 0.4, 6.1],
      widthElements: [9, 9.3, 8.7]
    },
    EVENT_TIMER_WH: {
      d: "M {mx},{my} l {e.x0},-{e.y0} m -{e.x0},{e.y0} l {e.x1},{e.y1} ",
      height: 36,
      width: 36,
      heightElements: [10, 2],
      widthElements: [3, 7]
    },
    EVENT_TIMER_LINE: {
      d: "M {mx},{my} m {e.x0},{e.y0} l -{e.x1},{e.y1} ",
      height: 36,
      width: 36,
      heightElements: [10, 3],
      widthElements: [0, 0]
    },
    EVENT_MULTIPLE: {
      d: "m {mx},{my} {e.x1},-{e.y0} {e.x1},{e.y0} -{e.x0},{e.y1} -{e.x2},0 z",
      height: 36,
      width: 36,
      heightElements: [6.28099, 12.56199],
      widthElements: [3.1405, 9.42149, 12.56198]
    },
    EVENT_PARALLEL_MULTIPLE: {
      d: "m {mx},{my} {e.x0},0 0,{e.y1} {e.x1},0 0,{e.y0} -{e.x1},0 0,{e.y1} -{e.x0},0 0,-{e.y1} -{e.x1},0 0,-{e.y0} {e.x1},0 z",
      height: 36,
      width: 36,
      heightElements: [2.56228, 7.68683],
      widthElements: [2.56228, 7.68683]
    },
    GATEWAY_EXCLUSIVE: {
      d: "m {mx},{my} {e.x0},{e.y0} {e.x1},{e.y0} {e.x2},0 {e.x4},{e.y2} {e.x4},{e.y1} {e.x2},0 {e.x1},{e.y3} {e.x0},{e.y3} {e.x3},0 {e.x5},{e.y1} {e.x5},{e.y2} {e.x3},0 z",
      height: 17.5,
      width: 17.5,
      heightElements: [8.5, 6.5312, -6.5312, -8.5],
      widthElements: [6.5, -6.5, 3, -3, 5, -5]
    },
    GATEWAY_PARALLEL: {
      d: "m {mx},{my} 0,{e.y1} -{e.x1},0 0,{e.y0} {e.x1},0 0,{e.y1} {e.x0},0 0,-{e.y1} {e.x1},0 0,-{e.y0} -{e.x1},0 0,-{e.y1} -{e.x0},0 z",
      height: 30,
      width: 30,
      heightElements: [5, 12.5],
      widthElements: [5, 12.5]
    },
    GATEWAY_EVENT_BASED: {
      d: "m {mx},{my} {e.x0},{e.y0} {e.x0},{e.y1} {e.x1},{e.y2} {e.x2},0 z",
      height: 11,
      width: 11,
      heightElements: [-6, 6, 12, -12],
      widthElements: [9, -3, -12]
    },
    GATEWAY_COMPLEX: {
      d: "m {mx},{my} 0,{e.y0} -{e.x0},-{e.y1} -{e.x1},{e.y2} {e.x0},{e.y1} -{e.x2},0 0,{e.y3} {e.x2},0  -{e.x0},{e.y1} l {e.x1},{e.y2} {e.x0},-{e.y1} 0,{e.y0} {e.x3},0 0,-{e.y0} {e.x0},{e.y1} {e.x1},-{e.y2} -{e.x0},-{e.y1} {e.x2},0 0,-{e.y3} -{e.x2},0 {e.x0},-{e.y1} -{e.x1},-{e.y2} -{e.x0},{e.y1} 0,-{e.y0} -{e.x3},0 z",
      height: 17.125,
      width: 17.125,
      heightElements: [4.875, 3.4375, 2.125, 3],
      widthElements: [3.4375, 2.125, 4.875, 3]
    },
    DATA_OBJECT_PATH: {
      d: "m 0,0 {e.x1},0 {e.x0},{e.y0} 0,{e.y1} -{e.x2},0 0,-{e.y2} {e.x1},0 0,{e.y0} {e.x0},0",
      height: 61,
      width: 51,
      heightElements: [10, 50, 60],
      widthElements: [10, 40, 50, 60]
    },
    DATA_OBJECT_COLLECTION_PATH: {
      d: "m{mx},{my} m 3,2 l 0,10 m 3,-10 l 0,10 m 3,-10 l 0,10",
      height: 10,
      width: 10,
      heightElements: [],
      widthElements: []
    },
    DATA_ARROW: {
      d: "m 5,9 9,0 0,-3 5,5 -5,5 0,-3 -9,0 z",
      height: 61,
      width: 51,
      heightElements: [],
      widthElements: []
    },
    DATA_STORE: {
      d: "m  {mx},{my} l  0,{e.y2} c  {e.x0},{e.y1} {e.x1},{e.y1}  {e.x2},0 l  0,-{e.y2} c -{e.x0},-{e.y1} -{e.x1},-{e.y1} -{e.x2},0c  {e.x0},{e.y1} {e.x1},{e.y1}  {e.x2},0 m  -{e.x2},{e.y0}c  {e.x0},{e.y1} {e.x1},{e.y1} {e.x2},0m  -{e.x2},{e.y0}c  {e.x0},{e.y1} {e.x1},{e.y1}  {e.x2},0",
      height: 61,
      width: 61,
      heightElements: [7, 10, 45],
      widthElements: [2, 58, 60]
    },
    TEXT_ANNOTATION: {
      d: "m {mx}, {my} m 10,0 l -10,0 l 0,{e.y0} l 10,0",
      height: 30,
      width: 10,
      heightElements: [30],
      widthElements: [10]
    },
    MARKER_SUB_PROCESS: {
      d: "m{mx},{my} m 7,2 l 0,10 m -5,-5 l 10,0",
      height: 10,
      width: 10,
      heightElements: [],
      widthElements: []
    },
    MARKER_PARALLEL: {
      d: "m{mx},{my} m 3,2 l 0,10 m 3,-10 l 0,10 m 3,-10 l 0,10",
      height: 10,
      width: 10,
      heightElements: [],
      widthElements: []
    },
    MARKER_SEQUENTIAL: {
      d: "m{mx},{my} m 0,3 l 10,0 m -10,3 l 10,0 m -10,3 l 10,0",
      height: 10,
      width: 10,
      heightElements: [],
      widthElements: []
    },
    MARKER_COMPENSATION: {
      d: "m {mx},{my} 7,-5 0,10 z m 7.1,-0.3 6.9,-4.7 0,10 -6.9,-4.7 z",
      height: 10,
      width: 21,
      heightElements: [],
      widthElements: []
    },
    MARKER_LOOP: {
      d: "m {mx},{my} c 3.526979,0 6.386161,-2.829858 6.386161,-6.320661 0,-3.490806 -2.859182,-6.320661 -6.386161,-6.320661 -3.526978,0 -6.38616,2.829855 -6.38616,6.320661 0,1.745402 0.714797,3.325567 1.870463,4.469381 0.577834,0.571908 1.265885,1.034728 2.029916,1.35457 l -0.718163,-3.909793 m 0.718163,3.909793 -3.885211,0.802902",
      height: 13.9,
      width: 13.7,
      heightElements: [],
      widthElements: []
    },
    MARKER_ADHOC: {
      d: "m {mx},{my} m 0.84461,2.64411 c 1.05533,-1.23780996 2.64337,-2.07882 4.29653,-1.97997996 2.05163,0.0805 3.85579,1.15803 5.76082,1.79107 1.06385,0.34139996 2.24454,0.1438 3.18759,-0.43767 0.61743,-0.33642 1.2775,-0.64078 1.7542,-1.17511 0,0.56023 0,1.12046 0,1.6807 -0.98706,0.96237996 -2.29792,1.62393996 -3.6918,1.66181996 -1.24459,0.0927 -2.46671,-0.2491 -3.59505,-0.74812 -1.35789,-0.55965 -2.75133,-1.33436996 -4.27027,-1.18121996 -1.37741,0.14601 -2.41842,1.13685996 -3.44288,1.96782996 z",
      height: 4,
      width: 15,
      heightElements: [],
      widthElements: []
    },
    TASK_TYPE_SEND: {
      d: "m {mx},{my} l 0,{e.y1} l {e.x1},0 l 0,-{e.y1} z l {e.x0},{e.y0} l {e.x0},-{e.y0}",
      height: 14,
      width: 21,
      heightElements: [6, 14],
      widthElements: [10.5, 21]
    },
    TASK_TYPE_SCRIPT: {
      d: "m {mx},{my} c 9.966553,-6.27276 -8.000926,-7.91932 2.968968,-14.938 l -8.802728,0 c -10.969894,7.01868 6.997585,8.66524 -2.968967,14.938 z m -7,-12 l 5,0 m -4.5,3 l 4.5,0 m -3,3 l 5,0m -4,3 l 5,0",
      height: 15,
      width: 12.6,
      heightElements: [6, 14],
      widthElements: [10.5, 21]
    },
    TASK_TYPE_USER_1: {
      d: "m {mx},{my} c 0.909,-0.845 1.594,-2.049 1.594,-3.385 0,-2.554 -1.805,-4.62199999 -4.357,-4.62199999 -2.55199998,0 -4.28799998,2.06799999 -4.28799998,4.62199999 0,1.348 0.974,2.562 1.89599998,3.405 -0.52899998,0.187 -5.669,2.097 -5.794,4.7560005 v 6.718 h 17 v -6.718 c 0,-2.2980005 -5.5279996,-4.5950005 -6.0509996,-4.7760005 zm -8,6 l 0,5.5 m 11,0 l 0,-5"
    },
    TASK_TYPE_USER_2: {
      d: "m {mx},{my} m 2.162,1.009 c 0,2.4470005 -2.158,4.4310005 -4.821,4.4310005 -2.66499998,0 -4.822,-1.981 -4.822,-4.4310005 "
    },
    TASK_TYPE_USER_3: {
      d: "m {mx},{my} m -6.9,-3.80 c 0,0 2.25099998,-2.358 4.27399998,-1.177 2.024,1.181 4.221,1.537 4.124,0.965 -0.098,-0.57 -0.117,-3.79099999 -4.191,-4.13599999 -3.57499998,0.001 -4.20799998,3.36699999 -4.20699998,4.34799999 z"
    },
    TASK_TYPE_MANUAL: {
      d: "m {mx},{my} c 0.234,-0.01 5.604,0.008 8.029,0.004 0.808,0 1.271,-0.172 1.417,-0.752 0.227,-0.898 -0.334,-1.314 -1.338,-1.316 -2.467,-0.01 -7.886,-0.004 -8.108,-0.004 -0.014,-0.079 0.016,-0.533 0,-0.61 0.195,-0.042 8.507,0.006 9.616,0.002 0.877,-0.007 1.35,-0.438 1.353,-1.208 0.003,-0.768 -0.479,-1.09 -1.35,-1.091 -2.968,-0.002 -9.619,-0.013 -9.619,-0.013 v -0.591 c 0,0 5.052,-0.016 7.225,-0.016 0.888,-0.002 1.354,-0.416 1.351,-1.193 -0.006,-0.761 -0.492,-1.196 -1.361,-1.196 -3.473,-0.005 -10.86,-0.003 -11.0829995,-0.003 -0.022,-0.047 -0.045,-0.094 -0.069,-0.139 0.3939995,-0.319 2.0409995,-1.626 2.4149995,-2.017 0.469,-0.4870005 0.519,-1.1650005 0.162,-1.6040005 -0.414,-0.511 -0.973,-0.5 -1.48,-0.236 -1.4609995,0.764 -6.5999995,3.6430005 -7.7329995,4.2710005 -0.9,0.499 -1.516,1.253 -1.882,2.19 -0.37000002,0.95 -0.17,2.01 -0.166,2.979 0.004,0.718 -0.27300002,1.345 -0.055,2.063 0.629,2.087 2.425,3.312 4.859,3.318 4.6179995,0.014 9.2379995,-0.139 13.8569995,-0.158 0.755,-0.004 1.171,-0.301 1.182,-1.033 0.012,-0.754 -0.423,-0.969 -1.183,-0.973 -1.778,-0.01 -5.824,-0.004 -6.04,-0.004 10e-4,-0.084 0.003,-0.586 10e-4,-0.67 z"
    },
    TASK_TYPE_INSTANTIATING_SEND: {
      d: "m {mx},{my} l 0,8.4 l 12.6,0 l 0,-8.4 z l 6.3,3.6 l 6.3,-3.6"
    },
    TASK_TYPE_SERVICE: {
      d: "m {mx},{my} v -1.71335 c 0.352326,-0.0705 0.703932,-0.17838 1.047628,-0.32133 0.344416,-0.14465 0.665822,-0.32133 0.966377,-0.52145 l 1.19431,1.18005 1.567487,-1.57688 -1.195028,-1.18014 c 0.403376,-0.61394 0.683079,-1.29908 0.825447,-2.01824 l 1.622133,-0.01 v -2.2196 l -1.636514,0.01 c -0.07333,-0.35153 -0.178319,-0.70024 -0.323564,-1.04372 -0.145244,-0.34406 -0.321407,-0.6644 -0.522735,-0.96217 l 1.131035,-1.13631 -1.583305,-1.56293 -1.129598,1.13589 c -0.614052,-0.40108 -1.302883,-0.68093 -2.022633,-0.82247 l 0.0093,-1.61852 h -2.241173 l 0.0042,1.63124 c -0.353763,0.0736 -0.705369,0.17977 -1.049785,0.32371 -0.344415,0.14437 -0.665102,0.32092 -0.9635006,0.52046 l -1.1698628,-1.15823 -1.5667691,1.5792 1.1684265,1.15669 c -0.4026573,0.61283 -0.68308,1.29797 -0.8247287,2.01713 l -1.6588041,0.003 v 2.22174 l 1.6724648,-0.006 c 0.073327,0.35077 0.1797598,0.70243 0.3242851,1.04472 0.1452428,0.34448 0.3214064,0.6644 0.5227339,0.96066 l -1.1993431,1.19723 1.5840256,1.56011 1.1964668,-1.19348 c 0.6140517,0.40346 1.3028827,0.68232 2.0233517,0.82331 l 7.19e-4,1.69892 h 2.226848 z m 0.221462,-3.9957 c -1.788948,0.7502 -3.8576,-0.0928 -4.6097055,-1.87438 -0.7521065,-1.78321 0.090598,-3.84627 1.8802645,-4.59604 1.78823,-0.74936 3.856881,0.0929 4.608987,1.87437 0.752106,1.78165 -0.0906,3.84612 -1.879546,4.59605 z"
    },
    TASK_TYPE_SERVICE_FILL: {
      d: "m {mx},{my} c -1.788948,0.7502 -3.8576,-0.0928 -4.6097055,-1.87438 -0.7521065,-1.78321 0.090598,-3.84627 1.8802645,-4.59604 1.78823,-0.74936 3.856881,0.0929 4.608987,1.87437 0.752106,1.78165 -0.0906,3.84612 -1.879546,4.59605 z"
    },
    TASK_TYPE_BUSINESS_RULE_HEADER: {
      d: "m {mx},{my} 0,4 20,0 0,-4 z"
    },
    TASK_TYPE_BUSINESS_RULE_MAIN: {
      d: "m {mx},{my} 0,12 20,0 0,-12 zm 0,8 l 20,0 m -13,-4 l 0,8"
    },
    MESSAGE_FLOW_MARKER: {
      d: "m {mx},{my} m -10.5 ,-7 l 0,14 l 21,0 l 0,-14 z l 10.5,6 l 10.5,-6"
    }
  }, this.getRawPath = function(t) {
    return this.pathMap[t].d;
  }, this.getScaledPath = function(t, n) {
    var i = this.pathMap[t], r, o;
    n.abspos ? (r = n.abspos.x, o = n.abspos.y) : (r = n.containerWidth * n.position.mx, o = n.containerHeight * n.position.my);
    var a = {};
    if (n.position) {
      for (var c = n.containerHeight / i.height * n.yScaleFactor, l = n.containerWidth / i.width * n.xScaleFactor, u = 0; u < i.heightElements.length; u++)
        a["y" + u] = i.heightElements[u] * c;
      for (var d = 0; d < i.widthElements.length; d++)
        a["x" + d] = i.widthElements[d] * l;
    }
    var f = d2(
      i.d,
      {
        mx: r,
        my: o,
        e: a
      }
    );
    return f;
  };
}
var u2 = /\{([^{}]+)\}/g, p2 = /(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g;
function f2(e, t, n) {
  var i = n;
  return t.replace(p2, function(r, o, a, c, l) {
    o = o || c, i && (o in i && (i = i[o]), typeof i == "function" && l && (i = i()));
  }), i = (i == null || i == n ? e : i) + "", i;
}
function d2(e, t) {
  return String(e).replace(u2, function(n, i) {
    return f2(n, i, t);
  });
}
const h2 = {
  __init__: ["bpmnRenderer"],
  bpmnRenderer: ["type", ia],
  textRenderer: ["type", nb],
  pathMap: ["type", l2]
};
function m2(e, t) {
  return t = t || {}, e.replace(/{([^}]+)}/g, function(n, i) {
    return t[i] || "{" + i + "}";
  });
}
const Au = {
  translate: ["value", m2]
};
function $l(e, t, n) {
  return U({
    id: e.id,
    type: e.$type,
    businessObject: e,
    di: t
  }, n);
}
function y2(e, t, n) {
  var i = e.waypoint;
  return !i || i.length < 2 ? [Fe(t), Fe(n)] : i.map(function(r) {
    return { x: r.x, y: r.y };
  });
}
function ib(e, t, n) {
  return new Error(
    `element ${Nn(t)} referenced by ${Nn(e)}#${n} not yet drawn`
  );
}
function Nr(e, t, n, i, r) {
  this._eventBus = e, this._canvas = t, this._elementFactory = n, this._elementRegistry = i, this._textRenderer = r;
}
Nr.$inject = [
  "eventBus",
  "canvas",
  "elementFactory",
  "elementRegistry",
  "textRenderer"
];
Nr.prototype.add = function(e, t, n) {
  var i, r, o;
  if (P(t, "bpmndi:BPMNPlane")) {
    var a = P(e, "bpmn:SubProcess") ? { id: e.id + "_plane" } : {};
    i = this._elementFactory.createRoot($l(e, t, a)), this._canvas.addRootElement(i);
  } else if (P(t, "bpmndi:BPMNShape")) {
    var c = !pt(e, t), l = v2(e);
    r = n && (n.hidden || n.collapsed);
    var u = t.bounds;
    i = this._elementFactory.createShape($l(e, t, {
      collapsed: c,
      hidden: r,
      x: Math.round(u.x),
      y: Math.round(u.y),
      width: Math.round(u.width),
      height: Math.round(u.height),
      isFrame: l
    })), P(e, "bpmn:BoundaryEvent") && this._attachBoundary(e, i), P(e, "bpmn:Lane") && (o = 0), P(e, "bpmn:DataStoreReference") && (g2(n, Fe(u)) || (n = this._canvas.findRoot(n))), this._canvas.addShape(i, n, o);
  } else if (P(t, "bpmndi:BPMNEdge")) {
    var d = this._getSource(e), f = this._getTarget(e);
    r = n && (n.hidden || n.collapsed), i = this._elementFactory.createConnection($l(e, t, {
      hidden: r,
      source: d,
      target: f,
      waypoints: y2(t, d, f)
    })), P(e, "bpmn:DataAssociation") && (n = this._canvas.findRoot(n)), this._canvas.addConnection(i, n, o);
  } else
    throw new Error(
      `unknown di ${Nn(t)} for element ${Nn(e)}`
    );
  return Xo(e) && ki(i) && this.addLabel(e, t, i), this._eventBus.fire("bpmnElement.added", { element: i }), i;
};
Nr.prototype._attachBoundary = function(e, t) {
  var n = e.attachedToRef;
  if (!n)
    throw new Error(
      `missing ${Nn(e)}#attachedToRef`
    );
  var i = this._elementRegistry.get(n.id), r = i && i.attachers;
  if (!i)
    throw ib(e, n, "attachedToRef");
  t.host = i, r || (i.attachers = r = []), r.indexOf(t) === -1 && r.push(t);
};
Nr.prototype.addLabel = function(e, t, n) {
  var i, r, o;
  return i = NA(t, n), r = ki(n), r && (i = this._textRenderer.getExternalLabelBounds(i, r)), o = this._elementFactory.createLabel($l(e, t, {
    id: e.id + "_label",
    labelTarget: n,
    type: "label",
    hidden: n.hidden || !ki(n),
    x: Math.round(i.x),
    y: Math.round(i.y),
    width: Math.round(i.width),
    height: Math.round(i.height)
  })), this._canvas.addShape(o, n.parent);
};
Nr.prototype._getConnectedElement = function(e, t) {
  var n, i, r = e.$type;
  if (i = e[t + "Ref"], t === "source" && r === "bpmn:DataInputAssociation" && (i = i && i[0]), (t === "source" && r === "bpmn:DataOutputAssociation" || t === "target" && r === "bpmn:DataInputAssociation") && (i = e.$parent), n = i && this._getElement(i), n)
    return n;
  throw i ? ib(e, i, t + "Ref") : new Error(
    `${Nn(e)}#${t} Ref not specified`
  );
};
Nr.prototype._getSource = function(e) {
  return this._getConnectedElement(e, "source");
};
Nr.prototype._getTarget = function(e) {
  return this._getConnectedElement(e, "target");
};
Nr.prototype._getElement = function(e) {
  return this._elementRegistry.get(e.id);
};
function g2(e, t) {
  var n = t.x, i = t.y;
  return n >= e.x && n <= e.x + e.width && i >= e.y && i <= e.y + e.height;
}
function v2(e) {
  return P(e, "bpmn:Group");
}
const _2 = {
  __depends__: [
    Au
  ],
  bpmnImporter: ["type", Nr]
}, b2 = {
  __depends__: [
    h2,
    _2
  ]
};
function Od(e) {
  this._counter = 0, this._prefix = (e ? e + "-" : "") + Math.floor(Math.random() * 1e9) + "-";
}
Od.prototype.next = function() {
  return this._prefix + ++this._counter;
};
var x2 = new Od("ov"), E2 = 500;
function _n(e, t, n, i) {
  this._eventBus = t, this._canvas = n, this._elementRegistry = i, this._ids = x2, this._overlayDefaults = U({
    // no show constraints
    show: null,
    // always scale
    scale: !0
  }, e && e.defaults), this._overlays = {}, this._overlayContainers = [], this._overlayRoot = w2(n.getContainer()), this._init();
}
_n.$inject = [
  "config.overlays",
  "eventBus",
  "canvas",
  "elementRegistry"
];
_n.prototype.get = function(e) {
  if (ci(e) && (e = { id: e }), ci(e.element) && (e.element = this._elementRegistry.get(e.element)), e.element) {
    var t = this._getOverlayContainer(e.element, !0);
    return t ? e.type ? tt(t.overlays, zi({ type: e.type })) : t.overlays.slice() : [];
  } else
    return e.type ? tt(this._overlays, zi({ type: e.type })) : e.id ? this._overlays[e.id] : null;
};
_n.prototype.add = function(e, t, n) {
  if (vn(t) && (n = t, t = null), e.id || (e = this._elementRegistry.get(e)), !n.position)
    throw new Error("must specifiy overlay position");
  if (!n.html)
    throw new Error("must specifiy overlay html");
  if (!e)
    throw new Error("invalid element specified");
  var i = this._ids.next();
  return n = U({}, this._overlayDefaults, n, {
    id: i,
    type: t,
    element: e,
    html: n.html
  }), this._addOverlay(n), i;
};
_n.prototype.remove = function(e) {
  var t = this.get(e) || [];
  Ke(t) || (t = [t]);
  var n = this;
  z(t, function(i) {
    var r = n._getOverlayContainer(i.element, !0);
    if (i && (cr(i.html), cr(i.htmlContainer), delete i.htmlContainer, delete i.element, delete n._overlays[i.id]), r) {
      var o = r.overlays.indexOf(i);
      o !== -1 && r.overlays.splice(o, 1);
    }
  });
};
_n.prototype.isShown = function() {
  return this._overlayRoot.style.display !== "none";
};
_n.prototype.show = function() {
  Pu(this._overlayRoot);
};
_n.prototype.hide = function() {
  Pu(this._overlayRoot, !1);
};
_n.prototype.clear = function() {
  this._overlays = {}, this._overlayContainers = [], yu(this._overlayRoot);
};
_n.prototype._updateOverlayContainer = function(e) {
  var t = e.element, n = e.html, i = t.x, r = t.y;
  if (t.waypoints) {
    var o = pn(t);
    i = o.x, r = o.y;
  }
  rb(n, i, r), Vn(e.html, "data-container-id", t.id);
};
_n.prototype._updateOverlay = function(e) {
  var t = e.position, n = e.htmlContainer, i = e.element, r = t.left, o = t.top;
  if (t.right !== void 0) {
    var a;
    i.waypoints ? a = pn(i).width : a = i.width, r = t.right * -1 + a;
  }
  if (t.bottom !== void 0) {
    var c;
    i.waypoints ? c = pn(i).height : c = i.height, o = t.bottom * -1 + c;
  }
  rb(n, r || 0, o || 0), this._updateOverlayVisibilty(e, this._canvas.viewbox());
};
_n.prototype._createOverlayContainer = function(e) {
  var t = Ot('<div class="djs-overlays" />');
  Cn(t, { position: "absolute" }), this._overlayRoot.appendChild(t);
  var n = {
    html: t,
    element: e,
    overlays: []
  };
  return this._updateOverlayContainer(n), this._overlayContainers.push(n), n;
};
_n.prototype._updateRoot = function(e) {
  var t = e.scale || 1, n = "matrix(" + [
    t,
    0,
    0,
    t,
    -1 * e.x * t,
    -1 * e.y * t
  ].join(",") + ")";
  ob(this._overlayRoot, n);
};
_n.prototype._getOverlayContainer = function(e, t) {
  var n = gt(this._overlayContainers, function(i) {
    return i.element === e;
  });
  return !n && !t ? this._createOverlayContainer(e) : n;
};
_n.prototype._addOverlay = function(e) {
  var t = e.id, n = e.element, i = e.html, r, o;
  i.get && i.constructor.prototype.jquery && (i = i.get(0)), ci(i) && (i = Ot(i)), o = this._getOverlayContainer(n), r = Ot('<div class="djs-overlay" data-overlay-id="' + t + '">'), Cn(r, { position: "absolute" }), r.appendChild(i), e.type && rn(r).add("djs-overlay-" + e.type);
  var a = this._canvas.findRoot(n), c = this._canvas.getRootElement();
  Pu(r, a === c), e.htmlContainer = r, o.overlays.push(e), o.html.appendChild(r), this._overlays[t] = e, this._updateOverlay(e), this._updateOverlayVisibilty(e, this._canvas.viewbox());
};
_n.prototype._updateOverlayVisibilty = function(e, t) {
  var n = e.show, i = this._canvas.findRoot(e.element), r = n && n.minZoom, o = n && n.maxZoom, a = e.htmlContainer, c = this._canvas.getRootElement(), l = !0;
  (i !== c || n && (yn(r) && r > t.scale || yn(o) && o < t.scale)) && (l = !1), Pu(a, l), this._updateOverlayScale(e, t);
};
_n.prototype._updateOverlayScale = function(e, t) {
  var n = e.scale, i, r, o = e.htmlContainer, a, c = "";
  n !== !0 && (n === !1 ? (i = 1, r = 1) : (i = n.min, r = n.max), yn(i) && t.scale < i && (a = (1 / t.scale || 1) * i), yn(r) && t.scale > r && (a = (1 / t.scale || 1) * r)), yn(a) && (c = "scale(" + a + "," + a + ")"), ob(o, c);
};
_n.prototype._updateOverlaysVisibilty = function(e) {
  var t = this;
  z(this._overlays, function(n) {
    t._updateOverlayVisibilty(n, e);
  });
};
_n.prototype._init = function() {
  var e = this._eventBus, t = this;
  function n(i) {
    t._updateRoot(i), t._updateOverlaysVisibilty(i), t.show();
  }
  e.on("canvas.viewbox.changing", function(i) {
    t.hide();
  }), e.on("canvas.viewbox.changed", function(i) {
    n(i.viewbox);
  }), e.on(["shape.remove", "connection.remove"], function(i) {
    var r = i.element, o = t.get({ element: r });
    z(o, function(l) {
      t.remove(l.id);
    });
    var a = t._getOverlayContainer(r);
    if (a) {
      cr(a.html);
      var c = t._overlayContainers.indexOf(a);
      c !== -1 && t._overlayContainers.splice(c, 1);
    }
  }), e.on("element.changed", E2, function(i) {
    var r = i.element, o = t._getOverlayContainer(r, !0);
    o && (z(o.overlays, function(a) {
      t._updateOverlay(a);
    }), t._updateOverlayContainer(o));
  }), e.on("element.marker.update", function(i) {
    var r = t._getOverlayContainer(i.element, !0);
    r && rn(r.html)[i.add ? "add" : "remove"](i.marker);
  }), e.on("root.set", function() {
    t._updateOverlaysVisibilty(t._canvas.viewbox());
  }), e.on("diagram.clear", this.clear, this);
};
function w2(e) {
  var t = Ot(
    '<div class="djs-overlay-container" />'
  );
  return Cn(t, {
    position: "absolute",
    width: 0,
    height: 0
  }), e.insertBefore(t, e.firstChild), t;
}
function rb(e, t, n) {
  Cn(e, { left: t + "px", top: n + "px" });
}
function Pu(e, t) {
  e.style.display = t === !1 ? "none" : "";
}
function ob(e, t) {
  e.style["transform-origin"] = "top left", ["", "-ms-", "-webkit-"].forEach(function(n) {
    e.style[n + "transform"] = t;
  });
}
const Tu = {
  __init__: ["overlays"],
  overlays: ["type", _n]
};
function ab(e, t, n, i) {
  e.on("element.changed", function(r) {
    var o = r.element;
    (o.parent || o === t.getRootElement()) && (r.gfx = n.getGraphics(o)), r.gfx && e.fire(v_(o) + ".changed", r);
  }), e.on("elements.changed", function(r) {
    var o = r.elements;
    o.forEach(function(a) {
      e.fire("element.changed", { element: a });
    }), i.updateContainments(o);
  }), e.on("shape.changed", function(r) {
    i.update("shape", r.element, r.gfx);
  }), e.on("connection.changed", function(r) {
    i.update("connection", r.element, r.gfx);
  });
}
ab.$inject = [
  "eventBus",
  "canvas",
  "elementRegistry",
  "graphicsFactory"
];
const Nd = {
  __init__: ["changeSupport"],
  changeSupport: ["type", ab]
};
var S2 = 1e3;
function le(e) {
  this._eventBus = e;
}
le.$inject = ["eventBus"];
function R2(e, t) {
  return function(n) {
    return e.call(t || null, n.context, n.command, n);
  };
}
le.prototype.on = function(e, t, n, i, r, o) {
  if ((fn(t) || je(t)) && (o = r, r = i, i = n, n = t, t = null), fn(n) && (o = r, r = i, i = n, n = S2), vn(r) && (o = r, r = !1), !fn(i))
    throw new Error("handlerFn must be a function");
  Ke(e) || (e = [e]);
  var a = this._eventBus;
  z(e, function(c) {
    var l = ["commandStack", c, t].filter(function(u) {
      return u;
    }).join(".");
    a.on(l, n, r ? R2(i, o) : i, o);
  });
};
le.prototype.canExecute = Br("canExecute");
le.prototype.preExecute = Br("preExecute");
le.prototype.preExecuted = Br("preExecuted");
le.prototype.execute = Br("execute");
le.prototype.executed = Br("executed");
le.prototype.postExecute = Br("postExecute");
le.prototype.postExecuted = Br("postExecuted");
le.prototype.revert = Br("revert");
le.prototype.reverted = Br("reverted");
function Br(e) {
  return function(n, i, r, o, a) {
    (fn(n) || je(n)) && (a = o, o = r, r = i, i = n, n = null), this.on(n, e, i, r, o, a);
  };
}
function Bd(e, t) {
  t.invoke(le, this), this.executed(function(n) {
    var i = n.context;
    i.rootElement ? e.setRootElement(i.rootElement) : i.rootElement = e.getRootElement();
  }), this.revert(function(n) {
    var i = n.context;
    i.rootElement && e.setRootElement(i.rootElement);
  });
}
Pe(Bd, le);
Bd.$inject = ["canvas", "injector"];
const C2 = {
  __init__: ["rootElementsBehavior"],
  rootElementsBehavior: ["type", Bd]
};
function Hs(e) {
  return CSS.escape(e);
}
var A2 = {
  "&": "&amp;",
  "<": "&lt;",
  ">": "&gt;",
  '"': "&quot;",
  "'": "&#39;"
};
function $f(e) {
  return e = "" + e, e && e.replace(/[&<>"']/g, function(t) {
    return A2[t];
  });
}
var sb = "_plane";
function fg(e) {
  var t = e.id;
  return P2(t);
}
function Cr(e) {
  var t = e.id;
  return P(e, "bpmn:SubProcess") ? cb(t) : t;
}
function $o(e) {
  return cb(e);
}
function jl(e) {
  var t = bt(e);
  return P(t, "bpmndi:BPMNPlane");
}
function cb(e) {
  return e + sb;
}
function P2(e) {
  return e.replace(new RegExp(sb + "$"), "");
}
var T2 = "bjs-breadcrumbs-shown";
function lb(e, t, n) {
  var i = Ot('<ul class="bjs-breadcrumbs"></ul>'), r = n.getContainer(), o = rn(r);
  r.appendChild(i);
  var a = [];
  e.on("element.changed", function(l) {
    var u = l.element, d = he(u), f = gt(a, function(y) {
      return y === d;
    });
    f && c();
  });
  function c(l) {
    l && (a = k2(l));
    var u = a.map(function(f) {
      var y = $f(f.name || f.id), g = Ot('<li><span class="bjs-crumb"><a title="' + y + '">' + y + "</a></span></li>"), _ = n.findRoot(Cr(f)) || n.findRoot(f.id);
      if (!_ && P(f, "bpmn:Process")) {
        var x = t.find(function(w) {
          var B = he(w);
          return B && B.get("processRef") && B.get("processRef") === f;
        });
        _ = n.findRoot(x.id);
      }
      return g.addEventListener("click", function() {
        n.setRootElement(_);
      }), g;
    });
    i.innerHTML = "";
    var d = u.length > 1;
    o.toggle(T2, d), u.forEach(function(f) {
      i.appendChild(f);
    });
  }
  e.on("root.set", function(l) {
    c(l.element);
  });
}
lb.$inject = ["eventBus", "elementRegistry", "canvas"];
function k2(e) {
  for (var t = he(e), n = [], i = t; i; i = i.$parent)
    (P(i, "bpmn:SubProcess") || P(i, "bpmn:Process")) && n.push(i);
  return n.reverse();
}
function ub(e, t) {
  var n = null, i = new M2();
  e.on("root.set", function(r) {
    var o = r.element, a = t.viewbox(), c = i.get(o);
    if (i.set(n, {
      x: a.x,
      y: a.y,
      zoom: a.scale
    }), n = o, !(P(o, "bpmn:Collaboration") && !c)) {
      c = c || { x: 0, y: 0, zoom: 1 };
      var l = (a.x - c.x) * a.scale, u = (a.y - c.y) * a.scale;
      (l !== 0 || u !== 0) && t.scroll({
        dx: l,
        dy: u
      }), c.zoom !== a.scale && t.zoom(c.zoom, { x: 0, y: 0 });
    }
  }), e.on("diagram.clear", function() {
    i.clear(), n = null;
  });
}
ub.$inject = ["eventBus", "canvas"];
function M2() {
  this._entries = [], this.set = function(e, t) {
    var n = !1;
    for (var i in this._entries)
      if (this._entries[i][0] === e) {
        this._entries[i][1] = t, n = !0;
        break;
      }
    n || this._entries.push([e, t]);
  }, this.get = function(e) {
    for (var t in this._entries)
      if (this._entries[t][0] === e)
        return this._entries[t][1];
    return null;
  }, this.clear = function() {
    this._entries.length = 0;
  }, this.remove = function(e) {
    var t = -1;
    for (var n in this._entries)
      if (this._entries[n][0] === e) {
        t = n;
        break;
      }
    t !== -1 && this._entries.splice(t, 1);
  };
}
var dg = {
  x: 180,
  y: 160
};
function ra(e, t) {
  this._eventBus = e, this._moddle = t;
  var n = this;
  e.on("import.render.start", 1500, function(i, r) {
    n._handleImport(r.definitions);
  });
}
ra.prototype._handleImport = function(e) {
  if (e.diagrams) {
    var t = this;
    this._definitions = e, this._processToDiagramMap = {}, e.diagrams.forEach(function(i) {
      !i.plane || !i.plane.bpmnElement || (t._processToDiagramMap[i.plane.bpmnElement.id] = i);
    });
    var n = [];
    e.diagrams.forEach(function(i) {
      var r = t._createNewDiagrams(i.plane);
      Array.prototype.push.apply(n, r);
    }), n.forEach(function(i) {
      t._movePlaneElementsToOrigin(i.plane);
    });
  }
};
ra.prototype._createNewDiagrams = function(e) {
  var t = this, n = [], i = [];
  e.get("planeElement").forEach(function(o) {
    var a = o.bpmnElement;
    if (a) {
      var c = a.$parent;
      P(a, "bpmn:SubProcess") && !o.isExpanded && n.push(a), O2(a, e) && i.push({ diElement: o, parent: c });
    }
  });
  var r = [];
  return n.forEach(function(o) {
    if (!t._processToDiagramMap[o.id]) {
      var a = t._createDiagram(o);
      t._processToDiagramMap[o.id] = a, r.push(a);
    }
  }), i.forEach(function(o) {
    for (var a = o.diElement, c = o.parent; c && n.indexOf(c) === -1; )
      c = c.$parent;
    if (c) {
      var l = t._processToDiagramMap[c.id];
      t._moveToDiPlane(a, l.plane);
    }
  }), r;
};
ra.prototype._movePlaneElementsToOrigin = function(e) {
  var t = e.get("planeElement"), n = D2(e), i = {
    x: n.x - dg.x,
    y: n.y - dg.y
  };
  t.forEach(function(r) {
    r.waypoint ? r.waypoint.forEach(function(o) {
      o.x = o.x - i.x, o.y = o.y - i.y;
    }) : r.bounds && (r.bounds.x = r.bounds.x - i.x, r.bounds.y = r.bounds.y - i.y);
  });
};
ra.prototype._moveToDiPlane = function(e, t) {
  var n = pb(e), i = n.plane.get("planeElement");
  i.splice(i.indexOf(e), 1), t.get("planeElement").push(e);
};
ra.prototype._createDiagram = function(e) {
  var t = this._moddle.create("bpmndi:BPMNPlane", {
    bpmnElement: e
  }), n = this._moddle.create("bpmndi:BPMNDiagram", {
    plane: t
  });
  return t.$parent = n, t.bpmnElement = e, n.$parent = this._definitions, this._definitions.diagrams.push(n), n;
};
ra.$inject = ["eventBus", "moddle"];
function pb(e) {
  return P(e, "bpmndi:BPMNDiagram") ? e : pb(e.$parent);
}
function D2(e) {
  var t = {
    top: 1 / 0,
    right: -1 / 0,
    bottom: -1 / 0,
    left: 1 / 0
  };
  return e.planeElement.forEach(function(n) {
    if (n.bounds) {
      var i = Le(n.bounds);
      t.top = Math.min(i.top, t.top), t.left = Math.min(i.left, t.left);
    }
  }), bu(t);
}
function O2(e, t) {
  var n = e.$parent;
  return !(!P(n, "bpmn:SubProcess") || n === t.bpmnElement || rt(e, ["bpmn:DataInputAssociation", "bpmn:DataOutputAssociation"]));
}
var cl = 250, N2 = '<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4.81801948,3.50735931 L10.4996894,9.1896894 L10.5,4 L12,4 L12,12 L4,12 L4,10.5 L9.6896894,10.4996894 L3.75735931,4.56801948 C3.46446609,4.27512627 3.46446609,3.80025253 3.75735931,3.50735931 C4.05025253,3.21446609 4.52512627,3.21446609 4.81801948,3.50735931 Z"/></svg>', B2 = "bjs-drilldown-empty";
function fo(e, t, n, i) {
  le.call(this, t), this._canvas = e, this._eventBus = t, this._elementRegistry = n, this._overlays = i;
  var r = this;
  this.executed("shape.toggleCollapse", cl, function(o) {
    var a = o.shape;
    r._canDrillDown(a) ? r._addOverlay(a) : r._removeOverlay(a);
  }, !0), this.reverted("shape.toggleCollapse", cl, function(o) {
    var a = o.shape;
    r._canDrillDown(a) ? r._addOverlay(a) : r._removeOverlay(a);
  }, !0), this.executed(
    ["shape.create", "shape.move", "shape.delete"],
    cl,
    function(o) {
      var a = o.oldParent, c = o.newParent || o.parent, l = o.shape;
      r._canDrillDown(l) && r._addOverlay(l), r._updateDrilldownOverlay(a), r._updateDrilldownOverlay(c), r._updateDrilldownOverlay(l);
    },
    !0
  ), this.reverted(
    ["shape.create", "shape.move", "shape.delete"],
    cl,
    function(o) {
      var a = o.oldParent, c = o.newParent || o.parent, l = o.shape;
      r._canDrillDown(l) && r._addOverlay(l), r._updateDrilldownOverlay(a), r._updateDrilldownOverlay(c), r._updateDrilldownOverlay(l);
    },
    !0
  ), t.on("import.render.complete", function() {
    n.filter(function(o) {
      return r._canDrillDown(o);
    }).map(function(o) {
      r._addOverlay(o);
    });
  });
}
Pe(fo, le);
fo.prototype._updateDrilldownOverlay = function(e) {
  var t = this._canvas;
  if (e) {
    var n = t.findRoot(e);
    n && this._updateOverlayVisibility(n);
  }
};
fo.prototype._canDrillDown = function(e) {
  var t = this._canvas;
  return P(e, "bpmn:SubProcess") && t.findRoot(Cr(e));
};
fo.prototype._updateOverlayVisibility = function(e) {
  var t = this._overlays, n = he(e), i = t.get({ element: n.id, type: "drilldown" })[0];
  if (i) {
    var r = n && n.get("flowElements") && n.get("flowElements").length;
    rn(i.html).toggle(B2, !r);
  }
};
fo.prototype._addOverlay = function(e) {
  var t = this._canvas, n = this._overlays, i = n.get({ element: e, type: "drilldown" });
  i.length && this._removeOverlay(e);
  var r = Ot('<button class="bjs-drilldown">' + N2 + "</button>");
  r.addEventListener("click", function() {
    t.setRootElement(t.findRoot(Cr(e)));
  }), n.add(e, "drilldown", {
    position: {
      bottom: -7,
      right: -8
    },
    html: r
  }), this._updateOverlayVisibility(e);
};
fo.prototype._removeOverlay = function(e) {
  var t = this._overlays;
  t.remove({
    element: e,
    type: "drilldown"
  });
};
fo.$inject = [
  "canvas",
  "eventBus",
  "elementRegistry",
  "overlays"
];
const L2 = {
  __depends__: [Tu, Nd, C2],
  __init__: ["drilldownBreadcrumbs", "drilldownOverlayBehavior", "drilldownCentering", "subprocessCompatibility"],
  drilldownBreadcrumbs: ["type", lb],
  drilldownCentering: ["type", ub],
  drilldownOverlayBehavior: ["type", fo],
  subprocessCompatibility: ["type", ra]
};
var I2 = 500, $2 = 1e3;
function oa(e, t) {
  this._eventBus = e, this.offset = 5;
  var n = t.cls("djs-outline", ["no-fill"]), i = this;
  function r(o) {
    var a = Me("rect");
    return we(a, U({
      x: 0,
      y: 0,
      rx: 4,
      width: 100,
      height: 100
    }, n)), a;
  }
  e.on(["shape.added", "shape.changed"], I2, function(o) {
    var a = o.element, c = o.gfx, l = Tt(".djs-outline", c);
    l || (l = i.getOutline(a) || r(), ze(c, l)), i.updateShapeOutline(l, a);
  }), e.on(["connection.added", "connection.changed"], function(o) {
    var a = o.element, c = o.gfx, l = Tt(".djs-outline", c);
    l || (l = r(), ze(c, l)), i.updateConnectionOutline(l, a);
  });
}
oa.prototype.updateShapeOutline = function(e, t) {
  var n = !1, i = this._getProviders();
  i.length && z(i, function(r) {
    n = n || r.updateOutline(t, e);
  }), n || we(e, {
    x: -this.offset,
    y: -this.offset,
    width: t.width + this.offset * 2,
    height: t.height + this.offset * 2
  });
};
oa.prototype.updateConnectionOutline = function(e, t) {
  var n = pn(t);
  we(e, {
    x: n.x - this.offset,
    y: n.y - this.offset,
    width: n.width + this.offset * 2,
    height: n.height + this.offset * 2
  });
};
oa.prototype.registerProvider = function(e, t) {
  t || (t = e, e = $2), this._eventBus.on("outline.getProviders", e, function(n) {
    n.providers.push(t);
  });
};
oa.prototype._getProviders = function() {
  var e = this._eventBus.createEvent({
    type: "outline.getProviders",
    providers: []
  });
  return this._eventBus.fire(e), e.providers;
};
oa.prototype.getOutline = function(e) {
  var t, n = this._getProviders();
  return z(n, function(i) {
    fn(i.getOutline) && (t = t || i.getOutline(e));
  }), t;
};
oa.$inject = ["eventBus", "styles", "elementRegistry"];
const Ld = {
  __init__: ["outline"],
  outline: ["type", oa]
}, j2 = "M44.7648 11.3263L36.9892 2.64074C36.0451 1.58628 34.5651 0.988708 33.1904 0.988708H5.98667C3.22688 0.988708 0.989624 3.34892 0.989624 6.26039V55.0235C0.989624 57.9349 3.22688 60.2952 5.98667 60.2952H40.966C43.7257 60.2952 45.963 57.9349 45.963 55.0235V14.9459C45.963 13.5998 45.6407 12.3048 44.7648 11.3263Z", F2 = "M1.03845 48.1347C1.03845 49.3511 1.07295 50.758 1.38342 52.064C1.69949 53.3938 2.32428 54.7154 3.56383 55.6428C6.02533 57.4841 10.1161 58.7685 14.8212 59.6067C19.5772 60.4538 25.1388 60.8738 30.6831 60.8738C36.2276 60.8738 41.7891 60.4538 46.545 59.6067C51.2504 58.7687 55.3412 57.4842 57.8028 55.6429C59.0424 54.7156 59.6673 53.3938 59.9834 52.064C60.2938 50.7579 60.3285 49.351 60.3285 48.1344V13.8415C60.3285 12.6249 60.2938 11.218 59.9834 9.91171C59.6673 8.58194 59.0423 7.2602 57.8027 6.33294C55.341 4.49168 51.2503 3.20723 46.545 2.36914C41.7891 1.522 36.2276 1.10204 30.6831 1.10205C25.1388 1.10206 19.5772 1.52206 14.8213 2.36923C10.1162 3.20734 6.02543 4.49183 3.5639 6.33314C2.32433 7.26038 1.69951 8.58206 1.38343 9.91181C1.07295 11.2179 1.03845 12.6247 1.03845 13.8411V48.1347Z", H2 = { width: 36, height: 50 }, z2 = { width: 50, height: 50 };
function hg(e, t, n) {
  return Me("path", {
    d: e,
    strokeWidth: 2,
    transform: `translate(${t.x}, ${t.y})`,
    ...n
  });
}
const eo = 5;
function ku(e, t) {
  this._styles = t, e.registerProvider(this);
}
ku.$inject = [
  "outline",
  "styles"
];
ku.prototype.getOutline = function(e) {
  const t = this._styles.cls("djs-outline", ["no-fill"]);
  var n;
  if (!vt(e))
    return P(e, "bpmn:Gateway") ? (n = Me("rect"), U(n.style, {
      "transform-box": "fill-box",
      transform: "rotate(45deg)",
      "transform-origin": "center"
    }), we(n, U({
      x: 2,
      y: 2,
      rx: 4,
      width: e.width - 4,
      height: e.height - 4
    }, t))) : rt(e, ["bpmn:Task", "bpmn:SubProcess", "bpmn:Group"]) ? (n = Me("rect"), we(n, U({
      x: -eo,
      y: -eo,
      rx: 14,
      width: e.width + eo * 2,
      height: e.height + eo * 2
    }, t))) : P(e, "bpmn:EndEvent") ? (n = Me("circle"), we(n, U({
      cx: e.width / 2,
      cy: e.height / 2,
      r: e.width / 2 + eo + 1
    }, t))) : P(e, "bpmn:Event") ? (n = Me("circle"), we(n, U({
      cx: e.width / 2,
      cy: e.height / 2,
      r: e.width / 2 + eo
    }, t))) : P(e, "bpmn:DataObjectReference") && mg(e, "bpmn:DataObjectReference") ? n = hg(
      j2,
      { x: -6, y: -6 },
      t
    ) : P(e, "bpmn:DataStoreReference") && mg(e, "bpmn:DataStoreReference") && (n = hg(
      F2,
      { x: -6, y: -6 },
      t
    )), n;
};
ku.prototype.updateOutline = function(e, t) {
  if (!vt(e))
    return rt(e, ["bpmn:SubProcess", "bpmn:Group"]) ? (we(t, {
      width: e.width + eo * 2,
      height: e.height + eo * 2
    }), !0) : !!rt(e, [
      "bpmn:Event",
      "bpmn:Gateway",
      "bpmn:DataStoreReference",
      "bpmn:DataObjectReference"
    ]);
};
function mg(e, t) {
  var n;
  return t === "bpmn:DataObjectReference" ? n = H2 : t === "bpmn:DataStoreReference" && (n = z2), e.width === n.width && e.height === n.height;
}
const V2 = {
  __depends__: [
    Ld
  ],
  __init__: ["outlineProvider"],
  outlineProvider: ["type", ku]
};
function yg(e) {
  !e || typeof e.stopPropagation != "function" || e.stopPropagation();
}
function Ka(e) {
  return e.originalEvent || e.srcEvent;
}
function Jp(e) {
  yg(e), yg(Ka(e));
}
function Zo(e) {
  return e.pointers && e.pointers.length && (e = e.pointers[0]), e.touches && e.touches.length && (e = e.touches[0]), e ? {
    x: e.clientX,
    y: e.clientY
  } : null;
}
function fb() {
  return /mac/i.test(navigator.platform);
}
function db(e, t) {
  return (Ka(e) || e).button === t;
}
function ho(e) {
  return db(e, 0);
}
function W2(e) {
  return db(e, 1);
}
function zs(e) {
  var t = Ka(e) || e;
  return ho(e) ? fb() ? t.metaKey : t.ctrlKey : !1;
}
function ru(e) {
  var t = Ka(e) || e;
  return ho(e) && t.shiftKey;
}
function G2(e) {
  return !0;
}
function ll(e) {
  return ho(e) || W2(e);
}
var gg = 500;
function hb(e, t, n) {
  var i = this;
  function r($, Z, X) {
    if (!c($, Z)) {
      var V, ae, ie;
      X ? ae = t.getGraphics(X) : (V = Z.delegateTarget || Z.target, V && (ae = V, X = t.get(ae))), !(!ae || !X) && (ie = e.fire($, {
        element: X,
        gfx: ae,
        originalEvent: Z
      }), ie === !1 && (Z.stopPropagation(), Z.preventDefault()));
    }
  }
  var o = {};
  function a($) {
    return o[$];
  }
  function c($, Z) {
    var X = u[$] || ho;
    return !X(Z);
  }
  var l = {
    click: "element.click",
    contextmenu: "element.contextmenu",
    dblclick: "element.dblclick",
    mousedown: "element.mousedown",
    mousemove: "element.mousemove",
    mouseover: "element.hover",
    mouseout: "element.out",
    mouseup: "element.mouseup"
  }, u = {
    "element.contextmenu": G2,
    "element.mousedown": ll,
    "element.mouseup": ll,
    "element.click": ll,
    "element.dblclick": ll
  };
  function d($, Z, X) {
    var V = l[$];
    if (!V)
      throw new Error("unmapped DOM event name <" + $ + ">");
    return r(V, Z, X);
  }
  var f = "svg, .djs-element";
  function y($, Z, X, V) {
    var ae = o[X] = function(ie) {
      r(X, ie);
    };
    V && (u[X] = V), ae.$delegate = si.bind($, f, Z, ae);
  }
  function g($, Z, X) {
    var V = a(X);
    V && si.unbind($, Z, V.$delegate);
  }
  function _($) {
    z(l, function(Z, X) {
      y($, X, Z);
    });
  }
  function x($) {
    z(l, function(Z, X) {
      g($, X, Z);
    });
  }
  e.on("canvas.destroy", function($) {
    x($.svg);
  }), e.on("canvas.init", function($) {
    _($.svg);
  }), e.on(["shape.added", "connection.added"], function($) {
    var Z = $.element, X = $.gfx;
    e.fire("interactionEvents.createHit", { element: Z, gfx: X });
  }), e.on([
    "shape.changed",
    "connection.changed"
  ], gg, function($) {
    var Z = $.element, X = $.gfx;
    e.fire("interactionEvents.updateHit", { element: Z, gfx: X });
  }), e.on("interactionEvents.createHit", gg, function($) {
    var Z = $.element, X = $.gfx;
    i.createDefaultHit(Z, X);
  }), e.on("interactionEvents.updateHit", function($) {
    var Z = $.element, X = $.gfx;
    i.updateDefaultHit(Z, X);
  });
  var w = D("djs-hit djs-hit-stroke"), B = D("djs-hit djs-hit-click-stroke"), N = D("djs-hit djs-hit-all"), k = D("djs-hit djs-hit-no-move"), A = {
    all: N,
    "click-stroke": B,
    stroke: w,
    "no-move": k
  };
  function D($, Z) {
    return Z = U({
      stroke: "white",
      strokeWidth: 15
    }, Z || {}), n.cls($, ["no-fill", "no-border"], Z);
  }
  function j($, Z) {
    var X = A[Z];
    if (!X)
      throw new Error("invalid hit type <" + Z + ">");
    return we($, X), $;
  }
  function W($, Z) {
    ze($, Z);
  }
  this.removeHits = function($) {
    var Z = Pf(".djs-hit", $);
    z(Z, qt);
  }, this.createDefaultHit = function($, Z) {
    var X = $.waypoints, V = $.isFrame, ae;
    return X ? this.createWaypointsHit(Z, X) : (ae = V ? "stroke" : "all", this.createBoxHit(Z, ae, {
      width: $.width,
      height: $.height
    }));
  }, this.createWaypointsHit = function($, Z) {
    var X = vu(Z);
    return j(X, "stroke"), W($, X), X;
  }, this.createBoxHit = function($, Z, X) {
    X = U({
      x: 0,
      y: 0
    }, X);
    var V = Me("rect");
    return j(V, Z), we(V, X), W($, V), V;
  }, this.updateDefaultHit = function($, Z) {
    var X = Tt(".djs-hit", Z);
    if (X)
      return $.waypoints ? y_(X, $.waypoints) : we(X, {
        width: $.width,
        height: $.height
      }), X;
  }, this.fire = r, this.triggerMouseEvent = d, this.mouseHandler = a, this.registerEvent = y, this.unregisterEvent = g;
}
hb.$inject = [
  "eventBus",
  "elementRegistry",
  "styles"
];
const Mu = {
  __init__: ["interactionEvents"],
  interactionEvents: ["type", hb]
};
function qa(e, t) {
  this._eventBus = e, this._canvas = t, this._selectedElements = [];
  var n = this;
  e.on(["shape.remove", "connection.remove"], function(i) {
    var r = i.element;
    n.deselect(r);
  }), e.on(["diagram.clear", "root.set"], function(i) {
    n.select(null);
  });
}
qa.$inject = ["eventBus", "canvas"];
qa.prototype.deselect = function(e) {
  var t = this._selectedElements, n = t.indexOf(e);
  if (n !== -1) {
    var i = t.slice();
    t.splice(n, 1), this._eventBus.fire("selection.changed", { oldSelection: i, newSelection: t });
  }
};
qa.prototype.get = function() {
  return this._selectedElements;
};
qa.prototype.isSelected = function(e) {
  return this._selectedElements.indexOf(e) !== -1;
};
qa.prototype.select = function(e, t) {
  var n = this._selectedElements, i = n.slice();
  Ke(e) || (e = e ? [e] : []);
  var r = this._canvas, o = r.getRootElement();
  e = e.filter(function(a) {
    var c = r.findRoot(a);
    return o === c;
  }), t ? z(e, function(a) {
    n.indexOf(a) === -1 && n.push(a);
  }) : this._selectedElements = n = e.slice(), this._eventBus.fire("selection.changed", { oldSelection: i, newSelection: n });
};
var vg = "hover", _g = "selected", ul = 6;
function Id(e, t, n) {
  this._canvas = e;
  var i = this;
  this._multiSelectionBox = null;
  function r(a, c) {
    e.addMarker(a, c);
  }
  function o(a, c) {
    e.removeMarker(a, c);
  }
  t.on("element.hover", function(a) {
    r(a.element, vg);
  }), t.on("element.out", function(a) {
    o(a.element, vg);
  }), t.on("selection.changed", function(a) {
    function c(f) {
      o(f, _g);
    }
    function l(f) {
      r(f, _g);
    }
    var u = a.oldSelection, d = a.newSelection;
    z(u, function(f) {
      d.indexOf(f) === -1 && c(f);
    }), z(d, function(f) {
      u.indexOf(f) === -1 && l(f);
    }), i._updateSelectionOutline(d);
  }), t.on("element.changed", function(a) {
    n.isSelected(a.element) && i._updateSelectionOutline(n.get());
  });
}
Id.$inject = [
  "canvas",
  "eventBus",
  "selection"
];
Id.prototype._updateSelectionOutline = function(e) {
  var t = this._canvas.getLayer("selectionOutline");
  gu(t);
  var n = e.length > 1, i = this._canvas.getContainer();
  if (dt(i)[n ? "add" : "remove"]("djs-multi-select"), !!n) {
    var r = U2(pn(e)), o = Me("rect");
    we(o, U({
      rx: 3
    }, r)), dt(o).add("djs-selection-outline"), ze(t, o);
  }
};
function U2(e) {
  return {
    x: e.x - ul,
    y: e.y - ul,
    width: e.width + ul * 2,
    height: e.height + ul * 2
  };
}
function mb(e, t, n, i) {
  e.on("create.end", 500, function(r) {
    var o = r.context, a = o.canExecute, c = o.elements, l = o.hints || {}, u = l.autoSelect;
    if (a) {
      if (u === !1)
        return;
      Ke(u) ? t.select(u) : t.select(c.filter(Y2));
    }
  }), e.on("connect.end", 500, function(r) {
    var o = r.context, a = o.connection;
    a && t.select(a);
  }), e.on("shape.move.end", 500, function(r) {
    var o = r.previousSelection || [], a = i.get(r.context.shape.id), c = gt(o, function(l) {
      return a.id === l.id;
    });
    c || t.select(a);
  }), e.on("element.click", function(r) {
    if (ho(r)) {
      var o = r.element;
      o === n.getRootElement() && (o = null);
      var a = t.isSelected(o), c = t.get().length > 1, l = ru(r);
      if (a && c)
        return l ? t.deselect(o) : t.select(o);
      a ? t.deselect(o) : t.select(o, l);
    }
  });
}
mb.$inject = [
  "eventBus",
  "selection",
  "canvas",
  "elementRegistry"
];
function Y2(e) {
  return !e.hidden;
}
const pr = {
  __init__: ["selectionVisuals", "selectionBehavior"],
  __depends__: [
    Mu,
    Ld
  ],
  selection: ["type", qa],
  selectionVisuals: ["type", Id],
  selectionBehavior: ["type", mb]
};
function mo(e) {
  zt.call(this, e);
}
Pe(mo, zt);
mo.prototype._modules = [
  b2,
  L2,
  V2,
  Tu,
  pr,
  Au
];
mo.prototype._moddleExtensions = {};
var K2 = ["c", "C"], q2 = ["v", "V"], X2 = ["y", "Y"], yb = ["z", "Z"];
function Z2(e) {
  return e.ctrlKey || e.metaKey || e.shiftKey || e.altKey;
}
function gi(e) {
  return e.altKey ? !1 : e.ctrlKey || e.metaKey;
}
function hn(e, t) {
  return e = Ke(e) ? e : [e], e.indexOf(t.key) !== -1 || e.indexOf(t.code) !== -1;
}
function $d(e) {
  return e.shiftKey;
}
function J2(e) {
  return gi(e) && hn(K2, e);
}
function Q2(e) {
  return gi(e) && hn(q2, e);
}
function eP(e) {
  return gi(e) && !$d(e) && hn(yb, e);
}
function tP(e) {
  return gi(e) && (hn(X2, e) || hn(yb, e) && $d(e));
}
var Du = "keyboard.keydown", nP = "keyboard.keyup", bg = "input-handle-modified-keys", iP = 1e3;
function Tn(e, t) {
  var n = this;
  this._config = e || {}, this._eventBus = t, this._keydownHandler = this._keydownHandler.bind(this), this._keyupHandler = this._keyupHandler.bind(this), t.on("diagram.destroy", function() {
    n._fire("destroy"), n.unbind();
  }), t.on("diagram.init", function() {
    n._fire("init");
  }), t.on("attach", function() {
    e && e.bindTo && n.bind(e.bindTo);
  }), t.on("detach", function() {
    n.unbind();
  });
}
Tn.$inject = [
  "config.keyboard",
  "eventBus"
];
Tn.prototype._keydownHandler = function(e) {
  this._keyHandler(e, Du);
};
Tn.prototype._keyupHandler = function(e) {
  this._keyHandler(e, nP);
};
Tn.prototype._keyHandler = function(e, t) {
  var n;
  if (!this._isEventIgnored(e)) {
    var i = {
      keyEvent: e
    };
    n = this._eventBus.fire(t || Du, i), n && e.preventDefault();
  }
};
Tn.prototype._isEventIgnored = function(e) {
  return e.defaultPrevented ? !0 : (rP(e.target) || oP(e.target) && hn([" ", "Enter"], e)) && this._isModifiedKeyIgnored(e);
};
Tn.prototype._isModifiedKeyIgnored = function(e) {
  if (!gi(e))
    return !0;
  var t = this._getAllowedModifiers(e.target);
  return t.indexOf(e.key) === -1;
};
Tn.prototype._getAllowedModifiers = function(e) {
  var t = co(e, "[" + bg + "]", !0);
  return !t || this._node && !this._node.contains(t) ? [] : t.getAttribute(bg).split(",");
};
Tn.prototype.bind = function(e) {
  this.unbind(), this._node = e, Ye.bind(e, "keydown", this._keydownHandler), Ye.bind(e, "keyup", this._keyupHandler), this._fire("bind");
};
Tn.prototype.getBinding = function() {
  return this._node;
};
Tn.prototype.unbind = function() {
  var e = this._node;
  e && (this._fire("unbind"), Ye.unbind(e, "keydown", this._keydownHandler), Ye.unbind(e, "keyup", this._keyupHandler)), this._node = null;
};
Tn.prototype._fire = function(e) {
  this._eventBus.fire("keyboard." + e, { node: this._node });
};
Tn.prototype.addListener = function(e, t, n) {
  fn(e) && (n = t, t = e, e = iP), this._eventBus.on(n || Du, e, t);
};
Tn.prototype.removeListener = function(e, t) {
  this._eventBus.off(t || Du, e);
};
Tn.prototype.hasModifier = Z2;
Tn.prototype.isCmd = gi;
Tn.prototype.isShift = $d;
Tn.prototype.isKey = hn;
function rP(e) {
  return e && (La(e, "input, textarea") || e.contentEditable === "true");
}
function oP(e) {
  return e && La(e, "button, input[type=submit], input[type=button], a[href], [aria-role=button]");
}
var aP = 500;
function Xa(e, t) {
  var n = this;
  e.on("editorActions.init", aP, function(i) {
    var r = i.editorActions;
    n.registerBindings(t, r);
  });
}
Xa.$inject = [
  "eventBus",
  "keyboard"
];
Xa.prototype.registerBindings = function(e, t) {
  function n(i, r) {
    t.isRegistered(i) && e.addListener(r);
  }
  n("undo", function(i) {
    var r = i.keyEvent;
    if (eP(r))
      return t.trigger("undo"), !0;
  }), n("redo", function(i) {
    var r = i.keyEvent;
    if (tP(r))
      return t.trigger("redo"), !0;
  }), n("copy", function(i) {
    var r = i.keyEvent;
    if (J2(r))
      return t.trigger("copy"), !0;
  }), n("paste", function(i) {
    var r = i.keyEvent;
    if (Q2(r))
      return t.trigger("paste"), !0;
  }), n("stepZoom", function(i) {
    var r = i.keyEvent;
    if (hn(["+", "Add", "="], r) && gi(r))
      return t.trigger("stepZoom", { value: 1 }), !0;
  }), n("stepZoom", function(i) {
    var r = i.keyEvent;
    if (hn(["-", "Subtract"], r) && gi(r))
      return t.trigger("stepZoom", { value: -1 }), !0;
  }), n("zoom", function(i) {
    var r = i.keyEvent;
    if (hn("0", r) && gi(r))
      return t.trigger("zoom", { value: 1 }), !0;
  }), n("removeSelection", function(i) {
    var r = i.keyEvent;
    if (hn(["Backspace", "Delete", "Del"], r))
      return t.trigger("removeSelection"), !0;
  });
};
const jd = {
  __init__: ["keyboard", "keyboardBindings"],
  keyboard: ["type", Tn],
  keyboardBindings: ["type", Xa]
};
var sP = {
  moveSpeed: 50,
  moveSpeedAccelerated: 200
};
function gb(e, t, n) {
  var i = this;
  this._config = U({}, sP, e || {}), t.addListener(r);
  function r(o) {
    var a = o.keyEvent, c = i._config;
    if (t.isCmd(a) && t.isKey([
      "ArrowLeft",
      "Left",
      "ArrowUp",
      "Up",
      "ArrowDown",
      "Down",
      "ArrowRight",
      "Right"
    ], a)) {
      var l = t.isShift(a) ? c.moveSpeedAccelerated : c.moveSpeed, u;
      switch (a.key) {
        case "ArrowLeft":
        case "Left":
          u = "left";
          break;
        case "ArrowUp":
        case "Up":
          u = "up";
          break;
        case "ArrowRight":
        case "Right":
          u = "right";
          break;
        case "ArrowDown":
        case "Down":
          u = "down";
          break;
      }
      return i.moveCanvas({
        speed: l,
        direction: u
      }), !0;
    }
  }
  this.moveCanvas = function(o) {
    var a = 0, c = 0, l = o.speed, u = l / Math.min(Math.sqrt(n.viewbox().scale), 1);
    switch (o.direction) {
      case "left":
        a = u;
        break;
      case "up":
        c = u;
        break;
      case "right":
        a = -u;
        break;
      case "down":
        c = -u;
        break;
    }
    n.scroll({
      dx: a,
      dy: c
    });
  };
}
gb.$inject = [
  "config.keyboardMove",
  "keyboard",
  "canvas"
];
const vb = {
  __depends__: [
    jd
  ],
  __init__: ["keyboardMove"],
  keyboardMove: ["type", gb]
};
var cP = /^djs-cursor-.*$/;
function Ou(e) {
  var t = rn(document.body);
  t.removeMatching(cP), e && t.add("djs-cursor-" + e);
}
function _b() {
  Ou(null);
}
var lP = 5e3;
function bb(e, t) {
  t = t || "element.click";
  function n() {
    return !1;
  }
  return e.once(t, lP, n), function() {
    e.off(t, n);
  };
}
function Ls(e) {
  return {
    x: e.x + e.width / 2,
    y: e.y + e.height / 2
  };
}
function Vi(e, t) {
  return {
    x: e.x - t.x,
    y: e.y - t.y
  };
}
var uP = 15;
function xb(e, t) {
  var n;
  e.on("element.mousedown", 500, function(a) {
    return o(a.originalEvent);
  });
  function i(a) {
    var c = n.start, l = n.button, u = Zo(a), d = Vi(u, c);
    if (!n.dragging && pP(d) > uP && (n.dragging = !0, l === 0 && bb(e), Ou("grab")), n.dragging) {
      var f = n.last || n.start;
      d = Vi(u, f), t.scroll({
        dx: d.x,
        dy: d.y
      }), n.last = u;
    }
    a.preventDefault();
  }
  function r(a) {
    Ye.unbind(document, "mousemove", i), Ye.unbind(document, "mouseup", r), n = null, _b();
  }
  function o(a) {
    if (!co(a.target, ".djs-draggable")) {
      var c = a.button;
      if (!(c >= 2 || a.ctrlKey || a.shiftKey || a.altKey))
        return n = {
          button: c,
          start: Zo(a)
        }, Ye.bind(document, "mousemove", i), Ye.bind(document, "mouseup", r), !0;
    }
  }
  this.isActive = function() {
    return !!n;
  };
}
xb.$inject = [
  "eventBus",
  "canvas"
];
function pP(e) {
  return Math.sqrt(Math.pow(e.x, 2) + Math.pow(e.y, 2));
}
const Eb = {
  __init__: ["moveCanvas"],
  moveCanvas: ["type", xb]
};
function jf(e) {
  return Math.log(e) / Math.log(10);
}
function wb(e, t) {
  var n = jf(e.min), i = jf(e.max), r = Math.abs(n) + Math.abs(i);
  return r / t;
}
function fP(e, t) {
  return Math.max(e.min, Math.min(e.max, t));
}
var dP = Math.sign || function(e) {
  return e >= 0 ? 1 : -1;
}, Fd = { min: 0.2, max: 4 }, Sb = 10, hP = 0.1, mP = 0.75;
function fr(e, t, n) {
  e = e || {}, this._enabled = !1, this._canvas = n, this._container = n._container, this._handleWheel = Qn(this._handleWheel, this), this._totalDelta = 0, this._scale = e.scale || mP;
  var i = this;
  t.on("canvas.init", function(r) {
    i._init(e.enabled !== !1);
  });
}
fr.$inject = [
  "config.zoomScroll",
  "eventBus",
  "canvas"
];
fr.prototype.scroll = function(t) {
  this._canvas.scroll(t);
};
fr.prototype.reset = function() {
  this._canvas.zoom("fit-viewport");
};
fr.prototype.zoom = function(t, n) {
  var i = wb(Fd, Sb * 2);
  this._totalDelta += t, Math.abs(this._totalDelta) > hP && (this._zoom(t, n, i), this._totalDelta = 0);
};
fr.prototype._handleWheel = function(t) {
  if (!co(t.target, ".djs-scrollable", !0)) {
    var n = this._container;
    t.preventDefault();
    var i = t.ctrlKey || fb() && t.metaKey, r = t.shiftKey, o = -1 * this._scale, a;
    if (i ? o *= t.deltaMode === 0 ? 0.02 : 0.32 : o *= t.deltaMode === 0 ? 1 : 16, i) {
      var c = n.getBoundingClientRect(), l = {
        x: t.clientX - c.left,
        y: t.clientY - c.top
      };
      a = Math.sqrt(
        Math.pow(t.deltaY, 2) + Math.pow(t.deltaX, 2)
      ) * dP(t.deltaY) * o, this.zoom(a, l);
    } else
      r ? a = {
        dx: o * t.deltaY,
        dy: 0
      } : a = {
        dx: o * t.deltaX,
        dy: o * t.deltaY
      }, this.scroll(a);
  }
};
fr.prototype.stepZoom = function(t, n) {
  var i = wb(Fd, Sb);
  this._zoom(t, n, i);
};
fr.prototype._zoom = function(e, t, n) {
  var i = this._canvas, r = e > 0 ? 1 : -1, o = jf(i.zoom()), a = Math.round(o / n) * n;
  a += n * r;
  var c = Math.pow(10, a);
  i.zoom(fP(Fd, c), t);
};
fr.prototype.toggle = function(t) {
  var n = this._container, i = this._handleWheel, r = this._enabled;
  return typeof t > "u" && (t = !r), r !== t && Ye[t ? "bind" : "unbind"](n, "wheel", i, !1), this._enabled = t, t;
};
fr.prototype._init = function(e) {
  this.toggle(e);
};
const Rb = {
  __init__: ["zoomScroll"],
  zoomScroll: ["type", fr]
};
function Vs(e) {
  mo.call(this, e);
}
Pe(Vs, mo);
Vs.prototype._navigationModules = [
  vb,
  Eb,
  Rb
];
Vs.prototype._modules = [].concat(
  mo.prototype._modules,
  Vs.prototype._navigationModules
);
function Qp(e) {
  return e && e[e.length - 1];
}
function xg(e) {
  return e.y;
}
function Eg(e) {
  return e.x;
}
var yP = {
  left: Eg,
  center: Eg,
  right: function(e) {
    return e.x + e.width;
  },
  top: xg,
  middle: xg,
  bottom: function(e) {
    return e.y + e.height;
  }
};
function Za(e, t) {
  this._modeling = e, this._rules = t;
}
Za.$inject = ["modeling", "rules"];
Za.prototype._getOrientationDetails = function(e) {
  var t = ["top", "bottom", "middle"], n = "x", i = "width";
  return t.indexOf(e) !== -1 && (n = "y", i = "height"), {
    axis: n,
    dimension: i
  };
};
Za.prototype._isType = function(e, t) {
  return t.indexOf(e) !== -1;
};
Za.prototype._alignmentPosition = function(e, t) {
  var n = this._getOrientationDetails(e), i = n.axis, r = n.dimension, o = {}, a = {}, c = !1, l, u, d;
  function f(y, g) {
    return Math.round((y[i] + g[i] + g[r]) / 2);
  }
  if (this._isType(e, ["left", "top"]))
    o[e] = t[0][i];
  else if (this._isType(e, ["right", "bottom"]))
    d = Qp(t), o[e] = d[i] + d[r];
  else if (this._isType(e, ["center", "middle"])) {
    if (z(t, function(y) {
      var g = y[i] + Math.round(y[r] / 2);
      a[g] ? a[g].elements.push(y) : a[g] = {
        elements: [y],
        center: g
      };
    }), l = Gi(a, function(y) {
      return y.elements.length > 1 && (c = !0), y.elements.length;
    }), c)
      return o[e] = Qp(l).center, o;
    u = t[0], t = Gi(t, function(y) {
      return y[i] + y[r];
    }), d = Qp(t), o[e] = f(u, d);
  }
  return o;
};
Za.prototype.trigger = function(e, t) {
  var n = this._modeling, i, r = tt(e, function(l) {
    return !(l.waypoints || l.host || l.labelTarget);
  });
  if (i = this._rules.allowed("elements.align", { elements: r }), Ke(i) && (r = i), !(r.length < 2 || !i)) {
    var o = yP[t], a = Gi(r, o), c = this._alignmentPosition(t, a);
    n.alignElements(a, c);
  }
};
const gP = {
  __init__: ["alignElements"],
  alignElements: ["type", Za]
};
var vP = [
  "djs-element-hidden",
  "djs-label-hidden"
], pl = ".entry", _P = 1e3, wg = 8, bP = 300;
function an(e, t, n) {
  this._canvas = e, this._elementRegistry = t, this._eventBus = n, this._current = null, this._init();
}
an.$inject = [
  "canvas",
  "elementRegistry",
  "eventBus"
];
an.prototype._init = function() {
  var e = this;
  this._eventBus.on("selection.changed", function(t) {
    var n = t.newSelection, i = n.length ? n.length === 1 ? n[0] : n : null;
    i ? e.open(i, !0) : e.close();
  }), this._eventBus.on("elements.changed", function(t) {
    var n = t.elements, i = e._current;
    if (i) {
      var { target: r } = i, o = Ke(r) ? r : [r], a = o.filter(function(l) {
        return Cb(n, l);
      });
      if (a.length) {
        e.close();
        var c = o.filter(function(l) {
          return e._elementRegistry.get(l.id);
        });
        c.length && e._updateAndOpen(c.length > 1 ? c : c[0]);
      }
    }
  }), this._eventBus.on("canvas.viewbox.changed", () => {
    this._updatePosition();
  }), this._eventBus.on("element.marker.update", function(t) {
    e._updateVisibility();
  }), this._container = this._createContainer();
};
an.prototype._createContainer = function() {
  const e = Ot('<div class="djs-context-pad-parent"></div>');
  return this._canvas.getContainer().appendChild(e), e;
};
an.prototype.registerProvider = function(e, t) {
  t || (t = e, e = _P), this._eventBus.on("contextPad.getProviders", e, function(n) {
    n.providers.push(t);
  });
};
an.prototype.getEntries = function(e) {
  var t = this._getProviders(), n = Ke(e) ? "getMultiElementContextPadEntries" : "getContextPadEntries", i = {};
  return z(t, function(r) {
    if (fn(r[n])) {
      var o = r[n](e);
      fn(o) ? i = o(i) : z(o, function(a, c) {
        i[c] = a;
      });
    }
  }), i;
};
an.prototype.trigger = function(e, t, n) {
  var i, r, o = t.delegateTarget || t.target;
  if (!o)
    return t.preventDefault();
  if (i = Vn(o, "data-action"), r = t.originalEvent || t, e === "mouseover") {
    this._timeout = setTimeout(() => {
      this._mouseout = this.triggerEntry(i, "hover", r, n);
    }, bP);
    return;
  } else if (e === "mouseout") {
    clearTimeout(this._timeout), this._mouseout && (this._mouseout(), this._mouseout = null);
    return;
  }
  return this.triggerEntry(i, e, r, n);
};
an.prototype.triggerEntry = function(e, t, n, i) {
  if (this.isShown()) {
    var r = this._current.target, o = this._current.entries, a = o[e];
    if (a) {
      var c = a.action;
      if (this._eventBus.fire("contextPad.trigger", { entry: a, event: n }) !== !1) {
        if (fn(c)) {
          if (t === "click")
            return c(n, r, i);
        } else if (c[t])
          return c[t](n, r, i);
        n.preventDefault();
      }
    }
  }
};
an.prototype.open = function(e, t) {
  !t && this.isOpen(e) || (this.close(), this._updateAndOpen(e));
};
an.prototype._getProviders = function() {
  var e = this._eventBus.createEvent({
    type: "contextPad.getProviders",
    providers: []
  });
  return this._eventBus.fire(e), e.providers;
};
an.prototype._updateAndOpen = function(e) {
  var t = this.getEntries(e), n = this._createHtml(e), i;
  z(t, function(r, o) {
    var a = r.group || "default", c = Ot(r.html || '<div class="entry" draggable="true"></div>'), l;
    Vn(c, "data-action", o), l = Tt("[data-group=" + Hs(a) + "]", n), l || (l = Ot('<div class="group"></div>'), Vn(l, "data-group", a), n.appendChild(l)), l.appendChild(c), r.className && xP(c, r.className), r.title && Vn(c, "title", r.title), r.imageUrl && (i = Ot("<img>"), Vn(i, "src", r.imageUrl), i.style.width = "100%", i.style.height = "100%", c.appendChild(i));
  }), rn(n).add("open"), this._current = {
    entries: t,
    html: n,
    target: e
  }, this._updatePosition(), this._updateVisibility(), this._eventBus.fire("contextPad.open", { current: this._current });
};
an.prototype._createHtml = function(e) {
  var t = this, n = Ot('<div class="djs-context-pad"></div>');
  return si.bind(n, pl, "click", function(i) {
    t.trigger("click", i);
  }), si.bind(n, pl, "dragstart", function(i) {
    t.trigger("dragstart", i);
  }), si.bind(n, pl, "mouseover", function(i) {
    t.trigger("mouseover", i);
  }), si.bind(n, pl, "mouseout", function(i) {
    t.trigger("mouseout", i);
  }), Ye.bind(n, "mousedown", function(i) {
    i.stopPropagation();
  }), this._container.appendChild(n), this._eventBus.fire("contextPad.create", {
    target: e,
    pad: n
  }), n;
};
an.prototype.getPad = function(e) {
  console.warn(new Error("ContextPad#getPad is deprecated and will be removed in future library versions, cf. https://github.com/bpmn-io/diagram-js/pull/888"));
  let t;
  return this.isOpen() && wP(this._current.target, e) ? t = this._current.html : t = this._createHtml(e), { html: t };
};
an.prototype.close = function() {
  this.isOpen() && (clearTimeout(this._timeout), this._container.innerHTML = "", this._eventBus.fire("contextPad.close", { current: this._current }), this._current = null);
};
an.prototype.isOpen = function(e) {
  var t = this._current;
  if (!t)
    return !1;
  if (!e)
    return !0;
  var n = t.target;
  return Ke(e) !== Ke(n) ? !1 : Ke(e) ? e.length === n.length && Qo(e, function(i) {
    return Cb(n, i);
  }) : n === e;
};
an.prototype.isShown = function() {
  return this.isOpen() && rn(this._current.html).has("open");
};
an.prototype.show = function() {
  this.isOpen() && (rn(this._current.html).add("open"), this._updatePosition(), this._eventBus.fire("contextPad.show", { current: this._current }));
};
an.prototype.hide = function() {
  this.isOpen() && (rn(this._current.html).remove("open"), this._eventBus.fire("contextPad.hide", { current: this._current }));
};
an.prototype._getPosition = function(e) {
  if (!Ke(e) && kt(e)) {
    const r = this._canvas.viewbox(), o = EP(e), a = o.x * r.scale - r.x * r.scale, c = o.y * r.scale - r.y * r.scale;
    return {
      left: a + wg * this._canvas.zoom(),
      top: c
    };
  }
  var t = this._canvas.getContainer(), n = t.getBoundingClientRect(), i = this._getTargetBounds(e);
  return {
    left: i.right - n.left + wg * this._canvas.zoom(),
    top: i.top - n.top
  };
};
an.prototype._updatePosition = function() {
  if (this.isOpen()) {
    var e = this._current.html, t = this._getPosition(this._current.target);
    "x" in t && "y" in t ? (e.style.left = t.x + "px", e.style.top = t.y + "px") : [
      "top",
      "right",
      "bottom",
      "left"
    ].forEach(function(n) {
      n in t && (e.style[n] = t[n] + "px");
    });
  }
};
an.prototype._updateVisibility = function() {
  if (this.isOpen()) {
    var e = this, t = this._current.target, n = Ke(t) ? t : [t], i = n.some(function(r) {
      return vP.some(function(o) {
        return e._canvas.hasMarker(r, o);
      });
    });
    i ? e.hide() : e.show();
  }
};
an.prototype._getTargetBounds = function(e) {
  var t = Ke(e) ? e : [e], n = t.map((i) => this._canvas.getGraphics(i));
  return n.reduce((i, r) => {
    const o = r.getBoundingClientRect();
    return i.top = Math.min(i.top, o.top), i.right = Math.max(i.right, o.right), i.bottom = Math.max(i.bottom, o.bottom), i.left = Math.min(i.left, o.left), i.x = i.left, i.y = i.top, i.width = i.right - i.left, i.height = i.bottom - i.top, i;
  }, {
    top: 1 / 0,
    right: -1 / 0,
    bottom: -1 / 0,
    left: 1 / 0
  });
};
function xP(e, t) {
  var n = rn(e);
  t = Ke(t) ? t : t.split(/\s+/g), t.forEach(function(i) {
    n.add(i);
  });
}
function Cb(e, t) {
  return e.indexOf(t) !== -1;
}
function EP(e) {
  return e.waypoints[e.waypoints.length - 1];
}
function wP(e, t) {
  return e = Ke(e) ? e : [e], t = Ke(t) ? t : [t], e.length === t.length && Qo(e, function(n) {
    return t.includes(n);
  });
}
const Ab = {
  __depends__: [
    Mu,
    Tu
  ],
  contextPad: ["type", an]
};
var Nu, Xt, Pb, zo, Sg, Tb, Ff, Hd, Hf, zf, Ws = {}, kb = [], SP = /acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i, zd = Array.isArray;
function no(e, t) {
  for (var n in t)
    e[n] = t[n];
  return e;
}
function Mb(e) {
  var t = e.parentNode;
  t && t.removeChild(e);
}
function Db(e, t, n) {
  var i, r, o, a = {};
  for (o in t)
    o == "key" ? i = t[o] : o == "ref" ? r = t[o] : a[o] = t[o];
  if (arguments.length > 2 && (a.children = arguments.length > 3 ? Nu.call(arguments, 2) : n), typeof e == "function" && e.defaultProps != null)
    for (o in e.defaultProps)
      a[o] === void 0 && (a[o] = e.defaultProps[o]);
  return Fl(e, a, i, r, null);
}
function Fl(e, t, n, i, r) {
  var o = { type: e, props: t, key: n, ref: i, __k: null, __: null, __b: 0, __e: null, __d: void 0, __c: null, constructor: void 0, __v: r ?? ++Pb, __i: -1, __u: 0 };
  return r == null && Xt.vnode != null && Xt.vnode(o), o;
}
function Bu(e) {
  return e.children;
}
function Hl(e, t) {
  this.props = e, this.context = t;
}
function Jo(e, t) {
  if (t == null)
    return e.__ ? Jo(e.__, e.__i + 1) : null;
  for (var n; t < e.__k.length; t++)
    if ((n = e.__k[t]) != null && n.__e != null)
      return n.__e;
  return typeof e.type == "function" ? Jo(e) : null;
}
function Ob(e) {
  var t, n;
  if ((e = e.__) != null && e.__c != null) {
    for (e.__e = e.__c.base = null, t = 0; t < e.__k.length; t++)
      if ((n = e.__k[t]) != null && n.__e != null) {
        e.__e = e.__c.base = n.__e;
        break;
      }
    return Ob(e);
  }
}
function Rg(e) {
  (!e.__d && (e.__d = !0) && zo.push(e) && !ou.__r++ || Sg !== Xt.debounceRendering) && ((Sg = Xt.debounceRendering) || Tb)(ou);
}
function ou() {
  var e, t, n, i, r, o, a, c;
  for (zo.sort(Ff); e = zo.shift(); )
    e.__d && (t = zo.length, i = void 0, o = (r = (n = e).__v).__e, a = [], c = [], n.__P && ((i = no({}, r)).__v = r.__v + 1, Xt.vnode && Xt.vnode(i), Vd(n.__P, i, r, n.__n, n.__P.ownerSVGElement !== void 0, 32 & r.__u ? [o] : null, a, o ?? Jo(r), !!(32 & r.__u), c), i.__v = r.__v, i.__.__k[i.__i] = i, Lb(a, i, c), i.__e != o && Ob(i)), zo.length > t && zo.sort(Ff));
  ou.__r = 0;
}
function Nb(e, t, n, i, r, o, a, c, l, u, d) {
  var f, y, g, _, x, w = i && i.__k || kb, B = t.length;
  for (n.__d = l, RP(n, t, w), l = n.__d, f = 0; f < B; f++)
    (g = n.__k[f]) != null && typeof g != "boolean" && typeof g != "function" && (y = g.__i === -1 ? Ws : w[g.__i] || Ws, g.__i = f, Vd(e, g, y, r, o, a, c, l, u, d), _ = g.__e, g.ref && y.ref != g.ref && (y.ref && Wd(y.ref, null, g), d.push(g.ref, g.__c || _, g)), x == null && _ != null && (x = _), 65536 & g.__u || y.__k === g.__k ? (l && !l.isConnected && (l = Jo(y)), l = Bb(g, l, e)) : typeof g.type == "function" && g.__d !== void 0 ? l = g.__d : _ && (l = _.nextSibling), g.__d = void 0, g.__u &= -196609);
  n.__d = l, n.__e = x;
}
function RP(e, t, n) {
  var i, r, o, a, c, l = t.length, u = n.length, d = u, f = 0;
  for (e.__k = [], i = 0; i < l; i++)
    a = i + f, (r = e.__k[i] = (r = t[i]) == null || typeof r == "boolean" || typeof r == "function" ? null : typeof r == "string" || typeof r == "number" || typeof r == "bigint" || r.constructor == String ? Fl(null, r, null, null, null) : zd(r) ? Fl(Bu, { children: r }, null, null, null) : r.constructor === void 0 && r.__b > 0 ? Fl(r.type, r.props, r.key, r.ref ? r.ref : null, r.__v) : r) != null ? (r.__ = e, r.__b = e.__b + 1, c = CP(r, n, a, d), r.__i = c, o = null, c !== -1 && (d--, (o = n[c]) && (o.__u |= 131072)), o == null || o.__v === null ? (c == -1 && f--, typeof r.type != "function" && (r.__u |= 65536)) : c !== a && (c === a + 1 ? f++ : c > a ? d > l - a ? f += c - a : f-- : c < a ? c == a - 1 && (f = c - a) : f = 0, c !== i + f && (r.__u |= 65536))) : (o = n[a]) && o.key == null && o.__e && !(131072 & o.__u) && (o.__e == e.__d && (e.__d = Jo(o)), Vf(o, o, !1), n[a] = null, d--);
  if (d)
    for (i = 0; i < u; i++)
      (o = n[i]) != null && !(131072 & o.__u) && (o.__e == e.__d && (e.__d = Jo(o)), Vf(o, o));
}
function Bb(e, t, n) {
  var i, r;
  if (typeof e.type == "function") {
    for (i = e.__k, r = 0; i && r < i.length; r++)
      i[r] && (i[r].__ = e, t = Bb(i[r], t, n));
    return t;
  }
  e.__e != t && (n.insertBefore(e.__e, t || null), t = e.__e);
  do
    t = t && t.nextSibling;
  while (t != null && t.nodeType === 8);
  return t;
}
function CP(e, t, n, i) {
  var r = e.key, o = e.type, a = n - 1, c = n + 1, l = t[n];
  if (l === null || l && r == l.key && o === l.type && !(131072 & l.__u))
    return n;
  if (i > (l != null && !(131072 & l.__u) ? 1 : 0))
    for (; a >= 0 || c < t.length; ) {
      if (a >= 0) {
        if ((l = t[a]) && !(131072 & l.__u) && r == l.key && o === l.type)
          return a;
        a--;
      }
      if (c < t.length) {
        if ((l = t[c]) && !(131072 & l.__u) && r == l.key && o === l.type)
          return c;
        c++;
      }
    }
  return -1;
}
function Cg(e, t, n) {
  t[0] === "-" ? e.setProperty(t, n ?? "") : e[t] = n == null ? "" : typeof n != "number" || SP.test(t) ? n : n + "px";
}
function fl(e, t, n, i, r) {
  var o;
  e:
    if (t === "style")
      if (typeof n == "string")
        e.style.cssText = n;
      else {
        if (typeof i == "string" && (e.style.cssText = i = ""), i)
          for (t in i)
            n && t in n || Cg(e.style, t, "");
        if (n)
          for (t in n)
            i && n[t] === i[t] || Cg(e.style, t, n[t]);
      }
    else if (t[0] === "o" && t[1] === "n")
      o = t !== (t = t.replace(/(PointerCapture)$|Capture$/i, "$1")), t = t.toLowerCase() in e || t === "onFocusOut" || t === "onFocusIn" ? t.toLowerCase().slice(2) : t.slice(2), e.l || (e.l = {}), e.l[t + o] = n, n ? i ? n.u = i.u : (n.u = Hd, e.addEventListener(t, o ? zf : Hf, o)) : e.removeEventListener(t, o ? zf : Hf, o);
    else {
      if (r)
        t = t.replace(/xlink(H|:h)/, "h").replace(/sName$/, "s");
      else if (t != "width" && t != "height" && t != "href" && t != "list" && t != "form" && t != "tabIndex" && t != "download" && t != "rowSpan" && t != "colSpan" && t != "role" && t in e)
        try {
          e[t] = n ?? "";
          break e;
        } catch {
        }
      typeof n == "function" || (n == null || n === !1 && t[4] !== "-" ? e.removeAttribute(t) : e.setAttribute(t, n));
    }
}
function Ag(e) {
  return function(t) {
    if (this.l) {
      var n = this.l[t.type + e];
      if (t.t == null)
        t.t = Hd++;
      else if (t.t < n.u)
        return;
      return n(Xt.event ? Xt.event(t) : t);
    }
  };
}
function Vd(e, t, n, i, r, o, a, c, l, u) {
  var d, f, y, g, _, x, w, B, N, k, A, D, j, W, $, Z = t.type;
  if (t.constructor !== void 0)
    return null;
  128 & n.__u && (l = !!(32 & n.__u), o = [c = t.__e = n.__e]), (d = Xt.__b) && d(t);
  e:
    if (typeof Z == "function")
      try {
        if (B = t.props, N = (d = Z.contextType) && i[d.__c], k = d ? N ? N.props.value : d.__ : i, n.__c ? w = (f = t.__c = n.__c).__ = f.__E : ("prototype" in Z && Z.prototype.render ? t.__c = f = new Z(B, k) : (t.__c = f = new Hl(B, k), f.constructor = Z, f.render = PP), N && N.sub(f), f.props = B, f.state || (f.state = {}), f.context = k, f.__n = i, y = f.__d = !0, f.__h = [], f._sb = []), f.__s == null && (f.__s = f.state), Z.getDerivedStateFromProps != null && (f.__s == f.state && (f.__s = no({}, f.__s)), no(f.__s, Z.getDerivedStateFromProps(B, f.__s))), g = f.props, _ = f.state, f.__v = t, y)
          Z.getDerivedStateFromProps == null && f.componentWillMount != null && f.componentWillMount(), f.componentDidMount != null && f.__h.push(f.componentDidMount);
        else {
          if (Z.getDerivedStateFromProps == null && B !== g && f.componentWillReceiveProps != null && f.componentWillReceiveProps(B, k), !f.__e && (f.shouldComponentUpdate != null && f.shouldComponentUpdate(B, f.__s, k) === !1 || t.__v === n.__v)) {
            for (t.__v !== n.__v && (f.props = B, f.state = f.__s, f.__d = !1), t.__e = n.__e, t.__k = n.__k, t.__k.forEach(function(X) {
              X && (X.__ = t);
            }), A = 0; A < f._sb.length; A++)
              f.__h.push(f._sb[A]);
            f._sb = [], f.__h.length && a.push(f);
            break e;
          }
          f.componentWillUpdate != null && f.componentWillUpdate(B, f.__s, k), f.componentDidUpdate != null && f.__h.push(function() {
            f.componentDidUpdate(g, _, x);
          });
        }
        if (f.context = k, f.props = B, f.__P = e, f.__e = !1, D = Xt.__r, j = 0, "prototype" in Z && Z.prototype.render) {
          for (f.state = f.__s, f.__d = !1, D && D(t), d = f.render(f.props, f.state, f.context), W = 0; W < f._sb.length; W++)
            f.__h.push(f._sb[W]);
          f._sb = [];
        } else
          do
            f.__d = !1, D && D(t), d = f.render(f.props, f.state, f.context), f.state = f.__s;
          while (f.__d && ++j < 25);
        f.state = f.__s, f.getChildContext != null && (i = no(no({}, i), f.getChildContext())), y || f.getSnapshotBeforeUpdate == null || (x = f.getSnapshotBeforeUpdate(g, _)), Nb(e, zd($ = d != null && d.type === Bu && d.key == null ? d.props.children : d) ? $ : [$], t, n, i, r, o, a, c, l, u), f.base = t.__e, t.__u &= -161, f.__h.length && a.push(f), w && (f.__E = f.__ = null);
      } catch (X) {
        t.__v = null, l || o != null ? (t.__e = c, t.__u |= l ? 160 : 32, o[o.indexOf(c)] = null) : (t.__e = n.__e, t.__k = n.__k), Xt.__e(X, t, n);
      }
    else
      o == null && t.__v === n.__v ? (t.__k = n.__k, t.__e = n.__e) : t.__e = AP(n.__e, t, n, i, r, o, a, l, u);
  (d = Xt.diffed) && d(t);
}
function Lb(e, t, n) {
  t.__d = void 0;
  for (var i = 0; i < n.length; i++)
    Wd(n[i], n[++i], n[++i]);
  Xt.__c && Xt.__c(t, e), e.some(function(r) {
    try {
      e = r.__h, r.__h = [], e.some(function(o) {
        o.call(r);
      });
    } catch (o) {
      Xt.__e(o, r.__v);
    }
  });
}
function AP(e, t, n, i, r, o, a, c, l) {
  var u, d, f, y, g, _, x, w = n.props, B = t.props, N = t.type;
  if (N === "svg" && (r = !0), o != null) {
    for (u = 0; u < o.length; u++)
      if ((g = o[u]) && "setAttribute" in g == !!N && (N ? g.localName === N : g.nodeType === 3)) {
        e = g, o[u] = null;
        break;
      }
  }
  if (e == null) {
    if (N === null)
      return document.createTextNode(B);
    e = r ? document.createElementNS("http://www.w3.org/2000/svg", N) : document.createElement(N, B.is && B), o = null, c = !1;
  }
  if (N === null)
    w === B || c && e.data === B || (e.data = B);
  else {
    if (o = o && Nu.call(e.childNodes), w = n.props || Ws, !c && o != null)
      for (w = {}, u = 0; u < e.attributes.length; u++)
        w[(g = e.attributes[u]).name] = g.value;
    for (u in w)
      if (g = w[u], u != "children") {
        if (u == "dangerouslySetInnerHTML")
          f = g;
        else if (u !== "key" && !(u in B)) {
          if (u == "value" && "defaultValue" in B || u == "checked" && "defaultChecked" in B)
            continue;
          fl(e, u, null, g, r);
        }
      }
    for (u in B)
      g = B[u], u == "children" ? y = g : u == "dangerouslySetInnerHTML" ? d = g : u == "value" ? _ = g : u == "checked" ? x = g : u === "key" || c && typeof g != "function" || w[u] === g || fl(e, u, g, w[u], r);
    if (d)
      c || f && (d.__html === f.__html || d.__html === e.innerHTML) || (e.innerHTML = d.__html), t.__k = [];
    else if (f && (e.innerHTML = ""), Nb(e, zd(y) ? y : [y], t, n, i, r && N !== "foreignObject", o, a, o ? o[0] : n.__k && Jo(n, 0), c, l), o != null)
      for (u = o.length; u--; )
        o[u] != null && Mb(o[u]);
    c || (u = "value", _ !== void 0 && (_ !== e[u] || N === "progress" && !_ || N === "option" && _ !== w[u]) && fl(e, u, _, w[u], !1), u = "checked", x !== void 0 && x !== e[u] && fl(e, u, x, w[u], !1));
  }
  return e;
}
function Wd(e, t, n) {
  try {
    typeof e == "function" ? e(t) : e.current = t;
  } catch (i) {
    Xt.__e(i, n);
  }
}
function Vf(e, t, n) {
  var i, r;
  if (Xt.unmount && Xt.unmount(e), (i = e.ref) && (i.current && i.current !== e.__e || Wd(i, null, t)), (i = e.__c) != null) {
    if (i.componentWillUnmount)
      try {
        i.componentWillUnmount();
      } catch (o) {
        Xt.__e(o, t);
      }
    i.base = i.__P = null;
  }
  if (i = e.__k)
    for (r = 0; r < i.length; r++)
      i[r] && Vf(i[r], t, n || typeof e.type != "function");
  n || e.__e == null || Mb(e.__e), e.__c = e.__ = e.__e = e.__d = void 0;
}
function PP(e, t, n) {
  return this.constructor(e, n);
}
function Ib(e, t, n) {
  var i, r, o, a;
  Xt.__ && Xt.__(e, t), r = (i = typeof n == "function") ? null : t.__k, o = [], a = [], Vd(t, e = (!i && n || t).__k = Db(Bu, null, [e]), r || Ws, Ws, t.ownerSVGElement !== void 0, !i && n ? [n] : r ? null : t.firstChild ? Nu.call(t.childNodes) : null, o, !i && n ? n : r ? r.__e : t.firstChild, i, a), Lb(o, e, a);
}
Nu = kb.slice, Xt = { __e: function(e, t, n, i) {
  for (var r, o, a; t = t.__; )
    if ((r = t.__c) && !r.__)
      try {
        if ((o = r.constructor) && o.getDerivedStateFromError != null && (r.setState(o.getDerivedStateFromError(e)), a = r.__d), r.componentDidCatch != null && (r.componentDidCatch(e, i || {}), a = r.__d), a)
          return r.__E = r;
      } catch (c) {
        e = c;
      }
  throw e;
} }, Pb = 0, Hl.prototype.setState = function(e, t) {
  var n;
  n = this.__s != null && this.__s !== this.state ? this.__s : this.__s = no({}, this.state), typeof e == "function" && (e = e(no({}, n), this.props)), e && no(n, e), e != null && this.__v && (t && this._sb.push(t), Rg(this));
}, Hl.prototype.forceUpdate = function(e) {
  this.__v && (this.__e = !0, e && this.__h.push(e), Rg(this));
}, Hl.prototype.render = Bu, zo = [], Tb = typeof Promise == "function" ? Promise.prototype.then.bind(Promise.resolve()) : setTimeout, Ff = function(e, t) {
  return e.__v.__b - t.__v.__b;
}, ou.__r = 0, Hd = 0, Hf = Ag(!1), zf = Ag(!0);
var $b = function(e, t, n, i) {
  var r;
  t[0] = 0;
  for (var o = 1; o < t.length; o++) {
    var a = t[o++], c = t[o] ? (t[0] |= a ? 1 : 2, n[t[o++]]) : t[++o];
    a === 3 ? i[0] = c : a === 4 ? i[1] = Object.assign(i[1] || {}, c) : a === 5 ? (i[1] = i[1] || {})[t[++o]] = c : a === 6 ? i[1][t[++o]] += c + "" : a ? (r = e.apply(c, $b(e, c, n, ["", null])), i.push(r), c[0] ? t[0] |= 2 : (t[o - 2] = 0, t[o] = r)) : i.push(c);
  }
  return i;
}, Pg = /* @__PURE__ */ new Map();
function TP(e) {
  var t = Pg.get(this);
  return t || (t = /* @__PURE__ */ new Map(), Pg.set(this, t)), (t = $b(this, t.get(e) || (t.set(e, t = function(n) {
    for (var i, r, o = 1, a = "", c = "", l = [0], u = function(y) {
      o === 1 && (y || (a = a.replace(/^\s*\n\s*|\s*\n\s*$/g, ""))) ? l.push(0, y, a) : o === 3 && (y || a) ? (l.push(3, y, a), o = 2) : o === 2 && a === "..." && y ? l.push(4, y, 0) : o === 2 && a && !y ? l.push(5, 0, !0, a) : o >= 5 && ((a || !y && o === 5) && (l.push(o, 0, a, r), o = 6), y && (l.push(o, y, 0, r), o = 6)), a = "";
    }, d = 0; d < n.length; d++) {
      d && (o === 1 && u(), u(d));
      for (var f = 0; f < n[d].length; f++)
        i = n[d][f], o === 1 ? i === "<" ? (u(), l = [l], o = 3) : a += i : o === 4 ? a === "--" && i === ">" ? (o = 1, a = "") : a = i + a[0] : c ? i === c ? c = "" : a += i : i === '"' || i === "'" ? c = i : i === ">" ? (u(), o = 1) : o && (i === "=" ? (o = 5, r = a, a = "") : i === "/" && (o < 5 || n[d][f + 1] === ">") ? (u(), o === 3 && (l = l[0]), o = l, (l = l[0]).push(2, 0, o), o = 0) : i === " " || i === "	" || i === `
` || i === "\r" ? (u(), o = 2) : a += i), o === 3 && a === "!--" && (o = 4, l = l[0]);
    }
    return u(), l;
  }(e)), t), arguments, [])).length > 1 ? t : t[0];
}
var un = TP.bind(Db), Fa, en, ef, Tg, Gs = 0, jb = [], zl = [], cn = Xt, kg = cn.__b, Mg = cn.__r, Dg = cn.diffed, Og = cn.__c, Ng = cn.unmount, Bg = cn.__;
function Lu(e, t) {
  cn.__h && cn.__h(en, e, Gs || t), Gs = 0;
  var n = en.__H || (en.__H = { __: [], __h: [] });
  return e >= n.__.length && n.__.push({ __V: zl }), n.__[e];
}
function tf(e) {
  return Gs = 1, kP(Hb, e);
}
function kP(e, t, n) {
  var i = Lu(Fa++, 2);
  if (i.t = e, !i.__c && (i.__ = [Hb(void 0, t), function(c) {
    var l = i.__N ? i.__N[0] : i.__[0], u = i.t(l, c);
    l !== u && (i.__N = [u, i.__[1]], i.__c.setState({}));
  }], i.__c = en, !en.u)) {
    var r = function(c, l, u) {
      if (!i.__c.__H)
        return !0;
      var d = i.__c.__H.__.filter(function(y) {
        return !!y.__c;
      });
      if (d.every(function(y) {
        return !y.__N;
      }))
        return !o || o.call(this, c, l, u);
      var f = !1;
      return d.forEach(function(y) {
        if (y.__N) {
          var g = y.__[0];
          y.__ = y.__N, y.__N = void 0, g !== y.__[0] && (f = !0);
        }
      }), !(!f && i.__c.props === c) && (!o || o.call(this, c, l, u));
    };
    en.u = !0;
    var o = en.shouldComponentUpdate, a = en.componentWillUpdate;
    en.componentWillUpdate = function(c, l, u) {
      if (this.__e) {
        var d = o;
        o = void 0, r(c, l, u), o = d;
      }
      a && a.call(this, c, l, u);
    }, en.shouldComponentUpdate = r;
  }
  return i.__N || i.__;
}
function Wf(e, t) {
  var n = Lu(Fa++, 3);
  !cn.__s && Gd(n.__H, t) && (n.__ = e, n.i = t, en.__H.__h.push(n));
}
function Gf(e, t) {
  var n = Lu(Fa++, 4);
  !cn.__s && Gd(n.__H, t) && (n.__ = e, n.i = t, en.__h.push(n));
}
function Fb(e) {
  return Gs = 5, Us(function() {
    return { current: e };
  }, []);
}
function Us(e, t) {
  var n = Lu(Fa++, 7);
  return Gd(n.__H, t) ? (n.__V = e(), n.i = t, n.__h = e, n.__V) : n.__;
}
function xs(e, t) {
  return Gs = 8, Us(function() {
    return e;
  }, t);
}
function MP() {
  for (var e; e = jb.shift(); )
    if (e.__P && e.__H)
      try {
        e.__H.__h.forEach(Vl), e.__H.__h.forEach(Uf), e.__H.__h = [];
      } catch (t) {
        e.__H.__h = [], cn.__e(t, e.__v);
      }
}
cn.__b = function(e) {
  en = null, kg && kg(e);
}, cn.__ = function(e, t) {
  e && t.__k && t.__k.__m && (e.__m = t.__k.__m), Bg && Bg(e, t);
}, cn.__r = function(e) {
  Mg && Mg(e), Fa = 0;
  var t = (en = e.__c).__H;
  t && (ef === en ? (t.__h = [], en.__h = [], t.__.forEach(function(n) {
    n.__N && (n.__ = n.__N), n.__V = zl, n.__N = n.i = void 0;
  })) : (t.__h.forEach(Vl), t.__h.forEach(Uf), t.__h = [], Fa = 0)), ef = en;
}, cn.diffed = function(e) {
  Dg && Dg(e);
  var t = e.__c;
  t && t.__H && (t.__H.__h.length && (jb.push(t) !== 1 && Tg === cn.requestAnimationFrame || ((Tg = cn.requestAnimationFrame) || DP)(MP)), t.__H.__.forEach(function(n) {
    n.i && (n.__H = n.i), n.__V !== zl && (n.__ = n.__V), n.i = void 0, n.__V = zl;
  })), ef = en = null;
}, cn.__c = function(e, t) {
  t.some(function(n) {
    try {
      n.__h.forEach(Vl), n.__h = n.__h.filter(function(i) {
        return !i.__ || Uf(i);
      });
    } catch (i) {
      t.some(function(r) {
        r.__h && (r.__h = []);
      }), t = [], cn.__e(i, n.__v);
    }
  }), Og && Og(e, t);
}, cn.unmount = function(e) {
  Ng && Ng(e);
  var t, n = e.__c;
  n && n.__H && (n.__H.__.forEach(function(i) {
    try {
      Vl(i);
    } catch (r) {
      t = r;
    }
  }), n.__H = void 0, t && cn.__e(t, n.__v));
};
var Lg = typeof requestAnimationFrame == "function";
function DP(e) {
  var t, n = function() {
    clearTimeout(i), Lg && cancelAnimationFrame(t), setTimeout(e);
  }, i = setTimeout(n, 100);
  Lg && (t = requestAnimationFrame(n));
}
function Vl(e) {
  var t = en, n = e.__c;
  typeof n == "function" && (e.__c = void 0, n()), en = t;
}
function Uf(e) {
  var t = en;
  e.__c = e.__(), en = t;
}
function Gd(e, t) {
  return !e || e.length !== t.length || t.some(function(n, i) {
    return n !== e[i];
  });
}
function Hb(e, t) {
  return typeof t == "function" ? t(e) : t;
}
function zb(e) {
  var t, n, i = "";
  if (typeof e == "string" || typeof e == "number")
    i += e;
  else if (typeof e == "object")
    if (Array.isArray(e)) {
      var r = e.length;
      for (t = 0; t < r; t++)
        e[t] && (n = zb(e[t])) && (i && (i += " "), i += n);
    } else
      for (n in e)
        e[n] && (i && (i += " "), i += n);
  return i;
}
function au() {
  for (var e, t, n = 0, i = "", r = arguments.length; n < r; n++)
    (e = arguments[n]) && (t = zb(e)) && (i && (i += " "), i += t);
  return i;
}
function OP(e) {
  const {
    entry: t,
    selected: n,
    onMouseEnter: i,
    onMouseLeave: r,
    onAction: o
  } = e;
  return un`
    <li
      class=${au("entry", { selected: n })}
      data-id=${t.id}
      title=${t.title || t.label}
      tabIndex="0"
      onClick=${o}
      onFocus=${i}
      onBlur=${r}
      onMouseEnter=${i}
      onMouseLeave=${r}
      onDragStart=${(a) => o(a, t, "dragstart")}
      aria-role="button"
      draggable=${!0}
    >
      <div class="djs-popup-entry-content">
        <span
          class=${au("djs-popup-entry-name", t.className)}
        >
          ${t.imageUrl && un`<img class="djs-popup-entry-icon" src=${t.imageUrl} alt="" />` || t.imageHtml && un`<div class="djs-popup-entry-icon" dangerouslySetInnerHTML=${{ __html: t.imageHtml }} />`}

          ${t.label ? un`
            <span class="djs-popup-label">
              ${t.label}
            </span>
          ` : null}
        </span>
        ${t.description && un`
          <span
            class="djs-popup-entry-description"
            title=${t.description}
          >
            ${t.description}
          </span>
        `}
      </div>
      ${t.documentationRef && un`
        <div class="djs-popup-entry-docs">
          <a
            href="${t.documentationRef}"
            onClick=${(a) => a.stopPropagation()}
            title="Open element documentation"
            target="_blank"
            rel="noopener"
          >
            <svg width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path fill-rule="evenodd" clip-rule="evenodd" d="M10.6368 10.6375V5.91761H11.9995V10.6382C11.9995 10.9973 11.8623 11.3141 11.5878 11.5885C11.3134 11.863 10.9966 12.0002 10.6375 12.0002H1.36266C0.982345 12.0002 0.660159 11.8681 0.396102 11.6041C0.132044 11.34 1.52588e-05 11.0178 1.52588e-05 10.6375V1.36267C1.52588e-05 0.98236 0.132044 0.660173 0.396102 0.396116C0.660159 0.132058 0.982345 2.95639e-05 1.36266 2.95639e-05H5.91624V1.36267H1.36266V10.6375H10.6368ZM12 0H7.2794L7.27873 1.36197H9.68701L3.06507 7.98391L4.01541 8.93425L10.6373 2.31231V4.72059H12V0Z" fill="#818798"/>
            </svg>
          </a>
        </div>
      `}
    </li>
  `;
}
function NP(e) {
  const {
    selectedEntry: t,
    setSelectedEntry: n,
    entries: i,
    ...r
  } = e, o = Fb(), a = Us(() => BP(i), [i]);
  return Gf(() => {
    const c = o.current;
    if (!c)
      return;
    const l = c.querySelector(".selected");
    l && LP(l);
  }, [t]), un`
    <div class="djs-popup-results" ref=${o}>
      ${a.map((c) => un`
        ${c.name && un`
          <div key=${c.id} class="entry-header" title=${c.name}>
            ${c.name}
          </div>
        `}
        <ul class="djs-popup-group" data-group=${c.id}>
          ${c.entries.map((l) => un`
            <${OP}
              key=${l.id}
              entry=${l}
              selected=${l === t}
              onMouseEnter=${() => n(l)}
              onMouseLeave=${() => n(null)}
              ...${r}
            />
          `)}
        </ul>
      `)}
    </div>
  `;
}
function BP(e) {
  const t = [], n = (o) => t.find((a) => o.id === a.id), i = (o) => !!n(o), r = (o) => typeof o == "string" ? { id: o } : o;
  return e.forEach((o) => {
    const a = o.group ? r(o.group) : { id: "default" };
    i(a) ? n(a).entries.push(o) : t.push({ ...a, entries: [o] });
  }), t;
}
function LP(e) {
  typeof e.scrollIntoViewIfNeeded == "function" ? e.scrollIntoViewIfNeeded() : e.scrollIntoView({
    scrollMode: "if-needed",
    block: "nearest"
  });
}
function IP(e) {
  const {
    onClose: t,
    onSelect: n,
    className: i,
    headerEntries: r,
    position: o,
    title: a,
    width: c,
    scale: l,
    search: u,
    emptyPlaceholder: d,
    entries: f,
    onOpened: y,
    onClosed: g
  } = e, _ = Us(() => yn(u) ? f.length > 5 : !1, [u, f]), [x, w] = tf(""), B = xs((V, ae) => {
    if (!_)
      return V;
    const ie = (Ae) => {
      if (!ae)
        return (Ae.rank || 0) >= 0;
      if (Ae.searchable === !1)
        return !1;
      const Rt = [
        Ae.description || "",
        Ae.label || "",
        Ae.search || ""
      ].map((it) => it.toLowerCase());
      return ae.toLowerCase().split(/\s/g).every((it) => Rt.some((Ve) => Ve.includes(it)));
    };
    return V.filter(ie);
  }, [_]), [N, k] = tf(B(f, x)), [A, D] = tf(N[0]), j = xs((V) => {
    (!A || !V.includes(A)) && D(V[0]), k(V);
  }, [A, k, D]);
  Wf(() => {
    j(B(f, x));
  }, [x, f]);
  const W = xs((V) => {
    let ie = N.indexOf(A) + V;
    ie < 0 && (ie = N.length - 1), ie >= N.length && (ie = 0), D(N[ie]);
  }, [N, A, D]), $ = xs((V) => {
    if (V.key === "Enter" && A)
      return n(V, A);
    if (V.key === "ArrowUp")
      return W(-1), V.preventDefault();
    if (V.key === "ArrowDown")
      return W(1), V.preventDefault();
  }, [n, A, W]), Z = xs((V) => {
    La(V.target, "input") && w(() => V.target.value);
  }, [w]);
  Wf(() => (y(), () => {
    g();
  }), []);
  const X = Us(() => a || r.length > 0, [a, r]);
  return un`
    <${Ig}
      onClose=${t}
      onKeyup=${Z}
      onKeydown=${$}
      className=${i}
      position=${o}
      width=${c}
      scale=${l}
    >
      ${X && un`
        <div class="djs-popup-header">
          <h3 class="djs-popup-title" title=${a}>${a}</h3>
          ${r.map((V) => un`
            <${V.action ? "button" : "span"}
              class=${jP(V, V === A)}
              onClick=${(ae) => n(ae, V)}
              title=${V.title || V.label}
              data-id=${V.id}
              onMouseEnter=${() => D(V)}
              onMouseLeave=${() => D(null)}
              onFocus=${() => D(V)}
              onBlur=${() => D(null)}
            >
            ${V.imageUrl && un`<img class="djs-popup-entry-icon" src=${V.imageUrl} alt="" />` || V.imageHtml && un`<div class="djs-popup-entry-icon" dangerouslySetInnerHTML=${{ __html: V.imageHtml }} />`}

              ${V.label ? un`
                <span class="djs-popup-label">${V.label}</span>
              ` : null}
            </${V.action ? "button" : "span"}>
          `)}
        </div>
      `}
      ${f.length > 0 && un`
        <div class="djs-popup-body">

          ${_ && un`
          <div class="djs-popup-search">
            <svg class="djs-popup-search-icon" width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path fill-rule="evenodd" clip-rule="evenodd" d="M9.0325 8.5H9.625L13.3675 12.25L12.25 13.3675L8.5 9.625V9.0325L8.2975 8.8225C7.4425 9.5575 6.3325 10 5.125 10C2.4325 10 0.25 7.8175 0.25 5.125C0.25 2.4325 2.4325 0.25 5.125 0.25C7.8175 0.25 10 2.4325 10 5.125C10 6.3325 9.5575 7.4425 8.8225 8.2975L9.0325 8.5ZM1.75 5.125C1.75 6.9925 3.2575 8.5 5.125 8.5C6.9925 8.5 8.5 6.9925 8.5 5.125C8.5 3.2575 6.9925 1.75 5.125 1.75C3.2575 1.75 1.75 3.2575 1.75 5.125Z" fill="#22242A"/>
            </svg>
            <input type="text" aria-label="${a}" />
          </div>
          `}

          <${NP}
            entries=${N}
            selectedEntry=${A}
            setSelectedEntry=${D}
            onAction=${n}
          />
        </div>
      `}
    ${d && N.length === 0 && un`
      <div class="djs-popup-no-results">${fn(d) ? d(x) : d}</div>
    `}
    </${Ig}>
  `;
}
function Ig(e) {
  const {
    onClose: t,
    onKeydown: n,
    onKeyup: i,
    className: r,
    children: o,
    position: a
  } = e, c = Fb();
  return Gf(() => {
    if (typeof a != "function")
      return;
    const l = c.current, u = a(l);
    l.style.left = `${u.x}px`, l.style.top = `${u.y}px`;
  }, [c.current, a]), Gf(() => {
    const l = c.current;
    if (!l)
      return;
    (l.querySelector("input") || l).focus();
  }, []), Wf(() => {
    const l = (d) => {
      if (d.key === "Escape")
        return d.preventDefault(), t();
    }, u = (d) => {
      if (!co(d.target, ".djs-popup", !0))
        return t();
    };
    return document.documentElement.addEventListener("keydown", l), document.body.addEventListener("click", u), () => {
      document.documentElement.removeEventListener("keydown", l), document.body.removeEventListener("click", u);
    };
  }, []), un`
    <div
      class=${au("djs-popup", r)}
      style=${$P(e)}
      onKeydown=${n}
      onKeyup=${i}
      ref=${c}
      tabIndex="-1"
    >
      ${o}
    </div>
  `;
}
function $P(e) {
  return {
    transform: `scale(${e.scale})`,
    width: `${e.width}px`,
    "transform-origin": "top left"
  };
}
function jP(e, t) {
  return au(
    "entry",
    e.className,
    e.active ? "active" : "",
    e.disabled ? "disabled" : "",
    t ? "selected" : ""
  );
}
var FP = "data-id", Vb = [
  "contextPad.close",
  "canvas.viewbox.changing",
  "commandStack.changed"
], HP = 1e3;
function Vt(e, t, n) {
  this._eventBus = t, this._canvas = n, this._current = null;
  var i = yn(e && e.scale) ? e.scale : {
    min: 1,
    max: 1
  };
  this._config = {
    scale: i
  }, t.on("diagram.destroy", () => {
    this.close();
  }), t.on("element.changed", (r) => {
    const o = this.isOpen() && this._current.target;
    r.element === o && this.refresh();
  });
}
Vt.$inject = [
  "config.popupMenu",
  "eventBus",
  "canvas"
];
Vt.prototype._render = function() {
  const {
    position: e,
    providerId: t,
    entries: n,
    headerEntries: i,
    emptyPlaceholder: r,
    options: o
  } = this._current, a = Object.entries(n).map(
    ([y, g]) => ({ id: y, ...g })
  ), c = Object.entries(i).map(
    ([y, g]) => ({ id: y, ...g })
  ), l = e && ((y) => this._ensureVisible(y, e)), u = this._updateScale(this._current.container);
  Ib(
    un`
      <${IP}
        onClose=${(y) => this.close(y)}
        onSelect=${(y, g, _) => this.trigger(y, g, _)}
        position=${l}
        className=${t}
        entries=${a}
        headerEntries=${c}
        emptyPlaceholder=${r}
        scale=${u}
        onOpened=${this._onOpened.bind(this)}
        onClosed=${this._onClosed.bind(this)}
        ...${{ ...o }}
      />
    `,
    this._current.container
  );
};
Vt.prototype.open = function(e, t, n, i) {
  if (!e)
    throw new Error("target is missing");
  if (!t)
    throw new Error("providers for <" + t + "> not found");
  if (!n)
    throw new Error("position is missing");
  this.isOpen() && this.close();
  const {
    entries: r,
    headerEntries: o,
    emptyPlaceholder: a
  } = this._getContext(e, t);
  this._current = {
    position: n,
    providerId: t,
    target: e,
    entries: r,
    headerEntries: o,
    emptyPlaceholder: a,
    container: this._createContainer({ provider: t }),
    options: i
  }, this._emit("open"), this._bindAutoClose(), this._render();
};
Vt.prototype.refresh = function() {
  if (!this.isOpen())
    return;
  const {
    target: e,
    providerId: t
  } = this._current, {
    entries: n,
    headerEntries: i,
    emptyPlaceholder: r
  } = this._getContext(e, t);
  this._current = {
    ...this._current,
    entries: n,
    headerEntries: i,
    emptyPlaceholder: r
  }, this._emit("refresh"), this._render();
};
Vt.prototype._getContext = function(e, t) {
  const n = this._getProviders(t);
  if (!n || !n.length)
    throw new Error("provider for <" + t + "> not found");
  const i = this._getEntries(e, n), r = this._getHeaderEntries(e, n), o = this._getEmptyPlaceholder(n);
  return {
    entries: i,
    headerEntries: r,
    emptyPlaceholder: o,
    empty: !(Object.keys(i).length || Object.keys(r).length)
  };
};
Vt.prototype.close = function() {
  this.isOpen() && (this._emit("close"), this.reset(), this._current = null);
};
Vt.prototype.reset = function() {
  const e = this._current.container;
  Ib(null, e), cr(e);
};
Vt.prototype._emit = function(e, t) {
  this._eventBus.fire(`popupMenu.${e}`, t);
};
Vt.prototype._onOpened = function() {
  this._emit("opened");
};
Vt.prototype._onClosed = function() {
  this._emit("closed");
};
Vt.prototype._createContainer = function(e) {
  var t = this._canvas, n = t.getContainer();
  const i = Ot(`<div class="djs-popup-parent djs-scrollable" data-popup=${e.provider}></div>`);
  return n.appendChild(i), i;
};
Vt.prototype._bindAutoClose = function() {
  this._eventBus.once(Vb, this.close, this);
};
Vt.prototype._unbindAutoClose = function() {
  this._eventBus.off(Vb, this.close, this);
};
Vt.prototype._updateScale = function() {
  var e = this._canvas.zoom(), t = this._config.scale, n, i, r = e;
  return t !== !0 && (t === !1 ? (n = 1, i = 1) : (n = t.min, i = t.max), yn(n) && e < n && (r = n), yn(i) && e > i && (r = i)), r;
};
Vt.prototype._ensureVisible = function(e, t) {
  var n = document.documentElement.getBoundingClientRect(), i = e.getBoundingClientRect(), r = {}, o = t.x, a = t.y;
  return t.x + i.width > n.width && (r.x = !0), t.y + i.height > n.height && (r.y = !0), r.x && r.y ? (o = t.x - i.width, a = t.y - i.height) : r.x ? (o = t.x - i.width, a = t.y) : r.y && t.y < i.height ? (o = t.x, a = 10) : r.y && (o = t.x, a = t.y - i.height), t.y < n.top && (a = t.y + i.height), {
    x: o,
    y: a
  };
};
Vt.prototype.isEmpty = function(e, t) {
  if (!e)
    throw new Error("target is missing");
  if (!t)
    throw new Error("provider ID is missing");
  const n = this._getProviders(t);
  return !n || !n.length ? !0 : this._getContext(e, t).empty;
};
Vt.prototype.registerProvider = function(e, t, n) {
  n || (n = t, t = HP), this._eventBus.on("popupMenu.getProviders." + e, t, function(i) {
    i.providers.push(n);
  });
};
Vt.prototype._getProviders = function(e) {
  var t = this._eventBus.createEvent({
    type: "popupMenu.getProviders." + e,
    providers: []
  });
  return this._eventBus.fire(t), t.providers;
};
Vt.prototype._getEntries = function(e, t) {
  var n = {};
  return z(t, function(i) {
    if (!i.getPopupMenuEntries) {
      z(i.getEntries(e), function(o) {
        var a = o.id;
        if (!a)
          throw new Error("entry ID is missing");
        n[a] = ur(o, ["id"]);
      });
      return;
    }
    var r = i.getPopupMenuEntries(e);
    fn(r) ? n = r(n) : z(r, function(o, a) {
      n[a] = o;
    });
  }), n;
};
Vt.prototype._getHeaderEntries = function(e, t) {
  var n = {};
  return z(t, function(i) {
    if (!i.getPopupMenuHeaderEntries) {
      if (!i.getHeaderEntries)
        return;
      z(i.getHeaderEntries(e), function(o) {
        var a = o.id;
        if (!a)
          throw new Error("entry ID is missing");
        n[a] = ur(o, ["id"]);
      });
      return;
    }
    var r = i.getPopupMenuHeaderEntries(e);
    fn(r) ? n = r(n) : z(r, function(o, a) {
      n[a] = o;
    });
  }), n;
};
Vt.prototype._getEmptyPlaceholder = function(e) {
  const t = e.find(
    (n) => fn(n.getEmptyPlaceholder)
  );
  return t && t.getEmptyPlaceholder();
};
Vt.prototype.isOpen = function() {
  return !!this._current;
};
Vt.prototype.trigger = function(e, t, n = "click") {
  if (e.preventDefault(), !t) {
    let r = co(e.delegateTarget || e.target, ".entry", !0), o = Vn(r, FP);
    t = { id: o, ...this._getEntry(o) };
  }
  const i = t.action;
  if (this._emit("trigger", { entry: t, event: e }) !== !1) {
    if (fn(i)) {
      if (n === "click")
        return i(e, t);
    } else if (i[n])
      return i[n](e, t);
  }
};
Vt.prototype._getEntry = function(e) {
  var t = this._current.entries[e] || this._current.headerEntries[e];
  if (!t)
    throw new Error("entry not found");
  return t;
};
const Ud = {
  __init__: ["popupMenu"],
  popupMenu: ["type", Vt]
};
var Wb = {
  align: `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 2000 2000">
              <line x1="200" y1="150" x2="200" y2="1850" style="stroke:currentColor;stroke-width:100;stroke-linecap:round;"/>
              <rect x="500" y="150" width="1300" height="700" rx="1" style="fill:none;stroke:currentColor;stroke-width:100;"></rect>
              <rect x="500" y="1150" width="700" height="700" rx="1" style="fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;"></rect>
          </svg>`,
  bottom: `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1800 1800">
            <line x1="150" y1="1650" x2="1650" y2="1650" style="stroke:currentColor;stroke-width:100;stroke-linecap:round;"/>
            <rect x="150" y="350" width="600" height="1300" rx="1" style="fill:none;stroke:currentColor;stroke-width:100;"></rect>
            <rect x="1050" y="850" width="600" height="800" rx="1" style="fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;"></rect>
          </svg>`,
  center: `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1800 1800">
            <line x1="900" y1="150" x2="900" y2="1650" style="stroke:currentColor;stroke-width:100;stroke-linecap:round;"/>
            <rect x="250" y="150" width="1300" height="600" rx="1" style="fill:none;stroke:currentColor;stroke-width:100;"></rect>
            <rect x="500" y="1050" width="800" height="600" rx="1" style="fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;"></rect>
          </svg>`,
  left: `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1800 1800">
            <line x1="100" y1="150" x2="100" y2="1650" style="stroke:currentColor;stroke-width:100;stroke-linecap:round;"/>
            <rect x="100" y="150" width="1300" height="600" rx="1" style="fill:none;stroke:currentColor;stroke-width:100;"></rect>
            <rect x="100" y="1050" width="800" height="600" rx="1" style="fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;"></rect>
          </svg>`,
  right: `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1800 1800">
            <line x1="1650" y1="150" x2="1650" y2="1650" style="stroke:currentColor;stroke-width:100;stroke-linecap:round;"/>
            <rect x="350" y="150" width="1300" height="600" rx="1" style="fill:none;stroke:currentColor;stroke-width:100;"></rect>
            <rect x="850" y="1050" width="800" height="600" rx="1" style="fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;"></rect>
          </svg>`,
  top: `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1800 1800">
            <line x1="150" y1="150" x2="1650" y2="150" style="stroke:currentColor;stroke-width:100;stroke-linecap:round;"/>
            <rect x="150" y="150" width="600" height="1300" rx="1" style="fill:none;stroke:currentColor;stroke-width:100;"></rect>
            <rect x="1050" y="150" width="600" height="800" rx="1" style="fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;"></rect>
          </svg>`,
  middle: `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1800 1800">
            <line x1="150" y1="900" x2="1650" y2="900" style="stroke:currentColor;stroke-width:100;stroke-linecap:round;"/>
            <rect x="150" y="250" width="600" height="1300" rx="1" style="fill:none;stroke:currentColor;stroke-width:100;"></rect>
            <rect x="1050" y="500" width="600" height="800" rx="1" style="fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;"></rect>
          </svg>`
}, zP = 900;
function Ja(e, t, n, i) {
  e.registerProvider(zP, this), this._contextPad = e, this._popupMenu = t, this._translate = n, this._canvas = i;
}
Ja.$inject = [
  "contextPad",
  "popupMenu",
  "translate",
  "canvas"
];
Ja.prototype.getMultiElementContextPadEntries = function(e) {
  var t = {};
  return this._isAllowed(e) && U(t, this._getEntries(e)), t;
};
Ja.prototype._isAllowed = function(e) {
  return !this._popupMenu.isEmpty(e, "align-elements");
};
Ja.prototype._getEntries = function() {
  var e = this;
  return {
    "align-elements": {
      group: "align-elements",
      title: e._translate("Align elements"),
      html: `<div class="entry">${Wb.align}</div>`,
      action: {
        click: function(t, n) {
          var i = e._getMenuPosition(n);
          U(i, {
            cursor: {
              x: t.x,
              y: t.y
            }
          }), e._popupMenu.open(n, "align-elements", i);
        }
      }
    }
  };
};
Ja.prototype._getMenuPosition = function(e) {
  var t = 5, n = this._contextPad.getPad(e).html, i = n.getBoundingClientRect(), r = {
    x: i.left,
    y: i.bottom + t
  };
  return r;
};
var VP = [
  "left",
  "center",
  "right",
  "top",
  "middle",
  "bottom"
];
function cc(e, t, n, i) {
  this._alignElements = t, this._translate = n, this._popupMenu = e, this._rules = i, e.registerProvider("align-elements", this);
}
cc.$inject = [
  "popupMenu",
  "alignElements",
  "translate",
  "rules"
];
cc.prototype.getPopupMenuEntries = function(e) {
  var t = {};
  return this._isAllowed(e) && U(t, this._getEntries(e)), t;
};
cc.prototype._isAllowed = function(e) {
  return this._rules.allowed("elements.align", { elements: e });
};
cc.prototype._getEntries = function(e) {
  var t = this._alignElements, n = this._translate, i = this._popupMenu, r = {};
  return z(VP, function(o) {
    r["align-elements-" + o] = {
      group: "align",
      title: n("Align elements " + o),
      className: "bjs-align-elements-menu-entry",
      imageHtml: Wb[o],
      action: function() {
        t.trigger(e, o), i.close();
      }
    };
  }), r;
};
function Di(e) {
  le.call(this, e), this.init();
}
Di.$inject = ["eventBus"];
Pe(Di, le);
Di.prototype.addRule = function(e, t, n) {
  var i = this;
  typeof e == "string" && (e = [e]), e.forEach(function(r) {
    i.canExecute(r, t, function(o, a, c) {
      return n(o);
    }, !0);
  });
};
Di.prototype.init = function() {
};
function Iu(e) {
  Di.call(this, e);
}
Iu.$inject = ["eventBus"];
Pe(Iu, Di);
Iu.prototype.init = function() {
  this.addRule("elements.align", function(e) {
    var t = e.elements, n = tt(t, function(i) {
      return !(i.waypoints || i.host || i.labelTarget);
    });
    return n = _u(n), n.length < 2 ? !1 : n;
  });
};
const WP = {
  __depends__: [
    gP,
    Ab,
    Ud
  ],
  __init__: [
    "alignElementsContextPadProvider",
    "alignElementsMenuProvider",
    "bpmnAlignElements"
  ],
  alignElementsContextPadProvider: ["type", Ja],
  alignElementsMenuProvider: ["type", cc],
  bpmnAlignElements: ["type", Iu]
};
var GP = 10, Gb = 50, UP = 250;
function Yd(e, t, n, i) {
  for (var r; r = YP(e, n, t); )
    n = i(t, n, r);
  return n;
}
function Kd(e) {
  return function(t, n, i) {
    var r = {
      x: n.x,
      y: n.y
    };
    return ["x", "y"].forEach(function(o) {
      var a = e[o];
      if (a) {
        var c = o === "x" ? "width" : "height", l = a.margin, u = a.minDistance;
        l < 0 ? r[o] = Math.min(
          i[o] + l - t[c] / 2,
          n[o] - u + l
        ) : r[o] = Math.max(
          i[o] + i[c] + l + t[c] / 2,
          n[o] + u + l
        );
      }
    }), r;
  };
}
function YP(e, t, n) {
  var i = {
    x: t.x - n.width / 2,
    y: t.y - n.height / 2,
    width: n.width,
    height: n.height
  }, r = qP(e);
  return gt(r, function(o) {
    if (o === n)
      return !1;
    var a = Ln(o, i, GP);
    return a === "intersect";
  });
}
function KP(e, t) {
  t || (t = {});
  function n(_) {
    return _.source === e ? 1 : -1;
  }
  var i = t.defaultDistance || Gb, r = t.direction || "e", o = t.filter, a = t.getWeight || n, c = t.maxDistance || UP, l = t.reference || "start";
  o || (o = JP);
  function u(_, x) {
    return r === "n" ? l === "start" ? Le(_).top - Le(x).bottom : l === "center" ? Le(_).top - Fe(x).y : Le(_).top - Le(x).top : r === "w" ? l === "start" ? Le(_).left - Le(x).right : l === "center" ? Le(_).left - Fe(x).x : Le(_).left - Le(x).left : r === "s" ? l === "start" ? Le(x).top - Le(_).bottom : l === "center" ? Fe(x).y - Le(_).bottom : Le(x).bottom - Le(_).bottom : l === "start" ? Le(x).left - Le(_).right : l === "center" ? Fe(x).x - Le(_).right : Le(x).right - Le(_).right;
  }
  var d = e.incoming.filter(o).map(function(_) {
    var x = a(_), w = x < 0 ? u(_.source, e) : u(e, _.source);
    return {
      id: _.source.id,
      distance: w,
      weight: x
    };
  }), f = e.outgoing.filter(o).map(function(_) {
    var x = a(_), w = x > 0 ? u(e, _.target) : u(_.target, e);
    return {
      id: _.target.id,
      distance: w,
      weight: x
    };
  }), y = d.concat(f).reduce(function(_, x) {
    return _[x.id + "__weight_" + x.weight] = x, _;
  }, {}), g = li(y, function(_, x) {
    var w = x.distance, B = x.weight;
    return w < 0 || w > c || (_[String(w)] || (_[String(w)] = 0), _[String(w)] += 1 * B, (!_.distance || _[_.distance] < _[String(w)]) && (_.distance = w)), _;
  }, {});
  return g.distance || i;
}
function qP(e) {
  var t = nf(e);
  return e.host && (t = t.concat(nf(e.host))), e.attachers && (t = t.concat(e.attachers.reduce(function(n, i) {
    return n.concat(nf(i));
  }, []))), t;
}
function nf(e) {
  return ZP(e).concat(XP(e));
}
function XP(e) {
  return e.incoming.map(function(t) {
    return t.source;
  });
}
function ZP(e) {
  return e.outgoing.map(function(t) {
    return t.target;
  });
}
function JP() {
  return !0;
}
var QP = 100;
function Ub(e, t, n) {
  e.on("autoPlace", QP, function(i) {
    var r = i.shape, o = i.source;
    return eT(o, r);
  }), e.on("autoPlace.end", function(i) {
    n.scrollToElement(i.shape);
  }), this.append = function(i, r, o) {
    e.fire("autoPlace.start", {
      source: i,
      shape: r
    });
    var a = e.fire("autoPlace", {
      source: i,
      shape: r
    }), c = t.appendShape(i, r, a, i.parent, o);
    return e.fire("autoPlace.end", {
      source: i,
      shape: c
    }), c;
  };
}
Ub.$inject = [
  "eventBus",
  "modeling",
  "canvas"
];
function eT(e, t, n) {
  n || (n = {});
  var i = n.defaultDistance || Gb, r = Fe(e), o = Le(e);
  return {
    x: o.right + i + t.width / 2,
    y: r.y
  };
}
function Yb(e, t) {
  e.on("autoPlace.end", 500, function(n) {
    t.select(n.shape);
  });
}
Yb.$inject = [
  "eventBus",
  "selection"
];
const tT = {
  __init__: ["autoPlaceSelectionBehavior"],
  autoPlace: ["type", Ub],
  autoPlaceSelectionBehavior: ["type", Yb]
};
function Ys(e, t) {
  for (ci(t) && (t = [t]); e = e.parent; )
    if (rt(e, t))
      return e;
  return null;
}
function $u(e) {
  var t = ["bpmn:Participant", "bpmn:Lane"], n = Ys(e, t);
  return n ? Pn(n) : rt(e, t) ? Pn(e) : !0;
}
function Kb(e, t) {
  if (P(t, "bpmn:TextAnnotation"))
    return iT(e, t);
  if (rt(t, ["bpmn:DataObjectReference", "bpmn:DataStoreReference"]))
    return rT(e, t);
  if (P(t, "bpmn:FlowNode"))
    return nT(e, t);
}
function nT(e, t) {
  var n = Le(e), i = Fe(e), r = $u(e), o = r ? {
    directionHint: "e",
    minDistance: 80,
    baseOrientation: "left",
    boundaryOrientation: "top",
    start: "top",
    end: "bottom"
  } : {
    directionHint: "s",
    minDistance: 90,
    baseOrientation: "top",
    boundaryOrientation: "left",
    start: "left",
    end: "right"
  }, a = KP(e, {
    filter: function(g) {
      return P(g, "bpmn:SequenceFlow");
    },
    direction: o.directionHint
  }), c = 30, l = o.minDistance, u = o.baseOrientation;
  P(e, "bpmn:BoundaryEvent") && (u = Ln(e, e.host, -25), u.indexOf(o.boundaryOrientation) !== -1 && (c *= -1));
  var d = r ? {
    x: n.right + a + t.width / 2,
    y: i.y + $g(u, l, o)
  } : {
    x: i.x + $g(u, l, o),
    y: n.bottom + a + t.height / 2
  }, f = {
    margin: c,
    minDistance: l
  }, y = r ? {
    y: f
  } : {
    x: f
  };
  return Yd(e, t, d, Kd(y));
}
function $g(e, t, n) {
  return e.includes(n.start) ? -1 * t : e.includes(n.end) ? t : 0;
}
function iT(e, t) {
  var n = Le(e), i = $u(e), r = i ? {
    x: n.right + t.width / 2,
    y: n.top - 50 - t.height / 2
  } : {
    x: n.right + 50 + t.width / 2,
    y: n.bottom + t.height / 2
  };
  kt(e) && (r = Fe(e), i ? (r.x += 100, r.y -= 50) : (r.x += 100, r.y += 50));
  var o = {
    margin: i ? -30 : 30,
    minDistance: 20
  }, a = i ? {
    y: o
  } : {
    x: o
  };
  return Yd(e, t, r, Kd(a));
}
function rT(e, t) {
  var n = Le(e), i = $u(e), r = i ? {
    x: n.right - 10 + t.width / 2,
    y: n.bottom + 40 + t.width / 2
  } : {
    x: n.left - 40 - t.width / 2,
    y: n.bottom - 10 + t.height / 2
  }, o = {
    margin: 30,
    minDistance: 30
  }, a = i ? {
    x: o
  } : {
    y: o
  };
  return Yd(e, t, r, Kd(a));
}
function qb(e) {
  e.on("autoPlace", function(t) {
    var n = t.shape, i = t.source;
    return Kb(i, n);
  });
}
qb.$inject = ["eventBus"];
const qd = {
  __depends__: [tT],
  __init__: ["bpmnAutoPlace"],
  bpmnAutoPlace: ["type", qb]
};
function Lr(e, t, n, i) {
  le.call(this, e), this._elementRegistry = t, this._modeling = n, this._rules = i;
  var r = this;
  this.postExecuted(["shape.create"], function(o) {
    var a = o.context, c = a.hints || {}, l = a.shape, u = a.parent || a.newParent;
    c.autoResize !== !1 && r._expand([l], u);
  }), this.postExecuted(["elements.move"], function(o) {
    var a = o.context, c = ql(md(a.closure.topLevel)), l = a.hints, u = l ? l.autoResize : !0;
    if (u !== !1) {
      var d = Ga(c, function(f) {
        return f.parent.id;
      });
      z(d, function(f, y) {
        Ke(u) && (f = f.filter(function(g) {
          return gt(u, zi({ id: g.id }));
        })), r._expand(f, y);
      });
    }
  }), this.postExecuted(["shape.toggleCollapse"], function(o) {
    var a = o.context, c = a.hints, l = a.shape;
    c && c.autoResize === !1 || l.collapsed || r._expand(l.children || [], l);
  }), this.postExecuted(["shape.resize"], function(o) {
    var a = o.context, c = a.hints, l = a.shape, u = l.parent;
    c && c.autoResize === !1 || u && r._expand([l], u);
  });
}
Lr.$inject = [
  "eventBus",
  "elementRegistry",
  "modeling",
  "rules"
];
Pe(Lr, le);
Lr.prototype._getOptimalBounds = function(e, t) {
  var n = this.getOffset(t), i = this.getPadding(t), r = Le(pn(e)), o = Le(t), a = {};
  return r.top - o.top < i.top && (a.top = r.top - n.top), r.left - o.left < i.left && (a.left = r.left - n.left), o.right - r.right < i.right && (a.right = r.right + n.right), o.bottom - r.bottom < i.bottom && (a.bottom = r.bottom + n.bottom), bu(U({}, o, a));
};
Lr.prototype._expand = function(e, t) {
  typeof t == "string" && (t = this._elementRegistry.get(t));
  var n = this._rules.allowed("element.autoResize", {
    elements: e,
    target: t
  });
  if (n) {
    var i = this._getOptimalBounds(e, t);
    if (oT(i, t)) {
      var r = aT(Ui(t, ["x", "y", "width", "height"]), i);
      this.resize(t, i, {
        autoResize: r
      });
      var o = t.parent;
      o && this._expand([t], o);
    }
  }
};
Lr.prototype.getOffset = function(e) {
  return { top: 60, bottom: 60, left: 100, right: 100 };
};
Lr.prototype.getPadding = function(e) {
  return { top: 2, bottom: 2, left: 15, right: 15 };
};
Lr.prototype.resize = function(e, t, n) {
  this._modeling.resizeShape(e, t, null, n);
};
function oT(e, t) {
  return e.x !== t.x || e.y !== t.y || e.width !== t.width || e.height !== t.height;
}
function aT(e, t) {
  var n = "";
  return e = Le(e), t = Le(t), e.top > t.top && (n = n.concat("n")), e.right < t.right && (n = n.concat("w")), e.bottom < t.bottom && (n = n.concat("s")), e.left > t.left && (n = n.concat("e")), n;
}
function ju(e) {
  e.invoke(Lr, this);
}
ju.$inject = [
  "injector"
];
Pe(ju, Lr);
ju.prototype.resize = function(e, t, n) {
  P(e, "bpmn:Participant") ? this._modeling.resizeLane(e, t, null, n) : this._modeling.resizeShape(e, t, null, n);
};
function lc(e) {
  Di.call(this, e);
  var t = this;
  this.addRule("element.autoResize", function(n) {
    return t.canResize(n.elements, n.target);
  });
}
lc.$inject = ["eventBus"];
Pe(lc, Di);
lc.prototype.canResize = function(e, t) {
  return !1;
};
function Fu(e, t) {
  lc.call(this, e), this._modeling = t;
}
Pe(Fu, lc);
Fu.$inject = [
  "eventBus",
  "modeling"
];
Fu.prototype.canResize = function(e, t) {
  if (P(t.di, "bpmndi:BPMNPlane") || !P(t, "bpmn:Participant") && !P(t, "bpmn:Lane") && !P(t, "bpmn:SubProcess"))
    return !1;
  var n = !0;
  return z(e, function(i) {
    if (P(i, "bpmn:Lane") || vt(i)) {
      n = !1;
      return;
    }
  }), n;
};
const sT = {
  __init__: [
    "bpmnAutoResize",
    "bpmnAutoResizeProvider"
  ],
  bpmnAutoResize: ["type", ju],
  bpmnAutoResizeProvider: ["type", Fu]
};
var jg = 1500;
function Xb(e, t, n) {
  var i = this, r = n.get("dragging", !1);
  function o(a) {
    if (!a.hover) {
      var c = a.originalEvent, l = i._findTargetGfx(c), u = l && e.get(l);
      l && u && (a.stopPropagation(), r.hover({ element: u, gfx: l }), r.move(c));
    }
  }
  r && t.on("drag.start", function(a) {
    t.once("drag.move", jg, function(c) {
      o(c);
    });
  }), function() {
    var a, c;
    t.on("element.hover", function(l) {
      a = l.gfx, c = l.element;
    }), t.on("element.hover", jg, function(l) {
      c && t.fire("element.out", {
        element: c,
        gfx: a
      });
    }), t.on("element.out", function() {
      a = null, c = null;
    });
  }(), this._findTargetGfx = function(a) {
    var c, l;
    if (a instanceof MouseEvent)
      return c = Zo(a), l = document.elementFromPoint(c.x, c.y), cT(l);
  };
}
Xb.$inject = [
  "elementRegistry",
  "eventBus",
  "injector"
];
function cT(e) {
  return co(e, "svg, .djs-element", !0);
}
const lT = {
  __init__: [
    "hoverFix"
  ],
  hoverFix: ["type", Xb]
};
var Aa = Math.round, Fg = "djs-drag-active";
function jo(e) {
  e.preventDefault();
}
function uT(e) {
  return typeof TouchEvent < "u" && e instanceof TouchEvent;
}
function pT(e) {
  return Math.sqrt(Math.pow(e.x, 2) + Math.pow(e.y, 2));
}
function Zb(e, t, n, i) {
  var r = {
    threshold: 5,
    trapClick: !0
  }, o;
  function a(k) {
    var A = t.viewbox(), D = t._container.getBoundingClientRect();
    return {
      x: A.x + (k.x - D.left) / A.scale,
      y: A.y + (k.y - D.top) / A.scale
    };
  }
  function c(k, A) {
    A = A || o;
    var D = e.createEvent(
      U(
        {},
        A.payload,
        A.data,
        { isTouch: A.isTouch }
      )
    );
    return e.fire("drag." + k, D) === !1 ? !1 : e.fire(A.prefix + "." + k, D);
  }
  function l(k) {
    var A = k.filter(function(D) {
      return i.get(D.id);
    });
    A.length && n.select(A);
  }
  function u(k, A) {
    var D = o.payload, j = o.displacement, W = o.globalStart, $ = Zo(k), Z = Vi($, W), X = o.localStart, V = a($), ae = Vi(V, X);
    if (!o.active && (A || pT(Z) > o.threshold)) {
      if (U(D, {
        x: Aa(X.x + j.x),
        y: Aa(X.y + j.y),
        dx: 0,
        dy: 0
      }, { originalEvent: k }), c("start") === !1)
        return w();
      o.active = !0, o.keepSelection || (D.previousSelection = n.get(), n.select(null)), o.cursor && Ou(o.cursor), t.addMarker(t.getRootElement(), Fg);
    }
    Jp(k), o.active && (U(D, {
      x: Aa(V.x + j.x),
      y: Aa(V.y + j.y),
      dx: Aa(ae.x),
      dy: Aa(ae.y)
    }, { originalEvent: k }), c("move"));
  }
  function d(k) {
    var A, D = !0;
    o.active && (k && (o.payload.originalEvent = k, Jp(k)), D = c("end")), D === !1 && c("rejected"), A = B(D !== !0), c("ended", A);
  }
  function f(k) {
    hn("Escape", k) && (jo(k), w());
  }
  function y(k) {
    var A;
    o.active && (A = bb(e), setTimeout(A, 400), jo(k)), d(k);
  }
  function g(k) {
    u(k);
  }
  function _(k) {
    var A = o.payload;
    A.hoverGfx = k.gfx, A.hover = k.element, c("hover");
  }
  function x(k) {
    c("out");
    var A = o.payload;
    A.hoverGfx = null, A.hover = null;
  }
  function w(k) {
    var A;
    if (o) {
      var D = o.active;
      D && c("cancel"), A = B(k), D && c("canceled", A);
    }
  }
  function B(k) {
    var A, D;
    c("cleanup"), _b(), o.trapClick ? D = y : D = d, Ye.unbind(document, "mousemove", u), Ye.unbind(document, "dragstart", jo), Ye.unbind(document, "selectstart", jo), Ye.unbind(document, "mousedown", D, !0), Ye.unbind(document, "mouseup", D, !0), Ye.unbind(document, "keyup", f), Ye.unbind(document, "touchstart", g, !0), Ye.unbind(document, "touchcancel", w, !0), Ye.unbind(document, "touchmove", u, !0), Ye.unbind(document, "touchend", d, !0), e.off("element.hover", _), e.off("element.out", x), t.removeMarker(t.getRootElement(), Fg);
    var j = o.payload.previousSelection;
    return k !== !1 && j && !n.get().length && l(j), A = o, o = null, A;
  }
  function N(k, A, D, j) {
    o && w(!1), typeof A == "string" && (j = D, D = A, A = null), j = U({}, r, j || {});
    var W = j.data || {}, $, Z, X, V, ae;
    j.trapClick ? V = y : V = d, k ? ($ = Ka(k) || k, Z = Zo(k), Jp(k), $.type === "dragstart" && jo($)) : ($ = null, Z = { x: 0, y: 0 }), X = a(Z), A || (A = X), ae = uT($), o = U({
      prefix: D,
      data: W,
      payload: {},
      globalStart: Z,
      displacement: Vi(A, X),
      localStart: X,
      isTouch: ae
    }, j), j.manual || (ae ? (Ye.bind(document, "touchstart", g, !0), Ye.bind(document, "touchcancel", w, !0), Ye.bind(document, "touchmove", u, !0), Ye.bind(document, "touchend", d, !0)) : (Ye.bind(document, "mousemove", u), Ye.bind(document, "dragstart", jo), Ye.bind(document, "selectstart", jo), Ye.bind(document, "mousedown", V, !0), Ye.bind(document, "mouseup", V, !0)), Ye.bind(document, "keyup", f), e.on("element.hover", _), e.on("element.out", x)), c("init"), j.autoActivate && u(k, !0);
  }
  e.on("diagram.destroy", w), this.init = N, this.move = u, this.hover = _, this.out = x, this.end = d, this.cancel = w, this.context = function() {
    return o;
  }, this.setOptions = function(k) {
    U(r, k);
  };
}
Zb.$inject = [
  "eventBus",
  "canvas",
  "selection",
  "elementRegistry"
];
const Ir = {
  __depends__: [
    lT,
    pr
  ],
  dragging: ["type", Zb]
};
function Qa(e, t, n) {
  this._canvas = n, this._opts = U({
    scrollThresholdIn: [20, 20, 20, 20],
    scrollThresholdOut: [0, 0, 0, 0],
    scrollRepeatTimeout: 15,
    scrollStep: 10
  }, e);
  var i = this;
  t.on("drag.move", function(r) {
    var o = i._toBorderPoint(r);
    i.startScroll(o);
  }), t.on(["drag.cleanup"], function() {
    i.stopScroll();
  });
}
Qa.$inject = [
  "config.autoScroll",
  "eventBus",
  "canvas"
];
Qa.prototype.startScroll = function(e) {
  var t = this._canvas, n = this._opts, i = this, r = t.getContainer().getBoundingClientRect(), o = [
    e.x,
    e.y,
    r.width - e.x,
    r.height - e.y
  ];
  this.stopScroll();
  for (var a = 0, c = 0, l = 0; l < 4; l++)
    fT(o[l], n.scrollThresholdOut[l], n.scrollThresholdIn[l]) && (l === 0 ? a = n.scrollStep : l == 1 ? c = n.scrollStep : l == 2 ? a = -n.scrollStep : l == 3 && (c = -n.scrollStep));
  (a !== 0 || c !== 0) && (t.scroll({ dx: a, dy: c }), this._scrolling = setTimeout(function() {
    i.startScroll(e);
  }, n.scrollRepeatTimeout));
};
function fT(e, t, n) {
  return t < e && e < n;
}
Qa.prototype.stopScroll = function() {
  clearTimeout(this._scrolling);
};
Qa.prototype.setOptions = function(e) {
  this._opts = U({}, this._opts, e);
};
Qa.prototype._toBorderPoint = function(e) {
  var t = this._canvas._container.getBoundingClientRect(), n = Zo(e.originalEvent);
  return {
    x: n.x - t.left,
    y: n.y - t.top
  };
};
const dT = {
  __depends__: [
    Ir
  ],
  __init__: ["autoScroll"],
  autoScroll: ["type", Qa]
};
function Xd(e) {
  this._commandStack = e.get("commandStack", !1);
}
Xd.$inject = ["injector"];
Xd.prototype.allowed = function(e, t) {
  var n = !0, i = this._commandStack;
  return i && (n = i.canExecute(e, t)), n === void 0 ? !0 : n;
};
const dr = {
  __init__: ["rules"],
  rules: ["type", Xd]
};
var dl = Math.round, hT = Math.max;
function mT(e, t) {
  var n = e.x, i = e.y;
  return [
    ["M", n, i],
    ["m", 0, -t],
    ["a", t, t, 0, 1, 1, 0, 2 * t],
    ["a", t, t, 0, 1, 1, 0, -2 * t],
    ["z"]
  ];
}
function yT(e) {
  var t = [];
  return e.forEach(function(n, i) {
    t.push([i === 0 ? "M" : "L", n.x, n.y]);
  }), t;
}
var Jb = 10;
function gT(e, t) {
  var n, i;
  for (n = 0; i = e[n]; n++)
    if (tc(i, t) <= Jb)
      return {
        point: e[n],
        bendpoint: !0,
        index: n
      };
  return null;
}
function vT(e, t) {
  var n = x_(mT(t, Jb), yT(e)), i = n[0], r = n[n.length - 1], o;
  return i ? i !== r ? i.segment2 !== r.segment2 ? (o = hT(i.segment2, r.segment2) - 1, {
    point: e[o],
    bendpoint: !0,
    index: o
  }) : {
    point: {
      x: dl(i.x + r.x) / 2,
      y: dl(i.y + r.y) / 2
    },
    index: i.segment2
  } : {
    point: {
      x: dl(i.x),
      y: dl(i.y)
    },
    index: i.segment2
  } : null;
}
function Yf(e, t) {
  return gT(e, t) || vT(e, t);
}
function Qb(e) {
  return Math.sqrt(Math.pow(e.x, 2) + Math.pow(e.y, 2));
}
function Hg(e) {
  return Math.atan((e[1].y - e[0].y) / (e[1].x - e[0].x));
}
function _T(e, t) {
  return t ? {
    x: Math.cos(t) * e.x - Math.sin(t) * e.y,
    y: Math.sin(t) * e.x + Math.cos(t) * e.y
  } : e;
}
function bT(e, t, n) {
  var i = [
    { n: e[0] - n[0], lambda: t[0] },
    { n: e[1] - n[1], lambda: t[1] }
  ], r = i[0].n * t[0] + i[1].n * t[1], o = i[0].lambda * t[0] + i[1].lambda * t[1];
  return -r / o;
}
function Zd(e, t) {
  var n = t[0], i = t[1], r = { x: i.x - n.x, y: i.y - n.y }, o = bT([n.x, n.y], [r.x, r.y], [e.x, e.y]);
  return { x: n.x + o * r.x, y: n.y + o * r.y };
}
function ex(e, t) {
  var n = Zd(e, t), i = {
    x: n.x - e.x,
    y: n.y - e.y
  };
  return Qb(i);
}
function su(e, t) {
  return Qb({
    x: e.x - t.x,
    y: e.y - t.y
  });
}
var tx = "djs-bendpoint", nx = "djs-segment-dragger";
function xT(e, t) {
  var n = Zo(t), i = e._container.getBoundingClientRect(), r;
  r = {
    x: i.left,
    y: i.top
  };
  var o = e.viewbox();
  return {
    x: o.x + (n.x - r.x) / o.scale,
    y: o.y + (n.y - r.y) / o.scale
  };
}
function Kf(e, t, n) {
  var i = xT(e, n), r = Yf(t, i);
  return r;
}
function qf(e, t) {
  var n = Me("g");
  dt(n).add(tx), ze(e, n);
  var i = Me("circle");
  we(i, {
    cx: 0,
    cy: 0,
    r: 4
  }), dt(i).add("djs-visual"), ze(n, i);
  var r = Me("circle");
  return we(r, {
    cx: 0,
    cy: 0,
    r: 10
  }), dt(r).add("djs-hit"), ze(n, r), t && dt(n).add(t), n;
}
function ET(e, t, n, i) {
  var r = Me("g");
  ze(e, r);
  var o = 18, a = 6, c = 11, l = ST(t, n, i), u = a + c, d = Me("rect");
  we(d, {
    x: -o / 2,
    y: -a / 2,
    width: o,
    height: a
  }), dt(d).add("djs-visual"), ze(r, d);
  var f = Me("rect");
  return we(f, {
    x: -l / 2,
    y: -u / 2,
    width: l,
    height: u
  }), dt(f).add("djs-hit"), ze(r, f), B_(r, i === "v" ? 90 : 0), r;
}
function ix(e, t, n) {
  var i = Me("g"), r = Mf(t, n), o = Ar(t, n);
  return ze(e, i), ET(i, t, n, o), dt(i).add(nx), dt(i).add(o === "h" ? "horizontal" : "vertical"), An(i, r.x, r.y), i;
}
function Xf(e) {
  return Math.abs(Math.round(e * 2 / 3));
}
function wT(e, t) {
  var n = RT(e, t);
  return Zd(e, n);
}
function ST(e, t, n) {
  var i = t.x - e.x, r = t.y - e.y;
  return Xf(n === "h" ? i : r);
}
function RT(e, t) {
  for (var n = t.waypoints, i = 1 / 0, r, o = 0; o < n.length - 1; o++) {
    var a = n[o], c = n[o + 1], l = ex(e, [a, c]);
    l < i && (i = l, r = o);
  }
  return [n[r], n[r + 1]];
}
function rx(e, t, n, i, r) {
  function o(k, A, D) {
    var j = k.index, W = k.point, $, Z, X, V, ae, ie;
    return j <= 0 || k.bendpoint ? !1 : ($ = A[j - 1], Z = A[j], X = Mf($, Z), V = Ar($, Z), ae = Math.abs(W.x - X.x), ie = Math.abs(W.y - X.y), V && ae <= D && ie <= D);
  }
  function a(k, A) {
    var D = k.waypoints, j, W, $, Z;
    return A.index <= 0 || A.bendpoint || (j = {
      start: D[A.index - 1],
      end: D[A.index]
    }, W = Ar(j.start, j.end), !W) ? null : (W === "h" ? $ = j.end.x - j.start.x : $ = j.end.y - j.start.y, Z = Xf($) / 2, Z);
  }
  function c(k, A) {
    var D = A.waypoints, j = Kf(t, D, k), W;
    if (j)
      return W = a(A, j), o(j, D, W) ? r.start(k, A, j.index) : i.start(k, A, j.index, !j.bendpoint), !0;
  }
  function l(k, A, D) {
    Ye.bind(k, A, function(j) {
      n.triggerMouseEvent(A, j, D), j.stopPropagation();
    });
  }
  function u(k, A) {
    var D = t.getLayer("overlays"), j = Tt('.djs-bendpoints[data-element-id="' + Hs(k.id) + '"]', D);
    return !j && A && (j = Me("g"), we(j, { "data-element-id": k.id }), dt(j).add("djs-bendpoints"), ze(D, j), l(j, "mousedown", k), l(j, "click", k), l(j, "dblclick", k)), j;
  }
  function d(k, A) {
    return Tt(
      '.djs-segment-dragger[data-segment-idx="' + k + '"]',
      A
    );
  }
  function f(k, A) {
    A.waypoints.forEach(function(D, j) {
      var W = qf(k);
      ze(k, W), An(W, D.x, D.y);
    }), qf(k, "floating");
  }
  function y(k, A) {
    for (var D = A.waypoints, j, W, $, Z = 1; Z < D.length; Z++)
      j = D[Z - 1], W = D[Z], Ar(j, W) && ($ = ix(k, j, W), we($, { "data-segment-idx": Z }), l($, "mousemove", A));
  }
  function g(k) {
    z(Pf("." + tx, k), function(A) {
      qt(A);
    });
  }
  function _(k) {
    z(Pf("." + nx, k), function(A) {
      qt(A);
    });
  }
  function x(k) {
    var A = u(k);
    return A || (A = u(k, !0), f(A, k), y(A, k)), A;
  }
  function w(k) {
    var A = u(k);
    A && (_(A), g(A), y(A, k), f(A, k));
  }
  function B(k, A) {
    var D = Tt(".floating", k), j = A.point;
    D && An(D, j.x, j.y);
  }
  function N(k, A, D) {
    var j = d(A.index, k), W = D[A.index - 1], $ = D[A.index], Z = A.point, X = Mf(W, $), V = Ar(W, $), ae, ie;
    j && (ae = CT(j), ie = {
      x: Z.x - X.x,
      y: Z.y - X.y
    }, V === "v" && (ie = {
      x: ie.y,
      y: ie.x
    }), An(ae, ie.x, ie.y));
  }
  e.on("connection.changed", function(k) {
    w(k.element);
  }), e.on("connection.remove", function(k) {
    var A = u(k.element);
    A && qt(A);
  }), e.on("element.marker.update", function(k) {
    var A = k.element, D;
    A.waypoints && (D = x(A), k.add ? dt(D).add(k.marker) : dt(D).remove(k.marker));
  }), e.on("element.mousemove", function(k) {
    var A = k.element, D = A.waypoints, j, W;
    if (D) {
      if (j = u(A, !0), W = Kf(t, D, k.originalEvent), !W)
        return;
      B(j, W), W.bendpoint || N(j, W, D);
    }
  }), e.on("element.mousedown", function(k) {
    if (ho(k)) {
      var A = k.originalEvent, D = k.element;
      if (D.waypoints)
        return c(A, D);
    }
  }), e.on("selection.changed", function(k) {
    var A = k.newSelection, D = A[0];
    D && D.waypoints && x(D);
  }), e.on("element.hover", function(k) {
    var A = k.element;
    A.waypoints && (x(A), n.registerEvent(k.gfx, "mousemove", "element.mousemove"));
  }), e.on("element.out", function(k) {
    n.unregisterEvent(k.gfx, "mousemove", "element.mousemove");
  }), e.on("element.updateId", function(k) {
    var A = k.element, D = k.newId;
    if (A.waypoints) {
      var j = u(A);
      j && we(j, { "data-element-id": D });
    }
  }), this.addHandles = x, this.updateHandles = w, this.getBendpointsContainer = u, this.getSegmentDragger = d;
}
rx.$inject = [
  "eventBus",
  "canvas",
  "interactionEvents",
  "bendpointMove",
  "connectionSegmentMove"
];
function CT(e) {
  return Tt(".djs-visual", e);
}
var zg = Math.round, Fo = "reconnectStart", Ho = "reconnectEnd", Es = "updateWaypoints";
function Jd(e, t, n, i, r, o) {
  this._injector = e, this.start = function(a, c, l, u) {
    var d = n.getGraphics(c), f = c.source, y = c.target, g = c.waypoints, _;
    !u && l === 0 ? _ = Fo : !u && l === g.length - 1 ? _ = Ho : _ = Es;
    var x = _ === Es ? "connection.updateWaypoints" : "connection.reconnect", w = r.allowed(x, {
      connection: c,
      source: f,
      target: y
    });
    w === !1 && (w = r.allowed(x, {
      connection: c,
      source: y,
      target: f
    })), w !== !1 && i.init(a, "bendpoint.move", {
      data: {
        connection: c,
        connectionGfx: d,
        context: {
          allowed: w,
          bendpointIndex: l,
          connection: c,
          source: f,
          target: y,
          insert: u,
          type: _
        }
      }
    });
  }, t.on("bendpoint.move.hover", function(a) {
    var c = a.context, l = c.connection, u = l.source, d = l.target, f = a.hover, y = c.type;
    c.hover = f;
    var g;
    if (f) {
      var _ = y === Es ? "connection.updateWaypoints" : "connection.reconnect";
      if (g = c.allowed = r.allowed(_, {
        connection: l,
        source: y === Fo ? f : u,
        target: y === Ho ? f : d
      }), g) {
        c.source = y === Fo ? f : u, c.target = y === Ho ? f : d;
        return;
      }
      g === !1 && (g = c.allowed = r.allowed(_, {
        connection: l,
        source: y === Ho ? f : d,
        target: y === Fo ? f : u
      })), g && (c.source = y === Ho ? f : d, c.target = y === Fo ? f : u);
    }
  }), t.on(["bendpoint.move.out", "bendpoint.move.cleanup"], function(a) {
    var c = a.context, l = c.type;
    c.hover = null, c.source = null, c.target = null, l !== Es && (c.allowed = !1);
  }), t.on("bendpoint.move.end", function(a) {
    var c = a.context, l = c.allowed, u = c.bendpointIndex, d = c.connection, f = c.insert, y = d.waypoints.slice(), g = c.source, _ = c.target, x = c.type, w = c.hints || {}, B = {
      x: zg(a.x),
      y: zg(a.y)
    };
    if (!l)
      return !1;
    x === Es ? (f ? y.splice(u, 0, B) : y[u] = B, w.bendpointMove = {
      insert: f,
      bendpointIndex: u
    }, y = this.cropWaypoints(d, y), o.updateWaypoints(d, bR(y), w)) : (x === Fo ? (w.docking = "source", cu(c) && (w.docking = "target", w.newWaypoints = y.reverse())) : x === Ho && (w.docking = "target", cu(c) && (w.docking = "source", w.newWaypoints = y.reverse())), o.reconnect(d, g, _, B, w));
  }, this);
}
Jd.$inject = [
  "injector",
  "eventBus",
  "canvas",
  "dragging",
  "rules",
  "modeling"
];
Jd.prototype.cropWaypoints = function(e, t) {
  var n = this._injector.get("connectionDocking", !1);
  if (!n)
    return t;
  var i = e.waypoints;
  return e.waypoints = t, e.waypoints = n.getCroppedWaypoints(e), t = e.waypoints, e.waypoints = i, t;
};
function cu(e) {
  var t = e.hover, n = e.source, i = e.target, r = e.type;
  if (r === Fo)
    return t && i && t === i && n !== i;
  if (r === Ho)
    return t && n && t === n && n !== i;
}
var AT = "reconnectStart", PT = "reconnectEnd", Vg = "updateWaypoints", ws = "connect-ok", hl = "connect-not-ok", Wg = "connect-hover", Gg = "djs-updating", Ug = "djs-dragging", Yg = 1100;
function ox(e, t, n, i) {
  this._injector = t;
  var r = t.get("connectionPreview", !1);
  n.on("bendpoint.move.start", function(o) {
    var a = o.context, c = a.bendpointIndex, l = a.connection, u = a.insert, d = l.waypoints, f = d.slice();
    a.waypoints = d, u && f.splice(c, 0, { x: o.x, y: o.y }), l.waypoints = f;
    var y = a.draggerGfx = qf(i.getLayer("overlays"));
    dt(y).add("djs-dragging"), i.addMarker(l, Ug), i.addMarker(l, Gg);
  }), n.on("bendpoint.move.hover", function(o) {
    var a = o.context, c = a.allowed, l = a.hover, u = a.type;
    if (l) {
      if (i.addMarker(l, Wg), u === Vg)
        return;
      c ? (i.removeMarker(l, hl), i.addMarker(l, ws)) : c === !1 && (i.removeMarker(l, ws), i.addMarker(l, hl));
    }
  }), n.on([
    "bendpoint.move.out",
    "bendpoint.move.cleanup"
  ], Yg, function(o) {
    var a = o.context, c = a.hover, l = a.target;
    c && (i.removeMarker(c, Wg), i.removeMarker(c, l ? ws : hl));
  }), n.on("bendpoint.move.move", function(o) {
    var a = o.context, c = a.allowed, l = a.bendpointIndex, u = a.draggerGfx, d = a.hover, f = a.type, y = a.connection, g = y.source, _ = y.target, x = y.waypoints.slice(), w = { x: o.x, y: o.y }, B = a.hints || {}, N = {};
    r && (B.connectionStart && (N.connectionStart = B.connectionStart), B.connectionEnd && (N.connectionEnd = B.connectionEnd), f === AT ? cu(a) ? (N.connectionEnd = N.connectionEnd || w, N.source = _, N.target = d || g, x = x.reverse()) : (N.connectionStart = N.connectionStart || w, N.source = d || g, N.target = _) : f === PT ? cu(a) ? (N.connectionStart = N.connectionStart || w, N.source = d || _, N.target = g, x = x.reverse()) : (N.connectionEnd = N.connectionEnd || w, N.source = g, N.target = d || _) : (N.noCropping = !0, N.noLayout = !0, x[l] = w), f === Vg && (x = e.cropWaypoints(y, x)), N.waypoints = x, r.drawPreview(a, c, N)), An(u, o.x, o.y);
  }, this), n.on([
    "bendpoint.move.end",
    "bendpoint.move.cancel"
  ], Yg, function(o) {
    var a = o.context, c = a.connection, l = a.draggerGfx, u = a.hover, d = a.target, f = a.waypoints;
    c.waypoints = f, qt(l), i.removeMarker(c, Gg), i.removeMarker(c, Ug), u && (i.removeMarker(u, ws), i.removeMarker(u, d ? ws : hl)), r && r.cleanUp(a);
  });
}
ox.$inject = [
  "bendpointMove",
  "injector",
  "eventBus",
  "canvas"
];
var Kg = "connect-hover", qg = "djs-updating";
function Xg(e, t, n) {
  return Qd(e, t, e[t] + n);
}
function Qd(e, t, n) {
  return {
    x: t === "x" ? n : e.x,
    y: t === "y" ? n : e.y
  };
}
function TT(e, t, n, i) {
  var r = Math.max(t[i], n[i]), o = Math.min(t[i], n[i]), a = 20, c = Math.min(Math.max(o + a, e[i]), r - a);
  return Qd(t, i, c);
}
function ax(e) {
  return e === "x" ? "y" : "x";
}
function Zg(e, t, n) {
  var i, r;
  return e.original ? e.original : (i = Fe(t), r = ax(n), Qd(e, r, i[r]));
}
function sx(e, t, n, i, r, o) {
  var a = e.get("connectionDocking", !1);
  this.start = function(f, y, g) {
    var _, x = n.getGraphics(y), w = g - 1, B = g, N = y.waypoints, k = N[w], A = N[B], D = Kf(n, N, f), j, W, $;
    j = Ar(k, A), j && (W = j === "v" ? "x" : "y", w === 0 && (k = Zg(k, y.source, W)), B === N.length - 1 && (A = Zg(A, y.target, W)), D ? $ = D.point : $ = {
      x: (k.x + A.x) / 2,
      y: (k.y + A.y) / 2
    }, _ = {
      connection: y,
      segmentStartIndex: w,
      segmentEndIndex: B,
      segmentStart: k,
      segmentEnd: A,
      axis: W,
      dragPosition: $
    }, i.init(f, $, "connectionSegment.move", {
      cursor: W === "x" ? "resize-ew" : "resize-ns",
      data: {
        connection: y,
        connectionGfx: x,
        context: _
      }
    }));
  };
  function c(f, y) {
    if (!a)
      return y;
    var g = f.waypoints, _;
    return f.waypoints = y, _ = a.getCroppedWaypoints(f), f.waypoints = g, _;
  }
  function l(f) {
    r.update("connection", f.connection, f.connectionGfx);
  }
  function u(f, y, g) {
    var _ = f.newWaypoints, x = f.segmentStartIndex + y, w = _[x], B = f.segmentEndIndex + y, N = _[B], k = ax(f.axis), A = TT(g, w, N, k);
    An(f.draggerGfx, A.x, A.y);
  }
  function d(f, y) {
    var g = 0, _ = f.filter(function(x, w) {
      return xd(f[w - 1], f[w + 1], x) ? (g = w <= y ? g - 1 : g, !1) : !0;
    });
    return {
      waypoints: _,
      segmentOffset: g
    };
  }
  t.on("connectionSegment.move.start", function(f) {
    var y = f.context, g = f.connection, _ = n.getLayer("overlays");
    y.originalWaypoints = g.waypoints.slice(), y.draggerGfx = ix(_, y.segmentStart, y.segmentEnd), dt(y.draggerGfx).add("djs-dragging"), n.addMarker(g, qg);
  }), t.on("connectionSegment.move.move", function(f) {
    var y = f.context, g = y.connection, _ = y.segmentStartIndex, x = y.segmentEndIndex, w = y.segmentStart, B = y.segmentEnd, N = y.axis, k = y.originalWaypoints.slice(), A = Xg(w, N, f["d" + N]), D = Xg(B, N, f["d" + N]), j = k.length, W = 0;
    k[_] = A, k[x] = D;
    var $, Z;
    _ < 2 && ($ = Ln(g.source, A), _ === 1 ? $ === "intersect" && (k.shift(), k[0] = A, W--) : $ !== "intersect" && (k.unshift(w), W++)), x > j - 3 && (Z = Ln(g.target, D), x === j - 2 ? Z === "intersect" && (k.pop(), k[k.length - 1] = D) : Z !== "intersect" && k.push(B)), y.newWaypoints = g.waypoints = c(g, k), u(y, W, f), y.newSegmentStartIndex = _ + W, l(f);
  }), t.on("connectionSegment.move.hover", function(f) {
    f.context.hover = f.hover, n.addMarker(f.hover, Kg);
  }), t.on([
    "connectionSegment.move.out",
    "connectionSegment.move.cleanup"
  ], function(f) {
    var y = f.context.hover;
    y && n.removeMarker(y, Kg);
  }), t.on("connectionSegment.move.cleanup", function(f) {
    var y = f.context, g = y.connection;
    y.draggerGfx && qt(y.draggerGfx), n.removeMarker(g, qg);
  }), t.on([
    "connectionSegment.move.cancel",
    "connectionSegment.move.end"
  ], function(f) {
    var y = f.context, g = y.connection;
    g.waypoints = y.originalWaypoints, l(f);
  }), t.on("connectionSegment.move.end", function(f) {
    var y = f.context, g = y.connection, _ = y.newWaypoints, x = y.newSegmentStartIndex;
    _ = _.map(function(D) {
      return {
        original: D.original,
        x: Math.round(D.x),
        y: Math.round(D.y)
      };
    });
    var w = d(_, x), B = w.waypoints, N = c(g, B), k = w.segmentOffset, A = {
      segmentMove: {
        segmentStartIndex: y.segmentStartIndex,
        newSegmentStartIndex: x + k
      }
    };
    o.updateWaypoints(g, N, A);
  });
}
sx.$inject = [
  "injector",
  "eventBus",
  "canvas",
  "dragging",
  "graphicsFactory",
  "modeling"
];
var kT = Math.abs, Jg = Math.round;
function MT(e, t, n) {
  n = n === void 0 ? 10 : n;
  var i, r;
  for (i = 0; i < t.length; i++)
    if (r = t[i], kT(r - e) <= n)
      return r;
}
function cx(e) {
  return {
    x: e.x,
    y: e.y
  };
}
function lx(e) {
  return {
    x: e.x + e.width,
    y: e.y + e.height
  };
}
function Pi(e, t) {
  return !e || isNaN(e.x) || isNaN(e.y) ? t : {
    x: Jg(e.x + e.width / 2),
    y: Jg(e.y + e.height / 2)
  };
}
function Ha(e, t) {
  var n = e.snapped;
  return n ? typeof t == "string" ? n[t] : n.x && n.y : !1;
}
function tn(e, t, n) {
  if (typeof t != "string")
    throw new Error("axis must be in [x, y]");
  if (typeof n != "number" && n !== !1)
    throw new Error("value must be Number or false");
  var i, r = e[t], o = e.snapped = e.snapped || {};
  return n === !1 ? o[t] = !1 : (o[t] = !0, i = n - r, e[t] += i, e["d" + t] += i), r;
}
function ux(e) {
  return e.children || [];
}
var DT = Math.abs, Qg = Math.round, rf = 10;
function px(e) {
  function t(o, a) {
    if (Ke(o)) {
      for (var c = o.length; c--; )
        if (DT(o[c] - a) <= rf)
          return o[c];
    } else {
      o = +o;
      var l = a % o;
      if (l < rf)
        return a - l;
      if (l > o - rf)
        return a - l + o;
    }
    return a;
  }
  function n(o, a) {
    if (o.waypoints)
      return wT(a, o);
    if (o.width)
      return {
        x: Qg(o.width / 2 + o.x),
        y: Qg(o.height / 2 + o.y)
      };
  }
  function i(o) {
    var a = o.context, c = a.snapPoints, l = a.connection, u = l.waypoints, d = a.segmentStart, f = a.segmentStartIndex, y = a.segmentEnd, g = a.segmentEndIndex, _ = a.axis;
    if (c)
      return c;
    var x = [
      u[f - 1],
      d,
      y,
      u[g + 1]
    ];
    return f < 2 && x.unshift(n(l.source, o)), g > u.length - 3 && x.unshift(n(l.target, o)), a.snapPoints = c = { horizontal: [], vertical: [] }, z(x, function(w) {
      w && (w = w.original || w, _ === "y" && c.horizontal.push(w.y), _ === "x" && c.vertical.push(w.x));
    }), c;
  }
  e.on("connectionSegment.move.move", 1500, function(o) {
    var a = i(o), c = o.x, l = o.y, u, d;
    if (a) {
      u = t(a.vertical, c), d = t(a.horizontal, l);
      var f = c - u, y = l - d;
      U(o, {
        dx: o.dx - f,
        dy: o.dy - y,
        x: u,
        y: d
      }), (f || a.vertical.indexOf(c) !== -1) && tn(o, "x", u), (y || a.horizontal.indexOf(l) !== -1) && tn(o, "y", d);
    }
  });
  function r(o) {
    var a = o.snapPoints, c = o.connection.waypoints, l = o.bendpointIndex;
    if (a)
      return a;
    var u = [c[l - 1], c[l + 1]];
    return o.snapPoints = a = { horizontal: [], vertical: [] }, z(u, function(d) {
      d && (d = d.original || d, a.horizontal.push(d.y), a.vertical.push(d.x));
    }), a;
  }
  e.on([
    "connect.hover",
    "connect.move",
    "connect.end"
  ], 1500, function(o) {
    var a = o.context, c = a.hover, l = c && n(c, o);
    !kt(c) || !l || !l.x || !l.y || (tn(o, "x", l.x), tn(o, "y", l.y));
  }), e.on(["bendpoint.move.move", "bendpoint.move.end"], 1500, function(o) {
    var a = o.context, c = r(a), l = a.hover, u = l && n(l, o), d = o.x, f = o.y, y, g;
    if (c) {
      y = t(u ? c.vertical.concat([u.x]) : c.vertical, d), g = t(u ? c.horizontal.concat([u.y]) : c.horizontal, f);
      var _ = d - y, x = f - g;
      U(o, {
        dx: o.dx - _,
        dy: o.dy - x,
        x: o.x - _,
        y: o.y - x
      }), (_ || c.vertical.indexOf(d) !== -1) && tn(o, "x", y), (x || c.horizontal.indexOf(f) !== -1) && tn(o, "y", g);
    }
  });
}
px.$inject = ["eventBus"];
const OT = {
  __depends__: [
    Ir,
    dr
  ],
  __init__: ["bendpoints", "bendpointSnapping", "bendpointMovePreview"],
  bendpoints: ["type", rx],
  bendpointMove: ["type", Jd],
  bendpointMovePreview: ["type", ox],
  connectionSegmentMove: ["type", sx],
  bendpointSnapping: ["type", px]
};
function fx(e, t, n, i) {
  function r(a, c) {
    return i.allowed("connection.create", {
      source: a,
      target: c
    });
  }
  function o(a, c) {
    return r(c, a);
  }
  e.on("connect.hover", function(a) {
    var c = a.context, l = c.start, u = a.hover, d;
    if (c.hover = u, d = c.canExecute = r(l, u), !Xl(d)) {
      if (d !== !1) {
        c.source = l, c.target = u;
        return;
      }
      d = c.canExecute = o(l, u), !Xl(d) && d !== !1 && (c.source = u, c.target = l);
    }
  }), e.on(["connect.out", "connect.cleanup"], function(a) {
    var c = a.context;
    c.hover = null, c.source = null, c.target = null, c.canExecute = !1;
  }), e.on("connect.end", function(a) {
    var c = a.context, l = c.canExecute, u = c.connectionStart, d = {
      x: a.x,
      y: a.y
    }, f = c.source, y = c.target;
    if (!l)
      return !1;
    var g = null, _ = {
      connectionStart: Zf(c) ? d : u,
      connectionEnd: Zf(c) ? u : d
    };
    vn(l) && (g = l), c.connection = n.connect(f, y, g, _);
  }), this.start = function(a, c, l, u) {
    vn(l) || (u = l, l = Fe(c)), t.init(a, "connect", {
      autoActivate: u,
      data: {
        shape: c,
        context: {
          start: c,
          connectionStart: l
        }
      }
    });
  };
}
fx.$inject = [
  "eventBus",
  "dragging",
  "modeling",
  "rules"
];
function Zf(e) {
  var t = e.hover, n = e.source, i = e.target;
  return t && n && t === n && n !== i;
}
var NT = 1100, BT = 900, ev = "connect-ok", tv = "connect-not-ok";
function dx(e, t, n) {
  var i = e.get("connectionPreview", !1);
  i && t.on("connect.move", function(r) {
    var o = r.context, a = o.canExecute, c = o.hover, l = o.source, u = o.start, d = o.startPosition, f = o.target, y = o.connectionStart || d, g = o.connectionEnd || {
      x: r.x,
      y: r.y
    }, _ = y, x = g;
    Zf(o) && (_ = g, x = y), i.drawPreview(o, a, {
      source: l || u,
      target: f || c,
      connectionStart: _,
      connectionEnd: x
    });
  }), t.on("connect.hover", BT, function(r) {
    var o = r.context, a = r.hover, c = o.canExecute;
    c !== null && n.addMarker(a, c ? ev : tv);
  }), t.on([
    "connect.out",
    "connect.cleanup"
  ], NT, function(r) {
    var o = r.hover;
    o && (n.removeMarker(o, ev), n.removeMarker(o, tv));
  }), i && t.on("connect.cleanup", function(r) {
    i.cleanUp(r.context);
  });
}
dx.$inject = [
  "injector",
  "eventBus",
  "canvas"
];
const eh = {
  __depends__: [
    pr,
    dr,
    Ir
  ],
  __init__: [
    "connectPreview"
  ],
  connect: ["type", fx],
  connectPreview: ["type", dx]
};
var LT = "djs-dragger";
function $r(e, t, n, i) {
  this._canvas = t, this._graphicsFactory = n, this._elementFactory = i, this._connectionDocking = e.get("connectionDocking", !1), this._layouter = e.get("layouter", !1);
}
$r.$inject = [
  "injector",
  "canvas",
  "graphicsFactory",
  "elementFactory"
];
$r.prototype.drawPreview = function(e, t, n) {
  n = n || {};
  var i = e.connectionPreviewGfx, r = e.getConnection, o = n.source, a = n.target, c = n.waypoints, l = n.connectionStart, u = n.connectionEnd, d = n.noLayout, f = n.noCropping, y = n.noNoop, g, _ = this;
  if (i || (i = e.connectionPreviewGfx = this.createConnectionPreviewGfx()), gu(i), r || (r = e.getConnection = IT(function(x, w, B) {
    return _.getConnection(x, w, B);
  })), t && (g = r(t, o, a)), !g) {
    !y && this.drawNoopPreview(i, n);
    return;
  }
  g.waypoints = c || [], this._layouter && !d && (g.waypoints = this._layouter.layoutConnection(g, {
    source: o,
    target: a,
    connectionStart: l,
    connectionEnd: u,
    waypoints: n.waypoints || g.waypoints
  })), (!g.waypoints || !g.waypoints.length) && (g.waypoints = [
    o ? Fe(o) : l,
    a ? Fe(a) : u
  ]), this._connectionDocking && (o || a) && !f && (g.waypoints = this._connectionDocking.getCroppedWaypoints(g, o, a)), this._graphicsFactory.drawConnection(i, g, {
    stroke: "var(--element-dragger-color)"
  });
};
$r.prototype.drawNoopPreview = function(e, t) {
  var n = t.source, i = t.target, r = t.connectionStart || Fe(n), o = t.connectionEnd || Fe(i), a = this.cropWaypoints(r, o, n, i), c = this.createNoopConnection(a[0], a[1]);
  ze(e, c);
};
$r.prototype.cropWaypoints = function(e, t, n, i) {
  var r = this._graphicsFactory, o = n && r.getShapePath(n), a = i && r.getShapePath(i), c = r.getConnectionPath({ waypoints: [e, t] });
  return e = n && Of(o, c, !0) || e, t = i && Of(a, c, !1) || t, [e, t];
};
$r.prototype.cleanUp = function(e) {
  e && e.connectionPreviewGfx && qt(e.connectionPreviewGfx);
};
$r.prototype.getConnection = function(e) {
  var t = $T(e);
  return this._elementFactory.createConnection(t);
};
$r.prototype.createConnectionPreviewGfx = function() {
  var e = Me("g");
  return we(e, {
    pointerEvents: "none"
  }), dt(e).add(LT), ze(this._canvas.getActiveLayer(), e), e;
};
$r.prototype.createNoopConnection = function(e, t) {
  return vu([e, t], {
    stroke: "#333",
    strokeDasharray: [1],
    strokeWidth: 2,
    "pointer-events": "none"
  });
};
function IT(e) {
  var t = {};
  return function(n) {
    var i = JSON.stringify(n), r = t[i];
    return r || (r = t[i] = e.apply(null, arguments)), r;
  };
}
function $T(e) {
  return vn(e) ? e : {};
}
const jT = {
  __init__: ["connectionPreview"],
  connectionPreview: ["type", $r]
};
var FT = [
  "marker-start",
  "marker-mid",
  "marker-end"
], HT = [
  "circle",
  "ellipse",
  "line",
  "path",
  "polygon",
  "polyline",
  "path",
  "rect"
];
function yo(e, t, n, i) {
  this._elementRegistry = e, this._canvas = n, this._styles = i, this._clonedMarkers = {};
  var r = this;
  t.on("drag.cleanup", function() {
    r.cleanUp();
  });
}
yo.$inject = [
  "elementRegistry",
  "eventBus",
  "canvas",
  "styles"
];
yo.prototype.cleanUp = function() {
  var e = this;
  z(e._clonedMarkers, function(t) {
    qt(t);
  }), e._clonedMarkers = {};
};
yo.prototype.getGfx = function(e) {
  return this._elementRegistry.getGraphics(e);
};
yo.prototype.addDragger = function(e, t, n, i = "djs-dragger") {
  n = n || this.getGfx(e);
  var r = f_(n), o = n.getBoundingClientRect();
  return this._cloneMarkers(Uo(r), i), we(r, this._styles.cls(i, [], {
    x: o.top,
    y: o.left
  })), ze(t, r), we(r, "data-preview-support-element-id", e.id), r;
};
yo.prototype.addFrame = function(e, t) {
  var n = Me("rect", {
    class: "djs-resize-overlay",
    width: e.width,
    height: e.height,
    x: e.x,
    y: e.y
  });
  return ze(t, n), we(n, "data-preview-support-element-id", e.id), n;
};
yo.prototype._cloneMarkers = function(e, t = "djs-dragger") {
  var n = this;
  if (e.childNodes)
    for (var i = 0; i < e.childNodes.length; i++)
      n._cloneMarkers(e.childNodes[i], t);
  GT(e) && FT.forEach(function(r) {
    if (we(e, r)) {
      var o = zT(e, r, n._canvas.getContainer());
      n._cloneMarker(e, o, r, t);
    }
  });
};
yo.prototype._cloneMarker = function(e, t, n, i = "djs-dragger") {
  var r = t.id + "-" + i, o = this._clonedMarkers[r];
  if (!o) {
    o = f_(t);
    var a = r + "-clone";
    o.id = a, dt(o).add(i), this._clonedMarkers[r] = o;
    var c = Tt("defs", this._canvas._svg);
    c || (c = Me("defs"), ze(this._canvas._svg, c)), ze(c, o);
  }
  var l = WT(this._clonedMarkers[r].id);
  we(e, n, l);
};
function zT(e, t, n) {
  var i = VT(we(e, t));
  return Tt("marker#" + i, n || document);
}
function VT(e) {
  return e.match(/url\(['"]?#([^'"]*)['"]?\)/)[1];
}
function WT(e) {
  return "url(#" + e + ")";
}
function GT(e) {
  return HT.indexOf(e.nodeName) !== -1;
}
const es = {
  __init__: ["previewSupport"],
  previewSupport: ["type", yo]
}, ml = "complex-preview";
class hx {
  constructor(t, n, i) {
    this._canvas = t, this._graphicsFactory = n, this._previewSupport = i, this._markers = [];
  }
  /**
   * Create complex preview.
   *
   * @param {CreateOptions} options
   */
  create(t) {
    this.cleanUp();
    const {
      created: n = [],
      moved: i = [],
      removed: r = [],
      resized: o = []
    } = t, a = this._canvas.getLayer(ml);
    n.filter((c) => !UT(c)).forEach((c) => {
      let l;
      kt(c) ? (l = this._graphicsFactory._createContainer("connection", Me("g")), this._graphicsFactory.drawConnection(Uo(l), c)) : (l = this._graphicsFactory._createContainer("shape", Me("g")), this._graphicsFactory.drawShape(Uo(l), c), An(l, c.x, c.y)), this._previewSupport.addDragger(c, a, l);
    }), i.forEach(({ element: c, delta: l }) => {
      this._previewSupport.addDragger(c, a, void 0, "djs-dragging"), this._canvas.addMarker(c, "djs-element-hidden"), this._markers.push([c, "djs-element-hidden"]);
      const u = this._previewSupport.addDragger(c, a);
      kt(c) ? An(u, l.x, l.y) : An(u, c.x + l.x, c.y + l.y);
    }), r.forEach((c) => {
      this._previewSupport.addDragger(c, a, void 0, "djs-dragging"), this._canvas.addMarker(c, "djs-element-hidden"), this._markers.push([c, "djs-element-hidden"]);
    }), o.forEach(({ shape: c, bounds: l }) => {
      this._canvas.addMarker(c, "djs-hidden"), this._markers.push([c, "djs-hidden"]), this._previewSupport.addDragger(c, a, void 0, "djs-dragging");
      const u = this._graphicsFactory._createContainer("shape", Me("g"));
      this._graphicsFactory.drawShape(Uo(u), c, {
        width: l.width,
        height: l.height
      }), An(u, l.x, l.y), this._previewSupport.addDragger(c, a, u);
    });
  }
  cleanUp() {
    gu(this._canvas.getLayer(ml)), this._markers.forEach(([t, n]) => this._canvas.removeMarker(t, n)), this._markers = [], this._previewSupport.cleanUp();
  }
  show() {
    this._canvas.showLayer(ml);
  }
  hide() {
    this._canvas.hideLayer(ml);
  }
}
hx.$inject = [
  "canvas",
  "graphicsFactory",
  "previewSupport"
];
function UT(e) {
  return e.hidden;
}
const YT = {
  __depends__: [es],
  __init__: ["complexPreview"],
  complexPreview: ["type", hx]
};
var th = [
  "top",
  "bottom",
  "left",
  "right"
], yl = 10;
function nh(e, t) {
  le.call(this, e), this.postExecuted([
    "connection.create",
    "connection.layout",
    "connection.updateWaypoints"
  ], function(r) {
    var o = r.context, a = o.connection, c = a.source, l = a.target, u = o.hints || {};
    u.createElementsBehavior !== !1 && (n(c), n(l));
  }), this.postExecuted([
    "label.create"
  ], function(r) {
    var o = r.context, a = o.shape, c = o.hints || {};
    c.createElementsBehavior !== !1 && n(a.labelTarget);
  }), this.postExecuted([
    "elements.create"
  ], function(r) {
    var o = r.context, a = o.elements, c = o.hints || {};
    c.createElementsBehavior !== !1 && a.forEach(function(l) {
      n(l);
    });
  });
  function n(r) {
    if (Ru(r)) {
      var o = XT(r);
      o && i(r, o);
    }
  }
  function i(r, o) {
    var a = Fe(r), c = r.label, l = Fe(c);
    if (c.parent) {
      var u = Le(r), d;
      switch (o) {
        case "top":
          d = {
            x: a.x,
            y: u.top - yl - c.height / 2
          };
          break;
        case "left":
          d = {
            x: u.left - yl - c.width / 2,
            y: a.y
          };
          break;
        case "bottom":
          d = {
            x: a.x,
            y: u.bottom + yl + c.height / 2
          };
          break;
        case "right":
          d = {
            x: u.right + yl + c.width / 2,
            y: a.y
          };
          break;
      }
      var f = Vi(d, l);
      t.moveShape(c, f);
    }
  }
}
Pe(nh, le);
nh.$inject = [
  "eventBus",
  "modeling"
];
function KT(e) {
  var t = e.host, n = Fe(e), i = Ln(n, t), r;
  i.indexOf("-") >= 0 ? r = i.split("-") : r = [i];
  var o = th.filter(function(a) {
    return r.indexOf(a) === -1;
  });
  return o;
}
function qT(e) {
  var t = Fe(e), n = [].concat(
    e.incoming.map(function(i) {
      return i.waypoints[i.waypoints.length - 2];
    }),
    e.outgoing.map(function(i) {
      return i.waypoints[1];
    })
  ).map(function(i) {
    return mx(t, i);
  });
  return n;
}
function XT(e) {
  var t = Fe(e.label), n = Fe(e), i = mx(n, t);
  if (ZT(i)) {
    var r = qT(e);
    if (e.host) {
      var o = KT(e);
      r = r.concat(o);
    }
    var a = th.filter(function(c) {
      return r.indexOf(c) === -1;
    });
    if (a.indexOf(i) === -1)
      return a[0];
  }
}
function mx(e, t) {
  return Ln(t, e, 5);
}
function ZT(e) {
  return th.indexOf(e) !== -1;
}
function ih(e) {
  le.call(this, e), this.preExecute("shape.append", function(t) {
    var n = t.source, i = t.shape;
    t.position || (P(i, "bpmn:TextAnnotation") ? t.position = {
      x: n.x + n.width / 2 + 75,
      y: n.y - 50 - i.height / 2
    } : t.position = {
      x: n.x + n.width + 80 + i.width / 2,
      y: n.y + n.height / 2
    });
  }, !0);
}
Pe(ih, le);
ih.$inject = [
  "eventBus"
];
function rh(e, t) {
  e.invoke(le, this), this.postExecute("shape.move", function(n) {
    var i = n.newParent, r = n.shape, o = tt(r.incoming.concat(r.outgoing), function(a) {
      return P(a, "bpmn:Association");
    });
    z(o, function(a) {
      t.moveConnection(a, { x: 0, y: 0 }, i);
    });
  }, !0);
}
Pe(rh, le);
rh.$inject = [
  "injector",
  "modeling"
];
var nv = 500;
function Hu(e, t) {
  t.invoke(le, this), this._bpmnReplace = e;
  var n = this;
  this.postExecuted("elements.create", nv, function(i) {
    var r = i.elements;
    r = r.filter(function(o) {
      var a = o.host;
      return iv(o, a);
    }), r.length === 1 && r.map(function(o) {
      return r.indexOf(o);
    }).forEach(function(o) {
      var a = r[o];
      i.elements[o] = n._replaceShape(r[o], a);
    });
  }, !0), this.preExecute("elements.move", nv, function(i) {
    var r = i.shapes, o = i.newHost;
    if (r.length === 1) {
      var a = r[0];
      iv(a, o) && (i.shapes = [n._replaceShape(a, o)]);
    }
  }, !0);
}
Hu.$inject = [
  "bpmnReplace",
  "injector"
];
Pe(Hu, le);
Hu.prototype._replaceShape = function(e, t) {
  var n = JT(e), i = {
    type: "bpmn:BoundaryEvent",
    host: t
  };
  return n && (i.eventDefinitionType = n.$type), this._bpmnReplace.replaceElement(e, i, { layoutConnection: !1 });
};
function JT(e) {
  var t = he(e), n = t.eventDefinitions;
  return n && n[0];
}
function iv(e, t) {
  return !vt(e) && rt(e, ["bpmn:IntermediateThrowEvent", "bpmn:IntermediateCatchEvent"]) && !!t;
}
function oh(e, t) {
  le.call(this, e);
  function n(i) {
    return tt(i.attachers, function(r) {
      return P(r, "bpmn:BoundaryEvent");
    });
  }
  this.postExecute("connection.create", function(i) {
    var r = i.context.source, o = i.context.target, a = n(o);
    P(r, "bpmn:EventBasedGateway") && P(o, "bpmn:ReceiveTask") && a.length > 0 && t.removeElements(a);
  }), this.postExecute("connection.reconnect", function(i) {
    var r = i.context.oldSource, o = i.context.newSource;
    P(r, "bpmn:Gateway") && P(o, "bpmn:EventBasedGateway") && z(o.outgoing, function(a) {
      var c = a.target, l = n(c);
      P(c, "bpmn:ReceiveTask") && l.length > 0 && t.removeElements(l);
    });
  });
}
oh.$inject = [
  "eventBus",
  "modeling"
];
Pe(oh, le);
function ah(e, t, n) {
  le.call(this, e), this.preExecute("shape.replace", c, !0), this.postExecuted("shape.replace", l, !0), this.preExecute("connection.create", r, !0), this.postExecuted("connection.delete", i, !0), this.postExecuted("connection.reconnect", o, !0), this.postExecuted("element.updateProperties", a, !0);
  function i(w) {
    const B = w.source, N = w.target;
    Pa(B) && Ss(N) && d(N);
  }
  function r(w) {
    const B = w.connection, N = w.source, k = w.target;
    Pa(N) && gl(k) && (u(k), y(N, [B]));
  }
  function o(w) {
    const B = w.newTarget, N = w.oldSource, k = w.oldTarget;
    if (k !== B) {
      const A = N;
      Ss(k) && d(k), Pa(A) && gl(B) && u(B);
    }
  }
  function a(w) {
    const { element: B } = w;
    Ss(B) ? (f(B), g(B)) : gl(B) && _(B);
  }
  function c(w) {
    const {
      newData: B,
      oldShape: N
    } = w;
    if (Pa(w.oldShape) && B.eventDefinitionType !== "bpmn:CompensateEventDefinition" || B.type !== "bpmn:BoundaryEvent") {
      const k = N.outgoing.find(
        ({ target: A }) => Ss(A)
      );
      k && k.target && (w._connectionTarget = k.target);
    } else if (!Pa(w.oldShape) && B.eventDefinitionType === "bpmn:CompensateEventDefinition" && B.type === "bpmn:BoundaryEvent") {
      const k = N.outgoing.find(
        ({ target: A }) => gl(A)
      );
      k && k.target && (w._connectionTarget = k.target), x(N);
    }
  }
  function l(w) {
    const { _connectionTarget: B, newShape: N } = w;
    B && t.connect(N, B);
  }
  function u(w) {
    t.updateProperties(w, { isForCompensation: !0 });
  }
  function d(w) {
    t.updateProperties(w, { isForCompensation: void 0 });
  }
  function f(w) {
    for (const B of w.incoming)
      n.canConnect(B.source, w) || t.removeConnection(B);
    for (const B of w.outgoing)
      n.canConnect(w, B.target) || t.removeConnection(B);
  }
  function y(w, B) {
    w.outgoing.filter((A) => P(A, "bpmn:Association")).filter((A) => Ss(A.target) && !B.includes(A)).forEach((A) => t.removeConnection(A));
  }
  function g(w) {
    const B = w.attachers.slice();
    B.length && t.removeElements(B);
  }
  function _(w) {
    const B = w.incoming.filter(
      (N) => Pa(N.source)
    );
    t.removeElements(B);
  }
  function x(w) {
    const B = w.outgoing.filter(
      (N) => P(N, "bpmn:SequenceFlow")
    );
    t.removeElements(B);
  }
}
Pe(ah, le);
ah.$inject = [
  "eventBus",
  "modeling",
  "bpmnRules"
];
function Ss(e) {
  const t = he(e);
  return t && t.get("isForCompensation");
}
function Pa(e) {
  return e && P(e, "bpmn:BoundaryEvent") && sc(e, "bpmn:CompensateEventDefinition");
}
function gl(e) {
  return e && P(e, "bpmn:Activity") && !Bn(e);
}
function sh(e) {
  e.invoke(le, this), this.preExecute("shape.create", 1500, function(t) {
    var n = t.context, i = n.parent, r = n.shape;
    P(i, "bpmn:Lane") && !P(r, "bpmn:Lane") && (n.parent = Ys(i, "bpmn:Participant"));
  });
}
sh.$inject = ["injector"];
Pe(sh, le);
function ch(e, t) {
  le.call(this, e), this.preExecute("shape.create", function(n) {
    var i = n.context, r = i.shape;
    if (P(r, "bpmn:DataObjectReference") && r.type !== "label") {
      var o = t.create("bpmn:DataObject");
      r.businessObject.dataObjectRef = o;
    }
  });
}
ch.$inject = [
  "eventBus",
  "bpmnFactory"
];
Pe(ch, le);
var Jf = 20, Qf = 20, yx = 30, vl = 2e3;
function lh(e, t, n) {
  le.call(this, t), t.on([
    "create.start",
    "shape.move.start"
  ], vl, function(r) {
    var o = r.context, a = o.shape, c = e.getRootElement();
    if (!(!P(a, "bpmn:Participant") || !P(c, "bpmn:Process") || !c.children.length)) {
      var l = c.children.filter(function(f) {
        return !P(f, "bpmn:Group") && !vt(f) && !kt(f);
      });
      if (l.length) {
        var u = pn(l), d = QT(a, u);
        U(a, d), o.createConstraints = ek(a, u);
      }
    }
  }), t.on("create.start", vl, function(r) {
    var o = r.context, a = o.shape, c = e.getRootElement(), l = e.getGraphics(c);
    function u(d) {
      d.element = c, d.gfx = l;
    }
    P(a, "bpmn:Participant") && P(c, "bpmn:Process") && (t.on("element.hover", vl, u), t.once("create.cleanup", function() {
      t.off("element.hover", u);
    }));
  });
  function i() {
    var r = e.getRootElement();
    return P(r, "bpmn:Collaboration") ? r : n.makeCollaboration();
  }
  this.preExecute("elements.create", vl, function(r) {
    var o = r.elements, a = r.parent, c = tk(o), l;
    c && P(a, "bpmn:Process") && (r.parent = i(), l = r.hints = r.hints || {}, l.participant = c, l.process = a, l.processRef = he(c).get("processRef"));
  }, !0), this.preExecute("shape.create", function(r) {
    var o = r.parent, a = r.shape;
    P(a, "bpmn:Participant") && P(o, "bpmn:Process") && (r.parent = i(), r.process = o, r.processRef = he(a).get("processRef"));
  }, !0), this.execute("shape.create", function(r) {
    var o = r.hints || {}, a = r.process || o.process, c = r.shape, l = o.participant;
    a && (!l || c === l) && he(c).set("processRef", he(a));
  }, !0), this.revert("shape.create", function(r) {
    var o = r.hints || {}, a = r.process || o.process, c = r.processRef || o.processRef, l = r.shape, u = o.participant;
    a && (!u || l === u) && he(l).set("processRef", c);
  }, !0), this.postExecute("shape.create", function(r) {
    var o = r.hints || {}, a = r.process || r.hints.process, c = r.shape, l = o.participant;
    if (a) {
      var u = a.children.slice();
      l ? c === l && n.moveElements(u, { x: 0, y: 0 }, l) : n.moveElements(u, { x: 0, y: 0 }, c);
    }
  }, !0);
}
lh.$inject = [
  "canvas",
  "eventBus",
  "modeling"
];
Pe(lh, le);
function QT(e, t) {
  t = {
    width: t.width + Jf * 2 + yx,
    height: t.height + Qf * 2
  };
  var n = Math.max(e.width, t.width), i = Math.max(e.height, t.height);
  return {
    x: -n / 2,
    y: -i / 2,
    width: n,
    height: i
  };
}
function ek(e, t) {
  return t = Le(t), {
    bottom: t.top + e.height / 2 - Qf,
    left: t.right - e.width / 2 + Jf,
    top: t.bottom - e.height / 2 + Qf,
    right: t.left + e.width / 2 - Jf - yx
  };
}
function tk(e) {
  return gt(e, function(t) {
    return P(t, "bpmn:Participant");
  });
}
var rv = "__targetRef_placeholder";
function uh(e, t) {
  le.call(this, e), this.executed([
    "connection.create",
    "connection.delete",
    "connection.move",
    "connection.reconnect"
  ], ov(o)), this.reverted([
    "connection.create",
    "connection.delete",
    "connection.move",
    "connection.reconnect"
  ], ov(o));
  function n(a, c, l) {
    var u = a.get("dataInputAssociations");
    return gt(u, function(d) {
      return d !== l && d.targetRef === c;
    });
  }
  function i(a, c) {
    var l = a.get("properties"), u = gt(l, function(d) {
      return d.name === rv;
    });
    return !u && c && (u = t.create("bpmn:Property", {
      name: rv
    }), dn(l, u)), u;
  }
  function r(a, c) {
    var l = i(a);
    l && (n(a, l, c) || nn(a.get("properties"), l));
  }
  function o(a) {
    var c = a.context, l = c.connection, u = l.businessObject, d = l.target, f = d && d.businessObject, y = c.newTarget, g = y && y.businessObject, _ = c.oldTarget || c.target, x = _ && _.businessObject, w = l.businessObject, B;
    x && x !== f && r(x, u), g && g !== f && r(g, u), f ? (B = i(f, !0), w.targetRef = B) : w.targetRef = null;
  }
}
uh.$inject = [
  "eventBus",
  "bpmnFactory"
];
Pe(uh, le);
function ov(e) {
  return function(t) {
    var n = t.context, i = n.connection;
    if (P(i, "bpmn:DataInputAssociation"))
      return e(t);
  };
}
function zu(e) {
  this._bpmnUpdater = e;
}
zu.$inject = ["bpmnUpdater"];
zu.prototype.execute = function(e) {
  var t = e.dataStoreBo, n = e.dataStoreDi, i = e.newSemanticParent, r = e.newDiParent;
  return e.oldSemanticParent = t.$parent, e.oldDiParent = n.$parent, this._bpmnUpdater.updateSemanticParent(t, i), this._bpmnUpdater.updateDiParent(n, r), [];
};
zu.prototype.revert = function(e) {
  var t = e.dataStoreBo, n = e.dataStoreDi, i = e.oldSemanticParent, r = e.oldDiParent;
  return this._bpmnUpdater.updateSemanticParent(t, i), this._bpmnUpdater.updateDiParent(n, r), [];
};
function ph(e, t, n, i) {
  le.call(this, i), t.registerHandler("dataStore.updateContainment", zu);
  function r() {
    return n.filter(function(c) {
      return P(c, "bpmn:Participant") && he(c).processRef;
    })[0];
  }
  function o(c) {
    return c.children.filter(function(l) {
      return P(l, "bpmn:DataStoreReference") && !l.labelTarget;
    });
  }
  function a(c, l) {
    var u = c.businessObject || c;
    if (l = l || r(), l) {
      var d = l.businessObject || l;
      t.execute("dataStore.updateContainment", {
        dataStoreBo: u,
        dataStoreDi: bt(c),
        newSemanticParent: d.processRef || d,
        newDiParent: bt(l)
      });
    }
  }
  this.preExecute("shape.create", function(c) {
    var l = c.context, u = l.shape;
    P(u, "bpmn:DataStoreReference") && u.type !== "label" && (l.hints || (l.hints = {}), l.hints.autoResize = !1);
  }), this.preExecute("elements.move", function(c) {
    var l = c.context, u = l.shapes, d = u.filter(function(f) {
      return P(f, "bpmn:DataStoreReference");
    });
    d.length && (l.hints || (l.hints = {}), l.hints.autoResize = u.filter(function(f) {
      return !P(f, "bpmn:DataStoreReference");
    }));
  }), this.postExecute("shape.create", function(c) {
    var l = c.context, u = l.shape, d = u.parent;
    P(u, "bpmn:DataStoreReference") && u.type !== "label" && P(d, "bpmn:Collaboration") && a(u);
  }), this.postExecute("shape.move", function(c) {
    var l = c.context, u = l.shape, d = l.oldParent, f = u.parent;
    if (!P(d, "bpmn:Collaboration") && P(u, "bpmn:DataStoreReference") && u.type !== "label" && P(f, "bpmn:Collaboration")) {
      var y = P(d, "bpmn:Participant") ? d : ik(d, "bpmn:Participant");
      a(u, y);
    }
  }), this.postExecute("shape.delete", function(c) {
    var l = c.context, u = l.shape, d = e.getRootElement();
    rt(u, ["bpmn:Participant", "bpmn:SubProcess"]) && P(d, "bpmn:Collaboration") && o(d).filter(function(f) {
      return nk(f, u);
    }).forEach(function(f) {
      a(f);
    });
  }), this.postExecute("canvas.updateRoot", function(c) {
    var l = c.context, u = l.oldRoot, d = l.newRoot, f = o(u);
    f.forEach(function(y) {
      P(d, "bpmn:Process") && a(y, d);
    });
  });
}
ph.$inject = [
  "canvas",
  "commandStack",
  "elementRegistry",
  "eventBus"
];
Pe(ph, le);
function nk(e, t) {
  for (var n = e.businessObject || e, i = t.businessObject || t; n.$parent; ) {
    if (n.$parent === i.processRef || i)
      return !0;
    n = n.$parent;
  }
  return !1;
}
function ik(e, t) {
  for (; e.parent; ) {
    if (P(e.parent, t))
      return e.parent;
    e = e.parent;
  }
}
var lu = Math.max, uu = Math.min, rk = 20;
function gx(e, t) {
  return {
    top: e.top - t.top,
    right: e.right - t.right,
    bottom: e.bottom - t.bottom,
    left: e.left - t.left
  };
}
function ok(e, t, n) {
  var i = n.x, r = n.y, o = {
    x: e.x,
    y: e.y,
    width: e.width,
    height: e.height
  };
  return t.indexOf("n") !== -1 ? (o.y = e.y + r, o.height = e.height - r) : t.indexOf("s") !== -1 && (o.height = e.height + r), t.indexOf("e") !== -1 ? o.width = e.width + i : t.indexOf("w") !== -1 && (o.x = e.x + i, o.width = e.width - i), o;
}
function ak(e, t) {
  return {
    x: e.x + (t.left || 0),
    y: e.y + (t.top || 0),
    width: e.width - (t.left || 0) + (t.right || 0),
    height: e.height - (t.top || 0) + (t.bottom || 0)
  };
}
function _l(e, t, n) {
  var i = t[e], r = n.min && n.min[e], o = n.max && n.max[e];
  return je(r) && (i = (/top|left/.test(e) ? uu : lu)(i, r)), je(o) && (i = (/top|left/.test(e) ? lu : uu)(i, o)), i;
}
function sk(e, t) {
  if (!t)
    return e;
  var n = Le(e);
  return bu({
    top: _l("top", n, t),
    right: _l("right", n, t),
    bottom: _l("bottom", n, t),
    left: _l("left", n, t)
  });
}
function ck(e, t, n, i) {
  var r = Le(t), o = {
    top: /n/.test(e) ? r.bottom - n.height : r.top,
    left: /w/.test(e) ? r.right - n.width : r.left,
    bottom: /s/.test(e) ? r.top + n.height : r.bottom,
    right: /e/.test(e) ? r.left + n.width : r.right
  }, a = i ? Le(i) : o, c = {
    top: uu(o.top, a.top),
    left: uu(o.left, a.left),
    bottom: lu(o.bottom, a.bottom),
    right: lu(o.right, a.right)
  };
  return bu(c);
}
function Rs(e, t) {
  return typeof e < "u" ? e : rk;
}
function lk(e, t) {
  var n, i, r, o;
  return typeof t == "object" ? (n = Rs(t.left), i = Rs(t.right), r = Rs(t.top), o = Rs(t.bottom)) : n = i = r = o = Rs(t), {
    x: e.x - n,
    y: e.y - r,
    width: e.width + n + i,
    height: e.height + r + o
  };
}
function uk(e) {
  return !(e.waypoints || e.type === "label");
}
function vx(e, t) {
  var n;
  if (e.length === void 0 ? n = tt(e.children, uk) : n = e, n.length)
    return lk(pn(n), t);
}
var Xr = Math.abs;
function pk(e, t) {
  return gx(Le(t), Le(e));
}
var fk = [
  "bpmn:Participant",
  "bpmn:Process",
  "bpmn:SubProcess"
], Ci = 30;
function Vu(e, t) {
  return t = t || [], e.children.filter(function(n) {
    P(n, "bpmn:Lane") && (Vu(n, t), t.push(n));
  }), t;
}
function go(e) {
  return e.children.filter(function(t) {
    return P(t, "bpmn:Lane");
  });
}
function Ai(e) {
  return Ys(e, fk) || e;
}
function dk(e, t) {
  var n = Ai(e), i = P(n, "bpmn:Process") ? [] : [n], r = Vu(n, i), o = Le(e), a = Le(t), c = pk(e, t), l = [], u = Pn(e);
  return r.forEach(function(d) {
    if (d !== e) {
      var f = u ? 0 : c.top, y = u ? c.right : 0, g = u ? 0 : c.bottom, _ = u ? c.left : 0, x = Le(d);
      c.top && (Xr(x.bottom - o.top) < 10 && (g = a.top - x.bottom), Xr(x.top - o.top) < 5 && (f = a.top - x.top)), c.left && (Xr(x.right - o.left) < 10 && (y = a.left - x.right), Xr(x.left - o.left) < 5 && (_ = a.left - x.left)), c.bottom && (Xr(x.top - o.bottom) < 10 && (f = a.bottom - x.top), Xr(x.bottom - o.bottom) < 5 && (g = a.bottom - x.bottom)), c.right && (Xr(x.left - o.right) < 10 && (_ = a.right - x.left), Xr(x.right - o.right) < 5 && (y = a.right - x.right)), (f || y || g || _) && l.push({
        shape: d,
        newBounds: ak(d, {
          top: f,
          right: y,
          bottom: g,
          left: _
        })
      });
    }
  }), l;
}
var hk = 500;
function fh(e, t) {
  le.call(this, e);
  function n(i, r) {
    var o = Pn(i), a = go(r), c = [], l = [], u = [], d = [];
    if (ta(a, function(w) {
      return o ? w.y > i.y ? l.push(w) : c.push(w) : w.x > i.x ? d.push(w) : u.push(w), w.children;
    }), !!a.length) {
      var f;
      o ? l.length && c.length ? f = i.height / 2 : f = i.height : d.length && u.length ? f = i.width / 2 : f = i.width;
      var y, g, _, x;
      c.length && (y = t.calculateAdjustments(
        c,
        "y",
        f,
        i.y - 10
      ), t.makeSpace(
        y.movingShapes,
        y.resizingShapes,
        { x: 0, y: f },
        "s"
      )), l.length && (g = t.calculateAdjustments(
        l,
        "y",
        -f,
        i.y + i.height + 10
      ), t.makeSpace(
        g.movingShapes,
        g.resizingShapes,
        { x: 0, y: -f },
        "n"
      )), u.length && (_ = t.calculateAdjustments(
        u,
        "x",
        f,
        i.x - 10
      ), t.makeSpace(
        _.movingShapes,
        _.resizingShapes,
        { x: f, y: 0 },
        "e"
      )), d.length && (x = t.calculateAdjustments(
        d,
        "x",
        -f,
        i.x + i.width + 10
      ), t.makeSpace(
        x.movingShapes,
        x.resizingShapes,
        { x: -f, y: 0 },
        "w"
      ));
    }
  }
  this.postExecuted("shape.delete", hk, function(i) {
    var r = i.context, o = r.hints, a = r.shape, c = r.oldParent;
    P(a, "bpmn:Lane") && (o && o.nested || n(a, c));
  });
}
fh.$inject = [
  "eventBus",
  "spaceTool"
];
Pe(fh, le);
var av = 500;
function Wu(e, t) {
  t.invoke(le, this), this._bpmnReplace = e;
  var n = this;
  this.postExecuted("elements.create", av, function(i) {
    var r = i.elements;
    r.filter(function(o) {
      var a = o.host;
      return sv(o, a);
    }).map(function(o) {
      return r.indexOf(o);
    }).forEach(function(o) {
      i.elements[o] = n._replaceShape(r[o]);
    });
  }, !0), this.preExecute("elements.move", av, function(i) {
    var r = i.shapes, o = i.newHost;
    r.forEach(function(a, c) {
      var l = a.host;
      sv(a, yk(r, l) ? l : o) && (r[c] = n._replaceShape(a));
    });
  }, !0);
}
Wu.$inject = [
  "bpmnReplace",
  "injector"
];
Pe(Wu, le);
Wu.prototype._replaceShape = function(e) {
  var t = mk(e), n;
  return t ? n = {
    type: "bpmn:IntermediateCatchEvent",
    eventDefinitionType: t.$type
  } : n = {
    type: "bpmn:IntermediateThrowEvent"
  }, this._bpmnReplace.replaceElement(e, n, { layoutConnection: !1 });
};
function mk(e) {
  var t = he(e), n = t.eventDefinitions;
  return n && n[0];
}
function sv(e, t) {
  return !vt(e) && P(e, "bpmn:BoundaryEvent") && !t;
}
function yk(e, t) {
  return e.indexOf(t) !== -1;
}
function dh(e, t, n) {
  le.call(this, e);
  function i(r, o, a) {
    var c = o.waypoints, l, u, d, f, y, g, _, x = r.outgoing.slice(), w = r.incoming.slice(), B;
    je(a.width) ? B = Fe(a) : B = a;
    var N = Yf(c, B);
    if (N) {
      if (l = c.slice(0, N.index), u = c.slice(N.index + (N.bendpoint ? 1 : 0)), !l.length || !u.length)
        return;
      d = N.bendpoint ? c[N.index] : B, (l.length === 1 || !cv(r, l[l.length - 1])) && l.push(lv(d)), (u.length === 1 || !cv(r, u[0])) && u.unshift(lv(d));
    }
    f = o.source, y = o.target, t.canConnect(f, r, o) && (n.reconnectEnd(o, r, l || B), g = o), t.canConnect(r, y, o) && (g ? _ = n.connect(
      r,
      y,
      { type: o.type, waypoints: u }
    ) : (n.reconnectStart(o, r, u || B), _ = o));
    var k = [].concat(
      g && tt(w, function(A) {
        return A.source === g.source;
      }) || [],
      _ && tt(x, function(A) {
        return A.target === _.target;
      }) || []
    );
    k.length && n.removeElements(k);
  }
  this.preExecute("elements.move", function(r) {
    var o = r.newParent, a = r.shapes, c = r.delta, l = a[0];
    if (!(!l || !o)) {
      o && o.waypoints && (r.newParent = o = o.parent);
      var u = Fe(l), d = {
        x: u.x + c.x,
        y: u.y + c.y
      }, f = gt(o.children, function(y) {
        var g = t.canInsert(a, y);
        return g && Yf(y.waypoints, d);
      });
      f && (r.targetFlow = f, r.position = d);
    }
  }, !0), this.postExecuted("elements.move", function(r) {
    var o = r.shapes, a = r.targetFlow, c = r.position;
    a && i(o[0], a, c);
  }, !0), this.preExecute("shape.create", function(r) {
    var o = r.parent, a = r.shape;
    t.canInsert(a, o) && (r.targetFlow = o, r.parent = o.parent);
  }, !0), this.postExecuted("shape.create", function(r) {
    var o = r.shape, a = r.targetFlow, c = r.position;
    a && i(o, a, c);
  }, !0);
}
Pe(dh, le);
dh.$inject = [
  "eventBus",
  "bpmnRules",
  "modeling"
];
function cv(e, t) {
  var n = t.x, i = t.y;
  return n >= e.x && n <= e.x + e.width && i >= e.y && i <= e.y + e.height;
}
function lv(e) {
  return U({}, e);
}
function hh(e, t) {
  le.call(this, e), this.preExecuted("connection.create", function(n) {
    var i = n.context, r = i.connection, o = i.source, a = i.target, c = i.hints;
    if (!(c && c.createElementsBehavior === !1) && Ta(r)) {
      var l = [];
      P(o, "bpmn:EventBasedGateway") ? l = a.incoming.filter(
        (u) => u !== r && Ta(u)
      ) : l = a.incoming.filter(
        (u) => u !== r && Ta(u) && P(u.source, "bpmn:EventBasedGateway")
      ), l.forEach(function(u) {
        t.removeConnection(u);
      });
    }
  }), this.preExecuted("shape.replace", function(n) {
    var i = n.context, r = i.newShape;
    if (P(r, "bpmn:EventBasedGateway")) {
      var o = r.outgoing.filter(Ta).reduce(function(a, c) {
        return a.includes(c.target) ? a : a.concat(c.target);
      }, []);
      o.forEach(function(a) {
        a.incoming.filter(Ta).forEach(function(c) {
          const l = a.incoming.filter(Ta).filter(function(u) {
            return u.source === r;
          });
          (c.source !== r || l.length > 1) && t.removeConnection(c);
        });
      });
    }
  });
}
hh.$inject = [
  "eventBus",
  "modeling"
];
Pe(hh, le);
function Ta(e) {
  return P(e, "bpmn:SequenceFlow");
}
var bl = 1500, uv = 2e3;
function _x(e, t, n) {
  t.on([
    "create.hover",
    "create.move",
    "create.out",
    "create.end",
    "shape.move.hover",
    "shape.move.move",
    "shape.move.out",
    "shape.move.end"
  ], bl, function(i) {
    var r = i.context, o = r.shape || i.shape, a = i.hover;
    P(a, "bpmn:Lane") && !rt(o, ["bpmn:Lane", "bpmn:Participant"]) && (i.hover = Ai(a), i.hoverGfx = e.getGraphics(i.hover));
    var c = n.getRootElement();
    a !== c && (o.labelTarget || rt(o, ["bpmn:Group", "bpmn:TextAnnotation"])) && (i.hover = c, i.hoverGfx = e.getGraphics(i.hover));
  }), t.on([
    "connect.hover",
    "connect.out",
    "connect.end",
    "connect.cleanup",
    "global-connect.hover",
    "global-connect.out",
    "global-connect.end",
    "global-connect.cleanup"
  ], bl, function(i) {
    var r = i.hover;
    P(r, "bpmn:Lane") && (i.hover = Ai(r) || r, i.hoverGfx = e.getGraphics(i.hover));
  }), t.on([
    "bendpoint.move.hover"
  ], bl, function(i) {
    var r = i.context, o = i.hover, a = r.type;
    P(o, "bpmn:Lane") && /reconnect/.test(a) && (i.hover = Ai(o) || o, i.hoverGfx = e.getGraphics(i.hover));
  }), t.on([
    "connect.start"
  ], bl, function(i) {
    var r = i.context, o = r.start;
    P(o, "bpmn:Lane") && (r.start = Ai(o) || o);
  }), t.on("shape.move.start", uv, function(i) {
    var r = i.shape;
    P(r, "bpmn:Lane") && (i.shape = Ai(r) || r);
  }), t.on("spaceTool.move", uv, function(i) {
    var r = i.hover;
    r && P(r, "bpmn:Lane") && (i.hover = Ai(r));
  });
}
_x.$inject = [
  "elementRegistry",
  "eventBus",
  "canvas"
];
function gk(e) {
  return e.create("bpmn:Category");
}
function vk(e) {
  return e.create("bpmn:CategoryValue");
}
function _k(e, t, n) {
  return dn(t.get("categoryValue"), e), e.$parent = t, dn(n.get("rootElements"), t), t.$parent = n, e;
}
function bk(e) {
  var t = e.$parent;
  return t && (nn(t.get("categoryValue"), e), e.$parent = null), e;
}
function xk(e) {
  var t = e.$parent;
  return t && (nn(t.get("rootElements"), e), e.$parent = null), e;
}
var pv = 770;
function mh(e, t, n, i, r, o) {
  r.invoke(le, this);
  function a() {
    return n.filter(function(_) {
      return P(_, "bpmn:Group");
    });
  }
  function c(_, x) {
    return _.some(function(w) {
      var B = he(w), N = B.categoryValueRef && B.categoryValueRef.$parent;
      return N === x;
    });
  }
  function l(_, x) {
    return _.some(function(w) {
      var B = he(w);
      return B.categoryValueRef === x;
    });
  }
  function u(_, x, w) {
    var B = a().filter(function(N) {
      return N.businessObject !== w;
    });
    x && !c(B, x) && xk(x), _ && !l(B, _) && bk(_);
  }
  function d(_, x) {
    return _k(_, x, t.getDefinitions());
  }
  function f(_, x) {
    var w = he(_), B = w.categoryValueRef;
    B || (B = w.categoryValueRef = x.categoryValue = x.categoryValue || vk(e));
    var N = B.$parent;
    N || (N = B.$parent = x.category = x.category || gk(e)), d(B, N, t.getDefinitions());
  }
  function y(_, x) {
    var w = x.category, B = x.categoryValue, N = he(_);
    B ? (N.categoryValueRef = null, u(B, w, N)) : u(null, N.categoryValueRef.$parent, N);
  }
  this.execute("label.create", function(_) {
    var x = _.context, w = x.labelTarget;
    P(w, "bpmn:Group") && f(w, x);
  }), this.revert("label.create", function(_) {
    var x = _.context, w = x.labelTarget;
    P(w, "bpmn:Group") && y(w, x);
  }), this.execute("shape.delete", function(_) {
    var x = _.context, w = x.shape, B = he(w);
    if (!(!P(w, "bpmn:Group") || w.labelTarget)) {
      var N = x.categoryValue = B.categoryValueRef, k;
      N && (k = x.category = N.$parent, u(N, k, B), B.categoryValueRef = null);
    }
  }), this.reverted("shape.delete", function(_) {
    var x = _.context, w = x.shape;
    if (!(!P(w, "bpmn:Group") || w.labelTarget)) {
      var B = x.category, N = x.categoryValue, k = he(w);
      N && (k.categoryValueRef = N, d(N, B));
    }
  }), this.execute("shape.create", function(_) {
    var x = _.context, w = x.shape;
    !P(w, "bpmn:Group") || w.labelTarget || he(w).categoryValueRef && f(w, x);
  }), this.reverted("shape.create", function(_) {
    var x = _.context, w = x.shape;
    !P(w, "bpmn:Group") || w.labelTarget || he(w).categoryValueRef && y(w, x);
  });
  function g(_, x) {
    var w = e.create(_.$type);
    return o.copyElement(_, w, null, x);
  }
  i.on("copyPaste.copyElement", pv, function(_) {
    var x = _.descriptor, w = _.element;
    if (!(!P(w, "bpmn:Group") || w.labelTarget)) {
      var B = he(w);
      if (B.categoryValueRef) {
        var N = B.categoryValueRef;
        x.categoryValue = g(N, !0), N.$parent && (x.category = g(N.$parent, !0));
      }
    }
  }), i.on("copyPaste.pasteElement", pv, function(_) {
    var x = _.descriptor, w = x.businessObject, B = x.categoryValue, N = x.category;
    B && (B = w.categoryValueRef = g(B)), N && (B.$parent = g(N)), delete x.category, delete x.categoryValue;
  });
}
mh.$inject = [
  "bpmnFactory",
  "bpmnjs",
  "elementRegistry",
  "eventBus",
  "injector",
  "moddleCopy"
];
Pe(mh, le);
function ed(e, t, n, i) {
  var r, o, a, c, l;
  return r = (i.y - n.y) * (t.x - e.x) - (i.x - n.x) * (t.y - e.y), r == 0 ? null : (o = e.y - n.y, a = e.x - n.x, l = (i.x - n.x) * o - (i.y - n.y) * a, c = l / r, {
    x: Math.round(e.x + c * (t.x - e.x)),
    y: Math.round(e.y + c * (t.y - e.y))
  });
}
function bx(e) {
  function t(i, r, o) {
    var a = {
      x: o.x,
      y: o.y - 50
    }, c = {
      x: o.x - 50,
      y: o.y
    }, l = ed(i, r, o, a), u = ed(i, r, o, c), d;
    l && u ? fv(l, o) > fv(u, o) ? d = u : d = l : d = l || u, i.original = d;
  }
  function n(i) {
    var r = i.waypoints;
    t(
      r[0],
      r[1],
      Fe(i.source)
    ), t(
      r[r.length - 1],
      r[r.length - 2],
      Fe(i.target)
    );
  }
  e.on("bpmnElement.added", function(i) {
    var r = i.element;
    r.waypoints && n(r);
  });
}
bx.$inject = [
  "eventBus"
];
function fv(e, t) {
  return Math.sqrt(Math.pow(e.x - t.x, 2) + Math.pow(e.y - t.y, 2));
}
function yh(e) {
  le.call(this, e);
  var t = [
    "bpmn:Participant",
    "bpmn:Lane"
  ];
  this.executed(["shape.move", "shape.create", "shape.resize"], function(n) {
    var i = n.context.shape, r = he(i), o = bt(i);
    if (rt(r, t)) {
      var a = o.get("isHorizontal");
      a === void 0 && (a = !0), o.set("isHorizontal", a);
    }
  });
}
yh.$inject = ["eventBus"];
Pe(yh, le);
var xx = Math.sqrt, Ex = Math.min, Ek = Math.max, dv = Math.abs;
function hv(e) {
  return Math.pow(e, 2);
}
function Cs(e, t) {
  return xx(hv(e.x - t.x) + hv(e.y - t.y));
}
function wk(e, t) {
  var n = 0, i, r, o, a, c, l, u, d, f, y, g;
  for (n = 0; n < t.length - 1; n++) {
    if (i = t[n], r = t[n + 1], yv(i, r) ? u = [i] : (o = Cs(e, i), a = Cs(e, r), l = Ex(o, a), u = Sk(i, r, e, l)), u.length < 1)
      throw new Error("expected between [1, 2] circle -> line intersections");
    u.length === 1 && (d = {
      type: "bendpoint",
      position: u[0],
      segmentIndex: n,
      bendpointIndex: yv(i, u[0]) ? n : n + 1
    }), u.length === 2 && (c = Ck(u[0], u[1]), d = {
      type: "segment",
      position: c,
      segmentIndex: n,
      relativeLocation: Cs(i, c) / Cs(i, r)
    }), f = Cs(d.position, e), (!g || y > f) && (g = d, y = f);
  }
  return g;
}
function Sk(e, t, n, i) {
  var r = t.x - e.x, o = t.y - e.y, a = n.x - e.x, c = n.y - e.y, l = r * r + o * o, u = r * a + o * c, d = a * a + c * c - i * i, f = u / l, y = d / l, g = f * f - y;
  if (g < 0 && g > -1e-6 && (g = 0), g < 0)
    return [];
  var _ = xx(g), x = -f + _, w = -f - _, B = {
    x: e.x - r * x,
    y: e.y - o * x
  };
  if (g === 0)
    return [B];
  var N = {
    x: e.x - r * w,
    y: e.y - o * w
  };
  return [B, N].filter(function(k) {
    return Rk(k, e, t);
  });
}
function Rk(e, t, n) {
  return mv(e.x, t.x, n.x) && mv(e.y, t.y, n.y);
}
function mv(e, t, n) {
  return e >= Ex(t, n) - pu && e <= Ek(t, n) + pu;
}
function Ck(e, t) {
  return {
    x: (e.x + t.x) / 2,
    y: (e.y + t.y) / 2
  };
}
var pu = 0.1;
function yv(e, t) {
  return dv(e.x - t.x) <= pu && dv(e.y - t.y) <= pu;
}
function Ak(e, t, n, i) {
  var r = n.segmentIndex, o = t.length - e.length;
  if (i.segmentMove) {
    var a = i.segmentMove.segmentStartIndex, c = i.segmentMove.newSegmentStartIndex;
    return r === a ? c : r >= c ? r + o < c ? c : r + o : r;
  }
  if (i.bendpointMove) {
    var l = i.bendpointMove.insert, u = i.bendpointMove.bendpointIndex, d;
    if (o === 0)
      return r;
    if (r >= u && (d = l ? r + 1 : r - 1), r < u && (d = r, l && n.type !== "bendpoint" && u - 1 === r)) {
      var f = Sx(t, u);
      f < n.relativeLocation && d++;
    }
    return d;
  }
  return o === 0 ? r : i.connectionStart && r === 0 ? 0 : i.connectionEnd && r === e.length - 2 ? t.length - 2 : Math.floor((t.length - 2) / 2);
}
function wx(e, t, n, i) {
  var r = 0, o = 0, a = {
    point: e,
    delta: { x: 0, y: 0 }
  }, c = wk(e, n), l = c.segmentIndex, u = Ak(n, t, c, i);
  if (u < 0 || u > t.length - 2 || u === null)
    return a;
  var d = gv(n, l), f = gv(t, u), y = c.position, g = Tk(d, y), _ = Pk(d, f);
  if (c.type === "bendpoint") {
    var x = t.length - n.length, w = c.bendpointIndex, B = n[w];
    if (t.indexOf(B) !== -1)
      return a;
    if (x === 0) {
      var N = t[w];
      return r = N.x - c.position.x, o = N.y - c.position.y, {
        delta: {
          x: r,
          y: o
        },
        point: {
          x: e.x + r,
          y: e.y + o
        }
      };
    }
    x < 0 && w !== 0 && w < n.length - 1 && (g = Sx(n, w));
  }
  var k = {
    x: (f[1].x - f[0].x) * g + f[0].x,
    y: (f[1].y - f[0].y) * g + f[0].y
  }, A = _T({
    x: e.x - y.x,
    y: e.y - y.y
  }, _);
  return r = k.x + A.x - e.x, o = k.y + A.y - e.y, {
    point: Pr(k),
    delta: Pr({
      x: r,
      y: o
    })
  };
}
function Sx(e, t) {
  var n = su(e[t - 1], e[t]), i = su(e[t], e[t + 1]), r = n / (n + i);
  return r;
}
function Pk(e, t) {
  var n = Hg(e), i = Hg(t);
  return i - n;
}
function gv(e, t) {
  return [e[t], e[t + 1]];
}
function Tk(e, t) {
  var n = su(e[0], e[1]), i = su(e[0], t);
  return n === 0 ? 0 : i / n;
}
function kk(e, t, n, i) {
  var r = Fe(e);
  return wx(r, t, n, i).delta;
}
function uc(e, t, n) {
  var i = Ls(t), r = Ls(n), o = Vi(e, i), a = {
    x: o.x * (n.width / t.width),
    y: o.y * (n.height / t.height)
  };
  return Pr({
    x: r.x + a.x,
    y: r.y + a.y
  });
}
function vv(e, t, n) {
  var i = Ls(e), r = Ls(t), o = Ls(n), a = Vi(e, i), c = Vi(i, r), l = Mk(i, t, n);
  if (l)
    return l;
  var u = {
    x: c.x * (n.width / t.width),
    y: c.y * (n.height / t.height)
  }, d = {
    x: o.x + u.x,
    y: o.y + u.y
  };
  return Pr({
    x: d.x + a.x - e.x,
    y: d.y + a.y - e.y
  });
}
function Mk(e, t, n) {
  var i = Le(t), r = Le(n);
  if (Dk(i, r))
    return null;
  var o = Ln(t, e), a, c, l;
  if (o === "top")
    a = {
      x: 0,
      y: r.bottom - i.bottom
    };
  else if (o === "bottom")
    a = {
      x: 0,
      y: r.top - i.top
    };
  else if (o === "right")
    a = {
      x: r.left - i.left,
      y: 0
    };
  else if (o === "left")
    a = {
      x: r.right - i.right,
      y: 0
    };
  else
    return null;
  return c = {
    x: e.x + a.x,
    y: e.y + a.y
  }, l = Ln(n, c), l !== o ? null : a;
}
function Dk(e, t) {
  return Ok(e, t) || Nk(e, t);
}
function Ok(e, t) {
  return e.right !== t.right && e.left !== t.left;
}
function Nk(e, t) {
  return e.top !== t.top && e.bottom !== t.bottom;
}
var _v = "name", bv = "text";
function gh(e, t, n, i) {
  le.call(this, e), this.postExecute("element.updateProperties", r), this.postExecute("element.updateModdleProperties", (a) => {
    he(a.context.element) === a.context.moddleElement && r(a);
  });
  function r(a) {
    var c = a.context, l = c.element, u = c.properties;
    if (_v in u && t.updateLabel(l, u[_v]), bv in u && P(l, "bpmn:TextAnnotation")) {
      var d = i.getTextAnnotationBounds(
        {
          x: l.x,
          y: l.y,
          width: l.width,
          height: l.height
        },
        u[bv] || ""
      );
      t.updateLabel(l, u.text, d);
    }
  }
  this.postExecute(["shape.create", "connection.create"], function(a) {
    var c = a.context, l = c.hints || {};
    if (l.createElementsBehavior !== !1) {
      var u = c.shape || c.connection;
      vt(u) || !Xo(u) || ki(u) && t.updateLabel(u, ki(u));
    }
  }), this.postExecute("shape.delete", function(a) {
    var c = a.context, l = c.labelTarget, u = c.hints || {};
    l && u.unsetLabel !== !1 && t.updateLabel(l, null, null, { removeShape: !1 });
  });
  function o(a) {
    var c = a.context, l = c.connection, u = l.label, d = U({}, c.hints), f = c.newWaypoints || l.waypoints, y = c.oldWaypoints;
    return typeof d.startChanged > "u" && (d.startChanged = !!d.connectionStart), typeof d.endChanged > "u" && (d.endChanged = !!d.connectionEnd), kk(u, f, y, d);
  }
  this.postExecute([
    "connection.layout",
    "connection.updateWaypoints"
  ], function(a) {
    var c = a.context, l = c.hints || {};
    if (l.labelBehavior !== !1) {
      var u = c.connection, d = u.label, f;
      !d || !d.parent || (f = o(a), t.moveShape(d, f));
    }
  }), this.postExecute(["shape.replace"], function(a) {
    var c = a.context, l = c.newShape, u = c.oldShape, d = he(l);
    d && Xo(d) && u.label && l.label && (l.label.x = u.label.x, l.label.y = u.label.y);
  }), this.postExecute("shape.resize", function(a) {
    var c = a.context, l = c.shape, u = c.newBounds, d = c.oldBounds;
    if (Ru(l)) {
      var f = l.label, y = Fe(f), g = Ik(d), _ = Lk(y, g), x = Bk(_, d, u);
      t.moveShape(f, x);
    }
  });
}
Pe(gh, le);
gh.$inject = [
  "eventBus",
  "modeling",
  "bpmnFactory",
  "textRenderer"
];
function Bk(e, t, n) {
  var i = uc(e, t, n);
  return Pr(Vi(i, e));
}
function Lk(e, t) {
  if (t.length) {
    var n = $k(e, t);
    return Zd(e, n);
  }
}
function Ik(e) {
  return [
    [
      // top
      {
        x: e.x,
        y: e.y
      },
      {
        x: e.x + (e.width || 0),
        y: e.y
      }
    ],
    [
      // right
      {
        x: e.x + (e.width || 0),
        y: e.y
      },
      {
        x: e.x + (e.width || 0),
        y: e.y + (e.height || 0)
      }
    ],
    [
      // bottom
      {
        x: e.x,
        y: e.y + (e.height || 0)
      },
      {
        x: e.x + (e.width || 0),
        y: e.y + (e.height || 0)
      }
    ],
    [
      // left
      {
        x: e.x,
        y: e.y
      },
      {
        x: e.x,
        y: e.y + (e.height || 0)
      }
    ]
  ];
}
function $k(e, t) {
  var n = t.map(function(r) {
    return {
      line: r,
      distance: ex(e, r)
    };
  }), i = Gi(n, "distance");
  return i[0].line;
}
function jk(e, t, n, i) {
  return wx(e, t, n, i).point;
}
function vh(e, t) {
  le.call(this, e);
  function n(i, r) {
    var o = i.context, a = o.connection, c = U({}, o.hints), l = o.newWaypoints || a.waypoints, u = o.oldWaypoints;
    return typeof c.startChanged > "u" && (c.startChanged = !!c.connectionStart), typeof c.endChanged > "u" && (c.endChanged = !!c.connectionEnd), jk(r, l, u, c);
  }
  this.postExecute([
    "connection.layout",
    "connection.updateWaypoints"
  ], function(i) {
    var r = i.context, o = r.connection, a = o.outgoing, c = o.incoming;
    c.forEach(function(l) {
      var u = l.waypoints[l.waypoints.length - 1], d = n(i, u), f = [].concat(l.waypoints.slice(0, -1), [d]);
      t.updateWaypoints(l, f);
    }), a.forEach(function(l) {
      var u = l.waypoints[0], d = n(i, u), f = [].concat([d], l.waypoints.slice(1));
      t.updateWaypoints(l, f);
    });
  }), this.postExecute([
    "connection.move"
  ], function(i) {
    var r = i.context, o = r.connection, a = o.outgoing, c = o.incoming, l = r.delta;
    c.forEach(function(u) {
      var d = u.waypoints[u.waypoints.length - 1], f = {
        x: d.x + l.x,
        y: d.y + l.y
      }, y = [].concat(u.waypoints.slice(0, -1), [f]);
      t.updateWaypoints(u, y);
    }), a.forEach(function(u) {
      var d = u.waypoints[0], f = {
        x: d.x + l.x,
        y: d.y + l.y
      }, y = [].concat([f], u.waypoints.slice(1));
      t.updateWaypoints(u, y);
    });
  });
}
Pe(vh, le);
vh.$inject = [
  "eventBus",
  "modeling"
];
function Gu(e, t, n) {
  var i = Yu(e), r = Cx(i, t), o = i[0];
  return r.length ? r[r.length - 1] : uc(o.original || o, n, t);
}
function Uu(e, t, n) {
  var i = Yu(e), r = Cx(i, t), o = i[i.length - 1];
  return r.length ? r[0] : uc(o.original || o, n, t);
}
function _h(e, t, n) {
  var i = Yu(e), r = Rx(t, n), o = i[0];
  return uc(o.original || o, r, t);
}
function bh(e, t, n) {
  var i = Yu(e), r = Rx(t, n), o = i[i.length - 1];
  return uc(o.original || o, r, t);
}
function Rx(e, t) {
  return {
    x: e.x - t.x,
    y: e.y - t.y,
    width: e.width,
    height: e.height
  };
}
function Yu(e) {
  var t = e.waypoints;
  if (!t.length)
    throw new Error("connection#" + e.id + ": no waypoints");
  return t;
}
function Cx(e, t) {
  var n = gn(e, Hk);
  return tt(n, function(i) {
    return Fk(i, t);
  });
}
function Fk(e, t) {
  return Ln(t, e, 1) === "intersect";
}
function Hk(e) {
  return e.original || e;
}
function xh(e, t) {
  le.call(this, e), this.postExecute("shape.replace", function(n) {
    var i = n.oldShape, r = n.newShape;
    if (zk(i, r)) {
      var o = Vk(i);
      o.incoming.forEach(function(a) {
        var c = Uu(a, r, i);
        t.reconnectEnd(a, r, c);
      }), o.outgoing.forEach(function(a) {
        var c = Gu(a, r, i);
        t.reconnectStart(a, r, c);
      });
    }
  }, !0);
}
xh.$inject = ["eventBus", "modeling"];
Pe(xh, le);
function zk(e, t) {
  return P(e, "bpmn:Participant") && pt(e) && P(t, "bpmn:Participant") && !pt(t);
}
function Vk(e) {
  var t = ec([e], !1), n = [], i = [];
  return t.forEach(function(r) {
    r !== e && (r.incoming.forEach(function(o) {
      P(o, "bpmn:MessageFlow") && n.push(o);
    }), r.outgoing.forEach(function(o) {
      P(o, "bpmn:MessageFlow") && i.push(o);
    }));
  }, []), {
    incoming: n,
    outgoing: i
  };
}
const Wk = [
  "bpmn:MessageEventDefinition",
  "bpmn:TimerEventDefinition",
  "bpmn:EscalationEventDefinition",
  "bpmn:ConditionalEventDefinition",
  "bpmn:SignalEventDefinition"
];
function Ax(e) {
  const t = he(e);
  if (!P(t, "bpmn:BoundaryEvent") && !(P(t, "bpmn:StartEvent") && Bn(t.$parent)))
    return !1;
  const n = t.get("eventDefinitions");
  return !n || !n.length ? !1 : Wk.some((i) => P(n[0], i));
}
function Px(e) {
  return P(e, "bpmn:BoundaryEvent") ? "cancelActivity" : "isInterrupting";
}
function Eh(e, t) {
  e.invoke(le, this), this.postExecuted("shape.replace", function(n) {
    const i = n.context.oldShape, r = n.context.newShape, o = n.context.hints;
    if (!Ax(r))
      return;
    const a = Px(r);
    if (o.targetElement && o.targetElement[a] !== void 0)
      return;
    const l = he(i).get(a), u = he(r).get(a);
    l !== u && t.updateProperties(r, {
      [a]: l
    });
  });
}
Eh.$inject = ["injector", "modeling"];
Pe(Eh, le);
function wh(e, t) {
  le.call(this, e), this.preExecute("shape.resize", function(n) {
    var i = n.shape, r = bt(i), o = r && r.get("label"), a = o && o.get("bounds");
    a && t.updateModdleProperties(i, o, {
      bounds: void 0
    });
  }, !0);
}
Pe(wh, le);
wh.$inject = [
  "eventBus",
  "modeling"
];
function Sh(e, t, n) {
  le.call(this, e), this.preExecute("shape.delete", function(i) {
    var r = i.context.shape;
    if (!(r.incoming.length !== 1 || r.outgoing.length !== 1)) {
      var o = r.incoming[0], a = r.outgoing[0];
      if (!(!P(o, "bpmn:SequenceFlow") || !P(a, "bpmn:SequenceFlow")) && t.canConnect(o.source, a.target, o)) {
        var c = Gk(o.waypoints, a.waypoints);
        n.reconnectEnd(o, a.target, c);
      }
    }
  });
}
Pe(Sh, le);
Sh.$inject = [
  "eventBus",
  "bpmnRules",
  "modeling"
];
function ka(e) {
  return e.original || e;
}
function Gk(e, t) {
  var n = ed(
    ka(e[e.length - 2]),
    ka(e[e.length - 1]),
    ka(t[1]),
    ka(t[0])
  );
  return n ? [].concat(
    e.slice(0, e.length - 1),
    [n],
    t.slice(1)
  ) : [
    ka(e[0]),
    ka(t[t.length - 1])
  ];
}
function Rh(e, t) {
  le.call(this, e), this.preExecute("shape.delete", function(n) {
    var i = n.shape, r = i.parent;
    P(i, "bpmn:Participant") && (n.collaborationRoot = r);
  }, !0), this.postExecute("shape.delete", function(n) {
    var i = n.collaborationRoot;
    i && !i.businessObject.participants.length && t.makeProcess();
  }, !0);
}
Rh.$inject = ["eventBus", "modeling"];
Pe(Rh, le);
function Ch(e, t, n, i) {
  le.call(this, e);
  var r = i.get("dragging", !1);
  function o(l) {
    var u = l.source, d = l.target, f = l.parent;
    if (f) {
      var y, g;
      P(l, "bpmn:SequenceFlow") && (n.canConnectSequenceFlow(u, d) || (g = !0), n.canConnectMessageFlow(u, d) && (y = "bpmn:MessageFlow")), P(l, "bpmn:MessageFlow") && (n.canConnectMessageFlow(u, d) || (g = !0), n.canConnectSequenceFlow(u, d) && (y = "bpmn:SequenceFlow")), g && t.removeConnection(l), y && t.connect(u, d, {
        type: y,
        waypoints: l.waypoints.slice()
      });
    }
  }
  function a(l) {
    var u = l.context, d = u.connection, f = u.newSource || d.source, y = u.newTarget || d.target, g, _;
    g = n.canConnect(f, y), !(!g || g.type === d.type) && (_ = t.connect(f, y, {
      type: g.type,
      associationDirection: g.associationDirection,
      waypoints: d.waypoints.slice()
    }), d.parent && t.removeConnection(d), u.connection = _, r && c(d, _));
  }
  function c(l, u) {
    var d = r.context(), f = d && d.payload.previousSelection, y;
    !f || !f.length || (y = f.indexOf(l), y !== -1 && f.splice(y, 1, u));
  }
  this.postExecuted("elements.move", function(l) {
    var u = l.closure, d = u.allConnections;
    z(d, o);
  }, !0), this.preExecute("connection.reconnect", a), this.postExecuted("element.updateProperties", function(l) {
    var u = l.context, d = u.properties, f = u.element, y = f.businessObject, g;
    d.default && (g = gt(
      f.outgoing,
      zi({ id: f.businessObject.default.id })
    ), g && t.updateProperties(g, { conditionExpression: void 0 })), d.conditionExpression && y.sourceRef.default === y && t.updateProperties(f.source, { default: void 0 });
  });
}
Pe(Ch, le);
Ch.$inject = [
  "eventBus",
  "modeling",
  "bpmnRules",
  "injector"
];
function Ku(e, t, n, i, r, o) {
  i.invoke(le, this), this._bpmnReplace = e, this._elementRegistry = n, this._selection = o, this.postExecuted(["elements.create"], 500, function(a) {
    var c = a.context, l = c.parent, u = c.elements, d = li(u, function(f, y) {
      var g = t.canReplace([y], y.host || y.parent || l);
      return g ? f.concat(g.replacements) : f;
    }, []);
    d.length && this._replaceElements(u, d);
  }, this), this.postExecuted(["elements.move"], 500, function(a) {
    var c = a.context, l = c.newParent, u = c.newHost, d = [];
    z(c.closure.topLevel, function(y) {
      Bn(y) ? d = d.concat(y.children) : d = d.concat(y);
    }), d.length === 1 && u && (l = u);
    var f = t.canReplace(d, l);
    f && this._replaceElements(d, f.replacements, u);
  }, this), this.postExecute(["shape.replace"], 1500, function(a) {
    var c = a.context, l = c.oldShape, u = c.newShape, d = l.attachers, f;
    d && d.length && (f = t.canReplace(d, u), this._replaceElements(d, f.replacements));
  }, this), this.postExecuted(["shape.replace"], 1500, function(a) {
    var c = a.context, l = c.oldShape, u = c.newShape;
    r.unclaimId(l.businessObject.id, l.businessObject), r.updateProperties(u, { id: l.id });
  });
}
Pe(Ku, le);
Ku.prototype._replaceElements = function(e, t) {
  var n = this._elementRegistry, i = this._bpmnReplace, r = this._selection;
  z(t, function(o) {
    var a = {
      type: o.newElementType
    }, c = n.get(o.oldElementId), l = e.indexOf(c);
    e[l] = i.replaceElement(c, a, { select: !1 });
  }), t && r.select(e);
};
Ku.$inject = [
  "bpmnReplace",
  "bpmnRules",
  "elementRegistry",
  "injector",
  "modeling",
  "selection"
];
var Uk = 1500, Yk = { width: 140, height: 120 }, Ah = { width: 300, height: 60 }, Ph = { width: 60, height: 300 }, Wl = { width: 300, height: 150 }, Gl = { width: 150, height: 300 }, Tx = { width: 140, height: 120 }, kx = { width: 50, height: 30 };
function Mx(e) {
  e.on("resize.start", Uk, function(t) {
    var n = t.context, i = n.shape, r = n.direction, o = n.balanced;
    (P(i, "bpmn:Lane") || P(i, "bpmn:Participant")) && (n.resizeConstraints = Jk(i, r, o)), P(i, "bpmn:SubProcess") && pt(i) && (n.minDimensions = Tx), P(i, "bpmn:TextAnnotation") && (n.minDimensions = kx);
  });
}
Mx.$inject = ["eventBus"];
var Zr = Math.abs, Kk = Math.min, qk = Math.max;
function Dx(e, t, n, i) {
  var r = e[t];
  e[t] = r === void 0 ? n : i(n, r);
}
function Ma(e, t, n) {
  return Dx(e, t, n, Kk);
}
function Da(e, t, n) {
  return Dx(e, t, n, qk);
}
var Xk = { top: 20, left: 50, right: 20, bottom: 20 }, Zk = { top: 50, left: 20, right: 20, bottom: 20 };
function Jk(e, t, n) {
  var i = Ai(e), r = !0, o = !0, a = Vu(i, [i]), c = Le(e), l = {}, u = {}, d = Pn(e), f = d ? Ah : Ph;
  /n/.test(t) ? u.top = c.bottom - f.height : /e/.test(t) ? u.right = c.left + f.width : /s/.test(t) ? u.bottom = c.top + f.height : /w/.test(t) && (u.left = c.right - f.width), a.forEach(function(_) {
    var x = Le(_);
    /n/.test(t) && (d && x.top < c.top - 10 && (r = !1), n && Zr(c.top - x.bottom) < 10 && Da(l, "top", x.top + f.height), Zr(c.top - x.top) < 5 && Ma(u, "top", x.bottom - f.height)), /e/.test(t) && (!d && x.right > c.right + 10 && (o = !1), n && Zr(c.right - x.left) < 10 && Ma(l, "right", x.right - f.width), Zr(c.right - x.right) < 5 && Da(u, "right", x.left + f.width)), /s/.test(t) && (d && x.bottom > c.bottom + 10 && (o = !1), n && Zr(c.bottom - x.top) < 10 && Ma(l, "bottom", x.bottom - f.height), Zr(c.bottom - x.bottom) < 5 && Da(u, "bottom", x.top + f.height)), /w/.test(t) && (!d && x.left < c.left - 10 && (r = !1), n && Zr(c.left - x.right) < 10 && Da(l, "left", x.left + f.width), Zr(c.left - x.left) < 5 && Ma(u, "left", x.right - f.width));
  });
  var y = i.children.filter(function(_) {
    return !_.hidden && !_.waypoints && (P(_, "bpmn:FlowElement") || P(_, "bpmn:Artifact"));
  }), g = d ? Xk : Zk;
  return y.forEach(function(_) {
    var x = Le(_);
    r && /n/.test(t) && Ma(u, "top", x.top - g.top), o && /e/.test(t) && Da(u, "right", x.right + g.right), o && /s/.test(t) && Da(u, "bottom", x.bottom + g.bottom), r && /w/.test(t) && Ma(u, "left", x.left - g.left);
  }), {
    min: u,
    max: l
  };
}
var xv = 1001;
function Ox(e, t) {
  e.on("resize.start", xv + 500, function(n) {
    var i = n.context, r = i.shape;
    (P(r, "bpmn:Lane") || P(r, "bpmn:Participant")) && (i.balanced = !zs(n));
  }), e.on("resize.end", xv, function(n) {
    var i = n.context, r = i.shape, o = i.canExecute, a = i.newBounds;
    if (P(r, "bpmn:Lane") || P(r, "bpmn:Participant"))
      return o && (a = w_(a), t.resizeLane(r, a, i.balanced)), !1;
  });
}
Ox.$inject = [
  "eventBus",
  "modeling"
];
var Qk = 500;
function Th(e, t, n, i, r) {
  n.invoke(le, this);
  function o(d) {
    return rt(d, ["bpmn:ReceiveTask", "bpmn:SendTask"]) || eM(d, [
      "bpmn:ErrorEventDefinition",
      "bpmn:EscalationEventDefinition",
      "bpmn:MessageEventDefinition",
      "bpmn:SignalEventDefinition"
    ]);
  }
  function a(d) {
    var f = e.getDefinitions(), y = f.get("rootElements");
    return !!gt(y, zi({ id: d.id }));
  }
  function c(d) {
    if (P(d, "bpmn:ErrorEventDefinition"))
      return "errorRef";
    if (P(d, "bpmn:EscalationEventDefinition"))
      return "escalationRef";
    if (P(d, "bpmn:MessageEventDefinition"))
      return "messageRef";
    if (P(d, "bpmn:SignalEventDefinition"))
      return "signalRef";
  }
  function l(d) {
    if (rt(d, ["bpmn:ReceiveTask", "bpmn:SendTask"]))
      return d.get("messageRef");
    var f = d.get("eventDefinitions"), y = f[0];
    return y.get(c(y));
  }
  function u(d, f) {
    if (rt(d, ["bpmn:ReceiveTask", "bpmn:SendTask"]))
      return d.set("messageRef", f);
    var y = d.get("eventDefinitions"), g = y[0];
    return g.set(c(g), f);
  }
  this.executed([
    "shape.create",
    "element.updateProperties",
    "element.updateModdleProperties"
  ], function(d) {
    var f = d.shape || d.element;
    if (o(f)) {
      var y = he(f), g = l(y), _;
      g && !a(g) && (_ = e.getDefinitions().get("rootElements"), dn(_, g), d.addedRootElement = g);
    }
  }, !0), this.reverted([
    "shape.create",
    "element.updateProperties",
    "element.updateModdleProperties"
  ], function(d) {
    var f = d.addedRootElement;
    if (f) {
      var y = e.getDefinitions().get("rootElements");
      nn(y, f);
    }
  }, !0), t.on("copyPaste.copyElement", function(d) {
    var f = d.descriptor, y = d.element;
    if (!(y.labelTarget || !o(y))) {
      var g = he(y), _ = l(g);
      _ && (f.referencedRootElement = _);
    }
  }), t.on("copyPaste.pasteElement", Qk, function(d) {
    var f = d.descriptor, y = f.businessObject, g = f.referencedRootElement;
    g && (a(g) || (g = i.copyElement(
      g,
      r.create(g.$type)
    )), u(y, g), delete f.referencedRootElement);
  });
}
Th.$inject = [
  "bpmnjs",
  "eventBus",
  "injector",
  "moddleCopy",
  "bpmnFactory"
];
Pe(Th, le);
function eM(e, t) {
  return Ke(t) || (t = [t]), so(t, function(n) {
    return sc(e, n);
  });
}
var Nx = Math.max;
function Bx(e) {
  e.on("spaceTool.getMinDimensions", function(t) {
    var n = t.shapes, i = t.axis, r = t.start, o = {};
    return z(n, function(a) {
      var c = a.id;
      P(a, "bpmn:Participant") && (o[c] = nM(a, i, r)), P(a, "bpmn:Lane") && (o[c] = Pn(a) ? Ah : Ph), P(a, "bpmn:SubProcess") && pt(a) && (o[c] = Tx), P(a, "bpmn:TextAnnotation") && (o[c] = kx), P(a, "bpmn:Group") && (o[c] = Yk);
    }), o;
  });
}
Bx.$inject = ["eventBus"];
function tM(e) {
  return e === "x";
}
function nM(e, t, n) {
  var i = Pn(e);
  if (!oM(e))
    return i ? Wl : Gl;
  var r = tM(t), o = {};
  return r ? i ? o = Wl : o = {
    width: rM(e, n, r),
    height: Gl.height
  } : i ? o = {
    width: Wl.width,
    height: iM(e, n, r)
  } : o = Gl, o;
}
function iM(e, t, n) {
  var i;
  return i = aM(e, t, n), Nx(Wl.height, i);
}
function rM(e, t, n) {
  var i;
  return i = sM(e, t, n), Nx(Gl.width, i);
}
function oM(e) {
  return !!go(e).length;
}
function aM(e, t, n) {
  var i = go(e), r;
  return r = kh(i, t, n), e.height - r.height + Ah.height;
}
function sM(e, t, n) {
  var i = go(e), r;
  return r = kh(i, t, n), e.width - r.width + Ph.width;
}
function kh(e, t, n) {
  var i, r, o;
  for (i = 0; i < e.length; i++)
    if (r = e[i], !n && t >= r.y && t <= r.y + r.height || n && t >= r.x && t <= r.x + r.width)
      return o = go(r), o.length ? kh(o, t, n) : r;
}
var Ev = 400, cM = 600, wv = {
  x: 180,
  y: 160
};
function vo(e, t, n, i, r, o, a) {
  le.call(this, t), this._canvas = e, this._eventBus = t, this._modeling = n, this._elementFactory = i, this._bpmnFactory = r, this._bpmnjs = o, this._elementRegistry = a;
  var c = this;
  function l(f) {
    return P(f, "bpmn:SubProcess") && !pt(f);
  }
  function u(f) {
    var y = f.shape, g = f.newRootElement, _ = he(y);
    g = c._addDiagram(g || _), f.newRootElement = e.addRootElement(g);
  }
  function d(f) {
    var y = f.shape, g = he(y);
    c._removeDiagram(g);
    var _ = f.newRootElement = a.get(Cr(g));
    e.removeRootElement(_);
  }
  this.executed("shape.create", function(f) {
    var y = f.shape;
    l(y) && u(f);
  }, !0), this.postExecuted("shape.create", function(f) {
    var y = f.shape, g = f.newRootElement;
    !g || !y.children || (c._showRecursively(y.children), c._moveChildrenToShape(y, g));
  }, !0), this.reverted("shape.create", function(f) {
    var y = f.shape;
    l(y) && d(f);
  }, !0), this.preExecuted("shape.delete", function(f) {
    var y = f.shape;
    if (l(y)) {
      var g = a.get(Cr(y));
      g && n.removeElements(g.children.slice());
    }
  }, !0), this.executed("shape.delete", function(f) {
    var y = f.shape;
    l(y) && d(f);
  }, !0), this.reverted("shape.delete", function(f) {
    var y = f.shape;
    l(y) && u(f);
  }, !0), this.preExecuted("shape.replace", function(f) {
    var y = f.oldShape, g = f.newShape;
    !l(y) || !l(g) || (f.oldRoot = e.removeRootElement(Cr(y)));
  }, !0), this.postExecuted("shape.replace", function(f) {
    var y = f.newShape, g = f.oldRoot, _ = e.findRoot(Cr(y));
    if (!(!g || !_)) {
      var x = g.children;
      n.moveElements(x, { x: 0, y: 0 }, _);
    }
  }, !0), this.executed("element.updateProperties", function(f) {
    var y = f.element;
    if (P(y, "bpmn:SubProcess")) {
      var g = f.properties, _ = f.oldProperties, x = _.id, w = g.id;
      if (x !== w) {
        if (jl(y)) {
          a.updateId(y, $o(w)), a.updateId(x, w);
          return;
        }
        var B = a.get($o(x));
        B && a.updateId($o(x), $o(w));
      }
    }
  }, !0), this.reverted("element.updateProperties", function(f) {
    var y = f.element;
    if (P(y, "bpmn:SubProcess")) {
      var g = f.properties, _ = f.oldProperties, x = _.id, w = g.id;
      if (x !== w) {
        if (jl(y)) {
          a.updateId(y, $o(x)), a.updateId(w, x);
          return;
        }
        var B = a.get($o(w));
        B && a.updateId(B, $o(x));
      }
    }
  }, !0), t.on("element.changed", function(f) {
    var y = f.element;
    if (jl(y)) {
      var g = y, _ = a.get(fg(g));
      !_ || _ === g || t.fire("element.changed", { element: _ });
    }
  }), this.executed("shape.toggleCollapse", Ev, function(f) {
    var y = f.shape;
    P(y, "bpmn:SubProcess") && (pt(y) ? d(f) : (u(f), c._showRecursively(y.children)));
  }, !0), this.reverted("shape.toggleCollapse", Ev, function(f) {
    var y = f.shape;
    P(y, "bpmn:SubProcess") && (pt(y) ? d(f) : (u(f), c._showRecursively(y.children)));
  }, !0), this.postExecuted("shape.toggleCollapse", cM, function(f) {
    var y = f.shape;
    if (P(y, "bpmn:SubProcess")) {
      var g = f.newRootElement;
      g && (pt(y) ? c._moveChildrenToShape(g, y) : c._moveChildrenToShape(y, g));
    }
  }, !0), t.on("copyPaste.createTree", function(f) {
    var y = f.element, g = f.children;
    if (l(y)) {
      var _ = Cr(y), x = a.get(_);
      x && g.push.apply(g, x.children);
    }
  }), t.on("copyPaste.copyElement", function(f) {
    var y = f.descriptor, g = f.element, _ = f.elements, x = g.parent, w = P(bt(x), "bpmndi:BPMNPlane");
    if (w) {
      var B = fg(x), N = gt(_, function(k) {
        return k.id === B;
      });
      N && (y.parent = N.id);
    }
  }), t.on("copyPaste.pasteElement", function(f) {
    var y = f.descriptor;
    y.parent && (l(y.parent) || y.parent.hidden) && (y.hidden = !0);
  });
}
Pe(vo, le);
vo.prototype._moveChildrenToShape = function(e, t) {
  var n = this._modeling, i = e.children, r;
  if (i) {
    i = i.concat(i.reduce(function(u, d) {
      return d.label && d.label.parent !== e ? u.concat(d.label) : u;
    }, []));
    var o = i.filter(function(u) {
      return !u.hidden;
    });
    if (!o.length) {
      n.moveElements(i, { x: 0, y: 0 }, t, { autoResize: !1 });
      return;
    }
    var a = pn(o);
    if (!t.x)
      r = {
        x: wv.x - a.x,
        y: wv.y - a.y
      };
    else {
      var c = Fe(t), l = Fe(a);
      r = {
        x: c.x - l.x,
        y: c.y - l.y
      };
    }
    n.moveElements(i, r, t, { autoResize: !1 });
  }
};
vo.prototype._showRecursively = function(e, t) {
  var n = this, i = [];
  return e.forEach(function(r) {
    r.hidden = !!t, i = i.concat(r), r.children && (i = i.concat(
      n._showRecursively(r.children, r.collapsed || t)
    ));
  }), i;
};
vo.prototype._addDiagram = function(e) {
  var t = this._bpmnjs, n = t.getDefinitions().diagrams;
  return e.businessObject || (e = this._createNewDiagram(e)), n.push(e.di.$parent), e;
};
vo.prototype._createNewDiagram = function(e) {
  var t = this._bpmnFactory, n = this._elementFactory, i = t.create("bpmndi:BPMNPlane", {
    bpmnElement: e
  }), r = t.create("bpmndi:BPMNDiagram", {
    plane: i
  });
  i.$parent = r;
  var o = n.createRoot({
    id: Cr(e),
    type: e.$type,
    di: i,
    businessObject: e,
    collapsed: !0
  });
  return o;
};
vo.prototype._removeDiagram = function(e) {
  var t = this._bpmnjs, n = t.getDefinitions().diagrams, i = gt(n, function(r) {
    return r.plane.bpmnElement.id === e.id;
  });
  return n.splice(n.indexOf(i), 1), i;
};
vo.$inject = [
  "canvas",
  "eventBus",
  "modeling",
  "elementFactory",
  "bpmnFactory",
  "bpmnjs",
  "elementRegistry"
];
function Mh(e, t) {
  e.invoke(le, this), this.postExecuted("shape.replace", function(n) {
    var i = n.context.oldShape, r = n.context.newShape;
    if (!(!P(r, "bpmn:SubProcess") || !(P(i, "bpmn:Task") || P(i, "bpmn:CallActivity")) || !pt(r))) {
      var o = lM(r);
      t.createShape({ type: "bpmn:StartEvent" }, o, r);
    }
  });
}
Mh.$inject = [
  "injector",
  "modeling"
];
Pe(Mh, le);
function lM(e) {
  return {
    x: e.x + e.width / 6,
    y: e.y + e.height / 2
  };
}
function Dh(e) {
  le.call(this, e), this.preExecute("connection.create", function(t) {
    const { target: n } = t;
    P(n, "bpmn:TextAnnotation") && (t.parent = n.parent);
  }, !0), this.preExecute(["shape.create", "shape.resize", "elements.move"], function(t) {
    const n = t.shapes || [t.shape];
    n.length === 1 && P(n[0], "bpmn:TextAnnotation") && (t.hints = t.hints || {}, t.hints.autoResize = !1);
  }, !0);
}
Pe(Dh, le);
Dh.$inject = [
  "eventBus"
];
function Oh(e, t) {
  le.call(this, e), this.postExecuted("shape.toggleCollapse", 1500, function(n) {
    var i = n.shape;
    if (pt(i))
      return;
    var r = ec(i);
    r.forEach(function(a) {
      var c = a.incoming.slice(), l = a.outgoing.slice();
      z(c, function(u) {
        o(u, !0);
      }), z(l, function(u) {
        o(u, !1);
      });
    });
    function o(a, c) {
      r.indexOf(a.source) !== -1 && r.indexOf(a.target) !== -1 || (c ? t.reconnectEnd(a, i, Fe(i)) : t.reconnectStart(a, i, Fe(i)));
    }
  }, !0);
}
Pe(Oh, le);
Oh.$inject = [
  "eventBus",
  "modeling"
];
var of = 500;
function Nh(e, t, n) {
  le.call(this, e);
  function i(a) {
    a.length && a.forEach(function(c) {
      c.type === "label" && !c.businessObject.name && (c.hidden = !0);
    });
  }
  function r(a, c) {
    var l = a.children, u = c, d, f;
    return d = uM(l).concat([a]), f = vx(d), f ? (u.width = Math.max(f.width, u.width), u.height = Math.max(f.height, u.height), u.x = f.x + (f.width - u.width) / 2, u.y = f.y + (f.height - u.height) / 2) : (u.x = a.x + (a.width - u.width) / 2, u.y = a.y + (a.height - u.height) / 2), u;
  }
  function o(a, c) {
    return {
      x: a.x + (a.width - c.width) / 2,
      y: a.y + (a.height - c.height) / 2,
      width: c.width,
      height: c.height
    };
  }
  this.executed(["shape.toggleCollapse"], of, function(a) {
    var c = a.context, l = c.shape;
    P(l, "bpmn:SubProcess") && (l.collapsed ? bt(l).isExpanded = !1 : (i(l.children), bt(l).isExpanded = !0));
  }), this.reverted(["shape.toggleCollapse"], of, function(a) {
    var c = a.context, l = c.shape;
    l.collapsed ? bt(l).isExpanded = !1 : bt(l).isExpanded = !0;
  }), this.postExecuted(["shape.toggleCollapse"], of, function(a) {
    var c = a.context.shape, l = t.getDefaultSize(c), u;
    c.collapsed ? u = o(c, l) : u = r(c, l), n.resizeShape(c, u, null, {
      autoResize: c.collapsed ? !1 : "nwse"
    });
  });
}
Pe(Nh, le);
Nh.$inject = [
  "eventBus",
  "elementFactory",
  "modeling"
];
function uM(e) {
  return e.filter(function(t) {
    return !t.hidden;
  });
}
function Bh(e, t, n, i) {
  t.invoke(le, this), this.preExecute("shape.delete", function(r) {
    var o = r.context, a = o.shape, c = a.businessObject;
    vt(a) || (P(a, "bpmn:Participant") && pt(a) && n.ids.unclaim(c.processRef.id), i.unclaimId(c.id, c));
  }), this.preExecute("connection.delete", function(r) {
    var o = r.context, a = o.connection, c = a.businessObject;
    i.unclaimId(c.id, c);
  }), this.preExecute("canvas.updateRoot", function() {
    var r = e.getRootElement(), o = r.businessObject;
    P(r, "bpmn:Collaboration") && n.ids.unclaim(o.id);
  });
}
Pe(Bh, le);
Bh.$inject = ["canvas", "injector", "moddle", "modeling"];
function Lh(e, t) {
  le.call(this, e), this.preExecute("connection.delete", function(n) {
    var i = n.context, r = i.connection, o = r.source;
    pM(r, o) && t.updateProperties(o, {
      default: null
    });
  });
}
Pe(Lh, le);
Lh.$inject = [
  "eventBus",
  "modeling"
];
function pM(e, t) {
  if (!P(e, "bpmn:SequenceFlow"))
    return !1;
  var n = he(t), i = he(e);
  return n.get("default") === i;
}
var fM = 500, dM = 5e3;
function Ih(e, t) {
  le.call(this, e);
  var n;
  function i() {
    return n = n || new hM(), n.enter(), n;
  }
  function r() {
    if (!n)
      throw new Error("out of bounds release");
    return n;
  }
  function o() {
    if (!n)
      throw new Error("out of bounds release");
    var c = n.leave();
    return c && (t.updateLaneRefs(n.flowNodes, n.lanes), n = null), c;
  }
  var a = [
    "spaceTool",
    "lane.add",
    "lane.resize",
    "lane.split",
    "elements.create",
    "elements.delete",
    "elements.move",
    "shape.create",
    "shape.delete",
    "shape.move",
    "shape.resize"
  ];
  this.preExecute(a, dM, function(c) {
    i();
  }), this.postExecuted(a, fM, function(c) {
    o();
  }), this.preExecute([
    "shape.create",
    "shape.move",
    "shape.delete",
    "shape.resize"
  ], function(c) {
    var l = c.context, u = l.shape, d = r();
    u.labelTarget || (P(u, "bpmn:Lane") && d.addLane(u), P(u, "bpmn:FlowNode") && d.addFlowNode(u));
  });
}
Ih.$inject = [
  "eventBus",
  "modeling"
];
Pe(Ih, le);
function hM() {
  this.flowNodes = [], this.lanes = [], this.counter = 0, this.addLane = function(e) {
    this.lanes.push(e);
  }, this.addFlowNode = function(e) {
    this.flowNodes.push(e);
  }, this.enter = function() {
    this.counter++;
  }, this.leave = function() {
    return this.counter--, !this.counter;
  };
}
const mM = {
  __init__: [
    "adaptiveLabelPositioningBehavior",
    "appendBehavior",
    "associationBehavior",
    "attachEventBehavior",
    "boundaryEventBehavior",
    "compensateBoundaryEventBehaviour",
    "createBehavior",
    "createDataObjectBehavior",
    "createParticipantBehavior",
    "dataInputAssociationBehavior",
    "dataStoreBehavior",
    "deleteLaneBehavior",
    "detachEventBehavior",
    "dropOnFlowBehavior",
    "eventBasedGatewayBehavior",
    "fixHoverBehavior",
    "groupBehavior",
    "importDockingFix",
    "isHorizontalFix",
    "labelBehavior",
    "layoutConnectionBehavior",
    "messageFlowBehavior",
    "nonInterruptingBehavior",
    "removeElementBehavior",
    "removeEmbeddedLabelBoundsBehavior",
    "removeParticipantBehavior",
    "replaceConnectionBehavior",
    "replaceElementBehaviour",
    "resizeBehavior",
    "resizeLaneBehavior",
    "rootElementReferenceBehavior",
    "spaceToolBehavior",
    "subProcessPlaneBehavior",
    "subProcessStartEventBehavior",
    "textAnnotationBehavior",
    "toggleCollapseConnectionBehaviour",
    "toggleElementCollapseBehaviour",
    "unclaimIdBehavior",
    "updateFlowNodeRefsBehavior",
    "unsetDefaultFlowBehavior"
  ],
  adaptiveLabelPositioningBehavior: ["type", nh],
  appendBehavior: ["type", ih],
  associationBehavior: ["type", rh],
  attachEventBehavior: ["type", Hu],
  boundaryEventBehavior: ["type", oh],
  compensateBoundaryEventBehaviour: ["type", ah],
  createBehavior: ["type", sh],
  createDataObjectBehavior: ["type", ch],
  createParticipantBehavior: ["type", lh],
  dataInputAssociationBehavior: ["type", uh],
  dataStoreBehavior: ["type", ph],
  deleteLaneBehavior: ["type", fh],
  detachEventBehavior: ["type", Wu],
  dropOnFlowBehavior: ["type", dh],
  eventBasedGatewayBehavior: ["type", hh],
  fixHoverBehavior: ["type", _x],
  groupBehavior: ["type", mh],
  importDockingFix: ["type", bx],
  isHorizontalFix: ["type", yh],
  labelBehavior: ["type", gh],
  layoutConnectionBehavior: ["type", vh],
  messageFlowBehavior: ["type", xh],
  nonInterruptingBehavior: ["type", Eh],
  removeElementBehavior: ["type", Sh],
  removeEmbeddedLabelBoundsBehavior: ["type", wh],
  removeParticipantBehavior: ["type", Rh],
  replaceConnectionBehavior: ["type", Ch],
  replaceElementBehaviour: ["type", Ku],
  resizeBehavior: ["type", Mx],
  resizeLaneBehavior: ["type", Ox],
  rootElementReferenceBehavior: ["type", Th],
  spaceToolBehavior: ["type", Bx],
  subProcessPlaneBehavior: ["type", vo],
  subProcessStartEventBehavior: ["type", Mh],
  textAnnotationBehavior: ["type", Dh],
  toggleCollapseConnectionBehaviour: ["type", Oh],
  toggleElementCollapseBehaviour: ["type", Nh],
  unclaimIdBehavior: ["type", Bh],
  unsetDefaultFlowBehavior: ["type", Lh],
  updateFlowNodeRefsBehavior: ["type", Ih]
};
function Lx(e, t) {
  var n = Ln(e, t, -15);
  return n !== "intersect" ? n : null;
}
function kn(e) {
  Di.call(this, e);
}
Pe(kn, Di);
kn.$inject = ["eventBus"];
kn.prototype.init = function() {
  this.addRule("connection.start", function(e) {
    var t = e.source;
    return yM(t);
  }), this.addRule("connection.create", function(e) {
    var t = e.source, n = e.target, i = e.hints || {}, r = i.targetParent, o = i.targetAttach;
    if (o)
      return !1;
    r && (n.parent = r);
    try {
      return Ul(t, n);
    } finally {
      r && (n.parent = null);
    }
  }), this.addRule("connection.reconnect", function(e) {
    var t = e.connection, n = e.source, i = e.target;
    return Ul(n, i, t);
  }), this.addRule("connection.updateWaypoints", function(e) {
    return {
      type: e.connection.type
    };
  }), this.addRule("shape.resize", function(e) {
    var t = e.shape, n = e.newBounds;
    return Gx(t, n);
  }), this.addRule("elements.create", function(e) {
    var t = e.elements, n = e.position, i = e.target;
    return kt(i) && !fu(t, i) ? !1 : Qo(t, function(r) {
      return kt(r) ? Ul(r.source, r.target, r) : r.host ? Is(r, r.host, null, n) : rd(r, i, null);
    });
  }), this.addRule("elements.move", function(e) {
    var t = e.target, n = e.shapes, i = e.position;
    return Is(n, t, null, i) || Vx(n, t, i) || Wx(n, t) || fu(n, t);
  }), this.addRule("shape.create", function(e) {
    return rd(
      e.shape,
      e.target,
      e.source,
      e.position
    );
  }), this.addRule("shape.attach", function(e) {
    return Is(
      e.shape,
      e.target,
      null,
      e.position
    );
  }), this.addRule("element.copy", function(e) {
    var t = e.element, n = e.elements;
    return Xx(n, t);
  });
};
kn.prototype.canConnectMessageFlow = Kx;
kn.prototype.canConnectSequenceFlow = qx;
kn.prototype.canConnectDataAssociation = jh;
kn.prototype.canConnectAssociation = Ux;
kn.prototype.canConnectCompensationAssociation = Yx;
kn.prototype.canMove = Wx;
kn.prototype.canAttach = Is;
kn.prototype.canReplace = Vx;
kn.prototype.canDrop = za;
kn.prototype.canInsert = fu;
kn.prototype.canCreate = rd;
kn.prototype.canConnect = Ul;
kn.prototype.canResize = Gx;
kn.prototype.canCopy = Xx;
function yM(e) {
  return td(e) ? null : rt(e, [
    "bpmn:FlowNode",
    "bpmn:InteractionNode",
    "bpmn:DataObjectReference",
    "bpmn:DataStoreReference",
    "bpmn:Group",
    "bpmn:TextAnnotation"
  ]);
}
function td(e) {
  return !e || vt(e);
}
function gM(e, t) {
  return e === t;
}
function Sv(e) {
  do {
    if (P(e, "bpmn:Process"))
      return he(e);
    if (P(e, "bpmn:Participant"))
      return he(e).processRef || he(e);
  } while (e = e.parent);
}
function nd(e) {
  return P(e, "bpmn:TextAnnotation");
}
function $h(e) {
  return P(e, "bpmn:Group") && !e.labelTarget;
}
function Ix(e) {
  return P(e, "bpmn:BoundaryEvent") && rr(e, "bpmn:CompensateEventDefinition");
}
function qu(e) {
  return he(e).isForCompensation;
}
function vM(e, t) {
  var n = Sv(e), i = Sv(t);
  return n === i;
}
function _M(e) {
  return P(e, "bpmn:InteractionNode") && !P(e, "bpmn:BoundaryEvent") && (!P(e, "bpmn:Event") || P(e, "bpmn:ThrowEvent") && jx(e, "bpmn:MessageEventDefinition"));
}
function bM(e) {
  return P(e, "bpmn:InteractionNode") && !qu(e) && (!P(e, "bpmn:Event") || P(e, "bpmn:CatchEvent") && jx(e, "bpmn:MessageEventDefinition")) && !(P(e, "bpmn:BoundaryEvent") && !rr(e, "bpmn:MessageEventDefinition"));
}
function Rv(e) {
  for (var t = e; t = t.parent; ) {
    if (P(t, "bpmn:FlowElementsContainer"))
      return he(t);
    if (P(t, "bpmn:Participant"))
      return he(t).processRef;
  }
  return null;
}
function $x(e, t) {
  var n = Rv(e), i = Rv(t);
  return n === i;
}
function rr(e, t) {
  var n = he(e);
  return !!gt(n.eventDefinitions || [], function(i) {
    return P(i, t);
  });
}
function jx(e, t) {
  var n = he(e);
  return (n.eventDefinitions || []).every(function(i) {
    return P(i, t);
  });
}
function xM(e) {
  return P(e, "bpmn:FlowNode") && !P(e, "bpmn:EndEvent") && !Bn(e) && !(P(e, "bpmn:IntermediateThrowEvent") && rr(e, "bpmn:LinkEventDefinition")) && !Ix(e) && !qu(e);
}
function EM(e) {
  return P(e, "bpmn:FlowNode") && !P(e, "bpmn:StartEvent") && !P(e, "bpmn:BoundaryEvent") && !Bn(e) && !(P(e, "bpmn:IntermediateCatchEvent") && rr(e, "bpmn:LinkEventDefinition")) && !qu(e);
}
function wM(e) {
  return P(e, "bpmn:ReceiveTask") || P(e, "bpmn:IntermediateCatchEvent") && (rr(e, "bpmn:MessageEventDefinition") || rr(e, "bpmn:TimerEventDefinition") || rr(e, "bpmn:ConditionalEventDefinition") || rr(e, "bpmn:SignalEventDefinition"));
}
function SM(e) {
  for (var t = []; e; )
    e = e.parent, e && t.push(e);
  return t;
}
function id(e, t) {
  var n = SM(t);
  return n.indexOf(e) !== -1;
}
function Ul(e, t, n) {
  if (td(e) || td(t))
    return null;
  if (!P(n, "bpmn:DataAssociation")) {
    if (Kx(e, t))
      return { type: "bpmn:MessageFlow" };
    if (qx(e, t))
      return { type: "bpmn:SequenceFlow" };
  }
  var i = jh(e, t);
  return i || (Yx(e, t) ? {
    type: "bpmn:Association",
    associationDirection: "One"
  } : Ux(e, t) ? {
    type: "bpmn:Association",
    associationDirection: "None"
  } : !1);
}
function za(e, t) {
  return vt(e) || $h(e) ? !0 : P(t, "bpmn:Participant") && !pt(t) ? !1 : P(e, "bpmn:Participant") ? P(t, "bpmn:Process") || P(t, "bpmn:Collaboration") : rt(e, ["bpmn:DataInput", "bpmn:DataOutput"]) && e.parent ? t === e.parent : P(e, "bpmn:Lane") ? P(t, "bpmn:Participant") || P(t, "bpmn:Lane") : P(e, "bpmn:BoundaryEvent") && !RM(e) ? !1 : P(e, "bpmn:FlowElement") && !P(e, "bpmn:DataStoreReference") ? P(t, "bpmn:FlowElementsContainer") ? pt(t) : rt(t, ["bpmn:Participant", "bpmn:Lane"]) : P(e, "bpmn:DataStoreReference") && P(t, "bpmn:Collaboration") ? so(he(t).get("participants"), function(n) {
    return !!n.get("processRef");
  }) : rt(e, ["bpmn:Artifact", "bpmn:DataAssociation", "bpmn:DataStoreReference"]) ? rt(t, [
    "bpmn:Collaboration",
    "bpmn:Lane",
    "bpmn:Participant",
    "bpmn:Process",
    "bpmn:SubProcess"
  ]) : P(e, "bpmn:MessageFlow") ? P(t, "bpmn:Collaboration") || e.source.parent == t || e.target.parent == t : !1;
}
function RM(e) {
  return he(e).cancelActivity && (Fx(e) || Hx(e));
}
function CM(e) {
  return !vt(e) && P(e, "bpmn:BoundaryEvent");
}
function AM(e) {
  return P(e, "bpmn:Lane");
}
function PM(e) {
  return CM(e) || P(e, "bpmn:IntermediateThrowEvent") && Fx(e) ? !0 : P(e, "bpmn:IntermediateCatchEvent") && Hx(e);
}
function Fx(e) {
  var t = he(e);
  return t && !(t.eventDefinitions && t.eventDefinitions.length);
}
function Hx(e) {
  return zx(e, [
    "bpmn:MessageEventDefinition",
    "bpmn:TimerEventDefinition",
    "bpmn:SignalEventDefinition",
    "bpmn:ConditionalEventDefinition"
  ]);
}
function zx(e, t) {
  return t.some(function(n) {
    return rr(e, n);
  });
}
function TM(e) {
  return P(e, "bpmn:ReceiveTask") && gt(e.incoming, function(t) {
    return P(t.source, "bpmn:EventBasedGateway");
  });
}
function Is(e, t, n, i) {
  if (Array.isArray(e) || (e = [e]), e.length !== 1)
    return !1;
  var r = e[0];
  return vt(r) || !PM(r) || Bn(t) || !P(t, "bpmn:Activity") || qu(t) || i && !Lx(i, t) || TM(t) ? !1 : "attach";
}
function Vx(e, t, n) {
  if (!t)
    return !1;
  var i = {
    replacements: []
  };
  return z(e, function(r) {
    Bn(t) || P(r, "bpmn:StartEvent") && r.type !== "label" && za(r, t) && (PA(r) || i.replacements.push({
      oldElementId: r.id,
      newElementType: "bpmn:StartEvent"
    }), (TA(r) || kA(r) || MA(r)) && i.replacements.push({
      oldElementId: r.id,
      newElementType: "bpmn:StartEvent"
    }), zx(
      r,
      [
        "bpmn:MessageEventDefinition",
        "bpmn:TimerEventDefinition",
        "bpmn:SignalEventDefinition",
        "bpmn:ConditionalEventDefinition"
      ]
    ) && P(t, "bpmn:SubProcess") && i.replacements.push({
      oldElementId: r.id,
      newElementType: "bpmn:StartEvent"
    })), P(t, "bpmn:Transaction") || rr(r, "bpmn:CancelEventDefinition") && r.type !== "label" && (P(r, "bpmn:EndEvent") && za(r, t) && i.replacements.push({
      oldElementId: r.id,
      newElementType: "bpmn:EndEvent"
    }), P(r, "bpmn:BoundaryEvent") && Is(r, t, null, n) && i.replacements.push({
      oldElementId: r.id,
      newElementType: "bpmn:BoundaryEvent"
    }));
  }), i.replacements.length ? i : !1;
}
function Wx(e, t) {
  return so(e, AM) ? !1 : t ? e.every(function(n) {
    return za(n, t);
  }) : !0;
}
function rd(e, t, n, i) {
  return t ? vt(e) || $h(e) ? !0 : gM(n, t) || n && id(n, t) ? !1 : za(e, t) || fu(e, t) : !1;
}
function Gx(e, t) {
  return P(e, "bpmn:SubProcess") ? pt(e) && (!t || t.width >= 100 && t.height >= 80) : !!(P(e, "bpmn:Lane") || P(e, "bpmn:Participant") || nd(e) || $h(e));
}
function kM(e, t) {
  var n = nd(e), i = nd(t);
  return (n || i) && n !== i;
}
function Ux(e, t) {
  return id(t, e) || id(e, t) ? !1 : kM(e, t) ? !0 : !!jh(e, t);
}
function Yx(e, t) {
  return $x(e, t) && Ix(e) && P(t, "bpmn:Activity") && !DM(t, e) && !Bn(t);
}
function Kx(e, t) {
  return Cv(e) && !Cv(t) ? !1 : _M(e) && bM(t) && !vM(e, t);
}
function qx(e, t) {
  return xM(e) && EM(t) && $x(e, t) && !(P(e, "bpmn:EventBasedGateway") && !wM(t));
}
function jh(e, t) {
  return rt(e, ["bpmn:DataObjectReference", "bpmn:DataStoreReference"]) && rt(t, ["bpmn:Activity", "bpmn:ThrowEvent"]) ? { type: "bpmn:DataInputAssociation" } : rt(t, ["bpmn:DataObjectReference", "bpmn:DataStoreReference"]) && rt(e, ["bpmn:Activity", "bpmn:CatchEvent"]) ? { type: "bpmn:DataOutputAssociation" } : !1;
}
function fu(e, t, n) {
  if (!t)
    return !1;
  if (Array.isArray(e)) {
    if (e.length !== 1)
      return !1;
    e = e[0];
  }
  return t.source === e || t.target === e ? !1 : rt(t, ["bpmn:SequenceFlow", "bpmn:MessageFlow"]) && !vt(t) && P(e, "bpmn:FlowNode") && !P(e, "bpmn:BoundaryEvent") && za(e, t.parent);
}
function MM(e, t) {
  return e && t && e.indexOf(t) !== -1;
}
function Xx(e, t) {
  return vt(t) ? !0 : !(P(t, "bpmn:Lane") && !MM(e, t.parent));
}
function Cv(e) {
  return Ys(e, "bpmn:Process") || Ys(e, "bpmn:Collaboration");
}
function DM(e, t) {
  return e.attachers.includes(t);
}
const OM = {
  __depends__: [
    dr
  ],
  __init__: ["bpmnRules"],
  bpmnRules: ["type", kn]
};
var NM = 2e3;
function Zx(e, t) {
  e.on("saveXML.start", NM, n);
  function n() {
    var i = t.getRootElements();
    z(i, function(r) {
      var o = bt(r), a, c;
      a = ec([r], !1), a = tt(a, function(l) {
        return l !== r && !l.labelTarget;
      }), c = gn(a, bt), o.set("planeElement", c);
    });
  }
}
Zx.$inject = ["eventBus", "canvas"];
const BM = {
  __init__: [
    "bpmnDiOrdering"
  ],
  bpmnDiOrdering: ["type", Zx]
};
function Xu(e) {
  le.call(this, e);
  var t = this;
  this.preExecute(["shape.create", "connection.create"], function(n) {
    var i = n.context, r = i.shape || i.connection, o = i.parent, a = t.getOrdering(r, o);
    a && (a.parent !== void 0 && (i.parent = a.parent), i.parentIndex = a.index);
  }), this.preExecute(["shape.move", "connection.move"], function(n) {
    var i = n.context, r = i.shape || i.connection, o = i.newParent || r.parent, a = t.getOrdering(r, o);
    a && (a.parent !== void 0 && (i.newParent = a.parent), i.newParentIndex = a.index);
  });
}
Xu.prototype.getOrdering = function(e, t) {
  return null;
};
Pe(Xu, le);
function Fh(e, t) {
  Xu.call(this, e);
  var n = [
    { type: "bpmn:SubProcess", order: { level: 6 } },
    // handle SequenceFlow(s) like message flows and render them always on top
    {
      type: "bpmn:SequenceFlow",
      order: {
        level: 9,
        containers: [
          "bpmn:Participant",
          "bpmn:FlowElementsContainer"
        ]
      }
    },
    // handle DataAssociation(s) like message flows and render them always on top
    {
      type: "bpmn:DataAssociation",
      order: {
        level: 9,
        containers: [
          "bpmn:Collaboration",
          "bpmn:FlowElementsContainer"
        ]
      }
    },
    {
      type: "bpmn:TextAnnotation",
      order: {
        level: 9
      }
    },
    {
      type: "bpmn:MessageFlow",
      order: {
        level: 9,
        containers: ["bpmn:Collaboration"]
      }
    },
    {
      type: "bpmn:Association",
      order: {
        level: 6,
        containers: [
          "bpmn:Participant",
          "bpmn:FlowElementsContainer",
          "bpmn:Collaboration"
        ]
      }
    },
    { type: "bpmn:BoundaryEvent", order: { level: 8 } },
    {
      type: "bpmn:Group",
      order: {
        level: 10,
        containers: [
          "bpmn:Collaboration",
          "bpmn:FlowElementsContainer"
        ]
      }
    },
    { type: "bpmn:FlowElement", order: { level: 5 } },
    { type: "bpmn:Participant", order: { level: -2 } },
    { type: "bpmn:Lane", order: { level: -1 } }
  ];
  function i(a) {
    if (a.labelTarget)
      return { level: 10 };
    var c = gt(n, function(l) {
      return rt(a, [l.type]);
    });
    return c && c.order || { level: 1 };
  }
  function r(a) {
    var c = a.order;
    if (c || (a.order = c = i(a)), !c)
      throw new Error(`no order for <${a.id}>`);
    return c;
  }
  function o(a, c, l) {
    for (var u = c; u && !rt(u, l); )
      u = u.parent;
    if (!u)
      throw new Error(`no parent for <${a.id}> in <${c && c.id}>`);
    return u;
  }
  this.getOrdering = function(a, c) {
    if (a.labelTarget || P(a, "bpmn:TextAnnotation"))
      return {
        parent: t.findRoot(c) || t.getRootElement(),
        index: -1
      };
    var l = r(a);
    l.containers && (c = o(a, c, l.containers));
    var u = c.children.indexOf(a), d = r_(c.children, function(f) {
      return !a.labelTarget && f.labelTarget ? !1 : l.level < r(f).level;
    });
    return d !== -1 && u !== -1 && u < d && (d -= 1), {
      index: d,
      parent: c
    };
  };
}
Fh.$inject = ["eventBus", "canvas"];
Pe(Fh, Xu);
const LM = {
  __init__: ["bpmnOrderingProvider"],
  bpmnOrderingProvider: ["type", Fh]
};
function pc() {
}
pc.prototype.get = function() {
  return this._data;
};
pc.prototype.set = function(e) {
  this._data = e;
};
pc.prototype.clear = function() {
  var e = this._data;
  return delete this._data, e;
};
pc.prototype.isEmpty = function() {
  return !this._data;
};
const IM = {
  clipboard: ["type", pc]
};
var $M = "drop-ok", Av = "drop-not-ok", Pv = "attach-ok", Tv = "new-parent", kv = "create", jM = 2e3;
function Jx(e, t, n, i, r) {
  function o(l, u, d, f, y) {
    if (!u)
      return !1;
    l = tt(l, function(N) {
      var k = N.labelTarget;
      return !N.parent && !(vt(N) && l.indexOf(k) !== -1);
    });
    var g = gt(l, function(N) {
      return !kt(N);
    }), _ = !1, x = !1, w = !1;
    Dv(l) && (_ = r.allowed("shape.attach", {
      position: d,
      shape: g,
      target: u
    })), _ || (Dv(l) ? w = r.allowed("shape.create", {
      position: d,
      shape: g,
      source: f,
      target: u
    }) : w = r.allowed("elements.create", {
      elements: l,
      position: d,
      target: u
    }));
    var B = y.connectionTarget;
    return w || _ ? (g && f && (x = r.allowed("connection.create", {
      source: B === f ? g : f,
      target: B === f ? f : g,
      hints: {
        targetParent: u,
        targetAttach: _
      }
    })), {
      attach: _,
      connect: x
    }) : w === null || _ === null ? null : !1;
  }
  function a(l, u) {
    [Pv, $M, Av, Tv].forEach(function(d) {
      d === u ? e.addMarker(l, d) : e.removeMarker(l, d);
    });
  }
  n.on(["create.move", "create.hover"], function(l) {
    var u = l.context, d = u.elements, f = l.hover, y = u.source, g = u.hints || {};
    if (!f) {
      u.canExecute = !1, u.target = null;
      return;
    }
    Mv(l);
    var _ = {
      x: l.x,
      y: l.y
    }, x = u.canExecute = f && o(d, f, _, y, g);
    f && x !== null && (u.target = f, x && x.attach ? a(f, Pv) : a(f, x ? Tv : Av));
  }), n.on(["create.end", "create.out", "create.cleanup"], function(l) {
    var u = l.hover;
    u && a(u, null);
  }), n.on("create.end", function(l) {
    var u = l.context, d = u.source, f = u.shape, y = u.elements, g = u.target, _ = u.canExecute, x = _ && _.attach, w = _ && _.connect, B = u.hints || {};
    if (_ === !1 || !g)
      return !1;
    Mv(l);
    var N = {
      x: l.x,
      y: l.y
    };
    w ? f = i.appendShape(d, f, N, g, {
      attach: x,
      connection: w === !0 ? {} : w,
      connectionTarget: B.connectionTarget
    }) : (y = i.createElements(y, N, g, U({}, B, {
      attach: x
    })), f = gt(y, function(k) {
      return !kt(k);
    })), U(u, {
      elements: y,
      shape: f
    }), U(l, {
      elements: y,
      shape: f
    });
  });
  function c() {
    var l = t.context();
    l && l.prefix === kv && t.cancel();
  }
  n.on("create.init", function() {
    n.on("elements.changed", c), n.once(["create.cancel", "create.end"], jM, function() {
      n.off("elements.changed", c);
    });
  }), this.start = function(l, u, d) {
    Ke(u) || (u = [u]);
    var f = gt(u, function(_) {
      return !kt(_);
    });
    if (f) {
      d = U({
        elements: u,
        hints: {},
        shape: f
      }, d || {}), z(u, function(_) {
        je(_.x) || (_.x = 0), je(_.y) || (_.y = 0);
      });
      var y = tt(u, function(_) {
        return !_.hidden;
      }), g = pn(y);
      z(u, function(_) {
        kt(_) && (_.waypoints = gn(_.waypoints, function(x) {
          return {
            x: x.x - g.x - g.width / 2,
            y: x.y - g.y - g.height / 2
          };
        })), U(_, {
          x: _.x - g.x - g.width / 2,
          y: _.y - g.y - g.height / 2
        });
      }), t.init(l, kv, {
        cursor: "grabbing",
        autoActivate: !0,
        data: {
          shape: f,
          elements: u,
          context: d
        }
      });
    }
  };
}
Jx.$inject = [
  "canvas",
  "dragging",
  "eventBus",
  "modeling",
  "rules"
];
function Mv(e) {
  var t = e.context, n = t.createConstraints;
  n && (n.left && (e.x = Math.max(e.x, n.left)), n.right && (e.x = Math.min(e.x, n.right)), n.top && (e.y = Math.max(e.y, n.top)), n.bottom && (e.y = Math.min(e.y, n.bottom)));
}
function Dv(e) {
  return e && e.length === 1 && !kt(e[0]);
}
var FM = 750;
function Qx(e, t, n, i, r) {
  function o(a) {
    var c = Me("g");
    we(c, r.cls("djs-drag-group", ["no-events"]));
    var l = Me("g");
    return a.forEach(function(u) {
      var d;
      u.hidden || (u.waypoints ? (d = n._createContainer("connection", l), n.drawConnection(Uo(d), u)) : (d = n._createContainer("shape", l), n.drawShape(Uo(d), u), An(d, u.x, u.y)), i.addDragger(u, c, d));
    }), c;
  }
  t.on("create.move", FM, function(a) {
    var c = a.hover, l = a.context, u = l.elements, d = l.dragGroup;
    d || (d = l.dragGroup = o(u));
    var f;
    c ? (d.parentNode || (f = e.getActiveLayer(), ze(f, d)), An(d, a.x, a.y)) : qt(d);
  }), t.on("create.cleanup", function(a) {
    var c = a.context, l = c.dragGroup;
    l && qt(l);
  });
}
Qx.$inject = [
  "canvas",
  "eventBus",
  "graphicsFactory",
  "previewSupport",
  "styles"
];
const Zu = {
  __depends__: [
    Ir,
    es,
    dr,
    pr
  ],
  __init__: [
    "create",
    "createPreview"
  ],
  create: ["type", Jx],
  createPreview: ["type", Qx]
};
function Hh(e) {
  var t = this;
  this._lastMoveEvent = null;
  function n(i) {
    t._lastMoveEvent = i;
  }
  e.on("canvas.init", function(i) {
    var r = t._svg = i.svg;
    r.addEventListener("mousemove", n);
  }), e.on("canvas.destroy", function() {
    t._lastMouseEvent = null, t._svg.removeEventListener("mousemove", n);
  });
}
Hh.$inject = ["eventBus"];
Hh.prototype.getLastMoveEvent = function() {
  return this._lastMoveEvent || HM(0, 0);
};
function HM(e, t) {
  var n = document.createEvent("MouseEvent"), i = e, r = t, o = e, a = t;
  return n.initMouseEvent && n.initMouseEvent(
    "mousemove",
    !0,
    !0,
    window,
    0,
    i,
    r,
    o,
    a,
    !1,
    !1,
    !1,
    !1,
    0,
    null
  ), n;
}
const fc = {
  __init__: ["mouse"],
  mouse: ["type", Hh]
};
function Yi(e, t, n, i, r, o, a, c) {
  this._canvas = e, this._create = t, this._clipboard = n, this._elementFactory = i, this._eventBus = r, this._modeling = o, this._mouse = a, this._rules = c, r.on("copyPaste.copyElement", function(l) {
    var u = l.descriptor, d = l.element, f = l.elements;
    u.priority = 1, u.id = d.id;
    var y = gt(f, function(g) {
      return g === d.parent;
    });
    y && (u.parent = d.parent.id), zM(d) && (u.priority = 2, u.host = d.host.id), kt(d) && (u.priority = 3, u.source = d.source.id, u.target = d.target.id, u.waypoints = VM(d)), vt(d) && (u.priority = 4, u.labelTarget = d.labelTarget.id), z(["x", "y", "width", "height"], function(g) {
      je(d[g]) && (u[g] = d[g]);
    }), u.hidden = d.hidden, u.collapsed = d.collapsed;
  }), r.on("copyPaste.pasteElements", function(l) {
    var u = l.hints;
    U(u, {
      createElementsBehavior: !1
    });
  });
}
Yi.$inject = [
  "canvas",
  "create",
  "clipboard",
  "elementFactory",
  "eventBus",
  "modeling",
  "mouse",
  "rules"
];
Yi.prototype.copy = function(e) {
  var t, n;
  return Ke(e) || (e = e ? [e] : []), t = this._eventBus.fire("copyPaste.canCopyElements", {
    elements: e
  }), t === !1 ? n = {} : n = this.createTree(Ke(t) ? t : e), this._clipboard.set(n), this._eventBus.fire("copyPaste.elementsCopied", {
    elements: e,
    tree: n
  }), n;
};
Yi.prototype.paste = function(e) {
  var t = this._clipboard.get();
  if (!this._clipboard.isEmpty()) {
    var n = e && e.hints || {};
    this._eventBus.fire("copyPaste.pasteElements", {
      hints: n
    });
    var i = this._createElements(t);
    if (e && e.element && e.point)
      return this._paste(i, e.element, e.point, n);
    this._create.start(this._mouse.getLastMoveEvent(), i, {
      hints: n || {}
    });
  }
};
Yi.prototype._paste = function(e, t, n, i) {
  z(e, function(o) {
    je(o.x) || (o.x = 0), je(o.y) || (o.y = 0);
  });
  var r = pn(e);
  return z(e, function(o) {
    kt(o) && (o.waypoints = gn(o.waypoints, function(a) {
      return {
        x: a.x - r.x - r.width / 2,
        y: a.y - r.y - r.height / 2
      };
    })), U(o, {
      x: o.x - r.x - r.width / 2,
      y: o.y - r.y - r.height / 2
    });
  }), this._modeling.createElements(e, n, t, U({}, i));
};
Yi.prototype._createElements = function(e) {
  var t = this, n = this._eventBus, i = {}, r = [];
  return z(e, function(o, a) {
    o = Gi(o, "priority"), z(o, function(c) {
      var l = U({}, ur(c, ["priority"]));
      i[c.parent] ? l.parent = i[c.parent] : delete l.parent, n.fire("copyPaste.pasteElement", {
        cache: i,
        descriptor: l
      });
      var u;
      if (kt(l)) {
        l.source = i[c.source], l.target = i[c.target], u = i[c.id] = t.createConnection(l), r.push(u);
        return;
      }
      if (vt(l)) {
        l.labelTarget = i[l.labelTarget], u = i[c.id] = t.createLabel(l), r.push(u);
        return;
      }
      l.host && (l.host = i[l.host]), u = i[c.id] = t.createShape(l), r.push(u);
    });
  }), r;
};
Yi.prototype.createConnection = function(e) {
  var t = this._elementFactory.createConnection(ur(e, ["id"]));
  return t;
};
Yi.prototype.createLabel = function(e) {
  var t = this._elementFactory.createLabel(ur(e, ["id"]));
  return t;
};
Yi.prototype.createShape = function(e) {
  var t = this._elementFactory.createShape(ur(e, ["id"]));
  return t;
};
Yi.prototype.hasRelations = function(e, t) {
  var n, i, r;
  return !(kt(e) && (i = gt(t, zi({ id: e.source.id })), r = gt(t, zi({ id: e.target.id })), !i || !r) || vt(e) && (n = gt(t, zi({ id: e.labelTarget.id })), !n));
};
Yi.prototype.createTree = function(e) {
  var t = this._rules, n = this, i = {}, r = [], o = _u(e);
  function a(u, d) {
    return t.allowed("element.copy", {
      element: u,
      elements: d
    });
  }
  function c(u, d) {
    var f = gt(r, function(y) {
      return u === y.element;
    });
    if (!f) {
      r.push({
        element: u,
        depth: d
      });
      return;
    }
    f.depth < d && (r = l(f, r), r.push({
      element: f.element,
      depth: d
    }));
  }
  function l(u, d) {
    var f = d.indexOf(u);
    return f !== -1 && d.splice(f, 1), d;
  }
  return ta(o, function(u, d, f) {
    if (vt(u))
      return;
    z(u.labels, function(_) {
      c(_, f);
    });
    function y(_) {
      _ && _.length && z(_, function(x) {
        z(x.labels, function(w) {
          c(w, f);
        }), c(x, f);
      });
    }
    z([u.attachers, u.incoming, u.outgoing], y), c(u, f);
    var g = [];
    return u.children && (g = u.children.slice()), n._eventBus.fire("copyPaste.createTree", {
      element: u,
      children: g
    }), g;
  }), e = gn(r, function(u) {
    return u.element;
  }), r = gn(r, function(u) {
    return u.descriptor = {}, n._eventBus.fire("copyPaste.copyElement", {
      descriptor: u.descriptor,
      element: u.element,
      elements: e
    }), u;
  }), r = Gi(r, function(u) {
    return u.descriptor.priority;
  }), e = gn(r, function(u) {
    return u.element;
  }), z(r, function(u) {
    var d = u.depth;
    if (!n.hasRelations(u.element, e)) {
      Nv(u.element, e);
      return;
    }
    if (!a(u.element, e)) {
      Nv(u.element, e);
      return;
    }
    i[d] || (i[d] = []), i[d].push(u.descriptor);
  }), i;
};
function zM(e) {
  return !!e.host;
}
function VM(e) {
  return gn(e.waypoints, function(t) {
    return t = Ov(t), t.original && (t.original = Ov(t.original)), t;
  });
}
function Ov(e) {
  return U({}, e);
}
function Nv(e, t) {
  var n = t.indexOf(e);
  return n === -1 ? t : t.splice(n, 1);
}
const WM = {
  __depends__: [
    IM,
    Zu,
    fc,
    dr
  ],
  __init__: ["copyPaste"],
  copyPaste: ["type", Yi]
};
function af(e, t, n) {
  Ke(n) || (n = [n]), z(n, function(i) {
    Ko(e[i]) || (t[i] = e[i]);
  });
}
var sf = 750;
function eE(e, t, n) {
  function i(l, u) {
    var d = e.create(l.$type);
    return n.copyElement(l, d, null, u);
  }
  t.on("copyPaste.copyElement", sf, function(l) {
    var u = l.descriptor, d = l.element, f = he(d);
    if (vt(d))
      return u;
    var y = u.businessObject = i(f, !0), g = u.di = i(bt(d), !0);
    g.bpmnElement = y, af(y, u, "name"), af(g, u, "isExpanded"), f.default && (u.default = f.default.id);
  });
  var r = "-bpmn-js-refs";
  function o(l) {
    return l[r] = l[r] || {};
  }
  function a(l, u) {
    l[r] = u;
  }
  function c(l, u, d) {
    var f = he(l);
    return l.default && (d[l.default] = {
      element: f,
      property: "default"
    }), l.host && (he(l).attachedToRef = he(u[l.host])), ur(d, li(d, function(y, g, _) {
      var x = g.element, w = g.property;
      return _ === l.id && (x.set(w, f), y.push(l.id)), y;
    }, []));
  }
  t.on("copyPaste.pasteElement", function(l) {
    var u = l.cache, d = l.descriptor, f = d.businessObject, y = d.di;
    if (vt(d)) {
      d.businessObject = he(u[d.labelTarget]), d.di = bt(u[d.labelTarget]);
      return;
    }
    f = d.businessObject = i(f), y = d.di = i(y), y.bpmnElement = f, af(d, f, [
      "isExpanded",
      "name"
    ]), d.type = f.$type;
  }), t.on("copyPaste.copyElement", sf, function(l) {
    var u = l.descriptor, d = l.element;
    if (P(d, "bpmn:Participant")) {
      var f = he(d);
      f.processRef && (u.processRef = i(f.processRef, !0));
    }
  }), t.on("copyPaste.pasteElement", function(l) {
    var u = l.descriptor, d = u.processRef;
    d && (u.processRef = i(d));
  }), t.on("copyPaste.pasteElement", sf, function(l) {
    var u = l.cache, d = l.descriptor;
    a(
      u,
      c(d, u, o(u))
    );
  });
}
eE.$inject = [
  "bpmnFactory",
  "eventBus",
  "moddleCopy"
];
var GM = [
  "artifacts",
  "dataInputAssociations",
  "dataOutputAssociations",
  "default",
  "flowElements",
  "lanes",
  "incoming",
  "outgoing",
  "categoryValue"
];
function dc(e, t, n) {
  this._bpmnFactory = t, this._eventBus = e, this._moddle = n, e.on("moddleCopy.canCopyProperties", function(i) {
    var r = i.propertyNames;
    if (!(!r || !r.length))
      return Gi(r, function(o) {
        return o === "extensionElements";
      });
  }), e.on("moddleCopy.canCopyProperty", function(i) {
    var r = i.parent, o = vn(r) && r.$descriptor, a = i.propertyName;
    if (a && GM.indexOf(a) !== -1 || a && o && !gt(o.properties, zi({ name: a })))
      return !1;
  }), e.on("moddleCopy.canSetCopiedProperty", function(i) {
    var r = i.property;
    if (UM(r, "bpmn:ExtensionElements") && (!r.values || !r.values.length))
      return !1;
  });
}
dc.$inject = [
  "eventBus",
  "bpmnFactory",
  "moddle"
];
dc.prototype.copyElement = function(e, t, n, i = !1) {
  var r = this;
  n && !Ke(n) && (n = [n]), n = n || od(e.$descriptor);
  var o = this._eventBus.fire("moddleCopy.canCopyProperties", {
    propertyNames: n,
    sourceElement: e,
    targetElement: t,
    clone: i
  });
  return o === !1 || (Ke(o) && (n = o), z(n, function(a) {
    var c;
    Jn(e, a) && (c = e.get(a));
    var l = r.copyProperty(c, t, a, i);
    if (yn(l)) {
      var u = r._eventBus.fire("moddleCopy.canSetCopiedProperty", {
        parent: t,
        property: l,
        propertyName: a
      });
      u !== !1 && t.set(a, l);
    }
  })), t;
};
dc.prototype.copyProperty = function(e, t, n, i = !1) {
  var r = this, o = this._eventBus.fire("moddleCopy.canCopyProperty", {
    parent: t,
    property: e,
    propertyName: n,
    clone: i
  });
  if (o !== !1) {
    if (o)
      return vn(o) && o.$type && !o.$parent && (o.$parent = t), o;
    var a = this._moddle.getPropertyDescriptor(t, n);
    if (!a.isReference)
      return a.isId ? e && this._copyId(e, t, i) : Ke(e) ? li(e, function(c, l) {
        return o = r.copyProperty(l, t, n, i), o ? c.concat(o) : c;
      }, []) : vn(e) && e.$type ? this._moddle.getElementDescriptor(e).isGeneric ? void 0 : (o = r._bpmnFactory.create(e.$type), o.$parent = t, o = r.copyElement(e, o, null, i), o) : e;
  }
};
dc.prototype._copyId = function(e, t, n = !1) {
  if (n)
    return e;
  if (!this._moddle.ids.assigned(e))
    return this._moddle.ids.claim(e, t), e;
};
function od(e, t) {
  return li(e.properties, function(n, i) {
    return t && i.default ? n : n.concat(i.name);
  }, []);
}
function UM(e, t) {
  return e && fn(e.$instanceOf) && e.$instanceOf(t);
}
const tE = {
  __depends__: [
    WM
  ],
  __init__: ["bpmnCopyPaste", "moddleCopy"],
  bpmnCopyPaste: ["type", eE],
  moddleCopy: ["type", dc]
};
var Bv = Math.round;
function zh(e, t) {
  this._modeling = e, this._eventBus = t;
}
zh.$inject = ["modeling", "eventBus"];
zh.prototype.replaceElement = function(e, t, n) {
  if (e.waypoints)
    return null;
  var i = this._modeling, r = this._eventBus;
  r.fire("replace.start", {
    element: e,
    attrs: t,
    hints: n
  });
  var o = t.width || e.width, a = t.height || e.height, c = t.x || e.x, l = t.y || e.y, u = Bv(c + o / 2), d = Bv(l + a / 2), f = i.replaceShape(
    e,
    U(
      {},
      t,
      {
        x: u,
        y: d,
        width: o,
        height: a
      }
    ),
    n
  );
  return r.fire("replace.end", {
    element: e,
    newElement: f,
    hints: n
  }), f;
};
function nE(e, t) {
  t.on("replace.end", 500, function(n) {
    const {
      newElement: i,
      hints: r = {}
    } = n;
    r.select !== !1 && e.select(i);
  });
}
nE.$inject = ["selection", "eventBus"];
const YM = {
  __init__: ["replace", "replaceSelectionBehavior"],
  replaceSelectionBehavior: ["type", nE],
  replace: ["type", zh]
};
function KM(e, t, n) {
  Ke(n) || (n = [n]), z(n, function(i) {
    Ko(e[i]) || (t[i] = e[i]);
  });
}
var qM = [
  "cancelActivity",
  "instantiate",
  "eventGatewayType",
  "triggeredByEvent",
  "isInterrupting"
];
function XM(e, t) {
  var n = e && Jn(e, "collapsed") ? e.collapsed : !pt(e), i;
  return t && (Jn(t, "collapsed") || Jn(t, "isExpanded")) ? i = Jn(t, "collapsed") ? t.collapsed : !t.isExpanded : i = n, n !== i;
}
function iE(e, t, n, i, r, o) {
  function a(c, l, u) {
    u = u || {};
    var d = l.type, f = c.businessObject;
    if (xl(f) && d === "bpmn:SubProcess" && XM(c, l))
      return i.toggleCollapse(c), c;
    var y = e.create(d), g = {
      type: d,
      businessObject: y
    };
    g.di = {}, d === "bpmn:ExclusiveGateway" && (g.di.isMarkerVisible = !0), KM(c.di, g.di, [
      "fill",
      "stroke",
      "background-color",
      "border-color",
      "color"
    ]);
    var _ = od(f.$descriptor), x = od(y.$descriptor, !0), w = ZM(_, x);
    U(y, Ui(l, qM));
    var B = tt(w, function(k) {
      return k === "eventDefinitions" ? Lv(c, l.eventDefinitionType) : k === "loopCharacteristics" ? !Bn(y) : Jn(y, k) || k === "processRef" && l.isExpanded === !1 || k === "triggeredByEvent" ? !1 : k === "isForCompensation" ? !Bn(y) : !0;
    });
    if (y = n.copyElement(
      f,
      y,
      B
    ), l.eventDefinitionType && (Lv(y, l.eventDefinitionType) || (g.eventDefinitionType = l.eventDefinitionType, g.eventDefinitionAttrs = l.eventDefinitionAttrs)), P(f, "bpmn:Activity")) {
      if (xl(f))
        g.isExpanded = pt(c);
      else if (l && Jn(l, "isExpanded")) {
        g.isExpanded = l.isExpanded;
        var N = t.getDefaultSize(y, {
          isExpanded: g.isExpanded
        });
        g.width = N.width, g.height = N.height, g.x = c.x - (g.width - c.width) / 2, g.y = c.y - (g.height - c.height) / 2;
      }
      pt(c) && !P(f, "bpmn:Task") && g.isExpanded && (g.width = c.width, g.height = c.height);
    }
    return xl(f) && !xl(y) && (u.moveChildren = !1), P(f, "bpmn:Participant") && (l.isExpanded === !0 ? y.processRef = e.create("bpmn:Process") : u.moveChildren = !1, g.width = c.width, g.height = t.getDefaultSize(g).height), o.allowed("shape.resize", { shape: y }) || (g.height = t.getDefaultSize(g).height, g.width = t.getDefaultSize(g).width), y.name = f.name, rt(f, [
      "bpmn:ExclusiveGateway",
      "bpmn:InclusiveGateway",
      "bpmn:Activity"
    ]) && rt(y, [
      "bpmn:ExclusiveGateway",
      "bpmn:InclusiveGateway",
      "bpmn:Activity"
    ]) && (y.default = f.default), l.host && !P(f, "bpmn:BoundaryEvent") && P(y, "bpmn:BoundaryEvent") && (g.host = l.host), (g.type === "bpmn:DataStoreReference" || g.type === "bpmn:DataObjectReference") && (g.x = c.x + (c.width - g.width) / 2), r.replaceElement(c, g, { ...u, targetElement: l });
  }
  this.replaceElement = a;
}
iE.$inject = [
  "bpmnFactory",
  "elementFactory",
  "moddleCopy",
  "modeling",
  "replace",
  "rules"
];
function xl(e) {
  return P(e, "bpmn:SubProcess");
}
function Lv(e, t) {
  var n = he(e);
  return t && n.get("eventDefinitions").some(function(i) {
    return P(i, t);
  });
}
function ZM(e, t) {
  return e.filter(function(n) {
    return t.includes(n);
  });
}
const rE = {
  __depends__: [
    tE,
    YM,
    pr
  ],
  bpmnReplace: ["type", iE]
};
var JM = 250;
function aa(e) {
  this._eventBus = e, this._tools = [], this._active = null;
}
aa.$inject = ["eventBus"];
aa.prototype.registerTool = function(e, t) {
  var n = this._tools;
  if (!t)
    throw new Error(`A tool has to be registered with it's "events"`);
  n.push(e), this.bindEvents(e, t);
};
aa.prototype.isActive = function(e) {
  return e && this._active === e;
};
aa.prototype.length = function(e) {
  return this._tools.length;
};
aa.prototype.setActive = function(e) {
  var t = this._eventBus;
  this._active !== e && (this._active = e, t.fire("tool-manager.update", { tool: e }));
};
aa.prototype.bindEvents = function(e, t) {
  var n = this._eventBus, i = [];
  n.on(t.tool + ".init", function(r) {
    var o = r.context;
    if (!o.reactivate && this.isActive(e)) {
      this.setActive(null);
      return;
    }
    this.setActive(e);
  }, this), z(t, function(r) {
    i.push(r + ".ended"), i.push(r + ".canceled");
  }), n.on(i, JM, function(r) {
    this._active && (QM(r) || this.setActive(null));
  }, this);
};
function QM(e) {
  var t = e.originalEvent && e.originalEvent.target;
  return t && co(t, '.group[data-group="tools"]');
}
const Ju = {
  __depends__: [
    Ir
  ],
  __init__: ["toolManager"],
  toolManager: ["type", aa]
};
function eD(e, t) {
  if (e === "x") {
    if (t > 0)
      return "e";
    if (t < 0)
      return "w";
  }
  if (e === "y") {
    if (t > 0)
      return "s";
    if (t < 0)
      return "n";
  }
  return null;
}
function tD(e, t) {
  var n = [];
  return z(e.concat(t), function(i) {
    var r = i.incoming, o = i.outgoing;
    z(r.concat(o), function(a) {
      var c = a.source, l = a.target;
      (As(e, c) || As(e, l) || As(t, c) || As(t, l)) && (As(n, a) || n.push(a));
    });
  }), n;
}
function As(e, t) {
  return e.indexOf(t) !== -1;
}
function nD(e, t, n) {
  var i = e.x, r = e.y, o = e.width, a = e.height, c = n.x, l = n.y;
  switch (t) {
    case "n":
      return {
        x: i,
        y: r + l,
        width: o,
        height: a - l
      };
    case "s":
      return {
        x: i,
        y: r,
        width: o,
        height: a + l
      };
    case "w":
      return {
        x: i + c,
        y: r,
        width: o - c,
        height: a
      };
    case "e":
      return {
        x: i,
        y: r,
        width: o + c,
        height: a
      };
    default:
      throw new Error("unknown direction: " + t);
  }
}
var cf = Math.abs, iD = Math.round, Sr = {
  x: "width",
  y: "height"
}, oE = "crosshair", Jr = {
  n: "top",
  w: "left",
  s: "bottom",
  e: "right"
}, rD = 1500, El = {
  n: "s",
  w: "e",
  s: "n",
  e: "w"
}, wl = 20;
function Oi(e, t, n, i, r, o, a) {
  this._canvas = e, this._dragging = t, this._eventBus = n, this._modeling = i, this._rules = r, this._toolManager = o, this._mouse = a;
  var c = this;
  o.registerTool("space", {
    tool: "spaceTool.selection",
    dragging: "spaceTool"
  }), n.on("spaceTool.selection.end", function(l) {
    n.once("spaceTool.selection.ended", function() {
      c.activateMakeSpace(l.originalEvent);
    });
  }), n.on("spaceTool.move", rD, function(l) {
    var u = l.context, d = u.initialized;
    d || (d = u.initialized = c.init(l, u)), d && $v(l);
  }), n.on("spaceTool.end", function(l) {
    var u = l.context, d = u.axis, f = u.direction, y = u.movingShapes, g = u.resizingShapes, _ = u.start;
    if (u.initialized) {
      $v(l);
      var x = {
        x: 0,
        y: 0
      };
      x[d] = iD(l["d" + d]), c.makeSpace(y, g, x, f, _), n.once("spaceTool.ended", function(w) {
        c.activateSelection(w.originalEvent, !0, !0);
      });
    }
  });
}
Oi.$inject = [
  "canvas",
  "dragging",
  "eventBus",
  "modeling",
  "rules",
  "toolManager",
  "mouse"
];
Oi.prototype.activateSelection = function(e, t, n) {
  this._dragging.init(e, "spaceTool.selection", {
    autoActivate: t,
    cursor: oE,
    data: {
      context: {
        reactivate: n
      }
    },
    trapClick: !1
  });
};
Oi.prototype.activateMakeSpace = function(e) {
  this._dragging.init(e, "spaceTool", {
    autoActivate: !0,
    cursor: oE,
    data: {
      context: {}
    }
  });
};
Oi.prototype.makeSpace = function(e, t, n, i, r) {
  return this._modeling.createSpace(e, t, n, i, r);
};
Oi.prototype.init = function(e, t) {
  var n = cf(e.dx) > cf(e.dy) ? "x" : "y", i = e["d" + n], r = e[n] - i;
  if (cf(i) < 5)
    return !1;
  i < 0 && (i *= -1), zs(e) && (i *= -1);
  var o = eD(n, i), a = this._canvas.getRootElement();
  !ru(e) && e.hover && (a = e.hover);
  var c = [
    ...ec(a, !0),
    ...a.attachers || []
  ], l = this.calculateAdjustments(c, n, i, r), u = this._eventBus.fire("spaceTool.getMinDimensions", {
    axis: n,
    direction: o,
    shapes: l.resizingShapes,
    start: r
  }), d = oD(l, n, o, r, u);
  return U(
    t,
    l,
    {
      axis: n,
      direction: o,
      spaceToolConstraints: d,
      start: r
    }
  ), Ou("resize-" + (n === "x" ? "ew" : "ns")), !0;
};
Oi.prototype.calculateAdjustments = function(e, t, n, i) {
  var r = this._rules, o = [], a = [], c = [], l = [];
  function u(y) {
    o.includes(y) || o.push(y);
    var g = y.label;
    g && !o.includes(g) && o.push(g);
  }
  function d(y) {
    a.includes(y) || a.push(y);
  }
  z(e, function(y) {
    if (!(!y.parent || vt(y))) {
      if (kt(y)) {
        l.push(y);
        return;
      }
      var g = y[t], _ = g + y[Sr[t]];
      if (aD(y) && (n > 0 && Fe(y)[t] > i || n < 0 && Fe(y)[t] < i)) {
        c.push(y);
        return;
      }
      if (n > 0 && g > i || n < 0 && _ < i) {
        u(y);
        return;
      }
      if (g < i && _ > i && r.allowed("shape.resize", { shape: y })) {
        d(y);
        return;
      }
    }
  }), z(o, function(y) {
    var g = y.attachers;
    g && z(g, function(_) {
      u(_);
    });
  });
  var f = o.concat(a);
  return z(c, function(y) {
    var g = y.host;
    Vo(f, g) && u(y);
  }), f = o.concat(a), z(l, function(y) {
    var g = y.source, _ = y.target, x = y.label;
    Vo(f, g) && Vo(f, _) && x && u(x);
  }), {
    movingShapes: o,
    resizingShapes: a
  };
};
Oi.prototype.toggle = function() {
  if (this.isActive())
    return this._dragging.cancel();
  var e = this._mouse.getLastMoveEvent();
  this.activateSelection(e, !!e);
};
Oi.prototype.isActive = function() {
  var e = this._dragging.context();
  return e ? /^spaceTool/.test(e.prefix) : !1;
};
function Iv(e) {
  return {
    top: e.top - wl,
    right: e.right + wl,
    bottom: e.bottom + wl,
    left: e.left - wl
  };
}
function $v(e) {
  var t = e.context, n = t.spaceToolConstraints;
  if (n) {
    var i, r;
    je(n.left) && (i = Math.max(e.x, n.left), e.dx = e.dx + i - e.x, e.x = i), je(n.right) && (i = Math.min(e.x, n.right), e.dx = e.dx + i - e.x, e.x = i), je(n.top) && (r = Math.max(e.y, n.top), e.dy = e.dy + r - e.y, e.y = r), je(n.bottom) && (r = Math.min(e.y, n.bottom), e.dy = e.dy + r - e.y, e.y = r);
  }
}
function oD(e, t, n, i, r) {
  var o = e.movingShapes, a = e.resizingShapes;
  if (a.length) {
    var c = {}, l, u;
    return z(a, function(d) {
      var f = d.attachers, y = d.children, g = Le(d), _ = tt(y, function(X) {
        return !kt(X) && !vt(X) && !Vo(o, X) && !Vo(a, X);
      }), x = tt(y, function(X) {
        return !kt(X) && !vt(X) && Vo(o, X);
      }), w, B, N, k = [], A = [], D, j, W, $;
      _.length && (B = Iv(Le(pn(_))), w = i - g[Jr[n]] + B[Jr[n]], n === "n" ? c.bottom = u = je(u) ? Math.min(u, w) : w : n === "w" ? c.right = u = je(u) ? Math.min(u, w) : w : n === "s" ? c.top = l = je(l) ? Math.max(l, w) : w : n === "e" && (c.left = l = je(l) ? Math.max(l, w) : w)), x.length && (N = Iv(Le(pn(x))), w = i - N[Jr[El[n]]] + g[Jr[El[n]]], n === "n" ? c.bottom = u = je(u) ? Math.min(u, w) : w : n === "w" ? c.right = u = je(u) ? Math.min(u, w) : w : n === "s" ? c.top = l = je(l) ? Math.max(l, w) : w : n === "e" && (c.left = l = je(l) ? Math.max(l, w) : w)), f && f.length && (f.forEach(function(X) {
        Vo(o, X) ? k.push(X) : A.push(X);
      }), k.length && (D = Le(pn(k.map(Fe))), j = g[Jr[El[n]]] - (D[Jr[El[n]]] - i)), A.length && (W = Le(pn(A.map(Fe))), $ = W[Jr[n]] - (g[Jr[n]] - i)), n === "n" ? (w = Math.min(j || 1 / 0, $ || 1 / 0), c.bottom = u = je(u) ? Math.min(u, w) : w) : n === "w" ? (w = Math.min(j || 1 / 0, $ || 1 / 0), c.right = u = je(u) ? Math.min(u, w) : w) : n === "s" ? (w = Math.max(j || -1 / 0, $ || -1 / 0), c.top = l = je(l) ? Math.max(l, w) : w) : n === "e" && (w = Math.max(j || -1 / 0, $ || -1 / 0), c.left = l = je(l) ? Math.max(l, w) : w));
      var Z = r && r[d.id];
      Z && (n === "n" ? (w = i + d[Sr[t]] - Z[Sr[t]], c.bottom = u = je(u) ? Math.min(u, w) : w) : n === "w" ? (w = i + d[Sr[t]] - Z[Sr[t]], c.right = u = je(u) ? Math.min(u, w) : w) : n === "s" ? (w = i - d[Sr[t]] + Z[Sr[t]], c.top = l = je(l) ? Math.max(l, w) : w) : n === "e" && (w = i - d[Sr[t]] + Z[Sr[t]], c.left = l = je(l) ? Math.max(l, w) : w));
    }), c;
  }
}
function Vo(e, t) {
  return e.indexOf(t) !== -1;
}
function aD(e) {
  return !!e.host;
}
var lf = "djs-dragging", jv = "djs-resizing", sD = 250, Sl = Math.max;
function aE(e, t, n, i, r) {
  function o(a, c) {
    z(a, function(l) {
      r.addDragger(l, c), n.addMarker(l, lf);
    });
  }
  e.on("spaceTool.selection.start", function(a) {
    var c = n.getLayer("space"), l = a.context, u = {
      x: "M 0,-10000 L 0,10000",
      y: "M -10000,0 L 10000,0"
    }, d = Me("g");
    we(d, i.cls("djs-crosshair-group", ["no-events"])), ze(c, d);
    var f = Me("path");
    we(f, "d", u.x), dt(f).add("djs-crosshair"), ze(d, f);
    var y = Me("path");
    we(y, "d", u.y), dt(y).add("djs-crosshair"), ze(d, y), l.crosshairGroup = d;
  }), e.on("spaceTool.selection.move", function(a) {
    var c = a.context.crosshairGroup;
    An(c, a.x, a.y);
  }), e.on("spaceTool.selection.cleanup", function(a) {
    var c = a.context, l = c.crosshairGroup;
    l && qt(l);
  }), e.on("spaceTool.move", sD, function(a) {
    var c = a.context, l = c.line, u = c.axis, d = c.movingShapes, f = c.resizingShapes;
    if (c.initialized) {
      if (!c.dragGroup) {
        var y = n.getLayer("space");
        l = Me("path"), we(l, "d", "M0,0 L0,0"), dt(l).add("djs-crosshair"), ze(y, l), c.line = l;
        var g = Me("g");
        we(g, i.cls("djs-drag-group", ["no-events"])), ze(n.getActiveLayer(), g), o(d, g);
        var _ = c.movingConnections = t.filter(function(A) {
          var D = !1;
          z(d, function(Z) {
            z(Z.outgoing, function(X) {
              A === X && (D = !0);
            });
          });
          var j = !1;
          z(d, function(Z) {
            z(Z.incoming, function(X) {
              A === X && (j = !0);
            });
          });
          var W = !1;
          z(f, function(Z) {
            z(Z.outgoing, function(X) {
              A === X && (W = !0);
            });
          });
          var $ = !1;
          return z(f, function(Z) {
            z(Z.incoming, function(X) {
              A === X && ($ = !0);
            });
          }), kt(A) && (D || W) && (j || $);
        });
        o(_, g), c.dragGroup = g;
      }
      if (!c.frameGroup) {
        var x = Me("g");
        we(x, i.cls("djs-frame-group", ["no-events"])), ze(n.getActiveLayer(), x);
        var w = [];
        z(f, function(A) {
          var D = r.addFrame(A, x), j = D.getBBox();
          w.push({
            element: D,
            initialBounds: j
          }), n.addMarker(A, jv);
        }), c.frameGroup = x, c.frames = w;
      }
      var B = {
        x: "M" + a.x + ", -10000 L" + a.x + ", 10000",
        y: "M -10000, " + a.y + " L 10000, " + a.y
      };
      we(l, { d: B[u] });
      var N = { x: "y", y: "x" }, k = { x: a.dx, y: a.dy };
      k[N[c.axis]] = 0, An(c.dragGroup, k.x, k.y), z(c.frames, function(A) {
        var D = A.element, j = A.initialBounds, W, $;
        c.direction === "e" ? we(D, {
          width: Sl(j.width + k.x, 5)
        }) : (W = Sl(j.width - k.x, 5), we(D, {
          width: W,
          x: j.x + j.width - W
        })), c.direction === "s" ? we(D, {
          height: Sl(j.height + k.y, 5)
        }) : ($ = Sl(j.height - k.y, 5), we(D, {
          height: $,
          y: j.y + j.height - $
        }));
      });
    }
  }), e.on("spaceTool.cleanup", function(a) {
    var c = a.context, l = c.movingShapes, u = c.movingConnections, d = c.resizingShapes, f = c.line, y = c.dragGroup, g = c.frameGroup;
    z(l, function(_) {
      n.removeMarker(_, lf);
    }), z(u, function(_) {
      n.removeMarker(_, lf);
    }), y && (qt(f), qt(y)), z(d, function(_) {
      n.removeMarker(_, jv);
    }), g && qt(g);
  });
}
aE.$inject = [
  "eventBus",
  "elementRegistry",
  "canvas",
  "styles",
  "previewSupport"
];
const cD = {
  __init__: ["spaceToolPreview"],
  __depends__: [
    Ir,
    dr,
    Ju,
    es,
    fc
  ],
  spaceTool: ["type", Oi],
  spaceToolPreview: ["type", aE]
};
function Qu(e) {
  e.invoke(Oi, this);
}
Qu.$inject = [
  "injector"
];
Pe(Qu, Oi);
Qu.prototype.calculateAdjustments = function(e, t, n, i) {
  var r = Oi.prototype.calculateAdjustments.call(this, e, t, n, i);
  return r.resizingShapes = r.resizingShapes.filter(function(o) {
    return !(P(o, "bpmn:TextAnnotation") || lD(o) && (t === "y" && Pn(o) || t === "x" && !Pn(o)));
  }), r;
};
function lD(e) {
  return P(e, "bpmn:Participant") && !he(e).processRef;
}
const sE = {
  __depends__: [cD],
  spaceTool: ["type", Qu]
};
function Wt(e, t) {
  this._handlerMap = {}, this._stack = [], this._stackIdx = -1, this._currentExecution = {
    actions: [],
    dirty: [],
    trigger: null
  }, this._injector = t, this._eventBus = e, this._uid = 1, e.on([
    "diagram.destroy",
    "diagram.clear"
  ], function() {
    this.clear(!1);
  }, this);
}
Wt.$inject = ["eventBus", "injector"];
Wt.prototype.execute = function(e, t) {
  if (!e)
    throw new Error("command required");
  this._currentExecution.trigger = "execute";
  const n = { command: e, context: t };
  this._pushAction(n), this._internalExecute(n), this._popAction();
};
Wt.prototype.canExecute = function(e, t) {
  const n = { command: e, context: t }, i = this._getHandler(e);
  let r = this._fire(e, "canExecute", n);
  if (r === void 0) {
    if (!i)
      return !1;
    i.canExecute && (r = i.canExecute(t));
  }
  return r;
};
Wt.prototype.clear = function(e) {
  this._stack.length = 0, this._stackIdx = -1, e !== !1 && this._fire("changed", { trigger: "clear" });
};
Wt.prototype.undo = function() {
  let e = this._getUndoAction(), t;
  if (e) {
    for (this._currentExecution.trigger = "undo", this._pushAction(e); e && (this._internalUndo(e), t = this._getUndoAction(), !(!t || t.id !== e.id)); )
      e = t;
    this._popAction();
  }
};
Wt.prototype.redo = function() {
  let e = this._getRedoAction(), t;
  if (e) {
    for (this._currentExecution.trigger = "redo", this._pushAction(e); e && (this._internalExecute(e, !0), t = this._getRedoAction(), !(!t || t.id !== e.id)); )
      e = t;
    this._popAction();
  }
};
Wt.prototype.register = function(e, t) {
  this._setHandler(e, t);
};
Wt.prototype.registerHandler = function(e, t) {
  if (!e || !t)
    throw new Error("command and handlerCls must be defined");
  const n = this._injector.instantiate(t);
  this.register(e, n);
};
Wt.prototype.canUndo = function() {
  return !!this._getUndoAction();
};
Wt.prototype.canRedo = function() {
  return !!this._getRedoAction();
};
Wt.prototype._getRedoAction = function() {
  return this._stack[this._stackIdx + 1];
};
Wt.prototype._getUndoAction = function() {
  return this._stack[this._stackIdx];
};
Wt.prototype._internalUndo = function(e) {
  const t = e.command, n = e.context, i = this._getHandler(t);
  this._atomicDo(() => {
    this._fire(t, "revert", e), i.revert && this._markDirty(i.revert(n)), this._revertedAction(e), this._fire(t, "reverted", e);
  });
};
Wt.prototype._fire = function(e, t, n) {
  arguments.length < 3 && (n = t, t = null);
  const i = t ? [e + "." + t, t] : [e];
  let r;
  n = this._eventBus.createEvent(n);
  for (const o of i)
    if (r = this._eventBus.fire("commandStack." + o, n), n.cancelBubble)
      break;
  return r;
};
Wt.prototype._createId = function() {
  return this._uid++;
};
Wt.prototype._atomicDo = function(e) {
  const t = this._currentExecution;
  t.atomic = !0;
  try {
    e();
  } finally {
    t.atomic = !1;
  }
};
Wt.prototype._internalExecute = function(e, t) {
  const n = e.command, i = e.context, r = this._getHandler(n);
  if (!r)
    throw new Error("no command handler registered for <" + n + ">");
  this._pushAction(e), t || (this._fire(n, "preExecute", e), r.preExecute && r.preExecute(i), this._fire(n, "preExecuted", e)), this._atomicDo(() => {
    this._fire(n, "execute", e), r.execute && this._markDirty(r.execute(i)), this._executedAction(e, t), this._fire(n, "executed", e);
  }), t || (this._fire(n, "postExecute", e), r.postExecute && r.postExecute(i), this._fire(n, "postExecuted", e)), this._popAction();
};
Wt.prototype._pushAction = function(e) {
  const t = this._currentExecution, n = t.actions, i = n[0];
  if (t.atomic)
    throw new Error("illegal invocation in <execute> or <revert> phase (action: " + e.command + ")");
  e.id || (e.id = i && i.id || this._createId()), n.push(e);
};
Wt.prototype._popAction = function() {
  const e = this._currentExecution, t = e.trigger, n = e.actions, i = e.dirty;
  n.pop(), n.length || (this._eventBus.fire("elements.changed", { elements: o_("id", i.reverse()) }), i.length = 0, this._fire("changed", { trigger: t }), e.trigger = null);
};
Wt.prototype._markDirty = function(e) {
  const t = this._currentExecution;
  e && (e = Ke(e) ? e : [e], t.dirty = t.dirty.concat(e));
};
Wt.prototype._executedAction = function(e, t) {
  const n = ++this._stackIdx;
  t || this._stack.splice(n, this._stack.length, e);
};
Wt.prototype._revertedAction = function(e) {
  this._stackIdx--;
};
Wt.prototype._getHandler = function(e) {
  return this._handlerMap[e];
};
Wt.prototype._setHandler = function(e, t) {
  if (!e || !t)
    throw new Error("command and handler required");
  if (this._handlerMap[e])
    throw new Error("overriding handler for command <" + e + ">");
  this._handlerMap[e] = t;
};
const uD = {
  commandStack: ["type", Wt]
};
function io(e, t) {
  if (typeof t != "function")
    throw new Error("removeFn iterator must be a function");
  if (e) {
    for (var n; n = e[0]; )
      t(n);
    return e;
  }
}
var pD = 250, Fv = 1400;
function Vh(e, t, n) {
  le.call(this, t);
  var i = e.get("movePreview", !1);
  t.on("shape.move.start", Fv, function(r) {
    var o = r.context, a = o.shapes, c = o.validatedShapes;
    o.shapes = Hv(a), o.validatedShapes = Hv(c);
  }), i && t.on("shape.move.start", pD, function(r) {
    var o = r.context, a = o.shapes, c = [];
    z(a, function(l) {
      z(l.labels, function(u) {
        !u.hidden && o.shapes.indexOf(u) === -1 && c.push(u), l.labelTarget && c.push(l);
      });
    }), z(c, function(l) {
      i.makeDraggable(o, l, !0);
    });
  }), this.preExecuted("elements.move", Fv, function(r) {
    var o = r.context, a = o.closure, c = a.enclosedElements, l = [];
    z(c, function(u) {
      z(u.labels, function(d) {
        c[d.id] || l.push(d);
      });
    }), a.addAll(l);
  }), this.preExecute([
    "connection.delete",
    "shape.delete"
  ], function(r) {
    var o = r.context, a = o.connection || o.shape;
    io(a.labels, function(c) {
      n.removeShape(c, { nested: !0 });
    });
  }), this.execute("shape.delete", function(r) {
    var o = r.context, a = o.shape, c = a.labelTarget;
    c && (o.labelTargetIndex = bd(c.labels, a), o.labelTarget = c, a.labelTarget = null);
  }), this.revert("shape.delete", function(r) {
    var o = r.context, a = o.shape, c = o.labelTarget, l = o.labelTargetIndex;
    c && (dn(c.labels, a, l), a.labelTarget = c);
  });
}
Pe(Vh, le);
Vh.$inject = [
  "injector",
  "eventBus",
  "modeling"
];
function Hv(e) {
  return tt(e, function(t) {
    return e.indexOf(t.labelTarget) === -1;
  });
}
const fD = {
  __init__: ["labelSupport"],
  labelSupport: ["type", Vh]
};
var dD = 251, zv = 1401, Vv = "attach-ok";
function Wh(e, t, n, i, r) {
  le.call(this, t);
  var o = e.get("movePreview", !1);
  t.on("shape.move.start", zv, function(a) {
    var c = a.context, l = c.shapes, u = c.validatedShapes;
    c.shapes = hD(l), c.validatedShapes = mD(u);
  }), o && t.on("shape.move.start", dD, function(a) {
    var c = a.context, l = c.shapes, u = ad(l);
    z(u, function(d) {
      o.makeDraggable(c, d, !0), z(d.labels, function(f) {
        o.makeDraggable(c, f, !0);
      });
    });
  }), o && t.on("shape.move.start", function(a) {
    var c = a.context, l = c.shapes;
    if (l.length === 1) {
      var u = l[0], d = u.host;
      d && (n.addMarker(d, Vv), t.once([
        "shape.move.out",
        "shape.move.cleanup"
      ], function() {
        n.removeMarker(d, Vv);
      }));
    }
  }), this.preExecuted("elements.move", zv, function(a) {
    var c = a.context, l = c.closure, u = c.shapes, d = ad(u);
    z(d, function(f) {
      l.add(f, l.topLevel[f.host.id]);
    });
  }), this.postExecuted("elements.move", function(a) {
    var c = a.context, l = c.shapes, u = c.newHost, d;
    u && l.length !== 1 || (u ? d = l : d = tt(l, function(f) {
      var y = f.host;
      return yD(f) && !gD(l, y);
    }), z(d, function(f) {
      r.updateAttachment(f, u);
    }));
  }), this.postExecuted("elements.move", function(a) {
    var c = a.context.shapes;
    z(c, function(l) {
      z(l.attachers, function(u) {
        z(u.outgoing.slice(), function(d) {
          var f = i.allowed("connection.reconnect", {
            connection: d,
            source: d.source,
            target: d.target
          });
          f || r.removeConnection(d);
        }), z(u.incoming.slice(), function(d) {
          var f = i.allowed("connection.reconnect", {
            connection: d,
            source: d.source,
            target: d.target
          });
          f || r.removeConnection(d);
        });
      });
    });
  }), this.postExecute("shape.create", function(a) {
    var c = a.context, l = c.shape, u = c.host;
    u && r.updateAttachment(l, u);
  }), this.postExecute("shape.replace", function(a) {
    var c = a.context, l = c.oldShape, u = c.newShape;
    io(l.attachers, function(d) {
      var f = i.allowed("elements.move", {
        target: u,
        shapes: [d]
      });
      f === "attach" ? r.updateAttachment(d, u) : r.removeShape(d);
    }), u.attachers.length && z(u.attachers, function(d) {
      var f = vv(d, l, u);
      r.moveShape(d, f, d.parent);
    });
  }), this.postExecute("shape.resize", function(a) {
    var c = a.context, l = c.shape, u = c.oldBounds, d = c.newBounds, f = l.attachers, y = c.hints || {};
    y.attachSupport !== !1 && z(f, function(g) {
      var _ = vv(g, u, d);
      r.moveShape(g, _, g.parent), z(g.labels, function(x) {
        r.moveShape(x, _, x.parent);
      });
    });
  }), this.preExecute("shape.delete", function(a) {
    var c = a.context.shape;
    io(c.attachers, function(l) {
      r.removeShape(l);
    }), c.host && r.updateAttachment(c, null);
  });
}
Pe(Wh, le);
Wh.$inject = [
  "injector",
  "eventBus",
  "canvas",
  "rules",
  "modeling"
];
function ad(e) {
  return ql(gn(e, function(t) {
    return t.attachers || [];
  }));
}
function hD(e) {
  var t = ad(e);
  return lS("id", e, t);
}
function mD(e) {
  var t = Ga(e, "id");
  return tt(e, function(n) {
    for (; n; ) {
      if (n.host && t[n.host.id])
        return !1;
      n = n.parent;
    }
    return !0;
  });
}
function yD(e) {
  return !!e.host;
}
function gD(e, t) {
  return e.indexOf(t) !== -1;
}
const vD = {
  __depends__: [
    dr
  ],
  __init__: ["attachSupport"],
  attachSupport: ["type", Wh]
};
function Ni(e) {
  this._model = e;
}
Ni.$inject = ["moddle"];
Ni.prototype._needsId = function(e) {
  return rt(e, [
    "bpmn:RootElement",
    "bpmn:FlowElement",
    "bpmn:MessageFlow",
    "bpmn:DataAssociation",
    "bpmn:Artifact",
    "bpmn:Participant",
    "bpmn:Lane",
    "bpmn:LaneSet",
    "bpmn:Process",
    "bpmn:Collaboration",
    "bpmndi:BPMNShape",
    "bpmndi:BPMNEdge",
    "bpmndi:BPMNDiagram",
    "bpmndi:BPMNPlane",
    "bpmn:Property",
    "bpmn:CategoryValue"
  ]);
};
Ni.prototype._ensureId = function(e) {
  if (e.id) {
    this._model.ids.claim(e.id, e);
    return;
  }
  var t;
  P(e, "bpmn:Activity") ? t = "Activity" : P(e, "bpmn:Event") ? t = "Event" : P(e, "bpmn:Gateway") ? t = "Gateway" : rt(e, ["bpmn:SequenceFlow", "bpmn:MessageFlow"]) ? t = "Flow" : t = (e.$type || "").replace(/^[^:]*:/g, ""), t += "_", !e.id && this._needsId(e) && (e.id = this._model.ids.nextPrefixed(t, e));
};
Ni.prototype.create = function(e, t) {
  var n = this._model.create(e, t || {});
  return this._ensureId(n), n;
};
Ni.prototype.createDiLabel = function() {
  return this.create("bpmndi:BPMNLabel", {
    bounds: this.createDiBounds()
  });
};
Ni.prototype.createDiShape = function(e, t) {
  return this.create("bpmndi:BPMNShape", U({
    bpmnElement: e,
    bounds: this.createDiBounds()
  }, t));
};
Ni.prototype.createDiBounds = function(e) {
  return this.create("dc:Bounds", e);
};
Ni.prototype.createDiWaypoints = function(e) {
  var t = this;
  return gn(e, function(n) {
    return t.createDiWaypoint(n);
  });
};
Ni.prototype.createDiWaypoint = function(e) {
  return this.create("dc:Point", Ui(e, ["x", "y"]));
};
Ni.prototype.createDiEdge = function(e, t) {
  return this.create("bpmndi:BPMNEdge", U({
    bpmnElement: e,
    waypoint: this.createDiWaypoints([])
  }, t));
};
Ni.prototype.createDiPlane = function(e, t) {
  return this.create("bpmndi:BPMNPlane", U({
    bpmnElement: e
  }, t));
};
function pi(e, t, n) {
  le.call(this, e), this._bpmnFactory = t;
  var i = this;
  function r(g) {
    var _ = g.context, x = _.hints || {}, w;
    !_.cropped && x.createElementsBehavior !== !1 && (w = _.connection, w.waypoints = n.getCroppedWaypoints(w), _.cropped = !0);
  }
  this.executed([
    "connection.layout",
    "connection.create"
  ], r), this.reverted(["connection.layout"], function(g) {
    delete g.context.cropped;
  });
  function o(g) {
    var _ = g.context;
    i.updateParent(_.shape || _.connection, _.oldParent);
  }
  function a(g) {
    var _ = g.context, x = _.shape || _.connection, w = _.parent || _.newParent;
    i.updateParent(x, w);
  }
  this.executed([
    "shape.move",
    "shape.create",
    "shape.delete",
    "connection.create",
    "connection.move",
    "connection.delete"
  ], oi(o)), this.reverted([
    "shape.move",
    "shape.create",
    "shape.delete",
    "connection.create",
    "connection.move",
    "connection.delete"
  ], oi(a));
  function c(g) {
    var _ = g.context, x = _.oldRoot, w = x.children;
    z(w, function(B) {
      P(B, "bpmn:BaseElement") && i.updateParent(B);
    });
  }
  this.executed(["canvas.updateRoot"], c), this.reverted(["canvas.updateRoot"], c);
  function l(g) {
    var _ = g.context.shape;
    P(_, "bpmn:BaseElement") && i.updateBounds(_);
  }
  this.executed(["shape.move", "shape.create", "shape.resize"], oi(function(g) {
    g.context.shape.type !== "label" && l(g);
  })), this.reverted(["shape.move", "shape.create", "shape.resize"], oi(function(g) {
    g.context.shape.type !== "label" && l(g);
  })), e.on("shape.changed", function(g) {
    g.element.type === "label" && l({ context: { shape: g.element } });
  });
  function u(g) {
    i.updateConnection(g.context);
  }
  this.executed([
    "connection.create",
    "connection.move",
    "connection.delete",
    "connection.reconnect"
  ], oi(u)), this.reverted([
    "connection.create",
    "connection.move",
    "connection.delete",
    "connection.reconnect"
  ], oi(u));
  function d(g) {
    i.updateConnectionWaypoints(g.context.connection);
  }
  this.executed([
    "connection.layout",
    "connection.move",
    "connection.updateWaypoints"
  ], oi(d)), this.reverted([
    "connection.layout",
    "connection.move",
    "connection.updateWaypoints"
  ], oi(d)), this.executed("connection.reconnect", oi(function(g) {
    var _ = g.context, x = _.connection, w = _.oldSource, B = _.newSource, N = he(x), k = he(w), A = he(B);
    N.conditionExpression && !rt(A, [
      "bpmn:Activity",
      "bpmn:ExclusiveGateway",
      "bpmn:InclusiveGateway"
    ]) && (_.oldConditionExpression = N.conditionExpression, delete N.conditionExpression), w !== B && k.default === N && (_.oldDefault = k.default, delete k.default);
  })), this.reverted("connection.reconnect", oi(function(g) {
    var _ = g.context, x = _.connection, w = _.oldSource, B = _.newSource, N = he(x), k = he(w), A = he(B);
    _.oldConditionExpression && (N.conditionExpression = _.oldConditionExpression), _.oldDefault && (k.default = _.oldDefault, delete A.default);
  }));
  function f(g) {
    i.updateAttachment(g.context);
  }
  this.executed(["element.updateAttachment"], oi(f)), this.reverted(["element.updateAttachment"], oi(f)), this.executed("element.updateLabel", oi(y)), this.reverted("element.updateLabel", oi(y));
  function y(g) {
    const { element: _ } = g.context, x = ki(_), w = bt(_), B = w && w.get("label");
    Xo(_) || jl(_) || (x && !B ? w.set("label", t.create("bpmndi:BPMNLabel")) : !x && B && w.set("label", void 0));
  }
}
Pe(pi, le);
pi.$inject = [
  "eventBus",
  "bpmnFactory",
  "connectionDocking"
];
pi.prototype.updateAttachment = function(e) {
  var t = e.shape, n = t.businessObject, i = t.host;
  n.attachedToRef = i && i.businessObject;
};
pi.prototype.updateParent = function(e, t) {
  if (!vt(e) && !(P(e, "bpmn:DataStoreReference") && e.parent && P(e.parent, "bpmn:Collaboration"))) {
    var n = e.parent, i = e.businessObject, r = bt(e), o = n && n.businessObject, a = bt(n);
    P(e, "bpmn:FlowNode") && this.updateFlowNodeRefs(i, o, t && t.businessObject), P(e, "bpmn:DataOutputAssociation") && (e.source ? o = e.source.businessObject : o = null), P(e, "bpmn:DataInputAssociation") && (e.target ? o = e.target.businessObject : o = null), this.updateSemanticParent(i, o), P(e, "bpmn:DataObjectReference") && i.dataObjectRef && this.updateSemanticParent(i.dataObjectRef, o), this.updateDiParent(r, a);
  }
};
pi.prototype.updateBounds = function(e) {
  var t = bt(e), n = bD(e);
  if (n) {
    var i = Vi(n, t.get("bounds"));
    U(n, {
      x: e.x + i.x,
      y: e.y + i.y
    });
  }
  var r = vt(e) ? this._getLabel(t) : t, o = r.bounds;
  o || (o = this._bpmnFactory.createDiBounds(), r.set("bounds", o)), U(o, {
    x: e.x,
    y: e.y,
    width: e.width,
    height: e.height
  });
};
pi.prototype.updateFlowNodeRefs = function(e, t, n) {
  if (n !== t) {
    var i, r;
    P(n, "bpmn:Lane") && (i = n.get("flowNodeRef"), nn(i, e)), P(t, "bpmn:Lane") && (r = t.get("flowNodeRef"), dn(r, e));
  }
};
pi.prototype.updateDiConnection = function(e, t, n) {
  var i = bt(e), r = bt(t), o = bt(n);
  i.sourceElement && i.sourceElement.bpmnElement !== he(t) && (i.sourceElement = t && r), i.targetElement && i.targetElement.bpmnElement !== he(n) && (i.targetElement = n && o);
};
pi.prototype.updateDiParent = function(e, t) {
  if (t && !P(t, "bpmndi:BPMNPlane") && (t = t.$parent), e.$parent !== t) {
    var n = (t || e.$parent).get("planeElement");
    t ? (n.push(e), e.$parent = t) : (nn(n, e), e.$parent = null);
  }
};
function _D(e) {
  for (; e && !P(e, "bpmn:Definitions"); )
    e = e.$parent;
  return e;
}
pi.prototype.getLaneSet = function(e) {
  var t, n;
  return P(e, "bpmn:Lane") ? (t = e.childLaneSet, t || (t = this._bpmnFactory.create("bpmn:LaneSet"), e.childLaneSet = t, t.$parent = e), t) : (P(e, "bpmn:Participant") && (e = e.processRef), n = e.get("laneSets"), t = n[0], t || (t = this._bpmnFactory.create("bpmn:LaneSet"), t.$parent = e, n.push(t)), t);
};
pi.prototype.updateSemanticParent = function(e, t, n) {
  var i;
  if (e.$parent !== t && !((P(e, "bpmn:DataInput") || P(e, "bpmn:DataOutput")) && (P(t, "bpmn:Participant") && "processRef" in t && (t = t.processRef), "ioSpecification" in t && t.ioSpecification === e.$parent))) {
    if (P(e, "bpmn:Lane"))
      t && (t = this.getLaneSet(t)), i = "lanes";
    else if (P(e, "bpmn:FlowElement")) {
      if (t) {
        if (P(t, "bpmn:Participant"))
          t = t.processRef;
        else if (P(t, "bpmn:Lane"))
          do
            t = t.$parent.$parent;
          while (P(t, "bpmn:Lane"));
      }
      i = "flowElements";
    } else if (P(e, "bpmn:Artifact")) {
      for (; t && !P(t, "bpmn:Process") && !P(t, "bpmn:SubProcess") && !P(t, "bpmn:Collaboration"); )
        if (P(t, "bpmn:Participant")) {
          t = t.processRef;
          break;
        } else
          t = t.$parent;
      i = "artifacts";
    } else if (P(e, "bpmn:MessageFlow"))
      i = "messageFlows";
    else if (P(e, "bpmn:Participant")) {
      i = "participants";
      var r = e.processRef, o;
      r && (o = _D(e.$parent || t), e.$parent && (nn(o.get("rootElements"), r), r.$parent = null), t && (dn(o.get("rootElements"), r), r.$parent = o));
    } else
      P(e, "bpmn:DataOutputAssociation") ? i = "dataOutputAssociations" : P(e, "bpmn:DataInputAssociation") && (i = "dataInputAssociations");
    if (!i)
      throw new Error(`no parent for <${e.id}> in <${t.id}>`);
    var a;
    if (e.$parent && (a = e.$parent.get(i), nn(a, e)), t ? (a = t.get(i), a.push(e), e.$parent = t) : e.$parent = null, n) {
      var c = n.get(i);
      nn(a, e), t && (c || (c = [], t.set(i, c)), c.push(e));
    }
  }
};
pi.prototype.updateConnectionWaypoints = function(e) {
  var t = bt(e);
  t.set("waypoint", this._bpmnFactory.createDiWaypoints(e.waypoints));
};
pi.prototype.updateConnection = function(e) {
  var t = e.connection, n = he(t), i = t.source, r = he(i), o = t.target, a = he(t.target), c;
  if (P(n, "bpmn:DataAssociation"))
    P(n, "bpmn:DataInputAssociation") ? (n.get("sourceRef")[0] = r, c = e.parent || e.newParent || a, this.updateSemanticParent(n, a, c)) : P(n, "bpmn:DataOutputAssociation") && (c = e.parent || e.newParent || r, this.updateSemanticParent(n, r, c), n.targetRef = a);
  else {
    var l = P(n, "bpmn:SequenceFlow");
    n.sourceRef !== r && (l && (nn(n.sourceRef && n.sourceRef.get("outgoing"), n), r && r.get("outgoing") && r.get("outgoing").push(n)), n.sourceRef = r), n.targetRef !== a && (l && (nn(n.targetRef && n.targetRef.get("incoming"), n), a && a.get("incoming") && a.get("incoming").push(n)), n.targetRef = a);
  }
  this.updateConnectionWaypoints(t), this.updateDiConnection(t, i, o);
};
pi.prototype._getLabel = function(e) {
  return e.label || (e.label = this._bpmnFactory.createDiLabel()), e.label;
};
function oi(e) {
  return function(t) {
    var n = t.context, i = n.shape || n.connection || n.element;
    P(i, "bpmn:BaseElement") && e(t);
  };
}
function bD(e) {
  if (P(e, "bpmn:Activity")) {
    var t = bt(e);
    if (t) {
      var n = t.get("label");
      if (n)
        return n.get("bounds");
    }
  }
}
function _o(e, t) {
  Or.call(this), this._bpmnFactory = e, this._moddle = t;
}
Pe(_o, Or);
_o.$inject = [
  "bpmnFactory",
  "moddle"
];
_o.prototype._baseCreate = Or.prototype.create;
_o.prototype.create = function(e, t) {
  if (e === "label") {
    var n = t.di || this._bpmnFactory.createDiLabel();
    return this._baseCreate(e, U({ type: "label", di: n }, Fs, t));
  }
  return this.createElement(e, t);
};
_o.prototype.createElement = function(e, t) {
  t = U({}, t || {});
  var n, i = t.businessObject, r = t.di;
  if (!i) {
    if (!t.type)
      throw new Error("no shape type specified");
    i = this._bpmnFactory.create(t.type), X_(i);
  }
  if (!ED(r)) {
    var o = U(
      {},
      r || {},
      { id: i.id + "_di" }
    );
    e === "root" ? r = this._bpmnFactory.createDiPlane(i, o) : e === "connection" ? r = this._bpmnFactory.createDiEdge(i, o) : r = this._bpmnFactory.createDiShape(i, o);
  }
  P(i, "bpmn:Group") && (t = U({
    isFrame: !0
  }, t)), t = xD(i, t, [
    "processRef",
    "isInterrupting",
    "associationDirection",
    "isForCompensation"
  ]), t.isExpanded && (t = sd(r, t, "isExpanded")), rt(i, ["bpmn:Lane", "bpmn:Participant"]) && (t = sd(r, t, "isHorizontal")), P(i, "bpmn:SubProcess") && (t.collapsed = !pt(i, r)), P(i, "bpmn:ExclusiveGateway") && (Jn(r, "isMarkerVisible") ? r.isMarkerVisible === void 0 && (r.isMarkerVisible = !1) : r.isMarkerVisible = !0), yn(t.triggeredByEvent) && (i.triggeredByEvent = t.triggeredByEvent, delete t.triggeredByEvent), yn(t.cancelActivity) && (i.cancelActivity = t.cancelActivity, delete t.cancelActivity);
  var a, c;
  return t.eventDefinitionType && (a = i.get("eventDefinitions") || [], c = this._bpmnFactory.create(t.eventDefinitionType, t.eventDefinitionAttrs), t.eventDefinitionType === "bpmn:ConditionalEventDefinition" && (c.condition = this._bpmnFactory.create("bpmn:FormalExpression")), a.push(c), c.$parent = i, i.eventDefinitions = a, delete t.eventDefinitionType), n = this.getDefaultSize(i, r), t = U({
    id: i.id
  }, n, t, {
    businessObject: i,
    di: r
  }), this._baseCreate(e, t);
};
_o.prototype.getDefaultSize = function(e, t) {
  var n = he(e);
  return t = t || bt(e), P(n, "bpmn:SubProcess") ? pt(n, t) ? { width: 350, height: 200 } : { width: 100, height: 80 } : P(n, "bpmn:Task") ? { width: 100, height: 80 } : P(n, "bpmn:Gateway") ? { width: 50, height: 50 } : P(n, "bpmn:Event") ? { width: 36, height: 36 } : P(n, "bpmn:Participant") ? pt(n, t) ? { width: 600, height: 250 } : { width: 400, height: 60 } : P(n, "bpmn:Lane") ? { width: 400, height: 100 } : P(n, "bpmn:DataObjectReference") ? { width: 36, height: 50 } : P(n, "bpmn:DataStoreReference") ? { width: 50, height: 50 } : P(n, "bpmn:TextAnnotation") ? { width: 100, height: 30 } : P(n, "bpmn:Group") ? { width: 300, height: 300 } : { width: 100, height: 80 };
};
_o.prototype.createParticipantShape = function(e) {
  return vn(e) || (e = { isExpanded: e }), e = U({ type: "bpmn:Participant" }, e || {}), e.isExpanded !== !1 && (e.processRef = this._bpmnFactory.create("bpmn:Process")), this.createShape(e);
};
function xD(e, t, n) {
  return z(n, function(i) {
    t = sd(e, t, i);
  }), t;
}
function sd(e, t, n) {
  return t[n] === void 0 ? t : (e[n] = t[n], ur(t, [n]));
}
function ED(e) {
  return rt(e, [
    "bpmndi:BPMNShape",
    "bpmndi:BPMNEdge",
    "bpmndi:BPMNDiagram",
    "bpmndi:BPMNPlane"
  ]);
}
function ep(e, t) {
  this._modeling = e, this._canvas = t;
}
ep.$inject = ["modeling", "canvas"];
ep.prototype.preExecute = function(e) {
  var t = this._modeling, n = e.elements, i = e.alignment;
  z(n, function(r) {
    var o = {
      x: 0,
      y: 0
    };
    yn(i.left) ? o.x = i.left - r.x : yn(i.right) ? o.x = i.right - r.width - r.x : yn(i.center) ? o.x = i.center - Math.round(r.width / 2) - r.x : yn(i.top) ? o.y = i.top - r.y : yn(i.bottom) ? o.y = i.bottom - r.height - r.y : yn(i.middle) && (o.y = i.middle - Math.round(r.height / 2) - r.y), t.moveElements([r], o, r.parent);
  });
};
ep.prototype.postExecute = function(e) {
};
function tp(e) {
  this._modeling = e;
}
tp.$inject = ["modeling"];
tp.prototype.preExecute = function(e) {
  var t = e.source;
  if (!t)
    throw new Error("source required");
  var n = e.target || t.parent, i = e.shape, r = e.hints || {};
  i = e.shape = this._modeling.createShape(
    i,
    e.position,
    n,
    { attach: r.attach }
  ), e.shape = i;
};
tp.prototype.postExecute = function(e) {
  var t = e.hints || {};
  wD(e.source, e.shape) || (t.connectionTarget === e.source ? this._modeling.connect(e.shape, e.source, e.connection) : this._modeling.connect(e.source, e.shape, e.connection));
};
function wD(e, t) {
  return so(e.outgoing, function(n) {
    return n.target === t;
  });
}
function np(e, t) {
  this._canvas = e, this._layouter = t;
}
np.$inject = ["canvas", "layouter"];
np.prototype.execute = function(e) {
  var t = e.connection, n = e.source, i = e.target, r = e.parent, o = e.parentIndex, a = e.hints;
  if (!n || !i)
    throw new Error("source and target required");
  if (!r)
    throw new Error("parent required");
  return t.source = n, t.target = i, t.waypoints || (t.waypoints = this._layouter.layoutConnection(t, a)), this._canvas.addConnection(t, r, o), t;
};
np.prototype.revert = function(e) {
  var t = e.connection;
  return this._canvas.removeConnection(t), t.source = null, t.target = null, t;
};
var Rl = Math.round;
function Gh(e) {
  this._modeling = e;
}
Gh.$inject = [
  "modeling"
];
Gh.prototype.preExecute = function(e) {
  var t = e.elements, n = e.parent, i = e.parentIndex, r = e.position, o = e.hints, a = this._modeling;
  z(t, function(f) {
    je(f.x) || (f.x = 0), je(f.y) || (f.y = 0);
  });
  var c = tt(t, function(f) {
    return !f.hidden;
  }), l = pn(c);
  z(t, function(f) {
    kt(f) && (f.waypoints = gn(f.waypoints, function(y) {
      return {
        x: Rl(y.x - l.x - l.width / 2 + r.x),
        y: Rl(y.y - l.y - l.height / 2 + r.y)
      };
    })), U(f, {
      x: Rl(f.x - l.x - l.width / 2 + r.x),
      y: Rl(f.y - l.y - l.height / 2 + r.y)
    });
  });
  var u = _u(t), d = {};
  z(t, function(f) {
    if (kt(f)) {
      d[f.id] = je(i) ? a.createConnection(
        d[f.source.id],
        d[f.target.id],
        i,
        f,
        f.parent || n,
        o
      ) : a.createConnection(
        d[f.source.id],
        d[f.target.id],
        f,
        f.parent || n,
        o
      );
      return;
    }
    var y = U({}, o);
    u.indexOf(f) === -1 && (y.autoResize = !1), vt(f) && (y = ur(y, ["attach"])), d[f.id] = je(i) ? a.createShape(
      f,
      Ui(f, ["x", "y", "width", "height"]),
      f.parent || n,
      i,
      y
    ) : a.createShape(
      f,
      Ui(f, ["x", "y", "width", "height"]),
      f.parent || n,
      y
    );
  }), e.elements = md(d);
};
var Wv = Math.round;
function bo(e) {
  this._canvas = e;
}
bo.$inject = ["canvas"];
bo.prototype.execute = function(e) {
  var t = e.shape, n = e.position, i = e.parent, r = e.parentIndex;
  if (!i)
    throw new Error("parent required");
  if (!n)
    throw new Error("position required");
  return n.width !== void 0 ? U(t, n) : U(t, {
    x: n.x - Wv(t.width / 2),
    y: n.y - Wv(t.height / 2)
  }), this._canvas.addShape(t, i, r), t;
};
bo.prototype.revert = function(e) {
  var t = e.shape;
  return this._canvas.removeShape(t), t;
};
function hc(e) {
  bo.call(this, e);
}
Pe(hc, bo);
hc.$inject = ["canvas"];
var SD = bo.prototype.execute;
hc.prototype.execute = function(e) {
  var t = e.shape;
  return CD(t), t.labelTarget = e.labelTarget, SD.call(this, e);
};
var RD = bo.prototype.revert;
hc.prototype.revert = function(e) {
  return e.shape.labelTarget = null, RD.call(this, e);
};
function CD(e) {
  ["width", "height"].forEach(function(t) {
    typeof e[t] > "u" && (e[t] = 0);
  });
}
function mc(e, t) {
  this._canvas = e, this._modeling = t;
}
mc.$inject = [
  "canvas",
  "modeling"
];
mc.prototype.preExecute = function(e) {
  var t = this._modeling, n = e.connection;
  io(n.incoming, function(i) {
    t.removeConnection(i, { nested: !0 });
  }), io(n.outgoing, function(i) {
    t.removeConnection(i, { nested: !0 });
  });
};
mc.prototype.execute = function(e) {
  var t = e.connection, n = t.parent;
  return e.parent = n, e.parentIndex = bd(n.children, t), e.source = t.source, e.target = t.target, this._canvas.removeConnection(t), t.source = null, t.target = null, t;
};
mc.prototype.revert = function(e) {
  var t = e.connection, n = e.parent, i = e.parentIndex;
  return t.source = e.source, t.target = e.target, dn(n.children, t, i), this._canvas.addConnection(t, n), t;
};
function Uh(e, t) {
  this._modeling = e, this._elementRegistry = t;
}
Uh.$inject = [
  "modeling",
  "elementRegistry"
];
Uh.prototype.postExecute = function(e) {
  var t = this._modeling, n = this._elementRegistry, i = e.elements;
  z(i, function(r) {
    n.get(r.id) && (r.waypoints ? t.removeConnection(r) : t.removeShape(r));
  });
};
function yc(e, t) {
  this._canvas = e, this._modeling = t;
}
yc.$inject = ["canvas", "modeling"];
yc.prototype.preExecute = function(e) {
  var t = this._modeling, n = e.shape;
  io(n.incoming, function(i) {
    t.removeConnection(i, { nested: !0 });
  }), io(n.outgoing, function(i) {
    t.removeConnection(i, { nested: !0 });
  }), io(n.children, function(i) {
    kt(i) ? t.removeConnection(i, { nested: !0 }) : t.removeShape(i, { nested: !0 });
  });
};
yc.prototype.execute = function(e) {
  var t = this._canvas, n = e.shape, i = n.parent;
  return e.oldParent = i, e.oldParentIndex = bd(i.children, n), t.removeShape(n), n;
};
yc.prototype.revert = function(e) {
  var t = this._canvas, n = e.shape, i = e.oldParent, r = e.oldParentIndex;
  return dn(i.children, n, r), t.addShape(n, i), n;
};
function ip(e) {
  this._modeling = e;
}
ip.$inject = ["modeling"];
var Gv = {
  x: "y",
  y: "x"
};
ip.prototype.preExecute = function(e) {
  var t = this._modeling, n = e.groups, i = e.axis, r = e.dimension;
  function o(w, B) {
    w.range.min = Math.min(B[i], w.range.min), w.range.max = Math.max(B[i] + B[r], w.range.max);
  }
  function a(w) {
    return w[i] + w[r] / 2;
  }
  function c(w) {
    return w.length - 1;
  }
  function l(w) {
    return w.max - w.min;
  }
  function u(w, B) {
    var N = { y: 0 };
    N[i] = w - a(B), N[i] && (N[Gv[i]] = 0, t.moveElements([B], N, B.parent));
  }
  var d = n[0], f = c(n), y = n[f], g, _, x = 0;
  z(n, function(w, B) {
    var N, k, A;
    if (w.elements.length < 2) {
      B && B !== n.length - 1 && (o(w, w.elements[0]), x += l(w.range));
      return;
    }
    N = Gi(w.elements, i), k = N[0], B === f && (k = N[c(N)]), A = a(k), w.range = null, z(N, function(D) {
      if (u(A, D), w.range === null) {
        w.range = {
          min: D[i],
          max: D[i] + D[r]
        };
        return;
      }
      o(w, D);
    }), B && B !== n.length - 1 && (x += l(w.range));
  }), _ = Math.abs(y.range.min - d.range.max), g = Math.round((_ - x) / (n.length - 1)), !(g < n.length - 1) && z(n, function(w, B) {
    var N = {}, k;
    w === d || w === y || (k = n[B - 1], w.range.max = 0, z(w.elements, function(A, D) {
      N[Gv[i]] = 0, N[i] = k.range.max - A[i] + g, w.range.min !== A[i] && (N[i] += A[i] - w.range.min), N[i] && t.moveElements([A], N, A.parent), w.range.max = Math.max(A[i] + A[r], D ? w.range.max : 0);
    }));
  });
};
ip.prototype.postExecute = function(e) {
};
function rp(e, t) {
  this._layouter = e, this._canvas = t;
}
rp.$inject = ["layouter", "canvas"];
rp.prototype.execute = function(e) {
  var t = e.connection, n = t.waypoints;
  return U(e, {
    oldWaypoints: n
  }), t.waypoints = this._layouter.layoutConnection(t, e.hints), t;
};
rp.prototype.revert = function(e) {
  var t = e.connection;
  return t.waypoints = e.oldWaypoints, t;
};
function Yh() {
}
Yh.prototype.execute = function(e) {
  var t = e.connection, n = e.delta, i = e.newParent || t.parent, r = e.newParentIndex, o = t.parent;
  return e.oldParent = o, e.oldParentIndex = nn(o.children, t), dn(i.children, t, r), t.parent = i, z(t.waypoints, function(a) {
    a.x += n.x, a.y += n.y, a.original && (a.original.x += n.x, a.original.y += n.y);
  }), t;
};
Yh.prototype.revert = function(e) {
  var t = e.connection, n = t.parent, i = e.oldParent, r = e.oldParentIndex, o = e.delta;
  return nn(n.children, t), dn(i.children, t, r), t.parent = i, z(t.waypoints, function(a) {
    a.x -= o.x, a.y -= o.y, a.original && (a.original.x -= o.x, a.original.y -= o.y);
  }), t;
};
function Kh() {
  this.allShapes = {}, this.allConnections = {}, this.enclosedElements = {}, this.enclosedConnections = {}, this.topLevel = {};
}
Kh.prototype.add = function(e, t) {
  return this.addAll([e], t);
};
Kh.prototype.addAll = function(e, t) {
  var n = QS(e, !!t, this);
  return U(this, n), this;
};
function gc(e) {
  this._modeling = e;
}
gc.prototype.moveRecursive = function(e, t, n) {
  return e ? this.moveClosure(this.getClosure(e), t, n) : [];
};
gc.prototype.moveClosure = function(e, t, n, i, r) {
  var o = this._modeling, a = e.allShapes, c = e.allConnections, l = e.enclosedConnections, u = e.topLevel, d = !1;
  r && r.parent === n && (d = !0), z(a, function(f) {
    o.moveShape(f, t, u[f.id] && !d && n, {
      recurse: !1,
      layout: !1
    });
  }), z(c, function(f) {
    var y = !!a[f.source.id], g = !!a[f.target.id];
    l[f.id] && y && g ? o.moveConnection(f, t, u[f.id] && !d && n) : o.layoutConnection(f, {
      connectionStart: y && _h(f, f.source, t),
      connectionEnd: g && bh(f, f.target, t)
    });
  });
};
gc.prototype.getClosure = function(e) {
  return new Kh().addAll(e, !0);
};
function op(e) {
  this._helper = new gc(e);
}
op.$inject = ["modeling"];
op.prototype.preExecute = function(e) {
  e.closure = this._helper.getClosure(e.shapes);
};
op.prototype.postExecute = function(e) {
  var t = e.hints, n;
  t && t.primaryShape && (n = t.primaryShape, t.oldParent = n.parent), this._helper.moveClosure(
    e.closure,
    e.delta,
    e.newParent,
    e.newHost,
    n
  );
};
function sa(e) {
  this._modeling = e, this._helper = new gc(e);
}
sa.$inject = ["modeling"];
sa.prototype.execute = function(e) {
  var t = e.shape, n = e.delta, i = e.newParent || t.parent, r = e.newParentIndex, o = t.parent;
  return e.oldBounds = Ui(t, ["x", "y", "width", "height"]), e.oldParent = o, e.oldParentIndex = nn(o.children, t), dn(i.children, t, r), U(t, {
    parent: i,
    x: t.x + n.x,
    y: t.y + n.y
  }), t;
};
sa.prototype.postExecute = function(e) {
  var t = e.shape, n = e.delta, i = e.hints, r = this._modeling;
  i.layout !== !1 && (z(t.incoming, function(o) {
    r.layoutConnection(o, {
      connectionEnd: bh(o, t, n)
    });
  }), z(t.outgoing, function(o) {
    r.layoutConnection(o, {
      connectionStart: _h(o, t, n)
    });
  })), i.recurse !== !1 && this.moveChildren(e);
};
sa.prototype.revert = function(e) {
  var t = e.shape, n = e.oldParent, i = e.oldParentIndex, r = e.delta;
  return dn(n.children, t, i), U(t, {
    parent: n,
    x: t.x - r.x,
    y: t.y - r.y
  }), t;
};
sa.prototype.moveChildren = function(e) {
  var t = e.delta, n = e.shape;
  this._helper.moveRecursive(n.children, t, null);
};
sa.prototype.getNewParent = function(e) {
  return e.newParent || e.shape.parent;
};
function vc(e) {
  this._modeling = e;
}
vc.$inject = ["modeling"];
vc.prototype.execute = function(e) {
  var t = e.newSource, n = e.newTarget, i = e.connection, r = e.dockingOrPoints;
  if (!t && !n)
    throw new Error("newSource or newTarget required");
  return Ke(r) && (e.oldWaypoints = i.waypoints, i.waypoints = r), t && (e.oldSource = i.source, i.source = t), n && (e.oldTarget = i.target, i.target = n), i;
};
vc.prototype.postExecute = function(e) {
  var t = e.connection, n = e.newSource, i = e.newTarget, r = e.dockingOrPoints, o = e.hints || {}, a = {};
  o.connectionStart && (a.connectionStart = o.connectionStart), o.connectionEnd && (a.connectionEnd = o.connectionEnd), o.layoutConnection !== !1 && (n && (!i || o.docking === "source") && (a.connectionStart = a.connectionStart || Uv(Ke(r) ? r[0] : r)), i && (!n || o.docking === "target") && (a.connectionEnd = a.connectionEnd || Uv(Ke(r) ? r[r.length - 1] : r)), o.newWaypoints && (a.waypoints = o.newWaypoints), this._modeling.layoutConnection(t, a));
};
vc.prototype.revert = function(e) {
  var t = e.oldSource, n = e.oldTarget, i = e.oldWaypoints, r = e.connection;
  return t && (r.source = t), n && (r.target = n), i && (r.waypoints = i), r;
};
function Uv(e) {
  return e.original || e;
}
function jr(e, t) {
  this._modeling = e, this._rules = t;
}
jr.$inject = ["modeling", "rules"];
jr.prototype.preExecute = function(e) {
  var t = this, n = this._modeling, i = this._rules, r = e.oldShape, o = e.newData, a = e.hints || {}, c;
  function l(_, x, w) {
    return i.allowed("connection.reconnect", {
      connection: w,
      source: _,
      target: x
    });
  }
  var u = {
    x: o.x,
    y: o.y
  }, d = {
    x: r.x,
    y: r.y,
    width: r.width,
    height: r.height
  };
  c = e.newShape = e.newShape || t.createShape(o, u, r.parent, a), r.host && n.updateAttachment(c, r.host);
  var f;
  a.moveChildren !== !1 && (f = r.children.slice(), n.moveElements(f, { x: 0, y: 0 }, c, a));
  var y = r.incoming.slice(), g = r.outgoing.slice();
  z(y, function(_) {
    var x = _.source, w = l(x, c, _);
    w && t.reconnectEnd(
      _,
      c,
      Uu(_, c, d),
      a
    );
  }), z(g, function(_) {
    var x = _.target, w = l(c, x, _);
    w && t.reconnectStart(
      _,
      c,
      Gu(_, c, d),
      a
    );
  });
};
jr.prototype.postExecute = function(e) {
  var t = e.oldShape;
  this._modeling.removeShape(t);
};
jr.prototype.execute = function(e) {
};
jr.prototype.revert = function(e) {
};
jr.prototype.createShape = function(e, t, n, i) {
  return this._modeling.createShape(e, t, n, i);
};
jr.prototype.reconnectStart = function(e, t, n, i) {
  this._modeling.reconnectStart(e, t, n, i);
};
jr.prototype.reconnectEnd = function(e, t, n, i) {
  this._modeling.reconnectEnd(e, t, n, i);
};
function _c(e) {
  this._modeling = e;
}
_c.$inject = ["modeling"];
_c.prototype.execute = function(e) {
  var t = e.shape, n = e.newBounds, i = e.minBounds;
  if (n.x === void 0 || n.y === void 0 || n.width === void 0 || n.height === void 0)
    throw new Error("newBounds must have {x, y, width, height} properties");
  if (i && (n.width < i.width || n.height < i.height))
    throw new Error("width and height cannot be less than minimum height and width");
  if (!i && n.width < 10 || n.height < 10)
    throw new Error("width and height cannot be less than 10px");
  return e.oldBounds = {
    width: t.width,
    height: t.height,
    x: t.x,
    y: t.y
  }, U(t, {
    width: n.width,
    height: n.height,
    x: n.x,
    y: n.y
  }), t;
};
_c.prototype.postExecute = function(e) {
  var t = this._modeling, n = e.shape, i = e.oldBounds, r = e.hints || {};
  r.layout !== !1 && (z(n.incoming, function(o) {
    t.layoutConnection(o, {
      connectionEnd: Uu(o, n, i)
    });
  }), z(n.outgoing, function(o) {
    t.layoutConnection(o, {
      connectionStart: Gu(o, n, i)
    });
  }));
};
_c.prototype.revert = function(e) {
  var t = e.shape, n = e.oldBounds;
  return U(t, {
    width: n.width,
    height: n.height,
    x: n.x,
    y: n.y
  }), t;
};
function xo(e) {
  this._modeling = e;
}
xo.$inject = ["modeling"];
xo.prototype.preExecute = function(e) {
  var t = e.delta, n = e.direction, i = e.movingShapes, r = e.resizingShapes, o = e.start, a = {};
  this.moveShapes(i, t), z(r, function(c) {
    a[c.id] = PD(c);
  }), this.resizeShapes(r, t, n), this.updateConnectionWaypoints(
    tD(i, r),
    t,
    n,
    o,
    i,
    r,
    a
  );
};
xo.prototype.execute = function() {
};
xo.prototype.revert = function() {
};
xo.prototype.moveShapes = function(e, t) {
  var n = this;
  z(e, function(i) {
    n._modeling.moveShape(i, t, null, {
      autoResize: !1,
      layout: !1,
      recurse: !1
    });
  });
};
xo.prototype.resizeShapes = function(e, t, n) {
  var i = this;
  z(e, function(r) {
    var o = nD(r, n, t);
    i._modeling.resizeShape(r, o, null, {
      attachSupport: !1,
      autoResize: !1,
      layout: !1
    });
  });
};
xo.prototype.updateConnectionWaypoints = function(e, t, n, i, r, o, a) {
  var c = this, l = r.concat(o);
  z(e, function(u) {
    var d = u.source, f = u.target, y = AD(u), g = cE(n), _ = {};
    Qr(l, d) && Qr(l, f) ? (y = gn(y, function(x) {
      return Kv(x, i, n) && (x[g] = x[g] + t[g]), x.original && Kv(x.original, i, n) && (x.original[g] = x.original[g] + t[g]), x;
    }), c._modeling.updateWaypoints(u, y, {
      labelBehavior: !1
    })) : (Qr(l, d) || Qr(l, f)) && (Qr(r, d) ? _.connectionStart = _h(u, d, t) : Qr(r, f) ? _.connectionEnd = bh(u, f, t) : Qr(o, d) ? _.connectionStart = Gu(
      u,
      d,
      a[d.id]
    ) : Qr(o, f) && (_.connectionEnd = Uu(
      u,
      f,
      a[f.id]
    )), c._modeling.layoutConnection(u, _));
  });
};
function Yv(e) {
  return U({}, e);
}
function AD(e) {
  return gn(e.waypoints, function(t) {
    return t = Yv(t), t.original && (t.original = Yv(t.original)), t;
  });
}
function cE(e) {
  switch (e) {
    case "n":
      return "y";
    case "w":
      return "x";
    case "s":
      return "y";
    case "e":
      return "x";
  }
}
function Kv(e, t, n) {
  var i = cE(n);
  if (/e|s/.test(n))
    return e[i] > t;
  if (/n|w/.test(n))
    return e[i] < t;
}
function Qr(e, t) {
  return e.indexOf(t) !== -1;
}
function PD(e) {
  return {
    x: e.x,
    y: e.y,
    height: e.height,
    width: e.width
  };
}
function ap(e) {
  this._modeling = e;
}
ap.$inject = ["modeling"];
ap.prototype.execute = function(e) {
  var t = e.shape, n = t.children;
  e.oldChildrenVisibility = lE(n), t.collapsed = !t.collapsed;
  var i = uE(n, t.collapsed);
  return [t].concat(i);
};
ap.prototype.revert = function(e) {
  var t = e.shape, n = e.oldChildrenVisibility, i = t.children, r = pE(i, n);
  return t.collapsed = !t.collapsed, [t].concat(r);
};
function lE(e) {
  var t = {};
  return z(e, function(n) {
    t[n.id] = n.hidden, n.children && (t = U({}, t, lE(n.children)));
  }), t;
}
function uE(e, t) {
  var n = [];
  return z(e, function(i) {
    i.hidden = t, n = n.concat(i), i.children && (n = n.concat(uE(i.children, i.collapsed || t)));
  }), n;
}
function pE(e, t) {
  var n = [];
  return z(e, function(i) {
    i.hidden = t[i.id], n = n.concat(i), i.children && (n = n.concat(pE(i.children, t)));
  }), n;
}
function sp(e) {
  this._modeling = e;
}
sp.$inject = ["modeling"];
sp.prototype.execute = function(e) {
  var t = e.shape, n = e.newHost, i = t.host;
  return e.oldHost = i, e.attacherIdx = fE(i, t), dE(n, t), t.host = n, t;
};
sp.prototype.revert = function(e) {
  var t = e.shape, n = e.newHost, i = e.oldHost, r = e.attacherIdx;
  return t.host = i, fE(n, t), dE(i, t, r), t;
};
function fE(e, t) {
  return nn(e && e.attachers, t);
}
function dE(e, t, n) {
  if (e) {
    var i = e.attachers;
    i || (e.attachers = i = []), dn(i, t, n);
  }
}
function qh() {
}
qh.prototype.execute = function(e) {
  var t = e.connection, n = e.newWaypoints;
  return e.oldWaypoints = t.waypoints, t.waypoints = n, t;
};
qh.prototype.revert = function(e) {
  var t = e.connection, n = e.oldWaypoints;
  return t.waypoints = n, t;
};
function At(e, t, n) {
  this._eventBus = e, this._elementFactory = t, this._commandStack = n;
  var i = this;
  e.on("diagram.init", function() {
    i.registerHandlers(n);
  });
}
At.$inject = ["eventBus", "elementFactory", "commandStack"];
At.prototype.getHandlers = function() {
  return {
    "shape.append": tp,
    "shape.create": bo,
    "shape.delete": yc,
    "shape.move": sa,
    "shape.resize": _c,
    "shape.replace": jr,
    "shape.toggleCollapse": ap,
    spaceTool: xo,
    "label.create": hc,
    "connection.create": np,
    "connection.delete": mc,
    "connection.move": Yh,
    "connection.layout": rp,
    "connection.updateWaypoints": qh,
    "connection.reconnect": vc,
    "elements.create": Gh,
    "elements.move": op,
    "elements.delete": Uh,
    "elements.distribute": ip,
    "elements.align": ep,
    "element.updateAttachment": sp
  };
};
At.prototype.registerHandlers = function(e) {
  z(this.getHandlers(), function(t, n) {
    e.registerHandler(n, t);
  });
};
At.prototype.moveShape = function(e, t, n, i, r) {
  typeof i == "object" && (r = i, i = null);
  var o = {
    shape: e,
    delta: t,
    newParent: n,
    newParentIndex: i,
    hints: r || {}
  };
  this._commandStack.execute("shape.move", o);
};
At.prototype.updateAttachment = function(e, t) {
  var n = {
    shape: e,
    newHost: t
  };
  this._commandStack.execute("element.updateAttachment", n);
};
At.prototype.moveElements = function(e, t, n, i) {
  i = i || {};
  var r = i.attach, o = n, a;
  r === !0 ? (a = n, o = n.parent) : r === !1 && (a = null);
  var c = {
    shapes: e,
    delta: t,
    newParent: o,
    newHost: a,
    hints: i
  };
  this._commandStack.execute("elements.move", c);
};
At.prototype.moveConnection = function(e, t, n, i, r) {
  typeof i == "object" && (r = i, i = void 0);
  var o = {
    connection: e,
    delta: t,
    newParent: n,
    newParentIndex: i,
    hints: r || {}
  };
  this._commandStack.execute("connection.move", o);
};
At.prototype.layoutConnection = function(e, t) {
  var n = {
    connection: e,
    hints: t || {}
  };
  this._commandStack.execute("connection.layout", n);
};
At.prototype.createConnection = function(e, t, n, i, r, o) {
  typeof n == "object" && (o = r, r = i, i = n, n = void 0), i = this._create("connection", i);
  var a = {
    source: e,
    target: t,
    parent: r,
    parentIndex: n,
    connection: i,
    hints: o
  };
  return this._commandStack.execute("connection.create", a), a.connection;
};
At.prototype.createShape = function(e, t, n, i, r) {
  typeof i != "number" && (r = i, i = void 0), r = r || {};
  var o = r.attach, a, c;
  e = this._create("shape", e), o ? (a = n.parent, c = n) : a = n;
  var l = {
    position: t,
    shape: e,
    parent: a,
    parentIndex: i,
    host: c,
    hints: r
  };
  return this._commandStack.execute("shape.create", l), l.shape;
};
At.prototype.createElements = function(e, t, n, i, r) {
  Ke(e) || (e = [e]), typeof i != "number" && (r = i, i = void 0), r = r || {};
  var o = {
    position: t,
    elements: e,
    parent: n,
    parentIndex: i,
    hints: r
  };
  return this._commandStack.execute("elements.create", o), o.elements;
};
At.prototype.createLabel = function(e, t, n, i) {
  n = this._create("label", n);
  var r = {
    labelTarget: e,
    position: t,
    parent: i || e.parent,
    shape: n
  };
  return this._commandStack.execute("label.create", r), r.shape;
};
At.prototype.appendShape = function(e, t, n, i, r) {
  r = r || {}, t = this._create("shape", t);
  var o = {
    source: e,
    position: n,
    target: i,
    shape: t,
    connection: r.connection,
    connectionParent: r.connectionParent,
    hints: r
  };
  return this._commandStack.execute("shape.append", o), o.shape;
};
At.prototype.removeElements = function(e) {
  var t = {
    elements: e
  };
  this._commandStack.execute("elements.delete", t);
};
At.prototype.distributeElements = function(e, t, n) {
  var i = {
    groups: e,
    axis: t,
    dimension: n
  };
  this._commandStack.execute("elements.distribute", i);
};
At.prototype.removeShape = function(e, t) {
  var n = {
    shape: e,
    hints: t || {}
  };
  this._commandStack.execute("shape.delete", n);
};
At.prototype.removeConnection = function(e, t) {
  var n = {
    connection: e,
    hints: t || {}
  };
  this._commandStack.execute("connection.delete", n);
};
At.prototype.replaceShape = function(e, t, n) {
  var i = {
    oldShape: e,
    newData: t,
    hints: n || {}
  };
  return this._commandStack.execute("shape.replace", i), i.newShape;
};
At.prototype.alignElements = function(e, t) {
  var n = {
    elements: e,
    alignment: t
  };
  this._commandStack.execute("elements.align", n);
};
At.prototype.resizeShape = function(e, t, n, i) {
  var r = {
    shape: e,
    newBounds: t,
    minBounds: n,
    hints: i
  };
  this._commandStack.execute("shape.resize", r);
};
At.prototype.createSpace = function(e, t, n, i, r) {
  var o = {
    delta: n,
    direction: i,
    movingShapes: e,
    resizingShapes: t,
    start: r
  };
  this._commandStack.execute("spaceTool", o);
};
At.prototype.updateWaypoints = function(e, t, n) {
  var i = {
    connection: e,
    newWaypoints: t,
    hints: n || {}
  };
  this._commandStack.execute("connection.updateWaypoints", i);
};
At.prototype.reconnect = function(e, t, n, i, r) {
  var o = {
    connection: e,
    newSource: t,
    newTarget: n,
    dockingOrPoints: i,
    hints: r || {}
  };
  this._commandStack.execute("connection.reconnect", o);
};
At.prototype.reconnectStart = function(e, t, n, i) {
  i || (i = {}), this.reconnect(e, t, e.target, n, U(i, {
    docking: "source"
  }));
};
At.prototype.reconnectEnd = function(e, t, n, i) {
  i || (i = {}), this.reconnect(e, e.source, t, n, U(i, {
    docking: "target"
  }));
};
At.prototype.connect = function(e, t, n, i) {
  return this.createConnection(e, t, n || {}, e.parent, i);
};
At.prototype._create = function(e, t) {
  return OR(t) ? t : this._elementFactory.create(e, t);
};
At.prototype.toggleCollapse = function(e, t) {
  var n = {
    shape: e,
    hints: t || {}
  };
  this._commandStack.execute("shape.toggleCollapse", n);
};
function bc(e) {
  this._elementRegistry = e;
}
bc.$inject = ["elementRegistry"];
bc.prototype.execute = function(e) {
  var t = e.element, n = e.moddleElement, i = e.properties;
  if (!n)
    throw new Error("<moddleElement> required");
  var r = e.changed || this._getVisualReferences(n).concat(t), o = e.oldProperties || TD(n, Zl(i));
  return hE(n, i), e.oldProperties = o, e.changed = r, r;
};
bc.prototype.revert = function(e) {
  var t = e.oldProperties, n = e.moddleElement, i = e.changed;
  return hE(n, t), i;
};
bc.prototype._getVisualReferences = function(e) {
  var t = this._elementRegistry;
  return P(e, "bpmn:DataObject") ? kD(e, t) : [];
};
function TD(e, t) {
  return li(t, function(n, i) {
    return n[i] = e.get(i), n;
  }, {});
}
function hE(e, t) {
  z(t, function(n, i) {
    e.set(i, n);
  });
}
function kD(e, t) {
  return t.filter(function(n) {
    return P(n, "bpmn:DataObjectReference") && he(n).dataObjectRef === e;
  });
}
var Ps = "default", kr = "id", mE = "di", MD = {
  width: 0,
  height: 0
};
function xc(e, t, n, i) {
  this._elementRegistry = e, this._moddle = t, this._modeling = n, this._textRenderer = i;
}
xc.$inject = [
  "elementRegistry",
  "moddle",
  "modeling",
  "textRenderer"
];
xc.prototype.execute = function(e) {
  var t = e.element, n = [t];
  if (!t)
    throw new Error("element required");
  var i = this._elementRegistry, r = this._moddle.ids, o = t.businessObject, a = LD(e.properties), c = e.oldProperties || DD(t, a);
  return yE(a, o) && (r.unclaim(o[kr]), i.updateId(t, a[kr]), r.claim(a[kr], o)), Ps in a && (a[Ps] && n.push(i.get(a[Ps].id)), o[Ps] && n.push(i.get(o[Ps].id))), gE(t, a), e.oldProperties = c, e.changed = n, n;
};
xc.prototype.postExecute = function(e) {
  var t = e.element, n = t.label, i = n && he(n).name;
  if (i) {
    var r = this._textRenderer.getExternalLabelBounds(n, i);
    this._modeling.resizeShape(n, r, MD);
  }
};
xc.prototype.revert = function(e) {
  var t = e.element, n = e.properties, i = e.oldProperties, r = t.businessObject, o = this._elementRegistry, a = this._moddle.ids;
  return gE(t, i), yE(n, r) && (a.unclaim(n[kr]), o.updateId(t, i[kr]), a.claim(i[kr], r)), e.changed;
};
function yE(e, t) {
  return kr in e && e[kr] !== t[kr];
}
function DD(e, t) {
  var n = Zl(t), i = e.businessObject, r = bt(e);
  return li(n, function(o, a) {
    return a !== mE ? o[a] = i.get(a) : o[a] = OD(r, Zl(t.di)), o;
  }, {});
}
function OD(e, t) {
  return li(t, function(n, i) {
    return n[i] = e && e.get(i), n;
  }, {});
}
function gE(e, t) {
  var n = e.businessObject, i = bt(e);
  z(t, function(r, o) {
    o !== mE ? n.set(o, r) : i && ND(i, r);
  });
}
function ND(e, t) {
  z(t, function(n, i) {
    e.set(i, n);
  });
}
var BD = ["default"];
function LD(e) {
  var t = U({}, e);
  return BD.forEach(function(n) {
    n in e && (t[n] = he(t[n]));
  }), t;
}
function cp(e, t) {
  this._canvas = e, this._modeling = t;
}
cp.$inject = [
  "canvas",
  "modeling"
];
cp.prototype.execute = function(e) {
  var t = this._canvas, n = e.newRoot, i = n.businessObject, r = t.getRootElement(), o = r.businessObject, a = o.$parent, c = bt(r);
  return t.setRootElement(n), t.removeRootElement(r), dn(a.rootElements, i), i.$parent = a, nn(a.rootElements, o), o.$parent = null, r.di = null, c.bpmnElement = i, n.di = c, e.oldRoot = r, [];
};
cp.prototype.revert = function(e) {
  var t = this._canvas, n = e.newRoot, i = n.businessObject, r = e.oldRoot, o = r.businessObject, a = i.$parent, c = bt(n);
  return t.setRootElement(r), t.removeRootElement(n), nn(a.rootElements, i), i.$parent = null, dn(a.rootElements, o), o.$parent = a, n.di = null, c.bpmnElement = o, r.di = c, [];
};
function Xh(e, t) {
  this._modeling = e, this._spaceTool = t;
}
Xh.$inject = [
  "modeling",
  "spaceTool"
];
Xh.prototype.preExecute = function(e) {
  var t = this._spaceTool, n = this._modeling, i = e.shape, r = e.location, o = Ai(i), a = o === i, c = a ? i : i.parent, l = go(c), u = Pn(i);
  if (u ? r === "left" ? r = "top" : r === "right" && (r = "bottom") : r === "top" ? r = "left" : r === "bottom" && (r = "right"), !l.length) {
    var d = u ? {
      x: i.x + Ci,
      y: i.y,
      width: i.width - Ci,
      height: i.height
    } : {
      x: i.x,
      y: i.y + Ci,
      width: i.width,
      height: i.height - Ci
    };
    n.createShape(
      {
        type: "bpmn:Lane",
        isHorizontal: u
      },
      d,
      c
    );
  }
  var f = [];
  ta(o, function(A) {
    return f.push(A), A.label && f.push(A.label), A === i ? [] : tt(A.children, function(D) {
      return D !== i;
    });
  });
  var y, g, _, x, w;
  r === "top" ? (y = -120, g = i.y, _ = g + 10, x = "n", w = "y") : r === "left" ? (y = -120, g = i.x, _ = g + 10, x = "w", w = "x") : r === "bottom" ? (y = 120, g = i.y + i.height, _ = g - 10, x = "s", w = "y") : r === "right" && (y = 120, g = i.x + i.width, _ = g - 10, x = "e", w = "x");
  var B = t.calculateAdjustments(f, w, y, _), N = u ? { x: 0, y } : { x: y, y: 0 };
  t.makeSpace(
    B.movingShapes,
    B.resizingShapes,
    N,
    x,
    _
  );
  var k = u ? {
    x: i.x + (a ? Ci : 0),
    y: g - (r === "top" ? 120 : 0),
    width: i.width - (a ? Ci : 0),
    height: 120
  } : {
    x: g - (r === "left" ? 120 : 0),
    y: i.y + (a ? Ci : 0),
    width: 120,
    height: i.height - (a ? Ci : 0)
  };
  e.newLane = n.createShape(
    {
      type: "bpmn:Lane",
      isHorizontal: u
    },
    k,
    c
  );
};
function Zh(e) {
  this._modeling = e;
}
Zh.$inject = [
  "modeling"
];
Zh.prototype.preExecute = function(e) {
  var t = this._modeling, n = e.shape, i = e.count, r = go(n), o = r.length;
  if (o > i)
    throw new Error(`more than <${i}> child lanes`);
  var a = Pn(n), c = a ? n.height : n.width, l = Math.round(c / i), u, d, f, y;
  for (y = 0; y < i; y++)
    y === i - 1 ? u = c - l * y : u = l, d = a ? {
      x: n.x + Ci,
      y: n.y + y * l,
      width: n.width - Ci,
      height: u
    } : {
      x: n.x + y * l,
      y: n.y + Ci,
      width: u,
      height: n.height - Ci
    }, y < o ? t.resizeShape(r[y], d) : (f = {
      type: "bpmn:Lane",
      isHorizontal: a
    }, t.createShape(f, d, n));
};
function Ec(e, t) {
  this._modeling = e, this._spaceTool = t;
}
Ec.$inject = [
  "modeling",
  "spaceTool"
];
Ec.prototype.preExecute = function(e) {
  var t = e.shape, n = e.newBounds, i = e.balanced;
  i !== !1 ? this.resizeBalanced(t, n) : this.resizeSpace(t, n);
};
Ec.prototype.resizeBalanced = function(e, t) {
  var n = this._modeling, i = dk(e, t);
  n.resizeShape(e, t), i.forEach(function(r) {
    n.resizeShape(r.shape, r.newBounds);
  });
};
Ec.prototype.resizeSpace = function(e, t) {
  var n = this._spaceTool, i = Le(e), r = Le(t), o = gx(r, i), a = Ai(e), c = [], l = [];
  ta(a, function(_) {
    return c.push(_), (P(_, "bpmn:Lane") || P(_, "bpmn:Participant")) && l.push(_), _.children;
  });
  var u, d, f, y, g;
  (o.bottom || o.top) && (u = o.bottom || o.top, d = e.y + (o.bottom ? e.height : 0) + (o.bottom ? -10 : 10), f = o.bottom ? "s" : "n", y = o.top > 0 || o.bottom < 0 ? -u : u, g = n.calculateAdjustments(c, "y", y, d), n.makeSpace(g.movingShapes, g.resizingShapes, { x: 0, y: u }, f)), (o.left || o.right) && (u = o.right || o.left, d = e.x + (o.right ? e.width : 0) + (o.right ? -10 : 100), f = o.right ? "e" : "w", y = o.left > 0 || o.right < 0 ? -u : u, g = n.calculateAdjustments(l, "x", y, d), n.makeSpace(g.movingShapes, g.resizingShapes, { x: u, y: 0 }, f));
};
var Ks = "flowNodeRef", Jh = "lanes";
function wc(e) {
  this._elementRegistry = e;
}
wc.$inject = [
  "elementRegistry"
];
wc.prototype._computeUpdates = function(e, t) {
  var n = [], i = [], r = {}, o = [];
  function a(d, f) {
    var y = Le(f), g = {
      x: d.x + d.width / 2,
      y: d.y + d.height / 2
    };
    return g.x > y.left && g.x < y.right && g.y > y.top && g.y < y.bottom;
  }
  function c(d) {
    n.indexOf(d) === -1 && (o.push(d), n.push(d));
  }
  function l(d) {
    var f = Ai(d);
    return r[f.id] || (r[f.id] = Vu(f)), r[f.id];
  }
  function u(d) {
    if (!d.parent)
      return [];
    var f = l(d);
    return f.filter(function(y) {
      return a(d, y);
    }).map(function(y) {
      return y.businessObject;
    });
  }
  return t.forEach(function(d) {
    var f = Ai(d);
    if (!(!f || n.indexOf(f) !== -1)) {
      var y = f.children.filter(function(g) {
        return P(g, "bpmn:FlowNode");
      });
      y.forEach(c), n.push(f);
    }
  }), e.forEach(c), o.forEach(function(d) {
    var f = d.businessObject, y = f.get(Jh), g = y.slice(), _ = u(d);
    i.push({ flowNode: f, remove: g, add: _ });
  }), t.forEach(function(d) {
    var f = d.businessObject;
    d.parent || f.get(Ks).forEach(function(y) {
      i.push({ flowNode: y, remove: [f], add: [] });
    });
  }), i;
};
wc.prototype.execute = function(e) {
  var t = e.updates;
  return t || (t = e.updates = this._computeUpdates(e.flowNodeShapes, e.laneShapes)), t.forEach(function(n) {
    var i = n.flowNode, r = i.get(Jh);
    n.remove.forEach(function(o) {
      nn(r, o), nn(o.get(Ks), i);
    }), n.add.forEach(function(o) {
      dn(r, o), dn(o.get(Ks), i);
    });
  }), [];
};
wc.prototype.revert = function(e) {
  var t = e.updates;
  return t.forEach(function(n) {
    var i = n.flowNode, r = i.get(Jh);
    n.add.forEach(function(o) {
      nn(r, o), nn(o.get(Ks), i);
    }), n.remove.forEach(function(o) {
      dn(r, o), dn(o.get(Ks), i);
    });
  }), [];
};
function lp(e) {
  this._moddle = e;
}
lp.$inject = ["moddle"];
lp.prototype.execute = function(e) {
  var t = this._moddle.ids, n = e.id, i = e.element, r = e.claiming;
  return r ? t.claim(n, i) : t.unclaim(n), [];
};
lp.prototype.revert = function(e) {
  var t = this._moddle.ids, n = e.id, i = e.element, r = e.claiming;
  return r ? t.unclaim(n) : t.claim(n, i), [];
};
var ID = {
  fill: void 0,
  stroke: void 0
};
function Qh(e) {
  this._commandStack = e, this._normalizeColor = function(t) {
    if (t) {
      if (ci(t)) {
        var n = $D(t);
        if (n)
          return n;
      }
      throw new Error(`invalid color value: ${t}`);
    }
  };
}
Qh.$inject = [
  "commandStack"
];
Qh.prototype.postExecute = function(e) {
  var t = e.elements, n = e.colors || ID, i = this, r = {};
  "fill" in n && U(r, {
    "background-color": this._normalizeColor(n.fill)
  }), "stroke" in n && U(r, {
    "border-color": this._normalizeColor(n.stroke)
  }), z(t, function(o) {
    var a = kt(o) ? Ui(r, ["border-color"]) : r, c = bt(o);
    if (jD(a), vt(o))
      i._commandStack.execute("element.updateModdleProperties", {
        element: o,
        moddleElement: c.label,
        properties: {
          color: r["border-color"]
        }
      });
    else {
      if (!rt(c, ["bpmndi:BPMNEdge", "bpmndi:BPMNShape"]))
        return;
      i._commandStack.execute("element.updateProperties", {
        element: o,
        properties: {
          di: a
        }
      });
    }
  });
};
function $D(e) {
  var t = document.createElement("canvas").getContext("2d");
  return t.fillStyle = "transparent", t.fillStyle = e, /^#[0-9a-fA-F]{6}$/.test(t.fillStyle) ? t.fillStyle : null;
}
function jD(e) {
  "border-color" in e && (e.stroke = e["border-color"]), "background-color" in e && (e.fill = e["background-color"]);
}
var FD = {
  width: 0,
  height: 0
};
function vE(e, t, n) {
  function i(l, u) {
    var d = l.label || l, f = l.labelTarget || l;
    return LA(d, u), [d, f];
  }
  function r(l) {
    var u = l.element, d = u.businessObject, f = l.newLabel;
    if (!vt(u) && Xo(u) && !Ru(u) && !qv(f)) {
      var y = 7, g = Dd(u);
      g = {
        x: g.x,
        y: g.y + y
      }, e.createLabel(u, g, {
        id: d.id + "_label",
        businessObject: d,
        di: u.di
      });
    }
  }
  function o(l) {
    return l.oldLabel = ki(l.element), i(l.element, l.newLabel);
  }
  function a(l) {
    return i(l.element, l.oldLabel);
  }
  function c(l) {
    var u = l.element, d = u.label || u, f = l.newLabel, y = l.newBounds, g = l.hints || {};
    if (!(!vt(d) && !P(d, "bpmn:TextAnnotation"))) {
      if (vt(d) && qv(f)) {
        g.removeShape !== !1 && e.removeShape(d, { unsetLabel: !1 });
        return;
      }
      var _ = ki(u);
      typeof y > "u" && (y = t.getExternalLabelBounds(d, _)), y && e.resizeShape(d, y, FD);
    }
  }
  this.preExecute = r, this.execute = o, this.revert = a, this.postExecute = c;
}
vE.$inject = [
  "modeling",
  "textRenderer",
  "bpmnFactory"
];
function qv(e) {
  return !e || !e.trim();
}
function In(e, t, n, i) {
  At.call(this, e, t, n), this._bpmnRules = i;
}
Pe(In, At);
In.$inject = [
  "eventBus",
  "elementFactory",
  "commandStack",
  "bpmnRules"
];
In.prototype.getHandlers = function() {
  var e = At.prototype.getHandlers.call(this);
  return e["element.updateModdleProperties"] = bc, e["element.updateProperties"] = xc, e["canvas.updateRoot"] = cp, e["lane.add"] = Xh, e["lane.resize"] = Ec, e["lane.split"] = Zh, e["lane.updateRefs"] = wc, e["id.updateClaim"] = lp, e["element.setColor"] = Qh, e["element.updateLabel"] = vE, e;
};
In.prototype.updateLabel = function(e, t, n, i) {
  this._commandStack.execute("element.updateLabel", {
    element: e,
    newLabel: t,
    newBounds: n,
    hints: i || {}
  });
};
In.prototype.connect = function(e, t, n, i) {
  var r = this._bpmnRules;
  if (n || (n = r.canConnect(e, t)), !!n)
    return this.createConnection(e, t, n, e.parent, i);
};
In.prototype.updateModdleProperties = function(e, t, n) {
  this._commandStack.execute("element.updateModdleProperties", {
    element: e,
    moddleElement: t,
    properties: n
  });
};
In.prototype.updateProperties = function(e, t) {
  this._commandStack.execute("element.updateProperties", {
    element: e,
    properties: t
  });
};
In.prototype.resizeLane = function(e, t, n) {
  this._commandStack.execute("lane.resize", {
    shape: e,
    newBounds: t,
    balanced: n
  });
};
In.prototype.addLane = function(e, t) {
  var n = {
    shape: e,
    location: t
  };
  return this._commandStack.execute("lane.add", n), n.newLane;
};
In.prototype.splitLane = function(e, t) {
  this._commandStack.execute("lane.split", {
    shape: e,
    count: t
  });
};
In.prototype.makeCollaboration = function() {
  var e = this._create("root", {
    type: "bpmn:Collaboration"
  }), t = {
    newRoot: e
  };
  return this._commandStack.execute("canvas.updateRoot", t), e;
};
In.prototype.makeProcess = function() {
  var e = this._create("root", {
    type: "bpmn:Process"
  }), t = {
    newRoot: e
  };
  this._commandStack.execute("canvas.updateRoot", t);
};
In.prototype.updateLaneRefs = function(e, t) {
  this._commandStack.execute("lane.updateRefs", {
    flowNodeShapes: e,
    laneShapes: t
  });
};
In.prototype.claimId = function(e, t) {
  this._commandStack.execute("id.updateClaim", {
    id: e,
    element: t,
    claiming: !0
  });
};
In.prototype.unclaimId = function(e, t) {
  this._commandStack.execute("id.updateClaim", {
    id: e,
    element: t
  });
};
In.prototype.setColor = function(e, t) {
  e.length || (e = [e]), this._commandStack.execute("element.setColor", {
    elements: e,
    colors: t
  });
};
function _E() {
}
_E.prototype.layoutConnection = function(e, t) {
  return t = t || {}, [
    t.connectionStart || Fe(t.source || e.source),
    t.connectionEnd || Fe(t.target || e.target)
  ];
};
var Cl = 20, HD = 5, du = Math.round, Xv = 20, zD = {
  "h:h": 20,
  "v:v": 20,
  "h:v": -10,
  "v:h": -10
};
function VD(e, t) {
  return !{
    t: /top/,
    r: /right/,
    b: /bottom/,
    l: /left/,
    h: /./,
    v: /./
  }[t].test(e);
}
function WD(e, t) {
  return {
    t: /top/,
    r: /right/,
    b: /bottom/,
    l: /left/,
    h: /left|right/,
    v: /top|bottom/
  }[e].test(t);
}
function bE(e, t, n) {
  var i = Ln(t, e, HD), r = n.split(":")[0], o = du((t.x - e.x) / 2 + e.x), a = du((t.y - e.y) / 2 + e.y), c, l, u = WD(r, i), d = /h|r|l/.test(r), f = !1, y = !1;
  return u ? (c = d ? { x: o, y: e.y } : { x: e.x, y: a }, l = d ? "h:h" : "v:v") : (f = VD(i, r), l = d ? "h:v" : "v:h", f ? d ? (y = a === e.y, c = {
    x: e.x + Cl * (/l/.test(r) ? -1 : 1),
    y: y ? a + Cl : a
  }) : (y = o === e.x, c = {
    x: y ? o + Cl : o,
    y: e.y + Cl * (/t/.test(r) ? -1 : 1)
  }) : c = {
    x: o,
    y: a
  }), {
    waypoints: em(e, c, l).concat(c),
    directions: l,
    turnNextDirections: y
  };
}
function GD(e, t, n) {
  return bE(e, t, n);
}
function UD(e, t, n) {
  var i = bE(t, e, Zv(n));
  return {
    waypoints: i.waypoints.slice().reverse(),
    directions: Zv(i.directions),
    turnNextDirections: i.turnNextDirections
  };
}
function YD(e, t) {
  var n = e.directions.split(":")[1], i = t.directions.split(":")[0];
  e.turnNextDirections && (n = n == "h" ? "v" : "h"), t.turnNextDirections && (i = i == "h" ? "v" : "h");
  var r = n + ":" + i, o = em(
    e.waypoints[e.waypoints.length - 1],
    t.waypoints[0],
    r
  );
  return {
    waypoints: o,
    directions: r
  };
}
function Zv(e) {
  return e.split(":").reverse().join(":");
}
function KD(e, t, n) {
  var i = du((t.x - e.x) / 2 + e.x), r = du((t.y - e.y) / 2 + e.y);
  if (n === "h:v")
    return [{ x: t.x, y: e.y }];
  if (n === "v:h")
    return [{ x: e.x, y: t.y }];
  if (n === "h:h")
    return [
      { x: i, y: e.y },
      { x: i, y: t.y }
    ];
  if (n === "v:v")
    return [
      { x: e.x, y: r },
      { x: t.x, y: r }
    ];
  throw new Error("invalid directions: can only handle varians of [hv]:[hv]");
}
function em(e, t, n) {
  if (n = n || "h:h", !i5(n))
    throw new Error(
      "unknown directions: <" + n + ">: must be specified as <start>:<end> with start/end in { h,v,t,r,b,l }"
    );
  if (xE(n)) {
    var i = GD(e, t, n), r = UD(e, t, n), o = YD(i, r);
    return [].concat(
      i.waypoints,
      o.waypoints,
      r.waypoints
    );
  }
  return KD(e, t, n);
}
function qD(e, t, n) {
  var i = em(e, t, n);
  return i.unshift(e), i.push(t), EE(i);
}
function XD(e, t, n, i, r) {
  var o = r && r.preferredLayouts || [], a = sS(o, "straight")[0] || "h:h", c = zD[a] || 0, l = Ln(e, t, c), u = n5(l, a);
  n = n || Fe(e), i = i || Fe(t);
  var d = u.split(":"), f = Qv(n, e, d[0], r5(l)), y = Qv(i, t, d[1], l);
  return qD(f, y, u);
}
function ZD(e, t, n, i, r, o) {
  Ke(n) && (r = n, o = i, n = Fe(e), i = Fe(t)), o = U({ preferredLayouts: [] }, o), r = r || [];
  var a = o.preferredLayouts, c = a.indexOf("straight") !== -1, l;
  return l = c && QD(e, t, n, i, o), l || (l = o.connectionEnd && t5(t, e, i, r), l) || (l = o.connectionStart && e5(e, t, n, r), l) ? l : !o.connectionStart && !o.connectionEnd && r && r.length ? r : XD(e, t, n, i, o);
}
function JD(e, t, n) {
  return e >= t && e <= n;
}
function Jv(e, t, n) {
  var i = {
    x: "width",
    y: "height"
  };
  return JD(t[e], n[e], n[e] + n[i[e]]);
}
function QD(e, t, n, i, r) {
  var o = {}, a, c;
  return c = Ln(e, t), /^(top|bottom|left|right)$/.test(c) ? (/top|bottom/.test(c) && (a = "x"), /left|right/.test(c) && (a = "y"), r.preserveDocking === "target" ? Jv(a, i, e) ? (o[a] = i[a], [
    {
      x: o.x !== void 0 ? o.x : n.x,
      y: o.y !== void 0 ? o.y : n.y,
      original: {
        x: o.x !== void 0 ? o.x : n.x,
        y: o.y !== void 0 ? o.y : n.y
      }
    },
    {
      x: i.x,
      y: i.y
    }
  ]) : null : Jv(a, n, t) ? (o[a] = n[a], [
    {
      x: n.x,
      y: n.y
    },
    {
      x: o.x !== void 0 ? o.x : i.x,
      y: o.y !== void 0 ? o.y : i.y,
      original: {
        x: o.x !== void 0 ? o.x : i.x,
        y: o.y !== void 0 ? o.y : i.y
      }
    }
  ]) : null) : null;
}
function e5(e, t, n, i) {
  return tm(e, t, n, i);
}
function t5(e, t, n, i) {
  var r = i.slice().reverse();
  return r = tm(e, t, n, r), r ? r.reverse() : null;
}
function tm(e, t, n, i) {
  function r(d) {
    return d.length < 3 ? !0 : d.length > 4 ? !1 : !!gt(d, function(f, y) {
      var g = d[y - 1];
      return g && tc(f, g) < 3;
    });
  }
  function o(d, f, y) {
    var g = Ar(f, d);
    switch (g) {
      case "v":
        return { x: y.x, y: d.y };
      case "h":
        return { x: d.x, y: y.y };
    }
    return { x: d.x, y: d.y };
  }
  function a(d, f, y) {
    var g;
    for (g = d.length - 2; g !== 0; g--)
      if (Gy(d[g], f, Xv) || Gy(d[g], y, Xv))
        return d.slice(g);
    return d;
  }
  if (r(i))
    return null;
  var c = i[0], l = i.slice(), u;
  return l[0] = n, l[1] = o(l[1], c, n), u = a(l, e, t), u !== l && (l = tm(e, t, n, u)), l && Ar(l) ? null : l;
}
function n5(e, t) {
  if (xE(t))
    return t;
  switch (e) {
    case "intersect":
      return "t:t";
    case "top":
    case "bottom":
      return "v:v";
    case "left":
    case "right":
      return "h:h";
    default:
      return t;
  }
}
function i5(e) {
  return e && /^h|v|t|r|b|l:h|v|t|r|b|l$/.test(e);
}
function xE(e) {
  return e && /t|r|b|l/.test(e);
}
function r5(e) {
  return {
    top: "bottom",
    bottom: "top",
    left: "right",
    right: "left",
    "top-left": "bottom-right",
    "bottom-right": "top-left",
    "top-right": "bottom-left",
    "bottom-left": "top-right"
  }[e];
}
function Qv(e, t, n, i) {
  if (n === "h" && (n = /left/.test(i) ? "l" : "r"), n === "v" && (n = /top/.test(i) ? "t" : "b"), n === "t")
    return { original: e, x: e.x, y: t.y };
  if (n === "r")
    return { original: e, x: t.x + t.width, y: e.y };
  if (n === "b")
    return { original: e, x: e.x, y: t.y + t.height };
  if (n === "l")
    return { original: e, x: t.x, y: e.y };
  throw new Error("unexpected dockingDirection: <" + n + ">");
}
function EE(e) {
  return e.reduce(function(t, n, i) {
    var r = t[t.length - 1], o = e[i + 1];
    return xd(r, o, n, 0) || t.push(n), t;
  }, []);
}
var o5 = -10, a5 = 40, s5 = {
  default: ["h:h"],
  fromGateway: ["v:h"],
  toGateway: ["h:v"],
  loop: {
    fromTop: ["t:r"],
    fromRight: ["r:b"],
    fromLeft: ["l:t"],
    fromBottom: ["b:l"]
  },
  boundaryLoop: {
    alternateHorizontalSide: "b",
    alternateVerticalSide: "l",
    default: "v"
  },
  messageFlow: ["straight", "v:v"],
  subProcess: ["straight", "h:h"],
  isHorizontal: !0
}, c5 = {
  default: ["v:v"],
  fromGateway: ["h:v"],
  toGateway: ["v:h"],
  loop: {
    fromTop: ["t:l"],
    fromRight: ["r:t"],
    fromLeft: ["l:b"],
    fromBottom: ["b:r"]
  },
  boundaryLoop: {
    alternateHorizontalSide: "t",
    alternateVerticalSide: "r",
    default: "h"
  },
  messageFlow: ["straight", "h:h"],
  subProcess: ["straight", "v:v"],
  isHorizontal: !1
}, nm = {
  top: "bottom",
  "top-right": "bottom-left",
  "top-left": "bottom-right",
  right: "left",
  bottom: "top",
  "bottom-right": "top-left",
  "bottom-left": "top-right",
  left: "right"
}, Ds = {
  top: "t",
  right: "r",
  bottom: "b",
  left: "l"
};
function im() {
}
Pe(im, _E);
im.prototype.layoutConnection = function(e, t) {
  t || (t = {});
  var n = t.source || e.source, i = t.target || e.target, r = t.waypoints || e.waypoints, o = t.connectionStart, a = t.connectionEnd, c, l;
  if (o || (o = e0(r && r[0], n)), a || (a = e0(r && r[r.length - 1], i)), (P(e, "bpmn:Association") || P(e, "bpmn:DataAssociation")) && r && !t0(n, i))
    return [].concat([o], r.slice(1, -1), [a]);
  var u = $u(n) ? s5 : c5;
  return P(e, "bpmn:MessageFlow") ? c = u5(n, i, u) : (P(e, "bpmn:SequenceFlow") || t0(n, i)) && (n === i ? c = {
    preferredLayouts: y5(n, e, u)
  } : P(n, "bpmn:BoundaryEvent") ? c = {
    preferredLayouts: g5(n, i, a, u)
  } : qs(n) || qs(i) ? c = {
    preferredLayouts: u.subProcess,
    preserveDocking: f5(n)
  } : P(n, "bpmn:Gateway") ? c = {
    preferredLayouts: u.fromGateway
  } : P(i, "bpmn:Gateway") ? c = {
    preferredLayouts: u.toGateway
  } : c = {
    preferredLayouts: u.default
  }), c && (c = U(c, t), l = EE(ZD(
    n,
    i,
    o,
    a,
    r,
    c
  ))), l || [o, a];
};
function l5(e) {
  var t = e.host;
  return Ln(Fe(e), t, o5);
}
function u5(e, t, n) {
  return {
    preferredLayouts: n.messageFlow,
    preserveDocking: p5(e, t)
  };
}
function p5(e, t) {
  return P(t, "bpmn:Participant") ? "source" : P(e, "bpmn:Participant") ? "target" : qs(t) ? "source" : qs(e) || P(t, "bpmn:Event") ? "target" : P(e, "bpmn:Event") ? "source" : null;
}
function f5(e) {
  return qs(e) ? "target" : "source";
}
function e0(e, t) {
  return e ? e.original || e : Fe(t);
}
function t0(e, t) {
  return P(t, "bpmn:Activity") && P(e, "bpmn:BoundaryEvent") && t.businessObject.isForCompensation;
}
function qs(e) {
  return P(e, "bpmn:SubProcess") && pt(e);
}
function Wo(e, t) {
  return e === t;
}
function d5(e, t) {
  return t.indexOf(e) !== -1;
}
function Va(e) {
  var t = /right|left/.exec(e);
  return t && t[0];
}
function Wa(e) {
  var t = /top|bottom/.exec(e);
  return t && t[0];
}
function n0(e, t) {
  return nm[e] === t;
}
function h5(e, t) {
  var n = Va(e), i = nm[n];
  return t.indexOf(i) !== -1;
}
function m5(e, t) {
  var n = Wa(e), i = nm[n];
  return t.indexOf(i) !== -1;
}
function wE(e) {
  return e === "right" || e === "left";
}
function y5(e, t, n) {
  var i = t.waypoints, r = i && i.length && Ln(i[0], e);
  return r === "top" ? n.loop.fromTop : r === "right" ? n.loop.fromRight : r === "left" ? n.loop.fromLeft : n.loop.fromBottom;
}
function g5(e, t, n, i) {
  var r = Fe(e), o = Fe(t), a = l5(e), c, l, u = Wo(e.host, t), d = d5(a, ["top", "right", "bottom", "left"]), f = Ln(o, r, {
    x: e.width / 2 + t.width / 2,
    y: e.height / 2 + t.height / 2
  });
  return u ? v5(a, d, e, t, n, i) : (c = _5(a, f, d, i.isHorizontal), l = b5(a, f, d, i.isHorizontal), [c + ":" + l]);
}
function v5(e, t, n, i, r, o) {
  var a = t ? e : o.isHorizontal ? Wa(e) : Va(e), c = Ds[a], l;
  return t ? wE(e) ? l = i0("y", n, i, r) ? "h" : o.boundaryLoop.alternateHorizontalSide : l = i0("x", n, i, r) ? "v" : o.boundaryLoop.alternateVerticalSide : l = o.boundaryLoop.default, [c + ":" + l];
}
function i0(e, t, n, i) {
  var r = a5;
  return !(uf(e, i, n, r) || uf(e, i, {
    x: n.x + n.width,
    y: n.y + n.height
  }, r) || uf(e, i, Fe(t), r));
}
function uf(e, t, n, i) {
  return Math.abs(t[e] - n[e]) < i;
}
function _5(e, t, n, i) {
  if (n)
    return Ds[e];
  var r = Wa(e), o = Va(e), a = Wa(t), c = Va(t);
  if (i) {
    if (Wo(r, a) || n0(o, c))
      return Ds[r];
  } else if (Wo(o, c) || n0(r, a))
    return Ds[o];
  return Ds[i ? o : r];
}
function b5(e, t, n, i) {
  return n ? wE(e) ? h5(e, t) || Wo(e, t) ? "h" : "v" : m5(e, t) || Wo(e, t) ? "v" : "h" : i ? Wo(Wa(e), Wa(t)) ? "h" : "v" : Wo(Va(e), Va(t)) ? "v" : "h";
}
function r0(e) {
  return U({ original: e.point.original || e.point }, e.actual);
}
function Eo(e, t) {
  this._elementRegistry = e, this._graphicsFactory = t;
}
Eo.$inject = ["elementRegistry", "graphicsFactory"];
Eo.prototype.getCroppedWaypoints = function(e, t, n) {
  t = t || e.source, n = n || e.target;
  var i = this.getDockingPoint(e, t, !0), r = this.getDockingPoint(e, n), o = e.waypoints.slice(i.idx + 1, r.idx);
  return o.unshift(r0(i)), o.push(r0(r)), o;
};
Eo.prototype.getDockingPoint = function(e, t, n) {
  var i = e.waypoints, r, o, a;
  return r = n ? 0 : i.length - 1, o = i[r], a = this._getIntersection(t, e, n), {
    point: o,
    actual: a || o,
    idx: r
  };
};
Eo.prototype._getIntersection = function(e, t, n) {
  var i = this._getShapePath(e), r = this._getConnectionPath(t);
  return Of(i, r, n);
};
Eo.prototype._getConnectionPath = function(e) {
  return this._graphicsFactory.getConnectionPath(e);
};
Eo.prototype._getShapePath = function(e) {
  return this._graphicsFactory.getShapePath(e);
};
Eo.prototype._getGfx = function(e) {
  return this._elementRegistry.getGraphics(e);
};
const SE = {
  __init__: [
    "modeling",
    "bpmnUpdater"
  ],
  __depends__: [
    mM,
    OM,
    BM,
    LM,
    rE,
    uD,
    fD,
    vD,
    pr,
    Nd,
    sE
  ],
  bpmnFactory: ["type", Ni],
  bpmnUpdater: ["type", pi],
  elementFactory: ["type", _o],
  modeling: ["type", In],
  layouter: ["type", im],
  connectionDocking: ["type", Eo]
}, o0 = Math.round;
function up(e, t, n, i, r, o) {
  this._complexPreview = e, this._connectionDocking = t, this._elementFactory = n, this._eventBus = i, this._layouter = r, this._rules = o;
}
up.prototype.create = function(e, t, n) {
  const i = this._complexPreview, r = this._connectionDocking, o = this._elementFactory, a = this._eventBus, c = this._layouter, l = this._rules, u = o.createShape(U({ type: t }, n)), d = a.fire("autoPlace", {
    source: e,
    shape: u
  });
  if (!d)
    return;
  U(u, {
    x: d.x - o0(u.width / 2),
    y: d.y - o0(u.height / 2)
  });
  const f = l.allowed("connection.create", {
    source: e,
    target: u,
    hints: {
      targetParent: e.parent
    }
  });
  let y = null;
  f && (y = o.createConnection(f), y.waypoints = c.layoutConnection(y, {
    source: e,
    target: u
  }), y.waypoints = r.getCroppedWaypoints(y, e, u)), i.create({
    created: [
      u,
      y
    ].filter((g) => !Xl(g))
  });
};
up.prototype.cleanUp = function() {
  this._complexPreview.cleanUp();
};
up.$inject = [
  "complexPreview",
  "connectionDocking",
  "elementFactory",
  "eventBus",
  "layouter",
  "rules"
];
const x5 = {
  __depends__: [
    qd,
    YT,
    SE
  ],
  __init__: ["appendPreview"],
  appendPreview: ["type", up]
};
var a0 = Math.min, s0 = Math.max;
function pf(e) {
  e.preventDefault();
}
function $s(e) {
  e.stopPropagation();
}
function E5(e) {
  return e.nodeType === Node.TEXT_NODE;
}
function w5(e) {
  return [].slice.call(e);
}
function Ki(e) {
  this.container = e.container, this.parent = Ot(
    '<div class="djs-direct-editing-parent"><div class="djs-direct-editing-content" contenteditable="true"></div></div>'
  ), this.content = Tt("[contenteditable]", this.parent), this.keyHandler = e.keyHandler || function() {
  }, this.resizeHandler = e.resizeHandler || function() {
  }, this.autoResize = Qn(this.autoResize, this), this.handlePaste = Qn(this.handlePaste, this);
}
Ki.prototype.create = function(e, t, n, i) {
  var r = this, o = this.parent, a = this.content, c = this.container;
  i = this.options = i || {}, t = this.style = t || {};
  var l = Ui(t, [
    "width",
    "height",
    "maxWidth",
    "maxHeight",
    "minWidth",
    "minHeight",
    "left",
    "top",
    "backgroundColor",
    "position",
    "overflow",
    "border",
    "wordWrap",
    "textAlign",
    "outline",
    "transform"
  ]);
  U(o.style, {
    width: e.width + "px",
    height: e.height + "px",
    maxWidth: e.maxWidth + "px",
    maxHeight: e.maxHeight + "px",
    minWidth: e.minWidth + "px",
    minHeight: e.minHeight + "px",
    left: e.x + "px",
    top: e.y + "px",
    backgroundColor: "#ffffff",
    position: "absolute",
    overflow: "visible",
    border: "1px solid #ccc",
    boxSizing: "border-box",
    wordWrap: "normal",
    textAlign: "center",
    outline: "none"
  }, l);
  var u = Ui(t, [
    "fontFamily",
    "fontSize",
    "fontWeight",
    "lineHeight",
    "padding",
    "paddingTop",
    "paddingRight",
    "paddingBottom",
    "paddingLeft"
  ]);
  return U(a.style, {
    boxSizing: "border-box",
    width: "100%",
    outline: "none",
    wordWrap: "break-word"
  }, u), i.centerVertically && U(a.style, {
    position: "absolute",
    top: "50%",
    transform: "translate(0, -50%)"
  }, u), a.innerText = n, Ye.bind(a, "keydown", this.keyHandler), Ye.bind(a, "mousedown", $s), Ye.bind(a, "paste", r.handlePaste), i.autoResize && Ye.bind(a, "input", this.autoResize), i.resizable && this.resizable(t), c.appendChild(o), this.setSelection(a.lastChild, a.lastChild && a.lastChild.length), o;
};
Ki.prototype.handlePaste = function(e) {
  var t = this.options, n = this.style;
  e.preventDefault();
  var i;
  if (e.clipboardData ? i = e.clipboardData.getData("text/plain") : i = window.clipboardData.getData("Text"), this.insertText(i), t.autoResize) {
    var r = this.autoResize(n);
    r && this.resizeHandler(r);
  }
};
Ki.prototype.insertText = function(e) {
  e = S5(e);
  var t = document.execCommand("insertText", !1, e);
  t || this._insertTextIE(e);
};
Ki.prototype._insertTextIE = function(e) {
  var t = this.getSelection(), n = t.startContainer, i = t.endContainer, r = t.startOffset, o = t.endOffset, a = t.commonAncestorContainer, c = w5(a.childNodes), l, u;
  if (E5(a)) {
    var d = n.textContent;
    n.textContent = d.substring(0, r) + e + d.substring(o), l = n, u = r + e.length;
  } else if (n === this.content && i === this.content) {
    var f = document.createTextNode(e);
    this.content.insertBefore(f, c[r]), l = f, u = f.textContent.length;
  } else {
    var y = c.indexOf(n), g = c.indexOf(i);
    c.forEach(function(_, x) {
      x === y ? _.textContent = n.textContent.substring(0, r) + e + i.textContent.substring(o) : x > y && x <= g && cr(_);
    }), l = n, u = r + e.length;
  }
  l && u !== void 0 && setTimeout(function() {
    self.setSelection(l, u);
  });
};
Ki.prototype.autoResize = function() {
  var e = this.parent, t = this.content, n = parseInt(this.style.fontSize) || 12;
  if (t.scrollHeight > e.offsetHeight || t.scrollHeight < e.offsetHeight - n) {
    var i = e.getBoundingClientRect(), r = t.scrollHeight;
    e.style.height = r + "px", this.resizeHandler({
      width: i.width,
      height: i.height,
      dx: 0,
      dy: r - i.height
    });
  }
};
Ki.prototype.resizable = function() {
  var e = this, t = this.parent, n = this.resizeHandle, i = parseInt(this.style.minWidth) || 0, r = parseInt(this.style.minHeight) || 0, o = parseInt(this.style.maxWidth) || 1 / 0, a = parseInt(this.style.maxHeight) || 1 / 0;
  if (!n) {
    n = this.resizeHandle = Ot(
      '<div class="djs-direct-editing-resize-handle"></div>'
    );
    var c, l, u, d, f = function(_) {
      pf(_), $s(_), c = _.clientX, l = _.clientY;
      var x = t.getBoundingClientRect();
      u = x.width, d = x.height, Ye.bind(document, "mousemove", y), Ye.bind(document, "mouseup", g);
    }, y = function(_) {
      pf(_), $s(_);
      var x = a0(s0(u + _.clientX - c, i), o), w = a0(s0(d + _.clientY - l, r), a);
      t.style.width = x + "px", t.style.height = w + "px", e.resizeHandler({
        width: u,
        height: d,
        dx: _.clientX - c,
        dy: _.clientY - l
      });
    }, g = function(_) {
      pf(_), $s(_), Ye.unbind(document, "mousemove", y, !1), Ye.unbind(document, "mouseup", g, !1);
    };
    Ye.bind(n, "mousedown", f);
  }
  U(n.style, {
    position: "absolute",
    bottom: "0px",
    right: "0px",
    cursor: "nwse-resize",
    width: "0",
    height: "0",
    borderTop: (parseInt(this.style.fontSize) / 4 || 3) + "px solid transparent",
    borderRight: (parseInt(this.style.fontSize) / 4 || 3) + "px solid #ccc",
    borderBottom: (parseInt(this.style.fontSize) / 4 || 3) + "px solid #ccc",
    borderLeft: (parseInt(this.style.fontSize) / 4 || 3) + "px solid transparent"
  }), t.appendChild(n);
};
Ki.prototype.destroy = function() {
  var e = this.parent, t = this.content, n = this.resizeHandle;
  t.innerText = "", e.removeAttribute("style"), t.removeAttribute("style"), Ye.unbind(t, "keydown", this.keyHandler), Ye.unbind(t, "mousedown", $s), Ye.unbind(t, "input", this.autoResize), Ye.unbind(t, "paste", this.handlePaste), n && (n.removeAttribute("style"), cr(n)), cr(e);
};
Ki.prototype.getValue = function() {
  return this.content.innerText.trim();
};
Ki.prototype.getSelection = function() {
  var e = window.getSelection(), t = e.getRangeAt(0);
  return t;
};
Ki.prototype.setSelection = function(e, t) {
  var n = document.createRange();
  e === null ? n.selectNodeContents(this.content) : (n.setStart(e, t), n.setEnd(e, t));
  var i = window.getSelection();
  i.removeAllRanges(), i.addRange(n);
};
function S5(e) {
  return e.replace(/\r\n|\r|\n/g, `
`);
}
function Bi(e, t) {
  this._eventBus = e, this._providers = [], this._textbox = new Ki({
    container: t.getContainer(),
    keyHandler: Qn(this._handleKey, this),
    resizeHandler: Qn(this._handleResize, this)
  });
}
Bi.$inject = ["eventBus", "canvas"];
Bi.prototype.registerProvider = function(e) {
  this._providers.push(e);
};
Bi.prototype.isActive = function(e) {
  return !!(this._active && (!e || this._active.element === e));
};
Bi.prototype.cancel = function() {
  this._active && (this._fire("cancel"), this.close());
};
Bi.prototype._fire = function(e, t) {
  this._eventBus.fire("directEditing." + e, t || { active: this._active });
};
Bi.prototype.close = function() {
  this._textbox.destroy(), this._fire("deactivate"), this._active = null, this.resizable = void 0;
};
Bi.prototype.complete = function() {
  var e = this._active;
  if (e) {
    var t, n = e.context.bounds, i = this.$textbox.getBoundingClientRect(), r = this.getValue(), o = e.context.text;
    (r !== o || i.height !== n.height || i.width !== n.width) && (t = this._textbox.container.getBoundingClientRect(), e.provider.update(e.element, r, e.context.text, {
      x: i.left - t.left,
      y: i.top - t.top,
      width: i.width,
      height: i.height
    })), this._fire("complete"), this.close();
  }
};
Bi.prototype.getValue = function() {
  return this._textbox.getValue();
};
Bi.prototype._handleKey = function(e) {
  e.stopPropagation();
  var t = e.keyCode || e.charCode;
  if (t === 27)
    return e.preventDefault(), this.cancel();
  if (t === 13 && !e.shiftKey)
    return e.preventDefault(), this.complete();
};
Bi.prototype._handleResize = function(e) {
  this._fire("resize", e);
};
Bi.prototype.activate = function(e) {
  this.isActive() && this.cancel();
  var t, n = gt(this._providers, function(i) {
    return (t = i.activate(e)) ? i : null;
  });
  return t && (this.$textbox = this._textbox.create(
    t.bounds,
    t.style,
    t.text,
    t.options
  ), this._active = {
    element: e,
    context: t,
    provider: n
  }, t.options && t.options.resizable && (this.resizable = !0), this._fire("activate")), !!t;
};
const RE = {
  __depends__: [
    Mu
  ],
  __init__: ["directEditing"],
  directEditing: ["type", Bi]
};
function c0(e) {
  return function(t) {
    var n = t.target, i = he(e), r = i.eventDefinitions && i.eventDefinitions[0], o = i.$type === n.type, a = (r && r.$type) === n.eventDefinitionType, c = (
      // coherse to <false>
      !!n.triggeredByEvent == !!i.triggeredByEvent
    ), l = n.isExpanded === void 0 || n.isExpanded === pt(e);
    return !o || !a || !c || !l;
  };
}
var R5 = [
  {
    label: "Start event",
    actionName: "replace-with-none-start",
    className: "bpmn-icon-start-event-none",
    target: {
      type: "bpmn:StartEvent"
    }
  },
  {
    label: "Intermediate throw event",
    actionName: "replace-with-none-intermediate-throwing",
    className: "bpmn-icon-intermediate-event-none",
    target: {
      type: "bpmn:IntermediateThrowEvent"
    }
  },
  {
    label: "End event",
    actionName: "replace-with-none-end",
    className: "bpmn-icon-end-event-none",
    target: {
      type: "bpmn:EndEvent"
    }
  },
  {
    label: "Message start event",
    actionName: "replace-with-message-start",
    className: "bpmn-icon-start-event-message",
    target: {
      type: "bpmn:StartEvent",
      eventDefinitionType: "bpmn:MessageEventDefinition"
    }
  },
  {
    label: "Timer start event",
    actionName: "replace-with-timer-start",
    className: "bpmn-icon-start-event-timer",
    target: {
      type: "bpmn:StartEvent",
      eventDefinitionType: "bpmn:TimerEventDefinition"
    }
  },
  {
    label: "Conditional start event",
    actionName: "replace-with-conditional-start",
    className: "bpmn-icon-start-event-condition",
    target: {
      type: "bpmn:StartEvent",
      eventDefinitionType: "bpmn:ConditionalEventDefinition"
    }
  },
  {
    label: "Signal start event",
    actionName: "replace-with-signal-start",
    className: "bpmn-icon-start-event-signal",
    target: {
      type: "bpmn:StartEvent",
      eventDefinitionType: "bpmn:SignalEventDefinition"
    }
  }
], C5 = [
  {
    label: "Start event",
    actionName: "replace-with-none-start",
    className: "bpmn-icon-start-event-none",
    target: {
      type: "bpmn:StartEvent"
    }
  },
  {
    label: "Intermediate throw event",
    actionName: "replace-with-none-intermediate-throwing",
    className: "bpmn-icon-intermediate-event-none",
    target: {
      type: "bpmn:IntermediateThrowEvent"
    }
  },
  {
    label: "End event",
    actionName: "replace-with-none-end",
    className: "bpmn-icon-end-event-none",
    target: {
      type: "bpmn:EndEvent"
    }
  }
], A5 = [
  {
    label: "Start event",
    actionName: "replace-with-none-start",
    className: "bpmn-icon-start-event-none",
    target: {
      type: "bpmn:StartEvent"
    }
  },
  {
    label: "Intermediate throw event",
    actionName: "replace-with-none-intermediate-throw",
    className: "bpmn-icon-intermediate-event-none",
    target: {
      type: "bpmn:IntermediateThrowEvent"
    }
  },
  {
    label: "End event",
    actionName: "replace-with-none-end",
    className: "bpmn-icon-end-event-none",
    target: {
      type: "bpmn:EndEvent"
    }
  },
  {
    label: "Message intermediate catch event",
    actionName: "replace-with-message-intermediate-catch",
    className: "bpmn-icon-intermediate-event-catch-message",
    target: {
      type: "bpmn:IntermediateCatchEvent",
      eventDefinitionType: "bpmn:MessageEventDefinition"
    }
  },
  {
    label: "Message intermediate throw event",
    actionName: "replace-with-message-intermediate-throw",
    className: "bpmn-icon-intermediate-event-throw-message",
    target: {
      type: "bpmn:IntermediateThrowEvent",
      eventDefinitionType: "bpmn:MessageEventDefinition"
    }
  },
  {
    label: "Timer intermediate catch event",
    actionName: "replace-with-timer-intermediate-catch",
    className: "bpmn-icon-intermediate-event-catch-timer",
    target: {
      type: "bpmn:IntermediateCatchEvent",
      eventDefinitionType: "bpmn:TimerEventDefinition"
    }
  },
  {
    label: "Escalation intermediate throw event",
    actionName: "replace-with-escalation-intermediate-throw",
    className: "bpmn-icon-intermediate-event-throw-escalation",
    target: {
      type: "bpmn:IntermediateThrowEvent",
      eventDefinitionType: "bpmn:EscalationEventDefinition"
    }
  },
  {
    label: "Conditional intermediate catch event",
    actionName: "replace-with-conditional-intermediate-catch",
    className: "bpmn-icon-intermediate-event-catch-condition",
    target: {
      type: "bpmn:IntermediateCatchEvent",
      eventDefinitionType: "bpmn:ConditionalEventDefinition"
    }
  },
  {
    label: "Link intermediate catch event",
    actionName: "replace-with-link-intermediate-catch",
    className: "bpmn-icon-intermediate-event-catch-link",
    target: {
      type: "bpmn:IntermediateCatchEvent",
      eventDefinitionType: "bpmn:LinkEventDefinition",
      eventDefinitionAttrs: {
        name: ""
      }
    }
  },
  {
    label: "Link intermediate throw event",
    actionName: "replace-with-link-intermediate-throw",
    className: "bpmn-icon-intermediate-event-throw-link",
    target: {
      type: "bpmn:IntermediateThrowEvent",
      eventDefinitionType: "bpmn:LinkEventDefinition",
      eventDefinitionAttrs: {
        name: ""
      }
    }
  },
  {
    label: "Compensation intermediate throw event",
    actionName: "replace-with-compensation-intermediate-throw",
    className: "bpmn-icon-intermediate-event-throw-compensation",
    target: {
      type: "bpmn:IntermediateThrowEvent",
      eventDefinitionType: "bpmn:CompensateEventDefinition"
    }
  },
  {
    label: "Signal intermediate catch event",
    actionName: "replace-with-signal-intermediate-catch",
    className: "bpmn-icon-intermediate-event-catch-signal",
    target: {
      type: "bpmn:IntermediateCatchEvent",
      eventDefinitionType: "bpmn:SignalEventDefinition"
    }
  },
  {
    label: "Signal intermediate throw event",
    actionName: "replace-with-signal-intermediate-throw",
    className: "bpmn-icon-intermediate-event-throw-signal",
    target: {
      type: "bpmn:IntermediateThrowEvent",
      eventDefinitionType: "bpmn:SignalEventDefinition"
    }
  }
], P5 = [
  {
    label: "Start event",
    actionName: "replace-with-none-start",
    className: "bpmn-icon-start-event-none",
    target: {
      type: "bpmn:StartEvent"
    }
  },
  {
    label: "Intermediate throw event",
    actionName: "replace-with-none-intermediate-throw",
    className: "bpmn-icon-intermediate-event-none",
    target: {
      type: "bpmn:IntermediateThrowEvent"
    }
  },
  {
    label: "End event",
    actionName: "replace-with-none-end",
    className: "bpmn-icon-end-event-none",
    target: {
      type: "bpmn:EndEvent"
    }
  },
  {
    label: "Message end event",
    actionName: "replace-with-message-end",
    className: "bpmn-icon-end-event-message",
    target: {
      type: "bpmn:EndEvent",
      eventDefinitionType: "bpmn:MessageEventDefinition"
    }
  },
  {
    label: "Escalation end event",
    actionName: "replace-with-escalation-end",
    className: "bpmn-icon-end-event-escalation",
    target: {
      type: "bpmn:EndEvent",
      eventDefinitionType: "bpmn:EscalationEventDefinition"
    }
  },
  {
    label: "Error end event",
    actionName: "replace-with-error-end",
    className: "bpmn-icon-end-event-error",
    target: {
      type: "bpmn:EndEvent",
      eventDefinitionType: "bpmn:ErrorEventDefinition"
    }
  },
  {
    label: "Cancel end event",
    actionName: "replace-with-cancel-end",
    className: "bpmn-icon-end-event-cancel",
    target: {
      type: "bpmn:EndEvent",
      eventDefinitionType: "bpmn:CancelEventDefinition"
    }
  },
  {
    label: "Compensation end event",
    actionName: "replace-with-compensation-end",
    className: "bpmn-icon-end-event-compensation",
    target: {
      type: "bpmn:EndEvent",
      eventDefinitionType: "bpmn:CompensateEventDefinition"
    }
  },
  {
    label: "Signal end event",
    actionName: "replace-with-signal-end",
    className: "bpmn-icon-end-event-signal",
    target: {
      type: "bpmn:EndEvent",
      eventDefinitionType: "bpmn:SignalEventDefinition"
    }
  },
  {
    label: "Terminate end event",
    actionName: "replace-with-terminate-end",
    className: "bpmn-icon-end-event-terminate",
    target: {
      type: "bpmn:EndEvent",
      eventDefinitionType: "bpmn:TerminateEventDefinition"
    }
  }
], T5 = [
  {
    label: "Exclusive gateway",
    actionName: "replace-with-exclusive-gateway",
    className: "bpmn-icon-gateway-xor",
    target: {
      type: "bpmn:ExclusiveGateway"
    }
  },
  {
    label: "Parallel gateway",
    actionName: "replace-with-parallel-gateway",
    className: "bpmn-icon-gateway-parallel",
    target: {
      type: "bpmn:ParallelGateway"
    }
  },
  {
    label: "Inclusive gateway",
    actionName: "replace-with-inclusive-gateway",
    className: "bpmn-icon-gateway-or",
    target: {
      type: "bpmn:InclusiveGateway"
    }
  },
  {
    label: "Complex gateway",
    actionName: "replace-with-complex-gateway",
    className: "bpmn-icon-gateway-complex",
    target: {
      type: "bpmn:ComplexGateway"
    }
  },
  {
    label: "Event-based gateway",
    actionName: "replace-with-event-based-gateway",
    className: "bpmn-icon-gateway-eventbased",
    target: {
      type: "bpmn:EventBasedGateway",
      instantiate: !1,
      eventGatewayType: "Exclusive"
    }
  }
  // Gateways deactivated until https://github.com/bpmn-io/bpmn-js/issues/194
  // {
  //   label: 'Event based instantiating Gateway',
  //   actionName: 'replace-with-exclusive-event-based-gateway',
  //   className: 'bpmn-icon-exclusive-event-based',
  //   target: {
  //     type: 'bpmn:EventBasedGateway'
  //   },
  //   options: {
  //     businessObject: { instantiate: true, eventGatewayType: 'Exclusive' }
  //   }
  // },
  // {
  //   label: 'Parallel Event based instantiating Gateway',
  //   actionName: 'replace-with-parallel-event-based-instantiate-gateway',
  //   className: 'bpmn-icon-parallel-event-based-instantiate-gateway',
  //   target: {
  //     type: 'bpmn:EventBasedGateway'
  //   },
  //   options: {
  //     businessObject: { instantiate: true, eventGatewayType: 'Parallel' }
  //   }
  // }
], k5 = [
  {
    label: "Transaction",
    actionName: "replace-with-transaction",
    className: "bpmn-icon-transaction",
    target: {
      type: "bpmn:Transaction",
      isExpanded: !0
    }
  },
  {
    label: "Event sub-process",
    actionName: "replace-with-event-subprocess",
    className: "bpmn-icon-event-subprocess-expanded",
    target: {
      type: "bpmn:SubProcess",
      triggeredByEvent: !0,
      isExpanded: !0
    }
  },
  {
    label: "Sub-process (collapsed)",
    actionName: "replace-with-collapsed-subprocess",
    className: "bpmn-icon-subprocess-collapsed",
    target: {
      type: "bpmn:SubProcess",
      isExpanded: !1
    }
  }
], CE = [
  {
    label: "Transaction",
    actionName: "replace-with-transaction",
    className: "bpmn-icon-transaction",
    target: {
      type: "bpmn:Transaction",
      isExpanded: !0
    }
  },
  {
    label: "Sub-process",
    actionName: "replace-with-subprocess",
    className: "bpmn-icon-subprocess-expanded",
    target: {
      type: "bpmn:SubProcess",
      isExpanded: !0
    }
  },
  {
    label: "Event sub-process",
    actionName: "replace-with-event-subprocess",
    className: "bpmn-icon-event-subprocess-expanded",
    target: {
      type: "bpmn:SubProcess",
      triggeredByEvent: !0,
      isExpanded: !0
    }
  }
], M5 = CE, l0 = [
  {
    label: "Task",
    actionName: "replace-with-task",
    className: "bpmn-icon-task",
    target: {
      type: "bpmn:Task"
    }
  },
  {
    label: "User task",
    actionName: "replace-with-user-task",
    className: "bpmn-icon-user",
    target: {
      type: "bpmn:UserTask"
    }
  },
  {
    label: "Service task",
    actionName: "replace-with-service-task",
    className: "bpmn-icon-service",
    target: {
      type: "bpmn:ServiceTask"
    }
  },
  {
    label: "Send task",
    actionName: "replace-with-send-task",
    className: "bpmn-icon-send",
    target: {
      type: "bpmn:SendTask"
    }
  },
  {
    label: "Receive task",
    actionName: "replace-with-receive-task",
    className: "bpmn-icon-receive",
    target: {
      type: "bpmn:ReceiveTask"
    }
  },
  {
    label: "Manual task",
    actionName: "replace-with-manual-task",
    className: "bpmn-icon-manual",
    target: {
      type: "bpmn:ManualTask"
    }
  },
  {
    label: "Business rule task",
    actionName: "replace-with-rule-task",
    className: "bpmn-icon-business-rule",
    target: {
      type: "bpmn:BusinessRuleTask"
    }
  },
  {
    label: "Script task",
    actionName: "replace-with-script-task",
    className: "bpmn-icon-script",
    target: {
      type: "bpmn:ScriptTask"
    }
  },
  {
    label: "Call activity",
    actionName: "replace-with-call-activity",
    className: "bpmn-icon-call-activity",
    target: {
      type: "bpmn:CallActivity"
    }
  },
  {
    label: "Sub-process (collapsed)",
    actionName: "replace-with-collapsed-subprocess",
    className: "bpmn-icon-subprocess-collapsed",
    target: {
      type: "bpmn:SubProcess",
      isExpanded: !1
    }
  },
  {
    label: "Sub-process (expanded)",
    actionName: "replace-with-expanded-subprocess",
    className: "bpmn-icon-subprocess-expanded",
    target: {
      type: "bpmn:SubProcess",
      isExpanded: !0
    }
  }
], D5 = [
  {
    label: "Data store reference",
    actionName: "replace-with-data-store-reference",
    className: "bpmn-icon-data-store",
    target: {
      type: "bpmn:DataStoreReference"
    }
  }
], O5 = [
  {
    label: "Data object reference",
    actionName: "replace-with-data-object-reference",
    className: "bpmn-icon-data-object",
    target: {
      type: "bpmn:DataObjectReference"
    }
  }
], N5 = [
  {
    label: "Message boundary event",
    actionName: "replace-with-message-boundary",
    className: "bpmn-icon-intermediate-event-catch-message",
    target: {
      type: "bpmn:BoundaryEvent",
      eventDefinitionType: "bpmn:MessageEventDefinition",
      cancelActivity: !0
    }
  },
  {
    label: "Timer boundary event",
    actionName: "replace-with-timer-boundary",
    className: "bpmn-icon-intermediate-event-catch-timer",
    target: {
      type: "bpmn:BoundaryEvent",
      eventDefinitionType: "bpmn:TimerEventDefinition",
      cancelActivity: !0
    }
  },
  {
    label: "Escalation boundary event",
    actionName: "replace-with-escalation-boundary",
    className: "bpmn-icon-intermediate-event-catch-escalation",
    target: {
      type: "bpmn:BoundaryEvent",
      eventDefinitionType: "bpmn:EscalationEventDefinition",
      cancelActivity: !0
    }
  },
  {
    label: "Conditional boundary event",
    actionName: "replace-with-conditional-boundary",
    className: "bpmn-icon-intermediate-event-catch-condition",
    target: {
      type: "bpmn:BoundaryEvent",
      eventDefinitionType: "bpmn:ConditionalEventDefinition",
      cancelActivity: !0
    }
  },
  {
    label: "Error boundary event",
    actionName: "replace-with-error-boundary",
    className: "bpmn-icon-intermediate-event-catch-error",
    target: {
      type: "bpmn:BoundaryEvent",
      eventDefinitionType: "bpmn:ErrorEventDefinition",
      cancelActivity: !0
    }
  },
  {
    label: "Cancel boundary event",
    actionName: "replace-with-cancel-boundary",
    className: "bpmn-icon-intermediate-event-catch-cancel",
    target: {
      type: "bpmn:BoundaryEvent",
      eventDefinitionType: "bpmn:CancelEventDefinition",
      cancelActivity: !0
    }
  },
  {
    label: "Signal boundary event",
    actionName: "replace-with-signal-boundary",
    className: "bpmn-icon-intermediate-event-catch-signal",
    target: {
      type: "bpmn:BoundaryEvent",
      eventDefinitionType: "bpmn:SignalEventDefinition",
      cancelActivity: !0
    }
  },
  {
    label: "Compensation boundary event",
    actionName: "replace-with-compensation-boundary",
    className: "bpmn-icon-intermediate-event-catch-compensation",
    target: {
      type: "bpmn:BoundaryEvent",
      eventDefinitionType: "bpmn:CompensateEventDefinition",
      cancelActivity: !0
    }
  },
  {
    label: "Message boundary event (non-interrupting)",
    actionName: "replace-with-non-interrupting-message-boundary",
    className: "bpmn-icon-intermediate-event-catch-non-interrupting-message",
    target: {
      type: "bpmn:BoundaryEvent",
      eventDefinitionType: "bpmn:MessageEventDefinition",
      cancelActivity: !1
    }
  },
  {
    label: "Timer boundary event (non-interrupting)",
    actionName: "replace-with-non-interrupting-timer-boundary",
    className: "bpmn-icon-intermediate-event-catch-non-interrupting-timer",
    target: {
      type: "bpmn:BoundaryEvent",
      eventDefinitionType: "bpmn:TimerEventDefinition",
      cancelActivity: !1
    }
  },
  {
    label: "Escalation boundary event (non-interrupting)",
    actionName: "replace-with-non-interrupting-escalation-boundary",
    className: "bpmn-icon-intermediate-event-catch-non-interrupting-escalation",
    target: {
      type: "bpmn:BoundaryEvent",
      eventDefinitionType: "bpmn:EscalationEventDefinition",
      cancelActivity: !1
    }
  },
  {
    label: "Conditional boundary event (non-interrupting)",
    actionName: "replace-with-non-interrupting-conditional-boundary",
    className: "bpmn-icon-intermediate-event-catch-non-interrupting-condition",
    target: {
      type: "bpmn:BoundaryEvent",
      eventDefinitionType: "bpmn:ConditionalEventDefinition",
      cancelActivity: !1
    }
  },
  {
    label: "Signal boundary event (non-interrupting)",
    actionName: "replace-with-non-interrupting-signal-boundary",
    className: "bpmn-icon-intermediate-event-catch-non-interrupting-signal",
    target: {
      type: "bpmn:BoundaryEvent",
      eventDefinitionType: "bpmn:SignalEventDefinition",
      cancelActivity: !1
    }
  }
], B5 = [
  {
    label: "Message start event",
    actionName: "replace-with-message-start",
    className: "bpmn-icon-start-event-message",
    target: {
      type: "bpmn:StartEvent",
      eventDefinitionType: "bpmn:MessageEventDefinition",
      isInterrupting: !0
    }
  },
  {
    label: "Timer start event",
    actionName: "replace-with-timer-start",
    className: "bpmn-icon-start-event-timer",
    target: {
      type: "bpmn:StartEvent",
      eventDefinitionType: "bpmn:TimerEventDefinition",
      isInterrupting: !0
    }
  },
  {
    label: "Conditional start event",
    actionName: "replace-with-conditional-start",
    className: "bpmn-icon-start-event-condition",
    target: {
      type: "bpmn:StartEvent",
      eventDefinitionType: "bpmn:ConditionalEventDefinition",
      isInterrupting: !0
    }
  },
  {
    label: "Signal start event",
    actionName: "replace-with-signal-start",
    className: "bpmn-icon-start-event-signal",
    target: {
      type: "bpmn:StartEvent",
      eventDefinitionType: "bpmn:SignalEventDefinition",
      isInterrupting: !0
    }
  },
  {
    label: "Error start event",
    actionName: "replace-with-error-start",
    className: "bpmn-icon-start-event-error",
    target: {
      type: "bpmn:StartEvent",
      eventDefinitionType: "bpmn:ErrorEventDefinition",
      isInterrupting: !0
    }
  },
  {
    label: "Escalation start event",
    actionName: "replace-with-escalation-start",
    className: "bpmn-icon-start-event-escalation",
    target: {
      type: "bpmn:StartEvent",
      eventDefinitionType: "bpmn:EscalationEventDefinition",
      isInterrupting: !0
    }
  },
  {
    label: "Compensation start event",
    actionName: "replace-with-compensation-start",
    className: "bpmn-icon-start-event-compensation",
    target: {
      type: "bpmn:StartEvent",
      eventDefinitionType: "bpmn:CompensateEventDefinition",
      isInterrupting: !0
    }
  },
  {
    label: "Message start event (non-interrupting)",
    actionName: "replace-with-non-interrupting-message-start",
    className: "bpmn-icon-start-event-non-interrupting-message",
    target: {
      type: "bpmn:StartEvent",
      eventDefinitionType: "bpmn:MessageEventDefinition",
      isInterrupting: !1
    }
  },
  {
    label: "Timer start event (non-interrupting)",
    actionName: "replace-with-non-interrupting-timer-start",
    className: "bpmn-icon-start-event-non-interrupting-timer",
    target: {
      type: "bpmn:StartEvent",
      eventDefinitionType: "bpmn:TimerEventDefinition",
      isInterrupting: !1
    }
  },
  {
    label: "Conditional start event (non-interrupting)",
    actionName: "replace-with-non-interrupting-conditional-start",
    className: "bpmn-icon-start-event-non-interrupting-condition",
    target: {
      type: "bpmn:StartEvent",
      eventDefinitionType: "bpmn:ConditionalEventDefinition",
      isInterrupting: !1
    }
  },
  {
    label: "Signal start event (non-interrupting)",
    actionName: "replace-with-non-interrupting-signal-start",
    className: "bpmn-icon-start-event-non-interrupting-signal",
    target: {
      type: "bpmn:StartEvent",
      eventDefinitionType: "bpmn:SignalEventDefinition",
      isInterrupting: !1
    }
  },
  {
    label: "Escalation start event (non-interrupting)",
    actionName: "replace-with-non-interrupting-escalation-start",
    className: "bpmn-icon-start-event-non-interrupting-escalation",
    target: {
      type: "bpmn:StartEvent",
      eventDefinitionType: "bpmn:EscalationEventDefinition",
      isInterrupting: !1
    }
  }
], L5 = [
  {
    label: "Sequence flow",
    actionName: "replace-with-sequence-flow",
    className: "bpmn-icon-connection"
  },
  {
    label: "Default flow",
    actionName: "replace-with-default-flow",
    className: "bpmn-icon-default-flow"
  },
  {
    label: "Conditional flow",
    actionName: "replace-with-conditional-flow",
    className: "bpmn-icon-conditional-flow"
  }
], I5 = [
  {
    label: "Expanded pool/participant",
    actionName: "replace-with-expanded-pool",
    className: "bpmn-icon-participant",
    target: {
      type: "bpmn:Participant",
      isExpanded: !0
    }
  },
  {
    label: function(e) {
      var t = "Empty pool/participant";
      return e.children && e.children.length && (t += " (removes content)"), t;
    },
    actionName: "replace-with-collapsed-pool",
    // TODO(@janstuemmel): maybe design new icon
    className: "bpmn-icon-lane",
    target: {
      type: "bpmn:Participant",
      isExpanded: !1
    }
  }
];
const u0 = {
  "start-event-non-interrupting": `
  <svg viewBox="0 0 2048 2048" xmlns="http://www.w3.org/2000/svg">
    <g transform="translate(0 995.64)">
      <path d="m1899 28.357c21.545 567.43-598.38 1023.5-1133.6 835.92-548.09-147.21-801.57-873.95-463.59-1330 302.62-480.3 1071.7-507.54 1407.6-49.847 122.14 153.12 190.07 348.07 189.59 543.91z" fill="none" stroke="currentColor" stroke-dasharray="418.310422, 361.2328165" stroke-linecap="round" stroke-width="100"/>
    </g>
  </svg>`,
  "intermediate-event-non-interrupting": `
  <svg viewBox="0 0 2048 2048" xmlns="http://www.w3.org/2000/svg">
     <g transform="translate(0 995.64)" fill="none" stroke="currentColor" stroke-linecap="round">
        <circle cx="1024" cy="28.357" r="875" stroke-dasharray="418.310422, 361.2328165" stroke-width="100"/>
        <circle cx="1024" cy="28.357" r="685" stroke-dasharray="348.31044857,261.23283643" stroke-dashoffset="500" stroke-width="100"/>
     </g>
  </svg>`
};
function xi(e, t, n, i, r, o, a, c) {
  this._bpmnFactory = e, this._popupMenu = t, this._modeling = n, this._moddle = i, this._bpmnReplace = r, this._rules = o, this._translate = a, this._moddleCopy = c, this._register();
}
xi.$inject = [
  "bpmnFactory",
  "popupMenu",
  "modeling",
  "moddle",
  "bpmnReplace",
  "rules",
  "translate",
  "moddleCopy"
];
xi.prototype._register = function() {
  this._popupMenu.registerProvider("bpmn-replace", this);
};
xi.prototype.getPopupMenuEntries = function(e) {
  var t = e.businessObject, n = this._rules, i = [];
  if (Ke(e) || !n.allowed("shape.replace", { element: e }))
    return {};
  var r = c0(e);
  return P(t, "bpmn:DataObjectReference") ? this._createEntries(e, D5) : P(t, "bpmn:DataStoreReference") && !P(e.parent, "bpmn:Collaboration") ? this._createEntries(e, O5) : P(t, "bpmn:StartEvent") && !P(t.$parent, "bpmn:SubProcess") ? (i = tt(R5, r), this._createEntries(e, i)) : P(t, "bpmn:Participant") ? (i = tt(I5, function(o) {
    return pt(e) !== o.target.isExpanded;
  }), this._createEntries(e, i)) : P(t, "bpmn:StartEvent") && Bn(t.$parent) ? (i = tt(B5, function(o) {
    var a = o.target, c = a.isInterrupting !== !1, l = t.isInterrupting === c;
    return r(o) || !r(o) && !l;
  }), this._createEntries(e, i)) : P(t, "bpmn:StartEvent") && !Bn(t.$parent) && P(t.$parent, "bpmn:SubProcess") ? (i = tt(C5, r), this._createEntries(e, i)) : P(t, "bpmn:EndEvent") ? (i = tt(P5, function(o) {
    var a = o.target;
    return a.eventDefinitionType == "bpmn:CancelEventDefinition" && !P(t.$parent, "bpmn:Transaction") ? !1 : r(o);
  }), this._createEntries(e, i)) : P(t, "bpmn:BoundaryEvent") ? (i = tt(N5, function(o) {
    var a = o.target;
    if (a.eventDefinitionType == "bpmn:CancelEventDefinition" && !P(t.attachedToRef, "bpmn:Transaction"))
      return !1;
    var c = a.cancelActivity !== !1, l = t.cancelActivity == c;
    return r(o) || !r(o) && !l;
  }), this._createEntries(e, i)) : P(t, "bpmn:IntermediateCatchEvent") || P(t, "bpmn:IntermediateThrowEvent") ? (i = tt(A5, r), this._createEntries(e, i)) : P(t, "bpmn:Gateway") ? (i = tt(T5, r), this._createEntries(e, i)) : P(t, "bpmn:Transaction") ? (i = tt(CE, r), this._createEntries(e, i)) : Bn(t) && pt(e) ? (i = tt(M5, r), this._createEntries(e, i)) : P(t, "bpmn:SubProcess") && pt(e) ? (i = tt(k5, r), this._createEntries(e, i)) : P(t, "bpmn:AdHocSubProcess") && !pt(e) ? (i = tt(l0, function(o) {
    var a = o.target, c = a.type === "bpmn:SubProcess", l = a.isExpanded === !0;
    return c0(a) && (!c || l);
  }), this._createEntries(e, i)) : P(t, "bpmn:SequenceFlow") ? this._createSequenceFlowEntries(e, L5) : P(t, "bpmn:FlowNode") ? (i = tt(l0, r), P(t, "bpmn:SubProcess") && !pt(e) && (i = tt(i, function(o) {
    return o.label !== "Sub-process (collapsed)";
  })), this._createEntries(e, i)) : {};
};
xi.prototype.getPopupMenuHeaderEntries = function(e) {
  var t = {};
  return P(e, "bpmn:Activity") && !Bn(e) && (t = {
    ...t,
    ...this._getLoopCharacteristicsHeaderEntries(e)
  }), P(e, "bpmn:DataObjectReference") && (t = {
    ...t,
    ...this._getCollectionHeaderEntries(e)
  }), P(e, "bpmn:Participant") && (t = {
    ...t,
    ...this._getParticipantMultiplicityHeaderEntries(e)
  }), P(e, "bpmn:SubProcess") && !P(e, "bpmn:Transaction") && !Bn(e) && (t = {
    ...t,
    ...this._getAdHocHeaderEntries(e)
  }), Ax(e) && (t = {
    ...t,
    ...this._getNonInterruptingHeaderEntries(e)
  }), t;
};
xi.prototype._createEntries = function(e, t) {
  var n = {}, i = this;
  return z(t, function(r) {
    n[r.actionName] = i._createEntry(r, e);
  }), n;
};
xi.prototype._createSequenceFlowEntries = function(e, t) {
  var n = he(e), i = {}, r = this._modeling, o = this._moddle, a = this;
  return z(t, function(c) {
    switch (c.actionName) {
      case "replace-with-default-flow":
        n.sourceRef.default !== n && (P(n.sourceRef, "bpmn:ExclusiveGateway") || P(n.sourceRef, "bpmn:InclusiveGateway") || P(n.sourceRef, "bpmn:ComplexGateway") || P(n.sourceRef, "bpmn:Activity")) && (i = {
          ...i,
          [c.actionName]: a._createEntry(c, e, function() {
            r.updateProperties(e.source, { default: n });
          })
        });
        break;
      case "replace-with-conditional-flow":
        !n.conditionExpression && P(n.sourceRef, "bpmn:Activity") && (i = {
          ...i,
          [c.actionName]: a._createEntry(c, e, function() {
            var l = o.create("bpmn:FormalExpression", { body: "" });
            r.updateProperties(e, { conditionExpression: l });
          })
        });
        break;
      default:
        P(n.sourceRef, "bpmn:Activity") && n.conditionExpression && (i = {
          ...i,
          [c.actionName]: a._createEntry(c, e, function() {
            r.updateProperties(e, { conditionExpression: void 0 });
          })
        }), (P(n.sourceRef, "bpmn:ExclusiveGateway") || P(n.sourceRef, "bpmn:InclusiveGateway") || P(n.sourceRef, "bpmn:ComplexGateway") || P(n.sourceRef, "bpmn:Activity")) && n.sourceRef.default === n && (i = {
          ...i,
          [c.actionName]: a._createEntry(c, e, function() {
            r.updateProperties(e.source, { default: void 0 });
          })
        });
    }
  }), i;
};
xi.prototype._createEntry = function(e, t, n) {
  var i = this._translate, r = this._bpmnReplace.replaceElement, o = function() {
    return r(t, e.target);
  }, a = e.label;
  return a && typeof a == "function" && (a = a(t)), n = n || o, {
    label: i(a),
    className: e.className,
    action: n
  };
};
xi.prototype._getLoopCharacteristicsHeaderEntries = function(e) {
  var t = this, n = this._translate;
  function i(u, d) {
    if (d.active) {
      t._modeling.updateProperties(e, { loopCharacteristics: void 0 });
      return;
    }
    const f = e.businessObject.get("loopCharacteristics"), y = t._moddle.create(d.options.loopCharacteristics);
    f && t._moddleCopy.copyElement(f, y), y.set("isSequential", d.options.isSequential), t._modeling.updateProperties(e, { loopCharacteristics: y });
  }
  var r = he(e), o = r.loopCharacteristics, a, c, l;
  return o && (a = o.isSequential, c = o.isSequential === void 0, l = o.isSequential !== void 0 && !o.isSequential), {
    "toggle-parallel-mi": {
      className: "bpmn-icon-parallel-mi-marker",
      title: n("Parallel multi-instance"),
      active: l,
      action: i,
      options: {
        loopCharacteristics: "bpmn:MultiInstanceLoopCharacteristics",
        isSequential: !1
      }
    },
    "toggle-sequential-mi": {
      className: "bpmn-icon-sequential-mi-marker",
      title: n("Sequential multi-instance"),
      active: a,
      action: i,
      options: {
        loopCharacteristics: "bpmn:MultiInstanceLoopCharacteristics",
        isSequential: !0
      }
    },
    "toggle-loop": {
      className: "bpmn-icon-loop-marker",
      title: n("Loop"),
      active: c,
      action: i,
      options: {
        loopCharacteristics: "bpmn:StandardLoopCharacteristics"
      }
    }
  };
};
xi.prototype._getCollectionHeaderEntries = function(e) {
  var t = this, n = this._translate, i = e.businessObject.dataObjectRef;
  if (!i)
    return {};
  function r(a, c) {
    t._modeling.updateModdleProperties(
      e,
      i,
      { isCollection: !c.active }
    );
  }
  var o = i.isCollection;
  return {
    "toggle-is-collection": {
      className: "bpmn-icon-parallel-mi-marker",
      title: n("Collection"),
      active: o,
      action: r
    }
  };
};
xi.prototype._getParticipantMultiplicityHeaderEntries = function(e) {
  var t = this, n = this._bpmnFactory, i = this._translate;
  function r(a, c) {
    var l = c.active, u;
    l || (u = n.create("bpmn:ParticipantMultiplicity")), t._modeling.updateProperties(
      e,
      { participantMultiplicity: u }
    );
  }
  var o = e.businessObject.participantMultiplicity;
  return {
    "toggle-participant-multiplicity": {
      className: "bpmn-icon-parallel-mi-marker",
      title: i("Participant multiplicity"),
      active: !!o,
      action: r
    }
  };
};
xi.prototype._getAdHocHeaderEntries = function(e) {
  var t = this._translate, n = he(e), i = P(n, "bpmn:AdHocSubProcess"), r = this._bpmnReplace.replaceElement;
  return {
    "toggle-adhoc": {
      className: "bpmn-icon-ad-hoc-marker",
      title: t("Ad-hoc"),
      active: i,
      action: function(o, a) {
        return i ? r(e, { type: "bpmn:SubProcess" }, {
          autoResize: !1,
          layoutConnection: !1
        }) : r(e, { type: "bpmn:AdHocSubProcess" }, {
          autoResize: !1,
          layoutConnection: !1
        });
      }
    }
  };
};
xi.prototype._getNonInterruptingHeaderEntries = function(e) {
  const t = this._translate, n = he(e), i = this, r = Px(e), o = P(e, "bpmn:BoundaryEvent") ? u0["intermediate-event-non-interrupting"] : u0["start-event-non-interrupting"], a = !n[r];
  return {
    "toggle-non-interrupting": {
      imageHtml: o,
      title: t("Toggle non-interrupting"),
      active: a,
      action: function() {
        i._modeling.updateProperties(e, {
          [r]: !!a
        });
      }
    }
  };
};
const $5 = {
  __depends__: [
    Ud,
    rE,
    qd
  ],
  __init__: [
    "replaceMenuProvider"
  ],
  replaceMenuProvider: ["type", xi]
};
function Sc(e, t, n, i, r, o, a, c, l, u, d, f, y) {
  e = e || {}, i.registerProvider(this), this._contextPad = i, this._modeling = r, this._elementFactory = o, this._connect = a, this._create = c, this._popupMenu = l, this._canvas = u, this._rules = d, this._translate = f, this._eventBus = n, this._appendPreview = y, e.autoPlace !== !1 && (this._autoPlace = t.get("autoPlace", !1)), n.on("create.end", 250, function(g) {
    var _ = g.context, x = _.shape;
    if (!(!zs(g) || !i.isOpen(x))) {
      var w = i.getEntries(x);
      w.replace && w.replace.action.click(g, x);
    }
  }), n.on("contextPad.close", function() {
    y.cleanUp();
  });
}
Sc.$inject = [
  "config.contextPad",
  "injector",
  "eventBus",
  "contextPad",
  "modeling",
  "elementFactory",
  "connect",
  "create",
  "popupMenu",
  "canvas",
  "rules",
  "translate",
  "appendPreview"
];
Sc.prototype.getMultiElementContextPadEntries = function(e) {
  var t = this._modeling, n = {};
  return this._isDeleteAllowed(e) && U(n, {
    delete: {
      group: "edit",
      className: "bpmn-icon-trash",
      title: this._translate("Delete"),
      action: {
        click: function(i, r) {
          t.removeElements(r.slice());
        }
      }
    }
  }), n;
};
Sc.prototype._isDeleteAllowed = function(e) {
  var t = this._rules.allowed("elements.delete", {
    elements: e
  });
  return Ke(t) ? Qo(t, function(n) {
    return j5(t, n);
  }) : t;
};
Sc.prototype.getContextPadEntries = function(e) {
  var t = this._contextPad, n = this._modeling, i = this._elementFactory, r = this._connect, o = this._create, a = this._popupMenu, c = this._rules, l = this._autoPlace, u = this._translate, d = this._appendPreview, f = {};
  if (e.type === "label")
    return f;
  var y = e.businessObject;
  function g(A, D) {
    r.start(A, D);
  }
  function _(A, D) {
    n.removeElements([D]);
  }
  function x(A) {
    var D = 5, j = t.getPad(A).html, W = j.getBoundingClientRect(), $ = {
      x: W.left,
      y: W.bottom + D
    };
    return $;
  }
  function w(A, D, j, W) {
    function $(V, ae) {
      var ie = i.createShape(U({ type: A }, W));
      o.start(V, ie, {
        source: ae
      });
    }
    var Z = l ? function(V, ae) {
      var ie = i.createShape(U({ type: A }, W));
      l.append(ae, ie);
    } : $, X = l ? function(V, ae) {
      return d.create(ae, A, W), () => {
        d.cleanUp();
      };
    } : null;
    return {
      group: "model",
      className: D,
      title: j,
      action: {
        dragstart: $,
        click: Z,
        hover: X
      }
    };
  }
  function B(A) {
    return function(D, j) {
      n.splitLane(j, A), t.open(j, !0);
    };
  }
  if (rt(y, ["bpmn:Lane", "bpmn:Participant"]) && pt(e)) {
    var N = go(e);
    U(f, {
      "lane-insert-above": {
        group: "lane-insert-above",
        className: "bpmn-icon-lane-insert-above",
        title: u("Add lane above"),
        action: {
          click: function(A, D) {
            n.addLane(D, "top");
          }
        }
      }
    }), N.length < 2 && ((Pn(e) ? e.height >= 120 : e.width >= 120) && U(f, {
      "lane-divide-two": {
        group: "lane-divide",
        className: "bpmn-icon-lane-divide-two",
        title: u("Divide into two lanes"),
        action: {
          click: B(2)
        }
      }
    }), (Pn(e) ? e.height >= 180 : e.width >= 180) && U(f, {
      "lane-divide-three": {
        group: "lane-divide",
        className: "bpmn-icon-lane-divide-three",
        title: u("Divide into three lanes"),
        action: {
          click: B(3)
        }
      }
    })), U(f, {
      "lane-insert-below": {
        group: "lane-insert-below",
        className: "bpmn-icon-lane-insert-below",
        title: u("Add lane below"),
        action: {
          click: function(A, D) {
            n.addLane(D, "bottom");
          }
        }
      }
    });
  }
  P(y, "bpmn:FlowNode") && (P(y, "bpmn:EventBasedGateway") ? U(f, {
    "append.receive-task": w(
      "bpmn:ReceiveTask",
      "bpmn-icon-receive-task",
      u("Append receive task")
    ),
    "append.message-intermediate-event": w(
      "bpmn:IntermediateCatchEvent",
      "bpmn-icon-intermediate-event-catch-message",
      u("Append message intermediate catch event"),
      { eventDefinitionType: "bpmn:MessageEventDefinition" }
    ),
    "append.timer-intermediate-event": w(
      "bpmn:IntermediateCatchEvent",
      "bpmn-icon-intermediate-event-catch-timer",
      u("Append timer intermediate catch event"),
      { eventDefinitionType: "bpmn:TimerEventDefinition" }
    ),
    "append.condition-intermediate-event": w(
      "bpmn:IntermediateCatchEvent",
      "bpmn-icon-intermediate-event-catch-condition",
      u("Append conditional intermediate catch event"),
      { eventDefinitionType: "bpmn:ConditionalEventDefinition" }
    ),
    "append.signal-intermediate-event": w(
      "bpmn:IntermediateCatchEvent",
      "bpmn-icon-intermediate-event-catch-signal",
      u("Append signal intermediate catch event"),
      { eventDefinitionType: "bpmn:SignalEventDefinition" }
    )
  }) : p0(y, "bpmn:BoundaryEvent", "bpmn:CompensateEventDefinition") ? U(f, {
    "append.compensation-activity": w(
      "bpmn:Task",
      "bpmn-icon-task",
      u("Append compensation activity"),
      {
        isForCompensation: !0
      }
    )
  }) : !P(y, "bpmn:EndEvent") && !y.isForCompensation && !p0(y, "bpmn:IntermediateThrowEvent", "bpmn:LinkEventDefinition") && !Bn(y) && U(f, {
    "append.end-event": w(
      "bpmn:EndEvent",
      "bpmn-icon-end-event-none",
      u("Append end event")
    ),
    "append.gateway": w(
      "bpmn:ExclusiveGateway",
      "bpmn-icon-gateway-none",
      u("Append gateway")
    ),
    "append.append-task": w(
      "bpmn:Task",
      "bpmn-icon-task",
      u("Append task")
    ),
    "append.intermediate-event": w(
      "bpmn:IntermediateThrowEvent",
      "bpmn-icon-intermediate-event-none",
      u("Append intermediate/boundary event")
    )
  })), a.isEmpty(e, "bpmn-replace") || U(f, {
    replace: {
      group: "edit",
      className: "bpmn-icon-screw-wrench",
      title: u("Change element"),
      action: {
        click: function(A, D) {
          var j = U(x(D), {
            cursor: { x: A.x, y: A.y }
          });
          a.open(D, "bpmn-replace", j, {
            title: u("Change element"),
            width: 300,
            search: !0
          });
        }
      }
    }
  }), P(y, "bpmn:SequenceFlow") && U(f, {
    "append.text-annotation": w(
      "bpmn:TextAnnotation",
      "bpmn-icon-text-annotation",
      u("Add text annotation")
    )
  }), rt(y, [
    "bpmn:FlowNode",
    "bpmn:InteractionNode",
    "bpmn:DataObjectReference",
    "bpmn:DataStoreReference"
  ]) && U(f, {
    "append.text-annotation": w(
      "bpmn:TextAnnotation",
      "bpmn-icon-text-annotation",
      u("Add text annotation")
    ),
    connect: {
      group: "connect",
      className: "bpmn-icon-connection-multi",
      title: u("Connect to other element"),
      action: {
        click: g,
        dragstart: g
      }
    }
  }), P(y, "bpmn:TextAnnotation") && U(f, {
    connect: {
      group: "connect",
      className: "bpmn-icon-connection-multi",
      title: u("Connect using association"),
      action: {
        click: g,
        dragstart: g
      }
    }
  }), rt(y, ["bpmn:DataObjectReference", "bpmn:DataStoreReference"]) && U(f, {
    connect: {
      group: "connect",
      className: "bpmn-icon-connection-multi",
      title: u("Connect using data input association"),
      action: {
        click: g,
        dragstart: g
      }
    }
  }), P(y, "bpmn:Group") && U(f, {
    "append.text-annotation": w(
      "bpmn:TextAnnotation",
      "bpmn-icon-text-annotation",
      u("Add text annotation")
    )
  });
  var k = c.allowed("elements.delete", { elements: [e] });
  return Ke(k) && (k = k[0] === e), k && U(f, {
    delete: {
      group: "edit",
      className: "bpmn-icon-trash",
      title: u("Delete"),
      action: {
        click: _
      }
    }
  }), f;
};
function p0(e, t, n) {
  var i = e.$instanceOf(t), r = !1, o = e.eventDefinitions || [];
  return z(o, function(a) {
    a.$type === n && (r = !0);
  }), i && r;
}
function j5(e, t) {
  return e.indexOf(t) !== -1;
}
const F5 = {
  __depends__: [
    x5,
    RE,
    Ab,
    pr,
    eh,
    Zu,
    $5
  ],
  __init__: ["contextPadProvider"],
  contextPadProvider: ["type", Sc]
};
var H5 = {
  horizontal: ["x", "width"],
  vertical: ["y", "height"]
}, f0 = 5;
function Fr(e, t) {
  this._modeling = e, this._filters = [], this.registerFilter(function(n) {
    var i = t.allowed("elements.distribute", { elements: n });
    return Ke(i) ? i : i ? n : [];
  });
}
Fr.$inject = ["modeling", "rules"];
Fr.prototype.registerFilter = function(e) {
  if (typeof e != "function")
    throw new Error("the filter has to be a function");
  this._filters.push(e);
};
Fr.prototype.trigger = function(e, t) {
  var n = this._modeling, i, r;
  if (!(e.length < 3) && (this._setOrientation(t), r = this._filterElements(e), i = this._createGroups(r), !(i.length <= 2)))
    return n.distributeElements(i, this._axis, this._dimension), i;
};
Fr.prototype._filterElements = function(e) {
  var t = this._filters, n = this._axis, i = this._dimension, r = [].concat(e);
  return t.length ? (z(t, function(o) {
    r = o(r, n, i);
  }), r) : e;
};
Fr.prototype._createGroups = function(e) {
  var t = [], n = this, i = this._axis, r = this._dimension;
  if (!i)
    throw new Error('must have a defined "axis" and "dimension"');
  var o = Gi(e, i);
  return z(o, function(a, c) {
    var l = n._findRange(a, i, r), u, d = t[t.length - 1];
    d && n._hasIntersection(d.range, l) ? t[t.length - 1].elements.push(a) : (u = { range: l, elements: [a] }, t.push(u));
  }), t;
};
Fr.prototype._setOrientation = function(e) {
  var t = H5[e];
  this._axis = t[0], this._dimension = t[1];
};
Fr.prototype._hasIntersection = function(e, t) {
  return Math.max(e.min, e.max) >= Math.min(t.min, t.max) && Math.min(e.min, e.max) <= Math.max(t.min, t.max);
};
Fr.prototype._findRange = function(e) {
  var t = e[this._axis], n = e[this._dimension];
  return {
    min: t + f0,
    max: t + n - f0
  };
};
const z5 = {
  __init__: ["distributeElements"],
  distributeElements: ["type", Fr]
};
function pp(e) {
  Di.call(this, e);
}
pp.$inject = ["eventBus"];
Pe(pp, Di);
pp.prototype.init = function() {
  this.addRule("elements.distribute", function(e) {
    var t = e.elements;
    return t = tt(t, function(n) {
      var i = rt(n, [
        "bpmn:Association",
        "bpmn:BoundaryEvent",
        "bpmn:DataInputAssociation",
        "bpmn:DataOutputAssociation",
        "bpmn:Lane",
        "bpmn:MessageFlow",
        "bpmn:SequenceFlow",
        "bpmn:TextAnnotation"
      ]);
      return !(n.labelTarget || i);
    }), t = _u(t), t.length < 3 ? !1 : t;
  });
};
var d0 = {
  horizontal: `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1800 1800">
                <polyline points="450 400 450 150 1350 150 1350 400" style="fill:none;stroke:currentColor;stroke-width:100;stroke-linejoin:round;"/>
                <rect x="150" y="450" width="600" height="1200" rx="1" style="fill:none;stroke:currentColor;stroke-width:100;"></rect>
                <rect x="1050" y="450" width="600" height="800" rx="1" style="fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;"></rect>
              </svg>`,
  vertical: `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1800 1800">
              <polyline points="400 1350 150 1350 150 450 400 450" style="fill:none;stroke:currentColor;stroke-width:100;stroke-linejoin:round;"/>
              <rect x="450" y="150" width="1200" height="600" rx="1" style="fill:none;stroke:currentColor;stroke-width:100;"></rect>
              <rect x="450" y="1050" width="800" height="600" rx="1" style="fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;"></rect>
            </svg>`
}, V5 = 900;
function Rc(e, t, n, i) {
  this._distributeElements = t, this._translate = n, this._popupMenu = e, this._rules = i, e.registerProvider("align-elements", V5, this);
}
Rc.$inject = [
  "popupMenu",
  "distributeElements",
  "translate",
  "rules"
];
Rc.prototype.getPopupMenuEntries = function(e) {
  var t = {};
  return this._isAllowed(e) && U(t, this._getEntries(e)), t;
};
Rc.prototype._isAllowed = function(e) {
  return this._rules.allowed("elements.distribute", { elements: e });
};
Rc.prototype._getEntries = function(e) {
  var t = this._distributeElements, n = this._translate, i = this._popupMenu, r = {
    "distribute-elements-horizontal": {
      group: "distribute",
      title: n("Distribute elements horizontally"),
      className: "bjs-align-elements-menu-entry",
      imageHtml: d0.horizontal,
      action: function(o, a) {
        t.trigger(e, "horizontal"), i.close();
      }
    },
    "distribute-elements-vertical": {
      group: "distribute",
      title: n("Distribute elements vertically"),
      imageHtml: d0.vertical,
      action: function(o, a) {
        t.trigger(e, "vertical"), i.close();
      }
    }
  };
  return r;
};
const W5 = {
  __depends__: [
    Ud,
    z5
  ],
  __init__: [
    "bpmnDistributeElements",
    "distributeElementsMenuProvider"
  ],
  bpmnDistributeElements: ["type", pp],
  distributeElementsMenuProvider: ["type", Rc]
};
var AE = "is not a registered action", G5 = "is already registered";
function Li(e, t) {
  this._actions = {};
  var n = this;
  e.on("diagram.init", function() {
    n._registerDefaultActions(t), e.fire("editorActions.init", {
      editorActions: n
    });
  });
}
Li.$inject = [
  "eventBus",
  "injector"
];
Li.prototype._registerDefaultActions = function(e) {
  var t = e.get("commandStack", !1), n = e.get("modeling", !1), i = e.get("selection", !1), r = e.get("zoomScroll", !1), o = e.get("copyPaste", !1), a = e.get("canvas", !1), c = e.get("rules", !1), l = e.get("keyboardMove", !1), u = e.get("keyboardMoveSelection", !1);
  t && (this.register("undo", function() {
    t.undo();
  }), this.register("redo", function() {
    t.redo();
  })), o && i && this.register("copy", function() {
    var d = i.get();
    if (d.length)
      return o.copy(d);
  }), o && this.register("paste", function() {
    o.paste();
  }), r && this.register("stepZoom", function(d) {
    r.stepZoom(d.value);
  }), a && this.register("zoom", function(d) {
    a.zoom(d.value);
  }), n && i && c && this.register("removeSelection", function() {
    var d = i.get();
    if (d.length) {
      var f = c.allowed("elements.delete", { elements: d }), y;
      f !== !1 && (Ke(f) ? y = f : y = d, y.length && n.removeElements(y.slice()));
    }
  }), l && this.register("moveCanvas", function(d) {
    l.moveCanvas(d);
  }), u && this.register("moveSelection", function(d) {
    u.moveSelection(d.direction, d.accelerated);
  });
};
Li.prototype.trigger = function(e, t) {
  if (!this._actions[e])
    throw rm(e, AE);
  return this._actions[e](t);
};
Li.prototype.register = function(e, t) {
  var n = this;
  if (typeof e == "string")
    return this._registerAction(e, t);
  z(e, function(i, r) {
    n._registerAction(r, i);
  });
};
Li.prototype._registerAction = function(e, t) {
  if (this.isRegistered(e))
    throw rm(e, G5);
  this._actions[e] = t;
};
Li.prototype.unregister = function(e) {
  if (!this.isRegistered(e))
    throw rm(e, AE);
  this._actions[e] = void 0;
};
Li.prototype.getActions = function() {
  return Object.keys(this._actions);
};
Li.prototype.isRegistered = function(e) {
  return !!this._actions[e];
};
function rm(e, t) {
  return new Error(e + " " + t);
}
const U5 = {
  __init__: ["editorActions"],
  editorActions: ["type", Li]
};
function fp(e) {
  e.invoke(Li, this);
}
Pe(fp, Li);
fp.$inject = [
  "injector"
];
fp.prototype._registerDefaultActions = function(e) {
  Li.prototype._registerDefaultActions.call(this, e);
  var t = e.get("canvas", !1), n = e.get("elementRegistry", !1), i = e.get("selection", !1), r = e.get("spaceTool", !1), o = e.get("lassoTool", !1), a = e.get("handTool", !1), c = e.get("globalConnect", !1), l = e.get("distributeElements", !1), u = e.get("alignElements", !1), d = e.get("directEditing", !1), f = e.get("searchPad", !1), y = e.get("modeling", !1), g = e.get("contextPad", !1);
  t && n && i && this._registerAction("selectElements", function() {
    var _ = t.getRootElement(), x = n.filter(function(w) {
      return w !== _;
    });
    return i.select(x), x;
  }), r && this._registerAction("spaceTool", function() {
    r.toggle();
  }), o && this._registerAction("lassoTool", function() {
    o.toggle();
  }), a && this._registerAction("handTool", function() {
    a.toggle();
  }), c && this._registerAction("globalConnectTool", function() {
    c.toggle();
  }), i && l && this._registerAction("distributeElements", function(_) {
    var x = i.get(), w = _.type;
    x.length && l.trigger(x, w);
  }), i && u && this._registerAction("alignElements", function(_) {
    var x = i.get(), w = [], B = _.type;
    x.length && (w = tt(x, function(N) {
      return !P(N, "bpmn:Lane");
    }), u.trigger(w, B));
  }), i && y && this._registerAction("setColor", function(_) {
    var x = i.get();
    x.length && y.setColor(x, _);
  }), i && d && this._registerAction("directEditing", function() {
    var _ = i.get();
    _.length && d.activate(_[0]);
  }), f && this._registerAction("find", function() {
    f.toggle();
  }), t && y && this._registerAction("moveToOrigin", function() {
    var _ = t.getRootElement(), x, w;
    P(_, "bpmn:Collaboration") ? w = n.filter(function(B) {
      return P(B.parent, "bpmn:Collaboration");
    }) : w = n.filter(function(B) {
      return B !== _ && !P(B.parent, "bpmn:SubProcess");
    }), x = pn(w), y.moveElements(
      w,
      { x: -x.x, y: -x.y },
      _
    );
  }), i && g && this._registerAction("replaceElement", function(_) {
    g.triggerEntry("replace", "click", _);
  });
};
const Y5 = {
  __depends__: [
    U5
  ],
  editorActions: ["type", fp]
};
function PE(e) {
  e.on([
    "create.init",
    "shape.move.init"
  ], function(t) {
    var n = t.context, i = t.shape;
    rt(i, [
      "bpmn:Participant",
      "bpmn:SubProcess",
      "bpmn:TextAnnotation"
    ]) && (n.gridSnappingContext || (n.gridSnappingContext = {}), n.gridSnappingContext.snapLocation = "top-left");
  });
}
PE.$inject = ["eventBus"];
var Yl = 10;
function ff(e, t, n) {
  return n || (n = "round"), Math[n](e / t) * t;
}
var K5 = 1200, q5 = 800;
function wo(e, t, n) {
  var i = !n || n.active !== !1;
  this._eventBus = t;
  var r = this;
  t.on("diagram.init", q5, function() {
    r.setActive(i);
  }), t.on([
    "create.move",
    "create.end",
    "bendpoint.move.move",
    "bendpoint.move.end",
    "connect.move",
    "connect.end",
    "connectionSegment.move.move",
    "connectionSegment.move.end",
    "resize.move",
    "resize.end",
    "shape.move.move",
    "shape.move.end"
  ], K5, function(o) {
    var a = o.originalEvent;
    if (!(!r.active || a && gi(a))) {
      var c = o.context, l = c.gridSnappingContext;
      l || (l = c.gridSnappingContext = {}), ["x", "y"].forEach(function(u) {
        var d = {}, f = Z5(o, u, e);
        f && (d.offset = f);
        var y = X5(o, u);
        y && U(d, y), Ha(o, u) || r.snapEvent(o, u, d);
      });
    }
  });
}
wo.prototype.snapEvent = function(e, t, n) {
  var i = this.snapValue(e[t], n);
  tn(e, t, i);
};
wo.prototype.getGridSpacing = function() {
  return Yl;
};
wo.prototype.snapValue = function(e, t) {
  var n = 0;
  t && t.offset && (n = t.offset), e += n, e = ff(e, Yl);
  var i, r;
  return t && t.min && (i = t.min, je(i) && (i = ff(i + n, Yl, "ceil"), e = Math.max(e, i))), t && t.max && (r = t.max, je(r) && (r = ff(r + n, Yl, "floor"), e = Math.min(e, r))), e -= n, e;
};
wo.prototype.isActive = function() {
  return this.active;
};
wo.prototype.setActive = function(e) {
  this.active = e, this._eventBus.fire("gridSnapping.toggle", { active: e });
};
wo.prototype.toggleActive = function() {
  this.setActive(!this.active);
};
wo.$inject = [
  "elementRegistry",
  "eventBus",
  "config.gridSnapping"
];
function X5(e, t) {
  var n = e.context, i = n.createConstraints, r = n.resizeConstraints || {}, o = n.gridSnappingContext, a = o.snapConstraints;
  if (a && a[t])
    return a[t];
  a || (a = o.snapConstraints = {}), a[t] || (a[t] = {});
  var c = n.direction;
  i && (Kl(t) ? (a.x.min = i.left, a.x.max = i.right) : (a.y.min = i.top, a.y.max = i.bottom));
  var l = r.min, u = r.max;
  return l && (Kl(t) ? m0(c) ? a.x.max = l.left : a.x.min = l.right : h0(c) ? a.y.max = l.top : a.y.min = l.bottom), u && (Kl(t) ? m0(c) ? a.x.min = u.left : a.x.max = u.right : h0(c) ? a.y.min = u.top : a.y.max = u.bottom), a[t];
}
function Z5(e, t, n) {
  var i = e.context, r = e.shape, o = i.gridSnappingContext, a = o.snapLocation, c = o.snapOffset;
  return c && je(c[t]) || (c || (c = o.snapOffset = {}), je(c[t]) || (c[t] = 0), !r) || (n.get(r.id) || (Kl(t) ? c[t] += r[t] + r.width / 2 : c[t] += r[t] + r.height / 2), !a) || (t === "x" ? /left/.test(a) ? c[t] -= r.width / 2 : /right/.test(a) && (c[t] += r.width / 2) : /top/.test(a) ? c[t] -= r.height / 2 : /bottom/.test(a) && (c[t] += r.height / 2)), c[t];
}
function Kl(e) {
  return e === "x";
}
function h0(e) {
  return e.indexOf("n") !== -1;
}
function m0(e) {
  return e.indexOf("w") !== -1;
}
function ca(e, t) {
  le.call(this, e), this._gridSnapping = t;
  var n = this;
  this.preExecute("shape.resize", function(i) {
    var r = i.context, o = r.hints || {}, a = o.autoResize;
    if (a) {
      var c = r.shape, l = r.newBounds;
      ci(a) ? r.newBounds = n.snapComplex(l, a) : r.newBounds = n.snapSimple(c, l);
    }
  });
}
ca.$inject = [
  "eventBus",
  "gridSnapping",
  "modeling"
];
Pe(ca, le);
ca.prototype.snapSimple = function(e, t) {
  var n = this._gridSnapping;
  return t.width = n.snapValue(t.width, {
    min: t.width
  }), t.height = n.snapValue(t.height, {
    min: t.height
  }), t.x = e.x + e.width / 2 - t.width / 2, t.y = e.y + e.height / 2 - t.height / 2, t;
};
ca.prototype.snapComplex = function(e, t) {
  return /w|e/.test(t) && (e = this.snapHorizontally(e, t)), /n|s/.test(t) && (e = this.snapVertically(e, t)), e;
};
ca.prototype.snapHorizontally = function(e, t) {
  var n = this._gridSnapping, i = /w/.test(t), r = /e/.test(t), o = {};
  return o.width = n.snapValue(e.width, {
    min: e.width
  }), r && (i ? (o.x = n.snapValue(e.x, {
    max: e.x
  }), o.width += n.snapValue(e.x - o.x, {
    min: e.x - o.x
  })) : e.x = e.x + e.width - o.width), U(e, o), e;
};
ca.prototype.snapVertically = function(e, t) {
  var n = this._gridSnapping, i = /n/.test(t), r = /s/.test(t), o = {};
  return o.height = n.snapValue(e.height, {
    min: e.height
  }), i && (r ? (o.y = n.snapValue(e.y, {
    max: e.y
  }), o.height += n.snapValue(e.y - o.y, {
    min: e.y - o.y
  })) : e.y = e.y + e.height - o.height), U(e, o), e;
};
var J5 = 2e3;
function TE(e, t) {
  e.on([
    "spaceTool.move",
    "spaceTool.end"
  ], J5, function(n) {
    var i = n.context;
    if (i.initialized) {
      var r = i.axis, o;
      r === "x" ? (o = t.snapValue(n.dx), n.x = n.x + o - n.dx, n.dx = o) : (o = t.snapValue(n.dy), n.y = n.y + o - n.dy, n.dy = o);
    }
  });
}
TE.$inject = [
  "eventBus",
  "gridSnapping"
];
const Q5 = {
  __init__: [
    "gridSnappingResizeBehavior",
    "gridSnappingSpaceToolBehavior"
  ],
  gridSnappingResizeBehavior: ["type", ca],
  gridSnappingSpaceToolBehavior: ["type", TE]
}, e3 = {
  __depends__: [Q5],
  __init__: ["gridSnapping"],
  gridSnapping: ["type", wo]
};
var t3 = 2e3;
function kE(e, t) {
  e.on("autoPlace", t3, function(n) {
    var i = n.source, r = Fe(i), o = n.shape, a = Kb(i, o);
    return ["x", "y"].forEach(function(c) {
      var l = {};
      a[c] !== r[c] && (a[c] > r[c] ? l.min = a[c] : l.max = a[c], P(o, "bpmn:TextAnnotation") && (n3(c) ? l.offset = -o.width / 2 : l.offset = -o.height / 2), a[c] = t.snapValue(a[c], l));
    }), a;
  });
}
kE.$inject = [
  "eventBus",
  "gridSnapping"
];
function n3(e) {
  return e === "x";
}
var i3 = 1750;
function ME(e, t, n) {
  t.on([
    "create.start",
    "shape.move.start"
  ], i3, function(i) {
    var r = i.context, o = r.shape, a = e.getRootElement();
    if (!(!P(o, "bpmn:Participant") || !P(a, "bpmn:Process") || !a.children.length)) {
      var c = r.createConstraints;
      c && (o.width = n.snapValue(o.width, { min: o.width }), o.height = n.snapValue(o.height, { min: o.height }));
    }
  });
}
ME.$inject = [
  "canvas",
  "eventBus",
  "gridSnapping"
];
var r3 = 3e3;
function dp(e, t, n) {
  le.call(this, e), this._gridSnapping = t;
  var i = this;
  this.postExecuted([
    "connection.create",
    "connection.layout"
  ], r3, function(r) {
    var o = r.context, a = o.connection, c = o.hints || {}, l = a.waypoints;
    c.connectionStart || c.connectionEnd || c.createElementsBehavior === !1 || o3(l) && n.updateWaypoints(a, i.snapMiddleSegments(l));
  });
}
dp.$inject = [
  "eventBus",
  "gridSnapping",
  "modeling"
];
Pe(dp, le);
dp.prototype.snapMiddleSegments = function(e) {
  var t = this._gridSnapping, n;
  e = e.slice();
  for (var i = 1; i < e.length - 2; i++)
    n = c3(t, e[i], e[i + 1]), e[i] = n[0], e[i + 1] = n[1];
  return e;
};
function o3(e) {
  return e.length > 3;
}
function a3(e) {
  return e === "h";
}
function s3(e) {
  return e === "v";
}
function c3(e, t, n) {
  var i = Ar(t, n), r = {};
  return a3(i) && (r.y = e.snapValue(t.y)), s3(i) && (r.x = e.snapValue(t.x)), ("x" in r || "y" in r) && (t = U({}, t, r), n = U({}, n, r)), [t, n];
}
const l3 = {
  __init__: [
    "gridSnappingAutoPlaceBehavior",
    "gridSnappingParticipantBehavior",
    "gridSnappingLayoutConnectionBehavior"
  ],
  gridSnappingAutoPlaceBehavior: ["type", kE],
  gridSnappingParticipantBehavior: ["type", ME],
  gridSnappingLayoutConnectionBehavior: ["type", dp]
}, u3 = {
  __depends__: [
    e3,
    l3
  ],
  __init__: ["bpmnGridSnapping"],
  bpmnGridSnapping: ["type", PE]
};
var p3 = 30, DE = 30;
function Cc(e, t) {
  this._interactionEvents = t;
  var n = this;
  e.on([
    "interactionEvents.createHit",
    "interactionEvents.updateHit"
  ], function(i) {
    var r = i.element, o = i.gfx;
    if (P(r, "bpmn:Lane"))
      return n._createParticipantHit(r, o);
    if (P(r, "bpmn:Participant"))
      return pt(r) ? n._createParticipantHit(r, o) : n._createDefaultHit(r, o);
    if (P(r, "bpmn:SubProcess"))
      return pt(r) ? n._createSubProcessHit(r, o) : n._createDefaultHit(r, o);
  });
}
Cc.$inject = [
  "eventBus",
  "interactionEvents"
];
Cc.prototype._createDefaultHit = function(e, t) {
  return this._interactionEvents.removeHits(t), this._interactionEvents.createDefaultHit(e, t), !0;
};
Cc.prototype._createParticipantHit = function(e, t) {
  this._interactionEvents.removeHits(t), this._interactionEvents.createBoxHit(t, "no-move", {
    width: e.width,
    height: e.height
  }), this._interactionEvents.createBoxHit(t, "click-stroke", {
    width: e.width,
    height: e.height
  });
  var n = Pn(e) ? {
    width: p3,
    height: e.height
  } : {
    width: e.width,
    height: DE
  };
  return this._interactionEvents.createBoxHit(t, "all", n), !0;
};
Cc.prototype._createSubProcessHit = function(e, t) {
  return this._interactionEvents.removeHits(t), this._interactionEvents.createBoxHit(t, "no-move", {
    width: e.width,
    height: e.height
  }), this._interactionEvents.createBoxHit(t, "click-stroke", {
    width: e.width,
    height: e.height
  }), this._interactionEvents.createBoxHit(t, "all", {
    width: e.width,
    height: DE
  }), !0;
};
const f3 = {
  __init__: ["bpmnInteractionEvents"],
  bpmnInteractionEvents: ["type", Cc]
};
function hp(e) {
  e.invoke(Xa, this);
}
Pe(hp, Xa);
hp.$inject = [
  "injector"
];
hp.prototype.registerBindings = function(e, t) {
  Xa.prototype.registerBindings.call(this, e, t);
  function n(i, r) {
    t.isRegistered(i) && e.addListener(r);
  }
  n("selectElements", function(i) {
    var r = i.keyEvent;
    if (e.isKey(["a", "A"], r) && e.isCmd(r))
      return t.trigger("selectElements"), !0;
  }), n("find", function(i) {
    var r = i.keyEvent;
    if (e.isKey(["f", "F"], r) && e.isCmd(r))
      return t.trigger("find"), !0;
  }), n("spaceTool", function(i) {
    var r = i.keyEvent;
    if (!e.hasModifier(r) && e.isKey(["s", "S"], r))
      return t.trigger("spaceTool"), !0;
  }), n("lassoTool", function(i) {
    var r = i.keyEvent;
    if (!e.hasModifier(r) && e.isKey(["l", "L"], r))
      return t.trigger("lassoTool"), !0;
  }), n("handTool", function(i) {
    var r = i.keyEvent;
    if (!e.hasModifier(r) && e.isKey(["h", "H"], r))
      return t.trigger("handTool"), !0;
  }), n("globalConnectTool", function(i) {
    var r = i.keyEvent;
    if (!e.hasModifier(r) && e.isKey(["c", "C"], r))
      return t.trigger("globalConnectTool"), !0;
  }), n("directEditing", function(i) {
    var r = i.keyEvent;
    if (!e.hasModifier(r) && e.isKey(["e", "E"], r))
      return t.trigger("directEditing"), !0;
  }), n("replaceElement", function(i) {
    var r = i.keyEvent;
    if (!e.hasModifier(r) && e.isKey(["r", "R"], r))
      return t.trigger("replaceElement", r), !0;
  });
};
const d3 = {
  __depends__: [
    jd
  ],
  __init__: ["keyboardBindings"],
  keyboardBindings: ["type", hp]
};
var h3 = {
  moveSpeed: 1,
  moveSpeedAccelerated: 10
}, m3 = 1500, y0 = "left", g0 = "up", v0 = "right", _0 = "down", y3 = {
  ArrowLeft: y0,
  Left: y0,
  ArrowUp: g0,
  Up: g0,
  ArrowRight: v0,
  Right: v0,
  ArrowDown: _0,
  Down: _0
}, g3 = {
  left: function(e) {
    return {
      x: -e,
      y: 0
    };
  },
  up: function(e) {
    return {
      x: 0,
      y: -e
    };
  },
  right: function(e) {
    return {
      x: e,
      y: 0
    };
  },
  down: function(e) {
    return {
      x: 0,
      y: e
    };
  }
};
function OE(e, t, n, i, r) {
  var o = this;
  this._config = U({}, h3, e || {}), t.addListener(m3, function(a) {
    var c = a.keyEvent, l = y3[c.key];
    if (l && !t.isCmd(c)) {
      var u = t.isShift(c);
      return o.moveSelection(l, u), !0;
    }
  }), this.moveSelection = function(a, c) {
    var l = r.get();
    if (l.length) {
      var u = this._config[c ? "moveSpeedAccelerated" : "moveSpeed"], d = g3[a](u), f = i.allowed("elements.move", {
        shapes: l
      });
      f && n.moveElements(l, d);
    }
  };
}
OE.$inject = [
  "config.keyboardMoveSelection",
  "keyboard",
  "modeling",
  "rules",
  "selection"
];
const v3 = {
  __depends__: [
    jd,
    pr
  ],
  __init__: [
    "keyboardMoveSelection"
  ],
  keyboardMoveSelection: ["type", OE]
};
var b0 = 10;
function Ac(e, t, n, i) {
  this._dragging = i, this._rules = t;
  var r = this;
  function o(l, u) {
    var d = l.shape, f = l.direction, y = l.resizeConstraints, g;
    l.delta = u, g = ok(d, f, u), l.newBounds = sk(g, y), l.canExecute = r.canResize(l);
  }
  function a(l) {
    var u = l.resizeConstraints, d = l.minBounds;
    u === void 0 && (d === void 0 && (d = r.computeMinResizeBox(l)), l.resizeConstraints = {
      min: Le(d)
    });
  }
  function c(l) {
    var u = l.shape, d = l.canExecute, f = l.newBounds;
    if (d) {
      if (f = w_(f), !_3(u, f))
        return;
      n.resizeShape(u, f);
    }
  }
  e.on("resize.start", function(l) {
    a(l.context);
  }), e.on("resize.move", function(l) {
    var u = {
      x: l.dx,
      y: l.dy
    };
    o(l.context, u);
  }), e.on("resize.end", function(l) {
    c(l.context);
  });
}
Ac.prototype.canResize = function(e) {
  var t = this._rules, n = Ui(e, ["newBounds", "shape", "delta", "direction"]);
  return t.allowed("shape.resize", n);
};
Ac.prototype.activate = function(e, t, n) {
  var i = this._dragging, r, o;
  if (typeof n == "string" && (n = {
    direction: n
  }), r = U({ shape: t }, n), o = r.direction, !o)
    throw new Error("must provide a direction (n|w|s|e|nw|se|ne|sw)");
  i.init(e, NE(t, o), "resize", {
    autoActivate: !0,
    cursor: b3(o),
    data: {
      shape: t,
      context: r
    }
  });
};
Ac.prototype.computeMinResizeBox = function(e) {
  var t = e.shape, n = e.direction, i, r;
  return i = e.minDimensions || {
    width: b0,
    height: b0
  }, r = vx(t, e.childrenBoxPadding), ck(n, t, i, r);
};
Ac.$inject = [
  "eventBus",
  "rules",
  "modeling",
  "dragging"
];
function _3(e, t) {
  return e.x !== t.x || e.y !== t.y || e.width !== t.width || e.height !== t.height;
}
function NE(e, t) {
  var n = Fe(e), i = Le(e), r = {
    x: n.x,
    y: n.y
  };
  return t.indexOf("n") !== -1 ? r.y = i.top : t.indexOf("s") !== -1 && (r.y = i.bottom), t.indexOf("e") !== -1 ? r.x = i.right : t.indexOf("w") !== -1 && (r.x = i.left), r;
}
function b3(e) {
  var t = "resize-";
  return e === "n" || e === "s" ? t + "ns" : e === "e" || e === "w" ? t + "ew" : e === "nw" || e === "se" ? t + "nwse" : t + "nesw";
}
var x0 = "djs-resizing", E0 = "resize-not-ok", x3 = 500;
function BE(e, t, n) {
  function i(o) {
    var a = o.shape, c = o.newBounds, l = o.frame;
    l || (l = o.frame = n.addFrame(a, t.getActiveLayer()), t.addMarker(a, x0)), c.width > 5 && we(l, { x: c.x, width: c.width }), c.height > 5 && we(l, { y: c.y, height: c.height }), o.canExecute ? dt(l).remove(E0) : dt(l).add(E0);
  }
  function r(o) {
    var a = o.shape, c = o.frame;
    c && qt(o.frame), t.removeMarker(a, x0);
  }
  e.on("resize.move", x3, function(o) {
    i(o.context);
  }), e.on("resize.cleanup", function(o) {
    r(o.context);
  });
}
BE.$inject = [
  "eventBus",
  "canvas",
  "previewSupport"
];
var Al = -6, Pl = 8, Tl = 20, Ts = "djs-resizer", E3 = ["n", "w", "s", "e", "nw", "ne", "se", "sw"];
function So(e, t, n, i) {
  this._resize = i, this._canvas = t;
  var r = this;
  e.on("selection.changed", function(o) {
    var a = o.newSelection;
    r.removeResizers(), a.length === 1 && z(a, Qn(r.addResizer, r));
  }), e.on("shape.changed", function(o) {
    var a = o.element;
    n.isSelected(a) && (r.removeResizers(), r.addResizer(a));
  });
}
So.prototype.makeDraggable = function(e, t, n) {
  var i = this._resize;
  function r(o) {
    ho(o) && i.activate(o, e, n);
  }
  Ye.bind(t, "mousedown", r), Ye.bind(t, "touchstart", r);
};
So.prototype._createResizer = function(e, t, n, i) {
  var r = this._getResizersParent(), o = w3(i), a = Me("g");
  dt(a).add(Ts), dt(a).add(Ts + "-" + e.id), dt(a).add(Ts + "-" + i), ze(r, a);
  var c = Me("rect");
  we(c, {
    x: -Pl / 2 + o.x,
    y: -Pl / 2 + o.y,
    width: Pl,
    height: Pl
  }), dt(c).add(Ts + "-visual"), ze(a, c);
  var l = Me("rect");
  return we(l, {
    x: -Tl / 2 + o.x,
    y: -Tl / 2 + o.y,
    width: Tl,
    height: Tl
  }), dt(l).add(Ts + "-hit"), ze(a, l), Bl(a, t, n), a;
};
So.prototype.createResizer = function(e, t) {
  var n = NE(e, t), i = this._createResizer(e, n.x, n.y, t);
  this.makeDraggable(e, i, t);
};
So.prototype.addResizer = function(e) {
  var t = this;
  kt(e) || !this._resize.canResize({ shape: e }) || z(E3, function(n) {
    t.createResizer(e, n);
  });
};
So.prototype.removeResizers = function() {
  var e = this._getResizersParent();
  gu(e);
};
So.prototype._getResizersParent = function() {
  return this._canvas.getLayer("resizers");
};
So.$inject = [
  "eventBus",
  "canvas",
  "selection",
  "resize"
];
function w3(e) {
  var t = {
    x: 0,
    y: 0
  };
  return e.indexOf("e") !== -1 ? t.x = -Al : e.indexOf("w") !== -1 && (t.x = Al), e.indexOf("s") !== -1 ? t.y = -Al : e.indexOf("n") !== -1 && (t.y = Al), t;
}
const LE = {
  __depends__: [
    dr,
    Ir,
    es
  ],
  __init__: [
    "resize",
    "resizePreview",
    "resizeHandles"
  ],
  resize: ["type", Ac],
  resizePreview: ["type", BE],
  resizeHandles: ["type", So]
};
var S3 = 2e3;
function Pc(e, t, n, i, r, o, a) {
  this._bpmnFactory = t, this._canvas = n, this._modeling = r, this._textRenderer = a, i.registerProvider(this), e.on("element.dblclick", function(l) {
    c(l.element, !0);
  }), e.on([
    "autoPlace.start",
    "canvas.viewbox.changing",
    "drag.init",
    "element.mousedown",
    "popupMenu.open",
    "root.set",
    "selection.changed"
  ], function() {
    i.isActive() && i.complete();
  }), e.on([
    "shape.remove",
    "connection.remove"
  ], S3, function(l) {
    i.isActive(l.element) && i.cancel();
  }), e.on(["commandStack.changed"], function(l) {
    i.isActive() && i.cancel();
  }), e.on("directEditing.activate", function(l) {
    o.removeResizers();
  }), e.on("create.end", 500, function(l) {
    var u = l.context, d = u.shape, f = l.context.canExecute, y = l.isTouch;
    y || f && (u.hints && u.hints.createElementsBehavior === !1 || c(d));
  }), e.on("autoPlace.end", 500, function(l) {
    c(l.shape);
  });
  function c(l, u) {
    (u || rt(l, ["bpmn:Task", "bpmn:TextAnnotation", "bpmn:Participant"]) || om(l)) && i.activate(l);
  }
}
Pc.$inject = [
  "eventBus",
  "bpmnFactory",
  "canvas",
  "directEditing",
  "modeling",
  "resizeHandles",
  "textRenderer"
];
Pc.prototype.activate = function(e) {
  var t = ki(e);
  if (t !== void 0) {
    var n = {
      text: t
    }, i = this.getEditingBBox(e);
    U(n, i);
    var r = {}, o = n.style || {};
    return U(o, {
      backgroundColor: null,
      border: null
    }), (rt(e, [
      "bpmn:Task",
      "bpmn:Participant",
      "bpmn:Lane",
      "bpmn:CallActivity"
    ]) || om(e)) && U(r, {
      centerVertically: !0
    }), Xo(e) && (U(r, {
      autoResize: !0
    }), U(o, {
      backgroundColor: "#ffffff",
      border: "1px solid #ccc"
    })), P(e, "bpmn:TextAnnotation") && (U(r, {
      resizable: !0,
      autoResize: !0
    }), U(o, {
      backgroundColor: "#ffffff",
      border: "1px solid #ccc"
    })), U(n, {
      options: r,
      style: o
    }), n;
  }
};
Pc.prototype.getEditingBBox = function(e) {
  var t = this._canvas, n = e.label || e, i = t.getAbsoluteBBox(n), r = {
    x: i.x + i.width / 2,
    y: i.y + i.height / 2
  }, o = { x: i.x, y: i.y }, a = t.zoom(), c = this._textRenderer.getDefaultStyle(), l = this._textRenderer.getExternalStyle(), u = l.fontSize * a, d = l.lineHeight, f = c.fontSize * a, y = c.lineHeight, g = {
    fontFamily: this._textRenderer.getDefaultStyle().fontFamily,
    fontWeight: this._textRenderer.getDefaultStyle().fontWeight
  };
  if (P(e, "bpmn:Lane") || A3(e)) {
    var _ = Pn(e), x = _ ? {
      width: i.height,
      height: 30 * a,
      x: i.x - i.height / 2 + 15 * a,
      y: r.y - 30 * a / 2
    } : {
      width: i.width,
      height: 30 * a
    };
    U(o, x), U(g, {
      fontSize: f + "px",
      lineHeight: y,
      paddingTop: 7 * a + "px",
      paddingBottom: 7 * a + "px",
      paddingLeft: 5 * a + "px",
      paddingRight: 5 * a + "px",
      transform: _ ? "rotate(-90deg)" : null
    });
  }
  if (C3(e)) {
    var w = Pn(e), B = w ? {
      width: i.width,
      height: i.height
    } : {
      width: i.height,
      height: i.width,
      x: r.x - i.height / 2,
      y: r.y - i.width / 2
    };
    U(o, B), U(g, {
      fontSize: f + "px",
      lineHeight: y,
      paddingTop: 7 * a + "px",
      paddingBottom: 7 * a + "px",
      paddingLeft: 5 * a + "px",
      paddingRight: 5 * a + "px",
      transform: w ? null : "rotate(-90deg)"
    });
  }
  (rt(e, ["bpmn:Task", "bpmn:CallActivity"]) || om(e)) && (U(o, {
    width: i.width,
    height: i.height
  }), U(g, {
    fontSize: f + "px",
    lineHeight: y,
    paddingTop: 7 * a + "px",
    paddingBottom: 7 * a + "px",
    paddingLeft: 5 * a + "px",
    paddingRight: 5 * a + "px"
  })), R3(e) && (U(o, {
    width: i.width,
    x: i.x
  }), U(g, {
    fontSize: f + "px",
    lineHeight: y,
    paddingTop: 7 * a + "px",
    paddingBottom: 7 * a + "px",
    paddingLeft: 5 * a + "px",
    paddingRight: 5 * a + "px"
  }));
  var N = 90 * a, k = 7 * a, A = 4 * a;
  if (n.labelTarget && (U(o, {
    width: N,
    height: i.height + k + A,
    x: r.x - N / 2,
    y: i.y - k
  }), U(g, {
    fontSize: u + "px",
    lineHeight: d,
    paddingTop: k + "px",
    paddingBottom: A + "px"
  })), Xo(n) && !Ru(n) && !vt(n)) {
    var D = Dd(e), j = t.getAbsoluteBBox({
      x: D.x,
      y: D.y,
      width: 0,
      height: 0
    }), W = u + k + A;
    U(o, {
      width: N,
      height: W,
      x: j.x - N / 2,
      y: j.y - W / 2
    }), U(g, {
      fontSize: u + "px",
      lineHeight: d,
      paddingTop: k + "px",
      paddingBottom: A + "px"
    });
  }
  return P(e, "bpmn:TextAnnotation") && (U(o, {
    width: i.width,
    height: i.height,
    minWidth: 30 * a,
    minHeight: 10 * a
  }), U(g, {
    textAlign: "left",
    paddingTop: 5 * a + "px",
    paddingBottom: 7 * a + "px",
    paddingLeft: 7 * a + "px",
    paddingRight: 5 * a + "px",
    fontSize: f + "px",
    lineHeight: y
  })), { bounds: o, style: g };
};
Pc.prototype.update = function(e, t, n, i) {
  var r, o;
  P(e, "bpmn:TextAnnotation") && (o = this._canvas.getAbsoluteBBox(e), r = {
    x: e.x,
    y: e.y,
    width: e.width / o.width * i.width,
    height: e.height / o.height * i.height
  }), P3(t) && (t = null), this._modeling.updateLabel(e, t, r);
};
function om(e) {
  return P(e, "bpmn:SubProcess") && !pt(e);
}
function R3(e) {
  return P(e, "bpmn:SubProcess") && pt(e);
}
function C3(e) {
  return P(e, "bpmn:Participant") && !pt(e);
}
function A3(e) {
  return P(e, "bpmn:Participant") && pt(e);
}
function P3(e) {
  return !e || !e.trim();
}
var w0 = "djs-element-hidden", S0 = "djs-label-hidden";
function IE(e, t, n) {
  var i = this, r = t.getDefaultLayer(), o, a, c;
  e.on("directEditing.activate", function(l) {
    var u = l.active;
    if (o = u.element.label || u.element, P(o, "bpmn:TextAnnotation")) {
      a = t.getAbsoluteBBox(o), c = Me("g");
      var d = n.getScaledPath("TEXT_ANNOTATION", {
        xScaleFactor: 1,
        yScaleFactor: 1,
        containerWidth: o.width,
        containerHeight: o.height,
        position: {
          mx: 0,
          my: 0
        }
      }), f = i.path = Me("path");
      we(f, {
        d,
        strokeWidth: 2,
        stroke: T3(o)
      }), ze(c, f), ze(r, c), An(c, o.x, o.y);
    }
    P(o, "bpmn:TextAnnotation") || o.labelTarget ? t.addMarker(o, w0) : (P(o, "bpmn:Task") || P(o, "bpmn:CallActivity") || P(o, "bpmn:SubProcess") || P(o, "bpmn:Participant")) && t.addMarker(o, S0);
  }), e.on("directEditing.resize", function(l) {
    if (P(o, "bpmn:TextAnnotation")) {
      var u = l.height, d = l.dy, f = Math.max(o.height / a.height * (u + d), 0), y = n.getScaledPath("TEXT_ANNOTATION", {
        xScaleFactor: 1,
        yScaleFactor: 1,
        containerWidth: o.width,
        containerHeight: f,
        position: {
          mx: 0,
          my: 0
        }
      });
      we(i.path, {
        d: y
      });
    }
  }), e.on(["directEditing.complete", "directEditing.cancel"], function(l) {
    var u = l.active;
    u && (t.removeMarker(u.element.label || u.element, w0), t.removeMarker(o, S0)), o = void 0, a = void 0, c && (qt(c), c = void 0);
  });
}
IE.$inject = [
  "eventBus",
  "canvas",
  "pathMap"
];
function T3(e, t) {
  var n = bt(e);
  return n.get("stroke") || t || "black";
}
const k3 = {
  __depends__: [
    Nd,
    LE,
    RE
  ],
  __init__: [
    "labelEditingProvider",
    "labelEditingPreview"
  ],
  labelEditingProvider: ["type", Pc],
  labelEditingPreview: ["type", IE]
};
var M3 = new Od("tt");
function D3(e) {
  var t = Ot(
    '<div class="djs-tooltip-container" />'
  );
  return Cn(t, {
    position: "absolute",
    width: "0",
    height: "0"
  }), e.insertBefore(t, e.firstChild), t;
}
function O3(e, t, n) {
  Cn(e, { left: t + "px", top: n + "px" });
}
function am(e, t) {
  e.style.display = t === !1 ? "none" : "";
}
var $E = "djs-tooltip", df = "." + $E;
function ei(e, t) {
  this._eventBus = e, this._canvas = t, this._ids = M3, this._tooltipDefaults = {
    show: {
      minZoom: 0.7,
      maxZoom: 5
    }
  }, this._tooltips = {}, this._tooltipRoot = D3(t.getContainer());
  var n = this;
  si.bind(this._tooltipRoot, df, "mousedown", function(i) {
    i.stopPropagation();
  }), si.bind(this._tooltipRoot, df, "mouseover", function(i) {
    n.trigger("mouseover", i);
  }), si.bind(this._tooltipRoot, df, "mouseout", function(i) {
    n.trigger("mouseout", i);
  }), this._init();
}
ei.$inject = ["eventBus", "canvas"];
ei.prototype.add = function(e) {
  if (!e.position)
    throw new Error("must specifiy tooltip position");
  if (!e.html)
    throw new Error("must specifiy tooltip html");
  var t = this._ids.next();
  return e = U({}, this._tooltipDefaults, e, {
    id: t
  }), this._addTooltip(e), e.timeout && this.setTimeout(e), t;
};
ei.prototype.trigger = function(e, t) {
  var n = t.delegateTarget || t.target, i = this.get(Vn(n, "data-tooltip-id"));
  i && (e === "mouseover" && i.timeout && this.clearTimeout(i), e === "mouseout" && i.timeout && (i.timeout = 1e3, this.setTimeout(i)));
};
ei.prototype.get = function(e) {
  return typeof e != "string" && (e = e.id), this._tooltips[e];
};
ei.prototype.clearTimeout = function(e) {
  if (e = this.get(e), !!e) {
    var t = e.removeTimer;
    t && (clearTimeout(t), e.removeTimer = null);
  }
};
ei.prototype.setTimeout = function(e) {
  if (e = this.get(e), !!e) {
    this.clearTimeout(e);
    var t = this;
    e.removeTimer = setTimeout(function() {
      t.remove(e);
    }, e.timeout);
  }
};
ei.prototype.remove = function(e) {
  var t = this.get(e);
  t && (cr(t.html), cr(t.htmlContainer), delete t.htmlContainer, delete this._tooltips[t.id]);
};
ei.prototype.show = function() {
  am(this._tooltipRoot);
};
ei.prototype.hide = function() {
  am(this._tooltipRoot, !1);
};
ei.prototype._updateRoot = function(e) {
  var t = e.scale || 1, n = e.scale || 1, i = "matrix(" + t + ",0,0," + n + "," + -1 * e.x * t + "," + -1 * e.y * n + ")";
  this._tooltipRoot.style.transform = i, this._tooltipRoot.style["-ms-transform"] = i;
};
ei.prototype._addTooltip = function(e) {
  var t = e.id, n = e.html, i, r = this._tooltipRoot;
  n.get && n.constructor.prototype.jquery && (n = n.get(0)), ci(n) && (n = Ot(n)), i = Ot('<div data-tooltip-id="' + t + '" class="' + $E + '">'), Cn(i, { position: "absolute" }), i.appendChild(n), e.type && rn(i).add("djs-tooltip-" + e.type), e.className && rn(i).add(e.className), e.htmlContainer = i, r.appendChild(i), this._tooltips[t] = e, this._updateTooltip(e);
};
ei.prototype._updateTooltip = function(e) {
  var t = e.position, n = e.htmlContainer;
  O3(n, t.x, t.y);
};
ei.prototype._updateTooltipVisibilty = function(e) {
  z(this._tooltips, function(t) {
    var n = t.show, i = t.htmlContainer, r = !0;
    n && ((n.minZoom > e.scale || n.maxZoom < e.scale) && (r = !1), am(i, r));
  });
};
ei.prototype._init = function() {
  var e = this;
  function t(n) {
    e._updateRoot(n), e._updateTooltipVisibilty(n), e.show();
  }
  this._eventBus.on("canvas.viewbox.changing", function(n) {
    e.hide();
  }), this._eventBus.on("canvas.viewbox.changed", function(n) {
    t(n.viewbox);
  });
};
const N3 = {
  __init__: ["tooltips"],
  tooltips: ["type", ei]
};
var B3 = "flow elements must be children of pools/participants";
function jE(e, t, n) {
  function i(r, o, a) {
    t.add({
      position: {
        x: r.x + 5,
        y: r.y + 5
      },
      type: "error",
      timeout: 2e3,
      html: "<div>" + o + "</div>"
    });
  }
  e.on(["shape.move.rejected", "create.rejected"], function(r) {
    var o = r.context, a = o.shape, c = o.target;
    P(c, "bpmn:Collaboration") && P(a, "bpmn:FlowNode") && i(r, n(B3));
  });
}
jE.$inject = [
  "eventBus",
  "tooltips",
  "translate"
];
const L3 = {
  __depends__: [
    N3
  ],
  __init__: [
    "modelingFeedback"
  ],
  modelingFeedback: ["type", jE]
};
var I3 = 500, $3 = 1250, j3 = 1500, hu = Math.round;
function F3(e) {
  return {
    x: e.x + hu(e.width / 2),
    y: e.y + hu(e.height / 2)
  };
}
function FE(e, t, n, i, r) {
  function o(c, l, u, d) {
    return r.allowed("elements.move", {
      shapes: c,
      delta: l,
      position: u,
      target: d
    });
  }
  e.on("shape.move.start", j3, function(c) {
    var l = c.context, u = c.shape, d = i.get().slice();
    d.indexOf(u) === -1 && (d = [u]), d = H3(d), U(l, {
      shapes: d,
      validatedShapes: d,
      shape: u
    });
  }), e.on("shape.move.start", $3, function(c) {
    var l = c.context, u = l.validatedShapes, d;
    if (d = l.canExecute = o(u), !d)
      return !1;
  }), e.on("shape.move.move", I3, function(c) {
    var l = c.context, u = l.validatedShapes, d = c.hover, f = { x: c.dx, y: c.dy }, y = { x: c.x, y: c.y }, g;
    if (g = o(u, f, y, d), l.delta = f, l.canExecute = g, g === null) {
      l.target = null;
      return;
    }
    l.target = d;
  }), e.on("shape.move.end", function(c) {
    var l = c.context, u = l.delta, d = l.canExecute, f = d === "attach", y = l.shapes;
    if (d === !1)
      return !1;
    u.x = hu(u.x), u.y = hu(u.y), !(u.x === 0 && u.y === 0) && n.moveElements(y, u, l.target, {
      primaryShape: l.shape,
      attach: f
    });
  }), e.on("element.mousedown", function(c) {
    if (ho(c)) {
      var l = Ka(c);
      if (!l)
        throw new Error("must supply DOM mousedown event");
      return a(l, c.element);
    }
  });
  function a(c, l, u, d) {
    if (vn(u) && (d = u, u = !1), !(l.waypoints || !l.parent) && !dt(c.target).has("djs-hit-no-move")) {
      var f = F3(l);
      return t.init(c, f, "shape.move", {
        cursor: "grabbing",
        autoActivate: u,
        data: {
          shape: l,
          context: d || {}
        }
      }), !0;
    }
  }
  this.start = a;
}
FE.$inject = [
  "eventBus",
  "dragging",
  "modeling",
  "selection",
  "rules"
];
function H3(e) {
  var t = Ga(e, "id");
  return tt(e, function(n) {
    for (; n = n.parent; )
      if (t[n.id])
        return !1;
    return !0;
  });
}
var R0 = 499, hf = "djs-dragging", C0 = "drop-ok", A0 = "drop-not-ok", P0 = "new-parent", T0 = "attach-ok";
function HE(e, t, n, i) {
  function r(l) {
    var u = o(l), d = z3(u);
    return d;
  }
  function o(l) {
    var u = ec(l, !0), d = gn(u, function(f) {
      return (f.incoming || []).concat(f.outgoing || []);
    });
    return ql(u.concat(d));
  }
  function a(l, u) {
    [T0, C0, A0, P0].forEach(function(d) {
      d === u ? t.addMarker(l, d) : t.removeMarker(l, d);
    });
  }
  function c(l, u, d) {
    i.addDragger(u, l.dragGroup), d && t.addMarker(u, hf), l.allDraggedElements ? l.allDraggedElements.push(u) : l.allDraggedElements = [u];
  }
  e.on("shape.move.start", R0, function(l) {
    var u = l.context, d = u.shapes, f = u.allDraggedElements, y = r(d);
    if (!u.dragGroup) {
      var g = Me("g");
      we(g, n.cls("djs-drag-group", ["no-events"]));
      var _ = t.getActiveLayer();
      ze(_, g), u.dragGroup = g;
    }
    y.forEach(function(x) {
      i.addDragger(x, u.dragGroup);
    }), f ? f = ql([
      f,
      o(d)
    ]) : f = o(d), z(f, function(x) {
      t.addMarker(x, hf);
    }), u.allDraggedElements = f, u.differentParents = V3(d);
  }), e.on("shape.move.move", R0, function(l) {
    var u = l.context, d = u.dragGroup, f = u.target, y = u.shape.parent, g = u.canExecute;
    f && (g === "attach" ? a(f, T0) : u.canExecute && y && f.id !== y.id ? a(f, P0) : a(f, u.canExecute ? C0 : A0)), An(d, l.dx, l.dy);
  }), e.on(["shape.move.out", "shape.move.cleanup"], function(l) {
    var u = l.context, d = u.target;
    d && a(d, null);
  }), e.on("shape.move.cleanup", function(l) {
    var u = l.context, d = u.allDraggedElements, f = u.dragGroup;
    z(d, function(y) {
      t.removeMarker(y, hf);
    }), f && qt(f);
  }), this.makeDraggable = c;
}
HE.$inject = [
  "eventBus",
  "canvas",
  "styles",
  "previewSupport"
];
function z3(e) {
  var t = tt(e, function(n) {
    return kt(n) ? gt(e, zi({ id: n.source.id })) && gt(e, zi({ id: n.target.id })) : !0;
  });
  return t;
}
function V3(e) {
  return cS(Ga(e, function(t) {
    return t.parent && t.parent.id;
  })) !== 1;
}
const W3 = {
  __depends__: [
    Mu,
    pr,
    Ld,
    dr,
    Ir,
    es
  ],
  __init__: [
    "move",
    "movePreview"
  ],
  move: ["type", FE],
  movePreview: ["type", HE]
};
var zE = ".djs-palette-toggle", VE = ".entry", G3 = zE + ", " + VE, cd = "djs-palette-", U3 = "shown", ld = "open", k0 = "two-column", Y3 = 1e3;
function on(e, t) {
  this._eventBus = e, this._canvas = t;
  var n = this;
  e.on("tool-manager.update", function(i) {
    var r = i.tool;
    n.updateToolHighlight(r);
  }), e.on("i18n.changed", function() {
    n._update();
  }), e.on("diagram.init", function() {
    n._diagramInitialized = !0, n._rebuild();
  });
}
on.$inject = ["eventBus", "canvas"];
on.prototype.registerProvider = function(e, t) {
  t || (t = e, e = Y3), this._eventBus.on("palette.getProviders", e, function(n) {
    n.providers.push(t);
  }), this._rebuild();
};
on.prototype.getEntries = function() {
  var e = this._getProviders();
  return e.reduce(q3, {});
};
on.prototype._rebuild = function() {
  if (this._diagramInitialized) {
    var e = this._getProviders();
    e.length && (this._container || this._init(), this._update());
  }
};
on.prototype._init = function() {
  var e = this, t = this._eventBus, n = this._getParentContainer(), i = this._container = Ot(on.HTML_MARKUP);
  n.appendChild(i), rn(n).add(cd + U3), si.bind(i, G3, "click", function(r) {
    var o = r.delegateTarget;
    if (La(o, zE))
      return e.toggle();
    e.trigger("click", r);
  }), Ye.bind(i, "mousedown", function(r) {
    r.stopPropagation();
  }), si.bind(i, VE, "dragstart", function(r) {
    e.trigger("dragstart", r);
  }), t.on("canvas.resized", this._layoutChanged, this), t.fire("palette.create", {
    container: i
  });
};
on.prototype._getProviders = function(e) {
  var t = this._eventBus.createEvent({
    type: "palette.getProviders",
    providers: []
  });
  return this._eventBus.fire(t), t.providers;
};
on.prototype._toggleState = function(e) {
  e = e || {};
  var t = this._getParentContainer(), n = this._container, i = this._eventBus, r, o = rn(n), a = rn(t);
  "twoColumn" in e ? r = e.twoColumn : r = this._needsCollapse(t.clientHeight, this._entries || {}), o.toggle(k0, r), a.toggle(cd + k0, r), "open" in e && (o.toggle(ld, e.open), a.toggle(cd + ld, e.open)), i.fire("palette.changed", {
    twoColumn: r,
    open: this.isOpen()
  });
};
on.prototype._update = function() {
  var e = Tt(".djs-palette-entries", this._container), t = this._entries = this.getEntries();
  yu(e), z(t, function(n, i) {
    var r = n.group || "default", o = Tt("[data-group=" + Hs(r) + "]", e);
    o || (o = Ot('<div class="group"></div>'), Vn(o, "data-group", r), e.appendChild(o));
    var a = n.html || (n.separator ? '<hr class="separator" />' : '<div class="entry" draggable="true"></div>'), c = Ot(a);
    if (o.appendChild(c), !n.separator && (Vn(c, "data-action", i), n.title && Vn(c, "title", n.title), n.className && K3(c, n.className), n.imageUrl)) {
      var l = Ot("<img>");
      Vn(l, "src", n.imageUrl), c.appendChild(l);
    }
  }), this.open();
};
on.prototype.trigger = function(e, t, n) {
  var i, r, o = t.delegateTarget || t.target;
  return o ? (i = Vn(o, "data-action"), r = t.originalEvent || t, this.triggerEntry(i, e, r, n)) : t.preventDefault();
};
on.prototype.triggerEntry = function(e, t, n, i) {
  var r = this._entries, o, a;
  if (o = r[e], !!o && (a = o.action, this._eventBus.fire("palette.trigger", { entry: o, event: n }) !== !1)) {
    if (fn(a)) {
      if (t === "click")
        return a(n, i);
    } else if (a[t])
      return a[t](n, i);
    n.preventDefault();
  }
};
on.prototype._layoutChanged = function() {
  this._toggleState({});
};
on.prototype._needsCollapse = function(e, t) {
  var n = 50, i = Object.keys(t).length * 46;
  return e < i + n;
};
on.prototype.close = function() {
  this._toggleState({
    open: !1,
    twoColumn: !1
  });
};
on.prototype.open = function() {
  this._toggleState({ open: !0 });
};
on.prototype.toggle = function() {
  this.isOpen() ? this.close() : this.open();
};
on.prototype.isActiveTool = function(e) {
  return e && this._activeTool === e;
};
on.prototype.updateToolHighlight = function(e) {
  var t, n;
  this._toolsContainer || (t = Tt(".djs-palette-entries", this._container), this._toolsContainer = Tt("[data-group=tools]", t)), n = this._toolsContainer, z(n.children, function(i) {
    var r = i.getAttribute("data-action");
    if (r) {
      var o = rn(i);
      r = r.replace("-tool", ""), o.contains("entry") && r === e ? o.add("highlighted-entry") : o.remove("highlighted-entry");
    }
  });
};
on.prototype.isOpen = function() {
  return rn(this._container).has(ld);
};
on.prototype._getParentContainer = function() {
  return this._canvas.getContainer();
};
on.HTML_MARKUP = '<div class="djs-palette"><div class="djs-palette-entries"></div><div class="djs-palette-toggle"></div></div>';
function K3(e, t) {
  var n = rn(e), i = Ke(t) ? t : t.split(/\s+/g);
  i.forEach(function(r) {
    n.add(r);
  });
}
function q3(e, t) {
  var n = t.getPaletteEntries();
  return fn(n) ? n(e) : (z(n, function(i, r) {
    e[r] = i;
  }), e);
}
const X3 = {
  __init__: ["palette"],
  palette: ["type", on]
};
var WE = "crosshair";
function la(e, t, n, i, r, o, a) {
  this._selection = r, this._dragging = n, this._mouse = a;
  var c = this, l = {
    create: function(u) {
      var d = t.getActiveLayer(), f;
      f = u.frame = Me("rect"), we(f, {
        class: "djs-lasso-overlay",
        width: 1,
        height: 1,
        x: 0,
        y: 0
      }), ze(d, f);
    },
    update: function(u) {
      var d = u.frame, f = u.bbox;
      we(d, {
        x: f.x,
        y: f.y,
        width: f.width,
        height: f.height
      });
    },
    remove: function(u) {
      u.frame && qt(u.frame);
    }
  };
  o.registerTool("lasso", {
    tool: "lasso.selection",
    dragging: "lasso"
  }), e.on("lasso.selection.end", function(u) {
    var d = u.originalEvent.target;
    !u.hover && !(d instanceof SVGElement) || e.once("lasso.selection.ended", function() {
      c.activateLasso(u.originalEvent, !0);
    });
  }), e.on("lasso.end", 0, function(u) {
    var d = u.context, f = mf(u), y = i.filter(function(_) {
      return _;
    }), g = ru(u);
    c.select(y, f, g ? d.selection : []);
  }), e.on("lasso.start", function(u) {
    var d = u.context;
    d.bbox = mf(u), l.create(d), d.selection = r.get();
  }), e.on("lasso.move", function(u) {
    var d = u.context;
    d.bbox = mf(u), l.update(d);
  }), e.on("lasso.cleanup", function(u) {
    var d = u.context;
    l.remove(d);
  }), e.on("element.mousedown", 1500, function(u) {
    if (ru(u))
      return c.activateLasso(u.originalEvent), !0;
  });
}
la.$inject = [
  "eventBus",
  "canvas",
  "dragging",
  "elementRegistry",
  "selection",
  "toolManager",
  "mouse"
];
la.prototype.activateLasso = function(e, t) {
  this._dragging.init(e, "lasso", {
    autoActivate: t,
    cursor: WE,
    data: {
      context: {}
    }
  });
};
la.prototype.activateSelection = function(e, t) {
  this._dragging.init(e, "lasso.selection", {
    trapClick: !1,
    autoActivate: t,
    cursor: WE,
    data: {
      context: {}
    },
    keepSelection: !0
  });
};
la.prototype.select = function(e, t, n = []) {
  var i = eR(e, t);
  this._selection.select([
    ...n,
    ...md(i)
  ]);
};
la.prototype.toggle = function() {
  if (this.isActive())
    return this._dragging.cancel();
  var e = this._mouse.getLastMoveEvent();
  this.activateSelection(e, !!e);
};
la.prototype.isActive = function() {
  var e = this._dragging.context();
  return e && /^lasso/.test(e.prefix);
};
function mf(e) {
  var t = {
    x: e.x - e.dx,
    y: e.y - e.dy
  }, n = {
    x: e.x,
    y: e.y
  }, i;
  return t.x <= n.x && t.y < n.y || t.x < n.x && t.y <= n.y ? i = {
    x: t.x,
    y: t.y,
    width: n.x - t.x,
    height: n.y - t.y
  } : t.x >= n.x && t.y < n.y || t.x > n.x && t.y <= n.y ? i = {
    x: n.x,
    y: t.y,
    width: t.x - n.x,
    height: n.y - t.y
  } : t.x <= n.x && t.y > n.y || t.x < n.x && t.y >= n.y ? i = {
    x: t.x,
    y: n.y,
    width: n.x - t.x,
    height: t.y - n.y
  } : t.x >= n.x && t.y > n.y || t.x > n.x && t.y >= n.y ? i = {
    x: n.x,
    y: n.y,
    width: t.x - n.x,
    height: t.y - n.y
  } : i = {
    x: n.x,
    y: n.y,
    width: 0,
    height: 0
  }, i;
}
const Z3 = {
  __depends__: [
    Ju,
    fc
  ],
  __init__: ["lassoTool"],
  lassoTool: ["type", la]
};
var yf = 1500, GE = "grab";
function ts(e, t, n, i, r, o) {
  this._dragging = n, this._mouse = o;
  var a = this, c = i.get("keyboard", !1);
  r.registerTool("hand", {
    tool: "hand",
    dragging: "hand.move"
  }), e.on("element.mousedown", yf, function(l) {
    if (zs(l))
      return a.activateMove(l.originalEvent, !0), !1;
  }), c && c.addListener(yf, function(l) {
    if (!(!M0(l.keyEvent) || a.isActive())) {
      var u = a._mouse.getLastMoveEvent();
      a.activateMove(u, !!u);
    }
  }, "keyboard.keydown"), c && c.addListener(yf, function(l) {
    !M0(l.keyEvent) || !a.isActive() || a.toggle();
  }, "keyboard.keyup"), e.on("hand.end", function(l) {
    var u = l.originalEvent.target;
    if (!l.hover && !(u instanceof SVGElement))
      return !1;
    e.once("hand.ended", function() {
      a.activateMove(l.originalEvent, { reactivate: !0 });
    });
  }), e.on("hand.move.move", function(l) {
    var u = t.viewbox().scale;
    t.scroll({
      dx: l.dx * u,
      dy: l.dy * u
    });
  }), e.on("hand.move.end", function(l) {
    var u = l.context, d = u.reactivate;
    return !zs(l) && d && e.once("hand.move.ended", function(f) {
      a.activateHand(f.originalEvent, !0, !0);
    }), !1;
  });
}
ts.$inject = [
  "eventBus",
  "canvas",
  "dragging",
  "injector",
  "toolManager",
  "mouse"
];
ts.prototype.activateMove = function(e, t, n) {
  typeof t == "object" && (n = t, t = !1), this._dragging.init(e, "hand.move", {
    autoActivate: t,
    cursor: GE,
    data: {
      context: n || {}
    }
  });
};
ts.prototype.activateHand = function(e, t, n) {
  this._dragging.init(e, "hand", {
    trapClick: !1,
    autoActivate: t,
    cursor: GE,
    data: {
      context: {
        reactivate: n
      }
    }
  });
};
ts.prototype.toggle = function() {
  if (this.isActive())
    return this._dragging.cancel();
  var e = this._mouse.getLastMoveEvent();
  this.activateHand(e, !!e);
};
ts.prototype.isActive = function() {
  var e = this._dragging.context();
  return e ? /^(hand|hand\.move)$/.test(e.prefix) : !1;
};
function M0(e) {
  return hn("Space", e);
}
const J3 = {
  __depends__: [
    Ju,
    fc
  ],
  __init__: ["handTool"],
  handTool: ["type", ts]
};
var D0 = "connect-ok", O0 = "connect-not-ok";
function ns(e, t, n, i, r, o, a) {
  var c = this;
  this._dragging = t, this._rules = o, this._mouse = a, r.registerTool("global-connect", {
    tool: "global-connect",
    dragging: "global-connect.drag"
  }), e.on("global-connect.hover", function(l) {
    var u = l.context, d = l.hover, f = u.canStartConnect = c.canStartConnect(d);
    f !== null && (u.startTarget = d, i.addMarker(d, f ? D0 : O0));
  }), e.on(["global-connect.out", "global-connect.cleanup"], function(l) {
    var u = l.context.startTarget, d = l.context.canStartConnect;
    u && i.removeMarker(u, d ? D0 : O0);
  }), e.on(["global-connect.ended"], function(l) {
    var u = l.context, d = u.startTarget, f = {
      x: l.x,
      y: l.y
    }, y = c.canStartConnect(d);
    if (y)
      return e.once("element.out", function() {
        e.once(["connect.ended", "connect.canceled"], function() {
          e.fire("global-connect.drag.ended");
        }), n.start(null, d, f);
      }), !1;
  });
}
ns.$inject = [
  "eventBus",
  "dragging",
  "connect",
  "canvas",
  "toolManager",
  "rules",
  "mouse"
];
ns.prototype.start = function(e, t) {
  this._dragging.init(e, "global-connect", {
    autoActivate: t,
    trapClick: !1,
    data: {
      context: {}
    }
  });
};
ns.prototype.toggle = function() {
  if (this.isActive())
    return this._dragging.cancel();
  var e = this._mouse.getLastMoveEvent();
  return this.start(e, !!e);
};
ns.prototype.isActive = function() {
  var e = this._dragging.context();
  return e && /^global-connect/.test(e.prefix);
};
ns.prototype.canStartConnect = function(e) {
  return this._rules.allowed("connection.start", { source: e });
};
const Q3 = {
  __depends__: [
    eh,
    dr,
    Ir,
    Ju,
    fc
  ],
  globalConnect: ["type", ns]
};
function sm(e, t, n, i, r, o, a, c) {
  this._palette = e, this._create = t, this._elementFactory = n, this._spaceTool = i, this._lassoTool = r, this._handTool = o, this._globalConnect = a, this._translate = c, e.registerProvider(this);
}
sm.$inject = [
  "palette",
  "create",
  "elementFactory",
  "spaceTool",
  "lassoTool",
  "handTool",
  "globalConnect",
  "translate"
];
sm.prototype.getPaletteEntries = function() {
  var e = {}, t = this._create, n = this._elementFactory, i = this._spaceTool, r = this._lassoTool, o = this._handTool, a = this._globalConnect, c = this._translate;
  function l(f, y, g, _, x) {
    function w(B) {
      var N = n.createShape(U({ type: f }, x));
      t.start(B, N);
    }
    return {
      group: y,
      className: g,
      title: _,
      action: {
        dragstart: w,
        click: w
      }
    };
  }
  function u(f) {
    var y = n.createShape({
      type: "bpmn:SubProcess",
      x: 0,
      y: 0,
      isExpanded: !0
    }), g = n.createShape({
      type: "bpmn:StartEvent",
      x: 40,
      y: 82,
      parent: y
    });
    t.start(f, [y, g], {
      hints: {
        autoSelect: [y]
      }
    });
  }
  function d(f) {
    t.start(f, n.createParticipantShape());
  }
  return U(e, {
    "hand-tool": {
      group: "tools",
      className: "bpmn-icon-hand-tool",
      title: c("Activate hand tool"),
      action: {
        click: function(f) {
          o.activateHand(f);
        }
      }
    },
    "lasso-tool": {
      group: "tools",
      className: "bpmn-icon-lasso-tool",
      title: c("Activate lasso tool"),
      action: {
        click: function(f) {
          r.activateSelection(f);
        }
      }
    },
    "space-tool": {
      group: "tools",
      className: "bpmn-icon-space-tool",
      title: c("Activate create/remove space tool"),
      action: {
        click: function(f) {
          i.activateSelection(f);
        }
      }
    },
    "global-connect-tool": {
      group: "tools",
      className: "bpmn-icon-connection-multi",
      title: c("Activate global connect tool"),
      action: {
        click: function(f) {
          a.start(f);
        }
      }
    },
    "tool-separator": {
      group: "tools",
      separator: !0
    },
    "create.start-event": l(
      "bpmn:StartEvent",
      "event",
      "bpmn-icon-start-event-none",
      c("Create start event")
    ),
    "create.intermediate-event": l(
      "bpmn:IntermediateThrowEvent",
      "event",
      "bpmn-icon-intermediate-event-none",
      c("Create intermediate/boundary event")
    ),
    "create.end-event": l(
      "bpmn:EndEvent",
      "event",
      "bpmn-icon-end-event-none",
      c("Create end event")
    ),
    "create.exclusive-gateway": l(
      "bpmn:ExclusiveGateway",
      "gateway",
      "bpmn-icon-gateway-none",
      c("Create gateway")
    ),
    "create.task": l(
      "bpmn:Task",
      "activity",
      "bpmn-icon-task",
      c("Create task")
    ),
    "create.data-object": l(
      "bpmn:DataObjectReference",
      "data-object",
      "bpmn-icon-data-object",
      c("Create data object reference")
    ),
    "create.data-store": l(
      "bpmn:DataStoreReference",
      "data-store",
      "bpmn-icon-data-store",
      c("Create data store reference")
    ),
    "create.subprocess-expanded": {
      group: "activity",
      className: "bpmn-icon-subprocess-expanded",
      title: c("Create expanded sub-process"),
      action: {
        dragstart: u,
        click: u
      }
    },
    "create.participant-expanded": {
      group: "collaboration",
      className: "bpmn-icon-participant",
      title: c("Create pool/participant"),
      action: {
        dragstart: d,
        click: d
      }
    },
    "create.group": l(
      "bpmn:Group",
      "artifact",
      "bpmn-icon-group",
      c("Create group")
    )
  }), e;
};
const eO = {
  __depends__: [
    X3,
    Zu,
    sE,
    Z3,
    J3,
    Q3,
    Au
  ],
  __init__: ["paletteProvider"],
  paletteProvider: ["type", sm]
};
var tO = 250;
function cm(e, t, n, i, r) {
  le.call(this, e);
  function o(c) {
    var l = c.canExecute.replacements;
    z(l, function(u) {
      var d = u.oldElementId, f = {
        type: u.newElementType
      };
      if (!c.visualReplacements[d]) {
        var y = t.get(d);
        U(f, { x: y.x, y: y.y });
        var g = n.createShape(f);
        i.addShape(g, y.parent);
        var _ = Tt('[data-element-id="' + Hs(y.id) + '"]', c.dragGroup);
        _ && we(_, { display: "none" });
        var x = r.addDragger(g, c.dragGroup);
        c.visualReplacements[d] = x, i.removeShape(g);
      }
    });
  }
  function a(c) {
    var l = c.visualReplacements;
    z(l, function(u, d) {
      var f = Tt('[data-element-id="' + Hs(d) + '"]', c.dragGroup);
      f && we(f, { display: "inline" }), u.remove(), l[d] && delete l[d];
    });
  }
  e.on("shape.move.move", tO, function(c) {
    var l = c.context, u = l.canExecute;
    l.visualReplacements || (l.visualReplacements = {}), u && u.replacements ? o(l) : a(l);
  });
}
cm.$inject = [
  "eventBus",
  "elementRegistry",
  "elementFactory",
  "canvas",
  "previewSupport"
];
Pe(cm, le);
const nO = {
  __depends__: [
    es
  ],
  __init__: ["bpmnReplacePreview"],
  bpmnReplacePreview: ["type", cm]
};
var iO = 1250, gf = 40, rO = 20, oO = 10, N0 = 20, UE = ["x", "y"], aO = Math.abs;
function YE(e) {
  e.on([
    "connect.hover",
    "connect.move",
    "connect.end"
  ], iO, function(t) {
    var n = t.context, i = n.canExecute, r = n.start, o = n.hover, a = n.source, c = n.target;
    t.originalEvent && gi(t.originalEvent) || (n.initialConnectionStart || (n.initialConnectionStart = n.connectionStart), i && o && sO(t, o, pO(o)), o && uO(i, [
      "bpmn:Association",
      "bpmn:DataInputAssociation",
      "bpmn:DataOutputAssociation",
      "bpmn:SequenceFlow"
    ]) ? (n.connectionStart = Pi(r), rt(o, ["bpmn:Event", "bpmn:Gateway"]) && B0(t, Pi(o)), rt(o, ["bpmn:Task", "bpmn:SubProcess"]) && cO(t, o), P(a, "bpmn:BoundaryEvent") && c === a.host && lO(t)) : KE(i, "bpmn:MessageFlow") ? (P(r, "bpmn:Event") && (n.connectionStart = Pi(r)), P(o, "bpmn:Event") && B0(t, Pi(o))) : n.connectionStart = n.initialConnectionStart);
  });
}
YE.$inject = ["eventBus"];
function sO(e, t, n) {
  UE.forEach(function(i) {
    var r = qE(i, t);
    e[i] < t[i] + n ? tn(e, i, t[i] + n) : e[i] > t[i] + r - n && tn(e, i, t[i] + r - n);
  });
}
function cO(e, t) {
  var n = Pi(t);
  UE.forEach(function(i) {
    fO(e, t, i) && tn(e, i, n[i]);
  });
}
function lO(e) {
  var t = e.context, n = t.source, i = t.target;
  if (!dO(t)) {
    var r = Pi(n), o = Ln(r, i, -10), a = [];
    /top|bottom/.test(o) && a.push("x"), /left|right/.test(o) && a.push("y"), a.forEach(function(c) {
      var l = e[c], u;
      aO(l - r[c]) < gf && (l > r[c] ? u = r[c] + gf : u = r[c] - gf, tn(e, c, u));
    });
  }
}
function B0(e, t) {
  tn(e, "x", t.x), tn(e, "y", t.y);
}
function KE(e, t) {
  return e && e.type === t;
}
function uO(e, t) {
  return so(t, function(n) {
    return KE(e, n);
  });
}
function qE(e, t) {
  return e === "x" ? t.width : t.height;
}
function pO(e) {
  return P(e, "bpmn:Task") ? oO : rO;
}
function fO(e, t, n) {
  return e[n] > t[n] + N0 && e[n] < t[n] + qE(n, t) - N0;
}
function dO(e) {
  var t = e.hover, n = e.source;
  return t && n && t === n;
}
function Ro() {
  this._targets = {}, this._snapOrigins = {}, this._snapLocations = [], this._defaultSnaps = {};
}
Ro.prototype.getSnapOrigin = function(e) {
  return this._snapOrigins[e];
};
Ro.prototype.setSnapOrigin = function(e, t) {
  this._snapOrigins[e] = t, this._snapLocations.indexOf(e) === -1 && this._snapLocations.push(e);
};
Ro.prototype.addDefaultSnap = function(e, t) {
  var n = this._defaultSnaps[e];
  n || (n = this._defaultSnaps[e] = []), n.push(t);
};
Ro.prototype.getSnapLocations = function() {
  return this._snapLocations;
};
Ro.prototype.setSnapLocations = function(e) {
  this._snapLocations = e;
};
Ro.prototype.pointsForTarget = function(e) {
  var t = e.id || e, n = this._targets[t];
  return n || (n = this._targets[t] = new mp(), n.initDefaults(this._defaultSnaps)), n;
};
function mp() {
  this._snapValues = {};
}
mp.prototype.add = function(e, t) {
  var n = this._snapValues[e];
  n || (n = this._snapValues[e] = { x: [], y: [] }), n.x.indexOf(t.x) === -1 && n.x.push(t.x), n.y.indexOf(t.y) === -1 && n.y.push(t.y);
};
mp.prototype.snap = function(e, t, n, i) {
  var r = this._snapValues[t];
  return r && MT(e[n], r[n], i);
};
mp.prototype.initDefaults = function(e) {
  var t = this;
  z(e || {}, function(n, i) {
    z(n, function(r) {
      t.add(i, r);
    });
  });
};
var hO = 1250;
function hr(e, t, n) {
  var i = this;
  this._elementRegistry = e, t.on([
    "create.start",
    "shape.move.start"
  ], function(r) {
    i.initSnap(r);
  }), t.on([
    "create.move",
    "create.end",
    "shape.move.move",
    "shape.move.end"
  ], hO, function(r) {
    var o = r.context, a = o.shape, c = o.snapContext, l = o.target;
    if (!(r.originalEvent && gi(r.originalEvent)) && !(Ha(r) || !l)) {
      var u = c.pointsForTarget(l);
      u.initialized || (u = i.addSnapTargetPoints(u, a, l), u.initialized = !0), n.snap(r, u);
    }
  }), t.on([
    "create.cleanup",
    "shape.move.cleanup"
  ], function() {
    n.hide();
  });
}
hr.$inject = [
  "elementRegistry",
  "eventBus",
  "snapping"
];
hr.prototype.initSnap = function(e) {
  var t = this._elementRegistry, n = e.context, i = n.shape, r = n.snapContext;
  r || (r = n.snapContext = new Ro());
  var o;
  t.get(i.id) ? o = Pi(i, e) : o = {
    x: e.x + Pi(i).x,
    y: e.y + Pi(i).y
  };
  var a = {
    x: o.x - i.width / 2,
    y: o.y - i.height / 2
  }, c = {
    x: o.x + i.width / 2,
    y: o.y + i.height / 2
  };
  return r.setSnapOrigin("mid", {
    x: o.x - e.x,
    y: o.y - e.y
  }), vt(i) || (r.setSnapOrigin("top-left", {
    x: a.x - e.x,
    y: a.y - e.y
  }), r.setSnapOrigin("bottom-right", {
    x: c.x - e.x,
    y: c.y - e.y
  })), r;
};
hr.prototype.addSnapTargetPoints = function(e, t, n) {
  var i = this.getSnapTargets(t, n);
  return z(i, function(r) {
    if (vt(r)) {
      vt(t) && e.add("mid", Pi(r));
      return;
    }
    if (kt(r)) {
      if (r.waypoints.length < 3)
        return;
      var o = r.waypoints.slice(1, -1);
      z(o, function(a) {
        e.add("mid", a);
      });
      return;
    }
    e.add("mid", Pi(r));
  }), !je(t.x) || !je(t.y) || this._elementRegistry.get(t.id) && e.add("mid", Pi(t)), e;
};
hr.prototype.getSnapTargets = function(e, t) {
  return ux(t).filter(function(n) {
    return !mO(n);
  });
};
function mO(e) {
  return !!e.hidden;
}
var L0 = 1500;
function is(e, t) {
  t.invoke(hr, this), e.on(["create.move", "create.end"], L0, _O), e.on([
    "create.move",
    "create.end",
    "shape.move.move",
    "shape.move.end"
  ], L0, function(n) {
    var i = n.context, r = i.canExecute, o = i.target, a = r && (r === "attach" || r.attach);
    a && !Ha(n) && yO(n, o);
  });
}
Pe(is, hr);
is.$inject = [
  "eventBus",
  "injector"
];
is.prototype.initSnap = function(e) {
  var t = hr.prototype.initSnap.call(this, e), n = e.shape, i = !!this._elementRegistry.get(n.id);
  return z(n.outgoing, function(r) {
    var o = r.waypoints[0];
    o = o.original || o, t.setSnapOrigin(r.id + "-docking", $0(o, i, e));
  }), z(n.incoming, function(r) {
    var o = r.waypoints[r.waypoints.length - 1];
    o = o.original || o, t.setSnapOrigin(r.id + "-docking", $0(o, i, e));
  }), P(n, "bpmn:Participant") && t.setSnapLocations(["top-left", "bottom-right", "mid"]), t;
};
is.prototype.addSnapTargetPoints = function(e, t, n) {
  hr.prototype.addSnapTargetPoints.call(this, e, t, n);
  var i = this.getSnapTargets(t, n);
  z(i, function(o) {
    (vO(o) || gO([t, o], "bpmn:TextAnnotation")) && (e.add("top-left", cx(o)), e.add("bottom-right", lx(o)));
  });
  var r = this._elementRegistry;
  return z(t.incoming, function(o) {
    if (r.get(t.id)) {
      I0(i, o.source) || e.add("mid", Fe(o.source));
      var a = o.waypoints[0];
      e.add(o.id + "-docking", a.original || a);
    }
  }), z(t.outgoing, function(o) {
    if (r.get(t.id)) {
      I0(i, o.target) || e.add("mid", Fe(o.target));
      var a = o.waypoints[o.waypoints.length - 1];
      e.add(o.id + "-docking", a.original || a);
    }
  }), P(n, "bpmn:SequenceFlow") && (e = this.addSnapTargetPoints(e, t, n.parent)), e;
};
is.prototype.getSnapTargets = function(e, t) {
  return hr.prototype.getSnapTargets.call(this, e, t).filter(function(n) {
    return !P(n, "bpmn:Lane");
  });
};
function yO(e, t) {
  var n = Le(t), i = Lx(e, t), r = e.context, o = r.shape, a;
  o.parent ? a = { x: 0, y: 0 } : a = Fe(o), /top/.test(i) ? tn(e, "y", n.top - a.y) : /bottom/.test(i) && tn(e, "y", n.bottom - a.y), /left/.test(i) ? tn(e, "x", n.left - a.x) : /right/.test(i) && tn(e, "x", n.right - a.x);
}
function gO(e, t) {
  return e.every(function(n) {
    return P(n, t);
  });
}
function vO(e) {
  return P(e, "bpmn:SubProcess") && pt(e) ? !0 : P(e, "bpmn:Participant");
}
function _O(e) {
  var t = e.context, n = t.createConstraints;
  if (n) {
    var i = n.top, r = n.right, o = n.bottom, a = n.left;
    (a && a >= e.x || r && r <= e.x) && tn(e, "x", e.x), (i && i >= e.y || o && o <= e.y) && tn(e, "y", e.y);
  }
}
function I0(e, t) {
  return e.indexOf(t) !== -1;
}
function $0(e, t, n) {
  return t ? {
    x: e.x - n.x,
    y: e.y - n.y
  } : {
    x: e.x,
    y: e.y
  };
}
var bO = 1250;
function Tc(e, t) {
  var n = this;
  e.on(["resize.start"], function(i) {
    n.initSnap(i);
  }), e.on([
    "resize.move",
    "resize.end"
  ], bO, function(i) {
    var r = i.context, o = r.shape, a = o.parent, c = r.direction, l = r.snapContext;
    if (!(i.originalEvent && gi(i.originalEvent)) && !Ha(i)) {
      var u = l.pointsForTarget(a);
      u.initialized || (u = n.addSnapTargetPoints(u, o, a, c), u.initialized = !0), wO(c) && tn(i, "x", i.x), SO(c) && tn(i, "y", i.y), t.snap(i, u);
    }
  }), e.on(["resize.cleanup"], function() {
    t.hide();
  });
}
Tc.prototype.initSnap = function(e) {
  var t = e.context, n = t.shape, i = t.direction, r = t.snapContext;
  r || (r = t.snapContext = new Ro());
  var o = XE(n, i);
  return r.setSnapOrigin("corner", {
    x: o.x - e.x,
    y: o.y - e.y
  }), r;
};
Tc.prototype.addSnapTargetPoints = function(e, t, n, i) {
  var r = this.getSnapTargets(t, n);
  return z(r, function(o) {
    e.add("corner", lx(o)), e.add("corner", cx(o));
  }), e.add("corner", XE(t, i)), e;
};
Tc.$inject = [
  "eventBus",
  "snapping"
];
Tc.prototype.getSnapTargets = function(e, t) {
  return ux(t).filter(function(n) {
    return !xO(n, e) && !kt(n) && !EO(n) && !vt(n);
  });
};
function XE(e, t) {
  var n = Fe(e), i = Le(e), r = {
    x: n.x,
    y: n.y
  };
  return t.indexOf("n") !== -1 ? r.y = i.top : t.indexOf("s") !== -1 && (r.y = i.bottom), t.indexOf("e") !== -1 ? r.x = i.right : t.indexOf("w") !== -1 && (r.x = i.left), r;
}
function xO(e, t) {
  return e.host === t;
}
function EO(e) {
  return !!e.hidden;
}
function wO(e) {
  return e === "n" || e === "s";
}
function SO(e) {
  return e === "e" || e === "w";
}
var RO = 7, CO = 1e3;
function Co(e) {
  this._canvas = e, this._asyncHide = a_(Qn(this.hide, this), CO);
}
Co.$inject = ["canvas"];
Co.prototype.snap = function(e, t) {
  var n = e.context, i = n.snapContext, r = i.getSnapLocations(), o = {
    x: Ha(e, "x"),
    y: Ha(e, "y")
  };
  z(r, function(a) {
    var c = i.getSnapOrigin(a), l = {
      x: e.x + c.x,
      y: e.y + c.y
    };
    if (z(["x", "y"], function(u) {
      var d;
      o[u] || (d = t.snap(l, a, u, RO), d !== void 0 && (o[u] = {
        value: d,
        originValue: d - c[u]
      }));
    }), o.x && o.y)
      return !1;
  }), this.showSnapLine("vertical", o.x && o.x.value), this.showSnapLine("horizontal", o.y && o.y.value), z(["x", "y"], function(a) {
    var c = o[a];
    vn(c) && tn(e, a, c.originValue);
  });
};
Co.prototype._createLine = function(e) {
  var t = this._canvas.getLayer("snap"), n = Me("path");
  return we(n, { d: "M0,0 L0,0" }), dt(n).add("djs-snap-line"), ze(t, n), {
    update: function(i) {
      je(i) ? e === "horizontal" ? we(n, {
        d: "M-100000," + i + " L+100000," + i,
        display: ""
      }) : we(n, {
        d: "M " + i + ",-100000 L " + i + ", +100000",
        display: ""
      }) : we(n, { display: "none" });
    }
  };
};
Co.prototype._createSnapLines = function() {
  this._snapLines = {
    horizontal: this._createLine("horizontal"),
    vertical: this._createLine("vertical")
  };
};
Co.prototype.showSnapLine = function(e, t) {
  var n = this.getSnapLine(e);
  n && n.update(t), this._asyncHide();
};
Co.prototype.getSnapLine = function(e) {
  return this._snapLines || this._createSnapLines(), this._snapLines[e];
};
Co.prototype.hide = function() {
  z(this._snapLines, function(e) {
    e.update();
  });
};
const AO = {
  __init__: [
    "createMoveSnapping",
    "resizeSnapping",
    "snapping"
  ],
  createMoveSnapping: ["type", hr],
  resizeSnapping: ["type", Tc],
  snapping: ["type", Co]
}, PO = {
  __depends__: [AO],
  __init__: [
    "connectSnapping",
    "createMoveSnapping"
  ],
  connectSnapping: ["type", YE],
  createMoveSnapping: ["type", is]
};
function $e(e, t, n, i, r) {
  this._open = !1, this._results = [], this._eventMaps = [], this._canvas = e, this._eventBus = t, this._overlays = n, this._selection = i, this._translate = r, this._container = this._getBoxHtml(), this._searchInput = Tt($e.INPUT_SELECTOR, this._container), this._resultsContainer = Tt($e.RESULTS_CONTAINER_SELECTOR, this._container), this._canvas.getContainer().appendChild(this._container), t.on(["canvas.destroy", "diagram.destroy"], this.close, this);
}
$e.$inject = [
  "canvas",
  "eventBus",
  "overlays",
  "selection",
  "translate"
];
$e.prototype._bindEvents = function() {
  var e = this;
  function t(n, i, r, o) {
    e._eventMaps.push({
      el: n,
      type: r,
      listener: si.bind(n, i, r, o)
    });
  }
  t(document, "html", "click", function(n) {
    e.close();
  }), t(this._container, $e.INPUT_SELECTOR, "click", function(n) {
    n.stopPropagation(), n.delegateTarget.focus();
  }), t(this._container, $e.RESULT_SELECTOR, "mouseover", function(n) {
    n.stopPropagation(), e._scrollToNode(n.delegateTarget), e._preselect(n.delegateTarget);
  }), t(this._container, $e.RESULT_SELECTOR, "click", function(n) {
    n.stopPropagation(), e._select(n.delegateTarget);
  }), t(this._container, $e.INPUT_SELECTOR, "keydown", function(n) {
    hn("ArrowUp", n) && n.preventDefault(), hn("ArrowDown", n) && n.preventDefault();
  }), t(this._container, $e.INPUT_SELECTOR, "keyup", function(n) {
    if (hn("Escape", n))
      return e.close();
    if (hn("Enter", n)) {
      var i = e._getCurrentResult();
      return i ? e._select(i) : e.close();
    }
    if (hn("ArrowUp", n))
      return e._scrollToDirection(!0);
    if (hn("ArrowDown", n))
      return e._scrollToDirection();
    hn(["ArrowLeft", "ArrowRight"], n) || e._search(n.delegateTarget.value);
  });
};
$e.prototype._unbindEvents = function() {
  this._eventMaps.forEach(function(e) {
    si.unbind(e.el, e.type, e.listener);
  });
};
$e.prototype._search = function(e) {
  var t = this;
  if (this._clearResults(), !(!e || e === "")) {
    var n = this._searchProvider.find(e);
    if (n.length) {
      n.forEach(function(r) {
        var o = r.element.id, a = t._createResultNode(r, o);
        t._results[o] = {
          element: r.element,
          node: a
        };
      });
      var i = Tt($e.RESULT_SELECTOR, this._resultsContainer);
      this._scrollToNode(i), this._preselect(i);
    }
  }
};
$e.prototype._scrollToDirection = function(e) {
  var t = this._getCurrentResult();
  if (t) {
    var n = e ? t.previousElementSibling : t.nextElementSibling;
    n && (this._scrollToNode(n), this._preselect(n));
  }
};
$e.prototype._scrollToNode = function(e) {
  if (!(!e || e === this._getCurrentResult())) {
    var t = e.offsetTop, n = this._resultsContainer.scrollTop, i = t - this._resultsContainer.clientHeight + e.clientHeight;
    t < n ? this._resultsContainer.scrollTop = t : n < i && (this._resultsContainer.scrollTop = i);
  }
};
$e.prototype._clearResults = function() {
  yu(this._resultsContainer), this._results = [], this._resetOverlay(), this._eventBus.fire("searchPad.cleared");
};
$e.prototype._getCurrentResult = function() {
  return Tt($e.RESULT_SELECTED_SELECTOR, this._resultsContainer);
};
$e.prototype._createResultNode = function(e, t) {
  var n = Ot($e.RESULT_HTML);
  return e.primaryTokens.length > 0 && j0(n, e.primaryTokens, $e.RESULT_PRIMARY_HTML), j0(n, e.secondaryTokens, $e.RESULT_SECONDARY_HTML), Vn(n, $e.RESULT_ID_ATTRIBUTE, t), this._resultsContainer.appendChild(n), n;
};
$e.prototype.registerProvider = function(e) {
  this._searchProvider = e;
};
$e.prototype.open = function() {
  if (!this._searchProvider)
    throw new Error("no search provider registered");
  this.isOpen() || (this._bindEvents(), this._open = !0, rn(this._container).add("open"), this._searchInput.focus(), this._eventBus.fire("searchPad.opened"));
};
$e.prototype.close = function() {
  this.isOpen() && (this._unbindEvents(), this._open = !1, rn(this._container).remove("open"), this._clearResults(), this._searchInput.value = "", this._searchInput.blur(), this._resetOverlay(), this._eventBus.fire("searchPad.closed"));
};
$e.prototype.toggle = function() {
  this.isOpen() ? this.close() : this.open();
};
$e.prototype.isOpen = function() {
  return this._open;
};
$e.prototype._preselect = function(e) {
  var t = this._getCurrentResult();
  if (e !== t) {
    t && rn(t).remove($e.RESULT_SELECTED_CLASS);
    var n = Vn(e, $e.RESULT_ID_ATTRIBUTE), i = this._results[n].element;
    rn(e).add($e.RESULT_SELECTED_CLASS), this._resetOverlay(i), this._canvas.scrollToElement(i, { top: 400 }), this._selection.select(i), this._eventBus.fire("searchPad.preselected", i);
  }
};
$e.prototype._select = function(e) {
  var t = Vn(e, $e.RESULT_ID_ATTRIBUTE), n = this._results[t].element;
  this.close(), this._resetOverlay(), this._canvas.scrollToElement(n, { top: 400 }), this._selection.select(n), this._eventBus.fire("searchPad.selected", n);
};
$e.prototype._resetOverlay = function(e) {
  if (this._overlayId && this._overlays.remove(this._overlayId), e) {
    var t = pn(e), n = TO(t);
    this._overlayId = this._overlays.add(e, n);
  }
};
$e.prototype._getBoxHtml = function() {
  const e = Ot($e.BOX_HTML), t = Tt($e.INPUT_SELECTOR, e);
  return t && t.setAttribute("aria-label", this._translate("Search in diagram")), e;
};
function TO(e) {
  var t = 6, n = e.width + t * 2, i = e.height + t * 2, r = {
    width: n + "px",
    height: i + "px"
  }, o = Ot('<div class="' + $e.OVERLAY_CLASS + '"></div>');
  return Cn(o, r), {
    position: {
      bottom: i - t,
      right: n - t
    },
    show: !0,
    html: o
  };
}
function j0(e, t, n) {
  var i = kO(t), r = Ot(n);
  r.innerHTML = i, e.appendChild(r);
}
function kO(e) {
  var t = "";
  return e.forEach(function(n) {
    n.matched ? t += '<strong class="' + $e.RESULT_HIGHLIGHT_CLASS + '">' + $f(n.matched) + "</strong>" : t += $f(n.normal);
  }), t !== "" ? t : null;
}
$e.CONTAINER_SELECTOR = ".djs-search-container";
$e.INPUT_SELECTOR = ".djs-search-input input";
$e.RESULTS_CONTAINER_SELECTOR = ".djs-search-results";
$e.RESULT_SELECTOR = ".djs-search-result";
$e.RESULT_SELECTED_CLASS = "djs-search-result-selected";
$e.RESULT_SELECTED_SELECTOR = "." + $e.RESULT_SELECTED_CLASS;
$e.RESULT_ID_ATTRIBUTE = "data-result-id";
$e.RESULT_HIGHLIGHT_CLASS = "djs-search-highlight";
$e.OVERLAY_CLASS = "djs-search-overlay";
$e.BOX_HTML = '<div class="djs-search-container djs-draggable djs-scrollable"><div class="djs-search-input"><input type="text"/></div><div class="djs-search-results"></div></div>';
$e.RESULT_HTML = '<div class="djs-search-result"></div>';
$e.RESULT_PRIMARY_HTML = '<div class="djs-search-result-primary"></div>';
$e.RESULT_SECONDARY_HTML = '<p class="djs-search-result-secondary"></p>';
const MO = {
  __depends__: [
    Au,
    Tu,
    pr
  ],
  searchPad: ["type", $e]
};
function lm(e, t, n) {
  this._elementRegistry = e, this._canvas = n, t.registerProvider(this);
}
lm.$inject = [
  "elementRegistry",
  "searchPad",
  "canvas"
];
lm.prototype.find = function(e) {
  var t = this._canvas.getRootElement(), n = this._elementRegistry.filter(function(i) {
    return !i.labelTarget;
  });
  return n = tt(n, function(i) {
    return i !== t;
  }), n = gn(n, function(i) {
    return {
      primaryTokens: H0(ki(i), e),
      secondaryTokens: H0(i.id, e),
      element: i
    };
  }), n = tt(n, function(i) {
    return F0(i.primaryTokens) || F0(i.secondaryTokens);
  }), n = Gi(n, function(i) {
    return ki(i.element) + i.element.id;
  }), n;
};
function F0(e) {
  var t = tt(e, function(n) {
    return !!n.matched;
  });
  return t.length > 0;
}
function H0(e, t) {
  var n = [], i = e;
  if (!e)
    return n;
  e = e.toLowerCase(), t = t.toLowerCase();
  var r = e.indexOf(t);
  return r > -1 ? (r !== 0 && n.push({
    normal: i.substr(0, r)
  }), n.push({
    matched: i.substr(r, t.length)
  }), t.length + r < e.length && n.push({
    normal: i.substr(t.length + r, e.length)
  })) : n.push({
    normal: i
  }), n;
}
const DO = {
  __depends__: [
    MO
  ],
  __init__: ["bpmnSearch"],
  bpmnSearch: ["type", lm]
};
var OO = '<?xml version="1.0" encoding="UTF-8"?><bpmn:definitions xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" targetNamespace="http://bpmn.io/schema/bpmn" id="Definitions_1"><bpmn:process id="Process_1" isExecutable="false"><bpmn:startEvent id="StartEvent_1"/></bpmn:process><bpmndi:BPMNDiagram id="BPMNDiagram_1"><bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="Process_1"><bpmndi:BPMNShape id="_BPMNShape_StartEvent_2" bpmnElement="StartEvent_1"><dc:Bounds height="36.0" width="36.0" x="173.0" y="102.0"/></bpmndi:BPMNShape></bpmndi:BPMNPlane></bpmndi:BPMNDiagram></bpmn:definitions>';
function or(e) {
  ac.call(this, e);
}
Pe(or, ac);
or.Viewer = mo;
or.NavigatedViewer = Vs;
or.prototype.createDiagram = function() {
  return this.importXML(OO);
};
or.prototype._interactionModules = [
  // non-modeling components
  vb,
  Eb,
  Rb
];
or.prototype._modelingModules = [
  // modeling components
  WP,
  qd,
  dT,
  sT,
  OT,
  eh,
  jT,
  F5,
  tE,
  Zu,
  W5,
  Y5,
  u3,
  f3,
  d3,
  v3,
  k3,
  SE,
  L3,
  W3,
  eO,
  nO,
  LE,
  PO,
  DO
];
or.prototype._modules = [].concat(
  mo.prototype._modules,
  or.prototype._interactionModules,
  or.prototype._modelingModules
);
const NO = `<?xml version="1.0" encoding="UTF-8"?>
<bpmn:definitions xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"  
xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL"  
xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI"  
xmlns:dc="http://www.omg.org/spec/DD/20100524/DC"  
targetNamespace="http://bpmn.io/schema/bpmn"  
id="Definitions_1"> 
     <bpmn:process id="Process_1" isExecutable="false"> 
          <bpmn:startEvent id="StartEvent_1"/> 
     </bpmn:process>
     <bpmndi:BPMNDiagram id="BPMNDiagram_1"> 
          <bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="Process_1"> 
                <bpmndi:BPMNShape id="_BPMNShape_StartEvent_2" bpmnElement="StartEvent_1"> 
                    <dc:Bounds height="36.0" width="36.0" x="173.0" y="102.0"/> 
                </bpmndi:BPMNShape>
          </bpmndi:BPMNPlane>
     </bpmndi:BPMNDiagram>
</bpmn:definitions>`;
function ar(e) {
  return Object.keys(e);
}
function vf(e) {
  return e && typeof e == "object" && !Array.isArray(e);
}
function um(e, t) {
  const n = { ...e }, i = t;
  return vf(e) && vf(t) && Object.keys(t).forEach((r) => {
    vf(i[r]) && r in e ? n[r] = um(n[r], i[r]) : n[r] = i[r];
  }), n;
}
function BO(e) {
  return e.replace(/[A-Z]/g, (t) => `-${t.toLowerCase()}`);
}
function LO(e) {
  var t;
  return typeof e != "string" || !e.includes("var(--mantine-scale)") ? e : (t = e.match(/^calc\((.*?)\)$/)) == null ? void 0 : t[1].split("*")[0].trim();
}
function IO(e) {
  const t = LO(e);
  return typeof t == "number" ? t : typeof t == "string" ? t.includes("calc") || t.includes("var") ? t : t.includes("px") ? Number(t.replace("px", "")) : t.includes("rem") ? Number(t.replace("rem", "")) * 16 : t.includes("em") ? Number(t.replace("em", "")) * 16 : Number(t) : NaN;
}
function _f(e) {
  return e === "0rem" ? "0rem" : `calc(${e} * var(--mantine-scale))`;
}
function ZE(e, { shouldScale: t = !1 } = {}) {
  function n(i) {
    if (i === 0 || i === "0")
      return `0${e}`;
    if (typeof i == "number") {
      const r = `${i / 16}${e}`;
      return t ? _f(r) : r;
    }
    if (typeof i == "string") {
      if (i === "" || i.startsWith("calc(") || i.startsWith("clamp(") || i.includes("rgba("))
        return i;
      if (i.includes(","))
        return i.split(",").map((o) => n(o)).join(",");
      if (i.includes(" "))
        return i.split(" ").map((o) => n(o)).join(" ");
      if (i.includes(e))
        return t ? _f(i) : i;
      const r = i.replace("px", "");
      if (!Number.isNaN(Number(r))) {
        const o = `${Number(r) / 16}${e}`;
        return t ? _f(o) : o;
      }
    }
    return i;
  }
  return n;
}
const de = ZE("rem", { shouldScale: !0 }), z0 = ZE("em");
function pm(e) {
  return Object.keys(e).reduce((t, n) => (e[n] !== void 0 && (t[n] = e[n]), t), {});
}
function JE(e) {
  return typeof e == "number" ? !0 : typeof e == "string" ? e.startsWith("calc(") || e.startsWith("var(") || e.includes(" ") && e.trim() !== "" ? !0 : /[0-9]/.test(e.trim().replace("-", "")[0]) : !1;
}
function Xs(e, t = "size", n = !0) {
  if (e !== void 0)
    return JE(e) ? n ? de(e) : e : `var(--${t}-${e})`;
}
function $O(e) {
  return e === void 0 ? "var(--mantine-radius-default)" : Xs(e, "mantine-radius");
}
function V0(e) {
  return Xs(e, "mantine-font-size");
}
function jO(e, t) {
  try {
    return e.addEventListener("change", t), () => e.removeEventListener("change", t);
  } catch {
    return e.addListener(t), () => e.removeListener(t);
  }
}
function FO(e, t) {
  return typeof window < "u" && "matchMedia" in window ? window.matchMedia(e).matches : !1;
}
function HO(e, t, { getInitialValueInEffect: n } = {
  getInitialValueInEffect: !0
}) {
  const [i, r] = Mr(
    n ? t : FO(e)
  ), o = Yo();
  return Wi(() => {
    if ("matchMedia" in window)
      return o.current = window.matchMedia(e), r(o.current.matches), jO(o.current, (a) => r(a.matches));
  }, [e]), i;
}
const QE = typeof document < "u" ? Kw : Wi;
function zO(e, t) {
  const n = Yo(!1);
  Wi(
    () => () => {
      n.current = !1;
    },
    []
  ), Wi(() => {
    if (n.current)
      return e();
    n.current = !0;
  }, t);
}
function VO(e, t) {
  return HO("(prefers-reduced-motion: reduce)", e, t);
}
function e1(e) {
  var t, n, i = "";
  if (typeof e == "string" || typeof e == "number")
    i += e;
  else if (typeof e == "object")
    if (Array.isArray(e)) {
      var r = e.length;
      for (t = 0; t < r; t++)
        e[t] && (n = e1(e[t])) && (i && (i += " "), i += n);
    } else
      for (n in e)
        e[n] && (i && (i += " "), i += n);
  return i;
}
function ua() {
  for (var e, t, n = 0, i = "", r = arguments.length; n < r; n++)
    (e = arguments[n]) && (t = e1(e)) && (i && (i += " "), i += t);
  return i;
}
const WO = {};
function GO(e) {
  const t = {};
  return e.forEach((n) => {
    Object.entries(n).forEach(([i, r]) => {
      t[i] ? t[i] = ua(t[i], r) : t[i] = r;
    });
  }), t;
}
function fm({ theme: e, classNames: t, props: n, stylesCtx: i }) {
  const o = (Array.isArray(t) ? t : [t]).map(
    (a) => typeof a == "function" ? a(e, n, i) : a || WO
  );
  return GO(o);
}
function ud({ theme: e, styles: t, props: n, stylesCtx: i }) {
  return (Array.isArray(t) ? t : [t]).reduce((o, a) => typeof a == "function" ? { ...o, ...a(e, n, i) } : { ...o, ...a }, {});
}
const t1 = i_(null);
function pa() {
  const e = hd(t1);
  if (!e)
    throw new Error("[@mantine/core] MantineProvider was not found in tree");
  return e;
}
function UO() {
  return pa().cssVariablesResolver;
}
function YO() {
  return pa().classNamesPrefix;
}
function dm() {
  return pa().getStyleNonce;
}
function KO() {
  return pa().withStaticClasses;
}
function qO() {
  return pa().headless;
}
function XO() {
  var e;
  return (e = pa().stylesTransform) == null ? void 0 : e.sx;
}
function ZO() {
  var e;
  return (e = pa().stylesTransform) == null ? void 0 : e.styles;
}
function JO(e) {
  return /^#?([0-9A-F]{3}){1,2}([0-9A-F]{2})?$/i.test(e);
}
function QO(e) {
  let t = e.replace("#", "");
  if (t.length === 3) {
    const a = t.split("");
    t = [
      a[0],
      a[0],
      a[1],
      a[1],
      a[2],
      a[2]
    ].join("");
  }
  if (t.length === 8) {
    const a = parseInt(t.slice(6, 8), 16) / 255;
    return {
      r: parseInt(t.slice(0, 2), 16),
      g: parseInt(t.slice(2, 4), 16),
      b: parseInt(t.slice(4, 6), 16),
      a
    };
  }
  const n = parseInt(t, 16), i = n >> 16 & 255, r = n >> 8 & 255, o = n & 255;
  return {
    r: i,
    g: r,
    b: o,
    a: 1
  };
}
function eN(e) {
  const [t, n, i, r] = e.replace(/[^0-9,./]/g, "").split(/[/,]/).map(Number);
  return { r: t, g: n, b: i, a: r || 1 };
}
function tN(e) {
  const t = /^hsla?\(\s*(\d+)\s*,\s*(\d+%)\s*,\s*(\d+%)\s*(,\s*(0?\.\d+|\d+(\.\d+)?))?\s*\)$/i, n = e.match(t);
  if (!n)
    return {
      r: 0,
      g: 0,
      b: 0,
      a: 1
    };
  const i = parseInt(n[1], 10), r = parseInt(n[2], 10) / 100, o = parseInt(n[3], 10) / 100, a = n[5] ? parseFloat(n[5]) : void 0, c = (1 - Math.abs(2 * o - 1)) * r, l = i / 60, u = c * (1 - Math.abs(l % 2 - 1)), d = o - c / 2;
  let f, y, g;
  return l >= 0 && l < 1 ? (f = c, y = u, g = 0) : l >= 1 && l < 2 ? (f = u, y = c, g = 0) : l >= 2 && l < 3 ? (f = 0, y = c, g = u) : l >= 3 && l < 4 ? (f = 0, y = u, g = c) : l >= 4 && l < 5 ? (f = u, y = 0, g = c) : (f = c, y = 0, g = u), {
    r: Math.round((f + d) * 255),
    g: Math.round((y + d) * 255),
    b: Math.round((g + d) * 255),
    a: a || 1
  };
}
function hm(e) {
  return JO(e) ? QO(e) : e.startsWith("rgb") ? eN(e) : e.startsWith("hsl") ? tN(e) : {
    r: 0,
    g: 0,
    b: 0,
    a: 1
  };
}
function kl(e, t) {
  if (e.startsWith("var("))
    return `color-mix(in srgb, ${e}, black ${t * 100}%)`;
  const { r: n, g: i, b: r, a: o } = hm(e), a = 1 - t, c = (l) => Math.round(l * a);
  return `rgba(${c(n)}, ${c(i)}, ${c(r)}, ${o})`;
}
function Zs(e, t) {
  return typeof e.primaryShade == "number" ? e.primaryShade : t === "dark" ? e.primaryShade.dark : e.primaryShade.light;
}
function bf(e) {
  return e <= 0.03928 ? e / 12.92 : ((e + 0.055) / 1.055) ** 2.4;
}
function nN(e) {
  const t = e.match(/oklch\((.*?)%\s/);
  return t ? parseFloat(t[1]) : null;
}
function iN(e) {
  if (e.startsWith("oklch("))
    return (nN(e) || 0) / 100;
  const { r: t, g: n, b: i } = hm(e), r = t / 255, o = n / 255, a = i / 255, c = bf(r), l = bf(o), u = bf(a);
  return 0.2126 * c + 0.7152 * l + 0.0722 * u;
}
function ks(e, t = 0.179) {
  return e.startsWith("var(") ? !1 : iN(e) > t;
}
function kc({
  color: e,
  theme: t,
  colorScheme: n
}) {
  if (typeof e != "string")
    throw new Error(
      `[@mantine/core] Failed to parse color. Expected color to be a string, instead got ${typeof e}`
    );
  if (e === "bright")
    return {
      color: e,
      value: n === "dark" ? t.white : t.black,
      shade: void 0,
      isThemeColor: !1,
      isLight: ks(
        n === "dark" ? t.white : t.black,
        t.luminanceThreshold
      ),
      variable: "--mantine-color-bright"
    };
  if (e === "dimmed")
    return {
      color: e,
      value: n === "dark" ? t.colors.dark[2] : t.colors.gray[7],
      shade: void 0,
      isThemeColor: !1,
      isLight: ks(
        n === "dark" ? t.colors.dark[2] : t.colors.gray[6],
        t.luminanceThreshold
      ),
      variable: "--mantine-color-dimmed"
    };
  if (e === "white" || e === "black")
    return {
      color: e,
      value: e === "white" ? t.white : t.black,
      shade: void 0,
      isThemeColor: !1,
      isLight: ks(
        e === "white" ? t.white : t.black,
        t.luminanceThreshold
      ),
      variable: `--mantine-color-${e}`
    };
  const [i, r] = e.split("."), o = r ? Number(r) : void 0, a = i in t.colors;
  if (a) {
    const c = o !== void 0 ? t.colors[i][o] : t.colors[i][Zs(t, n || "light")];
    return {
      color: i,
      value: c,
      shade: o,
      isThemeColor: a,
      isLight: ks(c, t.luminanceThreshold),
      variable: r ? `--mantine-color-${i}-${o}` : `--mantine-color-${i}-filled`
    };
  }
  return {
    color: e,
    value: e,
    isThemeColor: a,
    isLight: ks(e, t.luminanceThreshold),
    shade: o,
    variable: void 0
  };
}
function pd(e, t) {
  const n = kc({ color: e || t.primaryColor, theme: t });
  return n.variable ? `var(${n.variable})` : e;
}
function W0(e, t) {
  const n = {
    from: (e == null ? void 0 : e.from) || t.defaultGradient.from,
    to: (e == null ? void 0 : e.to) || t.defaultGradient.to,
    deg: (e == null ? void 0 : e.deg) || t.defaultGradient.deg || 0
  }, i = pd(n.from, t), r = pd(n.to, t);
  return `linear-gradient(${n.deg}deg, ${i} 0%, ${r} 100%)`;
}
function Rr(e, t) {
  if (typeof e != "string" || t > 1 || t < 0)
    return "rgba(0, 0, 0, 1)";
  if (e.startsWith("var(")) {
    const o = (1 - t) * 100;
    return `color-mix(in srgb, ${e}, transparent ${o}%)`;
  }
  if (e.startsWith("oklch"))
    return e.includes("/") ? e.replace(/\/\s*[\d.]+\s*\)/, `/ ${t})`) : e.replace(")", ` / ${t})`);
  const { r: n, g: i, b: r } = hm(e);
  return `rgba(${n}, ${i}, ${r}, ${t})`;
}
const Oa = Rr, rN = ({
  color: e,
  theme: t,
  variant: n,
  gradient: i,
  autoContrast: r
}) => {
  const o = kc({ color: e, theme: t }), a = typeof r == "boolean" ? r : t.autoContrast;
  if (n === "filled") {
    const c = a && o.isLight ? "var(--mantine-color-black)" : "var(--mantine-color-white)";
    return o.isThemeColor ? o.shade === void 0 ? {
      background: `var(--mantine-color-${e}-filled)`,
      hover: `var(--mantine-color-${e}-filled-hover)`,
      color: c,
      border: `${de(1)} solid transparent`
    } : {
      background: `var(--mantine-color-${o.color}-${o.shade})`,
      hover: `var(--mantine-color-${o.color}-${o.shade === 9 ? 8 : o.shade + 1})`,
      color: c,
      border: `${de(1)} solid transparent`
    } : {
      background: e,
      hover: kl(e, 0.1),
      color: c,
      border: `${de(1)} solid transparent`
    };
  }
  if (n === "light") {
    if (o.isThemeColor) {
      if (o.shade === void 0)
        return {
          background: `var(--mantine-color-${e}-light)`,
          hover: `var(--mantine-color-${e}-light-hover)`,
          color: `var(--mantine-color-${e}-light-color)`,
          border: `${de(1)} solid transparent`
        };
      const c = t.colors[o.color][o.shade];
      return {
        background: Rr(c, 0.1),
        hover: Rr(c, 0.12),
        color: `var(--mantine-color-${o.color}-${Math.min(o.shade, 6)})`,
        border: `${de(1)} solid transparent`
      };
    }
    return {
      background: Rr(e, 0.1),
      hover: Rr(e, 0.12),
      color: e,
      border: `${de(1)} solid transparent`
    };
  }
  if (n === "outline")
    return o.isThemeColor ? o.shade === void 0 ? {
      background: "transparent",
      hover: `var(--mantine-color-${e}-outline-hover)`,
      color: `var(--mantine-color-${e}-outline)`,
      border: `${de(1)} solid var(--mantine-color-${e}-outline)`
    } : {
      background: "transparent",
      hover: Rr(t.colors[o.color][o.shade], 0.05),
      color: `var(--mantine-color-${o.color}-${o.shade})`,
      border: `${de(1)} solid var(--mantine-color-${o.color}-${o.shade})`
    } : {
      background: "transparent",
      hover: Rr(e, 0.05),
      color: e,
      border: `${de(1)} solid ${e}`
    };
  if (n === "subtle") {
    if (o.isThemeColor) {
      if (o.shade === void 0)
        return {
          background: "transparent",
          hover: `var(--mantine-color-${e}-light-hover)`,
          color: `var(--mantine-color-${e}-light-color)`,
          border: `${de(1)} solid transparent`
        };
      const c = t.colors[o.color][o.shade];
      return {
        background: "transparent",
        hover: Rr(c, 0.12),
        color: `var(--mantine-color-${o.color}-${Math.min(o.shade, 6)})`,
        border: `${de(1)} solid transparent`
      };
    }
    return {
      background: "transparent",
      hover: Rr(e, 0.12),
      color: e,
      border: `${de(1)} solid transparent`
    };
  }
  return n === "transparent" ? o.isThemeColor ? o.shade === void 0 ? {
    background: "transparent",
    hover: "transparent",
    color: `var(--mantine-color-${e}-light-color)`,
    border: `${de(1)} solid transparent`
  } : {
    background: "transparent",
    hover: "transparent",
    color: `var(--mantine-color-${o.color}-${Math.min(o.shade, 6)})`,
    border: `${de(1)} solid transparent`
  } : {
    background: "transparent",
    hover: "transparent",
    color: e,
    border: `${de(1)} solid transparent`
  } : n === "white" ? o.isThemeColor ? o.shade === void 0 ? {
    background: "var(--mantine-color-white)",
    hover: kl(t.white, 0.01),
    color: `var(--mantine-color-${e}-filled)`,
    border: `${de(1)} solid transparent`
  } : {
    background: "var(--mantine-color-white)",
    hover: kl(t.white, 0.01),
    color: `var(--mantine-color-${o.color}-${o.shade})`,
    border: `${de(1)} solid transparent`
  } : {
    background: "var(--mantine-color-white)",
    hover: kl(t.white, 0.01),
    color: e,
    border: `${de(1)} solid transparent`
  } : n === "gradient" ? {
    background: W0(i, t),
    hover: W0(i, t),
    color: "var(--mantine-color-white)",
    border: "none"
  } : n === "default" ? {
    background: "var(--mantine-color-default)",
    hover: "var(--mantine-color-default-hover)",
    color: "var(--mantine-color-default-color)",
    border: `${de(1)} solid var(--mantine-color-default-border)`
  } : {};
}, oN = {
  dark: [
    "#C9C9C9",
    "#b8b8b8",
    "#828282",
    "#696969",
    "#424242",
    "#3b3b3b",
    "#2e2e2e",
    "#242424",
    "#1f1f1f",
    "#141414"
  ],
  gray: [
    "#f8f9fa",
    "#f1f3f5",
    "#e9ecef",
    "#dee2e6",
    "#ced4da",
    "#adb5bd",
    "#868e96",
    "#495057",
    "#343a40",
    "#212529"
  ],
  red: [
    "#fff5f5",
    "#ffe3e3",
    "#ffc9c9",
    "#ffa8a8",
    "#ff8787",
    "#ff6b6b",
    "#fa5252",
    "#f03e3e",
    "#e03131",
    "#c92a2a"
  ],
  pink: [
    "#fff0f6",
    "#ffdeeb",
    "#fcc2d7",
    "#faa2c1",
    "#f783ac",
    "#f06595",
    "#e64980",
    "#d6336c",
    "#c2255c",
    "#a61e4d"
  ],
  grape: [
    "#f8f0fc",
    "#f3d9fa",
    "#eebefa",
    "#e599f7",
    "#da77f2",
    "#cc5de8",
    "#be4bdb",
    "#ae3ec9",
    "#9c36b5",
    "#862e9c"
  ],
  violet: [
    "#f3f0ff",
    "#e5dbff",
    "#d0bfff",
    "#b197fc",
    "#9775fa",
    "#845ef7",
    "#7950f2",
    "#7048e8",
    "#6741d9",
    "#5f3dc4"
  ],
  indigo: [
    "#edf2ff",
    "#dbe4ff",
    "#bac8ff",
    "#91a7ff",
    "#748ffc",
    "#5c7cfa",
    "#4c6ef5",
    "#4263eb",
    "#3b5bdb",
    "#364fc7"
  ],
  blue: [
    "#e7f5ff",
    "#d0ebff",
    "#a5d8ff",
    "#74c0fc",
    "#4dabf7",
    "#339af0",
    "#228be6",
    "#1c7ed6",
    "#1971c2",
    "#1864ab"
  ],
  cyan: [
    "#e3fafc",
    "#c5f6fa",
    "#99e9f2",
    "#66d9e8",
    "#3bc9db",
    "#22b8cf",
    "#15aabf",
    "#1098ad",
    "#0c8599",
    "#0b7285"
  ],
  teal: [
    "#e6fcf5",
    "#c3fae8",
    "#96f2d7",
    "#63e6be",
    "#38d9a9",
    "#20c997",
    "#12b886",
    "#0ca678",
    "#099268",
    "#087f5b"
  ],
  green: [
    "#ebfbee",
    "#d3f9d8",
    "#b2f2bb",
    "#8ce99a",
    "#69db7c",
    "#51cf66",
    "#40c057",
    "#37b24d",
    "#2f9e44",
    "#2b8a3e"
  ],
  lime: [
    "#f4fce3",
    "#e9fac8",
    "#d8f5a2",
    "#c0eb75",
    "#a9e34b",
    "#94d82d",
    "#82c91e",
    "#74b816",
    "#66a80f",
    "#5c940d"
  ],
  yellow: [
    "#fff9db",
    "#fff3bf",
    "#ffec99",
    "#ffe066",
    "#ffd43b",
    "#fcc419",
    "#fab005",
    "#f59f00",
    "#f08c00",
    "#e67700"
  ],
  orange: [
    "#fff4e6",
    "#ffe8cc",
    "#ffd8a8",
    "#ffc078",
    "#ffa94d",
    "#ff922b",
    "#fd7e14",
    "#f76707",
    "#e8590c",
    "#d9480f"
  ]
}, G0 = "-apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica, Arial, sans-serif, Apple Color Emoji, Segoe UI Emoji", mm = {
  scale: 1,
  fontSmoothing: !0,
  focusRing: "auto",
  white: "#fff",
  black: "#000",
  colors: oN,
  primaryShade: { light: 6, dark: 8 },
  primaryColor: "blue",
  variantColorResolver: rN,
  autoContrast: !1,
  luminanceThreshold: 0.3,
  fontFamily: G0,
  fontFamilyMonospace: "ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, Liberation Mono, Courier New, monospace",
  respectReducedMotion: !1,
  cursorType: "default",
  defaultGradient: { from: "blue", to: "cyan", deg: 45 },
  defaultRadius: "sm",
  activeClassName: "mantine-active",
  focusClassName: "",
  headings: {
    fontFamily: G0,
    fontWeight: "700",
    textWrap: "wrap",
    sizes: {
      h1: { fontSize: de(34), lineHeight: "1.3" },
      h2: { fontSize: de(26), lineHeight: "1.35" },
      h3: { fontSize: de(22), lineHeight: "1.4" },
      h4: { fontSize: de(18), lineHeight: "1.45" },
      h5: { fontSize: de(16), lineHeight: "1.5" },
      h6: { fontSize: de(14), lineHeight: "1.5" }
    }
  },
  fontSizes: {
    xs: de(12),
    sm: de(14),
    md: de(16),
    lg: de(18),
    xl: de(20)
  },
  lineHeights: {
    xs: "1.4",
    sm: "1.45",
    md: "1.55",
    lg: "1.6",
    xl: "1.65"
  },
  radius: {
    xs: de(2),
    sm: de(4),
    md: de(8),
    lg: de(16),
    xl: de(32)
  },
  spacing: {
    xs: de(10),
    sm: de(12),
    md: de(16),
    lg: de(20),
    xl: de(32)
  },
  breakpoints: {
    xs: "36em",
    sm: "48em",
    md: "62em",
    lg: "75em",
    xl: "88em"
  },
  shadows: {
    xs: `0 ${de(1)} ${de(3)} rgba(0, 0, 0, 0.05), 0 ${de(1)} ${de(2)} rgba(0, 0, 0, 0.1)`,
    sm: `0 ${de(1)} ${de(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${de(10)} ${de(
      15
    )} ${de(-5)}, rgba(0, 0, 0, 0.04) 0 ${de(7)} ${de(7)} ${de(-5)}`,
    md: `0 ${de(1)} ${de(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${de(20)} ${de(
      25
    )} ${de(-5)}, rgba(0, 0, 0, 0.04) 0 ${de(10)} ${de(10)} ${de(-5)}`,
    lg: `0 ${de(1)} ${de(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${de(28)} ${de(
      23
    )} ${de(-7)}, rgba(0, 0, 0, 0.04) 0 ${de(12)} ${de(12)} ${de(-7)}`,
    xl: `0 ${de(1)} ${de(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${de(36)} ${de(
      28
    )} ${de(-7)}, rgba(0, 0, 0, 0.04) 0 ${de(17)} ${de(17)} ${de(-7)}`
  },
  other: {},
  components: {}
};
function U0(e) {
  return e === "auto" || e === "dark" || e === "light";
}
function aN({
  key: e = "mantine-color-scheme-value"
} = {}) {
  let t;
  return {
    get: (n) => {
      if (typeof window > "u")
        return n;
      try {
        const i = window.localStorage.getItem(e);
        return U0(i) ? i : n;
      } catch {
        return n;
      }
    },
    set: (n) => {
      try {
        window.localStorage.setItem(e, n);
      } catch (i) {
        console.warn(
          "[@mantine/core] Local storage color scheme manager was unable to save color scheme.",
          i
        );
      }
    },
    subscribe: (n) => {
      t = (i) => {
        i.storageArea === window.localStorage && i.key === e && U0(i.newValue) && n(i.newValue);
      }, window.addEventListener("storage", t);
    },
    unsubscribe: () => {
      window.removeEventListener("storage", t);
    },
    clear: () => {
      window.localStorage.removeItem(e);
    }
  };
}
const sN = "[@mantine/core] MantineProvider: Invalid theme.primaryColor, it accepts only key of theme.colors, learn more  https://mantine.dev/theming/colors/#primary-color", Y0 = "[@mantine/core] MantineProvider: Invalid theme.primaryShade, it accepts only 0-9 integers or an object { light: 0-9, dark: 0-9 }";
function xf(e) {
  return e < 0 || e > 9 ? !1 : parseInt(e.toString(), 10) === e;
}
function K0(e) {
  if (!(e.primaryColor in e.colors))
    throw new Error(sN);
  if (typeof e.primaryShade == "object" && (!xf(e.primaryShade.dark) || !xf(e.primaryShade.light)))
    throw new Error(Y0);
  if (typeof e.primaryShade == "number" && !xf(e.primaryShade))
    throw new Error(Y0);
}
function cN(e, t) {
  var i;
  if (!t)
    return K0(e), e;
  const n = um(e, t);
  return t.fontFamily && !((i = t.headings) != null && i.fontFamily) && (n.headings.fontFamily = t.fontFamily), K0(n), n;
}
const ym = i_(null), lN = () => hd(ym) || mm;
function fa() {
  const e = hd(ym);
  if (!e)
    throw new Error(
      "@mantine/core: MantineProvider was not found in component tree, make sure you have it in your app"
    );
  return e;
}
function n1({
  theme: e,
  children: t,
  inherit: n = !0
}) {
  const i = lN(), r = qw(
    () => cN(n ? i : mm, e),
    [e, i, n]
  );
  return /* @__PURE__ */ De.jsx(ym.Provider, { value: r, children: t });
}
n1.displayName = "@mantine/core/MantineThemeProvider";
function uN() {
  const e = fa(), t = dm(), n = ar(e.breakpoints).reduce((i, r) => {
    const o = e.breakpoints[r].includes("px"), a = IO(e.breakpoints[r]), c = o ? `${a - 0.1}px` : z0(a - 0.1), l = o ? `${a}px` : z0(a);
    return `${i}@media (max-width: ${c}) {.mantine-visible-from-${r} {display: none !important;}}@media (min-width: ${l}) {.mantine-hidden-from-${r} {display: none !important;}}`;
  }, "");
  return /* @__PURE__ */ De.jsx(
    "style",
    {
      "data-mantine-styles": "classes",
      nonce: t == null ? void 0 : t(),
      dangerouslySetInnerHTML: { __html: n }
    }
  );
}
function Ef(e) {
  return Object.entries(e).map(([t, n]) => `${t}: ${n};`).join("");
}
function wf(e, t) {
  return (Array.isArray(e) ? e : [e]).reduce((i, r) => `${r}{${i}}`, t);
}
function pN(e, t) {
  const n = Ef(e.variables), i = n ? wf(t, n) : "", r = Ef(e.dark), o = r ? wf(`${t}[data-mantine-color-scheme="dark"]`, r) : "", a = Ef(e.light), c = a ? wf(`${t}[data-mantine-color-scheme="light"]`, a) : "";
  return `${i}${o}${c}`;
}
function fN({ color: e, theme: t, autoContrast: n }) {
  return (typeof n == "boolean" ? n : t.autoContrast) && kc({ color: e || t.primaryColor, theme: t }).isLight ? "var(--mantine-color-black)" : "var(--mantine-color-white)";
}
function q0(e, t) {
  return fN({
    color: e.colors[e.primaryColor][Zs(e, t)],
    theme: e,
    autoContrast: null
  });
}
function Ml({
  theme: e,
  color: t,
  colorScheme: n,
  name: i = t,
  withColorValues: r = !0
}) {
  if (!e.colors[t])
    return {};
  if (n === "light") {
    const c = Zs(e, "light"), l = {
      [`--mantine-color-${i}-text`]: `var(--mantine-color-${i}-filled)`,
      [`--mantine-color-${i}-filled`]: `var(--mantine-color-${i}-${c})`,
      [`--mantine-color-${i}-filled-hover`]: `var(--mantine-color-${i}-${c === 9 ? 8 : c + 1})`,
      [`--mantine-color-${i}-light`]: Oa(e.colors[t][c], 0.1),
      [`--mantine-color-${i}-light-hover`]: Oa(e.colors[t][c], 0.12),
      [`--mantine-color-${i}-light-color`]: `var(--mantine-color-${i}-${c})`,
      [`--mantine-color-${i}-outline`]: `var(--mantine-color-${i}-${c})`,
      [`--mantine-color-${i}-outline-hover`]: Oa(e.colors[t][c], 0.05)
    };
    return r ? {
      [`--mantine-color-${i}-0`]: e.colors[t][0],
      [`--mantine-color-${i}-1`]: e.colors[t][1],
      [`--mantine-color-${i}-2`]: e.colors[t][2],
      [`--mantine-color-${i}-3`]: e.colors[t][3],
      [`--mantine-color-${i}-4`]: e.colors[t][4],
      [`--mantine-color-${i}-5`]: e.colors[t][5],
      [`--mantine-color-${i}-6`]: e.colors[t][6],
      [`--mantine-color-${i}-7`]: e.colors[t][7],
      [`--mantine-color-${i}-8`]: e.colors[t][8],
      [`--mantine-color-${i}-9`]: e.colors[t][9],
      ...l
    } : l;
  }
  const o = Zs(e, "dark"), a = {
    [`--mantine-color-${i}-text`]: `var(--mantine-color-${i}-4)`,
    [`--mantine-color-${i}-filled`]: `var(--mantine-color-${i}-${o})`,
    [`--mantine-color-${i}-filled-hover`]: `var(--mantine-color-${i}-${o === 9 ? 8 : o + 1})`,
    [`--mantine-color-${i}-light`]: Oa(
      e.colors[t][Math.max(0, o - 2)],
      0.15
    ),
    [`--mantine-color-${i}-light-hover`]: Oa(
      e.colors[t][Math.max(0, o - 2)],
      0.2
    ),
    [`--mantine-color-${i}-light-color`]: `var(--mantine-color-${i}-${Math.max(o - 5, 0)})`,
    [`--mantine-color-${i}-outline`]: `var(--mantine-color-${i}-${Math.max(o - 4, 0)})`,
    [`--mantine-color-${i}-outline-hover`]: Oa(
      e.colors[t][Math.max(o - 4, 0)],
      0.05
    )
  };
  return r ? {
    [`--mantine-color-${i}-0`]: e.colors[t][0],
    [`--mantine-color-${i}-1`]: e.colors[t][1],
    [`--mantine-color-${i}-2`]: e.colors[t][2],
    [`--mantine-color-${i}-3`]: e.colors[t][3],
    [`--mantine-color-${i}-4`]: e.colors[t][4],
    [`--mantine-color-${i}-5`]: e.colors[t][5],
    [`--mantine-color-${i}-6`]: e.colors[t][6],
    [`--mantine-color-${i}-7`]: e.colors[t][7],
    [`--mantine-color-${i}-8`]: e.colors[t][8],
    [`--mantine-color-${i}-9`]: e.colors[t][9],
    ...a
  } : a;
}
function dN(e) {
  return !!e && typeof e == "object" && "mantine-virtual-color" in e;
}
function Na(e, t, n) {
  ar(t).forEach(
    (i) => Object.assign(e, { [`--mantine-${n}-${i}`]: t[i] })
  );
}
const i1 = (e) => {
  const t = Zs(e, "light"), n = e.defaultRadius in e.radius ? e.radius[e.defaultRadius] : de(e.defaultRadius), i = {
    variables: {
      "--mantine-scale": e.scale.toString(),
      "--mantine-cursor-type": e.cursorType,
      "--mantine-color-scheme": "light dark",
      "--mantine-webkit-font-smoothing": e.fontSmoothing ? "antialiased" : "unset",
      "--mantine-moz-font-smoothing": e.fontSmoothing ? "grayscale" : "unset",
      "--mantine-color-white": e.white,
      "--mantine-color-black": e.black,
      "--mantine-line-height": e.lineHeights.md,
      "--mantine-font-family": e.fontFamily,
      "--mantine-font-family-monospace": e.fontFamilyMonospace,
      "--mantine-font-family-headings": e.headings.fontFamily,
      "--mantine-heading-font-weight": e.headings.fontWeight,
      "--mantine-heading-text-wrap": e.headings.textWrap,
      "--mantine-radius-default": n,
      // Primary colors
      "--mantine-primary-color-filled": `var(--mantine-color-${e.primaryColor}-filled)`,
      "--mantine-primary-color-filled-hover": `var(--mantine-color-${e.primaryColor}-filled-hover)`,
      "--mantine-primary-color-light": `var(--mantine-color-${e.primaryColor}-light)`,
      "--mantine-primary-color-light-hover": `var(--mantine-color-${e.primaryColor}-light-hover)`,
      "--mantine-primary-color-light-color": `var(--mantine-color-${e.primaryColor}-light-color)`
    },
    light: {
      "--mantine-primary-color-contrast": q0(e, "light"),
      "--mantine-color-bright": "var(--mantine-color-black)",
      "--mantine-color-text": e.black,
      "--mantine-color-body": e.white,
      "--mantine-color-error": "var(--mantine-color-red-6)",
      "--mantine-color-placeholder": "var(--mantine-color-gray-5)",
      "--mantine-color-anchor": `var(--mantine-color-${e.primaryColor}-${t})`,
      "--mantine-color-default": "var(--mantine-color-white)",
      "--mantine-color-default-hover": "var(--mantine-color-gray-0)",
      "--mantine-color-default-color": "var(--mantine-color-black)",
      "--mantine-color-default-border": "var(--mantine-color-gray-4)",
      "--mantine-color-dimmed": "var(--mantine-color-gray-6)"
    },
    dark: {
      "--mantine-primary-color-contrast": q0(e, "dark"),
      "--mantine-color-bright": "var(--mantine-color-white)",
      "--mantine-color-text": "var(--mantine-color-dark-0)",
      "--mantine-color-body": "var(--mantine-color-dark-7)",
      "--mantine-color-error": "var(--mantine-color-red-8)",
      "--mantine-color-placeholder": "var(--mantine-color-dark-3)",
      "--mantine-color-anchor": `var(--mantine-color-${e.primaryColor}-4)`,
      "--mantine-color-default": "var(--mantine-color-dark-6)",
      "--mantine-color-default-hover": "var(--mantine-color-dark-5)",
      "--mantine-color-default-color": "var(--mantine-color-white)",
      "--mantine-color-default-border": "var(--mantine-color-dark-4)",
      "--mantine-color-dimmed": "var(--mantine-color-dark-2)"
    }
  };
  Na(i.variables, e.breakpoints, "breakpoint"), Na(i.variables, e.spacing, "spacing"), Na(i.variables, e.fontSizes, "font-size"), Na(i.variables, e.lineHeights, "line-height"), Na(i.variables, e.shadows, "shadow"), Na(i.variables, e.radius, "radius"), e.colors[e.primaryColor].forEach((o, a) => {
    i.variables[`--mantine-primary-color-${a}`] = `var(--mantine-color-${e.primaryColor}-${a})`;
  }), ar(e.colors).forEach((o) => {
    const a = e.colors[o];
    if (dN(a)) {
      Object.assign(
        i.light,
        Ml({
          theme: e,
          name: a.name,
          color: a.light,
          colorScheme: "light",
          withColorValues: !0
        })
      ), Object.assign(
        i.dark,
        Ml({
          theme: e,
          name: a.name,
          color: a.dark,
          colorScheme: "dark",
          withColorValues: !0
        })
      );
      return;
    }
    a.forEach((c, l) => {
      i.variables[`--mantine-color-${o}-${l}`] = c;
    }), Object.assign(
      i.light,
      Ml({
        theme: e,
        color: o,
        colorScheme: "light",
        withColorValues: !1
      })
    ), Object.assign(
      i.dark,
      Ml({
        theme: e,
        color: o,
        colorScheme: "dark",
        withColorValues: !1
      })
    );
  });
  const r = e.headings.sizes;
  return ar(r).forEach((o) => {
    i.variables[`--mantine-${o}-font-size`] = r[o].fontSize, i.variables[`--mantine-${o}-line-height`] = r[o].lineHeight, i.variables[`--mantine-${o}-font-weight`] = r[o].fontWeight || e.headings.fontWeight;
  }), i;
};
function hN({ theme: e, generator: t }) {
  const n = i1(e), i = t == null ? void 0 : t(e);
  return i ? um(n, i) : n;
}
const Sf = i1(mm);
function mN(e) {
  const t = {
    variables: {},
    light: {},
    dark: {}
  };
  return ar(e.variables).forEach((n) => {
    Sf.variables[n] !== e.variables[n] && (t.variables[n] = e.variables[n]);
  }), ar(e.light).forEach((n) => {
    Sf.light[n] !== e.light[n] && (t.light[n] = e.light[n]);
  }), ar(e.dark).forEach((n) => {
    Sf.dark[n] !== e.dark[n] && (t.dark[n] = e.dark[n]);
  }), t;
}
function yN(e) {
  return `
  ${e}[data-mantine-color-scheme="dark"] { --mantine-color-scheme: dark; }
  ${e}[data-mantine-color-scheme="light"] { --mantine-color-scheme: light; }
`;
}
function r1({
  cssVariablesSelector: e,
  deduplicateCssVariables: t
}) {
  const n = fa(), i = dm(), r = UO(), o = hN({ theme: n, generator: r }), a = e === ":root" && t, c = a ? mN(o) : o, l = pN(c, e);
  return l ? /* @__PURE__ */ De.jsx(
    "style",
    {
      "data-mantine-styles": !0,
      nonce: i == null ? void 0 : i(),
      dangerouslySetInnerHTML: {
        __html: `${l}${a ? "" : yN(e)}`
      }
    }
  ) : null;
}
r1.displayName = "@mantine/CssVariables";
function gN() {
  const e = console.error;
  console.error = (...t) => {
    t.length > 1 && typeof t[0] == "string" && t[0].toLowerCase().includes("extra attributes from the server") && typeof t[1] == "string" && t[1].toLowerCase().includes("data-mantine-color-scheme") || e(...t);
  };
}
function Ba(e, t) {
  var i;
  const n = e !== "auto" ? e : window.matchMedia("(prefers-color-scheme: dark)").matches ? "dark" : "light";
  (i = t()) == null || i.setAttribute("data-mantine-color-scheme", n);
}
function vN({
  manager: e,
  defaultColorScheme: t,
  getRootElement: n,
  forceColorScheme: i
}) {
  const r = Yo(), [o, a] = Mr(() => e.get(t)), c = i || o, l = By(
    (d) => {
      i || (Ba(d, n), a(d), e.set(d));
    },
    [e.set, c, i]
  ), u = By(() => {
    a(t), Ba(t, n), e.clear();
  }, [e.clear, t]);
  return Wi(() => (e.subscribe(l), e.unsubscribe), [e.subscribe, e.unsubscribe]), QE(() => {
    Ba(e.get(t), n);
  }, []), Wi(() => {
    var f;
    if (i)
      return Ba(i, n), () => {
      };
    i === void 0 && Ba(o, n), r.current = window.matchMedia("(prefers-color-scheme: dark)");
    const d = (y) => {
      o === "auto" && Ba(y.matches ? "dark" : "light", n);
    };
    return (f = r.current) == null || f.addEventListener("change", d), () => {
      var y;
      return (y = r.current) == null ? void 0 : y.removeEventListener("change", d);
    };
  }, [o, i]), { colorScheme: c, setColorScheme: l, clearColorScheme: u };
}
function _N({
  respectReducedMotion: e,
  getRootElement: t
}) {
  QE(() => {
    var n;
    e && ((n = t()) == null || n.setAttribute("data-respect-reduced-motion", "true"));
  }, [e]);
}
gN();
function o1({
  theme: e,
  children: t,
  getStyleNonce: n,
  withStaticClasses: i = !0,
  withGlobalClasses: r = !0,
  deduplicateCssVariables: o = !0,
  withCssVariables: a = !0,
  cssVariablesSelector: c = ":root",
  classNamesPrefix: l = "mantine",
  colorSchemeManager: u = aN(),
  defaultColorScheme: d = "light",
  getRootElement: f = () => document.documentElement,
  cssVariablesResolver: y,
  forceColorScheme: g,
  stylesTransform: _
}) {
  const { colorScheme: x, setColorScheme: w, clearColorScheme: B } = vN({
    defaultColorScheme: d,
    forceColorScheme: g,
    manager: u,
    getRootElement: f
  });
  return _N({
    respectReducedMotion: (e == null ? void 0 : e.respectReducedMotion) || !1,
    getRootElement: f
  }), /* @__PURE__ */ De.jsx(
    t1.Provider,
    {
      value: {
        colorScheme: x,
        setColorScheme: w,
        clearColorScheme: B,
        getRootElement: f,
        classNamesPrefix: l,
        getStyleNonce: n,
        cssVariablesResolver: y,
        cssVariablesSelector: c,
        withStaticClasses: i,
        stylesTransform: _
      },
      children: /* @__PURE__ */ De.jsxs(n1, { theme: e, children: [
        a && /* @__PURE__ */ De.jsx(
          r1,
          {
            cssVariablesSelector: c,
            deduplicateCssVariables: o
          }
        ),
        r && /* @__PURE__ */ De.jsx(uN, {}),
        t
      ] })
    }
  );
}
o1.displayName = "@mantine/core/MantineProvider";
const bN = {
  always: "mantine-focus-always",
  auto: "mantine-focus-auto",
  never: "mantine-focus-never"
};
function xN({ theme: e, options: t, unstyled: n }) {
  return ua(
    (t == null ? void 0 : t.focusable) && !n && (e.focusClassName || bN[e.focusRing]),
    (t == null ? void 0 : t.active) && !n && e.activeClassName
  );
}
function EN({
  selector: e,
  stylesCtx: t,
  options: n,
  props: i,
  theme: r
}) {
  return fm({
    theme: r,
    classNames: n == null ? void 0 : n.classNames,
    props: (n == null ? void 0 : n.props) || i,
    stylesCtx: t
  })[e];
}
function X0({
  selector: e,
  stylesCtx: t,
  theme: n,
  classNames: i,
  props: r
}) {
  return fm({ theme: n, classNames: i, props: r, stylesCtx: t })[e];
}
function wN({ rootSelector: e, selector: t, className: n }) {
  return e === t ? n : void 0;
}
function SN({ selector: e, classes: t, unstyled: n }) {
  return n ? void 0 : t[e];
}
function RN({
  themeName: e,
  classNamesPrefix: t,
  selector: n,
  withStaticClass: i
}) {
  return i === !1 ? [] : e.map((r) => `${t}-${r}-${n}`);
}
function CN({
  themeName: e,
  theme: t,
  selector: n,
  props: i,
  stylesCtx: r
}) {
  return e.map(
    (o) => {
      var a, c;
      return (c = fm({
        theme: t,
        classNames: (a = t.components[o]) == null ? void 0 : a.classNames,
        props: i,
        stylesCtx: r
      })) == null ? void 0 : c[n];
    }
  );
}
function AN({
  options: e,
  classes: t,
  selector: n,
  unstyled: i
}) {
  return e != null && e.variant && !i ? t[`${n}--${e.variant}`] : void 0;
}
function PN({
  theme: e,
  options: t,
  themeName: n,
  selector: i,
  classNamesPrefix: r,
  classNames: o,
  classes: a,
  unstyled: c,
  className: l,
  rootSelector: u,
  props: d,
  stylesCtx: f,
  withStaticClasses: y,
  headless: g,
  transformedStyles: _
}) {
  return ua(
    xN({ theme: e, options: t, unstyled: c || g }),
    CN({ theme: e, themeName: n, selector: i, props: d, stylesCtx: f }),
    AN({ options: t, classes: a, selector: i, unstyled: c }),
    X0({ selector: i, stylesCtx: f, theme: e, classNames: o, props: d }),
    X0({ selector: i, stylesCtx: f, theme: e, classNames: _, props: d }),
    EN({ selector: i, stylesCtx: f, options: t, props: d, theme: e }),
    wN({ rootSelector: u, selector: i, className: l }),
    SN({ selector: i, classes: a, unstyled: c || g }),
    y && !g && RN({
      themeName: n,
      classNamesPrefix: r,
      selector: i,
      withStaticClass: t == null ? void 0 : t.withStaticClass
    }),
    t == null ? void 0 : t.className
  );
}
function TN({
  theme: e,
  themeName: t,
  props: n,
  stylesCtx: i,
  selector: r
}) {
  return t.map(
    (o) => {
      var a;
      return ud({
        theme: e,
        styles: (a = e.components[o]) == null ? void 0 : a.styles,
        props: n,
        stylesCtx: i
      })[r];
    }
  ).reduce((o, a) => ({ ...o, ...a }), {});
}
function fd({ style: e, theme: t }) {
  return Array.isArray(e) ? [...e].reduce(
    (n, i) => ({ ...n, ...fd({ style: i, theme: t }) }),
    {}
  ) : typeof e == "function" ? e(t) : e ?? {};
}
function kN(e) {
  return e.reduce((t, n) => (n && Object.keys(n).forEach((i) => {
    t[i] = { ...t[i], ...pm(n[i]) };
  }), t), {});
}
function MN({
  vars: e,
  varsResolver: t,
  theme: n,
  props: i,
  stylesCtx: r,
  selector: o,
  themeName: a,
  headless: c
}) {
  var l;
  return (l = kN([
    c ? {} : t == null ? void 0 : t(n, i, r),
    ...a.map((u) => {
      var d, f, y;
      return (y = (f = (d = n.components) == null ? void 0 : d[u]) == null ? void 0 : f.vars) == null ? void 0 : y.call(f, n, i, r);
    }),
    e == null ? void 0 : e(n, i, r)
  ])) == null ? void 0 : l[o];
}
function DN({
  theme: e,
  themeName: t,
  selector: n,
  options: i,
  props: r,
  stylesCtx: o,
  rootSelector: a,
  styles: c,
  style: l,
  vars: u,
  varsResolver: d,
  headless: f,
  withStylesTransform: y
}) {
  return {
    ...!y && TN({ theme: e, themeName: t, props: r, stylesCtx: o, selector: n }),
    ...!y && ud({ theme: e, styles: c, props: r, stylesCtx: o })[n],
    ...!y && ud({ theme: e, styles: i == null ? void 0 : i.styles, props: (i == null ? void 0 : i.props) || r, stylesCtx: o })[n],
    ...MN({ theme: e, props: r, stylesCtx: o, vars: u, varsResolver: d, selector: n, themeName: t, headless: f }),
    ...a === n ? fd({ style: l, theme: e }) : null,
    ...fd({ style: i == null ? void 0 : i.style, theme: e })
  };
}
function ON({ props: e, stylesCtx: t, themeName: n }) {
  const i = fa(), r = ZO();
  return {
    getTransformedStyles: (a) => r ? [
      ...a.map(
        (l) => r(l, { props: e, theme: i, ctx: t })
      ),
      ...n.map(
        (l) => {
          var u;
          return r((u = i.components[l]) == null ? void 0 : u.styles, { props: e, theme: i, ctx: t });
        }
      )
    ].filter(Boolean) : [],
    withStylesTransform: !!r
  };
}
function yp({
  name: e,
  classes: t,
  props: n,
  stylesCtx: i,
  className: r,
  style: o,
  rootSelector: a = "root",
  unstyled: c,
  classNames: l,
  styles: u,
  vars: d,
  varsResolver: f
}) {
  const y = fa(), g = YO(), _ = KO(), x = qO(), w = (Array.isArray(e) ? e : [e]).filter((k) => k), { withStylesTransform: B, getTransformedStyles: N } = ON({
    props: n,
    stylesCtx: i,
    themeName: w
  });
  return (k, A) => ({
    className: PN({
      theme: y,
      options: A,
      themeName: w,
      selector: k,
      classNamesPrefix: g,
      classNames: l,
      classes: t,
      unstyled: c,
      className: r,
      rootSelector: a,
      props: n,
      stylesCtx: i,
      withStaticClasses: _,
      headless: x,
      transformedStyles: N([A == null ? void 0 : A.styles, u])
    }),
    style: DN({
      theme: y,
      themeName: w,
      selector: k,
      options: A,
      props: n,
      stylesCtx: i,
      rootSelector: a,
      styles: u,
      style: o,
      vars: d,
      varsResolver: f,
      headless: x,
      withStylesTransform: B
    })
  });
}
function Js(e, t, n) {
  var a;
  const i = fa(), r = (a = i.components[e]) == null ? void 0 : a.defaultProps, o = typeof r == "function" ? r(i) : r;
  return { ...t, ...o, ...pm(n) };
}
function Z0(e) {
  return ar(e).reduce(
    (t, n) => e[n] !== void 0 ? `${t}${BO(n)}:${e[n]};` : t,
    ""
  ).trim();
}
function NN({ selector: e, styles: t, media: n }) {
  const i = t ? Z0(t) : "", r = Array.isArray(n) ? n.map((o) => `@media${o.query}{${e}{${Z0(o.styles)}}}`) : [];
  return `${i ? `${e}{${i}}` : ""}${r.join("")}`.trim();
}
function BN({ selector: e, styles: t, media: n }) {
  const i = dm();
  return /* @__PURE__ */ De.jsx(
    "style",
    {
      "data-mantine-styles": "inline",
      nonce: i == null ? void 0 : i(),
      dangerouslySetInnerHTML: { __html: NN({ selector: e, styles: t, media: n }) }
    }
  );
}
function LN(e) {
  const {
    m: t,
    mx: n,
    my: i,
    mt: r,
    mb: o,
    ml: a,
    mr: c,
    me: l,
    ms: u,
    p: d,
    px: f,
    py: y,
    pt: g,
    pb: _,
    pl: x,
    pr: w,
    pe: B,
    ps: N,
    bg: k,
    c: A,
    opacity: D,
    ff: j,
    fz: W,
    fw: $,
    lts: Z,
    ta: X,
    lh: V,
    fs: ae,
    tt: ie,
    td: Ae,
    w: Rt,
    miw: it,
    maw: Ve,
    h: Zt,
    mih: sn,
    mah: Pt,
    bgsz: Kt,
    bgp: oe,
    bgr: se,
    bga: fe,
    pos: ct,
    top: Lt,
    left: Et,
    bottom: Ne,
    right: I,
    inset: E,
    display: C,
    flex: F,
    hiddenFrom: K,
    visibleFrom: ne,
    lightHidden: ke,
    darkHidden: Qe,
    sx: Ee,
    ...at
  } = e;
  return { styleProps: pm({
    m: t,
    mx: n,
    my: i,
    mt: r,
    mb: o,
    ml: a,
    mr: c,
    me: l,
    ms: u,
    p: d,
    px: f,
    py: y,
    pt: g,
    pb: _,
    pl: x,
    pr: w,
    pe: B,
    ps: N,
    bg: k,
    c: A,
    opacity: D,
    ff: j,
    fz: W,
    fw: $,
    lts: Z,
    ta: X,
    lh: V,
    fs: ae,
    tt: ie,
    td: Ae,
    w: Rt,
    miw: it,
    maw: Ve,
    h: Zt,
    mih: sn,
    mah: Pt,
    bgsz: Kt,
    bgp: oe,
    bgr: se,
    bga: fe,
    pos: ct,
    top: Lt,
    left: Et,
    bottom: Ne,
    right: I,
    inset: E,
    display: C,
    flex: F,
    hiddenFrom: K,
    visibleFrom: ne,
    lightHidden: ke,
    darkHidden: Qe,
    sx: Ee
  }), rest: at };
}
const IN = {
  m: { type: "spacing", property: "margin" },
  mt: { type: "spacing", property: "marginTop" },
  mb: { type: "spacing", property: "marginBottom" },
  ml: { type: "spacing", property: "marginLeft" },
  mr: { type: "spacing", property: "marginRight" },
  ms: { type: "spacing", property: "marginInlineStart" },
  me: { type: "spacing", property: "marginInlineEnd" },
  mx: { type: "spacing", property: "marginInline" },
  my: { type: "spacing", property: "marginBlock" },
  p: { type: "spacing", property: "padding" },
  pt: { type: "spacing", property: "paddingTop" },
  pb: { type: "spacing", property: "paddingBottom" },
  pl: { type: "spacing", property: "paddingLeft" },
  pr: { type: "spacing", property: "paddingRight" },
  ps: { type: "spacing", property: "paddingInlineStart" },
  pe: { type: "spacing", property: "paddingInlineEnd" },
  px: { type: "spacing", property: "paddingInline" },
  py: { type: "spacing", property: "paddingBlock" },
  bg: { type: "color", property: "background" },
  c: { type: "textColor", property: "color" },
  opacity: { type: "identity", property: "opacity" },
  ff: { type: "fontFamily", property: "fontFamily" },
  fz: { type: "fontSize", property: "fontSize" },
  fw: { type: "identity", property: "fontWeight" },
  lts: { type: "size", property: "letterSpacing" },
  ta: { type: "identity", property: "textAlign" },
  lh: { type: "lineHeight", property: "lineHeight" },
  fs: { type: "identity", property: "fontStyle" },
  tt: { type: "identity", property: "textTransform" },
  td: { type: "identity", property: "textDecoration" },
  w: { type: "spacing", property: "width" },
  miw: { type: "spacing", property: "minWidth" },
  maw: { type: "spacing", property: "maxWidth" },
  h: { type: "spacing", property: "height" },
  mih: { type: "spacing", property: "minHeight" },
  mah: { type: "spacing", property: "maxHeight" },
  bgsz: { type: "size", property: "backgroundSize" },
  bgp: { type: "identity", property: "backgroundPosition" },
  bgr: { type: "identity", property: "backgroundRepeat" },
  bga: { type: "identity", property: "backgroundAttachment" },
  pos: { type: "identity", property: "position" },
  top: { type: "identity", property: "top" },
  left: { type: "size", property: "left" },
  bottom: { type: "size", property: "bottom" },
  right: { type: "size", property: "right" },
  inset: { type: "size", property: "inset" },
  display: { type: "identity", property: "display" },
  flex: { type: "identity", property: "flex" }
};
function a1(e, t) {
  const n = kc({ color: e, theme: t });
  return n.color === "dimmed" ? "var(--mantine-color-dimmed)" : n.color === "bright" ? "var(--mantine-color-bright)" : n.variable ? `var(${n.variable})` : n.color;
}
function $N(e, t) {
  const n = kc({ color: e, theme: t });
  return n.isThemeColor && n.shade === void 0 ? `var(--mantine-color-${n.color}-text)` : a1(e, t);
}
const J0 = {
  text: "var(--mantine-font-family)",
  mono: "var(--mantine-font-family-monospace)",
  monospace: "var(--mantine-font-family-monospace)",
  heading: "var(--mantine-font-family-headings)",
  headings: "var(--mantine-font-family-headings)"
};
function jN(e) {
  return typeof e == "string" && e in J0 ? J0[e] : e;
}
const FN = ["h1", "h2", "h3", "h4", "h5", "h6"];
function HN(e, t) {
  return typeof e == "string" && e in t.fontSizes ? `var(--mantine-font-size-${e})` : typeof e == "string" && FN.includes(e) ? `var(--mantine-${e}-font-size)` : typeof e == "number" || typeof e == "string" ? de(e) : e;
}
function zN(e) {
  return e;
}
const VN = ["h1", "h2", "h3", "h4", "h5", "h6"];
function WN(e, t) {
  return typeof e == "string" && e in t.lineHeights ? `var(--mantine-line-height-${e})` : typeof e == "string" && VN.includes(e) ? `var(--mantine-${e}-line-height)` : e;
}
function GN(e) {
  return typeof e == "number" ? de(e) : e;
}
function UN(e, t) {
  if (typeof e == "number")
    return de(e);
  if (typeof e == "string") {
    const n = e.replace("-", "");
    if (!(n in t.spacing))
      return de(e);
    const i = `--mantine-spacing-${n}`;
    return e.startsWith("-") ? `calc(var(${i}) * -1)` : `var(${i})`;
  }
  return e;
}
const Rf = {
  color: a1,
  textColor: $N,
  fontSize: HN,
  spacing: UN,
  identity: zN,
  size: GN,
  lineHeight: WN,
  fontFamily: jN
};
function Q0(e) {
  return e.replace("(min-width: ", "").replace("em)", "");
}
function YN({
  media: e,
  ...t
}) {
  const i = Object.keys(e).sort((r, o) => Number(Q0(r)) - Number(Q0(o))).map((r) => ({ query: r, styles: e[r] }));
  return { ...t, media: i };
}
function KN(e) {
  if (typeof e != "object" || e === null)
    return !1;
  const t = Object.keys(e);
  return !(t.length === 1 && t[0] === "base");
}
function qN(e) {
  return typeof e == "object" && e !== null ? "base" in e ? e.base : void 0 : e;
}
function XN(e) {
  return typeof e == "object" && e !== null ? ar(e).filter((t) => t !== "base") : [];
}
function ZN(e, t) {
  return typeof e == "object" && e !== null && t in e ? e[t] : e;
}
function JN({
  styleProps: e,
  data: t,
  theme: n
}) {
  return YN(
    ar(e).reduce(
      (i, r) => {
        if (r === "hiddenFrom" || r === "visibleFrom" || r === "sx")
          return i;
        const o = t[r], a = Array.isArray(o.property) ? o.property : [o.property], c = qN(e[r]);
        if (!KN(e[r]))
          return a.forEach((u) => {
            i.inlineStyles[u] = Rf[o.type](c, n);
          }), i;
        i.hasResponsiveStyles = !0;
        const l = XN(e[r]);
        return a.forEach((u) => {
          c && (i.styles[u] = Rf[o.type](c, n)), l.forEach((d) => {
            const f = `(min-width: ${n.breakpoints[d]})`;
            i.media[f] = {
              ...i.media[f],
              [u]: Rf[o.type](
                ZN(e[r], d),
                n
              )
            };
          });
        }), i;
      },
      {
        hasResponsiveStyles: !1,
        styles: {},
        inlineStyles: {},
        media: {}
      }
    )
  );
}
function QN() {
  return `__m__-${Xw().replace(/:/g, "")}`;
}
function s1(e) {
  return e.startsWith("data-") ? e : `data-${e}`;
}
function eB(e) {
  return Object.keys(e).reduce((t, n) => {
    const i = e[n];
    return i === void 0 || i === "" || i === !1 || i === null || (t[s1(n)] = e[n]), t;
  }, {});
}
function c1(e) {
  return e ? typeof e == "string" ? { [s1(e)]: !0 } : Array.isArray(e) ? [...e].reduce(
    (t, n) => ({ ...t, ...c1(n) }),
    {}
  ) : eB(e) : null;
}
function dd(e, t) {
  return Array.isArray(e) ? [...e].reduce(
    (n, i) => ({ ...n, ...dd(i, t) }),
    {}
  ) : typeof e == "function" ? e(t) : e ?? {};
}
function tB({
  theme: e,
  style: t,
  vars: n,
  styleProps: i
}) {
  const r = dd(t, e), o = dd(n, e);
  return { ...r, ...o, ...i };
}
const l1 = lr(
  ({
    component: e,
    style: t,
    __vars: n,
    className: i,
    variant: r,
    mod: o,
    size: a,
    hiddenFrom: c,
    visibleFrom: l,
    lightHidden: u,
    darkHidden: d,
    renderRoot: f,
    ...y
  }, g) => {
    const _ = fa(), x = e || "div", { styleProps: w, rest: B } = LN(y), N = XO(), k = N == null ? void 0 : N(w.sx), A = QN(), D = JN({
      styleProps: w,
      theme: _,
      data: IN
    }), j = {
      ref: g,
      style: tB({
        theme: _,
        style: t,
        vars: n,
        styleProps: D.inlineStyles
      }),
      className: ua(i, k, {
        [A]: D.hasResponsiveStyles,
        "mantine-light-hidden": u,
        "mantine-dark-hidden": d,
        [`mantine-hidden-from-${c}`]: c,
        [`mantine-visible-from-${l}`]: l
      }),
      "data-variant": r,
      "data-size": JE(a) ? void 0 : a || void 0,
      ...c1(o),
      ...B
    };
    return /* @__PURE__ */ De.jsxs(De.Fragment, { children: [
      D.hasResponsiveStyles && /* @__PURE__ */ De.jsx(
        BN,
        {
          selector: `.${A}`,
          styles: D.styles,
          media: D.media
        }
      ),
      typeof f == "function" ? f(j) : /* @__PURE__ */ De.jsx(x, { ...j })
    ] });
  }
);
l1.displayName = "@mantine/core/Box";
const Fi = l1;
function u1(e) {
  return e;
}
function p1(e) {
  const t = lr(e);
  return t.extend = u1, t;
}
function f1(e) {
  const t = lr(e);
  return t.extend = u1, t;
}
var d1 = { root: "m_87cf2631" };
const nB = {
  __staticSelector: "UnstyledButton"
}, gm = f1(
  (e, t) => {
    const n = Js("UnstyledButton", nB, e), {
      className: i,
      component: r = "button",
      __staticSelector: o,
      unstyled: a,
      classNames: c,
      styles: l,
      style: u,
      ...d
    } = n, f = yp({
      name: o,
      props: n,
      classes: d1,
      className: i,
      style: u,
      classNames: c,
      styles: l,
      unstyled: a
    });
    return /* @__PURE__ */ De.jsx(
      Fi,
      {
        ...f("root", { focusable: !0 }),
        component: r,
        ref: t,
        type: r === "button" ? "button" : void 0,
        ...d
      }
    );
  }
);
gm.classes = d1;
gm.displayName = "@mantine/core/UnstyledButton";
const Ms = (e) => ({
  in: { opacity: 1, transform: "scale(1)" },
  out: { opacity: 0, transform: `scale(.9) translateY(${de(e === "bottom" ? 10 : -10)})` },
  transitionProperty: "transform, opacity"
}), Dl = {
  fade: {
    in: { opacity: 1 },
    out: { opacity: 0 },
    transitionProperty: "opacity"
  },
  "fade-up": {
    in: { opacity: 1, transform: "translateY(0)" },
    out: { opacity: 0, transform: `translateY(${de(30)}` },
    transitionProperty: "opacity, transform"
  },
  "fade-down": {
    in: { opacity: 1, transform: "translateY(0)" },
    out: { opacity: 0, transform: `translateY(${de(-30)}` },
    transitionProperty: "opacity, transform"
  },
  "fade-left": {
    in: { opacity: 1, transform: "translateX(0)" },
    out: { opacity: 0, transform: `translateX(${de(30)}` },
    transitionProperty: "opacity, transform"
  },
  "fade-right": {
    in: { opacity: 1, transform: "translateX(0)" },
    out: { opacity: 0, transform: `translateX(${de(-30)}` },
    transitionProperty: "opacity, transform"
  },
  scale: {
    in: { opacity: 1, transform: "scale(1)" },
    out: { opacity: 0, transform: "scale(0)" },
    common: { transformOrigin: "top" },
    transitionProperty: "transform, opacity"
  },
  "scale-y": {
    in: { opacity: 1, transform: "scaleY(1)" },
    out: { opacity: 0, transform: "scaleY(0)" },
    common: { transformOrigin: "top" },
    transitionProperty: "transform, opacity"
  },
  "scale-x": {
    in: { opacity: 1, transform: "scaleX(1)" },
    out: { opacity: 0, transform: "scaleX(0)" },
    common: { transformOrigin: "left" },
    transitionProperty: "transform, opacity"
  },
  "skew-up": {
    in: { opacity: 1, transform: "translateY(0) skew(0deg, 0deg)" },
    out: { opacity: 0, transform: `translateY(${de(-20)}) skew(-10deg, -5deg)` },
    common: { transformOrigin: "top" },
    transitionProperty: "transform, opacity"
  },
  "skew-down": {
    in: { opacity: 1, transform: "translateY(0) skew(0deg, 0deg)" },
    out: { opacity: 0, transform: `translateY(${de(20)}) skew(-10deg, -5deg)` },
    common: { transformOrigin: "bottom" },
    transitionProperty: "transform, opacity"
  },
  "rotate-left": {
    in: { opacity: 1, transform: "translateY(0) rotate(0deg)" },
    out: { opacity: 0, transform: `translateY(${de(20)}) rotate(-5deg)` },
    common: { transformOrigin: "bottom" },
    transitionProperty: "transform, opacity"
  },
  "rotate-right": {
    in: { opacity: 1, transform: "translateY(0) rotate(0deg)" },
    out: { opacity: 0, transform: `translateY(${de(20)}) rotate(5deg)` },
    common: { transformOrigin: "top" },
    transitionProperty: "transform, opacity"
  },
  "slide-down": {
    in: { opacity: 1, transform: "translateY(0)" },
    out: { opacity: 0, transform: "translateY(-100%)" },
    common: { transformOrigin: "top" },
    transitionProperty: "transform, opacity"
  },
  "slide-up": {
    in: { opacity: 1, transform: "translateY(0)" },
    out: { opacity: 0, transform: "translateY(100%)" },
    common: { transformOrigin: "bottom" },
    transitionProperty: "transform, opacity"
  },
  "slide-left": {
    in: { opacity: 1, transform: "translateX(0)" },
    out: { opacity: 0, transform: "translateX(100%)" },
    common: { transformOrigin: "left" },
    transitionProperty: "transform, opacity"
  },
  "slide-right": {
    in: { opacity: 1, transform: "translateX(0)" },
    out: { opacity: 0, transform: "translateX(-100%)" },
    common: { transformOrigin: "right" },
    transitionProperty: "transform, opacity"
  },
  pop: {
    ...Ms("bottom"),
    common: { transformOrigin: "center center" }
  },
  "pop-bottom-left": {
    ...Ms("bottom"),
    common: { transformOrigin: "bottom left" }
  },
  "pop-bottom-right": {
    ...Ms("bottom"),
    common: { transformOrigin: "bottom right" }
  },
  "pop-top-left": {
    ...Ms("top"),
    common: { transformOrigin: "top left" }
  },
  "pop-top-right": {
    ...Ms("top"),
    common: { transformOrigin: "top right" }
  }
}, e_ = {
  entering: "in",
  entered: "in",
  exiting: "out",
  exited: "out",
  "pre-exiting": "out",
  "pre-entering": "out"
};
function iB({
  transition: e,
  state: t,
  duration: n,
  timingFunction: i
}) {
  const r = {
    transitionDuration: `${n}ms`,
    transitionTimingFunction: i
  };
  return typeof e == "string" ? e in Dl ? {
    transitionProperty: Dl[e].transitionProperty,
    ...r,
    ...Dl[e].common,
    ...Dl[e][e_[t]]
  } : {} : {
    transitionProperty: e.transitionProperty,
    ...r,
    ...e.common,
    ...e[e_[t]]
  };
}
function rB({
  duration: e,
  exitDuration: t,
  timingFunction: n,
  mounted: i,
  onEnter: r,
  onExit: o,
  onEntered: a,
  onExited: c
}) {
  const l = fa(), u = VO(), d = l.respectReducedMotion ? u : !1, [f, y] = Mr(d ? 0 : e), [g, _] = Mr(i ? "entered" : "exited"), x = Yo(-1), w = Yo(-1), B = (N) => {
    const k = N ? r : o, A = N ? a : c;
    window.clearTimeout(x.current);
    const D = d ? 0 : N ? e : t;
    y(D), D === 0 ? (typeof k == "function" && k(), typeof A == "function" && A(), _(N ? "entered" : "exited")) : w.current = requestAnimationFrame(() => {
      Jw.flushSync(() => {
        _(N ? "pre-entering" : "pre-exiting");
      }), w.current = requestAnimationFrame(() => {
        typeof k == "function" && k(), _(N ? "entering" : "exiting"), x.current = window.setTimeout(() => {
          typeof A == "function" && A(), _(N ? "entered" : "exited");
        }, D);
      });
    });
  };
  return zO(() => {
    B(i);
  }, [i]), Wi(
    () => () => {
      window.clearTimeout(x.current), cancelAnimationFrame(w.current);
    },
    []
  ), {
    transitionDuration: f,
    transitionStatus: g,
    transitionTimingFunction: n || "ease"
  };
}
function h1({
  keepMounted: e,
  transition: t = "fade",
  duration: n = 250,
  exitDuration: i = n,
  mounted: r,
  children: o,
  timingFunction: a = "ease",
  onExit: c,
  onEntered: l,
  onEnter: u,
  onExited: d
}) {
  const { transitionDuration: f, transitionStatus: y, transitionTimingFunction: g } = rB({
    mounted: r,
    exitDuration: i,
    duration: n,
    timingFunction: a,
    onExit: c,
    onEntered: l,
    onEnter: u,
    onExited: d
  });
  return f === 0 ? r ? /* @__PURE__ */ De.jsx(De.Fragment, { children: o({}) }) : e ? o({ display: "none" }) : null : y === "exited" ? e ? o({ display: "none" }) : null : /* @__PURE__ */ De.jsx(De.Fragment, { children: o(
    iB({
      transition: t,
      duration: f,
      state: y,
      timingFunction: g
    })
  ) });
}
h1.displayName = "@mantine/core/Transition";
var Hi = { root: "m_5ae2e3c", barsLoader: "m_7a2bd4cd", bar: "m_870bb79", "bars-loader-animation": "m_5d2b3b9d", dotsLoader: "m_4e3f22d7", dot: "m_870c4af", "loader-dots-animation": "m_aac34a1", ovalLoader: "m_b34414df", "oval-loader-animation": "m_f8e89c4b" };
const oB = lr(({ className: e, ...t }, n) => /* @__PURE__ */ De.jsxs(Fi, { component: "span", className: ua(Hi.barsLoader, e), ...t, ref: n, children: [
  /* @__PURE__ */ De.jsx("span", { className: Hi.bar }),
  /* @__PURE__ */ De.jsx("span", { className: Hi.bar }),
  /* @__PURE__ */ De.jsx("span", { className: Hi.bar })
] })), aB = lr(({ className: e, ...t }, n) => /* @__PURE__ */ De.jsxs(Fi, { component: "span", className: ua(Hi.dotsLoader, e), ...t, ref: n, children: [
  /* @__PURE__ */ De.jsx("span", { className: Hi.dot }),
  /* @__PURE__ */ De.jsx("span", { className: Hi.dot }),
  /* @__PURE__ */ De.jsx("span", { className: Hi.dot })
] })), sB = lr(({ className: e, ...t }, n) => /* @__PURE__ */ De.jsx(Fi, { component: "span", className: ua(Hi.ovalLoader, e), ...t, ref: n })), m1 = {
  bars: oB,
  oval: sB,
  dots: aB
}, cB = {
  loaders: m1,
  type: "oval"
}, lB = (e, { size: t, color: n }) => ({
  root: {
    "--loader-size": Xs(t, "loader-size"),
    "--loader-color": n ? pd(n, e) : void 0
  }
}), gp = p1((e, t) => {
  const n = Js("Loader", cB, e), {
    size: i,
    color: r,
    type: o,
    vars: a,
    className: c,
    style: l,
    classNames: u,
    styles: d,
    unstyled: f,
    loaders: y,
    variant: g,
    children: _,
    ...x
  } = n, w = yp({
    name: "Loader",
    props: n,
    classes: Hi,
    className: c,
    style: l,
    classNames: u,
    styles: d,
    unstyled: f,
    vars: a,
    varsResolver: lB
  });
  return _ ? /* @__PURE__ */ De.jsx(Fi, { ...w("root"), ref: t, ...x, children: _ }) : /* @__PURE__ */ De.jsx(
    Fi,
    {
      ...w("root"),
      ref: t,
      component: y[o],
      variant: g,
      size: i,
      ...x
    }
  );
});
gp.defaultLoaders = m1;
gp.classes = Hi;
gp.displayName = "@mantine/core/Loader";
var vp = { root: "m_77c9d27d", inner: "m_80f1301b", label: "m_811560b9", section: "m_a74036a", loader: "m_a25b86ee", group: "m_80d6d844" };
const t_ = {
  orientation: "horizontal"
}, uB = (e, { borderWidth: t }) => ({
  group: { "--button-border-width": de(t) }
}), vm = p1((e, t) => {
  const n = Js("ButtonGroup", t_, e), {
    className: i,
    style: r,
    classNames: o,
    styles: a,
    unstyled: c,
    orientation: l,
    vars: u,
    borderWidth: d,
    variant: f,
    mod: y,
    ...g
  } = Js("ButtonGroup", t_, e), _ = yp({
    name: "ButtonGroup",
    props: n,
    classes: vp,
    className: i,
    style: r,
    classNames: o,
    styles: a,
    unstyled: c,
    vars: u,
    varsResolver: uB,
    rootSelector: "group"
  });
  return /* @__PURE__ */ De.jsx(
    Fi,
    {
      ..._("group"),
      ref: t,
      variant: f,
      mod: [{ "data-orientation": l }, y],
      role: "group",
      ...g
    }
  );
});
vm.classes = vp;
vm.displayName = "@mantine/core/ButtonGroup";
const pB = {
  in: { opacity: 1, transform: `translate(-50%, calc(-50% + ${de(1)}))` },
  out: { opacity: 0, transform: "translate(-50%, -200%)" },
  common: { transformOrigin: "center" },
  transitionProperty: "transform, opacity"
}, fB = {}, dB = (e, { radius: t, color: n, gradient: i, variant: r, size: o, justify: a, autoContrast: c }) => {
  const l = e.variantColorResolver({
    color: n || e.primaryColor,
    theme: e,
    gradient: i,
    variant: r || "filled",
    autoContrast: c
  });
  return {
    root: {
      "--button-justify": a,
      "--button-height": Xs(o, "button-height"),
      "--button-padding-x": Xs(o, "button-padding-x"),
      "--button-fz": o != null && o.includes("compact") ? V0(o.replace("compact-", "")) : V0(o),
      "--button-radius": t === void 0 ? void 0 : $O(t),
      "--button-bg": n || r ? l.background : void 0,
      "--button-hover": n || r ? l.hover : void 0,
      "--button-color": l.color,
      "--button-bd": n || r ? l.border : void 0,
      "--button-hover-color": n || r ? l.hoverColor : void 0
    }
  };
}, Go = f1((e, t) => {
  const n = Js("Button", fB, e), {
    style: i,
    vars: r,
    className: o,
    color: a,
    disabled: c,
    children: l,
    leftSection: u,
    rightSection: d,
    fullWidth: f,
    variant: y,
    radius: g,
    loading: _,
    loaderProps: x,
    gradient: w,
    classNames: B,
    styles: N,
    unstyled: k,
    "data-disabled": A,
    autoContrast: D,
    mod: j,
    ...W
  } = n, $ = yp({
    name: "Button",
    props: n,
    classes: vp,
    className: o,
    style: i,
    classNames: B,
    styles: N,
    unstyled: k,
    vars: r,
    varsResolver: dB
  }), Z = !!u, X = !!d;
  return /* @__PURE__ */ De.jsxs(
    gm,
    {
      ref: t,
      ...$("root", { active: !c && !_ && !A }),
      unstyled: k,
      variant: y,
      disabled: c || _,
      mod: [
        {
          disabled: c || A,
          loading: _,
          block: f,
          "with-left-section": Z,
          "with-right-section": X
        },
        j
      ],
      ...W,
      children: [
        /* @__PURE__ */ De.jsx(h1, { mounted: !!_, transition: pB, duration: 150, children: (V) => /* @__PURE__ */ De.jsx(Fi, { component: "span", ...$("loader", { style: V }), "aria-hidden": !0, children: /* @__PURE__ */ De.jsx(
          gp,
          {
            color: "var(--button-color)",
            size: "calc(var(--button-height) / 1.8)",
            ...x
          }
        ) }) }),
        /* @__PURE__ */ De.jsxs("span", { ...$("inner"), children: [
          u && /* @__PURE__ */ De.jsx(Fi, { component: "span", ...$("section"), mod: { position: "left" }, children: u }),
          /* @__PURE__ */ De.jsx(Fi, { component: "span", mod: { loading: _ }, ...$("label"), children: l }),
          d && /* @__PURE__ */ De.jsx(Fi, { component: "span", ...$("section"), mod: { position: "right" }, children: d })
        ] })
      ]
    }
  );
});
Go.classes = vp;
Go.displayName = "@mantine/core/Button";
Go.Group = vm;
/**
 * @license @tabler/icons-react v3.3.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */
var hB = {
  outline: {
    xmlns: "http://www.w3.org/2000/svg",
    width: 24,
    height: 24,
    viewBox: "0 0 24 24",
    fill: "none",
    stroke: "currentColor",
    strokeWidth: 2,
    strokeLinecap: "round",
    strokeLinejoin: "round"
  },
  filled: {
    xmlns: "http://www.w3.org/2000/svg",
    width: 24,
    height: 24,
    viewBox: "0 0 24 24",
    fill: "currentColor",
    stroke: "none"
  }
};
/**
 * @license @tabler/icons-react v3.3.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */
const _m = (e, t, n, i) => {
  const r = lr(
    ({ color: o = "currentColor", size: a = 24, stroke: c = 2, className: l, children: u, ...d }, f) => Ly(
      "svg",
      {
        ref: f,
        ...hB[e],
        width: a,
        height: a,
        className: ["tabler-icon", `tabler-icon-${t}`, l].join(" "),
        strokeWidth: c,
        stroke: o,
        ...d
      },
      [
        ...i.map(([y, g]) => Ly(y, g)),
        ...Array.isArray(u) ? u : [u]
      ]
    )
  );
  return r.displayName = `${n}`, r;
};
/**
 * @license @tabler/icons-react v3.3.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */
var mB = _m("outline", "viewfinder", "IconViewfinder", [["path", { d: "M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0", key: "svg-0" }], ["path", { d: "M12 3l0 4", key: "svg-1" }], ["path", { d: "M12 21l0 -3", key: "svg-2" }], ["path", { d: "M3 12l4 0", key: "svg-3" }], ["path", { d: "M21 12l-3 0", key: "svg-4" }], ["path", { d: "M12 12l0 .01", key: "svg-5" }]]);
/**
 * @license @tabler/icons-react v3.3.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */
var yB = _m("outline", "zoom-in", "IconZoomIn", [["path", { d: "M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0", key: "svg-0" }], ["path", { d: "M7 10l6 0", key: "svg-1" }], ["path", { d: "M10 7l0 6", key: "svg-2" }], ["path", { d: "M21 21l-6 -6", key: "svg-3" }]]);
/**
 * @license @tabler/icons-react v3.3.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */
var gB = _m("outline", "zoom-out", "IconZoomOut", [["path", { d: "M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0", key: "svg-0" }], ["path", { d: "M7 10l6 0", key: "svg-1" }], ["path", { d: "M21 21l-6 -6", key: "svg-2" }]]);
const y1 = ({
  zoomIn: e = () => {
  },
  zoomOut: t = () => {
  },
  zoomFit: n = () => {
  }
}) => /* @__PURE__ */ De.jsx(De.Fragment, { children: /* @__PURE__ */ De.jsxs(Go.Group, { orientation: "vertical", style: { width: 40 }, children: [
  e && /* @__PURE__ */ De.jsx(Go, { variant: "default", size: "compact-sm", onClick: e, children: /* @__PURE__ */ De.jsx(yB, { size: 17 }) }),
  t && /* @__PURE__ */ De.jsx(Go, { variant: "default", size: "compact-sm", onClick: t, children: /* @__PURE__ */ De.jsx(gB, { size: 17 }) }),
  n && /* @__PURE__ */ De.jsx(Go, { variant: "default", size: "compact-sm", onClick: n, children: /* @__PURE__ */ De.jsx(mB, { size: 17 }) })
] }) }), vB = ({
  useBpmnJsReact: e,
  xml: t = NO,
  height: n = 500,
  zoomActions: i = !0,
  onLoading: r = () => {
  },
  onError: o = () => {
  },
  onShown: a = () => {
  },
  click: c = () => {
  },
  dbclick: l = () => {
  },
  ...u
}, d) => {
  const f = Yo(null), [y, g] = Mr(null), [_, x] = Mr();
  Wi(() => {
    const k = f.current, A = new or({ container: k });
    return e == null || e.setBpmnModeler(A), g(A), () => y == null ? void 0 : y.destroy();
  }, []), Wi(() => {
    console.log(`my xml:${t}`), y == null || y.importXML(t), y == null || y.on("import.done", (k) => {
      const { error: A, warning: D } = k;
      if (A)
        return o(A);
      N(), a(D);
    }), y == null || y.on("element.click", (k) => {
      x(k.element), console.log("element:", k.element), c(k);
    });
  }, [y, t]), Zw(
    d,
    () => ({
      saveXml(k, A = { format: !1 }) {
        y.saveXML(A, k);
      },
      async saveXmlAsync(k, A = { format: !1 }) {
        return await y.saveXML(A, k);
      },
      importXml(k) {
        y == null || y.importXML(k);
      },
      getModeler() {
        return y;
      },
      getCanvas() {
        return y.get("canvas");
      },
      zoomIn(k = 0.1) {
        y.get("zoomScroll").stepZoom(k);
      },
      zoomOut(k = 0.1) {
        y.get("zoomScroll").stepZoom(-k);
      },
      zoomFit() {
        y.get("canvas").zoom("fit-viewport");
      },
      setColor(k, A) {
        y.get("modeling").setColor(k, A);
      },
      addMarker(k, A) {
        y.get("canvas").addMarker(k, A);
      },
      removeMarker(k, A) {
        y.get("canvas").removeMarker(k, A);
      }
    }),
    [y]
  );
  const w = () => {
    y.get("zoomScroll").stepZoom(0.1);
  }, B = () => {
    y.get("zoomScroll").stepZoom(-0.1);
  }, N = () => {
    y.get("canvas").zoom("fit-viewport");
  };
  return /* @__PURE__ */ De.jsx(De.Fragment, { children: /* @__PURE__ */ De.jsxs(
    "div",
    {
      className: "bpmn-wrapper",
      style: {
        display: "flex",
        flexDirection: "row",
        justifyContent: "flex-start"
      },
      children: [
        /* @__PURE__ */ De.jsx(
          "div",
          {
            className: "bpmn-js-react-editor-container",
            ref: f,
            style: { height: n, width: "800" }
          }
        ),
        /* @__PURE__ */ De.jsx("div", { className: "actions-wrapper", children: i && /* @__PURE__ */ De.jsx(
          y1,
          {
            zoomIn: w,
            zoomOut: B,
            zoomFit: N
          }
        ) })
      ]
    }
  ) });
}, _B = lr(vB);
var g1 = { exports: {} };
/*! bpmn-js - bpmn-navigated-viewer v17.6.0 | Copyright (c) 2014-present, camunda Services GmbH | bpmn.io/license */
(function(e, t) {
  (function(n, i) {
    e.exports = i();
  })(Qw, function() {
    function n(s, p) {
      p && (s.super_ = p, s.prototype = Object.create(p.prototype, { constructor: { value: s, enumerable: !1, writable: !0, configurable: !0 } }));
    }
    const i = Object.prototype.toString, r = Object.prototype.hasOwnProperty;
    function o(s) {
      return s === void 0;
    }
    function a(s) {
      return s !== void 0;
    }
    function c(s) {
      return i.call(s) === "[object Array]";
    }
    function l(s) {
      return i.call(s) === "[object Object]";
    }
    function u(s) {
      return i.call(s) === "[object Number]";
    }
    function d(s) {
      const p = i.call(s);
      return p === "[object Function]" || p === "[object AsyncFunction]" || p === "[object GeneratorFunction]" || p === "[object AsyncGeneratorFunction]" || p === "[object Proxy]";
    }
    function f(s) {
      return i.call(s) === "[object String]";
    }
    function y(s, p) {
      return r.call(s, p);
    }
    function g(s, p) {
      const h = A(p);
      let m;
      return x(s, function(v, b) {
        if (h(v, b))
          return m = v, !1;
      }), m;
    }
    function _(s, p) {
      const h = A(p);
      let m = [];
      return x(s, function(v, b) {
        h(v, b) && m.push(v);
      }), m;
    }
    function x(s, p) {
      let h, m;
      if (o(s))
        return;
      const v = c(s) ? j : D;
      for (let b in s)
        if (y(s, b) && (h = s[b], m = p(h, v(b)), m === !1))
          return h;
    }
    function w(s, p, h) {
      return x(s, function(m, v) {
        h = p(h, m, v);
      }), h;
    }
    function B(s, p) {
      return !!w(s, function(h, m, v) {
        return h && p(m, v);
      }, !0);
    }
    function N(s, p) {
      return !!g(s, p);
    }
    function k(s) {
      return function(p) {
        return B(s, function(h, m) {
          return p[m] === h;
        });
      };
    }
    function A(s) {
      return d(s) ? s : (p) => p === s;
    }
    function D(s) {
      return s;
    }
    function j(s) {
      return Number(s);
    }
    function W(s, p) {
      return s.bind(p);
    }
    function $(s, ...p) {
      return Object.assign(s, ...p);
    }
    var Z = 1e3;
    function X(s, p) {
      var h = this;
      p = p || Z, s.on(["render.shape", "render.connection"], p, function(m, v) {
        var b = m.type, S = v.element, M = v.gfx, O = v.attrs;
        if (h.canRender(S))
          return b === "render.shape" ? h.drawShape(M, S, O) : h.drawConnection(M, S, O);
      }), s.on(["render.getShapePath", "render.getConnectionPath"], p, function(m, v) {
        if (h.canRender(v))
          return m.type === "render.getShapePath" ? h.getShapePath(v) : h.getConnectionPath(v);
      });
    }
    function V(s, p) {
      var h = ie(s);
      return h && typeof h.$instanceOf == "function" && h.$instanceOf(p);
    }
    function ae(s, p) {
      return N(p, function(h) {
        return V(s, h);
      });
    }
    function ie(s) {
      return s && s.businessObject || s;
    }
    function Ae(s) {
      return s && s.di;
    }
    function Rt(s, p) {
      return !V(s, "bpmn:CallActivity") && (V(s, "bpmn:SubProcess") ? !(!(p = p || Ae(s)) || !V(p, "bpmndi:BPMNPlane")) || p && !!p.isExpanded : !V(s, "bpmn:Participant") || !!ie(s).processRef);
    }
    function it(s) {
      if (V(s, "bpmn:Participant") || V(s, "bpmn:Lane")) {
        var p = Ae(s).isHorizontal;
        return p === void 0 || p;
      }
    }
    function Ve(s) {
      return l(s) && y(s, "labelTarget");
    }
    X.prototype.canRender = function(s) {
    }, X.prototype.drawShape = function(s, p) {
    }, X.prototype.drawConnection = function(s, p) {
    }, X.prototype.getShapePath = function(s) {
    }, X.prototype.getConnectionPath = function(s) {
    };
    var Zt = { width: 90, height: 20 }, sn = 15;
    function Pt(s) {
      var p = s.length / 2 - 1, h = s[Math.floor(p)], m = s[Math.ceil(p + 0.01)], v = function(O) {
        var q = O.length / 2 - 1, ee = O[Math.floor(q)], pe = O[Math.ceil(q + 0.01)];
        return { x: ee.x + (pe.x - ee.x) / 2, y: ee.y + (pe.y - ee.y) / 2 };
      }(s), b = Math.atan((m.y - h.y) / (m.x - h.x)), S = v.x, M = v.y;
      return Math.abs(b) < Math.PI / 2 ? M -= sn : S += sn, { x: S, y: M };
    }
    function Kt(s, p) {
      var h, m, v, b = s.label;
      return b && b.bounds ? (v = b.bounds, m = { width: Math.max(Zt.width, v.width), height: v.height }, h = { x: v.x + v.width / 2, y: v.y + v.height / 2 }) : (h = function(S) {
        return S.waypoints ? Pt(S.waypoints) : V(S, "bpmn:Group") ? { x: S.x + S.width / 2, y: S.y + Zt.height / 2 } : { x: S.x + S.width / 2, y: S.y + S.height + Zt.height / 2 };
      }(p), m = Zt), $({ x: h.x - m.width / 2, y: h.y - m.height / 2 }, m);
    }
    function oe(s) {
      var p = s.businessObject, h = function(m) {
        return V(m, "bpmn:FlowElement") || V(m, "bpmn:Participant") || V(m, "bpmn:Lane") || V(m, "bpmn:SequenceFlow") || V(m, "bpmn:MessageFlow") || V(m, "bpmn:DataInput") || V(m, "bpmn:DataOutput") ? "name" : V(m, "bpmn:TextAnnotation") ? "text" : V(m, "bpmn:Group") ? "categoryValueRef" : void 0;
      }(p);
      if (h)
        return h === "categoryValueRef" ? function(m) {
          var v = m.categoryValueRef;
          return v && v.value || "";
        }(p) : p[h] || "";
    }
    function se(s, p) {
      return p.appendChild(function(h, m) {
        if (h.ownerDocument !== m.ownerDocument)
          try {
            return m.ownerDocument.importNode(h, !0);
          } catch {
          }
        return h;
      }(s, p));
    }
    function fe(s, p) {
      return se(p, s), s;
    }
    var ct = 2, Lt = { "alignment-baseline": 1, "baseline-shift": 1, clip: 1, "clip-path": 1, "clip-rule": 1, color: 1, "color-interpolation": 1, "color-interpolation-filters": 1, "color-profile": 1, "color-rendering": 1, cursor: 1, direction: 1, display: 1, "dominant-baseline": 1, "enable-background": 1, fill: 1, "fill-opacity": 1, "fill-rule": 1, filter: 1, "flood-color": 1, "flood-opacity": 1, font: 1, "font-family": 1, "font-size": ct, "font-size-adjust": 1, "font-stretch": 1, "font-style": 1, "font-variant": 1, "font-weight": 1, "glyph-orientation-horizontal": 1, "glyph-orientation-vertical": 1, "image-rendering": 1, kerning: 1, "letter-spacing": 1, "lighting-color": 1, marker: 1, "marker-end": 1, "marker-mid": 1, "marker-start": 1, mask: 1, opacity: 1, overflow: 1, "pointer-events": 1, "shape-rendering": 1, "stop-color": 1, "stop-opacity": 1, stroke: 1, "stroke-dasharray": 1, "stroke-dashoffset": 1, "stroke-linecap": 1, "stroke-linejoin": 1, "stroke-miterlimit": 1, "stroke-opacity": 1, "stroke-width": ct, "text-anchor": 1, "text-decoration": 1, "text-rendering": 1, "unicode-bidi": 1, visibility: 1, "word-spacing": 1, "writing-mode": 1 };
    function Et(s, p, h) {
      var m = p.replace(/([a-z])([A-Z])/g, "$1-$2").toLowerCase(), v = Lt[m];
      v ? (v === ct && typeof h == "number" && (h = String(h) + "px"), s.style[m] = h) : s.setAttributeNS(null, p, h);
    }
    function Ne(s, p, h) {
      if (typeof p == "string") {
        if (h === void 0)
          return function(m, v) {
            return Lt[v] ? m.style[v] : m.getAttributeNS(null, v);
          }(s, p);
        Et(s, p, h);
      } else
        (function(m, v) {
          var b, S, M = Object.keys(v);
          for (b = 0; S = M[b]; b++)
            Et(m, S, v[S]);
        })(s, p);
      return s;
    }
    const I = Object.prototype.toString;
    function E(s) {
      return new C(s);
    }
    function C(s) {
      if (!s || !s.nodeType)
        throw new Error("A DOM element reference is required");
      this.el = s, this.list = s.classList;
    }
    function F(s) {
      var p = s.parentNode;
      return p && p.removeChild(s), s;
    }
    function K(s) {
      for (var p; p = s.firstChild; )
        F(p);
      return s;
    }
    C.prototype.add = function(s) {
      return this.list.add(s), this;
    }, C.prototype.remove = function(s) {
      return I.call(s) == "[object RegExp]" ? this.removeMatching(s) : (this.list.remove(s), this);
    }, C.prototype.removeMatching = function(s) {
      const p = this.array();
      for (let h = 0; h < p.length; h++)
        s.test(p[h]) && this.remove(p[h]);
      return this;
    }, C.prototype.toggle = function(s, p) {
      return p !== void 0 ? p !== this.list.toggle(s, p) && this.list.toggle(s) : this.list.toggle(s), this;
    }, C.prototype.array = function() {
      return Array.from(this.list);
    }, C.prototype.has = C.prototype.contains = function(s) {
      return this.list.contains(s);
    };
    var ne = { svg: "http://www.w3.org/2000/svg" }, ke = '<svg xmlns="' + ne.svg + '"';
    function Qe(s) {
      var p = !1;
      s.substring(0, 4) === "<svg" ? s.indexOf(ne.svg) === -1 && (s = ke + s.substring(4)) : (s = ke + ">" + s + "</svg>", p = !0);
      var h = function(b) {
        var S;
        return (S = new DOMParser()).async = !1, S.parseFromString(b, "text/xml");
      }(s);
      if (!p)
        return h;
      for (var m = document.createDocumentFragment(), v = h.firstChild; v.firstChild; )
        m.appendChild(v.firstChild);
      return m;
    }
    function Ee(s, p) {
      var h;
      return s.charAt(0) === "<" ? (h = Qe(s).firstChild, h = document.importNode(h, !0)) : h = document.createElementNS(ne.svg, s), p && Ne(h, p), h;
    }
    var at = null;
    function Mt() {
      return at === null && (at = Ee("svg")), at;
    }
    function ht(s, p) {
      var h, m, v = Object.keys(p);
      for (h = 0; m = v[h]; h++)
        s[m] = p[m];
      return s;
    }
    function $n(s) {
      return Mt().createSVGTransform();
    }
    var Ii = /([&<>]{1})/g, bn = /([\n\r"]{1})/g, Be = { "&": "&amp;", "<": "&lt;", ">": "&gt;", '"': "'" };
    function ft(s, p) {
      return s.replace(p, function(h, m) {
        return Be[m] || m;
      });
    }
    function Ao(s, p) {
      var h, m, v, b, S;
      switch (s.nodeType) {
        case 3:
          p.push(ft(s.textContent, Ii));
          break;
        case 1:
          if (p.push("<", s.tagName), s.hasAttributes())
            for (h = 0, m = (v = s.attributes).length; h < m; ++h)
              b = v.item(h), p.push(" ", b.name, '="', ft(b.value, bn), '"');
          if (s.hasChildNodes()) {
            for (p.push(">"), h = 0, m = (S = s.childNodes).length; h < m; ++h)
              Ao(S.item(h), p);
            p.push("</", s.tagName, ">");
          } else
            p.push("/>");
          break;
        case 8:
          p.push("<!--", ft(s.nodeValue, Ii), "-->");
          break;
        case 4:
          p.push("<![CDATA[", s.nodeValue, "]]>");
          break;
        default:
          throw new Error("unable to handle node " + s.nodeType);
      }
      return p;
    }
    function qi(s, p) {
      return function(h) {
        for (var m = h.firstChild, v = []; m; )
          Ao(m, v), m = m.nextSibling;
        return v.join("");
      }(s);
    }
    function _p(s, p) {
      return p instanceof SVGMatrix ? s.createSVGTransformFromMatrix(p) : p;
    }
    function Hr(s, p) {
      var h = s.transform.baseVal;
      return p && (Array.isArray(p) || (p = [p]), function(m, v) {
        var b, S;
        for (m.clear(), b = 0; S = v[b]; b++)
          m.appendItem(_p(m, S));
      }(h, p)), h.consolidate();
    }
    function Xi(s) {
      return s.flat().join(",").replace(/,?([A-z]),?/g, "$1");
    }
    function Po(s) {
      return ["L", s.x, s.y];
    }
    function bp(s, p) {
      const h = s.length, m = [(v = s[0], ["M", v.x, v.y])];
      var v, b, S, M;
      for (let O = 1; O < h; O++) {
        const q = s[O - 1], ee = s[O], pe = s[O + 1];
        if (!pe || !p) {
          m.push(Po(ee));
          continue;
        }
        const be = Math.min(p, rs(ee.x - q.x, ee.y - q.y), rs(pe.x - ee.x, pe.y - ee.y));
        if (!be) {
          m.push(Po(ee));
          continue;
        }
        const Te = da(ee, q, be), Re = da(ee, q, 0.5 * be), Ie = da(ee, pe, be), re = da(ee, pe, 0.5 * be);
        m.push(Po(Te)), m.push((S = re, M = Ie, ["C", (b = Re).x, b.y, S.x, S.y, M.x, M.y]));
      }
      return m;
    }
    function da(s, p, h) {
      const m = p.x - s.x, v = p.y - s.y, b = h / rs(m, v);
      return { x: s.x + m * b, y: s.y + v * b };
    }
    function rs(s, p) {
      return Math.sqrt(Math.pow(s, 2) + Math.pow(p, 2));
    }
    function os(s, p, h) {
      u(p) && (h = p, p = null), p || (p = {});
      const m = Ee("path", p);
      return u(h) && (m.dataset.cornerRadius = String(h)), Mc(m, s);
    }
    function Mc(s, p) {
      return Ne(s, { d: Xi(bp(p, parseInt(s.dataset.cornerRadius, 10) || 0)) }), s;
    }
    var as = "hsl(225, 10%, 15%)", xp = "white";
    function ti(s, p) {
      return N(s.eventDefinitions, function(h) {
        return h.$type === p;
      });
    }
    function et(s, p, h) {
      var m = Ae(s);
      return h || m.get("color:background-color") || m.get("bioc:fill") || p || xp;
    }
    function _e(s, p, h) {
      var m = Ae(s);
      return h || m.get("color:border-color") || m.get("bioc:stroke") || p || as;
    }
    function mr(s, p, h, m) {
      var v = Ae(s).get("label");
      return m || v && v.get("color:color") || p || _e(s, h);
    }
    function yr(s, p = {}) {
      return { width: Un(s, p), height: jn(s, p) };
    }
    function Un(s, p = {}) {
      return y(p, "width") ? p.width : s.width;
    }
    function jn(s, p = {}) {
      return y(p, "height") ? p.height : s.height;
    }
    function Dc(s, p) {
      return p.forEach(function(h) {
        h && typeof h != "string" && !Array.isArray(h) && Object.keys(h).forEach(function(m) {
          if (m !== "default" && !(m in s)) {
            var v = Object.getOwnPropertyDescriptor(h, m);
            Object.defineProperty(s, m, v.get ? v : { enumerable: !0, get: function() {
              return h[m];
            } });
          }
        });
      }), Object.freeze(s);
    }
    const Ep = Object.prototype.toString, Oc = Object.prototype.hasOwnProperty;
    function Nc(s, p) {
      return Oc.call(s, p);
    }
    function Bc(s, p) {
      let h, m;
      if (s === void 0)
        return;
      const v = function(b) {
        return Ep.call(b) === "[object Array]";
      }(s) ? Lc : wp;
      for (let b in s)
        if (Nc(s, b) && (h = s[b], m = p(h, v(b)), m === !1))
          return h;
    }
    function wp(s) {
      return s;
    }
    function Lc(s) {
      return Number(s);
    }
    function Mn(s, ...p) {
      const h = s.style;
      return Bc(p, function(m) {
        m && Bc(m, function(v, b) {
          h[b] = v;
        });
      }), s;
    }
    const Sp = Object.prototype.toString;
    function To(s) {
      return new Zi(s);
    }
    function Zi(s) {
      if (!s || !s.nodeType)
        throw new Error("A DOM element reference is required");
      this.el = s, this.list = s.classList;
    }
    function Ic(s) {
      for (var p; s.childNodes.length; )
        p = s.childNodes[0], s.removeChild(p);
      return s;
    }
    function H(s, p) {
      return s && typeof s.matches == "function" && s.matches(p);
    }
    function ue(s, p, h) {
      for (var m = h ? s : s.parentNode; m && m.nodeType !== document.DOCUMENT_NODE && m.nodeType !== document.DOCUMENT_FRAGMENT_NODE; ) {
        if (H(m, p))
          return m;
        m = m.parentNode;
      }
      return H(m, p) ? m : null;
    }
    Zi.prototype.add = function(s) {
      return this.list.add(s), this;
    }, Zi.prototype.remove = function(s) {
      return Sp.call(s) == "[object RegExp]" ? this.removeMatching(s) : (this.list.remove(s), this);
    }, Zi.prototype.removeMatching = function(s) {
      const p = this.array();
      for (let h = 0; h < p.length; h++)
        s.test(p[h]) && this.remove(p[h]);
      return this;
    }, Zi.prototype.toggle = function(s, p) {
      return p !== void 0 ? p !== this.list.toggle(s, p) && this.list.toggle(s) : this.list.toggle(s), this;
    }, Zi.prototype.array = function() {
      return Array.from(this.list);
    }, Zi.prototype.has = Zi.prototype.contains = function(s) {
      return this.list.contains(s);
    };
    var Se, Ue, wt, Ct = {};
    function _t() {
      Se = window.addEventListener ? "addEventListener" : "attachEvent", Ue = window.removeEventListener ? "removeEventListener" : "detachEvent", wt = Se !== "addEventListener" ? "on" : "";
    }
    var qe = Dc({ __proto__: null, bind: Ct.bind = function(s, p, h, m) {
      return Se || _t(), s[Se](wt + p, h, m || !1), h;
    }, unbind: Ct.unbind = function(s, p, h, m) {
      return Ue || _t(), s[Ue](wt + p, h, m || !1), h;
    }, default: Ct }, [Ct]), xn = ["focus", "blur"], It, Gt = { bind: function(s, p, h, m, v) {
      return xn.indexOf(h) !== -1 && (v = !0), qe.bind(s, h, function(b) {
        var S = b.target || b.srcElement;
        b.delegateTarget = ue(S, p, !0), b.delegateTarget && m.call(s, b);
      }, v);
    }, unbind: function(s, p, h, m) {
      return xn.indexOf(p) !== -1 && (m = !0), qe.unbind(s, p, h, m);
    } }, ni = function(s, p) {
      if (typeof s != "string")
        throw new TypeError("String expected");
      p || (p = document);
      var h = /<([\w:]+)/.exec(s);
      if (!h)
        return p.createTextNode(s);
      s = s.replace(/^\s+|\s+$/g, "");
      var m = h[1];
      if (m == "body")
        return (v = p.createElement("html")).innerHTML = s, v.removeChild(v.lastChild);
      var v, b = Object.prototype.hasOwnProperty.call(Dt, m) ? Dt[m] : Dt._default, S = b[0], M = b[1], O = b[2];
      for ((v = p.createElement("div")).innerHTML = M + s + O; S--; )
        v = v.lastChild;
      if (v.firstChild == v.lastChild)
        return v.removeChild(v.firstChild);
      for (var q = p.createDocumentFragment(); v.firstChild; )
        q.appendChild(v.removeChild(v.firstChild));
      return q;
    }, gr = !1;
    typeof document < "u" && ((It = document.createElement("div")).innerHTML = '  <link/><table></table><a href="/a">a</a><input type="checkbox"/>', gr = !It.getElementsByTagName("link").length, It = void 0);
    var Dt = { legend: [1, "<fieldset>", "</fieldset>"], tr: [2, "<table><tbody>", "</tbody></table>"], col: [2, "<table><tbody></tbody><colgroup>", "</colgroup></table>"], _default: gr ? [1, "X<div>", "</div>"] : [0, "", ""] };
    Dt.td = Dt.th = [3, "<table><tbody><tr>", "</tr></tbody></table>"], Dt.option = Dt.optgroup = [1, '<select multiple="multiple">', "</select>"], Dt.thead = Dt.tbody = Dt.colgroup = Dt.caption = Dt.tfoot = [1, "<table>", "</table>"], Dt.polyline = Dt.ellipse = Dt.polygon = Dt.circle = Dt.text = Dt.line = Dt.path = Dt.rect = Dt.g = [1, '<svg xmlns="http://www.w3.org/2000/svg" version="1.1">', "</svg>"];
    var $t = ni;
    function Yn(s, p) {
      return (p = p || document).querySelector(s);
    }
    function ha(s) {
      s.parentNode && s.parentNode.removeChild(s);
    }
    function ss(s, p, h, m, v) {
      var b = $n();
      b.setTranslate(p, h);
      var S = $n();
      S.setRotate(m || 0, 0, 0);
      var M = $n();
      M.setScale(1, 1), Hr(s, [b, S, M]);
    }
    function bm(s, p, h) {
      var m = $n();
      m.setTranslate(p, h), Hr(s, m);
    }
    var v1 = function(s, p) {
      return s(p = { exports: {} }, p.exports), p.exports;
    }(function(s) {
      var p = s.exports = function(h, m) {
        if (m || (m = 16), h === void 0 && (h = 128), h <= 0)
          return "0";
        for (var v = Math.log(Math.pow(2, h)) / Math.log(m), b = 2; v === 1 / 0; b *= 2)
          v = Math.log(Math.pow(2, h / b)) / Math.log(m) * b;
        var S = v - Math.floor(v), M = "";
        for (b = 0; b < Math.floor(v); b++)
          M = Math.floor(Math.random() * m).toString(m) + M;
        if (S) {
          var O = Math.pow(m, S);
          M = Math.floor(Math.random() * O).toString(m) + M;
        }
        var q = parseInt(M, m);
        return q !== 1 / 0 && q >= Math.pow(2, h) ? p(h, m) : M;
      };
      p.rack = function(h, m, v) {
        var b = function(M) {
          var O = 0;
          do {
            if (O++ > 10) {
              if (!v)
                throw new Error("too many ID collisions, use more bits");
              h += v;
            }
            var q = p(h, m);
          } while (Object.hasOwnProperty.call(S, q));
          return S[q] = M, q;
        }, S = b.hats = {};
        return b.get = function(M) {
          return b.hats[M];
        }, b.set = function(M, O) {
          return b.hats[M] = O, b;
        }, b.bits = h || 128, b.base = m || 16, b;
      };
    });
    function vr(s) {
      if (!(this instanceof vr))
        return new vr(s);
      s = s || [128, 36, 1], this._seed = s.length ? v1.rack(s[0], s[1], s[2]) : s;
    }
    vr.prototype.next = function(s) {
      return this._seed(s || !0);
    }, vr.prototype.nextPrefixed = function(s, p) {
      var h;
      do
        h = s + this.next(!0);
      while (this.assigned(h));
      return this.claim(h, p), h;
    }, vr.prototype.claim = function(s, p) {
      this._seed.set(s, p || !0);
    }, vr.prototype.assigned = function(s) {
      return this._seed.get(s) || !1;
    }, vr.prototype.unclaim = function(s) {
      delete this._seed.hats[s];
    }, vr.prototype.clear = function() {
      var s, p = this._seed.hats;
      for (s in p)
        this.unclaim(s);
    };
    var _1 = new vr(), ma = 0.95;
    function ko(s, p, h, m, v, b, S) {
      X.call(this, p, S);
      var M = s && s.defaultFillColor, O = s && s.defaultStrokeColor, q = s && s.defaultLabelColor, ee = _1.next(), pe = {};
      function be(L) {
        return h.computeStyle(L, { strokeLinecap: "round", strokeLinejoin: "round", stroke: as, strokeWidth: 2, fill: "white" });
      }
      function Te(L) {
        return h.computeStyle(L, ["no-fill"], { strokeLinecap: "round", strokeLinejoin: "round", stroke: as, strokeWidth: 2 });
      }
      function Re(L, R) {
        var { ref: T = { x: 0, y: 0 }, scale: G = 1, element: Q } = R, xe = Ee("marker", { id: L, viewBox: "0 0 20 20", refX: T.x, refY: T.y, markerWidth: 20 * G, markerHeight: 20 * G, orient: "auto" });
        fe(xe, Q);
        var Ge = Yn("defs", v._svg);
        Ge || (Ge = Ee("defs"), fe(v._svg, Ge)), fe(Ge, xe), pe[L] = xe;
      }
      function Ie(L) {
        return L.replace(/[^0-9a-zA-Z]+/g, "_");
      }
      function re(L, R, T) {
        var G = L + "-" + Ie(R) + "-" + Ie(T) + "-" + ee;
        return pe[G] || function(Q, xe, Ge, ut) {
          xe === "sequenceflow-end" && Re(Q, { element: Ee("path", { d: "M 1 5 L 11 10 L 1 15 Z", ...be({ fill: ut, stroke: ut, strokeWidth: 1 }) }), ref: { x: 11, y: 10 }, scale: 0.5 }), xe === "messageflow-start" && Re(Q, { element: Ee("circle", { cx: 6, cy: 6, r: 3.5, ...be({ fill: Ge, stroke: ut, strokeWidth: 1, strokeDasharray: [1e4, 1] }) }), ref: { x: 6, y: 6 } }), xe === "messageflow-end" && Re(Q, { element: Ee("path", { d: "m 1 5 l 0 -3 l 7 3 l -7 3 z", ...be({ fill: Ge, stroke: ut, strokeWidth: 1, strokeDasharray: [1e4, 1] }) }), ref: { x: 8.5, y: 5 } }), xe === "association-start" && Re(Q, { element: Ee("path", { d: "M 11 5 L 1 10 L 11 15", ...Te({ fill: "none", stroke: ut, strokeWidth: 1.5, strokeDasharray: [1e4, 1] }) }), ref: { x: 1, y: 10 }, scale: 0.5 }), xe === "association-end" && Re(Q, { element: Ee("path", { d: "M 1 5 L 11 10 L 1 15", ...Te({ fill: "none", stroke: ut, strokeWidth: 1.5, strokeDasharray: [1e4, 1] }) }), ref: { x: 11, y: 10 }, scale: 0.5 }), xe === "conditional-flow-marker" && Re(Q, { element: Ee("path", { d: "M 0 10 L 8 6 L 16 10 L 8 14 Z", ...be({ fill: Ge, stroke: ut }) }), ref: { x: -1, y: 10 }, scale: 0.5 }), xe === "conditional-default-flow-marker" && Re(Q, { element: Ee("path", { d: "M 6 4 L 10 16", ...be({ stroke: ut }) }), ref: { x: 0, y: 10 }, scale: 0.5 });
        }(G, L, R, T), "url(#" + G + ")";
      }
      function ve(L, R, T, G, Q = {}) {
        l(G) && (Q = G, G = 0), G = G || 0, Q = be(Q);
        var xe = Ee("circle", { cx: R / 2, cy: T / 2, r: Math.round((R + T) / 4 - G), ...Q });
        return fe(L, xe), xe;
      }
      function Y(L, R, T, G, Q, xe) {
        l(Q) && (xe = Q, Q = 0), Q = Q || 0, xe = be(xe);
        var Ge = Ee("rect", { x: Q, y: Q, width: R - 2 * Q, height: T - 2 * Q, rx: G, ry: G, ...xe });
        return fe(L, Ge), Ge;
      }
      function te(L, R, T, G) {
        var Q = os(R, T = Te(T), G);
        return fe(L, Q), Q;
      }
      function J(L, R, T) {
        return te(L, R, T, 5);
      }
      function ce(L, R, T) {
        T = Te(T);
        var G = Ee("path", { ...T, d: R });
        return fe(L, G), G;
      }
      function ge(L, R, T, G) {
        return ce(R, T, $({ "data-marker": L }, G));
      }
      function Je(L) {
        return yi[L];
      }
      function We(L) {
        return function(R, T, G) {
          return Je(L)(R, T, G);
        };
      }
      var Oe = function(L, R, T = {}, G) {
        return ce(L, m.getScaledPath("EVENT_MESSAGE", { xScaleFactor: 0.9, yScaleFactor: 0.9, containerWidth: R.width, containerHeight: R.height, position: { mx: 0.235, my: 0.315 } }), { fill: G ? _e(R, O, T.stroke) : et(R, M, T.fill), stroke: G ? et(R, M, T.fill) : _e(R, O, T.stroke), strokeWidth: 1 });
      }, Ft = function(L, R, T = {}) {
        var G = ve(L, R.width, R.height, 0.2 * R.height, { fill: et(R, M, T.fill), stroke: _e(R, O, T.stroke), strokeWidth: 2 });
        ce(L, m.getScaledPath("EVENT_TIMER_WH", { xScaleFactor: 0.75, yScaleFactor: 0.75, containerWidth: R.width, containerHeight: R.height, position: { mx: 0.5, my: 0.5 } }), { stroke: _e(R, O, T.stroke), strokeWidth: 2 });
        for (var Q = 0; Q < 12; Q++) {
          var xe = m.getScaledPath("EVENT_TIMER_LINE", { xScaleFactor: 0.75, yScaleFactor: 0.75, containerWidth: R.width, containerHeight: R.height, position: { mx: 0.5, my: 0.5 } }), Ge = R.width / 2, ut = R.height / 2;
          ce(L, xe, { strokeWidth: 1, stroke: _e(R, O, T.stroke), transform: "rotate(" + 30 * Q + "," + ut + "," + Ge + ")" });
        }
        return G;
      }, ye = function(L, R, T = {}, G) {
        return ce(L, m.getScaledPath("EVENT_ESCALATION", { xScaleFactor: 1, yScaleFactor: 1, containerWidth: R.width, containerHeight: R.height, position: { mx: 0.5, my: 0.2 } }), { fill: G ? _e(R, O, T.stroke) : et(R, M, T.fill), stroke: _e(R, O, T.stroke), strokeWidth: 1 });
      }, me = function(L, R, T = {}) {
        return ce(L, m.getScaledPath("EVENT_CONDITIONAL", { xScaleFactor: 1, yScaleFactor: 1, containerWidth: R.width, containerHeight: R.height, position: { mx: 0.5, my: 0.222 } }), { fill: et(R, M, T.fill), stroke: _e(R, O, T.stroke), strokeWidth: 1 });
      }, He = function(L, R, T = {}, G) {
        return ce(L, m.getScaledPath("EVENT_LINK", { xScaleFactor: 1, yScaleFactor: 1, containerWidth: R.width, containerHeight: R.height, position: { mx: 0.57, my: 0.263 } }), { fill: G ? _e(R, O, T.stroke) : et(R, M, T.fill), stroke: _e(R, O, T.stroke), strokeWidth: 1 });
      }, nt = function(L, R, T = {}, G) {
        return ce(L, m.getScaledPath("EVENT_ERROR", { xScaleFactor: 1.1, yScaleFactor: 1.1, containerWidth: R.width, containerHeight: R.height, position: { mx: 0.2, my: 0.722 } }), { fill: G ? _e(R, O, T.stroke) : et(R, M, T.fill), stroke: _e(R, O, T.stroke), strokeWidth: 1 });
      }, st = function(L, R, T = {}, G) {
        var Q = ce(L, m.getScaledPath("EVENT_CANCEL_45", { xScaleFactor: 1, yScaleFactor: 1, containerWidth: R.width, containerHeight: R.height, position: { mx: 0.638, my: -0.055 } }), { fill: G ? _e(R, O, T.stroke) : "none", stroke: _e(R, O, T.stroke), strokeWidth: 1 });
        return function(xe, Ge) {
          var ut = $n();
          ut.setRotate(Ge, 0, 0), Hr(xe, ut);
        }(Q, 45), Q;
      }, mi = function(L, R, T = {}, G) {
        return ce(L, m.getScaledPath("EVENT_COMPENSATION", { xScaleFactor: 1, yScaleFactor: 1, containerWidth: R.width, containerHeight: R.height, position: { mx: 0.22, my: 0.5 } }), { fill: G ? _e(R, O, T.stroke) : et(R, M, T.fill), stroke: _e(R, O, T.stroke), strokeWidth: 1 });
      }, Nt = function(L, R, T = {}, G) {
        return ce(L, m.getScaledPath("EVENT_SIGNAL", { xScaleFactor: 0.9, yScaleFactor: 0.9, containerWidth: R.width, containerHeight: R.height, position: { mx: 0.5, my: 0.2 } }), { strokeWidth: 1, fill: G ? _e(R, O, T.stroke) : et(R, M, T.fill), stroke: _e(R, O, T.stroke) });
      }, ji = function(L, R, T = {}, G) {
        return ce(L, m.getScaledPath("EVENT_MULTIPLE", { xScaleFactor: 1.1, yScaleFactor: 1.1, containerWidth: R.width, containerHeight: R.height, position: { mx: 0.222, my: 0.36 } }), { fill: G ? _e(R, O, T.stroke) : et(R, M, T.fill), strokeWidth: 1 });
      }, Si = function(L, R, T = {}) {
        return ce(L, m.getScaledPath("EVENT_PARALLEL_MULTIPLE", { xScaleFactor: 1.2, yScaleFactor: 1.2, containerWidth: R.width, containerHeight: R.height, position: { mx: 0.458, my: 0.194 } }), { fill: et(R, M, T.fill), stroke: _e(R, O, T.stroke), strokeWidth: 1 });
      }, wn = function(L, R, T = {}) {
        return ve(L, R.width, R.height, 8, { fill: _e(R, O, T.stroke), stroke: _e(R, O, T.stroke), strokeWidth: 4 });
      };
      function Xn(L, R, T = {}) {
        var G = ie(L), Q = function(xe) {
          return xe.$type === "bpmn:IntermediateThrowEvent" || xe.$type === "bpmn:EndEvent";
        }(G);
        return G.get("eventDefinitions") && G.get("eventDefinitions").length > 1 ? G.get("parallelMultiple") ? Si(R, L, T) : ji(R, L, T, Q) : ti(G, "bpmn:MessageEventDefinition") ? Oe(R, L, T, Q) : ti(G, "bpmn:TimerEventDefinition") ? Ft(R, L, T) : ti(G, "bpmn:ConditionalEventDefinition") ? me(R, L, T) : ti(G, "bpmn:SignalEventDefinition") ? Nt(R, L, T, Q) : ti(G, "bpmn:EscalationEventDefinition") ? ye(R, L, T, Q) : ti(G, "bpmn:LinkEventDefinition") ? He(R, L, T, Q) : ti(G, "bpmn:ErrorEventDefinition") ? nt(R, L, T, Q) : ti(G, "bpmn:CancelEventDefinition") ? st(R, L, T, Q) : ti(G, "bpmn:CompensateEventDefinition") ? mi(R, L, T, Q) : ti(G, "bpmn:TerminateEventDefinition") ? wn(R, L, T) : null;
      }
      var St = { ParticipantMultiplicityMarker: function(L, R, T = {}) {
        var G = Un(R, T), Q = jn(R, T);
        ge("participant-multiplicity", L, m.getScaledPath("MARKER_PARALLEL", { xScaleFactor: 1, yScaleFactor: 1, containerWidth: G, containerHeight: Q, position: { mx: (G / 2 - 6) / G, my: (Q - 15) / Q } }), { strokeWidth: 2, fill: et(R, M, T.fill), stroke: _e(R, O, T.stroke) });
      }, SubProcessMarker: function(L, R, T = {}) {
        bm(Y(L, 14, 14, 0, { strokeWidth: 1, fill: et(R, M, T.fill), stroke: _e(R, O, T.stroke) }), R.width / 2 - 7.5, R.height - 20), ge("sub-process", L, m.getScaledPath("MARKER_SUB_PROCESS", { xScaleFactor: 1.5, yScaleFactor: 1.5, containerWidth: R.width, containerHeight: R.height, position: { mx: (R.width / 2 - 7.5) / R.width, my: (R.height - 20) / R.height } }), { fill: et(R, M, T.fill), stroke: _e(R, O, T.stroke) });
      }, ParallelMarker: function(L, R, T) {
        var G = Un(R, T), Q = jn(R, T);
        ge("parallel", L, m.getScaledPath("MARKER_PARALLEL", { xScaleFactor: 1, yScaleFactor: 1, containerWidth: G, containerHeight: Q, position: { mx: (G / 2 + T.parallel) / G, my: (Q - 20) / Q } }), { fill: et(R, M, T.fill), stroke: _e(R, O, T.stroke) });
      }, SequentialMarker: function(L, R, T) {
        ge("sequential", L, m.getScaledPath("MARKER_SEQUENTIAL", { xScaleFactor: 1, yScaleFactor: 1, containerWidth: R.width, containerHeight: R.height, position: { mx: (R.width / 2 + T.seq) / R.width, my: (R.height - 19) / R.height } }), { fill: et(R, M, T.fill), stroke: _e(R, O, T.stroke) });
      }, CompensationMarker: function(L, R, T) {
        ge("compensation", L, m.getScaledPath("MARKER_COMPENSATION", { xScaleFactor: 1, yScaleFactor: 1, containerWidth: R.width, containerHeight: R.height, position: { mx: (R.width / 2 + T.compensation) / R.width, my: (R.height - 13) / R.height } }), { strokeWidth: 1, fill: et(R, M, T.fill), stroke: _e(R, O, T.stroke) });
      }, LoopMarker: function(L, R, T) {
        var G = Un(R, T), Q = jn(R, T);
        ge("loop", L, m.getScaledPath("MARKER_LOOP", { xScaleFactor: 1, yScaleFactor: 1, containerWidth: G, containerHeight: Q, position: { mx: (G / 2 + T.loop) / G, my: (Q - 7) / Q } }), { strokeWidth: 1.5, fill: "none", stroke: _e(R, O, T.stroke), strokeMiterlimit: 0.5 });
      }, AdhocMarker: function(L, R, T) {
        var G = Un(R, T), Q = jn(R, T);
        ge("adhoc", L, m.getScaledPath("MARKER_ADHOC", { xScaleFactor: 1, yScaleFactor: 1, containerWidth: G, containerHeight: Q, position: { mx: (G / 2 + T.adhoc) / G, my: (Q - 15) / Q } }), { strokeWidth: 1, fill: _e(R, O, T.stroke), stroke: _e(R, O, T.stroke) });
      } };
      function lt(L, R, T, G) {
        St[L](R, T, G);
      }
      function wa(L, R, T, G = {}) {
        G = { fill: G.fill, stroke: G.stroke, width: Un(R, G), height: jn(R, G) };
        var Q = ie(R), xe = T && T.includes("SubProcessMarker");
        G = xe ? { ...G, seq: -21, parallel: -22, compensation: -42, loop: -18, adhoc: 10 } : { ...G, seq: -5, parallel: -6, compensation: -27, loop: 0, adhoc: 10 }, x(T, function(Yt) {
          lt(Yt, L, R, G);
        }), Q.get("isForCompensation") && lt("CompensationMarker", L, R, G), V(Q, "bpmn:AdHocSubProcess") && lt("AdhocMarker", L, R, G);
        var Ge = Q.get("loopCharacteristics"), ut = Ge && Ge.get("isSequential");
        Ge && (ut === void 0 && lt("LoopMarker", L, R, G), ut === !1 && lt("ParallelMarker", L, R, G), ut === !0 && lt("SequentialMarker", L, R, G));
      }
      function Qi(L, R, T = {}) {
        T = $({ size: { width: 100 } }, T);
        var G = b.createText(R || "", T);
        return E(G).add("djs-label"), fe(L, G), G;
      }
      function Sa(L, R, T, G = {}) {
        var Q = ie(R), xe = yr({ x: R.x, y: R.y, width: R.width, height: R.height }, G);
        return Qi(L, Q.name, { align: T, box: xe, padding: 7, style: { fill: mr(R, q, O, G.stroke) } });
      }
      function tl(L, R, T, G = {}) {
        var Q = it(T), xe = Qi(L, R, { box: { height: 30, width: Q ? jn(T, G) : Un(T, G) }, align: "center-middle", style: { fill: mr(T, q, O, G.stroke) } });
        Q && ss(xe, 0, -(-1 * jn(T, G)), 270);
      }
      function zn(L, R, T = {}) {
        var { width: G, height: Q } = yr(R, T);
        return Y(L, G, Q, 10, { ...T, fill: et(R, M, T.fill), fillOpacity: ma, stroke: _e(R, O, T.stroke) });
      }
      function On(L, R, T = {}) {
        var G = ie(R), Q = et(R, M, T.fill), xe = _e(R, O, T.stroke);
        return G.get("associationDirection") !== "One" && G.get("associationDirection") !== "Both" || (T.markerEnd = re("association-end", Q, xe)), G.get("associationDirection") === "Both" && (T.markerStart = re("association-start", Q, xe)), T = mt(T, ["markerStart", "markerEnd"]), J(L, R.waypoints, { ...T, stroke: xe, strokeDasharray: "0, 5" });
      }
      function Ut(L, R, T = {}) {
        var G = et(R, M, T.fill), Q = _e(R, O, T.stroke), xe = ce(L, m.getScaledPath("DATA_OBJECT_PATH", { xScaleFactor: 1, yScaleFactor: 1, containerWidth: R.width, containerHeight: R.height, position: { mx: 0.474, my: 0.296 } }), { fill: G, fillOpacity: ma, stroke: Q });
        return function(Ge) {
          var ut = Ge.dataObjectRef;
          return Ge.isCollection || ut && ut.isCollection;
        }(ie(R)) && ce(L, m.getScaledPath("DATA_OBJECT_COLLECTION_PATH", { xScaleFactor: 1, yScaleFactor: 1, containerWidth: R.width, containerHeight: R.height, position: { mx: 0.33, my: (R.height - 18) / R.height } }), { strokeWidth: 2, fill: G, stroke: Q }), xe;
      }
      function ri(L, R, T = {}) {
        return ve(L, R.width, R.height, { fillOpacity: ma, ...T, fill: et(R, M, T.fill), stroke: _e(R, O, T.stroke) });
      }
      function Sn(L, R, T = {}) {
        return function(G, Q, xe, Ge) {
          var ut = Q / 2, Yt = xe / 2, ms = [{ x: ut, y: 0 }, { x: Q, y: Yt }, { x: ut, y: xe }, { x: 0, y: Yt }].map(function(nl) {
            return nl.x + "," + nl.y;
          }).join(" ");
          Ge = be(Ge);
          var Yr = Ee("polygon", { ...Ge, points: ms });
          return fe(G, Yr), Yr;
        }(L, R.width, R.height, { fill: et(R, M, T.fill), fillOpacity: ma, stroke: _e(R, O, T.stroke) });
      }
      function Bt(L, R, T = {}) {
        var G = Y(L, Un(R, T), jn(R, T), 0, { fill: et(R, M, T.fill), fillOpacity: T.fillOpacity || ma, stroke: _e(R, O, T.stroke), strokeWidth: 1.5 }), Q = ie(R);
        return V(Q, "bpmn:Lane") && tl(L, Q.get("name"), R, T), G;
      }
      function Rn(L, R, T = {}) {
        var G = zn(L, R, T);
        (function(xe) {
          return xe && !!ie(xe).triggeredByEvent;
        })(R) && Ne(G, { strokeDasharray: "0, 5.5", strokeWidth: 2.5 });
        var Q = Rt(R);
        return Sa(L, R, Q ? "center-top" : "center-middle", T), wa(L, R, Q ? void 0 : ["SubProcessMarker"], T), G;
      }
      function xt(L, R, T = {}) {
        var G = zn(L, R, T);
        return Sa(L, R, "center-middle", T), wa(L, R, void 0, T), G;
      }
      var yi = this.handlers = { "bpmn:AdHocSubProcess": function(L, R, T = {}) {
        return Rn(L, R, T = Rt(R) ? mt(T, ["fill", "stroke", "width", "height"]) : mt(T, ["fill", "stroke"]));
      }, "bpmn:Association": function(L, R, T = {}) {
        return On(L, R, T = mt(T, ["fill", "stroke"]));
      }, "bpmn:BoundaryEvent": function(L, R, T = {}) {
        var { renderIcon: G = !0 } = T;
        T = mt(T, ["fill", "stroke"]);
        var Q = ie(R).get("cancelActivity");
        T = { strokeWidth: 1.5, fill: et(R, M, T.fill), fillOpacity: 1, stroke: _e(R, O, T.stroke) }, Q || (T.strokeDasharray = "6");
        var xe = ri(L, R, T);
        return ve(L, R.width, R.height, 3, { ...T, fill: "none" }), G && Xn(R, L, T), xe;
      }, "bpmn:BusinessRuleTask": function(L, R, T = {}) {
        var G = xt(L, R, T = mt(T, ["fill", "stroke"]));
        return Ne(ce(L, m.getScaledPath("TASK_TYPE_BUSINESS_RULE_MAIN", { abspos: { x: 8, y: 8 } })), { fill: et(R, M, T.fill), stroke: _e(R, O, T.stroke), strokeWidth: 1 }), Ne(ce(L, m.getScaledPath("TASK_TYPE_BUSINESS_RULE_HEADER", { abspos: { x: 8, y: 8 } })), { fill: _e(R, O, T.stroke), stroke: _e(R, O, T.stroke), strokeWidth: 1 }), G;
      }, "bpmn:CallActivity": function(L, R, T = {}) {
        return T = mt(T, ["fill", "stroke"]), Rn(L, R, { strokeWidth: 5, ...T });
      }, "bpmn:ComplexGateway": function(L, R, T = {}) {
        var G = Sn(L, R, T = mt(T, ["fill", "stroke"]));
        return ce(L, m.getScaledPath("GATEWAY_COMPLEX", { xScaleFactor: 0.5, yScaleFactor: 0.5, containerWidth: R.width, containerHeight: R.height, position: { mx: 0.46, my: 0.26 } }), { fill: _e(R, O, T.stroke), stroke: _e(R, O, T.stroke), strokeWidth: 1 }), G;
      }, "bpmn:DataInput": function(L, R, T = {}) {
        T = mt(T, ["fill", "stroke"]);
        var G = m.getRawPath("DATA_ARROW"), Q = Ut(L, R, T);
        return ce(L, G, { fill: "none", stroke: _e(R, O, T.stroke), strokeWidth: 1 }), Q;
      }, "bpmn:DataInputAssociation": function(L, R, T = {}) {
        return T = mt(T, ["fill", "stroke"]), On(L, R, { ...T, markerEnd: re("association-end", et(R, M, T.fill), _e(R, O, T.stroke)) });
      }, "bpmn:DataObject": function(L, R, T = {}) {
        return Ut(L, R, T = mt(T, ["fill", "stroke"]));
      }, "bpmn:DataObjectReference": We("bpmn:DataObject"), "bpmn:DataOutput": function(L, R, T = {}) {
        T = mt(T, ["fill", "stroke"]);
        var G = m.getRawPath("DATA_ARROW"), Q = Ut(L, R, T);
        return ce(L, G, { strokeWidth: 1, fill: et(R, M, T.fill), stroke: _e(R, O, T.stroke) }), Q;
      }, "bpmn:DataOutputAssociation": function(L, R, T = {}) {
        return T = mt(T, ["fill", "stroke"]), On(L, R, { ...T, markerEnd: re("association-end", et(R, M, T.fill), _e(R, O, T.stroke)) });
      }, "bpmn:DataStoreReference": function(L, R, T = {}) {
        return T = mt(T, ["fill", "stroke"]), ce(L, m.getScaledPath("DATA_STORE", { xScaleFactor: 1, yScaleFactor: 1, containerWidth: R.width, containerHeight: R.height, position: { mx: 0, my: 0.133 } }), { fill: et(R, M, T.fill), fillOpacity: ma, stroke: _e(R, O, T.stroke), strokeWidth: 2 });
      }, "bpmn:EndEvent": function(L, R, T = {}) {
        var { renderIcon: G = !0 } = T;
        T = mt(T, ["fill", "stroke"]);
        var Q = ri(L, R, { ...T, strokeWidth: 4 });
        return G && Xn(R, L, T), Q;
      }, "bpmn:EventBasedGateway": function(L, R, T = {}) {
        T = mt(T, ["fill", "stroke"]);
        var G = ie(R), Q = Sn(L, R, T);
        ve(L, R.width, R.height, 0.2 * R.height, { fill: et(R, "none", T.fill), stroke: _e(R, O, T.stroke), strokeWidth: 1 });
        var xe = G.get("eventGatewayType"), Ge = !!G.get("instantiate");
        if (xe === "Parallel") {
          var ut = m.getScaledPath("GATEWAY_PARALLEL", { xScaleFactor: 0.4, yScaleFactor: 0.4, containerWidth: R.width, containerHeight: R.height, position: { mx: 0.474, my: 0.296 } });
          ce(L, ut, { fill: "none", stroke: _e(R, O, T.stroke), strokeWidth: 1 });
        } else
          xe === "Exclusive" && (Ge || ve(L, R.width, R.height, 0.26 * R.height, { fill: "none", stroke: _e(R, O, T.stroke), strokeWidth: 1 }), function() {
            var Yt = m.getScaledPath("GATEWAY_EVENT_BASED", { xScaleFactor: 0.18, yScaleFactor: 0.18, containerWidth: R.width, containerHeight: R.height, position: { mx: 0.36, my: 0.44 } });
            ce(L, Yt, { fill: "none", stroke: _e(R, O, T.stroke), strokeWidth: 2 });
          }());
        return Q;
      }, "bpmn:ExclusiveGateway": function(L, R, T = {}) {
        var G = Sn(L, R, T = mt(T, ["fill", "stroke"])), Q = m.getScaledPath("GATEWAY_EXCLUSIVE", { xScaleFactor: 0.4, yScaleFactor: 0.4, containerWidth: R.width, containerHeight: R.height, position: { mx: 0.32, my: 0.3 } });
        return Ae(R).get("isMarkerVisible") && ce(L, Q, { fill: _e(R, O, T.stroke), stroke: _e(R, O, T.stroke), strokeWidth: 1 }), G;
      }, "bpmn:Gateway": function(L, R, T = {}) {
        return Sn(L, R, T = mt(T, ["fill", "stroke"]));
      }, "bpmn:Group": function(L, R, T = {}) {
        return T = mt(T, ["fill", "stroke", "width", "height"]), Y(L, R.width, R.height, 10, { stroke: _e(R, O, T.stroke), strokeWidth: 1.5, strokeDasharray: "10, 6, 0, 6", fill: "none", pointerEvents: "none", width: Un(R, T), height: jn(R, T) });
      }, "bpmn:InclusiveGateway": function(L, R, T = {}) {
        var G = Sn(L, R, T = mt(T, ["fill", "stroke"]));
        return ve(L, R.width, R.height, 0.24 * R.height, { fill: et(R, M, T.fill), stroke: _e(R, O, T.stroke), strokeWidth: 2.5 }), G;
      }, "bpmn:IntermediateEvent": function(L, R, T = {}) {
        var { renderIcon: G = !0 } = T;
        T = mt(T, ["fill", "stroke"]);
        var Q = ri(L, R, { ...T, strokeWidth: 1.5 });
        return ve(L, R.width, R.height, 3, { fill: "none", stroke: _e(R, O, T.stroke), strokeWidth: 1.5 }), G && Xn(R, L, T), Q;
      }, "bpmn:IntermediateCatchEvent": We("bpmn:IntermediateEvent"), "bpmn:IntermediateThrowEvent": We("bpmn:IntermediateEvent"), "bpmn:Lane": function(L, R, T = {}) {
        return T = mt(T, ["fill", "stroke", "width", "height"]), Bt(L, R, { ...T, fillOpacity: 0.25 });
      }, "bpmn:ManualTask": function(L, R, T = {}) {
        var G = xt(L, R, T = mt(T, ["fill", "stroke"]));
        return ce(L, m.getScaledPath("TASK_TYPE_MANUAL", { abspos: { x: 17, y: 15 } }), { fill: et(R, M, T.fill), stroke: _e(R, O, T.stroke), strokeWidth: 0.5 }), G;
      }, "bpmn:MessageFlow": function(L, R, T = {}) {
        T = mt(T, ["fill", "stroke"]);
        var G = ie(R), Q = Ae(R), xe = et(R, M, T.fill), Ge = _e(R, O, T.stroke), ut = J(L, R.waypoints, { markerEnd: re("messageflow-end", xe, Ge), markerStart: re("messageflow-start", xe, Ge), stroke: Ge, strokeDasharray: "10, 11", strokeWidth: 1.5 });
        if (G.get("messageRef")) {
          var Yt = ut.getPointAtLength(ut.getTotalLength() / 2), ms = m.getScaledPath("MESSAGE_FLOW_MARKER", { abspos: { x: Yt.x, y: Yt.y } }), Yr = { strokeWidth: 1 };
          Q.get("messageVisibleKind") === "initiating" ? (Yr.fill = xe, Yr.stroke = Ge) : (Yr.fill = Ge, Yr.stroke = xe);
          var nl = ce(L, ms, Yr), Ny = Qi(L, G.get("messageRef").get("name"), { align: "center-top", fitBox: !0, style: { fill: Ge } }), Uw = nl.getBBox(), Yw = Ny.getBBox();
          ss(Ny, Yt.x - Yw.width / 2, Yt.y + Uw.height / 2 + 10, 0);
        }
        return ut;
      }, "bpmn:ParallelGateway": function(L, R, T = {}) {
        var G = Sn(L, R, T = mt(T, ["fill", "stroke"]));
        return ce(L, m.getScaledPath("GATEWAY_PARALLEL", { xScaleFactor: 0.6, yScaleFactor: 0.6, containerWidth: R.width, containerHeight: R.height, position: { mx: 0.46, my: 0.2 } }), { fill: _e(R, O, T.stroke), stroke: _e(R, O, T.stroke), strokeWidth: 1 }), G;
      }, "bpmn:Participant": function(L, R, T = {}) {
        var G = Bt(L, R, T = mt(T, ["fill", "stroke", "width", "height"])), Q = Rt(R), xe = it(R), Ge = ie(R), ut = Ge.get("name");
        if (Q)
          te(L, xe ? [{ x: 30, y: 0 }, { x: 30, y: jn(R, T) }] : [{ x: 0, y: 30 }, { x: Un(R, T), y: 30 }], { stroke: _e(R, O, T.stroke), strokeWidth: 1.5 }), tl(L, ut, R, T);
        else {
          var Yt = yr(R, T);
          xe || (Yt.height = Un(R, T), Yt.width = jn(R, T));
          var ms = Qi(L, ut, { box: Yt, align: "center-middle", style: { fill: mr(R, q, O, T.stroke) } });
          xe || ss(ms, 0, -(-1 * jn(R, T)), 270);
        }
        return Ge.get("participantMultiplicity") && lt("ParticipantMultiplicityMarker", L, R, T), G;
      }, "bpmn:ReceiveTask": function(L, R, T = {}) {
        T = mt(T, ["fill", "stroke"]);
        var G, Q = ie(R), xe = xt(L, R, T);
        return Q.get("instantiate") ? (ve(L, 28, 28, 4.4, { fill: et(R, M, T.fill), stroke: _e(R, O, T.stroke), strokeWidth: 1 }), G = m.getScaledPath("TASK_TYPE_INSTANTIATING_SEND", { abspos: { x: 7.77, y: 9.52 } })) : G = m.getScaledPath("TASK_TYPE_SEND", { xScaleFactor: 0.9, yScaleFactor: 0.9, containerWidth: 21, containerHeight: 14, position: { mx: 0.3, my: 0.4 } }), ce(L, G, { fill: et(R, M, T.fill), stroke: _e(R, O, T.stroke), strokeWidth: 1 }), xe;
      }, "bpmn:ScriptTask": function(L, R, T = {}) {
        var G = xt(L, R, T = mt(T, ["fill", "stroke"]));
        return ce(L, m.getScaledPath("TASK_TYPE_SCRIPT", { abspos: { x: 15, y: 20 } }), { fill: et(R, M, T.fill), stroke: _e(R, O, T.stroke), strokeWidth: 1 }), G;
      }, "bpmn:SendTask": function(L, R, T = {}) {
        var G = xt(L, R, T = mt(T, ["fill", "stroke"]));
        return ce(L, m.getScaledPath("TASK_TYPE_SEND", { xScaleFactor: 1, yScaleFactor: 1, containerWidth: 21, containerHeight: 14, position: { mx: 0.285, my: 0.357 } }), { fill: _e(R, O, T.stroke), stroke: et(R, M, T.fill), strokeWidth: 1 }), G;
      }, "bpmn:SequenceFlow": function(L, R, T = {}) {
        T = mt(T, ["fill", "stroke"]);
        var G = et(R, M, T.fill), Q = _e(R, O, T.stroke), xe = J(L, R.waypoints, { markerEnd: re("sequenceflow-end", G, Q), stroke: Q }), Ge = ie(R), { source: ut } = R;
        if (ut) {
          var Yt = ie(ut);
          Ge.get("conditionExpression") && V(Yt, "bpmn:Activity") && Ne(xe, { markerStart: re("conditional-flow-marker", G, Q) }), Yt.get("default") && (V(Yt, "bpmn:Gateway") || V(Yt, "bpmn:Activity")) && Yt.get("default") === Ge && Ne(xe, { markerStart: re("conditional-default-flow-marker", G, Q) });
        }
        return xe;
      }, "bpmn:ServiceTask": function(L, R, T = {}) {
        var G = xt(L, R, T = mt(T, ["fill", "stroke"]));
        return ve(L, 10, 10, { fill: et(R, M, T.fill), stroke: "none", transform: "translate(6, 6)" }), ce(L, m.getScaledPath("TASK_TYPE_SERVICE", { abspos: { x: 12, y: 18 } }), { fill: et(R, M, T.fill), stroke: _e(R, O, T.stroke), strokeWidth: 1 }), ve(L, 10, 10, { fill: et(R, M, T.fill), stroke: "none", transform: "translate(11, 10)" }), ce(L, m.getScaledPath("TASK_TYPE_SERVICE", { abspos: { x: 17, y: 22 } }), { fill: et(R, M, T.fill), stroke: _e(R, O, T.stroke), strokeWidth: 1 }), G;
      }, "bpmn:StartEvent": function(L, R, T = {}) {
        var { renderIcon: G = !0 } = T;
        T = mt(T, ["fill", "stroke"]), ie(R).get("isInterrupting") || (T = { ...T, strokeDasharray: "6" });
        var Q = ri(L, R, T);
        return G && Xn(R, L, T), Q;
      }, "bpmn:SubProcess": function(L, R, T = {}) {
        return Rn(L, R, T = Rt(R) ? mt(T, ["fill", "stroke", "width", "height"]) : mt(T, ["fill", "stroke"]));
      }, "bpmn:Task": function(L, R, T = {}) {
        return xt(L, R, T = mt(T, ["fill", "stroke"]));
      }, "bpmn:TextAnnotation": function(L, R, T = {}) {
        T = mt(T, ["fill", "stroke", "width", "height"]);
        var { width: G, height: Q } = yr(R, T), xe = Y(L, G, Q, 0, 0, { fill: "none", stroke: "none" });
        return ce(L, m.getScaledPath("TEXT_ANNOTATION", { xScaleFactor: 1, yScaleFactor: 1, containerWidth: G, containerHeight: Q, position: { mx: 0, my: 0 } }), { stroke: _e(R, O, T.stroke) }), Qi(L, ie(R).get("text") || "", { align: "left-top", box: yr(R, T), padding: 7, style: { fill: mr(R, q, O, T.stroke) } }), xe;
      }, "bpmn:Transaction": function(L, R, T = {}) {
        T = Rt(R) ? mt(T, ["fill", "stroke", "width", "height"]) : mt(T, ["fill", "stroke"]);
        var G = Rn(L, R, { strokeWidth: 1.5, ...T }), Q = h.style(["no-fill", "no-events"], { stroke: _e(R, O, T.stroke), strokeWidth: 1.5 });
        return Rt(R) || (T = {}), Y(L, Un(R, T), jn(R, T), 7, 3, Q), G;
      }, "bpmn:UserTask": function(L, R, T = {}) {
        var G = xt(L, R, T = mt(T, ["fill", "stroke"]));
        return ce(L, m.getScaledPath("TASK_TYPE_USER_1", { abspos: { x: 15, y: 12 } }), { fill: et(R, M, T.fill), stroke: _e(R, O, T.stroke), strokeWidth: 0.5 }), ce(L, m.getScaledPath("TASK_TYPE_USER_2", { abspos: { x: 15, y: 12 } }), { fill: et(R, M, T.fill), stroke: _e(R, O, T.stroke), strokeWidth: 0.5 }), ce(L, m.getScaledPath("TASK_TYPE_USER_3", { abspos: { x: 15, y: 12 } }), { fill: _e(R, O, T.stroke), stroke: _e(R, O, T.stroke), strokeWidth: 0.5 }), G;
      }, label: function(L, R, T = {}) {
        return function(G, Q, xe = {}) {
          var Ge = { width: 90, height: 30, x: Q.width / 2 + Q.x, y: Q.height / 2 + Q.y };
          return Qi(G, oe(Q), { box: Ge, fitBox: !0, style: $({}, b.getExternalStyle(), { fill: mr(Q, q, O, xe.stroke) }) });
        }(L, R, T);
      } };
      this._drawPath = ce, this._renderer = Je;
    }
    function mt(s, p = []) {
      return p.reduce((h, m) => (s[m] && (h[m] = s[m]), h), {});
    }
    n(ko, X), ko.$inject = ["config.bpmnRenderer", "eventBus", "styles", "pathMap", "canvas", "textRenderer"], ko.prototype.canRender = function(s) {
      return V(s, "bpmn:BaseElement");
    }, ko.prototype.drawShape = function(s, p, h = {}) {
      var { type: m } = p;
      return this._renderer(m)(s, p, h);
    }, ko.prototype.drawConnection = function(s, p, h = {}) {
      var { type: m } = p;
      return this._renderer(m)(s, p, h);
    }, ko.prototype.getShapePath = function(s) {
      return V(s, "bpmn:Event") ? (h = (p = s).x + p.width / 2, m = p.y + p.height / 2, v = p.width / 2, Xi([["M", h, m], ["m", 0, -v], ["a", v, v, 0, 1, 1, 0, 2 * v], ["a", v, v, 0, 1, 1, 0, -2 * v], ["z"]])) : V(s, "bpmn:Activity") ? function(b, S) {
        var M = b.x, O = b.y, q = b.width, ee = b.height;
        return Xi([["M", M + S, O], ["l", q - 2 * S, 0], ["a", S, S, 0, 0, 1, S, S], ["l", 0, ee - 2 * S], ["a", S, S, 0, 0, 1, -S, S], ["l", 2 * S - q, 0], ["a", S, S, 0, 0, 1, -S, -S], ["l", 0, 2 * S - ee], ["a", S, S, 0, 0, 1, S, -S], ["z"]]);
      }(s, 10) : V(s, "bpmn:Gateway") ? function(b) {
        var S = b.width / 2, M = b.height / 2;
        return Xi([["M", b.x + S, b.y], ["l", S, M], ["l", -S, M], ["l", -S, -M], ["z"]]);
      }(s) : function(b) {
        var S = b.x, M = b.y, O = b.width;
        return Xi([["M", S, M], ["l", O, 0], ["l", 0, b.height], ["l", -O, 0], ["z"]]);
      }(s);
      var p, h, m, v;
    };
    var b1 = 0, x1 = { width: 150, height: 50 };
    function E1(s, p) {
      var h;
      p.textContent = s;
      try {
        var m, v = s === "";
        return p.textContent = v ? "dummy" : s, m = { width: (h = p.getBBox()).width + 2 * h.x, height: h.height }, v && (m.width = 0), m;
      } catch {
        return { width: 0, height: 0 };
      }
    }
    function w1(s, p, h) {
      for (var m, v = s.shift(), b = v; ; ) {
        if ((m = E1(b, h)).width = b ? m.width : 0, b === " " || b === "" || m.width < Math.round(p) || b.length < 2)
          return S1(s, b, v, m);
        b = R1(b, m.width, p);
      }
    }
    function S1(s, p, h, m) {
      if (p.length < h.length) {
        var v = h.slice(p.length).trim();
        s.unshift(v);
      }
      return { width: m.width, height: m.height, text: p };
    }
    var xm = "";
    function R1(s, p, h) {
      var m = Math.max(s.length * (h / p), 1), v = function(b, S) {
        var M, O = b.split(/(\s|-|\u00AD)/g), q = [], ee = 0;
        if (O.length > 1)
          for (; M = O.shift(); ) {
            if (!(M.length + ee < S)) {
              M !== "-" && M !== xm || q.pop();
              break;
            }
            q.push(M), ee += M.length;
          }
        var pe = q[q.length - 1];
        return pe && pe === xm && (q[q.length - 1] = "-"), q.join("");
      }(s, m);
      return v || (v = s.slice(0, Math.max(Math.round(m - 1), 1))), v;
    }
    function $c(s) {
      this._config = $({}, { size: x1, padding: b1, style: {}, align: "center-top" }, s || {});
    }
    $c.prototype.createText = function(s, p) {
      return this.layoutText(s, p).element;
    }, $c.prototype.getDimensions = function(s, p) {
      return this.layoutText(s, p).dimensions;
    }, $c.prototype.layoutText = function(s, p) {
      var h = $({}, this._config.size, p.box), m = $({}, this._config.style, p.style), v = function(re) {
        var ve = re.split("-");
        return { horizontal: ve[0] || "center", vertical: ve[1] || "top" };
      }(p.align || this._config.align), b = function(re) {
        return l(re) ? $({ top: 0, left: 0, right: 0, bottom: 0 }, re) : { top: re, left: re, right: re, bottom: re };
      }(p.padding !== void 0 ? p.padding : this._config.padding), S = p.fitBox || !1, M = function(re) {
        if ("fontSize" in re && "lineHeight" in re)
          return re.lineHeight * parseInt(re.fontSize, 10);
      }(m), O = s.split(/\u00AD?\r?\n/), q = [], ee = h.width - b.left - b.right, pe = Ee("text");
      for (Ne(pe, { x: 0, y: 0 }), Ne(pe, m), fe(function() {
        var re = document.getElementById("helper-svg");
        return re || (Ne(re = Ee("svg"), { id: "helper-svg" }), Mn(re, { visibility: "hidden", position: "fixed", width: 0, height: 0 }), document.body.appendChild(re)), re;
      }(), pe); O.length; )
        q.push(w1(O, ee, pe));
      v.vertical === "middle" && (b.top = b.bottom = 0);
      var be = w(q, function(re, ve, Y) {
        return re + (M || ve.height);
      }, 0) + b.top + b.bottom, Te = w(q, function(re, ve, Y) {
        return ve.width > re ? ve.width : re;
      }, 0), Re = b.top;
      v.vertical === "middle" && (Re += (h.height - be) / 2), Re -= (M || q[0].height) / 4;
      var Ie = Ee("text");
      return Ne(Ie, m), x(q, function(re) {
        var ve;
        switch (Re += M || re.height, v.horizontal) {
          case "left":
            ve = b.left;
            break;
          case "right":
            ve = (S ? Te : ee) - b.right - re.width;
            break;
          default:
            ve = Math.max(((S ? Te : ee) - re.width) / 2 + b.left, 0);
        }
        var Y = Ee("tspan");
        Ne(Y, { x: ve, y: Re }), Y.textContent = re.text, fe(Ie, Y);
      }), F(pe), { dimensions: { width: Te, height: be }, element: Ie };
    };
    function Em(s) {
      var p = $({ fontFamily: "Arial, sans-serif", fontSize: 12, fontWeight: "normal", lineHeight: 1.2 }, s && s.defaultStyle || {}), h = parseInt(p.fontSize, 10) - 1, m = $({}, p, { fontSize: h }, s && s.externalStyle || {}), v = new $c({ style: p });
      this.getExternalLabelBounds = function(b, S) {
        var M = v.getDimensions(S, { box: { width: 90, height: 30 }, style: m });
        return { x: Math.round(b.x + b.width / 2 - M.width / 2), y: Math.round(b.y), width: Math.ceil(M.width), height: Math.ceil(M.height) };
      }, this.getTextAnnotationBounds = function(b, S) {
        var M = v.getDimensions(S, { box: b, style: p, align: "left-top", padding: 5 });
        return { x: b.x, y: b.y, width: b.width, height: Math.max(30, Math.round(M.height)) };
      }, this.createText = function(b, S) {
        return v.createText(b, S || {});
      }, this.getDefaultStyle = function() {
        return p;
      }, this.getExternalStyle = function() {
        return m;
      };
    }
    Em.$inject = ["config.textRenderer"];
    var C1 = /\{([^{}]+)\}/g, A1 = /(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g, P1 = { __init__: ["bpmnRenderer"], bpmnRenderer: ["type", ko], textRenderer: ["type", Em], pathMap: ["type", function() {
      this.pathMap = { EVENT_MESSAGE: { d: "m {mx},{my} l 0,{e.y1} l {e.x1},0 l 0,-{e.y1} z l {e.x0},{e.y0} l {e.x0},-{e.y0}", height: 36, width: 36, heightElements: [6, 14], widthElements: [10.5, 21] }, EVENT_SIGNAL: { d: "M {mx},{my} l {e.x0},{e.y0} l -{e.x1},0 Z", height: 36, width: 36, heightElements: [18], widthElements: [10, 20] }, EVENT_ESCALATION: { d: "M {mx},{my} l {e.x0},{e.y0} l -{e.x0},-{e.y1} l -{e.x0},{e.y1} Z", height: 36, width: 36, heightElements: [20, 7], widthElements: [8] }, EVENT_CONDITIONAL: { d: "M {e.x0},{e.y0} l {e.x1},0 l 0,{e.y2} l -{e.x1},0 Z M {e.x2},{e.y3} l {e.x0},0 M {e.x2},{e.y4} l {e.x0},0 M {e.x2},{e.y5} l {e.x0},0 M {e.x2},{e.y6} l {e.x0},0 M {e.x2},{e.y7} l {e.x0},0 M {e.x2},{e.y8} l {e.x0},0 ", height: 36, width: 36, heightElements: [8.5, 14.5, 18, 11.5, 14.5, 17.5, 20.5, 23.5, 26.5], widthElements: [10.5, 14.5, 12.5] }, EVENT_LINK: { d: "m {mx},{my} 0,{e.y0} -{e.x1},0 0,{e.y1} {e.x1},0 0,{e.y0} {e.x0},-{e.y2} -{e.x0},-{e.y2} z", height: 36, width: 36, heightElements: [4.4375, 6.75, 7.8125], widthElements: [9.84375, 13.5] }, EVENT_ERROR: { d: "m {mx},{my} {e.x0},-{e.y0} {e.x1},-{e.y1} {e.x2},{e.y2} {e.x3},-{e.y3} -{e.x4},{e.y4} -{e.x5},-{e.y5} z", height: 36, width: 36, heightElements: [0.023, 8.737, 8.151, 16.564, 10.591, 8.714], widthElements: [0.085, 6.672, 6.97, 4.273, 5.337, 6.636] }, EVENT_CANCEL_45: { d: "m {mx},{my} -{e.x1},0 0,{e.x0} {e.x1},0 0,{e.y1} {e.x0},0 0,-{e.y1} {e.x1},0 0,-{e.y0} -{e.x1},0 0,-{e.y1} -{e.x0},0 z", height: 36, width: 36, heightElements: [4.75, 8.5], widthElements: [4.75, 8.5] }, EVENT_COMPENSATION: { d: "m {mx},{my} {e.x0},-{e.y0} 0,{e.y1} z m {e.x1},-{e.y2} {e.x2},-{e.y3} 0,{e.y1} -{e.x2},-{e.y3} z", height: 36, width: 36, heightElements: [6.5, 13, 0.4, 6.1], widthElements: [9, 9.3, 8.7] }, EVENT_TIMER_WH: { d: "M {mx},{my} l {e.x0},-{e.y0} m -{e.x0},{e.y0} l {e.x1},{e.y1} ", height: 36, width: 36, heightElements: [10, 2], widthElements: [3, 7] }, EVENT_TIMER_LINE: { d: "M {mx},{my} m {e.x0},{e.y0} l -{e.x1},{e.y1} ", height: 36, width: 36, heightElements: [10, 3], widthElements: [0, 0] }, EVENT_MULTIPLE: { d: "m {mx},{my} {e.x1},-{e.y0} {e.x1},{e.y0} -{e.x0},{e.y1} -{e.x2},0 z", height: 36, width: 36, heightElements: [6.28099, 12.56199], widthElements: [3.1405, 9.42149, 12.56198] }, EVENT_PARALLEL_MULTIPLE: { d: "m {mx},{my} {e.x0},0 0,{e.y1} {e.x1},0 0,{e.y0} -{e.x1},0 0,{e.y1} -{e.x0},0 0,-{e.y1} -{e.x1},0 0,-{e.y0} {e.x1},0 z", height: 36, width: 36, heightElements: [2.56228, 7.68683], widthElements: [2.56228, 7.68683] }, GATEWAY_EXCLUSIVE: { d: "m {mx},{my} {e.x0},{e.y0} {e.x1},{e.y0} {e.x2},0 {e.x4},{e.y2} {e.x4},{e.y1} {e.x2},0 {e.x1},{e.y3} {e.x0},{e.y3} {e.x3},0 {e.x5},{e.y1} {e.x5},{e.y2} {e.x3},0 z", height: 17.5, width: 17.5, heightElements: [8.5, 6.5312, -6.5312, -8.5], widthElements: [6.5, -6.5, 3, -3, 5, -5] }, GATEWAY_PARALLEL: { d: "m {mx},{my} 0,{e.y1} -{e.x1},0 0,{e.y0} {e.x1},0 0,{e.y1} {e.x0},0 0,-{e.y1} {e.x1},0 0,-{e.y0} -{e.x1},0 0,-{e.y1} -{e.x0},0 z", height: 30, width: 30, heightElements: [5, 12.5], widthElements: [5, 12.5] }, GATEWAY_EVENT_BASED: { d: "m {mx},{my} {e.x0},{e.y0} {e.x0},{e.y1} {e.x1},{e.y2} {e.x2},0 z", height: 11, width: 11, heightElements: [-6, 6, 12, -12], widthElements: [9, -3, -12] }, GATEWAY_COMPLEX: { d: "m {mx},{my} 0,{e.y0} -{e.x0},-{e.y1} -{e.x1},{e.y2} {e.x0},{e.y1} -{e.x2},0 0,{e.y3} {e.x2},0  -{e.x0},{e.y1} l {e.x1},{e.y2} {e.x0},-{e.y1} 0,{e.y0} {e.x3},0 0,-{e.y0} {e.x0},{e.y1} {e.x1},-{e.y2} -{e.x0},-{e.y1} {e.x2},0 0,-{e.y3} -{e.x2},0 {e.x0},-{e.y1} -{e.x1},-{e.y2} -{e.x0},{e.y1} 0,-{e.y0} -{e.x3},0 z", height: 17.125, width: 17.125, heightElements: [4.875, 3.4375, 2.125, 3], widthElements: [3.4375, 2.125, 4.875, 3] }, DATA_OBJECT_PATH: { d: "m 0,0 {e.x1},0 {e.x0},{e.y0} 0,{e.y1} -{e.x2},0 0,-{e.y2} {e.x1},0 0,{e.y0} {e.x0},0", height: 61, width: 51, heightElements: [10, 50, 60], widthElements: [10, 40, 50, 60] }, DATA_OBJECT_COLLECTION_PATH: { d: "m{mx},{my} m 3,2 l 0,10 m 3,-10 l 0,10 m 3,-10 l 0,10", height: 10, width: 10, heightElements: [], widthElements: [] }, DATA_ARROW: { d: "m 5,9 9,0 0,-3 5,5 -5,5 0,-3 -9,0 z", height: 61, width: 51, heightElements: [], widthElements: [] }, DATA_STORE: { d: "m  {mx},{my} l  0,{e.y2} c  {e.x0},{e.y1} {e.x1},{e.y1}  {e.x2},0 l  0,-{e.y2} c -{e.x0},-{e.y1} -{e.x1},-{e.y1} -{e.x2},0c  {e.x0},{e.y1} {e.x1},{e.y1}  {e.x2},0 m  -{e.x2},{e.y0}c  {e.x0},{e.y1} {e.x1},{e.y1} {e.x2},0m  -{e.x2},{e.y0}c  {e.x0},{e.y1} {e.x1},{e.y1}  {e.x2},0", height: 61, width: 61, heightElements: [7, 10, 45], widthElements: [2, 58, 60] }, TEXT_ANNOTATION: { d: "m {mx}, {my} m 10,0 l -10,0 l 0,{e.y0} l 10,0", height: 30, width: 10, heightElements: [30], widthElements: [10] }, MARKER_SUB_PROCESS: { d: "m{mx},{my} m 7,2 l 0,10 m -5,-5 l 10,0", height: 10, width: 10, heightElements: [], widthElements: [] }, MARKER_PARALLEL: { d: "m{mx},{my} m 3,2 l 0,10 m 3,-10 l 0,10 m 3,-10 l 0,10", height: 10, width: 10, heightElements: [], widthElements: [] }, MARKER_SEQUENTIAL: { d: "m{mx},{my} m 0,3 l 10,0 m -10,3 l 10,0 m -10,3 l 10,0", height: 10, width: 10, heightElements: [], widthElements: [] }, MARKER_COMPENSATION: { d: "m {mx},{my} 7,-5 0,10 z m 7.1,-0.3 6.9,-4.7 0,10 -6.9,-4.7 z", height: 10, width: 21, heightElements: [], widthElements: [] }, MARKER_LOOP: { d: "m {mx},{my} c 3.526979,0 6.386161,-2.829858 6.386161,-6.320661 0,-3.490806 -2.859182,-6.320661 -6.386161,-6.320661 -3.526978,0 -6.38616,2.829855 -6.38616,6.320661 0,1.745402 0.714797,3.325567 1.870463,4.469381 0.577834,0.571908 1.265885,1.034728 2.029916,1.35457 l -0.718163,-3.909793 m 0.718163,3.909793 -3.885211,0.802902", height: 13.9, width: 13.7, heightElements: [], widthElements: [] }, MARKER_ADHOC: { d: "m {mx},{my} m 0.84461,2.64411 c 1.05533,-1.23780996 2.64337,-2.07882 4.29653,-1.97997996 2.05163,0.0805 3.85579,1.15803 5.76082,1.79107 1.06385,0.34139996 2.24454,0.1438 3.18759,-0.43767 0.61743,-0.33642 1.2775,-0.64078 1.7542,-1.17511 0,0.56023 0,1.12046 0,1.6807 -0.98706,0.96237996 -2.29792,1.62393996 -3.6918,1.66181996 -1.24459,0.0927 -2.46671,-0.2491 -3.59505,-0.74812 -1.35789,-0.55965 -2.75133,-1.33436996 -4.27027,-1.18121996 -1.37741,0.14601 -2.41842,1.13685996 -3.44288,1.96782996 z", height: 4, width: 15, heightElements: [], widthElements: [] }, TASK_TYPE_SEND: { d: "m {mx},{my} l 0,{e.y1} l {e.x1},0 l 0,-{e.y1} z l {e.x0},{e.y0} l {e.x0},-{e.y0}", height: 14, width: 21, heightElements: [6, 14], widthElements: [10.5, 21] }, TASK_TYPE_SCRIPT: { d: "m {mx},{my} c 9.966553,-6.27276 -8.000926,-7.91932 2.968968,-14.938 l -8.802728,0 c -10.969894,7.01868 6.997585,8.66524 -2.968967,14.938 z m -7,-12 l 5,0 m -4.5,3 l 4.5,0 m -3,3 l 5,0m -4,3 l 5,0", height: 15, width: 12.6, heightElements: [6, 14], widthElements: [10.5, 21] }, TASK_TYPE_USER_1: { d: "m {mx},{my} c 0.909,-0.845 1.594,-2.049 1.594,-3.385 0,-2.554 -1.805,-4.62199999 -4.357,-4.62199999 -2.55199998,0 -4.28799998,2.06799999 -4.28799998,4.62199999 0,1.348 0.974,2.562 1.89599998,3.405 -0.52899998,0.187 -5.669,2.097 -5.794,4.7560005 v 6.718 h 17 v -6.718 c 0,-2.2980005 -5.5279996,-4.5950005 -6.0509996,-4.7760005 zm -8,6 l 0,5.5 m 11,0 l 0,-5" }, TASK_TYPE_USER_2: { d: "m {mx},{my} m 2.162,1.009 c 0,2.4470005 -2.158,4.4310005 -4.821,4.4310005 -2.66499998,0 -4.822,-1.981 -4.822,-4.4310005 " }, TASK_TYPE_USER_3: { d: "m {mx},{my} m -6.9,-3.80 c 0,0 2.25099998,-2.358 4.27399998,-1.177 2.024,1.181 4.221,1.537 4.124,0.965 -0.098,-0.57 -0.117,-3.79099999 -4.191,-4.13599999 -3.57499998,0.001 -4.20799998,3.36699999 -4.20699998,4.34799999 z" }, TASK_TYPE_MANUAL: { d: "m {mx},{my} c 0.234,-0.01 5.604,0.008 8.029,0.004 0.808,0 1.271,-0.172 1.417,-0.752 0.227,-0.898 -0.334,-1.314 -1.338,-1.316 -2.467,-0.01 -7.886,-0.004 -8.108,-0.004 -0.014,-0.079 0.016,-0.533 0,-0.61 0.195,-0.042 8.507,0.006 9.616,0.002 0.877,-0.007 1.35,-0.438 1.353,-1.208 0.003,-0.768 -0.479,-1.09 -1.35,-1.091 -2.968,-0.002 -9.619,-0.013 -9.619,-0.013 v -0.591 c 0,0 5.052,-0.016 7.225,-0.016 0.888,-0.002 1.354,-0.416 1.351,-1.193 -0.006,-0.761 -0.492,-1.196 -1.361,-1.196 -3.473,-0.005 -10.86,-0.003 -11.0829995,-0.003 -0.022,-0.047 -0.045,-0.094 -0.069,-0.139 0.3939995,-0.319 2.0409995,-1.626 2.4149995,-2.017 0.469,-0.4870005 0.519,-1.1650005 0.162,-1.6040005 -0.414,-0.511 -0.973,-0.5 -1.48,-0.236 -1.4609995,0.764 -6.5999995,3.6430005 -7.7329995,4.2710005 -0.9,0.499 -1.516,1.253 -1.882,2.19 -0.37000002,0.95 -0.17,2.01 -0.166,2.979 0.004,0.718 -0.27300002,1.345 -0.055,2.063 0.629,2.087 2.425,3.312 4.859,3.318 4.6179995,0.014 9.2379995,-0.139 13.8569995,-0.158 0.755,-0.004 1.171,-0.301 1.182,-1.033 0.012,-0.754 -0.423,-0.969 -1.183,-0.973 -1.778,-0.01 -5.824,-0.004 -6.04,-0.004 10e-4,-0.084 0.003,-0.586 10e-4,-0.67 z" }, TASK_TYPE_INSTANTIATING_SEND: { d: "m {mx},{my} l 0,8.4 l 12.6,0 l 0,-8.4 z l 6.3,3.6 l 6.3,-3.6" }, TASK_TYPE_SERVICE: { d: "m {mx},{my} v -1.71335 c 0.352326,-0.0705 0.703932,-0.17838 1.047628,-0.32133 0.344416,-0.14465 0.665822,-0.32133 0.966377,-0.52145 l 1.19431,1.18005 1.567487,-1.57688 -1.195028,-1.18014 c 0.403376,-0.61394 0.683079,-1.29908 0.825447,-2.01824 l 1.622133,-0.01 v -2.2196 l -1.636514,0.01 c -0.07333,-0.35153 -0.178319,-0.70024 -0.323564,-1.04372 -0.145244,-0.34406 -0.321407,-0.6644 -0.522735,-0.96217 l 1.131035,-1.13631 -1.583305,-1.56293 -1.129598,1.13589 c -0.614052,-0.40108 -1.302883,-0.68093 -2.022633,-0.82247 l 0.0093,-1.61852 h -2.241173 l 0.0042,1.63124 c -0.353763,0.0736 -0.705369,0.17977 -1.049785,0.32371 -0.344415,0.14437 -0.665102,0.32092 -0.9635006,0.52046 l -1.1698628,-1.15823 -1.5667691,1.5792 1.1684265,1.15669 c -0.4026573,0.61283 -0.68308,1.29797 -0.8247287,2.01713 l -1.6588041,0.003 v 2.22174 l 1.6724648,-0.006 c 0.073327,0.35077 0.1797598,0.70243 0.3242851,1.04472 0.1452428,0.34448 0.3214064,0.6644 0.5227339,0.96066 l -1.1993431,1.19723 1.5840256,1.56011 1.1964668,-1.19348 c 0.6140517,0.40346 1.3028827,0.68232 2.0233517,0.82331 l 7.19e-4,1.69892 h 2.226848 z m 0.221462,-3.9957 c -1.788948,0.7502 -3.8576,-0.0928 -4.6097055,-1.87438 -0.7521065,-1.78321 0.090598,-3.84627 1.8802645,-4.59604 1.78823,-0.74936 3.856881,0.0929 4.608987,1.87437 0.752106,1.78165 -0.0906,3.84612 -1.879546,4.59605 z" }, TASK_TYPE_SERVICE_FILL: { d: "m {mx},{my} c -1.788948,0.7502 -3.8576,-0.0928 -4.6097055,-1.87438 -0.7521065,-1.78321 0.090598,-3.84627 1.8802645,-4.59604 1.78823,-0.74936 3.856881,0.0929 4.608987,1.87437 0.752106,1.78165 -0.0906,3.84612 -1.879546,4.59605 z" }, TASK_TYPE_BUSINESS_RULE_HEADER: { d: "m {mx},{my} 0,4 20,0 0,-4 z" }, TASK_TYPE_BUSINESS_RULE_MAIN: { d: "m {mx},{my} 0,12 20,0 0,-12 zm 0,8 l 20,0 m -13,-4 l 0,8" }, MESSAGE_FLOW_MARKER: { d: "m {mx},{my} m -10.5 ,-7 l 0,14 l 21,0 l 0,-14 z l 10.5,6 l 10.5,-6" } }, this.getRawPath = function(s) {
        return this.pathMap[s].d;
      }, this.getScaledPath = function(s, p) {
        var h, m, v = this.pathMap[s];
        p.abspos ? (h = p.abspos.x, m = p.abspos.y) : (h = p.containerWidth * p.position.mx, m = p.containerHeight * p.position.my);
        var b = {};
        if (p.position) {
          for (var S = p.containerHeight / v.height * p.yScaleFactor, M = p.containerWidth / v.width * p.xScaleFactor, O = 0; O < v.heightElements.length; O++)
            b["y" + O] = v.heightElements[O] * S;
          for (var q = 0; q < v.widthElements.length; q++)
            b["x" + q] = v.widthElements[q] * M;
        }
        var ee, pe, be = (ee = v.d, pe = { mx: h, my: m, e: b }, String(ee).replace(C1, function(Te, Re) {
          return function(Ie, re, ve) {
            var Y = ve;
            return re.replace(A1, function(te, J, ce, ge, Je) {
              J = J || ge, Y && (J in Y && (Y = Y[J]), typeof Y == "function" && Je && (Y = Y()));
            }), Y = (Y == null || Y == ve ? Ie : Y) + "";
          }(Te, Re, pe);
        }));
        return be;
      };
    }] }, wm = { translate: ["value", function(s, p) {
      return p = p || {}, s.replace(/{([^}]+)}/g, function(h, m) {
        return p[m] || "{" + m + "}";
      });
    }] };
    function Rp(s) {
      return { top: s.y, right: s.x + (s.width || 0), bottom: s.y + (s.height || 0), left: s.x };
    }
    function T1(s) {
      return p = { x: s.x + (s.width || 0) / 2, y: s.y + (s.height || 0) / 2 }, { x: Math.round(p.x), y: Math.round(p.y) };
      var p;
    }
    function k1(s) {
      for (var p = s.waypoints, h = p.reduce(function(O, q, ee) {
        var pe, be, Te = p[ee - 1];
        if (Te) {
          var Re = O[O.length - 1], Ie = Re && Re.endLength || 0, re = (pe = Te, be = q, Math.sqrt(Math.pow(pe.x - be.x, 2) + Math.pow(pe.y - be.y, 2)));
          O.push({ start: Te, end: q, startLength: Ie, endLength: Ie + re, length: re });
        }
        return O;
      }, []), m = h.reduce(function(O, q) {
        return O + q.length;
      }, 0), v = m / 2, b = 0, S = h[b]; S.endLength < v; )
        S = h[++b];
      var M = (v - S.startLength) / S.length;
      return { x: S.start.x + (S.end.x - S.start.x) * M, y: S.start.y + (S.end.y - S.start.y) * M };
    }
    function Cp(s) {
      return l(p = s) && y(p, "waypoints") ? k1(s) : T1(s);
      var p;
    }
    function Dn(s) {
      return s ? "<" + s.$type + (s.id ? ' id="' + s.id : "") + '" />' : "<null>";
    }
    function jc(s, p, h) {
      return $({ id: s.id, type: s.$type, businessObject: s, di: p }, h);
    }
    function M1(s, p, h) {
      var m = s.waypoint;
      return !m || m.length < 2 ? [Cp(p), Cp(h)] : m.map(function(v) {
        return { x: v.x, y: v.y };
      });
    }
    function Sm(s, p, h) {
      return new Error(`element ${Dn(p)} referenced by ${Dn(s)}#${h} not yet drawn`);
    }
    function _r(s, p, h, m, v) {
      this._eventBus = s, this._canvas = p, this._elementFactory = h, this._elementRegistry = m, this._textRenderer = v;
    }
    _r.$inject = ["eventBus", "canvas", "elementFactory", "elementRegistry", "textRenderer"], _r.prototype.add = function(s, p, h) {
      var m, v, b, S, M, O, q;
      if (V(p, "bpmndi:BPMNPlane")) {
        var ee = V(s, "bpmn:SubProcess") ? { id: s.id + "_plane" } : {};
        m = this._elementFactory.createRoot(jc(s, p, ee)), this._canvas.addRootElement(m);
      } else if (V(p, "bpmndi:BPMNShape")) {
        var pe = !Rt(s, p), be = function(re) {
          return V(re, "bpmn:Group");
        }(s);
        v = h && (h.hidden || h.collapsed);
        var Te = p.bounds;
        m = this._elementFactory.createShape(jc(s, p, { collapsed: pe, hidden: v, x: Math.round(Te.x), y: Math.round(Te.y), width: Math.round(Te.width), height: Math.round(Te.height), isFrame: be })), V(s, "bpmn:BoundaryEvent") && this._attachBoundary(s, m), V(s, "bpmn:Lane") && (b = 0), V(s, "bpmn:DataStoreReference") && (S = h, M = Cp(Te), O = M.x, q = M.y, O >= S.x && O <= S.x + S.width && q >= S.y && q <= S.y + S.height || (h = this._canvas.findRoot(h))), this._canvas.addShape(m, h, b);
      } else {
        if (!V(p, "bpmndi:BPMNEdge"))
          throw new Error(`unknown di ${Dn(p)} for element ${Dn(s)}`);
        var Re = this._getSource(s), Ie = this._getTarget(s);
        v = h && (h.hidden || h.collapsed), m = this._elementFactory.createConnection(jc(s, p, { hidden: v, source: Re, target: Ie, waypoints: M1(p, Re, Ie) })), V(s, "bpmn:DataAssociation") && (h = this._canvas.findRoot(h)), this._canvas.addConnection(m, h, b);
      }
      return function(re) {
        return V(re, "bpmn:Event") || V(re, "bpmn:Gateway") || V(re, "bpmn:DataStoreReference") || V(re, "bpmn:DataObjectReference") || V(re, "bpmn:DataInput") || V(re, "bpmn:DataOutput") || V(re, "bpmn:SequenceFlow") || V(re, "bpmn:MessageFlow") || V(re, "bpmn:Group");
      }(s) && oe(m) && this.addLabel(s, p, m), this._eventBus.fire("bpmnElement.added", { element: m }), m;
    }, _r.prototype._attachBoundary = function(s, p) {
      var h = s.attachedToRef;
      if (!h)
        throw new Error(`missing ${Dn(s)}#attachedToRef`);
      var m = this._elementRegistry.get(h.id), v = m && m.attachers;
      if (!m)
        throw Sm(s, h, "attachedToRef");
      p.host = m, v || (m.attachers = v = []), v.indexOf(p) === -1 && v.push(p);
    }, _r.prototype.addLabel = function(s, p, h) {
      var m, v, b;
      return m = Kt(p, h), (v = oe(h)) && (m = this._textRenderer.getExternalLabelBounds(m, v)), b = this._elementFactory.createLabel(jc(s, p, { id: s.id + "_label", labelTarget: h, type: "label", hidden: h.hidden || !oe(h), x: Math.round(m.x), y: Math.round(m.y), width: Math.round(m.width), height: Math.round(m.height) })), this._canvas.addShape(b, h.parent);
    }, _r.prototype._getConnectedElement = function(s, p) {
      var h, m, v = s.$type;
      if (m = s[p + "Ref"], p === "source" && v === "bpmn:DataInputAssociation" && (m = m && m[0]), (p === "source" && v === "bpmn:DataOutputAssociation" || p === "target" && v === "bpmn:DataInputAssociation") && (m = s.$parent), h = m && this._getElement(m))
        return h;
      throw m ? Sm(s, m, p + "Ref") : new Error(`${Dn(s)}#${p} Ref not specified`);
    }, _r.prototype._getSource = function(s) {
      return this._getConnectedElement(s, "source");
    }, _r.prototype._getTarget = function(s) {
      return this._getConnectedElement(s, "target");
    }, _r.prototype._getElement = function(s) {
      return this._elementRegistry.get(s.id);
    };
    var D1 = { __depends__: [P1, { __depends__: [wm], bpmnImporter: ["type", _r] }] };
    function Mo(s, p) {
      var h, m, v, b;
      return p = !!p, c(s) || (s = [s]), x(s, function(S) {
        var M = S;
        S.waypoints && !p && (M = Mo(S.waypoints, !0));
        var O = M.x, q = M.y, ee = M.height || 0, pe = M.width || 0;
        (O < h || h === void 0) && (h = O), (q < m || m === void 0) && (m = q), (O + pe > v || v === void 0) && (v = O + pe), (q + ee > b || b === void 0) && (b = q + ee);
      }), { x: h, y: m, height: b - m, width: v - h };
    }
    function Rm(s) {
      return "waypoints" in s ? "connection" : "x" in s ? "shape" : "root";
    }
    function Cm(s) {
      return !(!s || !s.isFrame);
    }
    function Am(s) {
      this._counter = 0, this._prefix = (s ? s + "-" : "") + Math.floor(1e9 * Math.random()) + "-";
    }
    Am.prototype.next = function() {
      return this._prefix + ++this._counter;
    };
    var O1 = new Am("ov");
    function mn(s, p, h, m) {
      var v, b;
      this._eventBus = p, this._canvas = h, this._elementRegistry = m, this._ids = O1, this._overlayDefaults = $({ show: null, scale: !0 }, s && s.defaults), this._overlays = {}, this._overlayContainers = [], this._overlayRoot = (v = h.getContainer(), Mn(b = $t('<div class="djs-overlay-container" />'), { position: "absolute", width: 0, height: 0 }), v.insertBefore(b, v.firstChild), b), this._init();
    }
    function Pm(s, p, h) {
      Mn(s, { left: p + "px", top: h + "px" });
    }
    function Fc(s, p) {
      s.style.display = p === !1 ? "none" : "";
    }
    function Tm(s, p) {
      s.style["transform-origin"] = "top left", ["", "-ms-", "-webkit-"].forEach(function(h) {
        s.style[h + "transform"] = p;
      });
    }
    mn.$inject = ["config.overlays", "eventBus", "canvas", "elementRegistry"], mn.prototype.get = function(s) {
      if (f(s) && (s = { id: s }), f(s.element) && (s.element = this._elementRegistry.get(s.element)), s.element) {
        var p = this._getOverlayContainer(s.element, !0);
        return p ? s.type ? _(p.overlays, k({ type: s.type })) : p.overlays.slice() : [];
      }
      return s.type ? _(this._overlays, k({ type: s.type })) : s.id ? this._overlays[s.id] : null;
    }, mn.prototype.add = function(s, p, h) {
      if (l(p) && (h = p, p = null), s.id || (s = this._elementRegistry.get(s)), !h.position)
        throw new Error("must specifiy overlay position");
      if (!h.html)
        throw new Error("must specifiy overlay html");
      if (!s)
        throw new Error("invalid element specified");
      var m = this._ids.next();
      return h = $({}, this._overlayDefaults, h, { id: m, type: p, element: s, html: h.html }), this._addOverlay(h), m;
    }, mn.prototype.remove = function(s) {
      var p = this.get(s) || [];
      c(p) || (p = [p]);
      var h = this;
      x(p, function(m) {
        var v = h._getOverlayContainer(m.element, !0);
        if (m && (ha(m.html), ha(m.htmlContainer), delete m.htmlContainer, delete m.element, delete h._overlays[m.id]), v) {
          var b = v.overlays.indexOf(m);
          b !== -1 && v.overlays.splice(b, 1);
        }
      });
    }, mn.prototype.isShown = function() {
      return this._overlayRoot.style.display !== "none";
    }, mn.prototype.show = function() {
      Fc(this._overlayRoot);
    }, mn.prototype.hide = function() {
      Fc(this._overlayRoot, !1);
    }, mn.prototype.clear = function() {
      this._overlays = {}, this._overlayContainers = [], Ic(this._overlayRoot);
    }, mn.prototype._updateOverlayContainer = function(s) {
      var p = s.element, h = s.html, m = p.x, v = p.y;
      if (p.waypoints) {
        var b = Mo(p);
        m = b.x, v = b.y;
      }
      Pm(h, m, v), function(S, M, O) {
        arguments.length == 2 ? S.getAttribute(M) : O === null ? S.removeAttribute(M) : S.setAttribute(M, O);
      }(s.html, "data-container-id", p.id);
    }, mn.prototype._updateOverlay = function(s) {
      var p, h, m = s.position, v = s.htmlContainer, b = s.element, S = m.left, M = m.top;
      m.right !== void 0 && (p = b.waypoints ? Mo(b).width : b.width, S = -1 * m.right + p), m.bottom !== void 0 && (h = b.waypoints ? Mo(b).height : b.height, M = -1 * m.bottom + h), Pm(v, S || 0, M || 0), this._updateOverlayVisibilty(s, this._canvas.viewbox());
    }, mn.prototype._createOverlayContainer = function(s) {
      var p = $t('<div class="djs-overlays" />');
      Mn(p, { position: "absolute" }), this._overlayRoot.appendChild(p);
      var h = { html: p, element: s, overlays: [] };
      return this._updateOverlayContainer(h), this._overlayContainers.push(h), h;
    }, mn.prototype._updateRoot = function(s) {
      var p = s.scale || 1, h = "matrix(" + [p, 0, 0, p, -1 * s.x * p, -1 * s.y * p].join(",") + ")";
      Tm(this._overlayRoot, h);
    }, mn.prototype._getOverlayContainer = function(s, p) {
      var h = g(this._overlayContainers, function(m) {
        return m.element === s;
      });
      return h || p ? h : this._createOverlayContainer(s);
    }, mn.prototype._addOverlay = function(s) {
      var p, h, m = s.id, v = s.element, b = s.html;
      b.get && b.constructor.prototype.jquery && (b = b.get(0)), f(b) && (b = $t(b)), h = this._getOverlayContainer(v), Mn(p = $t('<div class="djs-overlay" data-overlay-id="' + m + '">'), { position: "absolute" }), p.appendChild(b), s.type && To(p).add("djs-overlay-" + s.type), Fc(p, this._canvas.findRoot(v) === this._canvas.getRootElement()), s.htmlContainer = p, h.overlays.push(s), h.html.appendChild(p), this._overlays[m] = s, this._updateOverlay(s), this._updateOverlayVisibilty(s, this._canvas.viewbox());
    }, mn.prototype._updateOverlayVisibilty = function(s, p) {
      var h = s.show, m = this._canvas.findRoot(s.element), v = h && h.minZoom, b = h && h.maxZoom, S = s.htmlContainer, M = !0;
      (m !== this._canvas.getRootElement() || h && (a(v) && v > p.scale || a(b) && b < p.scale)) && (M = !1), Fc(S, M), this._updateOverlayScale(s, p);
    }, mn.prototype._updateOverlayScale = function(s, p) {
      var h, m, v, b = s.scale, S = s.htmlContainer, M = "";
      b !== !0 && (b === !1 ? (h = 1, m = 1) : (h = b.min, m = b.max), a(h) && p.scale < h && (v = (1 / p.scale || 1) * h), a(m) && p.scale > m && (v = (1 / p.scale || 1) * m)), a(v) && (M = "scale(" + v + "," + v + ")"), Tm(S, M);
    }, mn.prototype._updateOverlaysVisibilty = function(s) {
      var p = this;
      x(this._overlays, function(h) {
        p._updateOverlayVisibilty(h, s);
      });
    }, mn.prototype._init = function() {
      var s = this._eventBus, p = this;
      s.on("canvas.viewbox.changing", function(h) {
        p.hide();
      }), s.on("canvas.viewbox.changed", function(h) {
        var m;
        m = h.viewbox, p._updateRoot(m), p._updateOverlaysVisibilty(m), p.show();
      }), s.on(["shape.remove", "connection.remove"], function(h) {
        var m = h.element;
        x(p.get({ element: m }), function(S) {
          p.remove(S.id);
        });
        var v = p._getOverlayContainer(m);
        if (v) {
          ha(v.html);
          var b = p._overlayContainers.indexOf(v);
          b !== -1 && p._overlayContainers.splice(b, 1);
        }
      }), s.on("element.changed", 500, function(h) {
        var m = h.element, v = p._getOverlayContainer(m, !0);
        v && (x(v.overlays, function(b) {
          p._updateOverlay(b);
        }), p._updateOverlayContainer(v));
      }), s.on("element.marker.update", function(h) {
        var m = p._getOverlayContainer(h.element, !0);
        m && To(m.html)[h.add ? "add" : "remove"](h.marker);
      }), s.on("root.set", function() {
        p._updateOverlaysVisibilty(p._canvas.viewbox());
      }), s.on("diagram.clear", this.clear, this);
    };
    var km = { __init__: ["overlays"], overlays: ["type", mn] };
    function Mm(s, p, h, m) {
      s.on("element.changed", function(v) {
        var b = v.element;
        (b.parent || b === p.getRootElement()) && (v.gfx = h.getGraphics(b)), v.gfx && s.fire(Rm(b) + ".changed", v);
      }), s.on("elements.changed", function(v) {
        var b = v.elements;
        b.forEach(function(S) {
          s.fire("element.changed", { element: S });
        }), m.updateContainments(b);
      }), s.on("shape.changed", function(v) {
        m.update("shape", v.element, v.gfx);
      }), s.on("connection.changed", function(v) {
        m.update("connection", v.element, v.gfx);
      });
    }
    Mm.$inject = ["eventBus", "canvas", "elementRegistry", "graphicsFactory"];
    var N1 = { __init__: ["changeSupport"], changeSupport: ["type", Mm] };
    function Kn(s) {
      this._eventBus = s;
    }
    function br(s) {
      return function(p, h, m, v, b) {
        (d(p) || u(p)) && (b = v, v = m, m = h, h = p, p = null), this.on(p, s, h, m, v, b);
      };
    }
    function Ap(s, p) {
      p.invoke(Kn, this), this.executed(function(h) {
        var m = h.context;
        m.rootElement ? s.setRootElement(m.rootElement) : m.rootElement = s.getRootElement();
      }), this.revert(function(h) {
        var m = h.context;
        m.rootElement && s.setRootElement(m.rootElement);
      });
    }
    Kn.$inject = ["eventBus"], Kn.prototype.on = function(s, p, h, m, v, b) {
      if ((d(p) || u(p)) && (b = v, v = m, m = h, h = p, p = null), d(h) && (b = v, v = m, m = h, h = 1e3), l(v) && (b = v, v = !1), !d(m))
        throw new Error("handlerFn must be a function");
      c(s) || (s = [s]);
      var S = this._eventBus;
      x(s, function(M) {
        var O = ["commandStack", M, p].filter(function(q) {
          return q;
        }).join(".");
        S.on(O, h, v ? /* @__PURE__ */ function(q, ee) {
          return function(pe) {
            return q.call(ee || null, pe.context, pe.command, pe);
          };
        }(m, b) : m, b);
      });
    }, Kn.prototype.canExecute = br("canExecute"), Kn.prototype.preExecute = br("preExecute"), Kn.prototype.preExecuted = br("preExecuted"), Kn.prototype.execute = br("execute"), Kn.prototype.executed = br("executed"), Kn.prototype.postExecute = br("postExecute"), Kn.prototype.postExecuted = br("postExecuted"), Kn.prototype.revert = br("revert"), Kn.prototype.reverted = br("reverted"), n(Ap, Kn), Ap.$inject = ["canvas", "injector"];
    var B1 = { __init__: ["rootElementsBehavior"], rootElementsBehavior: ["type", Ap] }, L1 = { "&": "&amp;", "<": "&lt;", ">": "&gt;", '"': "&quot;", "'": "&#39;" }, I1 = "_plane";
    function Pp(s) {
      var p = s.id;
      return V(s, "bpmn:SubProcess") ? function(h) {
        return h + I1;
      }(p) : p;
    }
    function Dm(s, p, h) {
      var m = $t('<ul class="bjs-breadcrumbs"></ul>'), v = h.getContainer(), b = To(v);
      v.appendChild(m);
      var S = [];
      function M(O) {
        O && (S = function(pe) {
          for (var be = ie(pe), Te = [], Re = be; Re; Re = Re.$parent)
            (V(Re, "bpmn:SubProcess") || V(Re, "bpmn:Process")) && Te.push(Re);
          return Te.reverse();
        }(O));
        var q = S.map(function(pe) {
          var be, Te = (be = "" + (be = pe.name || pe.id)) && be.replace(/[&<>"']/g, function(ve) {
            return L1[ve];
          }), Re = $t('<li><span class="bjs-crumb"><a title="' + Te + '">' + Te + "</a></span></li>"), Ie = h.findRoot(Pp(pe)) || h.findRoot(pe.id);
          if (!Ie && V(pe, "bpmn:Process")) {
            var re = p.find(function(ve) {
              var Y = ie(ve);
              return Y && Y.get("processRef") && Y.get("processRef") === pe;
            });
            Ie = h.findRoot(re.id);
          }
          return Re.addEventListener("click", function() {
            h.setRootElement(Ie);
          }), Re;
        });
        m.innerHTML = "";
        var ee = q.length > 1;
        b.toggle("bjs-breadcrumbs-shown", ee), q.forEach(function(pe) {
          m.appendChild(pe);
        });
      }
      s.on("element.changed", function(O) {
        var q = ie(O.element);
        g(S, function(ee) {
          return ee === q;
        }) && M();
      }), s.on("root.set", function(O) {
        M(O.element);
      });
    }
    function Om(s, p) {
      var h = null, m = new $1();
      s.on("root.set", function(v) {
        var b = v.element, S = p.viewbox(), M = m.get(b);
        if (m.set(h, { x: S.x, y: S.y, zoom: S.scale }), h = b, !V(b, "bpmn:Collaboration") || M) {
          M = M || { x: 0, y: 0, zoom: 1 };
          var O = (S.x - M.x) * S.scale, q = (S.y - M.y) * S.scale;
          O === 0 && q === 0 || p.scroll({ dx: O, dy: q }), M.zoom !== S.scale && p.zoom(M.zoom, { x: 0, y: 0 });
        }
      }), s.on("diagram.clear", function() {
        m.clear(), h = null;
      });
    }
    function $1() {
      this._entries = [], this.set = function(s, p) {
        var h = !1;
        for (var m in this._entries)
          if (this._entries[m][0] === s) {
            this._entries[m][1] = p, h = !0;
            break;
          }
        h || this._entries.push([s, p]);
      }, this.get = function(s) {
        for (var p in this._entries)
          if (this._entries[p][0] === s)
            return this._entries[p][1];
        return null;
      }, this.clear = function() {
        this._entries.length = 0;
      }, this.remove = function(s) {
        var p = -1;
        for (var h in this._entries)
          if (this._entries[h][0] === s) {
            p = h;
            break;
          }
        p !== -1 && this._entries.splice(p, 1);
      };
    }
    Dm.$inject = ["eventBus", "elementRegistry", "canvas"], Om.$inject = ["eventBus", "canvas"];
    var j1 = 180, F1 = 160;
    function Do(s, p) {
      this._eventBus = s, this._moddle = p;
      var h = this;
      s.on("import.render.start", 1500, function(m, v) {
        h._handleImport(v.definitions);
      });
    }
    function Nm(s) {
      return V(s, "bpmndi:BPMNDiagram") ? s : Nm(s.$parent);
    }
    Do.prototype._handleImport = function(s) {
      if (s.diagrams) {
        var p = this;
        this._definitions = s, this._processToDiagramMap = {}, s.diagrams.forEach(function(m) {
          m.plane && m.plane.bpmnElement && (p._processToDiagramMap[m.plane.bpmnElement.id] = m);
        });
        var h = [];
        s.diagrams.forEach(function(m) {
          var v = p._createNewDiagrams(m.plane);
          Array.prototype.push.apply(h, v);
        }), h.forEach(function(m) {
          p._movePlaneElementsToOrigin(m.plane);
        });
      }
    }, Do.prototype._createNewDiagrams = function(s) {
      var p = this, h = [], m = [];
      s.get("planeElement").forEach(function(b) {
        var S = b.bpmnElement;
        if (S) {
          var M = S.$parent;
          V(S, "bpmn:SubProcess") && !b.isExpanded && h.push(S), function(O, q) {
            var ee = O.$parent;
            return !(!V(ee, "bpmn:SubProcess") || ee === q.bpmnElement || ae(O, ["bpmn:DataInputAssociation", "bpmn:DataOutputAssociation"]));
          }(S, s) && m.push({ diElement: b, parent: M });
        }
      });
      var v = [];
      return h.forEach(function(b) {
        if (!p._processToDiagramMap[b.id]) {
          var S = p._createDiagram(b);
          p._processToDiagramMap[b.id] = S, v.push(S);
        }
      }), m.forEach(function(b) {
        for (var S = b.diElement, M = b.parent; M && h.indexOf(M) === -1; )
          M = M.$parent;
        if (M) {
          var O = p._processToDiagramMap[M.id];
          p._moveToDiPlane(S, O.plane);
        }
      }), v;
    }, Do.prototype._movePlaneElementsToOrigin = function(s) {
      var p = s.get("planeElement"), h = function(b) {
        var S = { top: 1 / 0, right: -1 / 0, bottom: -1 / 0, left: 1 / 0 };
        return b.planeElement.forEach(function(M) {
          if (M.bounds) {
            var O = Rp(M.bounds);
            S.top = Math.min(O.top, S.top), S.left = Math.min(O.left, S.left);
          }
        }), function(M) {
          return { x: M.left, y: M.top, width: M.right - M.left, height: M.bottom - M.top };
        }(S);
      }(s), m = h.x - j1, v = h.y - F1;
      p.forEach(function(b) {
        b.waypoint ? b.waypoint.forEach(function(S) {
          S.x = S.x - m, S.y = S.y - v;
        }) : b.bounds && (b.bounds.x = b.bounds.x - m, b.bounds.y = b.bounds.y - v);
      });
    }, Do.prototype._moveToDiPlane = function(s, p) {
      var h = Nm(s).plane.get("planeElement");
      h.splice(h.indexOf(s), 1), p.get("planeElement").push(s);
    }, Do.prototype._createDiagram = function(s) {
      var p = this._moddle.create("bpmndi:BPMNPlane", { bpmnElement: s }), h = this._moddle.create("bpmndi:BPMNDiagram", { plane: p });
      return p.$parent = h, p.bpmnElement = s, h.$parent = this._definitions, this._definitions.diagrams.push(h), h;
    }, Do.$inject = ["eventBus", "moddle"];
    var Hc = 250;
    function zr(s, p, h, m) {
      Kn.call(this, p), this._canvas = s, this._eventBus = p, this._elementRegistry = h, this._overlays = m;
      var v = this;
      this.executed("shape.toggleCollapse", Hc, function(b) {
        var S = b.shape;
        v._canDrillDown(S) ? v._addOverlay(S) : v._removeOverlay(S);
      }, !0), this.reverted("shape.toggleCollapse", Hc, function(b) {
        var S = b.shape;
        v._canDrillDown(S) ? v._addOverlay(S) : v._removeOverlay(S);
      }, !0), this.executed(["shape.create", "shape.move", "shape.delete"], Hc, function(b) {
        var S = b.oldParent, M = b.newParent || b.parent, O = b.shape;
        v._canDrillDown(O) && v._addOverlay(O), v._updateDrilldownOverlay(S), v._updateDrilldownOverlay(M), v._updateDrilldownOverlay(O);
      }, !0), this.reverted(["shape.create", "shape.move", "shape.delete"], Hc, function(b) {
        var S = b.oldParent, M = b.newParent || b.parent, O = b.shape;
        v._canDrillDown(O) && v._addOverlay(O), v._updateDrilldownOverlay(S), v._updateDrilldownOverlay(M), v._updateDrilldownOverlay(O);
      }, !0), p.on("import.render.complete", function() {
        h.filter(function(b) {
          return v._canDrillDown(b);
        }).map(function(b) {
          v._addOverlay(b);
        });
      });
    }
    n(zr, Kn), zr.prototype._updateDrilldownOverlay = function(s) {
      var p = this._canvas;
      if (s) {
        var h = p.findRoot(s);
        h && this._updateOverlayVisibility(h);
      }
    }, zr.prototype._canDrillDown = function(s) {
      var p = this._canvas;
      return V(s, "bpmn:SubProcess") && p.findRoot(Pp(s));
    }, zr.prototype._updateOverlayVisibility = function(s) {
      var p = this._overlays, h = ie(s), m = p.get({ element: h.id, type: "drilldown" })[0];
      if (m) {
        var v = h && h.get("flowElements") && h.get("flowElements").length;
        To(m.html).toggle("bjs-drilldown-empty", !v);
      }
    }, zr.prototype._addOverlay = function(s) {
      var p = this._canvas, h = this._overlays;
      h.get({ element: s, type: "drilldown" }).length && this._removeOverlay(s);
      var m = $t('<button class="bjs-drilldown"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4.81801948,3.50735931 L10.4996894,9.1896894 L10.5,4 L12,4 L12,12 L4,12 L4,10.5 L9.6896894,10.4996894 L3.75735931,4.56801948 C3.46446609,4.27512627 3.46446609,3.80025253 3.75735931,3.50735931 C4.05025253,3.21446609 4.52512627,3.21446609 4.81801948,3.50735931 Z"/></svg></button>');
      m.addEventListener("click", function() {
        p.setRootElement(p.findRoot(Pp(s)));
      }), h.add(s, "drilldown", { position: { bottom: -7, right: -8 }, html: m }), this._updateOverlayVisibility(s);
    }, zr.prototype._removeOverlay = function(s) {
      this._overlays.remove({ element: s, type: "drilldown" });
    }, zr.$inject = ["canvas", "eventBus", "elementRegistry", "overlays"];
    var H1 = { __depends__: [km, N1, B1], __init__: ["drilldownBreadcrumbs", "drilldownOverlayBehavior", "drilldownCentering", "subprocessCompatibility"], drilldownBreadcrumbs: ["type", Dm], drilldownCentering: ["type", Om], drilldownOverlayBehavior: ["type", zr], subprocessCompatibility: ["type", Do] };
    function Oo(s, p) {
      this._eventBus = s, this.offset = 5;
      var h = p.cls("djs-outline", ["no-fill"]), m = this;
      function v(b) {
        var S = Ee("rect");
        return Ne(S, $({ x: 0, y: 0, rx: 4, width: 100, height: 100 }, h)), S;
      }
      s.on(["shape.added", "shape.changed"], 500, function(b) {
        var S = b.element, M = b.gfx, O = Yn(".djs-outline", M);
        O || fe(M, O = m.getOutline(S) || v()), m.updateShapeOutline(O, S);
      }), s.on(["connection.added", "connection.changed"], function(b) {
        var S = b.element, M = b.gfx, O = Yn(".djs-outline", M);
        O || fe(M, O = v()), m.updateConnectionOutline(O, S);
      });
    }
    Oo.prototype.updateShapeOutline = function(s, p) {
      var h = !1, m = this._getProviders();
      m.length && x(m, function(v) {
        h = h || v.updateOutline(p, s);
      }), h || Ne(s, { x: -this.offset, y: -this.offset, width: p.width + 2 * this.offset, height: p.height + 2 * this.offset });
    }, Oo.prototype.updateConnectionOutline = function(s, p) {
      var h = Mo(p);
      Ne(s, { x: h.x - this.offset, y: h.y - this.offset, width: h.width + 2 * this.offset, height: h.height + 2 * this.offset });
    }, Oo.prototype.registerProvider = function(s, p) {
      p || (p = s, s = 1e3), this._eventBus.on("outline.getProviders", s, function(h) {
        h.providers.push(p);
      });
    }, Oo.prototype._getProviders = function() {
      var s = this._eventBus.createEvent({ type: "outline.getProviders", providers: [] });
      return this._eventBus.fire(s), s.providers;
    }, Oo.prototype.getOutline = function(s) {
      var p;
      return x(this._getProviders(), function(h) {
        d(h.getOutline) && (p = p || h.getOutline(s));
      }), p;
    }, Oo.$inject = ["eventBus", "styles", "elementRegistry"];
    var Bm = { __init__: ["outline"], outline: ["type", Oo] };
    const z1 = { width: 36, height: 50 }, V1 = { width: 50, height: 50 };
    function Lm(s, p, h) {
      return Ee("path", { d: s, strokeWidth: 2, transform: `translate(${p.x}, ${p.y})`, ...h });
    }
    function zc(s, p) {
      this._styles = p, s.registerProvider(this);
    }
    function Im(s, p) {
      var h;
      return p === "bpmn:DataObjectReference" ? h = z1 : p === "bpmn:DataStoreReference" && (h = V1), s.width === h.width && s.height === h.height;
    }
    zc.$inject = ["outline", "styles"], zc.prototype.getOutline = function(s) {
      const p = this._styles.cls("djs-outline", ["no-fill"]);
      var h;
      if (!Ve(s))
        return V(s, "bpmn:Gateway") ? ($((h = Ee("rect")).style, { "transform-box": "fill-box", transform: "rotate(45deg)", "transform-origin": "center" }), Ne(h, $({ x: 2, y: 2, rx: 4, width: s.width - 4, height: s.height - 4 }, p))) : ae(s, ["bpmn:Task", "bpmn:SubProcess", "bpmn:Group"]) ? Ne(h = Ee("rect"), $({ x: -5, y: -5, rx: 14, width: s.width + 10, height: s.height + 10 }, p)) : V(s, "bpmn:EndEvent") ? Ne(h = Ee("circle"), $({ cx: s.width / 2, cy: s.height / 2, r: s.width / 2 + 5 + 1 }, p)) : V(s, "bpmn:Event") ? Ne(h = Ee("circle"), $({ cx: s.width / 2, cy: s.height / 2, r: s.width / 2 + 5 }, p)) : V(s, "bpmn:DataObjectReference") && Im(s, "bpmn:DataObjectReference") ? h = Lm("M44.7648 11.3263L36.9892 2.64074C36.0451 1.58628 34.5651 0.988708 33.1904 0.988708H5.98667C3.22688 0.988708 0.989624 3.34892 0.989624 6.26039V55.0235C0.989624 57.9349 3.22688 60.2952 5.98667 60.2952H40.966C43.7257 60.2952 45.963 57.9349 45.963 55.0235V14.9459C45.963 13.5998 45.6407 12.3048 44.7648 11.3263Z", { x: -6, y: -6 }, p) : V(s, "bpmn:DataStoreReference") && Im(s, "bpmn:DataStoreReference") && (h = Lm("M1.03845 48.1347C1.03845 49.3511 1.07295 50.758 1.38342 52.064C1.69949 53.3938 2.32428 54.7154 3.56383 55.6428C6.02533 57.4841 10.1161 58.7685 14.8212 59.6067C19.5772 60.4538 25.1388 60.8738 30.6831 60.8738C36.2276 60.8738 41.7891 60.4538 46.545 59.6067C51.2504 58.7687 55.3412 57.4842 57.8028 55.6429C59.0424 54.7156 59.6673 53.3938 59.9834 52.064C60.2938 50.7579 60.3285 49.351 60.3285 48.1344V13.8415C60.3285 12.6249 60.2938 11.218 59.9834 9.91171C59.6673 8.58194 59.0423 7.2602 57.8027 6.33294C55.341 4.49168 51.2503 3.20723 46.545 2.36914C41.7891 1.522 36.2276 1.10204 30.6831 1.10205C25.1388 1.10206 19.5772 1.52206 14.8213 2.36923C10.1162 3.20734 6.02543 4.49183 3.5639 6.33314C2.32433 7.26038 1.69951 8.58206 1.38343 9.91181C1.07295 11.2179 1.03845 12.6247 1.03845 13.8411V48.1347Z", { x: -6, y: -6 }, p)), h;
    }, zc.prototype.updateOutline = function(s, p) {
      if (!Ve(s))
        return ae(s, ["bpmn:SubProcess", "bpmn:Group"]) ? (Ne(p, { width: s.width + 10, height: s.height + 10 }), !0) : !!ae(s, ["bpmn:Event", "bpmn:Gateway", "bpmn:DataStoreReference", "bpmn:DataObjectReference"]);
    };
    var W1 = { __depends__: [Bm], __init__: ["outlineProvider"], outlineProvider: ["type", zc] };
    function $m(s) {
      return s.originalEvent || s.srcEvent;
    }
    function jm(s) {
      return s.pointers && s.pointers.length && (s = s.pointers[0]), s.touches && s.touches.length && (s = s.touches[0]), s ? { x: s.clientX, y: s.clientY } : null;
    }
    function Fm(s, p) {
      return ($m(s) || s).button === p;
    }
    function Vc(s) {
      return Fm(s, 0);
    }
    function G1(s) {
      return !0;
    }
    function Wc(s) {
      return Vc(s) || function(p) {
        return Fm(p, 1);
      }(s);
    }
    function Hm(s, p, h) {
      var m = this;
      function v(Y, te, J) {
        var ce, ge;
        (function(Je, We) {
          var Oe = O[Je] || Vc;
          return !Oe(We);
        })(Y, te) || (J ? ge = p.getGraphics(J) : (ce = te.delegateTarget || te.target) && (ge = ce, J = p.get(ge)), ge && J && s.fire(Y, { element: J, gfx: ge, originalEvent: te }) === !1 && (te.stopPropagation(), te.preventDefault()));
      }
      var b = {};
      function S(Y) {
        return b[Y];
      }
      var M = { click: "element.click", contextmenu: "element.contextmenu", dblclick: "element.dblclick", mousedown: "element.mousedown", mousemove: "element.mousemove", mouseover: "element.hover", mouseout: "element.out", mouseup: "element.mouseup" }, O = { "element.contextmenu": G1, "element.mousedown": Wc, "element.mouseup": Wc, "element.click": Wc, "element.dblclick": Wc }, q = "svg, .djs-element";
      function ee(Y, te, J, ce) {
        var ge = b[J] = function(Je) {
          v(J, Je);
        };
        ce && (O[J] = ce), ge.$delegate = Gt.bind(Y, q, te, ge);
      }
      function pe(Y, te, J) {
        var ce = S(J);
        ce && Gt.unbind(Y, te, ce.$delegate);
      }
      s.on("canvas.destroy", function(Y) {
        var te;
        te = Y.svg, x(M, function(J, ce) {
          pe(te, ce, J);
        });
      }), s.on("canvas.init", function(Y) {
        var te;
        te = Y.svg, x(M, function(J, ce) {
          ee(te, ce, J);
        });
      }), s.on(["shape.added", "connection.added"], function(Y) {
        var te = Y.element, J = Y.gfx;
        s.fire("interactionEvents.createHit", { element: te, gfx: J });
      }), s.on(["shape.changed", "connection.changed"], 500, function(Y) {
        var te = Y.element, J = Y.gfx;
        s.fire("interactionEvents.updateHit", { element: te, gfx: J });
      }), s.on("interactionEvents.createHit", 500, function(Y) {
        var te = Y.element, J = Y.gfx;
        m.createDefaultHit(te, J);
      }), s.on("interactionEvents.updateHit", function(Y) {
        var te = Y.element, J = Y.gfx;
        m.updateDefaultHit(te, J);
      });
      var be = Ie("djs-hit djs-hit-stroke"), Te = Ie("djs-hit djs-hit-click-stroke"), Re = { all: Ie("djs-hit djs-hit-all"), "click-stroke": Te, stroke: be, "no-move": Ie("djs-hit djs-hit-no-move") };
      function Ie(Y, te) {
        return te = $({ stroke: "white", strokeWidth: 15 }, te || {}), h.cls(Y, ["no-fill", "no-border"], te);
      }
      function re(Y, te) {
        var J = Re[te];
        if (!J)
          throw new Error("invalid hit type <" + te + ">");
        return Ne(Y, J), Y;
      }
      function ve(Y, te) {
        fe(Y, te);
      }
      this.removeHits = function(Y) {
        var te;
        x((te = ".djs-hit", (Y || document).querySelectorAll(te)), F);
      }, this.createDefaultHit = function(Y, te) {
        var J, ce = Y.waypoints, ge = Y.isFrame;
        return ce ? this.createWaypointsHit(te, ce) : (J = ge ? "stroke" : "all", this.createBoxHit(te, J, { width: Y.width, height: Y.height }));
      }, this.createWaypointsHit = function(Y, te) {
        var J = os(te);
        return re(J, "stroke"), ve(Y, J), J;
      }, this.createBoxHit = function(Y, te, J) {
        J = $({ x: 0, y: 0 }, J);
        var ce = Ee("rect");
        return re(ce, te), Ne(ce, J), ve(Y, ce), ce;
      }, this.updateDefaultHit = function(Y, te) {
        var J = Yn(".djs-hit", te);
        if (J)
          return Y.waypoints ? Mc(J, Y.waypoints) : Ne(J, { width: Y.width, height: Y.height }), J;
      }, this.fire = v, this.triggerMouseEvent = function(Y, te, J) {
        var ce = M[Y];
        if (!ce)
          throw new Error("unmapped DOM event name <" + Y + ">");
        return v(ce, te, J);
      }, this.mouseHandler = S, this.registerEvent = ee, this.unregisterEvent = pe;
    }
    Hm.$inject = ["eventBus", "elementRegistry", "styles"];
    var U1 = { __init__: ["interactionEvents"], interactionEvents: ["type", Hm] };
    function ya(s, p) {
      this._eventBus = s, this._canvas = p, this._selectedElements = [];
      var h = this;
      s.on(["shape.remove", "connection.remove"], function(m) {
        var v = m.element;
        h.deselect(v);
      }), s.on(["diagram.clear", "root.set"], function(m) {
        h.select(null);
      });
    }
    ya.$inject = ["eventBus", "canvas"], ya.prototype.deselect = function(s) {
      var p = this._selectedElements, h = p.indexOf(s);
      if (h !== -1) {
        var m = p.slice();
        p.splice(h, 1), this._eventBus.fire("selection.changed", { oldSelection: m, newSelection: p });
      }
    }, ya.prototype.get = function() {
      return this._selectedElements;
    }, ya.prototype.isSelected = function(s) {
      return this._selectedElements.indexOf(s) !== -1;
    }, ya.prototype.select = function(s, p) {
      var h = this._selectedElements, m = h.slice();
      c(s) || (s = s ? [s] : []);
      var v = this._canvas, b = v.getRootElement();
      s = s.filter(function(S) {
        var M = v.findRoot(S);
        return b === M;
      }), p ? x(s, function(S) {
        h.indexOf(S) === -1 && h.push(S);
      }) : this._selectedElements = h = s.slice(), this._eventBus.fire("selection.changed", { oldSelection: m, newSelection: h });
    };
    var zm = "hover", Vm = "selected";
    function Tp(s, p, h) {
      this._canvas = s;
      var m = this;
      function v(S, M) {
        s.addMarker(S, M);
      }
      function b(S, M) {
        s.removeMarker(S, M);
      }
      this._multiSelectionBox = null, p.on("element.hover", function(S) {
        v(S.element, zm);
      }), p.on("element.out", function(S) {
        b(S.element, zm);
      }), p.on("selection.changed", function(S) {
        var M = S.oldSelection, O = S.newSelection;
        x(M, function(q) {
          O.indexOf(q) === -1 && b(q, Vm);
        }), x(O, function(q) {
          M.indexOf(q) === -1 && v(q, Vm);
        }), m._updateSelectionOutline(O);
      }), p.on("element.changed", function(S) {
        h.isSelected(S.element) && m._updateSelectionOutline(h.get());
      });
    }
    function Wm(s, p, h, m) {
      s.on("create.end", 500, function(v) {
        var b = v.context, S = b.canExecute, M = b.elements, O = (b.hints || {}).autoSelect;
        if (S) {
          if (O === !1)
            return;
          c(O) ? p.select(O) : p.select(M.filter(Y1));
        }
      }), s.on("connect.end", 500, function(v) {
        var b = v.context.connection;
        b && p.select(b);
      }), s.on("shape.move.end", 500, function(v) {
        var b = v.previousSelection || [], S = m.get(v.context.shape.id);
        g(b, function(M) {
          return S.id === M.id;
        }) || p.select(S);
      }), s.on("element.click", function(v) {
        if (Vc(v)) {
          var b = v.element;
          b === h.getRootElement() && (b = null);
          var S = p.isSelected(b), M = p.get().length > 1, O = function(q) {
            var ee = $m(q) || q;
            return Vc(q) && ee.shiftKey;
          }(v);
          if (S && M)
            return O ? p.deselect(b) : p.select(b);
          S ? p.deselect(b) : p.select(b, O);
        }
      });
    }
    function Y1(s) {
      return !s.hidden;
    }
    Tp.$inject = ["canvas", "eventBus", "selection"], Tp.prototype._updateSelectionOutline = function(s) {
      var p = this._canvas.getLayer("selectionOutline");
      K(p);
      var h = s.length > 1;
      if (E(this._canvas.getContainer())[h ? "add" : "remove"]("djs-multi-select"), h) {
        var m = function(b) {
          return { x: b.x - 6, y: b.y - 6, width: b.width + 12, height: b.height + 12 };
        }(Mo(s)), v = Ee("rect");
        Ne(v, $({ rx: 3 }, m)), E(v).add("djs-selection-outline"), fe(p, v);
      }
    }, Wm.$inject = ["eventBus", "selection", "canvas", "elementRegistry"];
    var K1 = { __init__: ["selectionVisuals", "selectionBehavior"], __depends__: [U1, Bm], selection: ["type", ya], selectionVisuals: ["type", Tp], selectionBehavior: ["type", Wm] };
    const q1 = /^class[ {]/;
    function kp(s) {
      return Array.isArray(s);
    }
    function Mp(s, p) {
      return Object.prototype.hasOwnProperty.call(s, p);
    }
    function Gc(...s) {
      s.length === 1 && kp(s[0]) && (s = s[0]);
      const p = (s = [...s]).pop();
      return p.$inject = s, p;
    }
    const X1 = /constructor\s*[^(]*\(\s*([^)]*)\)/m, Z1 = /^(?:async\s+)?(?:function\s*[^(]*)?(?:\(\s*([^)]*)\)|(\w+))/m, J1 = /\/\*([^*]*)\*\//m;
    function Q1(s) {
      if (typeof s != "function")
        throw new Error(`Cannot annotate "${s}". Expected a function!`);
      const p = s.toString().match(function(m) {
        return q1.test(m.toString());
      }(s) ? X1 : Z1);
      if (!p)
        return [];
      const h = p[1] || p[2];
      return h && h.split(",").map((m) => {
        const v = m.match(J1);
        return (v && v[1] || m).trim();
      }) || [];
    }
    function Gm(s, p) {
      const h = p || { get: function(Y, te) {
        if (m.push(Y), te === !1)
          return null;
        throw M(`No provider for "${Y}"!`);
      } }, m = [], v = this._providers = Object.create(h._providers || null), b = this._instances = /* @__PURE__ */ Object.create(null), S = b.injector = this, M = function(Y) {
        const te = m.join(" -> ");
        return m.length = 0, new Error(te ? `${Y} (Resolving: ${te})` : Y);
      };
      function O(Y, te) {
        if (!v[Y] && Y.includes(".")) {
          const J = Y.split(".");
          let ce = O(J.shift());
          for (; J.length; )
            ce = ce[J.shift()];
          return ce;
        }
        if (Mp(b, Y))
          return b[Y];
        if (Mp(v, Y)) {
          if (m.indexOf(Y) !== -1)
            throw m.push(Y), M("Cannot resolve circular dependency!");
          return m.push(Y), b[Y] = v[Y][0](v[Y][1]), m.pop(), b[Y];
        }
        return h.get(Y, te);
      }
      function q(Y, te) {
        if (te === void 0 && (te = {}), typeof Y != "function") {
          if (!kp(Y))
            throw M(`Cannot invoke "${Y}". Expected a function!`);
          Y = Gc(Y.slice());
        }
        return { fn: Y, dependencies: (Y.$inject || Q1(Y)).map((J) => Mp(te, J) ? te[J] : O(J)) };
      }
      function ee(Y) {
        const { fn: te, dependencies: J } = q(Y);
        return new (Function.prototype.bind.call(te, null, ...J))();
      }
      function pe(Y, te, J) {
        const { fn: ce, dependencies: ge } = q(Y, J);
        return ce.apply(te, ge);
      }
      function be(Y) {
        return Gc((te) => Y.get(te));
      }
      function Te(Y, te) {
        if (te && te.length) {
          const J = /* @__PURE__ */ Object.create(null), ce = /* @__PURE__ */ Object.create(null), ge = [], Je = [], We = [];
          let Oe, Ft, ye, me;
          for (let He in v)
            Oe = v[He], te.indexOf(He) !== -1 && (Oe[2] === "private" ? (Ft = ge.indexOf(Oe[3]), Ft === -1 ? (ye = Oe[3].createChild([], te), me = be(ye), ge.push(Oe[3]), Je.push(ye), We.push(me), J[He] = [me, He, "private", ye]) : J[He] = [We[Ft], He, "private", Je[Ft]]) : J[He] = [Oe[2], Oe[1]], ce[He] = !0), Oe[2] !== "factory" && Oe[2] !== "type" || !Oe[1].$scope || te.forEach((nt) => {
              Oe[1].$scope.indexOf(nt) !== -1 && (J[He] = [Oe[2], Oe[1]], ce[nt] = !0);
            });
          te.forEach((He) => {
            if (!ce[He])
              throw new Error('No provider for "' + He + '". Cannot use provider from the parent!');
          }), Y.unshift(J);
        }
        return new Gm(Y, S);
      }
      const Re = { factory: pe, type: ee, value: function(Y) {
        return Y;
      } };
      function Ie(Y, te) {
        const J = Y.__init__ || [];
        return function() {
          J.forEach((ce) => {
            typeof ce == "string" ? te.get(ce) : te.invoke(ce);
          });
        };
      }
      function re(Y) {
        const te = Y.__exports__;
        if (te) {
          const J = Y.__modules__, ce = Object.keys(Y).reduce((Oe, Ft) => (Ft !== "__exports__" && Ft !== "__modules__" && Ft !== "__init__" && Ft !== "__depends__" && (Oe[Ft] = Y[Ft]), Oe), /* @__PURE__ */ Object.create(null)), ge = Te((J || []).concat(ce)), Je = Gc(function(Oe) {
            return ge.get(Oe);
          });
          te.forEach(function(Oe) {
            v[Oe] = [Je, Oe, "private", ge];
          });
          const We = (Y.__init__ || []).slice();
          return We.unshift(function() {
            ge.init();
          }), Ie(Y = Object.assign({}, Y, { __init__: We }), ge);
        }
        return Object.keys(Y).forEach(function(J) {
          if (J === "__init__" || J === "__depends__")
            return;
          const ce = Y[J];
          if (ce[2] === "private")
            return void (v[J] = ce);
          const ge = ce[0], Je = ce[1];
          v[J] = [Re[ge], ew(ge, Je), ge];
        }), Ie(Y, S);
      }
      function ve(Y, te) {
        return Y.indexOf(te) !== -1 || (Y = (te.__depends__ || []).reduce(ve, Y)).indexOf(te) !== -1 ? Y : Y.concat(te);
      }
      this.get = O, this.invoke = pe, this.instantiate = ee, this.createChild = Te, this.init = function(Y) {
        const te = Y.reduce(ve, []).map(re);
        let J = !1;
        return function() {
          J || (J = !0, te.forEach((ce) => ce()));
        };
      }(s);
    }
    function ew(s, p) {
      return s !== "value" && kp(p) && (p = Gc(p.slice())), p;
    }
    function Vr(s, p) {
      X.call(this, s, 1), this.CONNECTION_STYLE = p.style(["no-fill"], { strokeWidth: 5, stroke: "fuchsia" }), this.SHAPE_STYLE = p.style({ fill: "white", stroke: "fuchsia", strokeWidth: 2 }), this.FRAME_STYLE = p.style(["no-fill"], { stroke: "fuchsia", strokeDasharray: 4, strokeWidth: 2 });
    }
    n(Vr, X), Vr.prototype.canRender = function() {
      return !0;
    }, Vr.prototype.drawShape = function(s, p, h) {
      var m = Ee("rect");
      return Ne(m, { x: 0, y: 0, width: p.width || 0, height: p.height || 0 }), Cm(p) ? Ne(m, $({}, this.FRAME_STYLE, h || {})) : Ne(m, $({}, this.SHAPE_STYLE, h || {})), fe(s, m), m;
    }, Vr.prototype.drawConnection = function(s, p, h) {
      var m = os(p.waypoints, $({}, this.CONNECTION_STYLE, h || {}));
      return fe(s, m), m;
    }, Vr.prototype.getShapePath = function(s) {
      var p = s.x, h = s.y, m = s.width;
      return Xi([["M", p, h], ["l", m, 0], ["l", 0, s.height], ["l", -m, 0], ["z"]]);
    }, Vr.prototype.getConnectionPath = function(s) {
      var p, h, m = s.waypoints, v = [];
      for (p = 0; h = m[p]; p++)
        h = h.original || h, v.push([p === 0 ? "M" : "L", h.x, h.y]);
      return Xi(v);
    }, Vr.$inject = ["eventBus", "styles"];
    var tw = { __init__: ["defaultRenderer"], defaultRenderer: ["type", Vr], styles: ["type", function() {
      var s = { "no-fill": { fill: "none" }, "no-border": { strokeOpacity: 0 }, "no-events": { pointerEvents: "none" } }, p = this;
      this.cls = function(h, m, v) {
        return $(this.style(m, v), { class: h });
      }, this.style = function(h, m) {
        c(h) || m || (m = h, h = []);
        var v = w(h, function(b, S) {
          return $(b, s[S] || {});
        }, {});
        return m ? $(v, m) : v;
      }, this.computeStyle = function(h, m, v) {
        return c(m) || (v = m, m = []), p.style(m || [], $({}, v, h || {}));
      };
    }] };
    function Uc(s, p) {
      return Math.round(s * p) / p;
    }
    function Um(s) {
      return u(s) ? s + "px" : s;
    }
    function Ym(s, p, h) {
      const m = Ee("g");
      E(m).add(p);
      const v = h !== void 0 ? h : s.childNodes.length - 1;
      return s.insertBefore(m, s.childNodes[v] || null), m;
    }
    const nw = { shape: ["x", "y", "width", "height"], connection: ["waypoints"] };
    function Xe(s, p, h, m) {
      this._eventBus = p, this._elementRegistry = m, this._graphicsFactory = h, this._rootsIdx = 0, this._layers = {}, this._planes = [], this._rootElement = null, this._init(s || {});
    }
    function Km(s, p) {
      const h = "matrix(" + p.a + "," + p.b + "," + p.c + "," + p.d + "," + p.e + "," + p.f + ")";
      s.setAttribute("transform", h);
    }
    Xe.$inject = ["config.canvas", "eventBus", "graphicsFactory", "elementRegistry"], Xe.prototype._init = function(s) {
      const p = this._eventBus, h = this._container = function(b) {
        const S = (b = $({}, { width: "100%", height: "100%" }, b)).container || document.body, M = document.createElement("div");
        return M.setAttribute("class", "djs-container djs-parent"), Mn(M, { position: "relative", overflow: "hidden", width: Um(b.width), height: Um(b.height) }), S.appendChild(M), M;
      }(s), m = this._svg = Ee("svg");
      Ne(m, { width: "100%", height: "100%" }), fe(h, m);
      const v = this._viewport = Ym(m, "viewport");
      s.deferUpdate && (this._viewboxChanged = function(b, S) {
        let M, O, q, ee;
        function pe(Ie) {
          let re = Date.now(), ve = Ie ? 0 : ee + S - re;
          if (ve > 0)
            return be(ve);
          b.apply(q, O), Te();
        }
        function be(Ie) {
          M = setTimeout(pe, Ie);
        }
        function Te() {
          M && clearTimeout(M), M = ee = O = q = void 0;
        }
        function Re(...Ie) {
          ee = Date.now(), O = Ie, q = this, M || be(S);
        }
        return Re.flush = function() {
          M && pe(!0), Te();
        }, Re.cancel = Te, Re;
      }(W(this._viewboxChanged, this), 300)), p.on("diagram.init", () => {
        p.fire("canvas.init", { svg: m, viewport: v });
      }), p.on(["shape.added", "connection.added", "shape.removed", "connection.removed", "elements.changed", "root.set"], () => {
        delete this._cachedViewbox;
      }), p.on("diagram.destroy", 500, this._destroy, this), p.on("diagram.clear", 500, this._clear, this);
    }, Xe.prototype._destroy = function() {
      this._eventBus.fire("canvas.destroy", { svg: this._svg, viewport: this._viewport });
      const s = this._container.parentNode;
      s && s.removeChild(this._container), delete this._svg, delete this._container, delete this._layers, delete this._planes, delete this._rootElement, delete this._viewport;
    }, Xe.prototype._clear = function() {
      this._elementRegistry.getAll().forEach((s) => {
        const p = Rm(s);
        p === "root" ? this.removeRootElement(s) : this._removeElement(s, p);
      }), this._planes = [], this._rootElement = null, delete this._cachedViewbox;
    }, Xe.prototype.getDefaultLayer = function() {
      return this.getLayer("base", 0);
    }, Xe.prototype.getLayer = function(s, p) {
      if (!s)
        throw new Error("must specify a name");
      let h = this._layers[s];
      if (h || (h = this._layers[s] = this._createLayer(s, p)), p !== void 0 && h.index !== p)
        throw new Error("layer <" + s + "> already created at index <" + p + ">");
      return h.group;
    }, Xe.prototype._getChildIndex = function(s) {
      return w(this._layers, function(p, h) {
        return h.visible && s >= h.index && p++, p;
      }, 0);
    }, Xe.prototype._createLayer = function(s, p) {
      p === void 0 && (p = 1);
      const h = this._getChildIndex(p);
      return { group: Ym(this._viewport, "layer-" + s, h), index: p, visible: !0 };
    }, Xe.prototype.showLayer = function(s) {
      if (!s)
        throw new Error("must specify a name");
      const p = this._layers[s];
      if (!p)
        throw new Error("layer <" + s + "> does not exist");
      const h = this._viewport, m = p.group, v = p.index;
      if (p.visible)
        return m;
      const b = this._getChildIndex(v);
      return h.insertBefore(m, h.childNodes[b] || null), p.visible = !0, m;
    }, Xe.prototype.hideLayer = function(s) {
      if (!s)
        throw new Error("must specify a name");
      const p = this._layers[s];
      if (!p)
        throw new Error("layer <" + s + "> does not exist");
      const h = p.group;
      return p.visible && (F(h), p.visible = !1), h;
    }, Xe.prototype._removeLayer = function(s) {
      const p = this._layers[s];
      p && (delete this._layers[s], F(p.group));
    }, Xe.prototype.getActiveLayer = function() {
      const s = this._findPlaneForRoot(this.getRootElement());
      return s ? s.layer : null;
    }, Xe.prototype.findRoot = function(s) {
      return typeof s == "string" && (s = this._elementRegistry.get(s)), s ? (this._findPlaneForRoot(function(h) {
        for (; h.parent; )
          h = h.parent;
        return h;
      }(s)) || {}).rootElement : void 0;
    }, Xe.prototype.getRootElements = function() {
      return this._planes.map(function(s) {
        return s.rootElement;
      });
    }, Xe.prototype._findPlaneForRoot = function(s) {
      return g(this._planes, function(p) {
        return p.rootElement === s;
      });
    }, Xe.prototype.getContainer = function() {
      return this._container;
    }, Xe.prototype._updateMarker = function(s, p, h) {
      let m;
      s.id || (s = this._elementRegistry.get(s)), m = this._elementRegistry._elements[s.id], m && (x([m.gfx, m.secondaryGfx], function(v) {
        v && (h ? E(v).add(p) : E(v).remove(p));
      }), this._eventBus.fire("element.marker.update", { element: s, gfx: m.gfx, marker: p, add: !!h }));
    }, Xe.prototype.addMarker = function(s, p) {
      this._updateMarker(s, p, !0);
    }, Xe.prototype.removeMarker = function(s, p) {
      this._updateMarker(s, p, !1);
    }, Xe.prototype.hasMarker = function(s, p) {
      return s.id || (s = this._elementRegistry.get(s)), E(this.getGraphics(s)).has(p);
    }, Xe.prototype.toggleMarker = function(s, p) {
      this.hasMarker(s, p) ? this.removeMarker(s, p) : this.addMarker(s, p);
    }, Xe.prototype.getRootElement = function() {
      const s = this._rootElement;
      return s || this._planes.length ? s : this.setRootElement(this.addRootElement(null));
    }, Xe.prototype.addRootElement = function(s) {
      const p = this._rootsIdx++;
      s || (s = { id: "__implicitroot_" + p, children: [], isImplicit: !0 });
      const h = s.layer = "root-" + p;
      this._ensureValid("root", s);
      const m = this.getLayer(h, 0);
      return this.hideLayer(h), this._addRoot(s, m), this._planes.push({ rootElement: s, layer: m }), s;
    }, Xe.prototype.removeRootElement = function(s) {
      if (typeof s == "string" && (s = this._elementRegistry.get(s)), this._findPlaneForRoot(s))
        return this._removeRoot(s), this._removeLayer(s.layer), this._planes = this._planes.filter(function(p) {
          return p.rootElement !== s;
        }), this._rootElement === s && (this._rootElement = null), s;
    }, Xe.prototype.setRootElement = function(s) {
      if (s === this._rootElement)
        return s;
      let p;
      if (!s)
        throw new Error("rootElement required");
      return p = this._findPlaneForRoot(s), p || (s = this.addRootElement(s)), this._setRoot(s), s;
    }, Xe.prototype._removeRoot = function(s) {
      const p = this._elementRegistry, h = this._eventBus;
      h.fire("root.remove", { element: s }), h.fire("root.removed", { element: s }), p.remove(s);
    }, Xe.prototype._addRoot = function(s, p) {
      const h = this._elementRegistry, m = this._eventBus;
      m.fire("root.add", { element: s }), h.add(s, p), m.fire("root.added", { element: s, gfx: p });
    }, Xe.prototype._setRoot = function(s, p) {
      const h = this._rootElement;
      h && (this._elementRegistry.updateGraphics(h, null, !0), this.hideLayer(h.layer)), s && (p || (p = this._findPlaneForRoot(s).layer), this._elementRegistry.updateGraphics(s, this._svg, !0), this.showLayer(s.layer)), this._rootElement = s, this._eventBus.fire("root.set", { element: s });
    }, Xe.prototype._ensureValid = function(s, p) {
      if (!p.id)
        throw new Error("element must have an id");
      if (this._elementRegistry.get(p.id))
        throw new Error("element <" + p.id + "> already exists");
      const h = nw[s];
      if (!B(h, function(v) {
        return p[v] !== void 0;
      }))
        throw new Error("must supply { " + h.join(", ") + " } with " + s);
    }, Xe.prototype._setParent = function(s, p, h) {
      (function(m, v, b) {
        if (m && v) {
          typeof b != "number" && (b = -1);
          var S = m.indexOf(v);
          if (S !== -1) {
            if (S === b || b === -1)
              return;
            m.splice(S, 1);
          }
          b !== -1 ? m.splice(b, 0, v) : m.push(v);
        }
      })(p.children, s, h), s.parent = p;
    }, Xe.prototype._addElement = function(s, p, h, m) {
      h = h || this.getRootElement();
      const v = this._eventBus, b = this._graphicsFactory;
      this._ensureValid(s, p), v.fire(s + ".add", { element: p, parent: h }), this._setParent(p, h, m);
      const S = b.create(s, p, m);
      return this._elementRegistry.add(p, S), b.update(s, p, S), v.fire(s + ".added", { element: p, gfx: S }), p;
    }, Xe.prototype.addShape = function(s, p, h) {
      return this._addElement("shape", s, p, h);
    }, Xe.prototype.addConnection = function(s, p, h) {
      return this._addElement("connection", s, p, h);
    }, Xe.prototype._removeElement = function(s, p) {
      const h = this._elementRegistry, m = this._graphicsFactory, v = this._eventBus;
      if (s = h.get(s.id || s))
        return v.fire(p + ".remove", { element: s }), m.remove(s), function(b, S) {
          if (!b || !S)
            return -1;
          var M = b.indexOf(S);
          M !== -1 && b.splice(M, 1);
        }(s.parent && s.parent.children, s), s.parent = null, v.fire(p + ".removed", { element: s }), h.remove(s), s;
    }, Xe.prototype.removeShape = function(s) {
      return this._removeElement(s, "shape");
    }, Xe.prototype.removeConnection = function(s) {
      return this._removeElement(s, "connection");
    }, Xe.prototype.getGraphics = function(s, p) {
      return this._elementRegistry.getGraphics(s, p);
    }, Xe.prototype._changeViewbox = function(s) {
      this._eventBus.fire("canvas.viewbox.changing"), s.apply(this), this._cachedViewbox = null, this._viewboxChanged();
    }, Xe.prototype._viewboxChanged = function() {
      this._eventBus.fire("canvas.viewbox.changed", { viewbox: this.viewbox() });
    }, Xe.prototype.viewbox = function(s) {
      if (s === void 0 && this._cachedViewbox)
        return this._cachedViewbox;
      const p = this._viewport, h = this.getSize();
      let m, v, b, S, M, O, q;
      return s ? (this._changeViewbox(function() {
        M = Math.min(h.width / s.width, h.height / s.height);
        const ee = this._svg.createSVGMatrix().scale(M).translate(-s.x, -s.y);
        Hr(p, ee);
      }), s) : (b = this._rootElement ? this.getActiveLayer() : null, m = b && b.getBBox() || {}, S = Hr(p), v = S ? S.matrix : function(ee, pe, be, Te, Re, Ie) {
        var re = Mt().createSVGMatrix();
        switch (arguments.length) {
          case 0:
            return re;
          case 1:
            return ht(re, ee);
          case 6:
            return ht(re, { a: ee, b: pe, c: be, d: Te, e: Re, f: Ie });
        }
      }(), M = Uc(v.a, 1e3), O = Uc(-v.e || 0, 1e3), q = Uc(-v.f || 0, 1e3), s = this._cachedViewbox = { x: O ? O / M : 0, y: q ? q / M : 0, width: h.width / M, height: h.height / M, scale: M, inner: { width: m.width || 0, height: m.height || 0, x: m.x || 0, y: m.y || 0 }, outer: h });
    }, Xe.prototype.scroll = function(s) {
      const p = this._viewport;
      let h = p.getCTM();
      return s && this._changeViewbox(function() {
        s = $({ dx: 0, dy: 0 }, s || {}), h = this._svg.createSVGMatrix().translate(s.dx, s.dy).multiply(h), Km(p, h);
      }), { x: h.e, y: h.f };
    }, Xe.prototype.scrollToElement = function(s, p) {
      let h = 100;
      typeof s == "string" && (s = this._elementRegistry.get(s));
      const m = this.findRoot(s);
      if (m !== this.getRootElement() && this.setRootElement(m), m === s)
        return;
      p || (p = {}), typeof p == "number" && (h = p), p = { top: p.top || h, right: p.right || h, bottom: p.bottom || h, left: p.left || h };
      const v = Mo(s), b = Rp(v), S = this.viewbox(), M = this.zoom();
      let O, q;
      S.y += p.top / M, S.x += p.left / M, S.width -= (p.right + p.left) / M, S.height -= (p.bottom + p.top) / M;
      const ee = Rp(S);
      if (v.width < S.width && v.height < S.height) {
        const pe = Math.max(0, b.right - ee.right), be = Math.min(0, b.left - ee.left), Te = Math.max(0, b.bottom - ee.bottom), Re = Math.min(0, b.top - ee.top);
        O = pe || be, q = Te || Re;
      } else
        O = v.x - S.x, q = v.y - S.y;
      this.scroll({ dx: -O * M, dy: -q * M });
    }, Xe.prototype.zoom = function(s, p) {
      if (!s)
        return this.viewbox(s).scale;
      if (s === "fit-viewport")
        return this._fitViewport(p);
      let h, m;
      return this._changeViewbox(function() {
        typeof p != "object" && (h = this.viewbox().outer, p = { x: h.width / 2, y: h.height / 2 }), m = this._setZoom(s, p);
      }), Uc(m.a, 1e3);
    }, Xe.prototype._fitViewport = function(s) {
      const p = this.viewbox(), h = p.outer, m = p.inner;
      let v, b;
      return m.x >= 0 && m.y >= 0 && m.x + m.width <= h.width && m.y + m.height <= h.height && !s ? b = { x: 0, y: 0, width: Math.max(m.width + m.x, h.width), height: Math.max(m.height + m.y, h.height) } : (v = Math.min(1, h.width / m.width, h.height / m.height), b = { x: m.x + (s ? m.width / 2 - h.width / v / 2 : 0), y: m.y + (s ? m.height / 2 - h.height / v / 2 : 0), width: h.width / v, height: h.height / v }), this.viewbox(b), this.viewbox(!1).scale;
    }, Xe.prototype._setZoom = function(s, p) {
      const h = this._svg, m = this._viewport, v = h.createSVGMatrix(), b = h.createSVGPoint();
      let S, M, O, q, ee;
      O = m.getCTM();
      const pe = O.a;
      return p ? (S = $(b, p), M = S.matrixTransform(O.inverse()), q = v.translate(M.x, M.y).scale(1 / pe * s).translate(-M.x, -M.y), ee = O.multiply(q)) : ee = v.scale(s), Km(this._viewport, ee), ee;
    }, Xe.prototype.getSize = function() {
      return { width: this._container.clientWidth, height: this._container.clientHeight };
    }, Xe.prototype.getAbsoluteBBox = function(s) {
      const p = this.viewbox();
      let h;
      return s.waypoints ? h = this.getGraphics(s).getBBox() : h = s, { x: h.x * p.scale - p.x * p.scale, y: h.y * p.scale - p.y * p.scale, width: h.width * p.scale, height: h.height * p.scale };
    }, Xe.prototype.resized = function() {
      delete this._cachedViewbox, this._eventBus.fire("canvas.resized");
    };
    var ga = "data-element-id";
    function fi(s) {
      this._elements = {}, this._eventBus = s;
    }
    function qm(s, p, h) {
      var m = function(v, b, S, M) {
        var O = S.inverse;
        return Object.defineProperty(v, "remove", { value: function(q) {
          var ee = this.indexOf(q);
          return ee !== -1 && (this.splice(ee, 1), b.unset(q, O, M)), q;
        } }), Object.defineProperty(v, "contains", { value: function(q) {
          return this.indexOf(q) !== -1;
        } }), Object.defineProperty(v, "add", { value: function(q, ee) {
          var pe = this.indexOf(q);
          if (ee === void 0) {
            if (pe !== -1)
              return;
            ee = this.length;
          }
          pe !== -1 && this.splice(pe, 1), this.splice(ee, 0, q), pe === -1 && b.set(q, O, M);
        } }), Object.defineProperty(v, "__refs_collection", { value: !0 }), v;
      }(h[p.name] || [], s, p, h);
      Object.defineProperty(h, p.name, { enumerable: p.enumerable, value: m }), m.length && m.forEach(function(v) {
        s.set(v, p.inverse, h);
      });
    }
    function Ei(s, p) {
      if (!(this instanceof Ei))
        return new Ei(s, p);
      s.inverse = p, p.inverse = s, this.props = {}, this.props[s.name] = s, this.props[p.name] = p;
    }
    fi.$inject = ["eventBus"], fi.prototype.add = function(s, p, h) {
      var m = s.id;
      this._validateId(m), Ne(p, ga, m), h && Ne(h, ga, m), this._elements[m] = { element: s, gfx: p, secondaryGfx: h };
    }, fi.prototype.remove = function(s) {
      var p = this._elements, h = s.id || s, m = h && p[h];
      m && (Ne(m.gfx, ga, ""), m.secondaryGfx && Ne(m.secondaryGfx, ga, ""), delete p[h]);
    }, fi.prototype.updateId = function(s, p) {
      this._validateId(p), typeof s == "string" && (s = this.get(s)), this._eventBus.fire("element.updateId", { element: s, newId: p });
      var h = this.getGraphics(s), m = this.getGraphics(s, !0);
      this.remove(s), s.id = p, this.add(s, h, m);
    }, fi.prototype.updateGraphics = function(s, p, h) {
      var m = s.id || s, v = this._elements[m];
      return h ? v.secondaryGfx = p : v.gfx = p, p && Ne(p, ga, m), p;
    }, fi.prototype.get = function(s) {
      var p;
      p = typeof s == "string" ? s : s && Ne(s, ga);
      var h = this._elements[p];
      return h && h.element;
    }, fi.prototype.filter = function(s) {
      var p = [];
      return this.forEach(function(h, m) {
        s(h, m) && p.push(h);
      }), p;
    }, fi.prototype.find = function(s) {
      for (var p = this._elements, h = Object.keys(p), m = 0; m < h.length; m++) {
        var v = p[h[m]], b = v.element;
        if (s(b, v.gfx))
          return b;
      }
    }, fi.prototype.getAll = function() {
      return this.filter(function(s) {
        return s;
      });
    }, fi.prototype.forEach = function(s) {
      var p = this._elements;
      Object.keys(p).forEach(function(h) {
        var m = p[h], v = m.element, b = m.gfx;
        return s(v, b);
      });
    }, fi.prototype.getGraphics = function(s, p) {
      var h = s.id || s, m = this._elements[h];
      return m && (p ? m.secondaryGfx : m.gfx);
    }, fi.prototype._validateId = function(s) {
      if (!s)
        throw new Error("element must have an id");
      if (this._elements[s])
        throw new Error("element with id " + s + " already added");
    }, Ei.prototype.bind = function(s, p) {
      if (typeof p == "string") {
        if (!this.props[p])
          throw new Error("no property <" + p + "> in ref");
        p = this.props[p];
      }
      p.collection ? qm(this, p, s) : function(h, m, v) {
        var b = m.inverse, S = v[m.name];
        Object.defineProperty(v, m.name, { configurable: m.configurable, enumerable: m.enumerable, get: function() {
          return S;
        }, set: function(M) {
          if (M !== S) {
            var O = S;
            S = null, O && h.unset(O, b, v), S = M, h.set(S, b, v);
          }
        } });
      }(this, p, s);
    }, Ei.prototype.ensureRefsCollection = function(s, p) {
      var h = s[p.name];
      return function(m) {
        return m.__refs_collection === !0;
      }(h) || qm(this, p, s), h;
    }, Ei.prototype.ensureBound = function(s, p) {
      (function(h, m) {
        return Object.prototype.hasOwnProperty.call(h, m.name || m);
      })(s, p) || this.bind(s, p);
    }, Ei.prototype.unset = function(s, p, h) {
      s && (this.ensureBound(s, p), p.collection ? this.ensureRefsCollection(s, p).remove(h) : s[p.name] = void 0);
    }, Ei.prototype.set = function(s, p, h) {
      s && (this.ensureBound(s, p), p.collection ? this.ensureRefsCollection(s, p).add(h) : s[p.name] = h);
    };
    var Dp = new Ei({ name: "children", enumerable: !0, collection: !0 }, { name: "parent" }), Xm = new Ei({ name: "labels", enumerable: !0, collection: !0 }, { name: "labelTarget" }), Zm = new Ei({ name: "attachers", collection: !0 }, { name: "host" }), Jm = new Ei({ name: "outgoing", collection: !0 }, { name: "source" }), Qm = new Ei({ name: "incoming", collection: !0 }, { name: "target" });
    function cs() {
      Object.defineProperty(this, "businessObject", { writable: !0 }), Object.defineProperty(this, "label", { get: function() {
        return this.labels[0];
      }, set: function(s) {
        var p = this.label, h = this.labels;
        !s && p ? h.remove(p) : h.add(s, 0);
      } }), Dp.bind(this, "parent"), Xm.bind(this, "labels"), Jm.bind(this, "outgoing"), Qm.bind(this, "incoming");
    }
    function ls() {
      cs.call(this), Dp.bind(this, "children"), Zm.bind(this, "host"), Zm.bind(this, "attachers");
    }
    function ey() {
      cs.call(this), Dp.bind(this, "children");
    }
    function ty() {
      ls.call(this), Xm.bind(this, "labelTarget");
    }
    function ny() {
      cs.call(this), Jm.bind(this, "source"), Qm.bind(this, "target");
    }
    n(ls, cs), n(ey, ls), n(ty, ls), n(ny, cs);
    var iw = { connection: ny, shape: ls, label: ty, root: ey };
    function va() {
      this._uid = 12;
    }
    va.prototype.createRoot = function(s) {
      return this.create("root", s);
    }, va.prototype.createLabel = function(s) {
      return this.create("label", s);
    }, va.prototype.createShape = function(s) {
      return this.create("shape", s);
    }, va.prototype.createConnection = function(s) {
      return this.create("connection", s);
    }, va.prototype.create = function(s, p) {
      return (p = $({}, p || {})).id || (p.id = s + "_" + this._uid++), function(h, m) {
        var v = iw[h];
        if (!v)
          throw new Error("unknown type: <" + h + ">");
        return $(new v(), m);
      }(s, p);
    };
    var Yc = "__fn", rw = Array.prototype.slice;
    function ii() {
      this._listeners = {}, this.on("diagram.destroy", 1, this._destroy, this);
    }
    function us() {
    }
    function di(s, p) {
      this._eventBus = s, this._elementRegistry = p;
    }
    function iy(s, p, h) {
      var m = h || p.firstChild;
      s !== m && p.insertBefore(s, m);
    }
    ii.prototype.on = function(s, p, h, m) {
      if (s = c(s) ? s : [s], d(p) && (m = h, h = p, p = 1e3), !u(p))
        throw new Error("priority must be a number");
      var v = h;
      m && ((v = W(h, m))[Yc] = h[Yc] || h);
      var b = this;
      s.forEach(function(S) {
        b._addListener(S, { priority: p, callback: v, next: null });
      });
    }, ii.prototype.once = function(s, p, h, m) {
      var v = this;
      if (d(p) && (m = h, h = p, p = 1e3), !u(p))
        throw new Error("priority must be a number");
      function b() {
        b.__isTomb = !0;
        var S = h.apply(m, arguments);
        return v.off(s, b), S;
      }
      b[Yc] = h, this.on(s, p, b);
    }, ii.prototype.off = function(s, p) {
      s = c(s) ? s : [s];
      var h = this;
      s.forEach(function(m) {
        h._removeListener(m, p);
      });
    }, ii.prototype.createEvent = function(s) {
      var p = new us();
      return p.init(s), p;
    }, ii.prototype.fire = function(s, p) {
      var h, m, v, b;
      if (b = rw.call(arguments), typeof s == "object" && (s = (p = s).type), !s)
        throw new Error("no event type specified");
      if (m = this._listeners[s]) {
        h = p instanceof us ? p : this.createEvent(p), b[0] = h;
        var S = h.type;
        s !== S && (h.type = s);
        try {
          v = this._invokeListeners(h, b, m);
        } finally {
          s !== S && (h.type = S);
        }
        return v === void 0 && h.defaultPrevented && (v = !1), v;
      }
    }, ii.prototype.handleError = function(s) {
      return this.fire("error", { error: s }) === !1;
    }, ii.prototype._destroy = function() {
      this._listeners = {};
    }, ii.prototype._invokeListeners = function(s, p, h) {
      for (var m; h && !s.cancelBubble; )
        m = this._invokeListener(s, p, h), h = h.next;
      return m;
    }, ii.prototype._invokeListener = function(s, p, h) {
      var m;
      if (h.callback.__isTomb)
        return m;
      try {
        m = function(v, b) {
          return v.apply(null, b);
        }(h.callback, p), m !== void 0 && (s.returnValue = m, s.stopPropagation()), m === !1 && s.preventDefault();
      } catch (v) {
        if (!this.handleError(v))
          throw console.error("unhandled error in event listener", v), v;
      }
      return m;
    }, ii.prototype._addListener = function(s, p) {
      var h, m = this._getListeners(s);
      if (m) {
        for (; m; ) {
          if (m.priority < p.priority)
            return p.next = m, void (h ? h.next = p : this._setListeners(s, p));
          h = m, m = m.next;
        }
        h.next = p;
      } else
        this._setListeners(s, p);
    }, ii.prototype._getListeners = function(s) {
      return this._listeners[s];
    }, ii.prototype._setListeners = function(s, p) {
      this._listeners[s] = p;
    }, ii.prototype._removeListener = function(s, p) {
      var h, m, v, b = this._getListeners(s);
      if (p)
        for (; b; )
          h = b.next, (v = b.callback) !== p && v[Yc] !== p || (m ? m.next = h : this._setListeners(s, h)), m = b, b = h;
      else
        this._setListeners(s, null);
    }, us.prototype.stopPropagation = function() {
      this.cancelBubble = !0;
    }, us.prototype.preventDefault = function() {
      this.defaultPrevented = !0;
    }, us.prototype.init = function(s) {
      $(this, s || {});
    }, di.$inject = ["eventBus", "elementRegistry"], di.prototype._getChildrenContainer = function(s) {
      var p, h = this._elementRegistry.getGraphics(s);
      return s.parent ? (p = function(m) {
        return m.parentNode.childNodes[1];
      }(h), p || (E(p = Ee("g")).add("djs-children"), fe(h.parentNode, p))) : p = h, p;
    }, di.prototype._clear = function(s) {
      var p = function(h) {
        return h.childNodes[0];
      }(s);
      return Ic(p), p;
    }, di.prototype._createContainer = function(s, p, h, m) {
      var v = Ee("g");
      E(v).add("djs-group"), h !== void 0 ? iy(v, p, p.childNodes[h]) : fe(p, v);
      var b = Ee("g");
      E(b).add("djs-element"), E(b).add("djs-" + s), m && E(b).add("djs-frame"), fe(v, b);
      var S = Ee("g");
      return E(S).add("djs-visual"), fe(b, S), b;
    }, di.prototype.create = function(s, p, h) {
      var m = this._getChildrenContainer(p.parent);
      return this._createContainer(s, m, h, Cm(p));
    }, di.prototype.updateContainments = function(s) {
      var p, h = this, m = this._elementRegistry;
      p = w(s, function(v, b) {
        return b.parent && (v[b.parent.id] = b.parent), v;
      }, {}), x(p, function(v) {
        var b = v.children;
        if (b) {
          var S = h._getChildrenContainer(v);
          x(b.slice().reverse(), function(M) {
            iy(m.getGraphics(M).parentNode, S);
          });
        }
      });
    }, di.prototype.drawShape = function(s, p, h = {}) {
      return this._eventBus.fire("render.shape", { gfx: s, element: p, attrs: h });
    }, di.prototype.getShapePath = function(s) {
      return this._eventBus.fire("render.getShapePath", s);
    }, di.prototype.drawConnection = function(s, p, h = {}) {
      return this._eventBus.fire("render.connection", { gfx: s, element: p, attrs: h });
    }, di.prototype.getConnectionPath = function(s) {
      return this._eventBus.fire("render.getConnectionPath", s);
    }, di.prototype.update = function(s, p, h) {
      if (p.parent) {
        var m = this._clear(h);
        if (s === "shape")
          this.drawShape(m, p), bm(h, p.x, p.y);
        else {
          if (s !== "connection")
            throw new Error("unknown type: " + s);
          this.drawConnection(m, p);
        }
        p.hidden ? Ne(h, "display", "none") : Ne(h, "display", "block");
      }
    }, di.prototype.remove = function(s) {
      F(this._elementRegistry.getGraphics(s).parentNode);
    };
    var ow = { __depends__: [tw], __init__: ["canvas"], canvas: ["type", Xe], elementRegistry: ["type", fi], elementFactory: ["type", va], eventBus: ["type", ii], graphicsFactory: ["type", di] };
    function aw(s) {
      return function(p) {
        var h = new Gm(p);
        return h.init(), h;
      }([{ config: ["value", s = s || {}] }, ow].concat(s.modules || []));
    }
    function Wr(s, p) {
      this._injector = p || aw(s), this.get("eventBus").fire("diagram.init");
    }
    function Op() {
    }
    function ry(s, p) {
      this.model = s, this.properties = p;
    }
    Wr.prototype.get = function(s, p) {
      return this._injector.get(s, p);
    }, Wr.prototype.invoke = function(s, p, h) {
      return this._injector.invoke(s, p, h);
    }, Wr.prototype.destroy = function() {
      this.get("eventBus").fire("diagram.destroy");
    }, Wr.prototype.clear = function() {
      this.get("eventBus").fire("diagram.clear");
    }, Op.prototype.get = function(s) {
      return this.$model.properties.get(this, s);
    }, Op.prototype.set = function(s, p) {
      this.$model.properties.set(this, s, p);
    }, ry.prototype.createType = function(s) {
      var p = this.model, h = this.properties, m = Object.create(Op.prototype);
      x(s.properties, function(S) {
        S.isMany || S.default === void 0 || (m[S.name] = S.default);
      }), h.defineModel(m, p), h.defineDescriptor(m, s);
      var v = s.ns.name;
      function b(S) {
        h.define(this, "$type", { value: v, enumerable: !0 }), h.define(this, "$attrs", { value: {} }), h.define(this, "$parent", { writable: !0 }), x(S, W(function(M, O) {
          this.set(O, M);
        }, this));
      }
      return b.prototype = m, b.hasType = m.$instanceOf = this.model.hasType, h.defineModel(b, p), h.defineDescriptor(b, s), b;
    };
    var sw = { String: !0, Boolean: !0, Integer: !0, Real: !0, Element: !0 }, oy = { String: function(s) {
      return s;
    }, Boolean: function(s) {
      return s === "true";
    }, Integer: function(s) {
      return parseInt(s, 10);
    }, Real: function(s) {
      return parseFloat(s);
    } };
    function Np(s, p) {
      var h = oy[s];
      return h ? h(p) : p;
    }
    function Bp(s) {
      return !!sw[s];
    }
    function ay(s) {
      return !!oy[s];
    }
    function Fn(s, p) {
      var h, m, v = s.split(/:/);
      if (v.length === 1)
        h = s, m = p;
      else {
        if (v.length !== 2)
          throw new Error("expected <prefix:localName> or <localName>, got " + s);
        h = v[1], m = v[0];
      }
      return { name: s = (m ? m + ":" : "") + h, prefix: m, localName: h };
    }
    function hi(s) {
      this.ns = s, this.name = s.name, this.allTypes = [], this.allTypesByName = {}, this.properties = [], this.propertiesByName = {};
    }
    function Gr(s, p) {
      this.packageMap = {}, this.typeMap = {}, this.packages = [], this.properties = p, x(s, W(this.registerPackage, this));
    }
    function sy(s, p, h) {
      var m = p[h];
      if (m in s)
        throw new Error("package with " + h + " <" + m + "> already defined");
    }
    function No(s) {
      this.model = s;
    }
    function cy(s, p, h) {
      Object.defineProperty(s, p.name, { enumerable: !p.isReference, writable: !0, value: h, configurable: !0 });
    }
    function Lp(s) {
      return s.replace(/^:/, "");
    }
    function wi(s, p = {}) {
      this.properties = new No(this), this.factory = new ry(this, this.properties), this.registry = new Gr(s, this.properties), this.typeCache = {}, this.config = p;
    }
    hi.prototype.build = function() {
      return function(s, p) {
        let h = {}, m = Object(s);
        return x(p, function(v) {
          v in m && (h[v] = s[v]);
        }), h;
      }(this, ["ns", "name", "allTypes", "allTypesByName", "properties", "propertiesByName", "bodyProperty", "idProperty"]);
    }, hi.prototype.addProperty = function(s, p, h) {
      typeof p == "boolean" && (h = p, p = void 0), this.addNamedProperty(s, h !== !1);
      var m = this.properties;
      p !== void 0 ? m.splice(p, 0, s) : m.push(s);
    }, hi.prototype.replaceProperty = function(s, p, h) {
      var m = s.ns, v = this.properties, b = this.propertiesByName, S = s.name !== p.name;
      if (s.isId) {
        if (!p.isId)
          throw new Error("property <" + p.ns.name + "> must be id property to refine <" + s.ns.name + ">");
        this.setIdProperty(p, !1);
      }
      if (s.isBody) {
        if (!p.isBody)
          throw new Error("property <" + p.ns.name + "> must be body property to refine <" + s.ns.name + ">");
        this.setBodyProperty(p, !1);
      }
      var M = v.indexOf(s);
      if (M === -1)
        throw new Error("property <" + m.name + "> not found in property list");
      v.splice(M, 1), this.addProperty(p, h ? void 0 : M, S), b[m.name] = b[m.localName] = p;
    }, hi.prototype.redefineProperty = function(s, p, h) {
      var m = s.ns.prefix, v = p.split("#"), b = Fn(v[0], m), S = Fn(v[1], b.prefix).name, M = this.propertiesByName[S];
      if (!M)
        throw new Error("refined property <" + S + "> not found");
      this.replaceProperty(M, s, h), delete s.redefines;
    }, hi.prototype.addNamedProperty = function(s, p) {
      var h = s.ns, m = this.propertiesByName;
      p && (this.assertNotDefined(s, h.name), this.assertNotDefined(s, h.localName)), m[h.name] = m[h.localName] = s;
    }, hi.prototype.removeNamedProperty = function(s) {
      var p = s.ns, h = this.propertiesByName;
      delete h[p.name], delete h[p.localName];
    }, hi.prototype.setBodyProperty = function(s, p) {
      if (p && this.bodyProperty)
        throw new Error("body property defined multiple times (<" + this.bodyProperty.ns.name + ">, <" + s.ns.name + ">)");
      this.bodyProperty = s;
    }, hi.prototype.setIdProperty = function(s, p) {
      if (p && this.idProperty)
        throw new Error("id property defined multiple times (<" + this.idProperty.ns.name + ">, <" + s.ns.name + ">)");
      this.idProperty = s;
    }, hi.prototype.assertNotTrait = function(s) {
      if ((s.extends || []).length)
        throw new Error(`cannot create <${s.name}> extending <${s.extends}>`);
    }, hi.prototype.assertNotDefined = function(s, p) {
      var h = s.name, m = this.propertiesByName[h];
      if (m)
        throw new Error("property <" + h + "> already defined; override of <" + m.definedBy.ns.name + "#" + m.ns.name + "> by <" + s.definedBy.ns.name + "#" + s.ns.name + "> not allowed without redefines");
    }, hi.prototype.hasProperty = function(s) {
      return this.propertiesByName[s];
    }, hi.prototype.addTrait = function(s, p) {
      p && this.assertNotTrait(s);
      var h = this.allTypesByName, m = this.allTypes, v = s.name;
      v in h || (x(s.properties, W(function(b) {
        b = $({}, b, { name: b.ns.localName, inherited: p }), Object.defineProperty(b, "definedBy", { value: s });
        var S = b.replaces, M = b.redefines;
        S || M ? this.redefineProperty(b, S || M, S) : (b.isBody && this.setBodyProperty(b), b.isId && this.setIdProperty(b), this.addProperty(b));
      }, this)), m.push(s), h[v] = s);
    }, Gr.prototype.getPackage = function(s) {
      return this.packageMap[s];
    }, Gr.prototype.getPackages = function() {
      return this.packages;
    }, Gr.prototype.registerPackage = function(s) {
      s = $({}, s);
      var p = this.packageMap;
      sy(p, s, "prefix"), sy(p, s, "uri"), x(s.types, W(function(h) {
        this.registerType(h, s);
      }, this)), p[s.uri] = p[s.prefix] = s, this.packages.push(s);
    }, Gr.prototype.registerType = function(s, p) {
      var h = Fn((s = $({}, s, { superClass: (s.superClass || []).slice(), extends: (s.extends || []).slice(), properties: (s.properties || []).slice(), meta: $(s.meta || {}) })).name, p.prefix), m = h.name, v = {};
      x(s.properties, W(function(b) {
        var S = Fn(b.name, h.prefix), M = S.name;
        Bp(b.type) || (b.type = Fn(b.type, S.prefix).name), $(b, { ns: S, name: M }), v[M] = b;
      }, this)), $(s, { ns: h, name: m, propertiesByName: v }), x(s.extends, W(function(b) {
        var S = Fn(b, h.prefix), M = this.typeMap[S.name];
        M.traits = M.traits || [], M.traits.push(m);
      }, this)), this.definePackage(s, p), this.typeMap[m] = s;
    }, Gr.prototype.mapTypes = function(s, p, h) {
      var m = Bp(s.name) ? { name: s.name } : this.typeMap[s.name], v = this;
      function b(M, O) {
        var q = Fn(M, Bp(M) ? "" : s.prefix);
        v.mapTypes(q, p, O);
      }
      function S(M) {
        return b(M, !0);
      }
      if (!m)
        throw new Error("unknown type <" + s.name + ">");
      x(m.superClass, h ? S : function(M) {
        return b(M, !1);
      }), p(m, !h), x(m.traits, S);
    }, Gr.prototype.getEffectiveDescriptor = function(s) {
      var p = Fn(s), h = new hi(p);
      this.mapTypes(p, function(v, b) {
        h.addTrait(v, b);
      });
      var m = h.build();
      return this.definePackage(m, m.allTypes[m.allTypes.length - 1].$pkg), m;
    }, Gr.prototype.definePackage = function(s, p) {
      this.properties.define(s, "$pkg", { value: p });
    }, No.prototype.set = function(s, p, h) {
      if (!f(p) || !p.length)
        throw new TypeError("property name must be a non-empty string");
      var m = this.getProperty(s, p), v = m && m.name;
      h === void 0 ? m ? delete s[v] : delete s.$attrs[Lp(p)] : m ? v in s ? s[v] = h : cy(s, m, h) : s.$attrs[Lp(p)] = h;
    }, No.prototype.get = function(s, p) {
      var h = this.getProperty(s, p);
      if (!h)
        return s.$attrs[Lp(p)];
      var m = h.name;
      return !s[m] && h.isMany && cy(s, h, []), s[m];
    }, No.prototype.define = function(s, p, h) {
      if (!h.writable) {
        var m = h.value;
        delete (h = $({}, h, { get: function() {
          return m;
        } })).value;
      }
      Object.defineProperty(s, p, h);
    }, No.prototype.defineDescriptor = function(s, p) {
      this.define(s, "$descriptor", { value: p });
    }, No.prototype.defineModel = function(s, p) {
      this.define(s, "$model", { value: p });
    }, No.prototype.getProperty = function(s, p) {
      var h = this.model, m = h.getPropertyDescriptor(s, p);
      if (m)
        return m;
      if (p.includes(":"))
        return null;
      const v = h.config.strict;
      if (v !== void 0) {
        const b = new TypeError(`unknown property <${p}> on <${s.$type}>`);
        if (v)
          throw b;
        typeof console < "u" && console.warn(b);
      }
      return null;
    }, wi.prototype.create = function(s, p) {
      var h = this.getType(s);
      if (!h)
        throw new Error("unknown type <" + s + ">");
      return new h(p);
    }, wi.prototype.getType = function(s) {
      var p = this.typeCache, h = f(s) ? s : s.ns.name, m = p[h];
      return m || (s = this.registry.getEffectiveDescriptor(h), m = p[h] = this.factory.createType(s)), m;
    }, wi.prototype.createAny = function(s, p, h) {
      var m = Fn(s), v = { $type: s, $instanceOf: function(S) {
        return S === this.$type;
      }, get: function(S) {
        return this[S];
      }, set: function(S, M) {
        (function(O, q, ee) {
          let pe = O;
          x(q, function(be, Te) {
            if (typeof be != "number" && typeof be != "string")
              throw new Error("illegal key type: " + typeof be + ". Key should be of type number or string.");
            if (be === "constructor")
              throw new Error("illegal key: constructor");
            if (be === "__proto__")
              throw new Error("illegal key: __proto__");
            let Re = q[Te + 1], Ie = pe[be];
            a(Re) && Ie == null && (Ie = pe[be] = isNaN(+Re) ? {} : []), o(Re) ? o(ee) ? delete pe[be] : pe[be] = ee : pe = Ie;
          });
        })(this, [S], M);
      } }, b = { name: s, isGeneric: !0, ns: { prefix: m.prefix, localName: m.localName, uri: p } };
      return this.properties.defineDescriptor(v, b), this.properties.defineModel(v, this), this.properties.define(v, "get", { enumerable: !1, writable: !0 }), this.properties.define(v, "set", { enumerable: !1, writable: !0 }), this.properties.define(v, "$parent", { enumerable: !1, writable: !0 }), this.properties.define(v, "$instanceOf", { enumerable: !1, writable: !0 }), x(h, function(S, M) {
        l(S) && S.value !== void 0 ? v[S.name] = S.value : v[M] = S;
      }), v;
    }, wi.prototype.getPackage = function(s) {
      return this.registry.getPackage(s);
    }, wi.prototype.getPackages = function() {
      return this.registry.getPackages();
    }, wi.prototype.getElementDescriptor = function(s) {
      return s.$descriptor;
    }, wi.prototype.hasType = function(s, p) {
      return p === void 0 && (p = s, s = this), p in s.$model.getElementDescriptor(s).allTypesByName;
    }, wi.prototype.getPropertyDescriptor = function(s, p) {
      return this.getElementDescriptor(s).propertiesByName[p];
    }, wi.prototype.getTypeDescriptor = function(s) {
      return this.registry.typeMap[s];
    };
    var cw = String.fromCharCode, lw = Object.prototype.hasOwnProperty, uw = /&#(\d+);|&#x([0-9a-f]+);|&(\w+);/gi, ps = { amp: "&", apos: "'", gt: ">", lt: "<", quot: '"' };
    function pw(s, p, h, m) {
      return m ? lw.call(ps, m) ? ps[m] : "&" + m + ";" : cw(p || parseInt(h, 16));
    }
    function Bo(s) {
      return s.length > 3 && s.indexOf("&") !== -1 ? s.replace(uw, pw) : s;
    }
    Object.keys(ps).forEach(function(s) {
      ps[s.toUpperCase()] = ps[s];
    });
    var ly = "xsi:type", uy = "non-whitespace outside of root node";
    function _a(s) {
      return new Error(s);
    }
    function py(s) {
      return "missing namespace for prefix <" + s + ">";
    }
    function Kc(s) {
      return { get: s, enumerable: !0 };
    }
    function fw(s) {
      var p, h = {};
      for (p in s)
        h[p] = s[p];
      return h;
    }
    function Ip(s) {
      return s + "$uri";
    }
    function fy() {
      return { line: 0, column: 0 };
    }
    function dw(s) {
      throw s;
    }
    function dy(s) {
      if (!this)
        return new dy(s);
      var p, h, m, v, b, S, M, O, q, ee = s && s.proxy, pe = dw, be = fy, Te = !1, Re = !1, Ie = null, re = !1;
      function ve(te) {
        te instanceof Error || (te = _a(te)), Ie = te, pe(te, be);
      }
      function Y(te) {
        b && (te instanceof Error || (te = _a(te)), b(te, be));
      }
      this.on = function(te, J) {
        if (typeof J != "function")
          throw _a("required args <name, cb>");
        switch (te) {
          case "openTag":
            h = J;
            break;
          case "text":
            p = J;
            break;
          case "closeTag":
            m = J;
            break;
          case "error":
            pe = J;
            break;
          case "warn":
            b = J;
            break;
          case "cdata":
            v = J;
            break;
          case "attention":
            O = J;
            break;
          case "question":
            M = J;
            break;
          case "comment":
            S = J;
            break;
          default:
            throw _a("unsupported event: " + te);
        }
        return this;
      }, this.ns = function(te) {
        if (te === void 0 && (te = {}), typeof te != "object")
          throw _a("required args <nsMap={}>");
        var J, ce = {};
        for (J in te)
          ce[J] = te[J];
        return ce["http://www.w3.org/2001/XMLSchema-instance"] = "xsi", Re = !0, q = ce, this;
      }, this.parse = function(te) {
        if (typeof te != "string")
          throw _a("required args <xml=string>");
        return Ie = null, function(J) {
          var ce, ge, Je, We, Oe, Ft, ye, me, He, nt, st, mi = Re ? [] : null, Nt = Re ? function(zn) {
            var On, Ut, ri = {};
            for (On in zn)
              ri[Ut = zn[On]] = Ut, ri[Ip(Ut)] = On;
            return ri;
          }(q) : null, ji = [], Si = 0, wn = !1, Xn = !1, St = 0, lt = 0, wa = "", Qi = 0;
          function Sa() {
            if (st !== null)
              return st;
            var zn, On, Ut, ri, Sn, Bt, Rn, xt, yi, L, R, T = Re && Nt.xmlns, G = Re && Te ? [] : null, Q = Qi, xe = wa, Ge = xe.length, ut = {}, Yt = {};
            e:
              for (; Q < Ge; Q++)
                if (yi = !1, !((L = xe.charCodeAt(Q)) === 32 || L < 14 && L > 8)) {
                  for ((L < 65 || L > 122 || L > 90 && L < 97) && L !== 95 && L !== 58 && (Y("illegal first char attribute name"), yi = !0), R = Q + 1; R < Ge; R++)
                    if (!((L = xe.charCodeAt(R)) > 96 && L < 123 || L > 64 && L < 91 || L > 47 && L < 59 || L === 46 || L === 45 || L === 95)) {
                      if (L === 32 || L < 14 && L > 8) {
                        Y("missing attribute value"), Q = R;
                        continue e;
                      }
                      if (L === 61)
                        break;
                      Y("illegal attribute name char"), yi = !0;
                    }
                  if ((xt = xe.substring(Q, R)) === "xmlns:xmlns" && (Y("illegal declaration of xmlns"), yi = !0), (L = xe.charCodeAt(R + 1)) === 34)
                    (R = xe.indexOf('"', Q = R + 2)) === -1 && (R = xe.indexOf("'", Q)) !== -1 && (Y("attribute value quote missmatch"), yi = !0);
                  else if (L === 39)
                    (R = xe.indexOf("'", Q = R + 2)) === -1 && (R = xe.indexOf('"', Q)) !== -1 && (Y("attribute value quote missmatch"), yi = !0);
                  else
                    for (Y("missing attribute value quotes"), yi = !0, R += 1; R < Ge && !((L = xe.charCodeAt(R + 1)) === 32 || L < 14 && L > 8); R++)
                      ;
                  for (R === -1 && (Y("missing closing quotes"), R = Ge, yi = !0), yi || (Bt = xe.substring(Q, R)), Q = R; R + 1 < Ge && !((L = xe.charCodeAt(R + 1)) === 32 || L < 14 && L > 8); R++)
                    Q === R && (Y("illegal character after attribute end"), yi = !0);
                  if (Q = R + 1, !yi)
                    if (xt in Yt)
                      Y("attribute <" + xt + "> already defined");
                    else if (Yt[xt] = !0, Re)
                      if (Te) {
                        if ((Sn = xt === "xmlns" ? "xmlns" : xt.charCodeAt(0) === 120 && xt.substr(0, 6) === "xmlns:" ? xt.substr(6) : null) !== null) {
                          if (zn = Bo(Bt), On = Ip(Sn), !(Rn = q[zn])) {
                            if (Sn === "xmlns" || On in Nt && Nt[On] !== zn)
                              do
                                Rn = "ns" + Si++;
                              while (Nt[Rn] !== void 0);
                            else
                              Rn = Sn;
                            q[zn] = Rn;
                          }
                          Nt[Sn] !== Rn && (ri || (Nt = fw(Nt), ri = !0), Nt[Sn] = Rn, Sn === "xmlns" && (Nt[Ip(Rn)] = zn, T = Rn), Nt[On] = zn), ut[xt] = Bt;
                          continue;
                        }
                        G.push(xt, Bt);
                      } else
                        (L = xt.indexOf(":")) !== -1 ? (Ut = Nt[xt.substring(0, L)]) ? ((xt = T === Ut ? xt.substr(L + 1) : Ut + xt.substr(L)) === ly && ((L = Bt.indexOf(":")) !== -1 ? (Ut = Bt.substring(0, L), Bt = (Ut = Nt[Ut] || Ut) + Bt.substring(L)) : Bt = T + ":" + Bt), ut[xt] = Bt) : Y(py(xt.substring(0, L))) : ut[xt] = Bt;
                    else
                      ut[xt] = Bt;
                }
            if (Te)
              for (Q = 0, Ge = G.length; Q < Ge; Q++) {
                if (xt = G[Q++], Bt = G[Q], (L = xt.indexOf(":")) !== -1) {
                  if (!(Ut = Nt[xt.substring(0, L)])) {
                    Y(py(xt.substring(0, L)));
                    continue;
                  }
                  (xt = T === Ut ? xt.substr(L + 1) : Ut + xt.substr(L)) === ly && ((L = Bt.indexOf(":")) !== -1 ? (Ut = Bt.substring(0, L), Bt = (Ut = Nt[Ut] || Ut) + Bt.substring(L)) : Bt = T + ":" + Bt);
                }
                ut[xt] = Bt;
              }
            return st = ut;
          }
          function tl() {
            for (var zn, On, Ut = /(\r\n|\r|\n)/g, ri = 0, Sn = 0, Bt = 0, Rn = lt; St >= Bt && (zn = Ut.exec(J)) && !((Rn = zn[0].length + zn.index) > St); )
              ri += 1, Bt = Rn;
            return St == -1 ? (Sn = Rn, On = J.substring(lt)) : lt === 0 ? On = J.substring(lt, St) : (Sn = St - Bt, On = lt == -1 ? J.substring(St) : J.substring(St, lt + 1)), { data: On, line: ri, column: Sn };
          }
          for (be = tl, ee && (nt = Object.create({}, { name: Kc(function() {
            return me;
          }), originalName: Kc(function() {
            return He;
          }), attrs: Kc(Sa), ns: Kc(function() {
            return Nt;
          }) })); lt !== -1; ) {
            if ((St = J.charCodeAt(lt) === 60 ? lt : J.indexOf("<", lt)) === -1)
              return ji.length ? ve("unexpected end of file") : lt === 0 ? ve("missing start tag") : void (lt < J.length && J.substring(lt).trim() && Y(uy));
            if (lt !== St) {
              if (ji.length) {
                if (p && (p(J.substring(lt, St), Bo, be), re))
                  return;
              } else if (J.substring(lt, St).trim() && (Y(uy), re))
                return;
            }
            if ((Oe = J.charCodeAt(St + 1)) === 33) {
              if ((We = J.charCodeAt(St + 2)) === 91 && J.substr(St + 3, 6) === "CDATA[") {
                if ((lt = J.indexOf("]]>", St)) === -1)
                  return ve("unclosed cdata");
                if (v && (v(J.substring(St + 9, lt), be), re))
                  return;
                lt += 3;
                continue;
              }
              if (We === 45 && J.charCodeAt(St + 3) === 45) {
                if ((lt = J.indexOf("-->", St)) === -1)
                  return ve("unclosed comment");
                if (S && (S(J.substring(St + 4, lt), Bo, be), re))
                  return;
                lt += 3;
                continue;
              }
            }
            if (Oe !== 63) {
              for (ge = St + 1; ; ge++) {
                if (Ft = J.charCodeAt(ge), isNaN(Ft))
                  return lt = -1, ve("unclosed tag");
                if (Ft === 34)
                  ge = (We = J.indexOf('"', ge + 1)) !== -1 ? We : ge;
                else if (Ft === 39)
                  ge = (We = J.indexOf("'", ge + 1)) !== -1 ? We : ge;
                else if (Ft === 62) {
                  lt = ge;
                  break;
                }
              }
              if (Oe !== 33) {
                if (st = {}, Oe === 47) {
                  if (wn = !1, Xn = !0, !ji.length)
                    return ve("missing open tag");
                  if (ge = me = ji.pop(), We = St + 2 + ge.length, J.substring(St + 2, We) !== ge)
                    return ve("closing tag mismatch");
                  for (; We < lt; We++)
                    if (!((Oe = J.charCodeAt(We)) === 32 || Oe > 8 && Oe < 14))
                      return ve("close tag");
                } else {
                  if (J.charCodeAt(lt - 1) === 47 ? (ge = me = J.substring(St + 1, lt - 1), wn = !0, Xn = !0) : (ge = me = J.substring(St + 1, lt), wn = !0, Xn = !1), !(Oe > 96 && Oe < 123 || Oe > 64 && Oe < 91 || Oe === 95 || Oe === 58))
                    return ve("illegal first char nodeName");
                  for (We = 1, Je = ge.length; We < Je; We++)
                    if (!((Oe = ge.charCodeAt(We)) > 96 && Oe < 123 || Oe > 64 && Oe < 91 || Oe > 47 && Oe < 59 || Oe === 45 || Oe === 95 || Oe == 46)) {
                      if (Oe === 32 || Oe < 14 && Oe > 8) {
                        me = ge.substring(0, We), st = null;
                        break;
                      }
                      return ve("invalid nodeName");
                    }
                  Xn || ji.push(me);
                }
                if (Re) {
                  if (ce = Nt, wn && (Xn || mi.push(ce), st === null && (Te = ge.indexOf("xmlns", We) !== -1) && (Qi = We, wa = ge, Sa(), Te = !1)), He = me, (Oe = me.indexOf(":")) !== -1) {
                    if (!(ye = Nt[me.substring(0, Oe)]))
                      return ve("missing namespace on <" + He + ">");
                    me = me.substr(Oe + 1);
                  } else
                    ye = Nt.xmlns;
                  ye && (me = ye + ":" + me);
                }
                if (wn && (Qi = We, wa = ge, h && (ee ? h(nt, Bo, Xn, be) : h(me, Sa, Bo, Xn, be), re)))
                  return;
                if (Xn) {
                  if (m && (m(ee ? nt : me, Bo, wn, be), re))
                    return;
                  Re && (Nt = wn ? ce : mi.pop());
                }
                lt += 1;
              } else {
                if (O && (O(J.substring(St, lt + 1), Bo, be), re))
                  return;
                lt += 1;
              }
            } else {
              if ((lt = J.indexOf("?>", St)) === -1)
                return ve("unclosed question");
              if (M && (M(J.substring(St, lt + 2), be), re))
                return;
              lt += 2;
            }
          }
        }(te), be = fy, re = !1, Ie;
      }, this.stop = function() {
        re = !0;
      };
    }
    function hy(s) {
      return s.xml && s.xml.tagAlias === "lowerCase";
    }
    var hw = { xsi: "http://www.w3.org/2001/XMLSchema-instance", xml: "http://www.w3.org/XML/1998/namespace" }, qc = "xsi:type";
    function my(s) {
      return s.xml && s.xml.serialize;
    }
    function yy(s) {
      return my(s) === qc;
    }
    function gy(s, p) {
      return hy(p) ? s.prefix + ":" + ((h = s.localName).charAt(0).toUpperCase() + h.slice(1)) : s.name;
      var h;
    }
    function Ur(s) {
      return new Error(s);
    }
    function xr(s) {
      return s.$descriptor;
    }
    function mw(s) {
      $(this, s), this.elementsById = {}, this.references = [], this.warnings = [], this.addReference = function(p) {
        this.references.push(p);
      }, this.addElement = function(p) {
        if (!p)
          throw Ur("expected element");
        var h, m = this.elementsById, v = xr(p).idProperty;
        if (v && (h = p.get(v.name))) {
          if (!/^([a-z][\w-.]*:)?[a-z_][\w-.]*$/i.test(h))
            throw new Error("illegal ID <" + h + ">");
          if (m[h])
            throw Ur("duplicate ID <" + h + ">");
          m[h] = p;
        }
      }, this.addWarning = function(p) {
        this.warnings.push(p);
      };
    }
    function fs() {
    }
    function $p() {
    }
    function ba() {
    }
    function ds(s, p) {
      this.property = s, this.context = p;
    }
    function jp(s, p) {
      this.element = p, this.propertyDesc = s;
    }
    function Xc() {
    }
    function Hn(s, p, h) {
      this.model = s, this.type = s.getType(p), this.context = h;
    }
    function Fp(s, p, h) {
      Hn.call(this, s, p, h);
    }
    function xa(s, p, h) {
      this.model = s, this.context = h;
    }
    function Hp(s) {
      s instanceof wi && (s = { model: s }), $(this, { lax: !1 }, s);
    }
    fs.prototype.handleEnd = function() {
    }, fs.prototype.handleText = function() {
    }, fs.prototype.handleNode = function() {
    }, $p.prototype = Object.create(fs.prototype), $p.prototype.handleNode = function() {
      return this;
    }, ba.prototype = Object.create(fs.prototype), ba.prototype.handleText = function(s) {
      this.body = (this.body || "") + s;
    }, ds.prototype = Object.create(ba.prototype), ds.prototype.handleNode = function(s) {
      if (this.element)
        throw Ur("expected no sub nodes");
      return this.element = this.createReference(s), this;
    }, ds.prototype.handleEnd = function() {
      this.element.id = this.body;
    }, ds.prototype.createReference = function(s) {
      return { property: this.property.ns.name, id: "" };
    }, jp.prototype = Object.create(ba.prototype), jp.prototype.handleEnd = function() {
      var s = this.body || "", p = this.element, h = this.propertyDesc;
      s = Np(h.type, s), h.isMany ? p.get(h.name).push(s) : p.set(h.name, s);
    }, Xc.prototype = Object.create(ba.prototype), Xc.prototype.handleNode = function(s) {
      var p = this, h = this.element;
      return h ? p = this.handleChild(s) : (h = this.element = this.createElement(s), this.context.addElement(h)), p;
    }, Hn.prototype = Object.create(Xc.prototype), Hn.prototype.addReference = function(s) {
      this.context.addReference(s);
    }, Hn.prototype.handleText = function(s) {
      if (!xr(this.element).bodyProperty)
        throw Ur("unexpected body text <" + s + ">");
      ba.prototype.handleText.call(this, s);
    }, Hn.prototype.handleEnd = function() {
      var s = this.body, p = this.element, h = xr(p).bodyProperty;
      h && s !== void 0 && (s = Np(h.type, s), p.set(h.name, s));
    }, Hn.prototype.createElement = function(s) {
      var p, h = s.attributes, m = this.type, v = xr(m), b = this.context, S = new m({}), M = this.model;
      return x(h, function(O, q) {
        var ee = v.propertiesByName[q];
        ee && ee.isReference ? ee.isMany ? x(O.split(" "), function(pe) {
          b.addReference({ element: S, property: ee.ns.name, id: pe });
        }) : b.addReference({ element: S, property: ee.ns.name, id: O }) : (ee ? O = Np(ee.type, O) : q !== "xmlns" && (p = Fn(q, v.ns.prefix), M.getPackage(p.prefix) && b.addWarning({ message: "unknown attribute <" + q + ">", element: S, property: q, value: O })), S.set(q, O));
      }), S;
    }, Hn.prototype.getPropertyForNode = function(s) {
      var p, h, m = Fn(s.name), v = this.type, b = this.model, S = xr(v), M = m.name, O = S.propertiesByName[M];
      if (O && !O.isAttr)
        return yy(O) && (p = s.attributes[qc]) ? (p = function(ee, pe) {
          var be = Fn(ee);
          return function(Te, Re) {
            var Ie = Te.name, re = Te.localName, ve = Re.xml && Re.xml.typePrefix;
            return ve && re.indexOf(ve) === 0 ? Te.prefix + ":" + re.slice(ve.length) : Ie;
          }(be, pe.getPackage(be.prefix));
        }(p, b), $({}, O, { effectiveType: xr(h = b.getType(p)).name })) : O;
      var q = b.getPackage(m.prefix);
      if (q) {
        if (p = gy(m, q), h = b.getType(p), O = g(S.properties, function(ee) {
          return !ee.isVirtual && !ee.isReference && !ee.isAttribute && h.hasType(ee.type);
        }))
          return $({}, O, { effectiveType: xr(h).name });
      } else if (O = g(S.properties, function(ee) {
        return !ee.isReference && !ee.isAttribute && ee.type === "Element";
      }))
        return O;
      throw Ur("unrecognized element <" + m.name + ">");
    }, Hn.prototype.toString = function() {
      return "ElementDescriptor[" + xr(this.type).name + "]";
    }, Hn.prototype.valueHandler = function(s, p) {
      return new jp(s, p);
    }, Hn.prototype.referenceHandler = function(s) {
      return new ds(s, this.context);
    }, Hn.prototype.handler = function(s) {
      return s === "Element" ? new xa(this.model, s, this.context) : new Hn(this.model, s, this.context);
    }, Hn.prototype.handleChild = function(s) {
      var p, h, m, v;
      if (p = this.getPropertyForNode(s), m = this.element, ay(h = p.effectiveType || p.type))
        return this.valueHandler(p, m);
      var b = (v = p.isReference ? this.referenceHandler(p).handleNode(s) : this.handler(h).handleNode(s)).element;
      return b !== void 0 && (p.isMany ? m.get(p.name).push(b) : m.set(p.name, b), p.isReference ? ($(b, { element: m }), this.context.addReference(b)) : b.$parent = m), v;
    }, Fp.prototype = Object.create(Hn.prototype), Fp.prototype.createElement = function(s) {
      var p = s.name, h = Fn(p), m = this.model, v = this.type, b = m.getPackage(h.prefix), S = b && gy(h, b) || p;
      if (!v.hasType(S))
        throw Ur("unexpected element <" + s.originalName + ">");
      return Hn.prototype.createElement.call(this, s);
    }, xa.prototype = Object.create(Xc.prototype), xa.prototype.createElement = function(s) {
      var p = s.name, h = Fn(p).prefix, m = s.ns[h + "$uri"], v = s.attributes;
      return this.model.createAny(p, m, v);
    }, xa.prototype.handleChild = function(s) {
      var p = new xa(this.model, "Element", this.context).handleNode(s), h = this.element, m = p.element;
      return m !== void 0 && ((h.$children = h.$children || []).push(m), m.$parent = h), p;
    }, xa.prototype.handleEnd = function() {
      this.body && (this.element.$body = this.body);
    }, Hp.prototype.fromXML = function(s, p, h) {
      var m = p.rootHandler;
      p instanceof Hn ? (m = p, p = {}) : typeof p == "string" ? (m = this.handler(p), p = {}) : typeof m == "string" && (m = this.handler(m));
      var v = this.model, b = this.lax, S = new mw($({}, p, { rootHandler: m })), M = new dy({ proxy: !0 }), O = function() {
        var re = [];
        return Object.defineProperty(re, "peek", { value: function() {
          return this[this.length - 1];
        } }), re;
      }();
      function q(re, ve, Y) {
        var te = ve(), J = te.line, ce = te.column, ge = te.data;
        ge.charAt(0) === "<" && ge.indexOf(" ") !== -1 && (ge = ge.slice(0, ge.indexOf(" ")) + ">");
        var Je = "unparsable content " + (ge ? ge + " " : "") + `detected
	line: ` + J + `
	column: ` + ce + `
	nested error: ` + re.message;
        if (Y)
          return S.addWarning({ message: Je, error: re }), !0;
        throw Ur(Je);
      }
      function ee(re, ve) {
        return q(re, ve, !0);
      }
      m.context = S, O.push(m);
      var pe = /^<\?xml /i, be = / encoding="([^"]+)"/i, Te = /^utf-8$/i;
      function Re(re, ve) {
        try {
          O.peek().handleText(re);
        } catch (Y) {
          ee(Y, ve);
        }
      }
      var Ie = v.getPackages().reduce(function(re, ve) {
        return re[ve.uri] = ve.prefix, re;
      }, { "http://www.w3.org/XML/1998/namespace": "xml" });
      return M.ns(Ie).on("openTag", function(re, ve, Y, te) {
        var J = re.attrs || {}, ce = Object.keys(J).reduce(function(ge, Je) {
          var We = ve(J[Je]);
          return ge[Je] = We, ge;
        }, {});
        (function(ge, Je) {
          var We = O.peek();
          try {
            O.push(We.handleNode(ge));
          } catch (Oe) {
            q(Oe, Je, b) && O.push(new $p());
          }
        })({ name: re.name, originalName: re.originalName, attributes: ce, ns: re.ns }, te);
      }).on("question", function(re) {
        if (pe.test(re)) {
          var ve = be.exec(re), Y = ve && ve[1];
          Y && !Te.test(Y) && S.addWarning({ message: "unsupported document encoding <" + Y + ">, falling back to UTF-8" });
        }
      }).on("closeTag", function() {
        O.pop().handleEnd();
      }).on("cdata", Re).on("text", function(re, ve, Y) {
        (function(te, J) {
          te.trim() && Re(te, J);
        })(ve(re), Y);
      }).on("error", q).on("warn", ee), new Promise(function(re, ve) {
        var Y;
        try {
          M.parse(s), function() {
            var Je, We, Oe = S.elementsById, Ft = S.references;
            for (Je = 0; We = Ft[Je]; Je++) {
              var ye = We.element, me = Oe[We.id], He = xr(ye).propertiesByName[We.property];
              if (me || S.addWarning({ message: "unresolved reference <" + We.id + ">", element: We.element, property: We.property, value: We.id }), He.isMany) {
                var nt = ye.get(He.name), st = nt.indexOf(We);
                st === -1 && (st = nt.length), me ? nt[st] = me : nt.splice(st, 1);
              } else
                ye.set(He.name, me);
            }
          }();
        } catch (Je) {
          Y = Je;
        }
        var te = m.element;
        Y || te || (Y = Ur("failed to parse document as <" + m.type.$descriptor.name + ">"));
        var J = S.warnings, ce = S.references, ge = S.elementsById;
        return Y ? (Y.warnings = J, ve(Y)) : re({ rootElement: te, elementsById: ge, references: ce, warnings: J });
      });
    }, Hp.prototype.handler = function(s) {
      return new Fp(this.model, s);
    };
    var yw = /<|>|'|"|&|\n\r|\n/g, vy = /<|>|&/g;
    function gw(s) {
      var p = {}, h = {}, m = {}, v = [], b = [];
      this.byUri = function(S) {
        return h[S] || s && s.byUri(S);
      }, this.add = function(S, M) {
        h[S.uri] = S, M ? v.push(S) : b.push(S), this.mapPrefix(S.prefix, S.uri);
      }, this.uriByPrefix = function(S) {
        return p[S || "xmlns"];
      }, this.mapPrefix = function(S, M) {
        p[S || "xmlns"] = M;
      }, this.getNSKey = function(S) {
        return S.prefix !== void 0 ? S.uri + "|" + S.prefix : S.uri;
      }, this.logUsed = function(S) {
        var M = S.uri, O = this.getNSKey(S);
        m[O] = this.byUri(M), s && s.logUsed(S);
      }, this.getUsed = function(S) {
        var M = this;
        return [].concat(v, b).filter(function(O) {
          var q = M.getNSKey(O);
          return m[q];
        });
      };
    }
    function vw(s, p) {
      return hy(p) ? (h = s).charAt(0).toLowerCase() + h.slice(1) : s;
      var h;
    }
    function _y(s, p) {
      s.super_ = p, s.prototype = Object.create(p.prototype, { constructor: { value: s, enumerable: !1, writable: !0, configurable: !0 } });
    }
    function by(s) {
      return f(s) ? s : (s.prefix ? s.prefix + ":" : "") + s.localName;
    }
    var _w = { "\n": "#10", "\n\r": "#10", '"': "#34", "'": "#39", "<": "#60", ">": "#62", "&": "#38" }, bw = { "<": "lt", ">": "gt", "&": "amp" };
    function xy(s, p, h) {
      return (s = f(s) ? s : "" + s).replace(p, function(m) {
        return "&" + h[m] + ";";
      });
    }
    function zp(s) {
      this.tagName = s;
    }
    function Lo() {
    }
    function Vp(s) {
      this.tagName = s;
    }
    function jt(s, p) {
      this.body = [], this.attrs = [], this.parent = s, this.propertyDescriptor = p;
    }
    function Zc(s, p) {
      jt.call(this, s, p);
    }
    function xw() {
      this.value = "", this.write = function(s) {
        this.value += s;
      };
    }
    function Ew(s, p) {
      var h = [""];
      this.append = function(m) {
        return s.write(m), this;
      }, this.appendNewLine = function() {
        return p && s.write(`
`), this;
      }, this.appendIndent = function() {
        return p && s.write(h.join("  ")), this;
      }, this.indent = function() {
        return h.push(""), this;
      }, this.unindent = function() {
        return h.pop(), this;
      };
    }
    function ww(s) {
      return s = $({ format: !1, preamble: !0 }, s || {}), { toXML: function(p, h) {
        var m = h || new xw(), v = new Ew(m, s.format);
        if (s.preamble && v.append(`<?xml version="1.0" encoding="UTF-8"?>
`), new jt().build(p).serializeTo(v), !h)
          return m.value;
      } };
    }
    function Jc(s, p) {
      wi.call(this, s, p);
    }
    zp.prototype.build = function(s) {
      return this.element = s, this;
    }, zp.prototype.serializeTo = function(s) {
      s.appendIndent().append("<" + this.tagName + ">" + this.element.id + "</" + this.tagName + ">").appendNewLine();
    }, Lo.prototype.serializeValue = Lo.prototype.serializeTo = function(s) {
      s.append(this.escape ? xy(this.value, vy, bw) : this.value);
    }, Lo.prototype.build = function(s, p) {
      return this.value = p, s.type === "String" && p.search(vy) !== -1 && (this.escape = !0), this;
    }, _y(Vp, Lo), Vp.prototype.serializeTo = function(s) {
      s.appendIndent().append("<" + this.tagName + ">"), this.serializeValue(s), s.append("</" + this.tagName + ">").appendNewLine();
    }, jt.prototype.build = function(s) {
      this.element = s;
      var p, h, m = s.$descriptor, v = this.propertyDescriptor, b = m.isGeneric;
      return p = b ? this.parseGeneric(s) : this.parseNsAttributes(s), this.ns = v ? this.nsPropertyTagName(v) : this.nsTagName(m), this.tagName = this.addTagName(this.ns), b || (h = function(S) {
        return _(S.$descriptor.properties, function(M) {
          var O = M.name;
          if (M.isVirtual || !y(S, O))
            return !1;
          var q = S[O];
          return q !== M.default && q !== null && (!M.isMany || q.length);
        });
      }(s), this.parseAttributes(_(h, function(S) {
        return S.isAttr;
      })), this.parseContainments(function(S) {
        return _(S, function(M) {
          return !M.isAttr;
        });
      }(h))), this.parseGenericAttributes(s, p), this;
    }, jt.prototype.nsTagName = function(s) {
      return function(p, h) {
        return h.isGeneric ? $({ localName: h.ns.localName }, p) : $({ localName: vw(h.ns.localName, h.$pkg) }, p);
      }(this.logNamespaceUsed(s.ns), s);
    }, jt.prototype.nsPropertyTagName = function(s) {
      return function(p, h) {
        return $({ localName: h.ns.localName }, p);
      }(this.logNamespaceUsed(s.ns), s);
    }, jt.prototype.isLocalNs = function(s) {
      return s.uri === this.ns.uri;
    }, jt.prototype.nsAttributeName = function(s) {
      var p;
      if (p = f(s) ? Fn(s) : s.ns, s.inherited)
        return { localName: p.localName };
      var h = this.logNamespaceUsed(p);
      return this.getNamespaces().logUsed(h), this.isLocalNs(h) ? { localName: p.localName } : $({ localName: p.localName }, h);
    }, jt.prototype.parseGeneric = function(s) {
      var p = this, h = this.body, m = [];
      return x(s, function(v, b) {
        b === "$body" ? h.push(new Lo().build({ type: "String" }, v)) : b === "$children" ? x(v, function(S) {
          h.push(new jt(p).build(S));
        }) : b.indexOf("$") !== 0 && p.parseNsAttribute(s, b, v) && m.push({ name: b, value: v });
      }), m;
    }, jt.prototype.parseNsAttribute = function(s, p, h) {
      var m, v = s.$model, b = Fn(p);
      if (b.prefix === "xmlns" && (m = { prefix: b.localName, uri: h }), b.prefix || b.localName !== "xmlns" || (m = { uri: h }), !m)
        return { name: p, value: h };
      if (v && v.getPackage(h))
        this.logNamespace(m, !0, !0);
      else {
        var S = this.logNamespaceUsed(m, !0);
        this.getNamespaces().logUsed(S);
      }
    }, jt.prototype.parseNsAttributes = function(s, p) {
      var h = this, m = s.$attrs, v = [];
      return x(m, function(b, S) {
        var M = h.parseNsAttribute(s, S, b);
        M && v.push(M);
      }), v;
    }, jt.prototype.parseGenericAttributes = function(s, p) {
      var h = this;
      x(p, function(m) {
        if (m.name !== qc)
          try {
            h.addAttribute(h.nsAttributeName(m.name), m.value);
          } catch (v) {
            console.warn("missing namespace information for ", m.name, "=", m.value, "on", s, v);
          }
      });
    }, jt.prototype.parseContainments = function(s) {
      var p = this, h = this.body, m = this.element;
      x(s, function(v) {
        var b = m.get(v.name), S = v.isReference;
        if (v.isMany || (b = [b]), v.isBody)
          h.push(new Lo().build(v, b[0]));
        else if (ay(v.type))
          x(b, function(q) {
            h.push(new Vp(p.addTagName(p.nsPropertyTagName(v))).build(v, q));
          });
        else if (S)
          x(b, function(q) {
            h.push(new zp(p.addTagName(p.nsPropertyTagName(v))).build(q));
          });
        else {
          var M = yy(v), O = function(q) {
            return my(q) === "property";
          }(v);
          x(b, function(q) {
            var ee;
            ee = M ? new Zc(p, v) : O ? new jt(p, v) : new jt(p), h.push(ee.build(q));
          });
        }
      });
    }, jt.prototype.getNamespaces = function(s) {
      var p, h = this.namespaces, m = this.parent;
      return h || (p = m && m.getNamespaces(), s || !p ? this.namespaces = h = new gw(p) : h = p), h;
    }, jt.prototype.logNamespace = function(s, p, h) {
      var m = this.getNamespaces(h), v = s.uri, b = s.prefix;
      return m.byUri(v) && !h || m.add(s, p), m.mapPrefix(b, v), s;
    }, jt.prototype.logNamespaceUsed = function(s, p) {
      var h, m, v, b = this.element.$model, S = this.getNamespaces(p), M = s.prefix, O = s.uri;
      if (!M && !O)
        return { localName: s.localName };
      if (v = hw[M] || b && (b.getPackage(M) || {}).uri, !(O = O || v || S.uriByPrefix(M)))
        throw new Error("no namespace uri given for prefix <" + M + ">");
      if (!(s = S.byUri(O))) {
        for (h = M, m = 1; S.uriByPrefix(h); )
          h = M + "_" + m++;
        s = this.logNamespace({ prefix: h, uri: O }, v === O);
      }
      return M && S.mapPrefix(M, O), s;
    }, jt.prototype.parseAttributes = function(s) {
      var p = this, h = this.element;
      x(s, function(m) {
        var v = h.get(m.name);
        if (m.isReference)
          if (m.isMany) {
            var b = [];
            x(v, function(S) {
              b.push(S.id);
            }), v = b.join(" ");
          } else
            v = v.id;
        p.addAttribute(p.nsAttributeName(m), v);
      });
    }, jt.prototype.addTagName = function(s) {
      var p = this.logNamespaceUsed(s);
      return this.getNamespaces().logUsed(p), by(s);
    }, jt.prototype.addAttribute = function(s, p) {
      var h = this.attrs;
      f(p) && (p = xy(p, yw, _w));
      var m = function(b, S) {
        const M = A(S);
        let O = c(b) ? -1 : void 0;
        return x(b, function(q, ee) {
          if (M(q, ee))
            return O = ee, !1;
        }), O;
      }(h, function(b) {
        return b.name.localName === s.localName && b.name.uri === s.uri && b.name.prefix === s.prefix;
      }), v = { name: s, value: p };
      m !== -1 ? h.splice(m, 1, v) : h.push(v);
    }, jt.prototype.serializeAttributes = function(s) {
      var p = this.attrs, h = this.namespaces;
      h && (p = function(m) {
        return m.getUsed().filter(function(v) {
          return v.prefix !== "xml";
        }).map(function(v) {
          return { name: "xmlns" + (v.prefix ? ":" + v.prefix : ""), value: v.uri };
        });
      }(h).concat(p)), x(p, function(m) {
        s.append(" ").append(by(m.name)).append('="').append(m.value).append('"');
      });
    }, jt.prototype.serializeTo = function(s) {
      var p = this.body[0], h = p && p.constructor !== Lo;
      s.appendIndent().append("<" + this.tagName), this.serializeAttributes(s), s.append(p ? ">" : " />"), p && (h && s.appendNewLine().indent(), x(this.body, function(m) {
        m.serializeTo(s);
      }), h && s.unindent().appendIndent(), s.append("</" + this.tagName + ">")), s.appendNewLine();
    }, _y(Zc, jt), Zc.prototype.parseNsAttributes = function(s) {
      var p = jt.prototype.parseNsAttributes.call(this, s), h = s.$descriptor;
      if (h.name === this.propertyDescriptor.type)
        return p;
      var m = this.typeNs = this.nsTagName(h);
      this.getNamespaces().logUsed(this.typeNs);
      var v = s.$model.getPackage(m.uri), b = v.xml && v.xml.typePrefix || "";
      return this.addAttribute(this.nsAttributeName(qc), (m.prefix ? m.prefix + ":" : "") + b + h.ns.localName), p;
    }, Zc.prototype.isLocalNs = function(s) {
      return s.uri === (this.typeNs || this.ns).uri;
    }, Jc.prototype = Object.create(wi.prototype), Jc.prototype.fromXML = function(s, p, h) {
      f(p) || (h = p, p = "bpmn:Definitions");
      var m = new Hp($({ model: this, lax: !0 }, h)), v = m.handler(p);
      return m.fromXML(s, v);
    }, Jc.prototype.toXML = function(s, p) {
      var h = new ww(p);
      return new Promise(function(m, v) {
        try {
          return m({ xml: h.toXML(s) });
        } catch (b) {
          return v(b);
        }
      });
    };
    var Sw = { bpmn: { name: "BPMN20", uri: "http://www.omg.org/spec/BPMN/20100524/MODEL", prefix: "bpmn", associations: [], types: [{ name: "Interface", superClass: ["RootElement"], properties: [{ name: "name", isAttr: !0, type: "String" }, { name: "operations", type: "Operation", isMany: !0 }, { name: "implementationRef", isAttr: !0, type: "String" }] }, { name: "Operation", superClass: ["BaseElement"], properties: [{ name: "name", isAttr: !0, type: "String" }, { name: "inMessageRef", type: "Message", isReference: !0 }, { name: "outMessageRef", type: "Message", isReference: !0 }, { name: "errorRef", type: "Error", isMany: !0, isReference: !0 }, { name: "implementationRef", isAttr: !0, type: "String" }] }, { name: "EndPoint", superClass: ["RootElement"] }, { name: "Auditing", superClass: ["BaseElement"] }, { name: "GlobalTask", superClass: ["CallableElement"], properties: [{ name: "resources", type: "ResourceRole", isMany: !0 }] }, { name: "Monitoring", superClass: ["BaseElement"] }, { name: "Performer", superClass: ["ResourceRole"] }, { name: "Process", superClass: ["FlowElementsContainer", "CallableElement"], properties: [{ name: "processType", type: "ProcessType", isAttr: !0 }, { name: "isClosed", isAttr: !0, type: "Boolean" }, { name: "auditing", type: "Auditing" }, { name: "monitoring", type: "Monitoring" }, { name: "properties", type: "Property", isMany: !0 }, { name: "laneSets", isMany: !0, replaces: "FlowElementsContainer#laneSets", type: "LaneSet" }, { name: "flowElements", isMany: !0, replaces: "FlowElementsContainer#flowElements", type: "FlowElement" }, { name: "artifacts", type: "Artifact", isMany: !0 }, { name: "resources", type: "ResourceRole", isMany: !0 }, { name: "correlationSubscriptions", type: "CorrelationSubscription", isMany: !0 }, { name: "supports", type: "Process", isMany: !0, isReference: !0 }, { name: "definitionalCollaborationRef", type: "Collaboration", isAttr: !0, isReference: !0 }, { name: "isExecutable", isAttr: !0, type: "Boolean" }] }, { name: "LaneSet", superClass: ["BaseElement"], properties: [{ name: "lanes", type: "Lane", isMany: !0 }, { name: "name", isAttr: !0, type: "String" }] }, { name: "Lane", superClass: ["BaseElement"], properties: [{ name: "name", isAttr: !0, type: "String" }, { name: "partitionElementRef", type: "BaseElement", isAttr: !0, isReference: !0 }, { name: "partitionElement", type: "BaseElement" }, { name: "flowNodeRef", type: "FlowNode", isMany: !0, isReference: !0 }, { name: "childLaneSet", type: "LaneSet", xml: { serialize: "xsi:type" } }] }, { name: "GlobalManualTask", superClass: ["GlobalTask"] }, { name: "ManualTask", superClass: ["Task"] }, { name: "UserTask", superClass: ["Task"], properties: [{ name: "renderings", type: "Rendering", isMany: !0 }, { name: "implementation", isAttr: !0, type: "String" }] }, { name: "Rendering", superClass: ["BaseElement"] }, { name: "HumanPerformer", superClass: ["Performer"] }, { name: "PotentialOwner", superClass: ["HumanPerformer"] }, { name: "GlobalUserTask", superClass: ["GlobalTask"], properties: [{ name: "implementation", isAttr: !0, type: "String" }, { name: "renderings", type: "Rendering", isMany: !0 }] }, { name: "Gateway", isAbstract: !0, superClass: ["FlowNode"], properties: [{ name: "gatewayDirection", type: "GatewayDirection", default: "Unspecified", isAttr: !0 }] }, { name: "EventBasedGateway", superClass: ["Gateway"], properties: [{ name: "instantiate", default: !1, isAttr: !0, type: "Boolean" }, { name: "eventGatewayType", type: "EventBasedGatewayType", isAttr: !0, default: "Exclusive" }] }, { name: "ComplexGateway", superClass: ["Gateway"], properties: [{ name: "activationCondition", type: "Expression", xml: { serialize: "xsi:type" } }, { name: "default", type: "SequenceFlow", isAttr: !0, isReference: !0 }] }, { name: "ExclusiveGateway", superClass: ["Gateway"], properties: [{ name: "default", type: "SequenceFlow", isAttr: !0, isReference: !0 }] }, { name: "InclusiveGateway", superClass: ["Gateway"], properties: [{ name: "default", type: "SequenceFlow", isAttr: !0, isReference: !0 }] }, { name: "ParallelGateway", superClass: ["Gateway"] }, { name: "RootElement", isAbstract: !0, superClass: ["BaseElement"] }, { name: "Relationship", superClass: ["BaseElement"], properties: [{ name: "type", isAttr: !0, type: "String" }, { name: "direction", type: "RelationshipDirection", isAttr: !0 }, { name: "source", isMany: !0, isReference: !0, type: "Element" }, { name: "target", isMany: !0, isReference: !0, type: "Element" }] }, { name: "BaseElement", isAbstract: !0, properties: [{ name: "id", isAttr: !0, type: "String", isId: !0 }, { name: "documentation", type: "Documentation", isMany: !0 }, { name: "extensionDefinitions", type: "ExtensionDefinition", isMany: !0, isReference: !0 }, { name: "extensionElements", type: "ExtensionElements" }] }, { name: "Extension", properties: [{ name: "mustUnderstand", default: !1, isAttr: !0, type: "Boolean" }, { name: "definition", type: "ExtensionDefinition", isAttr: !0, isReference: !0 }] }, { name: "ExtensionDefinition", properties: [{ name: "name", isAttr: !0, type: "String" }, { name: "extensionAttributeDefinitions", type: "ExtensionAttributeDefinition", isMany: !0 }] }, { name: "ExtensionAttributeDefinition", properties: [{ name: "name", isAttr: !0, type: "String" }, { name: "type", isAttr: !0, type: "String" }, { name: "isReference", default: !1, isAttr: !0, type: "Boolean" }, { name: "extensionDefinition", type: "ExtensionDefinition", isAttr: !0, isReference: !0 }] }, { name: "ExtensionElements", properties: [{ name: "valueRef", isAttr: !0, isReference: !0, type: "Element" }, { name: "values", type: "Element", isMany: !0 }, { name: "extensionAttributeDefinition", type: "ExtensionAttributeDefinition", isAttr: !0, isReference: !0 }] }, { name: "Documentation", superClass: ["BaseElement"], properties: [{ name: "text", type: "String", isBody: !0 }, { name: "textFormat", default: "text/plain", isAttr: !0, type: "String" }] }, { name: "Event", isAbstract: !0, superClass: ["FlowNode", "InteractionNode"], properties: [{ name: "properties", type: "Property", isMany: !0 }] }, { name: "IntermediateCatchEvent", superClass: ["CatchEvent"] }, { name: "IntermediateThrowEvent", superClass: ["ThrowEvent"] }, { name: "EndEvent", superClass: ["ThrowEvent"] }, { name: "StartEvent", superClass: ["CatchEvent"], properties: [{ name: "isInterrupting", default: !0, isAttr: !0, type: "Boolean" }] }, { name: "ThrowEvent", isAbstract: !0, superClass: ["Event"], properties: [{ name: "dataInputs", type: "DataInput", isMany: !0 }, { name: "dataInputAssociations", type: "DataInputAssociation", isMany: !0 }, { name: "inputSet", type: "InputSet" }, { name: "eventDefinitions", type: "EventDefinition", isMany: !0 }, { name: "eventDefinitionRef", type: "EventDefinition", isMany: !0, isReference: !0 }] }, { name: "CatchEvent", isAbstract: !0, superClass: ["Event"], properties: [{ name: "parallelMultiple", isAttr: !0, type: "Boolean", default: !1 }, { name: "dataOutputs", type: "DataOutput", isMany: !0 }, { name: "dataOutputAssociations", type: "DataOutputAssociation", isMany: !0 }, { name: "outputSet", type: "OutputSet" }, { name: "eventDefinitions", type: "EventDefinition", isMany: !0 }, { name: "eventDefinitionRef", type: "EventDefinition", isMany: !0, isReference: !0 }] }, { name: "BoundaryEvent", superClass: ["CatchEvent"], properties: [{ name: "cancelActivity", default: !0, isAttr: !0, type: "Boolean" }, { name: "attachedToRef", type: "Activity", isAttr: !0, isReference: !0 }] }, { name: "EventDefinition", isAbstract: !0, superClass: ["RootElement"] }, { name: "CancelEventDefinition", superClass: ["EventDefinition"] }, { name: "ErrorEventDefinition", superClass: ["EventDefinition"], properties: [{ name: "errorRef", type: "Error", isAttr: !0, isReference: !0 }] }, { name: "TerminateEventDefinition", superClass: ["EventDefinition"] }, { name: "EscalationEventDefinition", superClass: ["EventDefinition"], properties: [{ name: "escalationRef", type: "Escalation", isAttr: !0, isReference: !0 }] }, { name: "Escalation", properties: [{ name: "structureRef", type: "ItemDefinition", isAttr: !0, isReference: !0 }, { name: "name", isAttr: !0, type: "String" }, { name: "escalationCode", isAttr: !0, type: "String" }], superClass: ["RootElement"] }, { name: "CompensateEventDefinition", superClass: ["EventDefinition"], properties: [{ name: "waitForCompletion", isAttr: !0, type: "Boolean", default: !0 }, { name: "activityRef", type: "Activity", isAttr: !0, isReference: !0 }] }, { name: "TimerEventDefinition", superClass: ["EventDefinition"], properties: [{ name: "timeDate", type: "Expression", xml: { serialize: "xsi:type" } }, { name: "timeCycle", type: "Expression", xml: { serialize: "xsi:type" } }, { name: "timeDuration", type: "Expression", xml: { serialize: "xsi:type" } }] }, { name: "LinkEventDefinition", superClass: ["EventDefinition"], properties: [{ name: "name", isAttr: !0, type: "String" }, { name: "target", type: "LinkEventDefinition", isReference: !0 }, { name: "source", type: "LinkEventDefinition", isMany: !0, isReference: !0 }] }, { name: "MessageEventDefinition", superClass: ["EventDefinition"], properties: [{ name: "messageRef", type: "Message", isAttr: !0, isReference: !0 }, { name: "operationRef", type: "Operation", isAttr: !0, isReference: !0 }] }, { name: "ConditionalEventDefinition", superClass: ["EventDefinition"], properties: [{ name: "condition", type: "Expression", xml: { serialize: "xsi:type" } }] }, { name: "SignalEventDefinition", superClass: ["EventDefinition"], properties: [{ name: "signalRef", type: "Signal", isAttr: !0, isReference: !0 }] }, { name: "Signal", superClass: ["RootElement"], properties: [{ name: "structureRef", type: "ItemDefinition", isAttr: !0, isReference: !0 }, { name: "name", isAttr: !0, type: "String" }] }, { name: "ImplicitThrowEvent", superClass: ["ThrowEvent"] }, { name: "DataState", superClass: ["BaseElement"], properties: [{ name: "name", isAttr: !0, type: "String" }] }, { name: "ItemAwareElement", superClass: ["BaseElement"], properties: [{ name: "itemSubjectRef", type: "ItemDefinition", isAttr: !0, isReference: !0 }, { name: "dataState", type: "DataState" }] }, { name: "DataAssociation", superClass: ["BaseElement"], properties: [{ name: "sourceRef", type: "ItemAwareElement", isMany: !0, isReference: !0 }, { name: "targetRef", type: "ItemAwareElement", isReference: !0 }, { name: "transformation", type: "FormalExpression", xml: { serialize: "property" } }, { name: "assignment", type: "Assignment", isMany: !0 }] }, { name: "DataInput", superClass: ["ItemAwareElement"], properties: [{ name: "name", isAttr: !0, type: "String" }, { name: "isCollection", default: !1, isAttr: !0, type: "Boolean" }, { name: "inputSetRef", type: "InputSet", isMany: !0, isVirtual: !0, isReference: !0 }, { name: "inputSetWithOptional", type: "InputSet", isMany: !0, isVirtual: !0, isReference: !0 }, { name: "inputSetWithWhileExecuting", type: "InputSet", isMany: !0, isVirtual: !0, isReference: !0 }] }, { name: "DataOutput", superClass: ["ItemAwareElement"], properties: [{ name: "name", isAttr: !0, type: "String" }, { name: "isCollection", default: !1, isAttr: !0, type: "Boolean" }, { name: "outputSetRef", type: "OutputSet", isMany: !0, isVirtual: !0, isReference: !0 }, { name: "outputSetWithOptional", type: "OutputSet", isMany: !0, isVirtual: !0, isReference: !0 }, { name: "outputSetWithWhileExecuting", type: "OutputSet", isMany: !0, isVirtual: !0, isReference: !0 }] }, { name: "InputSet", superClass: ["BaseElement"], properties: [{ name: "name", isAttr: !0, type: "String" }, { name: "dataInputRefs", type: "DataInput", isMany: !0, isReference: !0 }, { name: "optionalInputRefs", type: "DataInput", isMany: !0, isReference: !0 }, { name: "whileExecutingInputRefs", type: "DataInput", isMany: !0, isReference: !0 }, { name: "outputSetRefs", type: "OutputSet", isMany: !0, isReference: !0 }] }, { name: "OutputSet", superClass: ["BaseElement"], properties: [{ name: "dataOutputRefs", type: "DataOutput", isMany: !0, isReference: !0 }, { name: "name", isAttr: !0, type: "String" }, { name: "inputSetRefs", type: "InputSet", isMany: !0, isReference: !0 }, { name: "optionalOutputRefs", type: "DataOutput", isMany: !0, isReference: !0 }, { name: "whileExecutingOutputRefs", type: "DataOutput", isMany: !0, isReference: !0 }] }, { name: "Property", superClass: ["ItemAwareElement"], properties: [{ name: "name", isAttr: !0, type: "String" }] }, { name: "DataInputAssociation", superClass: ["DataAssociation"] }, { name: "DataOutputAssociation", superClass: ["DataAssociation"] }, { name: "InputOutputSpecification", superClass: ["BaseElement"], properties: [{ name: "dataInputs", type: "DataInput", isMany: !0 }, { name: "dataOutputs", type: "DataOutput", isMany: !0 }, { name: "inputSets", type: "InputSet", isMany: !0 }, { name: "outputSets", type: "OutputSet", isMany: !0 }] }, { name: "DataObject", superClass: ["FlowElement", "ItemAwareElement"], properties: [{ name: "isCollection", default: !1, isAttr: !0, type: "Boolean" }] }, { name: "InputOutputBinding", properties: [{ name: "inputDataRef", type: "InputSet", isAttr: !0, isReference: !0 }, { name: "outputDataRef", type: "OutputSet", isAttr: !0, isReference: !0 }, { name: "operationRef", type: "Operation", isAttr: !0, isReference: !0 }] }, { name: "Assignment", superClass: ["BaseElement"], properties: [{ name: "from", type: "Expression", xml: { serialize: "xsi:type" } }, { name: "to", type: "Expression", xml: { serialize: "xsi:type" } }] }, { name: "DataStore", superClass: ["RootElement", "ItemAwareElement"], properties: [{ name: "name", isAttr: !0, type: "String" }, { name: "capacity", isAttr: !0, type: "Integer" }, { name: "isUnlimited", default: !0, isAttr: !0, type: "Boolean" }] }, { name: "DataStoreReference", superClass: ["ItemAwareElement", "FlowElement"], properties: [{ name: "dataStoreRef", type: "DataStore", isAttr: !0, isReference: !0 }] }, { name: "DataObjectReference", superClass: ["ItemAwareElement", "FlowElement"], properties: [{ name: "dataObjectRef", type: "DataObject", isAttr: !0, isReference: !0 }] }, { name: "ConversationLink", superClass: ["BaseElement"], properties: [{ name: "sourceRef", type: "InteractionNode", isAttr: !0, isReference: !0 }, { name: "targetRef", type: "InteractionNode", isAttr: !0, isReference: !0 }, { name: "name", isAttr: !0, type: "String" }] }, { name: "ConversationAssociation", superClass: ["BaseElement"], properties: [{ name: "innerConversationNodeRef", type: "ConversationNode", isAttr: !0, isReference: !0 }, { name: "outerConversationNodeRef", type: "ConversationNode", isAttr: !0, isReference: !0 }] }, { name: "CallConversation", superClass: ["ConversationNode"], properties: [{ name: "calledCollaborationRef", type: "Collaboration", isAttr: !0, isReference: !0 }, { name: "participantAssociations", type: "ParticipantAssociation", isMany: !0 }] }, { name: "Conversation", superClass: ["ConversationNode"] }, { name: "SubConversation", superClass: ["ConversationNode"], properties: [{ name: "conversationNodes", type: "ConversationNode", isMany: !0 }] }, { name: "ConversationNode", isAbstract: !0, superClass: ["InteractionNode", "BaseElement"], properties: [{ name: "name", isAttr: !0, type: "String" }, { name: "participantRef", type: "Participant", isMany: !0, isReference: !0 }, { name: "messageFlowRefs", type: "MessageFlow", isMany: !0, isReference: !0 }, { name: "correlationKeys", type: "CorrelationKey", isMany: !0 }] }, { name: "GlobalConversation", superClass: ["Collaboration"] }, { name: "PartnerEntity", superClass: ["RootElement"], properties: [{ name: "name", isAttr: !0, type: "String" }, { name: "participantRef", type: "Participant", isMany: !0, isReference: !0 }] }, { name: "PartnerRole", superClass: ["RootElement"], properties: [{ name: "name", isAttr: !0, type: "String" }, { name: "participantRef", type: "Participant", isMany: !0, isReference: !0 }] }, { name: "CorrelationProperty", superClass: ["RootElement"], properties: [{ name: "correlationPropertyRetrievalExpression", type: "CorrelationPropertyRetrievalExpression", isMany: !0 }, { name: "name", isAttr: !0, type: "String" }, { name: "type", type: "ItemDefinition", isAttr: !0, isReference: !0 }] }, { name: "Error", superClass: ["RootElement"], properties: [{ name: "structureRef", type: "ItemDefinition", isAttr: !0, isReference: !0 }, { name: "name", isAttr: !0, type: "String" }, { name: "errorCode", isAttr: !0, type: "String" }] }, { name: "CorrelationKey", superClass: ["BaseElement"], properties: [{ name: "correlationPropertyRef", type: "CorrelationProperty", isMany: !0, isReference: !0 }, { name: "name", isAttr: !0, type: "String" }] }, { name: "Expression", superClass: ["BaseElement"], isAbstract: !1, properties: [{ name: "body", isBody: !0, type: "String" }] }, { name: "FormalExpression", superClass: ["Expression"], properties: [{ name: "language", isAttr: !0, type: "String" }, { name: "evaluatesToTypeRef", type: "ItemDefinition", isAttr: !0, isReference: !0 }] }, { name: "Message", superClass: ["RootElement"], properties: [{ name: "name", isAttr: !0, type: "String" }, { name: "itemRef", type: "ItemDefinition", isAttr: !0, isReference: !0 }] }, { name: "ItemDefinition", superClass: ["RootElement"], properties: [{ name: "itemKind", type: "ItemKind", isAttr: !0 }, { name: "structureRef", isAttr: !0, type: "String" }, { name: "isCollection", default: !1, isAttr: !0, type: "Boolean" }, { name: "import", type: "Import", isAttr: !0, isReference: !0 }] }, { name: "FlowElement", isAbstract: !0, superClass: ["BaseElement"], properties: [{ name: "name", isAttr: !0, type: "String" }, { name: "auditing", type: "Auditing" }, { name: "monitoring", type: "Monitoring" }, { name: "categoryValueRef", type: "CategoryValue", isMany: !0, isReference: !0 }] }, { name: "SequenceFlow", superClass: ["FlowElement"], properties: [{ name: "isImmediate", isAttr: !0, type: "Boolean" }, { name: "conditionExpression", type: "Expression", xml: { serialize: "xsi:type" } }, { name: "sourceRef", type: "FlowNode", isAttr: !0, isReference: !0 }, { name: "targetRef", type: "FlowNode", isAttr: !0, isReference: !0 }] }, { name: "FlowElementsContainer", isAbstract: !0, superClass: ["BaseElement"], properties: [{ name: "laneSets", type: "LaneSet", isMany: !0 }, { name: "flowElements", type: "FlowElement", isMany: !0 }] }, { name: "CallableElement", isAbstract: !0, superClass: ["RootElement"], properties: [{ name: "name", isAttr: !0, type: "String" }, { name: "ioSpecification", type: "InputOutputSpecification", xml: { serialize: "property" } }, { name: "supportedInterfaceRef", type: "Interface", isMany: !0, isReference: !0 }, { name: "ioBinding", type: "InputOutputBinding", isMany: !0, xml: { serialize: "property" } }] }, { name: "FlowNode", isAbstract: !0, superClass: ["FlowElement"], properties: [{ name: "incoming", type: "SequenceFlow", isMany: !0, isReference: !0 }, { name: "outgoing", type: "SequenceFlow", isMany: !0, isReference: !0 }, { name: "lanes", type: "Lane", isMany: !0, isVirtual: !0, isReference: !0 }] }, { name: "CorrelationPropertyRetrievalExpression", superClass: ["BaseElement"], properties: [{ name: "messagePath", type: "FormalExpression" }, { name: "messageRef", type: "Message", isAttr: !0, isReference: !0 }] }, { name: "CorrelationPropertyBinding", superClass: ["BaseElement"], properties: [{ name: "dataPath", type: "FormalExpression" }, { name: "correlationPropertyRef", type: "CorrelationProperty", isAttr: !0, isReference: !0 }] }, { name: "Resource", superClass: ["RootElement"], properties: [{ name: "name", isAttr: !0, type: "String" }, { name: "resourceParameters", type: "ResourceParameter", isMany: !0 }] }, { name: "ResourceParameter", superClass: ["BaseElement"], properties: [{ name: "name", isAttr: !0, type: "String" }, { name: "isRequired", isAttr: !0, type: "Boolean" }, { name: "type", type: "ItemDefinition", isAttr: !0, isReference: !0 }] }, { name: "CorrelationSubscription", superClass: ["BaseElement"], properties: [{ name: "correlationKeyRef", type: "CorrelationKey", isAttr: !0, isReference: !0 }, { name: "correlationPropertyBinding", type: "CorrelationPropertyBinding", isMany: !0 }] }, { name: "MessageFlow", superClass: ["BaseElement"], properties: [{ name: "name", isAttr: !0, type: "String" }, { name: "sourceRef", type: "InteractionNode", isAttr: !0, isReference: !0 }, { name: "targetRef", type: "InteractionNode", isAttr: !0, isReference: !0 }, { name: "messageRef", type: "Message", isAttr: !0, isReference: !0 }] }, { name: "MessageFlowAssociation", superClass: ["BaseElement"], properties: [{ name: "innerMessageFlowRef", type: "MessageFlow", isAttr: !0, isReference: !0 }, { name: "outerMessageFlowRef", type: "MessageFlow", isAttr: !0, isReference: !0 }] }, { name: "InteractionNode", isAbstract: !0, properties: [{ name: "incomingConversationLinks", type: "ConversationLink", isMany: !0, isVirtual: !0, isReference: !0 }, { name: "outgoingConversationLinks", type: "ConversationLink", isMany: !0, isVirtual: !0, isReference: !0 }] }, { name: "Participant", superClass: ["InteractionNode", "BaseElement"], properties: [{ name: "name", isAttr: !0, type: "String" }, { name: "interfaceRef", type: "Interface", isMany: !0, isReference: !0 }, { name: "participantMultiplicity", type: "ParticipantMultiplicity" }, { name: "endPointRefs", type: "EndPoint", isMany: !0, isReference: !0 }, { name: "processRef", type: "Process", isAttr: !0, isReference: !0 }] }, { name: "ParticipantAssociation", superClass: ["BaseElement"], properties: [{ name: "innerParticipantRef", type: "Participant", isAttr: !0, isReference: !0 }, { name: "outerParticipantRef", type: "Participant", isAttr: !0, isReference: !0 }] }, { name: "ParticipantMultiplicity", properties: [{ name: "minimum", default: 0, isAttr: !0, type: "Integer" }, { name: "maximum", default: 1, isAttr: !0, type: "Integer" }], superClass: ["BaseElement"] }, { name: "Collaboration", superClass: ["RootElement"], properties: [{ name: "name", isAttr: !0, type: "String" }, { name: "isClosed", isAttr: !0, type: "Boolean" }, { name: "participants", type: "Participant", isMany: !0 }, { name: "messageFlows", type: "MessageFlow", isMany: !0 }, { name: "artifacts", type: "Artifact", isMany: !0 }, { name: "conversations", type: "ConversationNode", isMany: !0 }, { name: "conversationAssociations", type: "ConversationAssociation" }, { name: "participantAssociations", type: "ParticipantAssociation", isMany: !0 }, { name: "messageFlowAssociations", type: "MessageFlowAssociation", isMany: !0 }, { name: "correlationKeys", type: "CorrelationKey", isMany: !0 }, { name: "choreographyRef", type: "Choreography", isMany: !0, isReference: !0 }, { name: "conversationLinks", type: "ConversationLink", isMany: !0 }] }, { name: "ChoreographyActivity", isAbstract: !0, superClass: ["FlowNode"], properties: [{ name: "participantRef", type: "Participant", isMany: !0, isReference: !0 }, { name: "initiatingParticipantRef", type: "Participant", isAttr: !0, isReference: !0 }, { name: "correlationKeys", type: "CorrelationKey", isMany: !0 }, { name: "loopType", type: "ChoreographyLoopType", default: "None", isAttr: !0 }] }, { name: "CallChoreography", superClass: ["ChoreographyActivity"], properties: [{ name: "calledChoreographyRef", type: "Choreography", isAttr: !0, isReference: !0 }, { name: "participantAssociations", type: "ParticipantAssociation", isMany: !0 }] }, { name: "SubChoreography", superClass: ["ChoreographyActivity", "FlowElementsContainer"], properties: [{ name: "artifacts", type: "Artifact", isMany: !0 }] }, { name: "ChoreographyTask", superClass: ["ChoreographyActivity"], properties: [{ name: "messageFlowRef", type: "MessageFlow", isMany: !0, isReference: !0 }] }, { name: "Choreography", superClass: ["Collaboration", "FlowElementsContainer"] }, { name: "GlobalChoreographyTask", superClass: ["Choreography"], properties: [{ name: "initiatingParticipantRef", type: "Participant", isAttr: !0, isReference: !0 }] }, { name: "TextAnnotation", superClass: ["Artifact"], properties: [{ name: "text", type: "String" }, { name: "textFormat", default: "text/plain", isAttr: !0, type: "String" }] }, { name: "Group", superClass: ["Artifact"], properties: [{ name: "categoryValueRef", type: "CategoryValue", isAttr: !0, isReference: !0 }] }, { name: "Association", superClass: ["Artifact"], properties: [{ name: "associationDirection", type: "AssociationDirection", isAttr: !0 }, { name: "sourceRef", type: "BaseElement", isAttr: !0, isReference: !0 }, { name: "targetRef", type: "BaseElement", isAttr: !0, isReference: !0 }] }, { name: "Category", superClass: ["RootElement"], properties: [{ name: "categoryValue", type: "CategoryValue", isMany: !0 }, { name: "name", isAttr: !0, type: "String" }] }, { name: "Artifact", isAbstract: !0, superClass: ["BaseElement"] }, { name: "CategoryValue", superClass: ["BaseElement"], properties: [{ name: "categorizedFlowElements", type: "FlowElement", isMany: !0, isVirtual: !0, isReference: !0 }, { name: "value", isAttr: !0, type: "String" }] }, { name: "Activity", isAbstract: !0, superClass: ["FlowNode"], properties: [{ name: "isForCompensation", default: !1, isAttr: !0, type: "Boolean" }, { name: "default", type: "SequenceFlow", isAttr: !0, isReference: !0 }, { name: "ioSpecification", type: "InputOutputSpecification", xml: { serialize: "property" } }, { name: "boundaryEventRefs", type: "BoundaryEvent", isMany: !0, isReference: !0 }, { name: "properties", type: "Property", isMany: !0 }, { name: "dataInputAssociations", type: "DataInputAssociation", isMany: !0 }, { name: "dataOutputAssociations", type: "DataOutputAssociation", isMany: !0 }, { name: "startQuantity", default: 1, isAttr: !0, type: "Integer" }, { name: "resources", type: "ResourceRole", isMany: !0 }, { name: "completionQuantity", default: 1, isAttr: !0, type: "Integer" }, { name: "loopCharacteristics", type: "LoopCharacteristics" }] }, { name: "ServiceTask", superClass: ["Task"], properties: [{ name: "implementation", isAttr: !0, type: "String" }, { name: "operationRef", type: "Operation", isAttr: !0, isReference: !0 }] }, { name: "SubProcess", superClass: ["Activity", "FlowElementsContainer", "InteractionNode"], properties: [{ name: "triggeredByEvent", default: !1, isAttr: !0, type: "Boolean" }, { name: "artifacts", type: "Artifact", isMany: !0 }] }, { name: "LoopCharacteristics", isAbstract: !0, superClass: ["BaseElement"] }, { name: "MultiInstanceLoopCharacteristics", superClass: ["LoopCharacteristics"], properties: [{ name: "isSequential", default: !1, isAttr: !0, type: "Boolean" }, { name: "behavior", type: "MultiInstanceBehavior", default: "All", isAttr: !0 }, { name: "loopCardinality", type: "Expression", xml: { serialize: "xsi:type" } }, { name: "loopDataInputRef", type: "ItemAwareElement", isReference: !0 }, { name: "loopDataOutputRef", type: "ItemAwareElement", isReference: !0 }, { name: "inputDataItem", type: "DataInput", xml: { serialize: "property" } }, { name: "outputDataItem", type: "DataOutput", xml: { serialize: "property" } }, { name: "complexBehaviorDefinition", type: "ComplexBehaviorDefinition", isMany: !0 }, { name: "completionCondition", type: "Expression", xml: { serialize: "xsi:type" } }, { name: "oneBehaviorEventRef", type: "EventDefinition", isAttr: !0, isReference: !0 }, { name: "noneBehaviorEventRef", type: "EventDefinition", isAttr: !0, isReference: !0 }] }, { name: "StandardLoopCharacteristics", superClass: ["LoopCharacteristics"], properties: [{ name: "testBefore", default: !1, isAttr: !0, type: "Boolean" }, { name: "loopCondition", type: "Expression", xml: { serialize: "xsi:type" } }, { name: "loopMaximum", type: "Integer", isAttr: !0 }] }, { name: "CallActivity", superClass: ["Activity", "InteractionNode"], properties: [{ name: "calledElement", type: "String", isAttr: !0 }] }, { name: "Task", superClass: ["Activity", "InteractionNode"] }, { name: "SendTask", superClass: ["Task"], properties: [{ name: "implementation", isAttr: !0, type: "String" }, { name: "operationRef", type: "Operation", isAttr: !0, isReference: !0 }, { name: "messageRef", type: "Message", isAttr: !0, isReference: !0 }] }, { name: "ReceiveTask", superClass: ["Task"], properties: [{ name: "implementation", isAttr: !0, type: "String" }, { name: "instantiate", default: !1, isAttr: !0, type: "Boolean" }, { name: "operationRef", type: "Operation", isAttr: !0, isReference: !0 }, { name: "messageRef", type: "Message", isAttr: !0, isReference: !0 }] }, { name: "ScriptTask", superClass: ["Task"], properties: [{ name: "scriptFormat", isAttr: !0, type: "String" }, { name: "script", type: "String" }] }, { name: "BusinessRuleTask", superClass: ["Task"], properties: [{ name: "implementation", isAttr: !0, type: "String" }] }, { name: "AdHocSubProcess", superClass: ["SubProcess"], properties: [{ name: "completionCondition", type: "Expression", xml: { serialize: "xsi:type" } }, { name: "ordering", type: "AdHocOrdering", isAttr: !0 }, { name: "cancelRemainingInstances", default: !0, isAttr: !0, type: "Boolean" }] }, { name: "Transaction", superClass: ["SubProcess"], properties: [{ name: "protocol", isAttr: !0, type: "String" }, { name: "method", isAttr: !0, type: "String" }] }, { name: "GlobalScriptTask", superClass: ["GlobalTask"], properties: [{ name: "scriptLanguage", isAttr: !0, type: "String" }, { name: "script", isAttr: !0, type: "String" }] }, { name: "GlobalBusinessRuleTask", superClass: ["GlobalTask"], properties: [{ name: "implementation", isAttr: !0, type: "String" }] }, { name: "ComplexBehaviorDefinition", superClass: ["BaseElement"], properties: [{ name: "condition", type: "FormalExpression" }, { name: "event", type: "ImplicitThrowEvent" }] }, { name: "ResourceRole", superClass: ["BaseElement"], properties: [{ name: "resourceRef", type: "Resource", isReference: !0 }, { name: "resourceParameterBindings", type: "ResourceParameterBinding", isMany: !0 }, { name: "resourceAssignmentExpression", type: "ResourceAssignmentExpression" }, { name: "name", isAttr: !0, type: "String" }] }, { name: "ResourceParameterBinding", properties: [{ name: "expression", type: "Expression", xml: { serialize: "xsi:type" } }, { name: "parameterRef", type: "ResourceParameter", isAttr: !0, isReference: !0 }], superClass: ["BaseElement"] }, { name: "ResourceAssignmentExpression", properties: [{ name: "expression", type: "Expression", xml: { serialize: "xsi:type" } }], superClass: ["BaseElement"] }, { name: "Import", properties: [{ name: "importType", isAttr: !0, type: "String" }, { name: "location", isAttr: !0, type: "String" }, { name: "namespace", isAttr: !0, type: "String" }] }, { name: "Definitions", superClass: ["BaseElement"], properties: [{ name: "name", isAttr: !0, type: "String" }, { name: "targetNamespace", isAttr: !0, type: "String" }, { name: "expressionLanguage", default: "http://www.w3.org/1999/XPath", isAttr: !0, type: "String" }, { name: "typeLanguage", default: "http://www.w3.org/2001/XMLSchema", isAttr: !0, type: "String" }, { name: "imports", type: "Import", isMany: !0 }, { name: "extensions", type: "Extension", isMany: !0 }, { name: "rootElements", type: "RootElement", isMany: !0 }, { name: "diagrams", isMany: !0, type: "bpmndi:BPMNDiagram" }, { name: "exporter", isAttr: !0, type: "String" }, { name: "relationships", type: "Relationship", isMany: !0 }, { name: "exporterVersion", isAttr: !0, type: "String" }] }], enumerations: [{ name: "ProcessType", literalValues: [{ name: "None" }, { name: "Public" }, { name: "Private" }] }, { name: "GatewayDirection", literalValues: [{ name: "Unspecified" }, { name: "Converging" }, { name: "Diverging" }, { name: "Mixed" }] }, { name: "EventBasedGatewayType", literalValues: [{ name: "Parallel" }, { name: "Exclusive" }] }, { name: "RelationshipDirection", literalValues: [{ name: "None" }, { name: "Forward" }, { name: "Backward" }, { name: "Both" }] }, { name: "ItemKind", literalValues: [{ name: "Physical" }, { name: "Information" }] }, { name: "ChoreographyLoopType", literalValues: [{ name: "None" }, { name: "Standard" }, { name: "MultiInstanceSequential" }, { name: "MultiInstanceParallel" }] }, { name: "AssociationDirection", literalValues: [{ name: "None" }, { name: "One" }, { name: "Both" }] }, { name: "MultiInstanceBehavior", literalValues: [{ name: "None" }, { name: "One" }, { name: "All" }, { name: "Complex" }] }, { name: "AdHocOrdering", literalValues: [{ name: "Parallel" }, { name: "Sequential" }] }], xml: { tagAlias: "lowerCase", typePrefix: "t" } }, bpmndi: { name: "BPMNDI", uri: "http://www.omg.org/spec/BPMN/20100524/DI", prefix: "bpmndi", types: [{ name: "BPMNDiagram", properties: [{ name: "plane", type: "BPMNPlane", redefines: "di:Diagram#rootElement" }, { name: "labelStyle", type: "BPMNLabelStyle", isMany: !0 }], superClass: ["di:Diagram"] }, { name: "BPMNPlane", properties: [{ name: "bpmnElement", isAttr: !0, isReference: !0, type: "bpmn:BaseElement", redefines: "di:DiagramElement#modelElement" }], superClass: ["di:Plane"] }, { name: "BPMNShape", properties: [{ name: "bpmnElement", isAttr: !0, isReference: !0, type: "bpmn:BaseElement", redefines: "di:DiagramElement#modelElement" }, { name: "isHorizontal", isAttr: !0, type: "Boolean" }, { name: "isExpanded", isAttr: !0, type: "Boolean" }, { name: "isMarkerVisible", isAttr: !0, type: "Boolean" }, { name: "label", type: "BPMNLabel" }, { name: "isMessageVisible", isAttr: !0, type: "Boolean" }, { name: "participantBandKind", type: "ParticipantBandKind", isAttr: !0 }, { name: "choreographyActivityShape", type: "BPMNShape", isAttr: !0, isReference: !0 }], superClass: ["di:LabeledShape"] }, { name: "BPMNEdge", properties: [{ name: "label", type: "BPMNLabel" }, { name: "bpmnElement", isAttr: !0, isReference: !0, type: "bpmn:BaseElement", redefines: "di:DiagramElement#modelElement" }, { name: "sourceElement", isAttr: !0, isReference: !0, type: "di:DiagramElement", redefines: "di:Edge#source" }, { name: "targetElement", isAttr: !0, isReference: !0, type: "di:DiagramElement", redefines: "di:Edge#target" }, { name: "messageVisibleKind", type: "MessageVisibleKind", isAttr: !0, default: "initiating" }], superClass: ["di:LabeledEdge"] }, { name: "BPMNLabel", properties: [{ name: "labelStyle", type: "BPMNLabelStyle", isAttr: !0, isReference: !0, redefines: "di:DiagramElement#style" }], superClass: ["di:Label"] }, { name: "BPMNLabelStyle", properties: [{ name: "font", type: "dc:Font" }], superClass: ["di:Style"] }], enumerations: [{ name: "ParticipantBandKind", literalValues: [{ name: "top_initiating" }, { name: "middle_initiating" }, { name: "bottom_initiating" }, { name: "top_non_initiating" }, { name: "middle_non_initiating" }, { name: "bottom_non_initiating" }] }, { name: "MessageVisibleKind", literalValues: [{ name: "initiating" }, { name: "non_initiating" }] }], associations: [] }, dc: { name: "DC", uri: "http://www.omg.org/spec/DD/20100524/DC", prefix: "dc", types: [{ name: "Boolean" }, { name: "Integer" }, { name: "Real" }, { name: "String" }, { name: "Font", properties: [{ name: "name", type: "String", isAttr: !0 }, { name: "size", type: "Real", isAttr: !0 }, { name: "isBold", type: "Boolean", isAttr: !0 }, { name: "isItalic", type: "Boolean", isAttr: !0 }, { name: "isUnderline", type: "Boolean", isAttr: !0 }, { name: "isStrikeThrough", type: "Boolean", isAttr: !0 }] }, { name: "Point", properties: [{ name: "x", type: "Real", default: "0", isAttr: !0 }, { name: "y", type: "Real", default: "0", isAttr: !0 }] }, { name: "Bounds", properties: [{ name: "x", type: "Real", default: "0", isAttr: !0 }, { name: "y", type: "Real", default: "0", isAttr: !0 }, { name: "width", type: "Real", isAttr: !0 }, { name: "height", type: "Real", isAttr: !0 }] }], associations: [] }, di: { name: "DI", uri: "http://www.omg.org/spec/DD/20100524/DI", prefix: "di", types: [{ name: "DiagramElement", isAbstract: !0, properties: [{ name: "id", isAttr: !0, isId: !0, type: "String" }, { name: "extension", type: "Extension" }, { name: "owningDiagram", type: "Diagram", isReadOnly: !0, isVirtual: !0, isReference: !0 }, { name: "owningElement", type: "DiagramElement", isReadOnly: !0, isVirtual: !0, isReference: !0 }, { name: "modelElement", isReadOnly: !0, isVirtual: !0, isReference: !0, type: "Element" }, { name: "style", type: "Style", isReadOnly: !0, isVirtual: !0, isReference: !0 }, { name: "ownedElement", type: "DiagramElement", isReadOnly: !0, isMany: !0, isVirtual: !0 }] }, { name: "Node", isAbstract: !0, superClass: ["DiagramElement"] }, { name: "Edge", isAbstract: !0, superClass: ["DiagramElement"], properties: [{ name: "source", type: "DiagramElement", isReadOnly: !0, isVirtual: !0, isReference: !0 }, { name: "target", type: "DiagramElement", isReadOnly: !0, isVirtual: !0, isReference: !0 }, { name: "waypoint", isUnique: !1, isMany: !0, type: "dc:Point", xml: { serialize: "xsi:type" } }] }, { name: "Diagram", isAbstract: !0, properties: [{ name: "id", isAttr: !0, isId: !0, type: "String" }, { name: "rootElement", type: "DiagramElement", isReadOnly: !0, isVirtual: !0 }, { name: "name", isAttr: !0, type: "String" }, { name: "documentation", isAttr: !0, type: "String" }, { name: "resolution", isAttr: !0, type: "Real" }, { name: "ownedStyle", type: "Style", isReadOnly: !0, isMany: !0, isVirtual: !0 }] }, { name: "Shape", isAbstract: !0, superClass: ["Node"], properties: [{ name: "bounds", type: "dc:Bounds" }] }, { name: "Plane", isAbstract: !0, superClass: ["Node"], properties: [{ name: "planeElement", type: "DiagramElement", subsettedProperty: "DiagramElement-ownedElement", isMany: !0 }] }, { name: "LabeledEdge", isAbstract: !0, superClass: ["Edge"], properties: [{ name: "ownedLabel", type: "Label", isReadOnly: !0, subsettedProperty: "DiagramElement-ownedElement", isMany: !0, isVirtual: !0 }] }, { name: "LabeledShape", isAbstract: !0, superClass: ["Shape"], properties: [{ name: "ownedLabel", type: "Label", isReadOnly: !0, subsettedProperty: "DiagramElement-ownedElement", isMany: !0, isVirtual: !0 }] }, { name: "Label", isAbstract: !0, superClass: ["Node"], properties: [{ name: "bounds", type: "dc:Bounds" }] }, { name: "Style", isAbstract: !0, properties: [{ name: "id", isAttr: !0, isId: !0, type: "String" }] }, { name: "Extension", properties: [{ name: "values", isMany: !0, type: "Element" }] }], associations: [], xml: { tagAlias: "lowerCase" } }, bioc: { name: "bpmn.io colors for BPMN", uri: "http://bpmn.io/schema/bpmn/biocolor/1.0", prefix: "bioc", types: [{ name: "ColoredShape", extends: ["bpmndi:BPMNShape"], properties: [{ name: "stroke", isAttr: !0, type: "String" }, { name: "fill", isAttr: !0, type: "String" }] }, { name: "ColoredEdge", extends: ["bpmndi:BPMNEdge"], properties: [{ name: "stroke", isAttr: !0, type: "String" }, { name: "fill", isAttr: !0, type: "String" }] }], enumerations: [], associations: [] }, color: { name: "BPMN in Color", uri: "http://www.omg.org/spec/BPMN/non-normative/color/1.0", prefix: "color", types: [{ name: "ColoredLabel", extends: ["bpmndi:BPMNLabel"], properties: [{ name: "color", isAttr: !0, type: "String" }] }, { name: "ColoredShape", extends: ["bpmndi:BPMNShape"], properties: [{ name: "background-color", isAttr: !0, type: "String" }, { name: "border-color", isAttr: !0, type: "String" }] }, { name: "ColoredEdge", extends: ["bpmndi:BPMNEdge"], properties: [{ name: "border-color", isAttr: !0, type: "String" }] }], enumerations: [], associations: [] } };
    function Rw(s, p) {
      return new Jc($({}, Sw, s), p);
    }
    var Cw = "Tried to access di from the businessObject. The di is available through the diagram element only. For more information, see https://github.com/bpmn-io/bpmn-js/issues/1472";
    function qn(s, p) {
      return s.$instanceOf(p);
    }
    function Aw(s) {
      var p = {}, h = [], m = {};
      function v(ye, me) {
        return function(He) {
          ye(He, me);
        };
      }
      function b(ye) {
        p[ye.id] = ye;
      }
      function S(ye, me) {
        try {
          var He = m[ye.id] && function(nt, st) {
            if (nt.gfx)
              throw new Error(`already rendered ${Dn(nt)}`);
            return s.element(nt, m[nt.id], st);
          }(ye, me);
          return b(ye), He;
        } catch (nt) {
          M(nt.message, { element: ye, error: nt }), console.error(`failed to import ${Dn(ye)}`, nt);
        }
      }
      function M(ye, me) {
        s.error(ye, me);
      }
      var O = this.registerDi = function(ye) {
        var me, He = ye.bpmnElement;
        He ? m[He.id] ? M(`multiple DI elements defined for ${Dn(He)}`, { element: He }) : (m[He.id] = ye, y(me = He, "di") || Object.defineProperty(me, "di", { enumerable: !1, get: function() {
          throw new Error(Cw);
        } })) : M(`no bpmnElement referenced in ${Dn(ye)}`, { element: ye });
      };
      function q(ye) {
        var me;
        me = ye.plane, O(me), x(me.planeElement, ee);
      }
      function ee(ye) {
        O(ye);
      }
      this.handleDefinitions = function(ye, me) {
        var He = ye.diagrams;
        if (me && He.indexOf(me) === -1)
          throw new Error("diagram not part of <bpmn:Definitions />");
        if (!me && He && He.length && (me = He[0]), !me)
          throw new Error("no diagram to display");
        m = {}, q(me);
        var nt = me.plane;
        if (!nt)
          throw new Error(`no plane for ${Dn(me)}`);
        var st = nt.bpmnElement;
        if (!st) {
          if (st = function(Si) {
            return g(Si.rootElements, function(wn) {
              return qn(wn, "bpmn:Process") || qn(wn, "bpmn:Collaboration");
            });
          }(ye), !st)
            throw new Error("no process or collaboration to display");
          M(`correcting missing bpmnElement on ${Dn(nt)} to ${Dn(st)}`), nt.bpmnElement = st, O(nt);
        }
        var mi, Nt, ji = function(Si, wn) {
          return s.root(Si, m[Si.id], wn);
        }(st, nt);
        if (qn(st, "bpmn:Process") || qn(st, "bpmn:SubProcess"))
          be(st, ji);
        else {
          if (!qn(st, "bpmn:Collaboration"))
            throw new Error(`unsupported bpmnElement for ${Dn(nt)}: ${Dn(st)}`);
          Nt = ji, x((mi = st).participants, v(Ft, Nt)), Y(mi.artifacts, Nt), h.push(function() {
            (function(Si, wn) {
              x(Si, v(Te, wn));
            })(mi.messageFlows, Nt);
          }), function(Si, wn) {
            var Xn = _(Si, function(St) {
              return !p[St.id] && qn(St, "bpmn:Process") && St.laneSets;
            });
            Xn.forEach(v(be, wn));
          }(ye.rootElements, ji);
        }
        pe(h);
      };
      var pe = this.handleDeferred = function() {
        for (; h.length; )
          h.shift()();
      };
      function be(ye, me) {
        Oe(ye, me), te(ye.ioSpecification, me), Y(ye.artifacts, me), b(ye);
      }
      function Te(ye, me) {
        S(ye, me);
      }
      function Re(ye, me) {
        S(ye, me);
      }
      function Ie(ye, me) {
        S(ye, me);
      }
      function re(ye, me) {
        S(ye, me);
      }
      function ve(ye, me) {
        S(ye, me);
      }
      function Y(ye, me) {
        x(ye, function(He) {
          qn(He, "bpmn:Association") ? h.push(function() {
            ve(He, me);
          }) : ve(He, me);
        });
      }
      function te(ye, me) {
        ye && (x(ye.dataInputs, v(Ie, me)), x(ye.dataOutputs, v(re, me)));
      }
      var J = this.handleSubProcess = function(ye, me) {
        Oe(ye, me), Y(ye.artifacts, me);
      };
      function ce(ye, me) {
        var He = S(ye, me);
        qn(ye, "bpmn:SubProcess") && J(ye, He || me), qn(ye, "bpmn:Activity") && te(ye.ioSpecification, me), h.push(function() {
          x(ye.dataInputAssociations, v(Re, me)), x(ye.dataOutputAssociations, v(Re, me));
        });
      }
      function ge(ye, me) {
        S(ye, me);
      }
      function Je(ye, me) {
        h.push(function() {
          var He = S(ye, me);
          ye.childLaneSet && We(ye.childLaneSet, He || me), function(nt) {
            x(nt.flowNodeRef, function(st) {
              var mi = st.get("lanes");
              mi && mi.push(nt);
            });
          }(ye);
        });
      }
      function We(ye, me) {
        x(ye.lanes, v(Je, me));
      }
      function Oe(ye, me) {
        (function(He, nt) {
          x(He, function(st) {
            qn(st, "bpmn:SequenceFlow") ? h.push(function() {
              (function(mi, Nt) {
                S(mi, Nt);
              })(st, nt);
            }) : qn(st, "bpmn:BoundaryEvent") ? h.unshift(function() {
              ce(st, nt);
            }) : qn(st, "bpmn:FlowNode") ? ce(st, nt) : qn(st, "bpmn:DataObject") || (qn(st, "bpmn:DataStoreReference") || qn(st, "bpmn:DataObjectReference") ? ge(st, nt) : M(`unrecognized flowElement ${Dn(st)} in context ${Dn(nt && nt.businessObject)}`, { element: st, context: nt }));
          });
        })(ye.flowElements, me), ye.laneSets && function(He, nt) {
          x(He, v(We, nt));
        }(ye.laneSets, me);
      }
      function Ft(ye, me) {
        var He = S(ye, me), nt = ye.processRef;
        nt && be(nt, He || me);
      }
    }
    function Pw(s, p, h) {
      var m, v, b, S = [];
      function M(O, q) {
        var ee = new Aw({ root: function(Te, Re) {
          return m.add(Te, Re);
        }, element: function(Te, Re, Ie) {
          return m.add(Te, Re, Ie);
        }, error: function(Te, Re) {
          S.push({ message: Te, context: Re });
        } });
        q = q || O.diagrams && O.diagrams[0];
        var pe = function(Te, Re) {
          if (Re) {
            var Ie, re = Re.plane.bpmnElement, ve = re;
            V(re, "bpmn:Process") || V(re, "bpmn:Collaboration") || (ve = function(ge) {
              for (var Je = ge; Je; ) {
                if (V(Je, "bpmn:Process"))
                  return Je;
                Je = Je.$parent;
              }
            }(re)), Ie = V(ve, "bpmn:Collaboration") ? ve : g(Te.rootElements, function(ge) {
              if (V(ge, "bpmn:Collaboration"))
                return g(ge.participants, function(Je) {
                  return Je.processRef === ve;
                });
            });
            var Y = [ve];
            Ie && (Y = function(ge, Je) {
              let We = [];
              return x(ge, function(Oe, Ft) {
                We.push(Je(Oe, Ft));
              }), We;
            }(Ie.participants, function(ge) {
              return ge.processRef;
            })).push(Ie);
            var te = Ey(Y), J = [Re], ce = [re];
            return x(Te.diagrams, function(ge) {
              var Je = ge.plane.bpmnElement;
              te.indexOf(Je) !== -1 && ce.indexOf(Je) === -1 && (J.push(ge), ce.push(Je));
            }), J;
          }
        }(O, q);
        if (!pe)
          throw new Error("no diagram to display");
        x(pe, function(Te) {
          ee.handleDefinitions(O, Te);
        });
        var be = q.plane.bpmnElement.id;
        b.setRootElement(b.findRoot(be + "_plane") || b.findRoot(be));
      }
      return new Promise(function(O, q) {
        try {
          return m = s.get("bpmnImporter"), v = s.get("eventBus"), b = s.get("canvas"), v.fire("import.render.start", { definitions: p }), M(p, h), v.fire("import.render.complete", { error: void 0, warnings: S }), O({ warnings: S });
        } catch (ee) {
          return ee.warnings = S, q(ee);
        }
      });
    }
    function Ey(s) {
      var p = [];
      return x(s, function(h) {
        h && (p.push(h), p = p.concat(Ey(h.flowElements)));
      }), p;
    }
    var Er, wy = '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 14.02 5.57" width="53" height="21"><path fill="currentColor" d="M1.88.92v.14c0 .41-.13.68-.4.8.33.14.46.44.46.86v.33c0 .61-.33.95-.95.95H0V0h.95c.65 0 .93.3.93.92zM.63.57v1.06h.24c.24 0 .38-.1.38-.43V.98c0-.28-.1-.4-.32-.4zm0 1.63v1.22h.36c.2 0 .32-.1.32-.39v-.35c0-.37-.12-.48-.4-.48H.63zM4.18.99v.52c0 .64-.31.98-.94.98h-.3V4h-.62V0h.92c.63 0 .94.35.94.99zM2.94.57v1.35h.3c.2 0 .3-.09.3-.37v-.6c0-.29-.1-.38-.3-.38h-.3zm2.89 2.27L6.25 0h.88v4h-.6V1.12L6.1 3.99h-.6l-.46-2.82v2.82h-.55V0h.87zM8.14 1.1V4h-.56V0h.79L9 2.4V0h.56v4h-.64zm2.49 2.29v.6h-.6v-.6zM12.12 1c0-.63.33-1 .95-1 .61 0 .95.37.95 1v2.04c0 .64-.34 1-.95 1-.62 0-.95-.37-.95-1zm.62 2.08c0 .28.13.39.33.39s.32-.1.32-.4V.98c0-.29-.12-.4-.32-.4s-.33.11-.33.4z"/><path fill="currentColor" d="M0 4.53h14.02v1.04H0zM11.08 0h.63v.62h-.63zm.63 4V1h-.63v2.98z"/></svg>', Sy = { verticalAlign: "middle" }, Ry = { color: "#404040" }, Tw = { zIndex: "1001", position: "fixed", top: "0", left: "0", right: "0", bottom: "0" }, kw = { width: "100%", height: "100%", background: "rgba(40,40,40,0.2)" }, Mw = { position: "absolute", left: "50%", top: "40%", transform: "translate(-50%)", width: "260px", padding: "10px", background: "white", boxShadow: "0 1px 4px rgba(0,0,0,0.3)", fontFamily: "Helvetica, Arial, sans-serif", fontSize: "14px", display: "flex", lineHeight: "1.3" }, Dw = '<div class="bjs-powered-by-lightbox"><div class="backdrop"></div><div class="notice"><a href="https://bpmn.io" target="_blank" rel="noopener" class="link">' + wy + '</a><span>Web-based tooling for BPMN, DMN and forms powered by <a href="https://bpmn.io" target="_blank" rel="noopener">bpmn.io</a>.</span></div></div>';
    function Ow() {
      Er || (Mn(Er = $t(Dw), Tw), Mn(Yn("svg", Er), Sy), Mn(Yn(".backdrop", Er), kw), Mn(Yn(".notice", Er), Mw), Mn(Yn(".link", Er), Ry, { margin: "15px 20px 15px 10px", alignSelf: "center" }), Gt.bind(Er, ".backdrop", "click", function(s) {
        document.body.removeChild(Er);
      })), document.body.appendChild(Er);
    }
    function Jt(s) {
      s = $({}, Nw, s), this._moddle = this._createModdle(s), this._container = this._createContainer(s), /**
         * Adds the project logo to the diagram container as
         * required by the bpmn.io license.
         *
         * @see http://bpmn.io/license
         *
         * @param {Element} container
         */
      function(p) {
        const h = $t('<a href="http://bpmn.io" target="_blank" class="bjs-powered-by" title="Powered by bpmn.io" >' + wy + "</a>");
        Mn(Yn("svg", h), Sy), Mn(h, Ry, { position: "absolute", bottom: "15px", right: "15px", zIndex: "100" }), p.appendChild(h), qe.bind(h, "click", function(m) {
          Ow(), m.preventDefault();
        });
      }(this._container), this._init(this._container, this._moddle, s);
    }
    function Qc(s, p) {
      return s.warnings = p, s;
    }
    n(Jt, Wr), Jt.prototype.importXML = async function(s, p) {
      const h = this;
      let m = [];
      try {
        let b;
        s = this._emit("import.parse.start", { xml: s }) || s;
        try {
          b = await this._moddle.fromXML(s, "bpmn:Definitions");
        } catch (pe) {
          throw this._emit("import.parse.complete", { error: pe }), pe;
        }
        let S = b.rootElement;
        const M = b.references, O = b.warnings, q = b.elementsById;
        m = m.concat(O), S = this._emit("import.parse.complete", (v = { error: null, definitions: S, elementsById: q, references: M, warnings: m }, h.get("eventBus").createEvent(v))) || S;
        const ee = await this.importDefinitions(S, p);
        return m = m.concat(ee.warnings), this._emit("import.done", { error: null, warnings: m }), { warnings: m };
      } catch (b) {
        let S = b;
        throw m = m.concat(S.warnings || []), Qc(S, m), S = function(M) {
          const O = /unparsable content <([^>]+)> detected([\s\S]*)$/.exec(M.message);
          return O && (M.message = "unparsable content <" + O[1] + "> detected; this may indicate an invalid BPMN 2.0 diagram file" + O[2]), M;
        }(S), this._emit("import.done", { error: S, warnings: S.warnings }), S;
      }
      var v;
    }, Jt.prototype.importDefinitions = async function(s, p) {
      return this._setDefinitions(s), { warnings: (await this.open(p)).warnings };
    }, Jt.prototype.open = async function(s) {
      const p = this._definitions;
      let h = s;
      if (!p) {
        const v = new Error("no XML imported");
        throw Qc(v, []), v;
      }
      if (typeof s == "string" && (h = function(v, b) {
        return b && g(v.diagrams, function(S) {
          return S.id === b;
        }) || null;
      }(p, s), !h)) {
        const v = new Error("BPMNDiagram <" + s + "> not found");
        throw Qc(v, []), v;
      }
      try {
        this.clear();
      } catch (v) {
        throw Qc(v, []), v;
      }
      const { warnings: m } = await Pw(this, p, h);
      return { warnings: m };
    }, Jt.prototype.saveXML = async function(s) {
      s = s || {};
      let p, h, m = this._definitions;
      try {
        if (!m)
          throw new Error("no definitions loaded");
        m = this._emit("saveXML.start", { definitions: m }) || m, h = (await this._moddle.toXML(m, s)).xml, h = this._emit("saveXML.serialized", { xml: h }) || h;
      } catch (b) {
        p = b;
      }
      const v = p ? { error: p } : { xml: h };
      if (this._emit("saveXML.done", v), p)
        throw p;
      return v;
    }, Jt.prototype.saveSVG = async function() {
      let s, p;
      this._emit("saveSVG.start");
      try {
        const h = this.get("canvas"), m = h.getActiveLayer(), v = Yn("defs", h._svg), b = qi(m), S = v ? "<defs>" + qi(v) + "</defs>" : "", M = m.getBBox();
        s = `<?xml version="1.0" encoding="utf-8"?>
<!-- created with bpmn-js / http://bpmn.io -->
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="` + M.width + '" height="' + M.height + '" viewBox="' + M.x + " " + M.y + " " + M.width + " " + M.height + '" version="1.1">' + S + b + "</svg>";
      } catch (h) {
        p = h;
      }
      if (this._emit("saveSVG.done", { error: p, svg: s }), p)
        throw p;
      return { svg: s };
    }, Jt.prototype._setDefinitions = function(s) {
      this._definitions = s;
    }, Jt.prototype.getModules = function() {
      return this._modules;
    }, Jt.prototype.clear = function() {
      this.getDefinitions() && Wr.prototype.clear.call(this);
    }, Jt.prototype.destroy = function() {
      Wr.prototype.destroy.call(this), ha(this._container);
    }, Jt.prototype.on = function(s, p, h, m) {
      return this.get("eventBus").on(s, p, h, m);
    }, Jt.prototype.off = function(s, p) {
      this.get("eventBus").off(s, p);
    }, Jt.prototype.attachTo = function(s) {
      if (!s)
        throw new Error("parentNode required");
      this.detach(), s.get && s.constructor.prototype.jquery && (s = s.get(0)), typeof s == "string" && (s = Yn(s)), s.appendChild(this._container), this._emit("attach", {}), this.get("canvas").resized();
    }, Jt.prototype.getDefinitions = function() {
      return this._definitions;
    }, Jt.prototype.detach = function() {
      const s = this._container, p = s.parentNode;
      p && (this._emit("detach", {}), p.removeChild(s));
    }, Jt.prototype._init = function(s, p, h) {
      const m = h.modules || this.getModules(h), v = h.additionalModules || [], b = [].concat([{ bpmnjs: ["value", this], moddle: ["value", p] }], m, v), S = $(function(M, O) {
        let q = {};
        return x(Object(M), function(ee, pe) {
          O.indexOf(pe) === -1 && (q[pe] = ee);
        }), q;
      }(h, ["additionalModules"]), { canvas: $({}, h.canvas, { container: s }), modules: b });
      Wr.call(this, S), h && h.container && this.attachTo(h.container);
    }, Jt.prototype._emit = function(s, p) {
      return this.get("eventBus").fire(s, p);
    }, Jt.prototype._createContainer = function(s) {
      const p = $t('<div class="bjs-container"></div>');
      return Mn(p, { width: Cy(s.width), height: Cy(s.height), position: s.position }), p;
    }, Jt.prototype._createModdle = function(s) {
      return new Rw($({}, this._moddleExtensions, s.moddleExtensions));
    }, Jt.prototype._modules = [];
    const Nw = { width: "100%", height: "100%", position: "relative" };
    function Cy(s) {
      return s + (u(s) ? "px" : "");
    }
    function Ea(s) {
      Jt.call(this, s);
    }
    n(Ea, Jt), Ea.prototype._modules = [D1, H1, W1, km, K1, wm], Ea.prototype._moddleExtensions = {};
    var Bw = ["c", "C"], Lw = ["v", "V"], Iw = ["y", "Y"], Ay = ["z", "Z"];
    function wr(s) {
      return !s.altKey && (s.ctrlKey || s.metaKey);
    }
    function $i(s, p) {
      return (s = c(s) ? s : [s]).indexOf(p.key) !== -1 || s.indexOf(p.code) !== -1;
    }
    function Wp(s) {
      return s.shiftKey;
    }
    var el = "keyboard.keydown", Py = "input-handle-modified-keys";
    function En(s, p) {
      var h = this;
      this._config = s || {}, this._eventBus = p, this._keydownHandler = this._keydownHandler.bind(this), this._keyupHandler = this._keyupHandler.bind(this), p.on("diagram.destroy", function() {
        h._fire("destroy"), h.unbind();
      }), p.on("diagram.init", function() {
        h._fire("init");
      }), p.on("attach", function() {
        s && s.bindTo && h.bind(s.bindTo);
      }), p.on("detach", function() {
        h.unbind();
      });
    }
    En.$inject = ["config.keyboard", "eventBus"], En.prototype._keydownHandler = function(s) {
      this._keyHandler(s, el);
    }, En.prototype._keyupHandler = function(s) {
      this._keyHandler(s, "keyboard.keyup");
    }, En.prototype._keyHandler = function(s, p) {
      if (!this._isEventIgnored(s)) {
        var h = { keyEvent: s };
        this._eventBus.fire(p || el, h) && s.preventDefault();
      }
    }, En.prototype._isEventIgnored = function(s) {
      return !!s.defaultPrevented || ((p = s.target) && (H(p, "input, textarea") || p.contentEditable === "true") || function(h) {
        return h && H(h, "button, input[type=submit], input[type=button], a[href], [aria-role=button]");
      }(s.target) && $i([" ", "Enter"], s)) && this._isModifiedKeyIgnored(s);
      var p;
    }, En.prototype._isModifiedKeyIgnored = function(s) {
      return !wr(s) || this._getAllowedModifiers(s.target).indexOf(s.key) === -1;
    }, En.prototype._getAllowedModifiers = function(s) {
      var p = ue(s, "[" + Py + "]", !0);
      return !p || this._node && !this._node.contains(p) ? [] : p.getAttribute(Py).split(",");
    }, En.prototype.bind = function(s) {
      this.unbind(), this._node = s, qe.bind(s, "keydown", this._keydownHandler), qe.bind(s, "keyup", this._keyupHandler), this._fire("bind");
    }, En.prototype.getBinding = function() {
      return this._node;
    }, En.prototype.unbind = function() {
      var s = this._node;
      s && (this._fire("unbind"), qe.unbind(s, "keydown", this._keydownHandler), qe.unbind(s, "keyup", this._keyupHandler)), this._node = null;
    }, En.prototype._fire = function(s) {
      this._eventBus.fire("keyboard." + s, { node: this._node });
    }, En.prototype.addListener = function(s, p, h) {
      d(s) && (h = p, p = s, s = 1e3), this._eventBus.on(h || el, s, p);
    }, En.prototype.removeListener = function(s, p) {
      this._eventBus.off(p || el, s);
    }, En.prototype.hasModifier = function(s) {
      return s.ctrlKey || s.metaKey || s.shiftKey || s.altKey;
    }, En.prototype.isCmd = wr, En.prototype.isShift = Wp, En.prototype.isKey = $i;
    function Gp(s, p) {
      var h = this;
      s.on("editorActions.init", 500, function(m) {
        var v = m.editorActions;
        h.registerBindings(p, v);
      });
    }
    Gp.$inject = ["eventBus", "keyboard"], Gp.prototype.registerBindings = function(s, p) {
      function h(m, v) {
        p.isRegistered(m) && s.addListener(v);
      }
      h("undo", function(m) {
        if (function(v) {
          return wr(v) && !Wp(v) && $i(Ay, v);
        }(m.keyEvent))
          return p.trigger("undo"), !0;
      }), h("redo", function(m) {
        if (function(v) {
          return wr(v) && ($i(Iw, v) || $i(Ay, v) && Wp(v));
        }(m.keyEvent))
          return p.trigger("redo"), !0;
      }), h("copy", function(m) {
        if (function(v) {
          return wr(v) && $i(Bw, v);
        }(m.keyEvent))
          return p.trigger("copy"), !0;
      }), h("paste", function(m) {
        if (function(v) {
          return wr(v) && $i(Lw, v);
        }(m.keyEvent))
          return p.trigger("paste"), !0;
      }), h("stepZoom", function(m) {
        var v = m.keyEvent;
        if ($i(["+", "Add", "="], v) && wr(v))
          return p.trigger("stepZoom", { value: 1 }), !0;
      }), h("stepZoom", function(m) {
        var v = m.keyEvent;
        if ($i(["-", "Subtract"], v) && wr(v))
          return p.trigger("stepZoom", { value: -1 }), !0;
      }), h("zoom", function(m) {
        var v = m.keyEvent;
        if ($i("0", v) && wr(v))
          return p.trigger("zoom", { value: 1 }), !0;
      }), h("removeSelection", function(m) {
        if ($i(["Backspace", "Delete", "Del"], m.keyEvent))
          return p.trigger("removeSelection"), !0;
      });
    };
    var $w = { __init__: ["keyboard", "keyboardBindings"], keyboard: ["type", En], keyboardBindings: ["type", Gp] }, jw = { moveSpeed: 50, moveSpeedAccelerated: 200 };
    function Ty(s, p, h) {
      var m = this;
      this._config = $({}, jw, s || {}), p.addListener(function(v) {
        var b = v.keyEvent, S = m._config;
        if (p.isCmd(b) && p.isKey(["ArrowLeft", "Left", "ArrowUp", "Up", "ArrowDown", "Down", "ArrowRight", "Right"], b)) {
          var M, O = p.isShift(b) ? S.moveSpeedAccelerated : S.moveSpeed;
          switch (b.key) {
            case "ArrowLeft":
            case "Left":
              M = "left";
              break;
            case "ArrowUp":
            case "Up":
              M = "up";
              break;
            case "ArrowRight":
            case "Right":
              M = "right";
              break;
            case "ArrowDown":
            case "Down":
              M = "down";
          }
          return m.moveCanvas({ speed: O, direction: M }), !0;
        }
      }), this.moveCanvas = function(v) {
        var b = 0, S = 0, M = v.speed / Math.min(Math.sqrt(h.viewbox().scale), 1);
        switch (v.direction) {
          case "left":
            b = M;
            break;
          case "up":
            S = M;
            break;
          case "right":
            b = -M;
            break;
          case "down":
            S = -M;
        }
        h.scroll({ dx: b, dy: S });
      };
    }
    Ty.$inject = ["config.keyboardMove", "keyboard", "canvas"];
    var Fw = { __depends__: [$w], __init__: ["keyboardMove"], keyboardMove: ["type", Ty] }, Hw = /^djs-cursor-.*$/;
    function ky(s) {
      var p = To(document.body);
      p.removeMatching(Hw), s && p.add("djs-cursor-" + s);
    }
    var zw = 5e3;
    function My(s, p) {
      return { x: s.x - p.x, y: s.y - p.y };
    }
    function Dy(s, p) {
      var h;
      function m(b) {
        var S, M = h.start, O = h.button, q = jm(b), ee = My(q, M);
        !h.dragging && (S = ee, Math.sqrt(Math.pow(S.x, 2) + Math.pow(S.y, 2)) > 15) && (h.dragging = !0, O === 0 && function(pe, be) {
          function Te() {
            return !1;
          }
          be = be || "element.click", pe.once(be, zw, Te);
        }(s), ky("grab")), h.dragging && (ee = My(q, h.last || h.start), p.scroll({ dx: ee.x, dy: ee.y }), h.last = q), b.preventDefault();
      }
      function v(b) {
        qe.unbind(document, "mousemove", m), qe.unbind(document, "mouseup", v), h = null, ky(null);
      }
      s.on("element.mousedown", 500, function(b) {
        return function(S) {
          if (!ue(S.target, ".djs-draggable")) {
            var M = S.button;
            if (!(M >= 2 || S.ctrlKey || S.shiftKey || S.altKey))
              return h = { button: M, start: jm(S) }, qe.bind(document, "mousemove", m), qe.bind(document, "mouseup", v), !0;
          }
        }(b.originalEvent);
      }), this.isActive = function() {
        return !!h;
      };
    }
    Dy.$inject = ["eventBus", "canvas"];
    var Vw = { __init__: ["moveCanvas"], moveCanvas: ["type", Dy] };
    function Up(s) {
      return Math.log(s) / Math.log(10);
    }
    function Oy(s, p) {
      var h = Up(s.min), m = Up(s.max);
      return (Math.abs(h) + Math.abs(m)) / p;
    }
    var Ww = Math.sign || function(s) {
      return s >= 0 ? 1 : -1;
    }, Yp = { min: 0.2, max: 4 };
    function Ji(s, p, h) {
      s = s || {}, this._enabled = !1, this._canvas = h, this._container = h._container, this._handleWheel = W(this._handleWheel, this), this._totalDelta = 0, this._scale = s.scale || 0.75;
      var m = this;
      p.on("canvas.init", function(v) {
        m._init(s.enabled !== !1);
      });
    }
    Ji.$inject = ["config.zoomScroll", "eventBus", "canvas"], Ji.prototype.scroll = function(s) {
      this._canvas.scroll(s);
    }, Ji.prototype.reset = function() {
      this._canvas.zoom("fit-viewport");
    }, Ji.prototype.zoom = function(s, p) {
      var h = Oy(Yp, 20);
      this._totalDelta += s, Math.abs(this._totalDelta) > 0.1 && (this._zoom(s, p, h), this._totalDelta = 0);
    }, Ji.prototype._handleWheel = function(s) {
      if (!ue(s.target, ".djs-scrollable", !0)) {
        var p = this._container;
        s.preventDefault();
        var h, m = s.ctrlKey || /mac/i.test(navigator.platform) && s.metaKey, v = s.shiftKey, b = -1 * this._scale;
        if (b *= m ? s.deltaMode === 0 ? 0.02 : 0.32 : s.deltaMode === 0 ? 1 : 16, m) {
          var S = p.getBoundingClientRect(), M = { x: s.clientX - S.left, y: s.clientY - S.top };
          h = Math.sqrt(Math.pow(s.deltaY, 2) + Math.pow(s.deltaX, 2)) * Ww(s.deltaY) * b, this.zoom(h, M);
        } else
          h = v ? { dx: b * s.deltaY, dy: 0 } : { dx: b * s.deltaX, dy: b * s.deltaY }, this.scroll(h);
      }
    }, Ji.prototype.stepZoom = function(s, p) {
      var h = Oy(Yp, 10);
      this._zoom(s, p, h);
    }, Ji.prototype._zoom = function(s, p, h) {
      var m = this._canvas, v = s > 0 ? 1 : -1, b = Up(m.zoom()), S = Math.round(b / h) * h;
      S += h * v;
      var M, O, q = Math.pow(10, S);
      m.zoom((M = Yp, O = q, Math.max(M.min, Math.min(M.max, O))), p);
    }, Ji.prototype.toggle = function(s) {
      var p = this._container, h = this._handleWheel, m = this._enabled;
      return s === void 0 && (s = !m), m !== s && qe[s ? "bind" : "unbind"](p, "wheel", h, !1), this._enabled = s, s;
    }, Ji.prototype._init = function(s) {
      this.toggle(s);
    };
    var Gw = { __init__: ["zoomScroll"], zoomScroll: ["type", Ji] };
    function hs(s) {
      Ea.call(this, s);
    }
    return n(hs, Ea), hs.prototype._navigationModules = [Fw, Vw, Gw], hs.prototype._modules = [].concat(Ea.prototype._modules, hs.prototype._navigationModules), hs;
  });
})(g1);
var bB = g1.exports;
const xB = /* @__PURE__ */ eS(bB), EB = ({
  xml: e,
  height: t = 300,
  zoomActions: n = !0,
  onLoading: i = () => {
  },
  onError: r = () => {
  },
  onShown: o = () => {
  },
  ...a
}, c) => {
  const l = Yo(null), [u, d] = Mr();
  Wi(() => {
    const _ = l.current;
    return d(new xB({ container: _ })), () => u == null ? void 0 : u.destroy();
  }, []), Wi(() => {
    u == null || u.importXML(e), u == null || u.get("canvas").zoom("fit-viewport"), u == null || u.on("import.done", (_) => {
      const { error: x, warning: w } = _;
      if (x)
        return r(x);
      g(), o(w);
    });
  }, [u, e]);
  const f = () => {
    u.get("zoomScroll").stepZoom(0.1);
  }, y = () => {
    u.get("zoomScroll").stepZoom(-0.1);
  }, g = () => {
    u.get("canvas").zoom("fit-viewport");
  };
  return /* @__PURE__ */ De.jsx(De.Fragment, { children: /* @__PURE__ */ De.jsxs("div", { className: "bpmn-wrapper", children: [
    /* @__PURE__ */ De.jsx(
      "div",
      {
        className: "bpmn-js-react-view-container",
        ref: l,
        style: { height: t }
      }
    ),
    /* @__PURE__ */ De.jsx("div", { className: "actions-wrapper", children: n && /* @__PURE__ */ De.jsx(
      y1,
      {
        zoomIn: f,
        zoomOut: y,
        zoomFit: g
      }
    ) })
  ] }) });
}, wB = lr(EB), SB = ({ mode: e = "view", xml: t, useBpmnJsReact: n, ...i }, r) => {
  const o = {
    /** Put your mantine theme override here */
  };
  return /* @__PURE__ */ De.jsx(De.Fragment, { children: /* @__PURE__ */ De.jsx(o1, { theme: o, children: /* @__PURE__ */ De.jsxs("div", { children: [
    e == "edit" && /* @__PURE__ */ De.jsx(_B, { ...i, xml: t, ref: r, useBpmnJsReact: n }),
    e == "view" && /* @__PURE__ */ De.jsx(wB, { xml: t, ...i, ref: r, useBpmnJsReact: n })
  ] }) }) });
}, PB = lr(SB);
export {
  PB as BpmnJsReact,
  AB as useBpmnJsReact
};
//# sourceMappingURL=bpmn-js-react.es.js.map
